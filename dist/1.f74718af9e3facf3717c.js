(window.webpackJsonp=window.webpackJsonp||[]).push([[1],Array(636).concat([function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=r(a(1)),d=r(a(650)),p=r(a(32)),m=r(a(68)),h=r(a(138)),v=r(a(651)),y=r(a(3)),g=a(25),b=r(a(663));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,o.default)(a,e);var t=E(a);function a(e){var r;return(0,l.default)(this,a),(r=t.call(this,e)).handleDOMClick=function(e){r.optionsRef&&r.optionsRef.current&&!r.optionsRef.current.contains(e.target)&&r.setState({showOptions:!1})},r.triggerChange=(0,d.default)((function(){(0,r.props.onChange)(r.state.value)})),r.handleClick=function(e){r.setState({value:e,showOptions:!1},(function(){r.triggerChange()}))},r.toggleOptions=function(){r.setState((function(e){return{showOptions:!e.showOptions}}),(function(){document.removeEventListener("click",r.handleDOMClick),r.state.showOptions&&document.addEventListener("click",r.handleDOMClick)}))},r.state={value:(0,m.default)(e.value)?e.defaultValue:e.value,showOptions:!1},r.optionsRef=s.default.createRef(),r}return(0,u.default)(a,[{key:"componentDidUpdate",value:function(e,t){this.props.value!==t.value&&this.setState({value:this.props.value})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDOMClick)}},{key:"renderDetail",value:function(e){return e.map((function(e,t){return s.default.createElement("div",{key:t,className:b.default.text},s.default.createElement("div",null,e.label),e.description&&s.default.createElement("p",null,e.description))}))}},{key:"renderOption",value:function(e,t){var a=this;return s.default.createElement("div",{key:e.uid||e.value,onClick:function(){return a.handleClick(e.value)},className:(0,y.default)(b.default.option,(0,n.default)({},b.default.selected,t),(0,n.default)({},b.default.withIcon,e.icon))},this.renderIcon(e),s.default.createElement("div",{className:b.default.text},s.default.createElement("div",null,e.label),e.description&&s.default.createElement("p",null,e.description)),e.details&&this.renderDetail(e.details))}},{key:"renderIcon",value:function(e){return e.icon?(0,h.default)(e.icon)?s.default.createElement(g.Icon,{className:b.default.leftIcon,name:e.icon,size:40,type:"dark"}):e.icon:null}},{key:"renderOptions",value:function(){var e=this,t=this.props,a=t.options,r=t.disabled,n=this.state,l=n.value,u=n.showOptions;if(r||!u||(0,p.default)(a))return null;var o=a.find((function(e){return(0,v.default)(e.value,l)}));return s.default.createElement("div",{className:b.default.options,ref:this.optionsRef},o&&this.renderOption(o,!0),a.filter((function(e){return!(0,v.default)(e.value,l)})).map((function(t){return e.renderOption(t)})))}},{key:"renderControl",value:function(){var e=this.props,t=e.placeholder,a=e.options,r=e.disabled,l=this.state.value,u=a.find((function(e){return(0,v.default)(e.value,l)}))||t||{};return s.default.createElement("div",{className:(0,y.default)(b.default.control,(0,n.default)({},b.default.withIcon,u.icon)),onClick:this.toggleOptions},this.renderIcon(u),s.default.createElement("div",{className:b.default.text},s.default.createElement("div",null,u.label),u.description&&s.default.createElement("p",null,u.description)),u.details&&this.renderDetail(u.details),!r&&s.default.createElement(g.Icon,{className:b.default.rightIcon,name:"chevron-down",size:"small",clickable:!0}))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.disabled;return s.default.createElement("div",{className:(0,y.default)(b.default.wrapper,(0,n.default)({},b.default.disabled,a),t)},this.renderControl(),this.renderOptions())}}]),a}(s.default.Component);t.default=_,_.propTypes={className:f.default.string,value:f.default.any,defaultValue:f.default.any,options:f.default.array.isRequired,onChange:f.default.func},_.defaultProps={className:"",options:[],onChange:function(){}}},function(e,a,r){"use strict";(function(e){var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p=n(r(49)),m=n(r(109)),h=n(r(21)),v=n(r(56)),y=n(r(50)),g=n(r(91)),b=n(r(12)),E=n(r(13)),_=n(r(135)),O=n(r(19)),S=n(r(20)),k=n(r(18)),C=n(r(74)),R=(n(r(92)),n(r(16))),w=n(r(185)),P=n(r(73)),D=r(5),T=r(58),N=n(r(277)),I=n(r(193));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,h.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,k.default)(e);if(t){var n=(0,k.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,S.default)(this,a)}}var M=(l=function(a){(0,O.default)(A,a);var r,n,l,h,S,k,C,D,N=j(A);function A(){var e;(0,b.default)(this,A);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=N.call.apply(N,[this].concat(a)),(0,g.default)(e,"initializing",u,(0,_.default)(e)),(0,g.default)(e,"isAgentLoading",o,(0,_.default)(e)),(0,g.default)(e,"agent",i,(0,_.default)(e)),(0,g.default)(e,"isValidating",c,(0,_.default)(e)),(0,g.default)(e,"isSubmitting",s,(0,_.default)(e)),(0,g.default)(e,"version",f,(0,_.default)(e)),e.module="clusters",(0,g.default)(e,"project",d,(0,_.default)(e)),e.projects=new I.default,e.getAgentUrl=function(e){var t=e.cluster;return"kapis/cluster.kubesphere.io/v1alpha1/clusters/".concat(t,"/agent/deployment")},e.getTenantUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"kapis/tenant.kubesphere.io/v1alpha2".concat(e.getPath(t),"/").concat(e.module)},e}return(0,E.default)(A,[{key:"fetchList",value:(D=(0,y.default)(p.default.mark((function e(){var t,a,r,n,l,u,o=arguments;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},a=t.from,r=t.more,n=(0,v.default)(t,["from","more"]),this.list.isLoading=!0,n.sortBy||void 0!==n.ascending||(n.sortBy=T.LIST_DEFAULT_ORDER[this.module]||"createTime"),n.limit!==1/0&&-1!==n.limit||(n.limit=-1,n.page=1),n.limit=n.limit||10,globals.app.isMultiCluster){e.next=9;break}l={items:[T.DEFAULT_CLUSTER]},e.next=18;break;case 9:if("resource"!==a&&!globals.app.hasPermission({module:"clusters",action:"view"})){e.next=15;break}return e.next=12,request.get(this.getResourceUrl({}),n);case 12:l=e.sent,e.next=18;break;case 15:return e.next=17,request.get(this.getTenantUrl({}),n);case 17:l=e.sent;case 18:return u=(0,R.default)(l,"items",[]).map(this.mapper),this.list.update(x(x({data:r?[].concat((0,m.default)(this.list.data),(0,m.default)(u)):u,total:l.totalItems||l.total_count||u.length||0},n),{},{limit:Number(n.limit)||10,page:Number(n.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",u);case 21:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"fetchDetail",value:(C=(0,y.default)(p.default.mark((function t(a){var r,n;return p.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLoading=!0,globals.app.isMultiCluster){t.next=5;break}r=this.mapper((0,w.default)(T.DEFAULT_CLUSTER)),t.next=9;break;case 5:return t.next=7,request.get("".concat(this.getResourceUrl(a),"/").concat(a.name),null,null,(function(t,a){"Not Found"===a.reason&&e.navigateTo("/404")}));case 7:n=t.sent,r=x(x({},a),this.mapper(n));case 9:return this.detail=r,this.isLoading=!1,t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,this)}))),function(e){return C.apply(this,arguments)})},{key:"fetchAgent",value:(k=(0,y.default)(p.default.mark((function e(t){var a;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isAgentLoading=!0,e.next=3,request.get(this.getAgentUrl(t));case 3:a=e.sent,this.agent=a,this.isAgentLoading=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"validate",value:(S=(0,y.default)(p.default.mark((function e(a){var r=this;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isValidating=!0,e.next=3,request.post("kapis/cluster.kubesphere.io/v1alpha1/clusters/validation",a,{},(function(e,a){return r.isValidating=!1,window.onunhandledrejection({status:400,reason:t("Validation failed"),message:a.message}),Promise.reject()}));case 3:this.isValidating=!1;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"setProject",value:function(e){this.project=e}},{key:"fetchProjects",value:(h=(0,y.default)(p.default.mark((function e(){var t,a,r,n,l,u,o,i=this,c=arguments;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.cluster,r=t.namespace,n=t.more,l=(0,v.default)(t,["cluster","namespace","more"]),this.projects.isLoading=!0,l.sortBy||void 0!==l.ascending||(l.sortBy=T.LIST_DEFAULT_ORDER[this.module]||"createTime"),l.limit!==1/0&&-1!==l.limit||(l.limit=-1,l.page=1),l.limit=l.limit||10,e.next=7,request.get("kapis/resources.kubesphere.io/v1alpha3".concat(this.getPath({cluster:a,namespace:r}),"/namespaces"),x({labelSelector:"!kubesphere.io/devopsproject"},l));case 7:u=e.sent,o=(0,R.default)(u,"items",[]).map((function(e){return x({cluster:a},i.mapper(e))})),this.projects.update(x(x({data:n?[].concat((0,m.default)(this.projects.data),(0,m.default)(o)):o,total:u.totalItems||u.total_count||o.length||0},l),{},{limit:Number(l.limit)||10,page:Number(l.page)||1,isLoading:!1},this.projects.silent?{}:{selectedRowKeys:[]}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"fetchVersion",value:(l=(0,y.default)(p.default.mark((function e(t){var a,r;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,e.next=3,request.get("kapis/clusters/".concat(a,"/version").replace("/clusters/default",""));case 3:r=e.sent,this.version=(0,R.default)(r,"kubernetes.gitVersion");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"updateKubeConfig",value:(n=(0,y.default)(p.default.mark((function e(t){var a,r;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.data,e.abrupt("return",this.submitting(request.put("/kapis/cluster.kubesphere.io/v1alpha1/clusters/".concat(a,"/kubeconfig"),r)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchClusterConfigz",value:(r=(0,y.default)(p.default.mark((function e(t){var a;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,e.next=3,this.fetchDetail({name:a});case 3:return(0,P.default)(globals,"clusterConfig.".concat(a),this.detail.configz),e.abrupt("return",""!==(0,R.default)(this.detail.configz,"ksVersion",""));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),A}(N.default),u=(0,C.default)(l.prototype,"initializing",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=(0,C.default)(l.prototype,"isAgentLoading",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i=(0,C.default)(l.prototype,"agent",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=(0,C.default)(l.prototype,"isValidating",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,C.default)(l.prototype,"isSubmitting",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,C.default)(l.prototype,"version",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=(0,C.default)(l.prototype,"project",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),(0,C.default)(l.prototype,"fetchList",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchList"),l.prototype),(0,C.default)(l.prototype,"fetchDetail",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchDetail"),l.prototype),(0,C.default)(l.prototype,"fetchAgent",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchAgent"),l.prototype),(0,C.default)(l.prototype,"validate",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"validate"),l.prototype),(0,C.default)(l.prototype,"setProject",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"setProject"),l.prototype),(0,C.default)(l.prototype,"fetchProjects",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchProjects"),l.prototype),(0,C.default)(l.prototype,"fetchVersion",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchVersion"),l.prototype),(0,C.default)(l.prototype,"updateKubeConfig",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"updateKubeConfig"),l.prototype),(0,C.default)(l.prototype,"fetchClusterConfigz",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchClusterConfigz"),l.prototype),l);a.default=M}).call(this,r(42))},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(a){(0,i.default)(c,a);var r=h(c);function c(){return(0,u.default)(this,c),r.apply(this,arguments)}return(0,o.default)(c,[{key:"pageClose",value:function(){window.opener=null,window.open("","_self",""),window.close()}},{key:"render",value:function(){var a=this.props,r=a.title,u=a.onCancel,o=a.icon,i=a.description,c=(0,l.default)(a,["title","onCancel","icon","description"]);return f.default.createElement(d.default,{visible:!0,fullScreen:!0,hideFooter:!0,title:r,icon:o,description:i,onCancel:u,className:m.default.container,headerClassName:m.default.header,bodyClassName:(0,p.default)(m.default.body,m.default.fullScreen)},f.default.createElement(e,(0,n.default)({onCancel:t.isSinglePage?this.pageClose:u},c)))}}]),c}(f.default.Component);return a};var n=r(a(71)),l=r(a(56)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(274)),p=r(a(3)),m=r(a(664));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s=n(r(21)),f=n(r(49)),d=n(r(50)),p=n(r(91)),m=n(r(12)),h=n(r(13)),v=n(r(74)),y=(n(r(92)),r(5)),g=n(r(16)),b=n(r(655)),E=r(25);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=(l=function(){function e(t){var a=this;(0,m.default)(this,e),this.username=(0,g.default)(globals,"user.username",""),(0,p.default)(this,"kubectl",u,this),(0,p.default)(this,"kubeconfig",o,this),(0,p.default)(this,"connected",i,this),(0,p.default)(this,"setNodename",c,this),this.reject=function(e){a.kubectl.isLoading=!1,window.onunhandledrejection(e)},(0,b.default)(this.kubectl,t)}var a,r,n;return(0,h.default)(e,[{key:"getClusterPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster;return t?"/klusters/".concat(t):""}},{key:"kubeWebsocketUrl",value:(n=(0,d.default)(f.default.mark((function e(){var t,a,r,n,l,u,o,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.kubectl,a=t.cluster,r=t.namespace,n=t.nodename,l=t.pod,u=t.container,o=t.shell,i=void 0===o?"sh":o,!n){e.next=3;break}return e.abrupt("return","kapis/terminal.kubesphere.io/v1alpha2".concat(this.getClusterPath({cluster:a}),"/nodes/").concat(n,"/exec"));case 3:return e.next=5,request.get("kapis/terminal.kubesphere.io/v1alpha2".concat(this.getClusterPath({cluster:a}),"/namespaces/").concat(r,"/pods/").concat(l,"/exec?container=").concat(u,"&shell=").concat(i),null,null,(function(e){return 404!==e.status}));case 5:if(e.sent){e.next=8;break}return e.abrupt("return","kapis/terminal.kubesphere.io/v1alpha2".concat(this.getClusterPath({cluster:a}),"/namespaces/").concat(r,"/pods/").concat(l,"?container=").concat(u,"&shell=").concat(i));case 8:return e.abrupt("return","kapis/terminal.kubesphere.io/v1alpha2".concat(this.getClusterPath({cluster:a}),"/namespaces/").concat(r,"/pods/").concat(l,"/exec?container=").concat(u,"&shell=").concat(i));case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchKubeCtl",value:(r=(0,d.default)(f.default.mark((function e(a){var r,n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.cluster,this.kubectl.isLoading=!0,e.next=4,request.get("kapis/resources.kubesphere.io/v1alpha2".concat(this.getClusterPath({cluster:r}),"/users/").concat(this.username,"/kubectl"),null,null,this.reject);case 4:(n=e.sent)||E.Notify.error({content:t("OPEN_TERMINAL_DESC")}),this.kubectl=O(O(O({},this.kubectl),{},{cluster:r},n),{},{isLoading:!1});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchKubeConfig",value:(a=(0,d.default)(f.default.mark((function e(t){var a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("kapis/resources.kubesphere.io/v1alpha2".concat(this.getClusterPath(t),"/users/").concat(this.username,"/kubeconfig"));case 2:a=e.sent,this.kubeconfig=a;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"connect",value:function(){this.connected=!0}},{key:"disconnect",value:function(){this.connected=!1}}]),e}(),u=(0,v.default)(l.prototype,"kubectl",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cluster:"",namespace:"",pod:"",container:"",nodename:"",shell:"bash",isLoading:!0}}}),o=(0,v.default)(l.prototype,"kubeconfig",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=(0,v.default)(l.prototype,"connected",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,v.default)(l.prototype,"fetchKubeCtl",[y.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchKubeCtl"),l.prototype),c=(0,v.default)(l.prototype,"setNodename",[y.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.kubectl.nodename=t}}}),(0,v.default)(l.prototype,"fetchKubeConfig",[y.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchKubeConfig"),l.prototype),(0,v.default)(l.prototype,"connect",[y.action],Object.getOwnPropertyDescriptor(l.prototype,"connect"),l.prototype),(0,v.default)(l.prototype,"disconnect",[y.action],Object.getOwnPropertyDescriptor(l.prototype,"disconnect"),l.prototype),l);a.default=S},function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=n(a(0)),d=a(70),p=a(37);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=(0,f.lazy)((function(){return a.e(13).then(a.t.bind(null,713,7))})),v=(0,d.observer)(l=function(e){(0,i.default)(a,e);var t=m(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).resizeTerminal=function(){e.terminalRef&&e.terminalRef.onResize()},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this,t=this.props.isEdgeNode;if(!this.props.url)return null;var a={theme:{background:"#181d28"}};return f.default.createElement("div",{style:{height:"100%",borderRadius:"4px",background:"#181d28",padding:"12px",color:"#fff"}},f.default.createElement(f.Suspense,{fallback:"Loading"},this.props.isLoading?"Loading":f.default.createElement(h,{websocketUrl:this.url,key:this.url,terminalOpts:a,isEdgeNode:t,ref:function(t){e.terminalRef=t}})))}},{key:"url",get:function(){return"".concat((0,p.getWebSocketProtocol)(window.location.protocol),"://").concat(window.location.host).concat((0,p.getClusterUrl)("/".concat(this.props.url)))}}]),a}(f.Component))||l;t.default=v},,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(49)),u=r(a(50)),o=r(a(12)),i=r(a(13)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=r(a(74)),p=a(5),m=r(a(32)),h=a(280);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=(n=function(e){(0,c.default)(r,e);var t,a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).module="pods",e}return(0,i.default)(r,[{key:"fetchDetail",value:(t=(0,u.default)(l.default.mark((function e(t){var a,r,n,u,o,i;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=t.name,(u=t.silent)||(this.isLoading=!0),e.next=4,request.get(this.getDetailUrl({cluster:a,namespace:r,name:n}));case 4:return o=e.sent,(i=this.mapper(o)).cluster=a,e.next=9,(0,h.getWorkloadVolumes)(i);case 9:return i.volumes=e.sent,(0,m.default)(i.volumes)||i.containers.forEach((function(e){(0,m.default)(e.volumeMounts)||e.volumeMounts.forEach((function(t){var a=i.volumes.find((function(e){return e.name===t.name}));(0,m.default)(a)||(a.containers=a.containers||[],a.containers.push(e))}))})),this.detail=i,u||(this.isLoading=!1),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),r}(r(a(277)).default),(0,d.default)(n.prototype,"fetchDetail",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),n);t.default=y},,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(49)),c=n(r(50)),s=n(r(91)),f=n(r(12)),d=n(r(13)),p=n(r(135)),m=n(r(19)),h=n(r(20)),v=n(r(18)),y=n(r(74)),g=(n(r(92)),n(r(0))),b=r(70),E=n(r(3)),_=n(r(16)),O=n(r(636)),S=n(r(641)),k=n(r(660)),C=n(r(639)),R=n(r(640)),w=n(r(637)),P=r(58),D=r(5),T=n(r(666));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var I=(0,C.default)(l=(0,b.observer)((u=function(e){(0,m.default)(n,e);var a,r=N(n);function n(){var e;(0,f.default)(this,n);for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return(e=r.call.apply(r,[this].concat(a))).state={cluster:e.props.cluster||""},e.store=new R.default,e.clusterStore=new w.default,e.terminalRef=g.default.createRef(),(0,s.default)(e,"url",o,(0,p.default)(e)),e.handleClusterChange=function(t){e.setState({cluster:t},(function(){e.getKubeWebUrl(t)}))},e.onTipsToggle=function(){var t=e.terminalRef.current;t&&t.resizeTerminal()},e.getKubeWebUrl=function(){var t=(0,c.default)(i.default.mark((function t(a){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchKubeCtl({cluster:a});case 2:return t.next=4,e.store.kubeWebsocketUrl();case 4:e.url=t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:(a=(0,c.default)(i.default.mark((function e(){var t,a=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.nodename){e.next=4;break}return this.store.setNodename(this.props.nodename),this.getKubeWebUrl(this.props.cluster),e.abrupt("return");case 4:if(globals.app.isMultiCluster){e.next=7;break}return this.getKubeWebUrl(),e.abrupt("return");case 7:if(t=this.props.cluster){e.next=15;break}return e.next=11,this.clusterStore.fetchListByK8s();case 11:t=(0,_.default)(this.clusters,"[0].value"),this.setState({cluster:t},(function(){a.getKubeWebUrl(t)})),e.next=16;break;case 15:this.getKubeWebUrl(t);case 16:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){return g.default.createElement(k.default,{wrapperClassName:T.default.kubectl,onToggleTip:this.onTipsToggle,localStorageKey:"kubectl-doc",article:this.renderTerminal(),tips:this.renderTips(),onToggle:this.onTipsToggle})}},{key:"renderTips",value:function(){return g.default.createElement("div",null,!this.props.cluster&&globals.app.isMultiCluster&&!this.props.isEdgeNode&&g.default.createElement(O.default,{options:this.clusters,value:this.state.cluster,onChange:this.handleClusterChange}),g.default.createElement("div",{className:(0,E.default)("markdown-body",T.default.doc)},t.html("KUBECTL_TIP")))}},{key:"renderTerminal",value:function(){var e=this.props.isEdgeNode;return g.default.createElement("div",{className:(0,E.default)(T.default.pane,T.default.terminal)},g.default.createElement(S.default,{isLoading:this.store.kubectl.isLoading,url:this.url,ref:this.terminalRef,isEdgeNode:e}))}},{key:"clusters",get:function(){return this.clusterStore.list.data.filter((function(e){return e.isReady})).map((function(e){return{label:e.name,value:e.name,icon:P.CLUSTER_PROVIDER_ICON[e.provider]||"kubernetes",version:(0,_.default)(e,"configz.ksVersion"),description:e.provider}}))}}]),n}(g.default.Component),o=(0,y.default)(u.prototype,"url",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=u))||l)||l;a.default=I},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(16)),d=n(r(3)),p=r(25),m=n(r(665));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={visible:"false"!==localStorage.getItem(e.localStorageKey)},e.toggleHelpDoc=function(t){localStorage.setItem(e.localStorageKey,String(t)),e.setState({visible:t},(function(){e.props.onToggle&&e.props.onToggle(t)}))},e.showHelpDoc=function(){e.toggleHelpDoc(!0)},e.hideHelpDoc=function(){e.toggleHelpDoc(!1)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.wrapperClassName,r=e.article,n=e.tips,l=this.state.visible;return s.default.createElement("div",{className:(0,d.default)(m.default.wrapper,a)},r,l?s.default.createElement("div",{className:m.default.helpDoc},s.default.createElement("div",{className:m.default.doc},n),s.default.createElement("div",{className:m.default.hiddenBtn,onClick:this.hideHelpDoc},t("HIDE_HELP_INFORMATION"))):s.default.createElement("div",{className:m.default.openHelpButton,onClick:this.showHelpDoc},s.default.createElement(p.Icon,{name:"question",size:24})))}},{key:"localStorageKey",get:function(){return"".concat((0,f.default)(globals,"user.username"),"-").concat(this.props.localStorageKey)}}]),r}(s.default.Component);a.default=v},,,function(e,t,a){e.exports={wrapper:"_3-Z2rH4dJXrmQSWl9e4ycU",disabled:"_1Dw41QGGd50RzhWJFhfH49",options:"_2Xu541Z-0bUtJcujaZkRHR",option:"_2EXRjaIiDTR4g0Dfk94wJz",control:"_1hz7Wgmx8Rghk274Q2pzcH",withIcon:"_2Vq4QaRwsRLaDLjC6rbHLK",leftIcon:"ooc_mcBxBm5WR1VuTXQgW",text:"_2zG-KdWrFpEGXbWTU-Uk_u",rightIcon:"UPnGOt9oqYtT-P8SuLo1R",selected:"_1swH00sr6Ka5DNZNLzmPRP"}},function(e,t,a){e.exports={header:"t2QGyiuuedhsHl1iBfiS8",body:"_1BhlfCMF0JpKo1rRfjU1Ad",fullScreen:"_3PvjZ5IUC0jRepbE3FYg7k",container:"_1RznfsR8LTd4iCmrnQ0oZY"}},function(e,t,a){e.exports={container:"_3GQqbfmkOPJfSk-nI8ec5T",hiddenBtn:"_1hl9IWIFi9L2PvM3rkUMGw",wrapper:"_3ExNEjVNazOqBhmfM64FHq",helpDoc:"_1WjsFdV2t4snzM2y7EREKS",doc:"fhNZgt08U4ZJ5pmxOT8M_",openHelpButton:"_2WaMAPt-326Ie_fxDOui8y"}},function(e,t,a){e.exports={kubectl:"_1_Ps1Uv_J3ijcdB2w4ku_3",pane:"_26qJc15vh0obrEXuenw0iT",doc:"_1lf3mmdEZrG4hkVHnnwZwW",tipWrapper:"n1C7tRa_I0p7LXxoe11Xm",terminal:"_2QXweMgvZ3aovIWBUb8Zsx"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(3)),d=r(25),p=n(r(2077));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=e.loading,l=void 0!==n&&n,u=e.children,o=e.extras,i=s.default.createElement("div",{className:p.default.empty},t("NO_AVAILABLE_RESOURCE_VALUE",{resource:r}));return s.default.createElement("div",{className:p.default.wrapper,"data-test":"panel-".concat(r?r.toLowerCase().split(" ").join("-"):"default")},r&&s.default.createElement("div",{className:p.default.title},r),s.default.createElement("div",{className:(0,f.default)(p.default.panel,a)},l?s.default.createElement(d.Loading,{className:p.default.loading}):u||i),o)}}]),r}(s.default.Component);a.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(109)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(32)),h=r(25),v=n(r(3)),y=r(37),g=r(58),b=n(r(2650)),E=n(r(2651)),_=n(r(2652)),O=n(r(1024));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={openTip:""},e.handleToggle=function(t){e.setState((function(e){return{openTip:e.openTip===t?"":t}}))},e.handleClose=function(t){e.hiddenTips.includes(t)||(localStorage.setItem("".concat(globals.user.username,"-banner-tips"),[].concat((0,u.default)(e.hiddenTips),[t]).join(",")),e.forceUpdate())},e}return(0,i.default)(r,[{key:"renderTips",value:function(e){var t=this;return d.default.createElement("div",{className:O.default.tips},e.filter((function(e){return!t.hiddenTips.includes(e.title)})).map((function(e,a){return d.default.createElement(b.default,(0,l.default)({key:a},e,{onClose:t.handleClose,onToggle:t.handleToggle,open:e.title===t.state.openTip}))})))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=e.description,l=e.icon,u=e.module,o=e.tips,i=e.tabs,c=e.extra,s=e.routes,f=(0,y.getDocsUrl)(u);return d.default.createElement("div",{className:(0,v.default)(O.default.wrapper,a)},d.default.createElement("div",{className:O.default.titleWrapper},d.default.createElement("div",{className:O.default.icon},d.default.createElement(h.Icon,{name:l||g.ICON_TYPES[u]||"catalog",size:48})),d.default.createElement("div",{className:O.default.title},d.default.createElement("div",{className:"h3"},r),d.default.createElement("p",{className:"text-second"},n,f&&d.default.createElement("span",{className:O.default.more},d.default.createElement(h.Icon,{name:"documentation",size:20}),d.default.createElement("a",{href:f,target:"_blank",rel:"noreferrer noopener"},t("LEARN_MORE")))))),!(0,m.default)(s)&&d.default.createElement(E.default,{routes:s}),!(0,m.default)(i)&&d.default.createElement(_.default,{tabs:i}),c,!(0,m.default)(o)&&this.renderTips(o))}},{key:"hiddenTips",get:function(){return(localStorage.getItem("".concat(globals.user.username,"-banner-tips"))||"").split(",")}}]),r}(d.default.Component);a.default=k,k.propTypes={className:p.default.string,title:p.default.string,description:p.default.string,icon:p.default.string,module:p.default.string,tips:p.default.array,routes:p.default.array,tabs:p.default.object,extra:p.default.node},k.defaultProps={tips:[],tabs:{},routes:[]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.CreateUidFactory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={IDList:e,maxID:e.length?Math.max.apply(null,e):0};return{generateUID:function(){var e=++t.maxID;return t.IDList.push(e),e},clear:function(){t.IDList=[],t.maxID=0}}},a.avgs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length,a=e.reduce((function(e,t){return e+t}),0);return a/t},a.unitTransformGroupFactory=A,a.unitTransformFactory=x,a.unitTransformMap=a.fillEmptyMetrics=a.timestampify=a.timeAliasReg=a.isSameDay=a.stopAutoRefresh=a.startAutoRefresh=a.getColorByName=a.getZeroValues=a.getTimesData=a.getLastMonitoringData=a.getXAxisTickFormatter=a.getAreaChartOps=a.getChartData=a.getFormatTime=a.getValueByUnit=a.getSuitableValue=a.getSuitableUnit=void 0;var l=n(r(109)),u=n(r(56)),o=n(r(21)),i=n(r(136)),c=n(r(32)),s=n(r(23)),f=n(r(848)),d=n(r(68)),p=n(r(299)),m=n(r(138)),h=n(r(16)),v=n(r(73)),y=n(r(295)),g=n(r(297)),b=n(r(850)),E=n(r(982)),_=r(37),O=r(58),S=n(r(137));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R={second:{conditions:[.01,0],units:["s","ms"]},cpu:{conditions:[.1,0],units:["core","m"]},memory:{conditions:[Math.pow(1024,4),Math.pow(1024,3),Math.pow(1024,2),1024,0],units:["Ti","Gi","Mi","Ki","Bytes"]},disk:{conditions:[Math.pow(1e3,4),Math.pow(1e3,3),Math.pow(1e3,2),1e3,0],units:["TB","GB","MB","KB","Bytes"]},throughput:{conditions:[Math.pow(1e3,4),Math.pow(1e3,3),Math.pow(1e3,2),1e3,0],units:["TB/s","GB/s","MB/s","KB/s","B/s"]},traffic:{conditions:[Math.pow(1e3,4),Math.pow(1e3,3),Math.pow(1e3,2),1e3,0],units:["TB/s","GB/s","MB/s","KB/s","B/s"]},bandwidth:{conditions:[Math.pow(1024,2)/8,128,0],units:["Mbps","Kbps","bps"]},number:{conditions:[Math.pow(1e3,4),Math.pow(1e3,3),Math.pow(1e3,2),1e3,0],units:["T","G","M","K",""]}},w=function(e,t){var a=R[t];if((0,c.default)(a))return"";var r=(0,s.default)(e)?e:[[0,Number(e)]],n=(0,y.default)(a.units);return a.conditions.some((function(e,t){var l=r.some((function(t){return(((0,s.default)(t)?(0,h.default)(t,"[1]"):Number(t))||0)>=e}));return l&&(n=a.units[t]),l})),n};a.getSuitableUnit=w;a.getSuitableValue=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(0,p.default)(e)&&!(0,m.default)(e)||(0,f.default)(Number(e)))return r;var n=w(e,a),l=n?" ".concat(t(n)):"",u=P(e,n||a);return"".concat(u).concat(l)};var P=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r="NAN"===e?0:parseFloat(e);switch(t){default:break;case"":case"default":return r;case"iops":return Math.round(r);case"%":r*=100;break;case"m":if((r*=1e3)<1)return 0;break;case"Ki":r/=1024;break;case"Mi":r/=Math.pow(1024,2);break;case"Gi":r/=Math.pow(1024,3);break;case"Ti":r/=Math.pow(1024,4);break;case"Bytes":case"B":case"B/s":break;case"K":case"KB":case"KB/s":r/=1e3;break;case"M":case"MB":case"MB/s":r/=Math.pow(1e3,2);break;case"G":case"GB":case"GB/s":r/=Math.pow(1e3,3);break;case"T":case"TB":case"TB/s":r/=Math.pow(1e3,4);break;case"bps":r*=8;break;case"Kbps":r=8*r/1024;break;case"Mbps":r=8*r/1024/1024;break;case"ms":r*=1e3}return 0===Number(r)?0:Number(r.toFixed(a))};a.getValueByUnit=P;var D=function(e,t){return(0,_.getLocalTime)(Number(e)).format(t?"MM-DD HH:mm":"HH:mm:ss").replace(/(\d+:\d+)(:00)$/g,"$1")};a.getFormatTime=D;var T=function(e){var t=e.type,a=e.unit,r=e.xKey,n=void 0===r?"time":r,l=e.legend,u=void 0===l?[]:l,c=e.valuesData,s=void 0===c?[]:c,f=e.dot,p=void 0===f?2:f,m=0,v=0,y={};s.forEach((function(e,r){e.forEach((function(e){var n=parseInt((0,h.default)(e,[0],0),10),l=(0,h.default)(e,[1]),o=(0,h.default)(u,[r]);n&&!y[n]&&(y[n]=u.reduce((function(e,t){return e[t]||(e[t]=null),e}),{})),null!=o&&y[n]&&(y[n][o]="-1"===l?null:P(l,(0,d.default)(a)?t:a,p)),(!m||m>n)&&(m=n),(!v||v<n)&&(v=n)}))}));var g=v-m>86400;return Object.entries(y).map((function(e){var t=(0,i.default)(e,2),a=t[0],r=t[1];return C((0,o.default)({},n,function(e){return"time"===n?D(1e3*e,g):e}(a)),r)}))};a.getChartData=T;a.getAreaChartOps=function(e){var t=e.type,a=e.title,r=e.unitType,n=e.xKey,l=void 0===n?"time":n,o=e.legend,i=void 0===o?[]:o,c=e.data,f=void 0===c?[]:c,d=(0,u.default)(e,["type","title","unitType","xKey","legend","data"]),p=((0,s.default)(f)?f:[]).map((function(e){return(0,h.default)(e,"values")||[]})),m=r?w((0,g.default)(p),r):d.unit,v=T({type:t,unit:m,xKey:l,legend:i,valuesData:p,dot:d.dot});return C(C({},d),{},{title:a,unit:m,data:v})};a.getXAxisTickFormatter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.map((function(e){var t=e.time;return+new Date(t)})),r=(0,b.default)(a),n=(0,E.default)(a);return n-r>864e4?function(e){return(0,S.default)(e).format(t("Do HH:mm"))}:function(e){return(0,S.default)(e).format("HH:mm:ss")}};a.getLastMonitoringData=function(e){var t={};return Object.entries(e).forEach((function(e){var a=(0,i.default)(e,2),r=a[0],n=a[1],l=(0,h.default)(n,"data.result[0].values",[])||[],u=(0,c.default)(l)?(0,h.default)(n,"data.result[0].value",[])||[]:(0,y.default)(l);(0,v.default)(t,"[".concat(r,"].value"),u)})),t};a.getTimesData=function(e){var t=[];return e.forEach((function(e){((0,h.default)(e,"values")||[]).forEach((function(e){var a=(0,h.default)(e,"[0]",0);t.includes(a)||t.push(a)}))})),t.sort()};a.getZeroValues=function(){for(var e=[],t=parseInt(Date.now()/1e3,10)-6e3,a=0;a<10;a++)e[a]=[t,0],t+=600;return e};a.getColorByName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#fff";return O.COLORS_MAP[e]||e};a.startAutoRefresh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=C({method:"fetchData",interval:5e3,leading:!0},t);if(e&&e[a.method]){var r=e[a.method];a.leading&&r({autoRefresh:!0}),e.timer=setInterval((function(){r({autoRefresh:!0})}),a.interval)}};a.stopAutoRefresh=function(e){e&&e.timer&&(clearInterval(e.timer),e.timer=null)};a.isSameDay=function(e,t){return Math.floor(e/864e5)===Math.floor(t/864e5)};var N=/(\d+)(\w+)/;a.timeAliasReg=N;a.timestampify=function(e){var t=e.match(N)||[],a=(0,i.default)(t,3),r=a[1],n=void 0===r?0:r,l=a[2];return Number(n)*(O.MILLISECOND_IN_TIME_UNIT[l]||0)};a.fillEmptyMetrics=function(e,t){if(!e.times||!e.start||!e.end)return t;var a=function(e){return String(e).replace(/\..*$/,"")},r=Math.floor((e.end-e.start)/e.times),n=e.times+1;return Object.values(t).forEach((function(t){var l=(0,h.default)(t,"data.result");(0,c.default)(l)||l.forEach((function(t){var l=t.values||[],u=l.reduce((function(e,t){return C(C({},e),{},(0,o.default)({},a(t[0]),t[1]))}),{});if(l.length<n){for(var i=[],c=0;c<n;c++){var s=a(e.start+c*r);i.push([s,u[s]||"0"])}t.values=i}}))})),t};var I=C(C(C(C(C({none:x([["",0]])},A([["bit",0],["Byte",8],["KB",8192],["MB",8*Math.pow(1024,2)],["GB",8*Math.pow(1024,3)],["TB",8*Math.pow(1024,4)]])),A([["bit/s",0],["Byte/s",8],["KB/s",8192],["MB/s",8*Math.pow(1024,2)],["GB/s",8*Math.pow(1024,3)],["TB/s",8*Math.pow(1024,4)]])),A([["bps",0],["Bps",8],["KBps",8192],["Mbps",Math.pow(1024,2)],["Gbps",Math.pow(1024,3)],["Tbps",Math.pow(1024,4)]])),A([["ms",0],["seconds",1e3],["minutes",6e4],["hours",36e5],["days",864e5],["weeks",6048e6],["months",2592e7]])),{},{"percent (0-100)":x([["%",0]]),"percent (0.0-1.0)":function(e,t){return x([["%",0]])(100*e,t)}});function A(e){var t=x(e),a=(0,l.default)(e),r=a.shift(),n=(0,i.default)(r,1)[0];return a.reduce((function(e,a){var r=(0,i.default)(a,2),n=r[0],l=r[1];return C(C({},e),{},(0,o.default)({},n,(function(e,a){return t(e*l,a)})))}),(0,o.default)({},n,t))}function x(e){return function(t){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t<0,n=Math.abs(t),l=0,u=0;u<e.length;u++){var o=(0,i.default)(e[u],2),c=o[1];if(!(n>=c))break;l=u}var s=(0,i.default)(e[l],2),f=s[0],d=s[1],p=0===d?n:n/d,m=p.toFixed(a);return 0===Number(m)?"0":"".concat(r?"-":"").concat(m," ").concat(f)}}a.unitTransformMap=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=D,a.withProjectList=function(e){return D(w({injectStores:["rootStore","projectStore"]},e))},a.withClusterList=function(e){return D(w({injectStores:["rootStore","clusterStore"]},e))},a.withDevOpsList=function(e){return D(w({injectStores:["rootStore","devopsStore"]},e))},a.ListPage=void 0;var l=n(r(109)),u=n(r(71)),o=n(r(49)),i=n(r(21)),c=n(r(56)),s=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(0)),y=r(5),g=r(70),b=n(r(32)),E=n(r(650)),_=r(279),O=n(r(651)),S=r(58),k=r(635),C=n(r(186));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}function D(e){return function(a){var r=(0,g.observer)(a),n=function(a){(0,p.default)(l,a);var n=P(l);function l(t){var a;return(0,f.default)(this,l),(a=n.call(this,t)).getData=(0,s.default)(o.default.mark((function e(){var t,r,n,l,u,i=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},r=t.silent,n=(0,c.default)(t,["silent"]),a.query=n,l={},a.props.clusterStore&&(l.namespace=a.props.clusterStore.project),r&&(a.list.silent=!0),u=w(w(w({},l),a.props.match.params),n),a.searchByApp&&(u.searchByApp=a.searchByApp),e.next=9,a.store.fetchList(u);case 9:a.list.silent=!1;case 10:case"end":return e.stop()}}),e)}))),a.getSortOrder=function(e){return a.list.order===e&&(a.list.reverse?"descend":"ascend")},a.getFilteredValue=function(e){return a.list.filters[e]},a.store=e.store||{},a.list=a.store.list||{},a.module=e.module||"",a.authKey=e.authKey||e.module,a.name=e.name||"",a.title="".concat(e.name,"_PL"),a.rowKey=e.rowKey||"name",a.query={},a}return(0,d.default)(l,[{key:"getTableProps",value:function(){var e=this.list,t=e.data,a=e.filters,r=void 0===a?{}:a,n=e.keyword,l=e.selectedRowKeys,u=e.isLoading,o=e.total,i=e.page,c=e.limit,s=e.silent,f={total:o,page:i,limit:c},d=!1===u&&0===o&&Object.keys(r).length<=0&&(0,b.default)(n);return{data:t,filters:r,keyword:n,pagination:f,isLoading:u,selectedRowKeys:(0,y.toJS)(l),silentLoading:s,isEmptyList:d,rowKey:this.rowKey,module:this.module,name:this.name,enabledActions:this.enabledActions,itemActions:this.defaultItemActions,tableActions:this.defaultTableActions,tableId:this.props.match.path}}},{key:"getBannerProps",value:function(){return{className:"margin-b12",title:t(this.title),description:t("".concat(this.name.replace(/\s+/g,"_").toUpperCase(),"_DESC")),module:this.module}}},{key:"render",value:function(){return v.default.createElement(r,(0,u.default)({name:this.name,module:this.module,store:this.store,prefix:this.prefix,routing:this.routing,query:this.query,bannerProps:this.getBannerProps(),tableProps:this.getTableProps(),getSortOrder:this.getSortOrder,getFilteredValue:this.getFilteredValue,enabledActions:this.enabledActions,trigger:this.trigger.bind(this),getData:this.getData},this.props))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"prefix",get:function(){return this.props.match.url}},{key:"defaultItemActions",get:function(){var e=this;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){return e.trigger("resource.baseinfo.edit",{detail:t,success:e.routing.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return e.trigger("resource.delete",{type:e.name,resource:t.name,detail:t,success:e.routing.query})}}]}},{key:"enabledActions",get:function(){return globals.app.getActions(w(w({module:this.authKey},this.props.match.params),{},{project:this.props.match.params.namespace,devops:this.props.match.params.devops}))}},{key:"defaultTableActions",get:function(){var e=this;return{onFetch:this.routing.query,onSelectRowKeys:this.list.setSelectRowKeys,selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.batch.delete",{type:e.name,rowKey:e.rowKey,success:e.routing.query})}}]}}},{key:"searchByApp",get:function(){var t;return null!==(t=e.searchByApp)&&void 0!==t&&t}}]),l}(v.default.Component),i=e.injectStores||["rootStore"];return g.inject.apply(void 0,(0,l.default)(i))((0,g.observer)((0,k.trigger)(n)))}}var T=function(e){(0,p.default)(a,e);var t=P(a);function a(){return(0,f.default)(this,a),t.apply(this,arguments)}return(0,d.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.noWatch||this.initWebsocket(),this.unsubscribe=this.routing.history.subscribe((function(t){if(t.pathname===e.props.match.url){var a=(0,_.parse)(t.search.slice(1));e.query=a||{},e.props.getData(a)}}))}},{key:"componentDidUpdate",value:function(e){(0,O.default)(e.match.params,this.props.match.params)||(this.props.getData(),this.props.noWatch||this.initWebsocket())}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),this.disposer&&this.disposer()}},{key:"initWebsocket",value:function(){var e=this,t=this.props.isFederated;if("getWatchListUrl"in this.store){var a=this.store.getWatchListUrl(this.props.match.params);this.websocket.watch(a);var r=(0,E.default)((function(t){if(!e.store.list.isLoading){var a=(0,_.parse)(location.search.slice(1));return e.props.getData(w(w(w({},a),t),{},{silent:!0}))}}),1e3),n=S.MODULE_KIND_MAP[this.props.module];t&&(n="Federated".concat(n));var l=t?C.default.federated(this.store.mapper):this.store.mapper;this.disposer=(0,y.reaction)((function(){return e.websocket.message}),this.props.onMessage||function(t){if(t.object.kind===n)if("MODIFIED"===t.type){var a=w(w({},e.props.match.params),l((0,y.toJS)(t.object)));e.store.list.updateItem(a)}else"DELETED"!==t.type&&"ADDED"!==t.type||r()})}}},{key:"render",value:function(){return this.props.children}},{key:"store",get:function(){return this.props.store}},{key:"websocket",get:function(){return this.props.rootStore.websocket}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(v.default.Component);a.ListPage=T},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=r(276),h=r(25),v=n(r(1775));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=y(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderClusterTip",value:function(){return f.default.createElement("div",null,f.default.createElement("div",{className:"tooltip-title"},t("MULTI_CLUSTER_PROJECT")),f.default.createElement("p",null,t("MULTI_CLUSTER_PROJECT_TIP")))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.avatar,r=e.icon,n=e.iconSize,u=e.title,o=e.desc,i=e.to,c=e.noLink,s=e.isMultiCluster,d=i?f.default.createElement(m.Link,{to:i},u):u;return f.default.createElement("div",{className:(0,p.default)(v.default.wrapper,t,(0,l.default)({},v.default.link,c||i))},a?f.default.createElement("img",{className:v.default.image,src:a||"/assets/default-user.svg",alt:""}):r&&f.default.createElement(h.Icon,{className:v.default.icon,name:r,size:n}),(a||r)&&s&&f.default.createElement(h.Tooltip,{content:this.renderClusterTip()},f.default.createElement("img",{className:v.default.indicator,src:"/assets/cluster.svg"})),f.default.createElement("div",{className:v.default.text},f.default.createElement("div",{className:v.default.title},d),f.default.createElement("div",{className:(0,p.default)(v.default.description,"ks-avatar-desc")},o)))}}]),r}(f.default.Component);a.default=g,g.propTypes={avatar:d.default.string,icon:d.default.string,iconSize:d.default.number,to:d.default.string},g.defaultProps={iconSize:20}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(835)),l=(0,r(a(1133)).default)(n.default);t.default=l},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),u=n(a(13)),o=n(a(19)),i=n(a(20)),c=n(a(18)),s=n(a(68)),f=r(a(0)),d=n(a(1)),p=n(a(3)),m=n(a(653)),h=n(a(1776));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(a,e);var t=v(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.style,a=e.className,r=e.name,n=e.type,l=e.total,u=e.ready,o=e.flicker;return f.default.createElement("span",{className:(0,p.default)(h.default.status,a),style:t},f.default.createElement(m.default,{className:h.default.indicator,type:n,flicker:o}),f.default.createElement("span",{className:"font-bold"},r),!(0,s.default)(l)&&!(0,s.default)(u)&&f.default.createElement("span",null," (",u,"/",l,")"))}}]),a}(f.PureComponent);t.default=y,y.propTypes={style:d.default.string,className:d.default.string,name:d.default.string,total:d.default.number,ready:d.default.number,type:d.default.string,flicker:d.default.bool},y.defaultProps={type:"Running",flicker:!1}},,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormTemplate=t.default=void 0;var n=r(a(21)),l=r(a(16)),u=r(a(185)),o=r(a(738)),i=a(58);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={deployments:function(e){return{apiVersion:"apps/v1",kind:"Deployment",metadata:{namespace:e.namespace,labels:{}},spec:{replicas:1,selector:{matchLabels:{}},template:{metadata:{labels:{}},spec:{containers:[],serviceAccount:"default"}},strategy:{type:"RollingUpdate",rollingUpdate:{maxUnavailable:"25%",maxSurge:"25%"}}}}},deploymentsSchedule:function(e){var t=e.data,a=e.includeClusters,r=(0,l.default)(t,"metadata.namespace"),n=(0,u.default)(t);(0,o.default)(n,"apiVersion"),(0,o.default)(n,"kind"),(0,o.default)(n,"metadata.name"),(0,o.default)(n,"metadata.annotations");var i={};return a.forEach((function(e){i[e]={weight:1}})),{apiVersion:"scheduling.kubefed.io/v1alpha1",kind:"ReplicaSchedulingPreference",metadata:{namespace:r},spec:{rebalance:!0,targetKind:"FederatedDeployment",totalReplicas:"",clusters:i}}},daemonsets:function(e){return{apiVersion:"apps/v1",kind:"DaemonSet",metadata:{namespace:e.namespace,labels:{}},spec:{replicas:1,selector:{matchLabels:{}},template:{metadata:{labels:{}},spec:{containers:[],serviceAccount:"default"}},updateStrategy:{type:"RollingUpdate",rollingUpdate:{maxUnavailable:"20%"}},minReadySeconds:0}}},statefulsets:function(e){return{apiVersion:"apps/v1",kind:"StatefulSet",metadata:{namespace:e.namespace,labels:{}},spec:{replicas:1,selector:{matchLabels:{}},template:{metadata:{labels:{}},spec:{containers:[],serviceAccount:"default"}},updateStrategy:{type:"RollingUpdate",rollingUpdate:{partition:0}}}}},jobs:function(e){return{apiVersion:"batch/v1",kind:"Job",metadata:{namespace:e.namespace,labels:{}},spec:{template:{metadata:{labels:{}},spec:{containers:[],restartPolicy:"Never",serviceAccount:"default"}}}}},cronjobs:function(e){return{apiVersion:"batch/v1beta1",kind:"CronJob",metadata:{namespace:e.namespace,labels:{}},spec:{concurrencyPolicy:"Forbid",jobTemplate:{metadata:{labels:{}},spec:{template:{spec:{containers:[],restartPolicy:"Never",serviceAccount:"default"}}}}}}},services:function(e){var t=e.namespace,a=e.selector;return{apiVersion:"v1",kind:"Service",metadata:{namespace:t,labels:{}},spec:{sessionAffinity:"None",selector:void 0===a?{}:a}}},ingresses:function(e){return{apiVersion:"networking.k8s.io/v1",kind:"Ingress",metadata:{namespace:e.namespace,labels:{}},spec:{rules:[]}}},configmaps:function(e){return{apiVersion:"v1",kind:"ConfigMap",metadata:{namespace:e.namespace,labels:{}}}},serviceaccounts:function(e){return{apiVersion:"v1",kind:"ServiceAccount",metadata:{namespace:e.namespace,labels:{}}}},secrets:function(e){return{apiVersion:"v1",kind:"Secret",metadata:{namespace:e.namespace,labels:{}},type:"Opaque"}},hpa:function(e){var t=e.name,a=e.namespace,r=e.target;return{apiVersion:"autoscaling/v2beta2",kind:"HorizontalPodAutoscaler",metadata:{name:t,namespace:a},spec:{scaleTargetRef:{apiVersion:r.apiVersion,kind:r.kind,name:t}}}},roles:function(e){return{apiVersion:"rbac.authorization.k8s.io/v1",kind:"Role",metadata:{namespace:e.namespace},rules:[]}},clusterroles:function(){return{apiVersion:"rbac.authorization.k8s.io/v1",kind:"ClusterRole",rules:[]}},globalroles:function(){return{apiVersion:"iam.kubesphere.io/v1alpha2",kind:"GlobalRole",rules:[]}},workspaceroles:function(){return{apiVersion:"iam.kubesphere.io/v1alpha2",kind:"WorkspaceRole",rules:[]}},volumes:function(e){return{apiVersion:"v1",kind:"PersistentVolumeClaim",metadata:{namespace:e.namespace},spec:{accessModes:["ReadWriteOnce"],resources:{requests:{storage:"10Gi"}}}}},volumesnapshotclass:function(){return{apiVersion:"snapshot.storage.k8s.io/v1beta1",deletionPolicy:"Delete",driver:"",kind:"VolumeSnapshotClass",metadata:{name:"",annotations:{}}}},storageclasses:function(){return{apiVersion:"storage.k8s.io/v1",kind:"StorageClass",metadata:{name:"",annotations:{}},parameters:{},reclaimPolicy:"Delete",allowVolumeExpansion:"false",volumeBindingMode:"WaitForFirstConsumer"}},accessors:function(e){return{apiVersion:"storage.kubesphere.io/v1alpha1",kind:"Accessor",metadata:{name:"".concat(e,"-accessor")},spec:{storageClassName:"".concat(e,"-disabled"),namespaceSelector:{fieldSelector:[{fieldExpressions:[{field:"Name",operator:"In",values:[]}]}]},workspaceSelector:{fieldSelector:[{fieldExpressions:[{field:"Name",operator:"In",values:[]}]}]}}}},project:function(){return{apiVersion:"v1",kind:"Namespace",metadata:{}}},limitRange:function(){return{apiVersion:"v1",kind:"LimitRange",metadata:{},spec:{limits:[{default:{cpu:"500m",memory:"500Mi"},defaultRequest:{cpu:"10m",memory:"10Mi"},type:"Container"}]}}},"alert-policies":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workspace,a=e.namespace;return{alert:{alert_name:""},resource_filter:{workspace:t,namespace:a,resource_type:"",rs_type_id:"",rs_filter_param:{}},policy:{creator:"",rs_type_id:"",policy_name:"",policy_description:"",policy_config:{critical:{repeat_type:"fixed-minutes",repeat_interval_initvalue:30,max_send_count:2147483648},major:{repeat_type:"fixed-minutes",repeat_interval_initvalue:120,max_send_count:5},minor:{repeat_type:"not-repeat",repeat_interval_initvalue:0,max_send_count:1}},available_start_time:"00:00:00",available_end_time:"23:59:00"},rules:[],action:{action_name:"",nf_address_list_id:""}}},rules:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.namespace;return{name:"",namespace:t,query:"",duration:"5m",labels:{severity:"warning"},annotations:{summary:"",message:""}}},applications:function(e){return{apiVersion:"app.k8s.io/v1beta1",kind:"Application",metadata:{name:"",namespace:e.namespace,labels:{"app.kubernetes.io/version":"v1"}},spec:{selector:{matchLabels:{"app.kubernetes.io/version":"v1"}},addOwnerRef:!0}}},strategies:function(e){var t=e.type;return{kind:"Strategy",apiVersion:"servicemesh.kubesphere.io/v1alpha2",metadata:{namespace:e.namespace,name:""},spec:{type:t,strategyPolicy:"WaitForWorkloadReady"}}},strategyPolicy:function(e){var t=e.name,a=e.namespace,r=e.selector;return{kind:"ServicePolicy",apiVersion:"servicemesh.kubesphere.io/v1alpha2",metadata:{name:t,namespace:a,labels:r},spec:{selector:{matchForLables:r},template:{labels:r,spec:{host:t}}}}},workspaces:function(){return{apiVersion:"tenant.kubesphere.io/v1alpha2",kind:"WorkspaceTemplate",metadata:{name:""}}},s2ibuilders:function(e){var t=e.namespace,a=e.isS2i,r=void 0===a||a,n=e.languageType;return{apiVersion:"devops.kubesphere.io/v1alpha1",kind:"S2iBuilder",metadata:{labels:{"controller-tools.k8s.io":"1.0","s2i-type.kubesphere.io":r?"s2i":"b2i"},annotations:{languageType:void 0===n?"":n},name:"",namespace:t},spec:{config:s({replicas:0,export:!0,outputBuildResult:!0,builderPullPolicy:"if-not-present"},r?{}:{isBinaryURL:!0})}}},b2iBuilders:function(e){var t=e.namespace;return{apiVersion:"devops.kubesphere.io/v1alpha1",kind:"S2iBinary",metadata:{labels:{"controller-tools.k8s.io":"1.0"},name:e.name,namespace:t}}},"volume-snapshots":function(){return{apiVersion:"snapshot.storage.k8s.io/v1alpha1",kind:"VolumeSnapshot",metadata:{name:""},spec:{source:{kind:"PersistentVolumeClaim"}}}},namespacenetworkpolicies:function(e){return{apiVersion:"network.kubesphere.io/v1alpha1",kind:"NamespaceNetworkPolicy",metadata:{namespace:e.namespace},spec:{}}},dashboards:function(e){return{apiVersion:"monitoring.kubesphere.io/v1alpha2",kind:"Dashboard",metadata:{namespace:e.namespace},spec:{}}},clusterdashboards:function(){return{apiVersion:"monitoring.kubesphere.io/v1alpha2",kind:"ClusterDashboard",metadata:{},spec:{}}},federated:function(e){var t=e.data,a=e.clusters,r=e.kind,n=(0,l.default)(t,"metadata.namespace"),i={clusters:a.map((function(e){return{name:e}}))},c=a.map((function(e){return{clusterName:e,clusterOverrides:[]}})),s=(0,u.default)(t);return(0,o.default)(s,"apiVersion"),(0,o.default)(s,"kind"),(0,o.default)(s,"metadata.name"),(0,o.default)(s,"metadata.annotations"),{apiVersion:"types.kubefed.io/v1beta1",kind:"Federated".concat(r),metadata:{namespace:n},spec:{placement:i,template:s,overrides:c}}},servicemonitors:function(e){return{apiVersion:"monitoring.coreos.com/v1",kind:"ServiceMonitor",metadata:{name:e.name,namespace:e.namespace},spec:{}}},workspacerolebinding:function(e){return{kind:"WorkspaceRoleBinding",apiVersion:"iam.kubesphere.io/v1alpha2",subjects:[{kind:"Group",apiGroup:"rbac.authorization.k8s.io",name:e.name}],roleRef:{apiGroup:"iam.kubesphere.io/v1alpha2",kind:"WorkspaceRole",name:e.role}}},rolebinding:function(e){return{subjects:[{kind:"Group",apiGroup:"rbac.authorization.k8s.io",name:e.name}],roleRef:{apiGroup:"rbac.authorization.k8s.io",kind:"Role",name:e.role}}},globalsecret:function(e){return{apiVersion:"v1",kind:"Secret",metadata:{name:e.name},type:"Opaque"}},notificationconfigs:function(e){return{apiVersion:"notification.kubesphere.io/v2beta2",kind:"Config",metadata:{name:e.name},spec:{}}},notificationreceivers:function(e){var t=e.name,a=e.type;return{apiVersion:"notification.kubesphere.io/v2beta2",kind:"Receiver",metadata:{name:t},spec:(0,n.default)({},a,{enabled:!1})}},gateways:function(){return{apiVersion:"gateway.kubesphere.io/v1alpha1",kind:"Gateway",metadata:{annotations:{"kubesphere.io/annotations":""}},spec:{controller:{replicas:1,annotations:{},config:{},scope:{enabled:!1,namespace:""}},deployment:{annotations:{},replicas:1},service:{annotations:{},type:"NodePort"}}}},notificationVerify:function(e){var t=e.user;return{config:{apiVersion:"notification.kubesphere.io/v2beta2",kind:"Config",metadata:{name:"test-user-config",labels:{app:"notification-manager",type:t?"tenant":"default",user:t}},spec:{}},receiver:{apiVersion:"notification.kubesphere.io/v2beta2",kind:"Receiver",metadata:{name:"test-user-receiver",labels:{app:"notification-manager",type:t?"tenant":"global",user:t}},spec:{}}}},cds:function(){return{kind:"Application",apiVersion:"gitops.kubesphere.io/v1alpha1",metadata:{},spec:{kind:"argo-project"}}},codeRepos:function(e){return{kind:"GitRepository",apiVersion:"devops.kubesphere.io/v1alpha3",metadata:{name:"",namespace:e.namespace},spec:{}}}},d=f;t.default=d;t.getFormTemplate=function(e,t){var a=i.MODULE_KIND_MAP[t];if(!a||!f[t])return{};var r=f[t]({namespace:e});return(0,n.default)({},a,r)}},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TinyArea",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"MediumArea",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"SimpleArea",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"MultiArea",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"PercentArea",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"SimpleBar",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"StackedBar",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"SimpleCircle",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"PieChart",{enumerable:!0,get:function(){return d.default}});var n=r(a(1592)),l=r(a(1639)),u=r(a(1641)),o=r(a(1645)),i=r(a(1647)),c=r(a(1649)),s=r(a(1651)),f=r(a(1653)),d=r(a(1206))},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(56)),u=r(a(49)),o=r(a(50)),i=r(a(12)),c=r(a(13)),s=r(a(19)),f=r(a(20)),d=r(a(18)),p=r(a(74)),m=r(a(16)),h=r(a(291)),v=a(5),y=a(37),g=a(58),b=r(a(277)),E=r(a(926)),_=r(a(748));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=(n=function(e){(0,s.default)(n,e);var t,a,r=O(n);function n(e){var t;return(0,i.default)(this,n),(t=r.call(this,e)).getServiceRequest=function(e,t){var a=new _.default;return t.namespace=t.namespace||(0,m.default)(e,"metadata.namespace"),{url:a.getListUrl(t),data:e}},t.getWorkloadRequest=function(e,a){return a.namespace=a.namespace||(0,m.default)(e,"metadata.namespace"),{url:t.getListUrl(a),data:e}},t.hpaStore=new E.default,t}return(0,c.default)(n,[{key:"create",value:(a=(0,o.default)(u.default.mark((function e(t,a){var r,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],(0,h.default)(t,"metadata")?r.push(this.getWorkloadRequest(t,a)):(n=g.MODULE_KIND_MAP[this.module],r.push(this.getWorkloadRequest(t[n],a)),(0,h.default)(t,"Service")&&r.push(this.getServiceRequest(t.Service,a))),e.abrupt("return",this.submitting((0,y.withDryRun)(r)));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"delete",value:function(e){var t=e.name,a=e.cluster,r=e.namespace,n=e.annotations,l=void 0===n?{}:n,u=[];u.push(request.delete(this.getDetailUrl({name:t,cluster:a,namespace:r}),{kind:"DeleteOptions",apiVersion:"v1",propagationPolicy:"Background"}));var o=l["kubesphere.io/relatedHPA"];return o&&u.push(this.hpaStore.delete({name:o,cluster:a,namespace:r})),this.submitting(Promise.all(u))}},{key:"batchDelete",value:function(e){var t=this,a=[];return e.forEach((function(e){var r=t.list.data.find((function(t){return t.name===e}));a.push(request.delete(t.getDetailUrl(r),{kind:"DeleteOptions",apiVersion:"v1",propagationPolicy:"Background"}));var n=(0,m.default)(r,"annotations['kubesphere.io/relatedHPA']");n&&a.push(t.hpaStore.delete({name:n,namespace:r.namespace}))})),this.submitting(Promise.all(a))}},{key:"scale",value:function(e,t){var a={spec:{replicas:t}};return this.submitting(request.patch(this.getDetailUrl(e),a))}},{key:"rerun",value:(t=(0,o.default)(u.default.mark((function e(t){var a,r,n,l,o;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.cluster,n=t.namespace,e.next=3,request.get(this.getDetailUrl({name:a,cluster:r,namespace:n}));case 3:return l=e.sent,o=(0,m.default)(l,"metadata.resourceVersion"),e.abrupt("return",this.submitting(request.post("kapis/operations.kubesphere.io/v1alpha2".concat(this.getPath({cluster:r,namespace:n}),"/jobs/").concat(a,"?action=rerun&resourceVersion=").concat(o))));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"switch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={spec:{suspend:!t}};return this.submitting(request.patch(this.getDetailUrl(e),a))}},{key:"rollBack",value:function(e,t){var a=e.module,r=(0,l.default)(e,["module"]);return this.submitting(request.patch(this.getDetailUrl(r),t,"deployments"===a?{headers:{"content-type":"application/json-patch+json"}}:null))}},{key:"stop",value:function(e){var t=e.name,a=e.cluster,r=e.namespace,n=[];return n.push(request.patch(this.getDetailUrl({name:t,cluster:a,namespace:r}),{spec:{replicas:0}})),this.submitting(Promise.all(n))}}]),n}(b.default),(0,p.default)(n.prototype,"create",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,p.default)(n.prototype,"delete",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"delete"),n.prototype),(0,p.default)(n.prototype,"batchDelete",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"batchDelete"),n.prototype),(0,p.default)(n.prototype,"scale",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"scale"),n.prototype),(0,p.default)(n.prototype,"rerun",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"rerun"),n.prototype),(0,p.default)(n.prototype,"switch",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"switch"),n.prototype),(0,p.default)(n.prototype,"rollBack",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"rollBack"),n.prototype),(0,p.default)(n.prototype,"stop",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"stop"),n.prototype),n);t.default=S},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p,m,h,v=r(a(49)),y=r(a(109)),g=r(a(21)),b=r(a(136)),E=r(a(56)),_=r(a(50)),O=r(a(91)),S=r(a(12)),k=r(a(13)),C=r(a(135)),R=r(a(19)),w=r(a(20)),P=r(a(18)),D=r(a(74)),T=(r(a(92)),r(a(73))),N=r(a(16)),I=r(a(290)),A=r(a(990)),x=r(a(185)),j=a(5),M=a(37),L=r(a(186)),U=a(58),F=r(a(277)),V=r(a(193));function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,P.default)(e);if(t){var n=(0,P.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,w.default)(this,a)}}var G=(n=function(e){(0,R.default)(G,e);var t,a,r,n,w,P,D,j,F,q=z(G);function G(e){var t;return(0,S.default)(this,G),(t=q.call(this,e.module)).list=new V.default,(0,O.default)(t,"detail",l,(0,C.default)(t)),(0,O.default)(t,"initializing",u,(0,C.default)(t)),(0,O.default)(t,"resources",o,(0,C.default)(t)),(0,O.default)(t,"isResourcesLoading",i,(0,C.default)(t)),(0,O.default)(t,"isScheduleDeployment",c,(0,C.default)(t)),(0,O.default)(t,"renderScheduleTab",s,(0,C.default)(t)),(0,O.default)(t,"scheduleTemplate",f,(0,C.default)(t)),t.deployedScheduleTemplate={},t.isScheduleProject=!1,t.getListUrl=function(e){return"".concat(t.apiVersion).concat(t.getPath(e),"/federated").concat(e.module||t.module).concat(e.dryRun?"?dryRun=All":"")},t.getScheduleListUrl=function(e){return"".concat(t.scheduleApiVersion,"/").concat(t.getPath(e),"/replicaschedulingpreferences")},t.getDetailUrl=function(e){return"".concat(t.getListUrl(e),"/").concat(e.name)},t.getWatchListUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(t.apiVersion,"/watch").concat(t.getPath(e),"/federated").concat(t.module)},t.getWatchUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(t.getWatchListUrl(e),"/").concat(e.name)},t.getResourceUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"kapis/resources.kubesphere.io/v1alpha3".concat(t.getPath(e),"/federated").concat(t.module)},(0,O.default)(t,"switchSchedule",d,(0,C.default)(t)),(0,O.default)(t,"setScheduleTemplate",p,(0,C.default)(t)),(0,O.default)(t,"setMetadata",m,(0,C.default)(t)),(0,O.default)(t,"ifRenderScheduleTab",h,(0,C.default)(t)),t.resourceStore=e,t}return(0,k.default)(G,[{key:"getPath",value:function(e){var t=e.namespace,a="";return t&&(a+="/namespaces/".concat(t)),a}},{key:"fetchList",value:(F=(0,_.default)(v.default.mark((function e(){var t,a,r,n,l,u,o,i,c,s,f=this,d=arguments;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=d.length>0&&void 0!==d[0]?d[0]:{}).workspace,a=t.namespace,r=t.more,n=(0,E.default)(t,["workspace","namespace","more"]),this.list.isLoading=!0,n.sortBy||void 0!==n.ascending||(n.sortBy="createTime"),n.limit!==1/0&&-1!==n.limit||(n.limit=-1,n.page=1),n.limit=n.limit||10,e.next=7,request.get(this.getResourceUrl({namespace:a}),this.getFilterParams(n));case 7:if(l=e.sent,u=(0,N.default)(l,"items",[]).map(L.default.federated(this.mapper)),!this.resourceStore.getResourceUrl){e.next=18;break}return o={},u.forEach((function(e){e.clusters.forEach((function(t){var a=t.name;o[a]=o[a]||[],o[a].push(e.name)}))})),e.next=14,Promise.all(Object.entries(o).map((function(e){var t=(0,b.default)(e,2),r=t[0],n=t[1];return request.get(f.resourceStore.getResourceUrl({cluster:r,namespace:a}),{names:n.join(",")},null,(function(){}))})));case 14:i=e.sent,c=Object.keys(o),s=(0,I.default)(u,"name"),i.forEach((function(e,t){var a=c[t];e&&e.items&&e.items.forEach((function(e){var t=f.mapper(e),r=t.name;s[r]&&(s[r].resources=s[r].resources||{},s[r].resources[a]=B({cluster:a},t))}))}));case 18:return this.list.update(B(B({data:r?[].concat((0,y.default)(this.list.data),(0,y.default)(u)):u,total:l.totalItems||0},n),{},{limit:Number(n.limit)||10,page:Number(n.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e,this)}))),function(){return F.apply(this,arguments)})},{key:"fetchListByK8s",value:(j=(0,_.default)(v.default.mark((function e(){var t,a,r,n,l,u,o,i=this,c=arguments;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.namespace,r=t.module,n=(0,E.default)(t,["namespace","module"]),this.list.isLoading=!0,r&&(this.module=r),l=n,e.next=6,request.get(this.getListUrl({namespace:a,module:r}),l);case 6:return u=e.sent,o=u.items.map((function(e){return B({module:r||i.module},L.default.federated(i.mapper)(e))})),(0,M.LimitsEqualRequests)(o),this.list.update({data:o,total:u.items.length,isLoading:!1}),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"fetchDetail",value:(D=(0,_.default)(v.default.mark((function e(t){var a,r;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getDetailUrl(t));case 3:return a=e.sent,r=L.default.federated(this.mapper)(a),e.next=7,this.checkIfSchedule(r);case 7:return this.detail=r,this.isLoading=!1,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"getAllScheduleProject",value:(P=(0,_.default)(v.default.mark((function e(t){return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get(this.getScheduleListUrl(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"checkIfSchedule",value:(w=(0,_.default)(v.default.mark((function e(t){var a,r,n;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllScheduleProject(t);case 2:a=e.sent,(r=a.items.filter((function(e){return e.metadata.name===t.name}))).length>0?(this.isScheduleProject=!0,this.deployedScheduleTemplate=(0,x.default)(r[0]),n=(0,N.default)(t,"_originData.metadata",{}),(0,T.default)(this.deployedScheduleTemplate,"metadata",n)):(this.isScheduleProject=!1,this.deployedScheduleTemplate={});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"fetchScheduleData",value:(n=(0,_.default)(v.default.mark((function e(t){return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("".concat(this.getScheduleListUrl(t),"/").concat(t.name));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"updateScheduleYaml",value:(r=(0,_.default)(v.default.mark((function e(t,a){var r,n;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchScheduleData(t);case 2:return r=e.sent,n=(0,N.default)(r,"metadata.resourceVersion"),(0,T.default)(a,"metadata.resourceVersion",n),e.next=7,request.put("".concat(this.getScheduleListUrl(t),"/").concat(t.name),a);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"fetchResources",value:(a=(0,_.default)(v.default.mark((function e(t){var a,r,n,l,u=this;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.clusters,r=(0,E.default)(t,["clusters"]),this.isResourcesLoading=!0,e.next=4,Promise.all(a.map((function(e){return request.get(u.resourceStore.getDetailUrl(B(B({},r),{},{cluster:e})),null,null,(function(){}))})));case 4:n=e.sent,l={},n.forEach((function(e,t){l[a[t]]=B(B({},u.mapper(e)),{},{cluster:a[t]})})),this.resources=l,this.isResourcesLoading=!1;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"create",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return e.metadata?r.push({url:this.getListUrl(a),data:e}):Object.keys(e).forEach((function(n){if(e[n].kind){var l=e[n].kind.replace("Federated",""),u=(0,A.default)(U.MODULE_KIND_MAP,(function(e){return e===l}));u&&r.push({url:t.getListUrl(B(B({},a),{},{module:u})),data:e[n]})}})),this.submitting((0,M.withDryRun)(r))}},{key:"scheduleCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[];a.push({url:this.getScheduleListUrl(t),data:e});var r=a.map((function(e){return request.post(e.url,e.data)}));return Promise.all(r)}},{key:"updateResource",value:function(e,t){this.isResourcesLoading=!0,Object.assign(this.resources,(0,g.default)({},e,B(B({},this.mapper(t)),{},{cluster:e}))),this.isResourcesLoading=!1}},{key:"deleteSchedule",value:(t=(0,_.default)(v.default.mark((function e(t){return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request.delete("".concat(this.getScheduleListUrl(t),"/").concat(t.name)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"apis/types.kubefed.io/v1beta1"}},{key:"scheduleApiVersion",get:function(){return"apis/scheduling.kubefed.io/v1alpha1"}},{key:"version",get:function(){return"types.kubefed.io/v1beta1"}},{key:"secretKind",get:function(){return"FederatedSecret"}}]),G}(F.default),l=(0,D.default)(n.prototype,"detail",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,D.default)(n.prototype,"initializing",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=(0,D.default)(n.prototype,"resources",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=(0,D.default)(n.prototype,"isResourcesLoading",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,D.default)(n.prototype,"isScheduleDeployment",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,D.default)(n.prototype,"renderScheduleTab",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,D.default)(n.prototype,"scheduleTemplate",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=(0,D.default)(n.prototype,"switchSchedule",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isScheduleDeployment=t}}}),p=(0,D.default)(n.prototype,"setScheduleTemplate",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.scheduleTemplate=(0,x.default)(t)}}}),m=(0,D.default)(n.prototype,"setMetadata",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.scheduleTemplate.metadata=t}}}),h=(0,D.default)(n.prototype,"ifRenderScheduleTab",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.renderScheduleTab=t}}}),(0,D.default)(n.prototype,"fetchList",[j.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,D.default)(n.prototype,"fetchListByK8s",[j.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchListByK8s"),n.prototype),(0,D.default)(n.prototype,"fetchDetail",[j.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),(0,D.default)(n.prototype,"fetchResources",[j.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchResources"),n.prototype),(0,D.default)(n.prototype,"create",[j.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,D.default)(n.prototype,"scheduleCreate",[j.action],Object.getOwnPropertyDescriptor(n.prototype,"scheduleCreate"),n.prototype),(0,D.default)(n.prototype,"updateResource",[j.action],Object.getOwnPropertyDescriptor(n.prototype,"updateResource"),n.prototype),n);t.default=G},,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(21)),u=r(a(56)),o=r(a(12)),i=r(a(13)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=r(a(68)),p=r(a(32)),m=r(a(283)),h=r(a(0)),v=r(a(1)),y=r(a(3)),g=a(25),b=r(a(1577));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(a,e);var t=O(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){var a=e.props,r=a.onChange,n=a.unit,l=a.min,u=a.max,o=a.integer,i=t.target.value;if((0,p.default)(i)||!o&&i.indexOf(".")>0&&-1==="".concat(e.props.value).indexOf(".")||"-"===i&&(0,p.default)(e.props.value))r(i);else{var c=Number(i);isNaN(c)||(!(0,d.default)(l)&&c<l&&(c=l),!(0,d.default)(u)&&c>u&&(c=u),o||i.startsWith("0")&&!i.startsWith("0.")||c!==Number(i)||"".concat(c)===i||(c=i),!(0,d.default)(c)&&n&&(c="".concat(c).concat(n)),r&&r(c))}},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.unit,r=e.showUnit,l=e.value,o=e.defaultValue,i=(e.onChange,e.integer,(0,u.default)(e,["className","unit","showUnit","value","defaultValue","onChange","integer"])),c=(0,d.default)(l)?o:l;a&&(c=(0,m.default)(c,a));var s=_(_({type:"text"},i),{},{value:(0,d.default)(c)?"":c,onChange:this.handleChange});return a&&r?h.default.createElement("div",{className:(0,y.default)(t,b.default.withUnit)},h.default.createElement(g.Input,s),h.default.createElement("span",null,a)):h.default.createElement(g.Input,(0,n.default)({className:t},s))}}]),a}(h.default.Component);S.propTypes={unit:v.default.string,showUnit:v.default.bool,value:v.default.oneOfType([v.default.string,v.default.number]),defaultValue:v.default.oneOfType([v.default.string,v.default.number]),min:v.default.number,max:v.default.number,integer:v.default.bool,onChange:v.default.func},S.defaultProps={unit:"",showUnit:!1,integer:!1,onChange:function(){}};var k=S;t.default=k},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(71)),u=n(a(56)),o=n(a(12)),i=n(a(13)),c=n(a(19)),s=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(1)),m=n(a(3)),h=n(a(138)),v=a(25),y=n(a(2099));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){(0,c.default)(a,e);var t=g(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"renderTitle",value:function(){var e=this.props,t=e.header,a=e.title,r=e.operations;return t||(a||r?d.default.createElement("div",{className:y.default.title},r&&d.default.createElement("div",{className:y.default.operations},r),a):null)}},{key:"renderContent",value:function(){var e=this.props,t=e.empty,a=e.children;return e.isEmpty||!a?(0,h.default)(t)?d.default.createElement("div",{className:y.default.empty},t):t:a}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.type,r=e.loading,n=(e.refreshing,e.title,e.operations,e.empty,e.children,e.isEmpty,(0,u.default)(e,["className","type","loading","refreshing","title","operations","empty","children","isEmpty"]));return d.default.createElement("div",(0,l.default)({className:(0,m.default)(y.default.card,t,y.default[a])},n),this.renderTitle(),r?d.default.createElement(v.Loading,{className:y.default.loading}):this.renderContent())}}]),a}(d.PureComponent);t.default=b,b.propTypes={className:p.default.string,type:p.default.string,loading:p.default.bool,refreshing:p.default.bool,title:p.default.oneOfType([p.default.string,p.default.element,p.default.node]),operations:p.default.oneOfType([p.default.string,p.default.element,p.default.node]),header:p.default.node,empty:p.default.oneOfType([p.default.string,p.default.element,p.default.node]),isEmpty:p.default.bool},b.defaultProps={title:"",type:"default",isEmpty:!1}},,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(21)),o=r(a(12)),i=r(a(13)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=a(5),p=a(70),m=a(276),h=a(815),v=a(58);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=(n=(0,p.inject)("rootStore"),(0,m.withRouter)(l=n(l=(0,p.observer)(l=function(e){(0,c.default)(a,e);var t=b(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.props.watch&&this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer()}},{key:"initWebsocket",value:function(){var e=this,t=this.props.stores.detailStore;if(t&&"getWatchUrl"in t){var a=t.getWatchUrl(this.props.match.params);this.websocket.watch(a);var r=v.MODULE_KIND_MAP[this.props.module],n=t.mapper;this.disposer=(0,d.reaction)((function(){return e.websocket.message}),(function(a){a.object.kind===r&&"MODIFIED"===a.type&&Object.assign(t.detail,g(g({},e.props.match.params),n((0,d.toJS)(a.object))))}))}}},{key:"inCluster",get:function(){return this.props.match.path.startsWith("/clusters")}},{key:"websocket",get:function(){return this.props.rootStore.websocket}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return globals.app.getActions(g({module:this.authKey},this.inCluster?{cluster:a}:{cluster:a,workspace:t,project:r}))}}]),a}(h.Component))||l)||l)||l);t.default=E},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(49)),o=n(r(109)),i=n(r(21)),c=n(r(56)),s=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(74)),y=n(r(32)),g=n(r(16)),b=r(5),E=r(25),_=r(58),O=n(r(277)),S=n(r(193));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var w=(l=function(e){(0,p.default)(l,e);var a,r,n=R(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"roles";return(0,f.default)(this,l),(e=n.call(this,t)).roleTemplates=new S.default,e.getResourceUrl=function(t){return"kapis/iam.kubesphere.io/v1alpha2".concat(e.getPath(t),"/").concat(e.module)},e.getListUrl=e.getResourceUrl,e}return(0,d.default)(l,[{key:"getPath",value:function(e){var t=e.cluster,a=e.workspace,r=e.namespace,n=e.devops,l="";return t&&(l+="/klusters/".concat(t)),r?"".concat(l,"/namespaces/").concat(r):n?"".concat(l,"/devops/").concat(n):a?"/workspaces/".concat(a):l}}]),(0,d.default)(l,[{key:"fetchList",value:(r=(0,s.default)(u.default.mark((function e(){var t,a,r,n,l,i,s,f,d,p=this,m=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},a=t.cluster,r=t.workspace,n=t.namespace,l=t.devops,i=t.more,s=(0,c.default)(t,["cluster","workspace","namespace","devops","more"]),this.list.isLoading=!0,s.sortBy||void 0!==s.ascending||(s.sortBy=_.LIST_DEFAULT_ORDER[this.module]||"createTime"),s.limit!==1/0&&-1!==s.limit||(s.limit=-1,s.page=1),s.limit=s.limit||10,e.next=7,request.get(this.getResourceUrl({cluster:a,workspace:r,namespace:n,devops:l}),C(C({},s),{},{annotation:"kubesphere.io/creator"}));case 7:f=e.sent,d=f.items.map((function(e){return C({cluster:a,workspace:r},p.mapper(e,l?"devopsroles":p.module))})),this.list.update(C(C({data:i?[].concat((0,o.default)(this.list.data),(0,o.default)(d)):d,total:f.totalItems||f.total_count||d.length||0},s),{},{limit:Number(s.limit)||10,page:Number(s.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"batchDelete",value:function(e,a){var r=this,n=a.cluster,l=a.workspace,u=a.namespace;if(!e.some((function(e){return r.checkIfIsPresetRole(e)})))return this.submitting(Promise.all(e.map((function(e){return request.delete(r.getDetailUrl({name:e,cluster:n,workspace:l,namespace:u}))}))));E.Notify.error(t("Error Tips"),"".concat(t("Unable to delete preset role"),": ").concat(name))}},{key:"fetchRoleTemplates",value:(a=(0,s.default)(u.default.mark((function e(t){var a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.roleTemplates.isLoading=!0,e.next=3,request.get("kapis/iam.kubesphere.io/v1alpha2".concat(this.getPath(t),"/").concat(this.module,"?label=iam.kubesphere.io/role-template=true"));case 3:a=e.sent,this.roleTemplates.update({data:(0,g.default)(a,"items",[]).map(this.mapper),total:a.totalItems||a.total_count||0,isLoading:!1});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"delete",value:function(e){var a=e.cluster,r=e.name,n=e.workspace,l=e.namespace;if(!this.checkIfIsPresetRole(r))return this.submitting(request.delete(this.getDetailUrl({cluster:a,name:r,workspace:n,namespace:l})));E.Notify.error(t("Error Tips"),"".concat(t("Unable to delete preset role"),": ").concat(r))}},{key:"checkName",value:function(e){return request.get(this.getDetailUrl(e),{},{headers:{"x-check-exist":!0}})}},{key:"checkIfIsPresetRole",value:function(e){return"roles"===this.module?(0,y.default)(globals.config.presetRoles)&&globals.config.presetRoles.includes(e):(0,y.default)(globals.config.presetClusterRoles)&&globals.config.presetClusterRoles.includes(e)}}]),l}(O.default),(0,v.default)(l.prototype,"fetchList",[b.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchList"),l.prototype),(0,v.default)(l.prototype,"batchDelete",[b.action],Object.getOwnPropertyDescriptor(l.prototype,"batchDelete"),l.prototype),(0,v.default)(l.prototype,"fetchRoleTemplates",[b.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchRoleTemplates"),l.prototype),(0,v.default)(l.prototype,"delete",[b.action],Object.getOwnPropertyDescriptor(l.prototype,"delete"),l.prototype),(0,v.default)(l.prototype,"checkName",[b.action],Object.getOwnPropertyDescriptor(l.prototype,"checkName"),l.prototype),l);a.default=w},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(109)),c=r(a(136)),s=r(a(56)),f=r(a(49)),d=r(a(50)),p=r(a(21)),m=r(a(91)),h=r(a(12)),v=r(a(13)),y=r(a(135)),g=r(a(19)),b=r(a(20)),E=r(a(18)),_=r(a(74)),O=(r(a(92)),r(a(16))),S=r(a(73)),k=r(a(32)),C=r(a(291)),R=a(5),w=a(37),P=a(58),D=r(a(186)),T=r(a(277)),N=r(a(823)),I=r(a(736));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,b.default)(this,a)}}var M=(n=function(e){(0,g.default)(p,e);var t,a,r,n=j(p);function p(){var e;return(0,h.default)(this,p),e=n.call(this),(0,m.default)(e,"endpoints",l,(0,y.default)(e)),(0,m.default)(e,"workload",u,(0,y.default)(e)),(0,m.default)(e,"workloads",o,(0,y.default)(e)),e.getFilterParams=function(e,t){var a=x({},t);return a.app&&(a.labelSelector=a.labelSelector||"",a.labelSelector+=e?"app=".concat(a.app):"app.kubernetes.io/name=".concat(a.app),delete a.app),a},e.module="services",e.S2iBuilderStore=new N.default,e}return(0,v.default)(p,[{key:"fetchEndpoints",value:(r=(0,d.default)(f.default.mark((function e(t){var a,r,n,l,u,o=this;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.cluster,n=t.namespace,this.endpoints.isLoading=!0,this.endpoints.data.clear(),l=[],e.prev=4,e.next=7,request.get("api/v1".concat(this.getPath({cluster:r,namespace:n}),"/endpoints/").concat(a),null,null,(function(){o.isSubmitting=!1}));case 7:u=e.sent,l=u.subsets||[],e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:this.endpoints.data=l.map(D.default.endpoints),this.endpoints.isLoading=!1;case 15:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e){return r.apply(this,arguments)})},{key:"create",value:function(e,t){var a=[];if((0,C.default)(e,"metadata"))a.push({url:this.getListUrl(t),data:e});else{e.S2i&&(!function(e){var t=(0,O.default)(e.S2i,'metadata.labels.["s2i-type.kubesphere.io"]',""),a=(0,O.default)(e.Service,"metadata.name",""),r="".concat(a,"-").concat(t,"-").concat(Math.random().toString(36).slice(-4)),n=e.Deployment?"Deployment":"StatefulSet",l=e.Deployment||e.StatefulSet,u=(0,O.default)(l,"metadata.name",""),o=(0,O.default)(l,"spec.replicas",0),i=(0,O.default)(l,"spec.template.spec.containers[0].name",""),c=(0,O.default)(e,'S2i.metadata.annotations["kubesphere.io/repoUrl"]',"");c&&!c.endsWith("/")&&(c+="/");var s="".concat(c).concat((0,O.default)(e.S2i,"spec.config.imageName"),":").concat((0,O.default)(e.S2i,"spec.config.tag")),f=(0,O.default)(e.S2i,"spec.config.pushAuthentication.secretRef.name","");(0,S.default)(l,"spec.template.spec.imagePullSecrets[0].name",f),(0,S.default)(e,"S2i.metadata.annotations.serviceName",a),e.S2i.metadata.name=r,(0,S.default)(l,"metadata.labels.s2ibuilder",r),(0,S.default)(e.S2i,'metadata.annotations.["devops.kubesphere.io/autoscale"]','[{ "Kind": "'.concat(n,'", "Name": "').concat(u,'", "initReplicas": ').concat(o,', "container": "').concat(i,'" }]')),(0,S.default)(l,"spec.template.spec.containers[0].image",s)}(e),this.S2iBuilderStore.create(e.S2i,t));var r=new I.default;e.Service&&a.push(r.getServiceRequest(e.Service,t)),e.Deployment&&(r.setModule("deployments"),a.push(r.getWorkloadRequest(e.Deployment,t))),e.StatefulSet&&(r.setModule("statefulsets"),a.push(r.getWorkloadRequest(e.StatefulSet,t)))}return this.submitting((0,w.withDryRun)(a))}},{key:"fetchWorkloads",value:(a=(0,d.default)(f.default.mark((function e(t){var a,r,n,l,u,o,d,p,m,h=this;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=(0,s.default)(t,["cluster","namespace"]),this.workloads.isLoading=!0,this.workloads.data.clear(),l=["deployments","statefulsets"],e.next=6,Promise.all(l.map((function(e){return request.get("apis/apps/v1".concat(h.getPath({cluster:a,namespace:r}),"/").concat(e),n)})));case 6:u=e.sent,o=(0,c.default)(u,2),d=o[0],p=o[1],m={deployments:d,statefulsets:p},l.forEach((function(e){if(m[e]&&!(0,k.default)(m[e].items)){var t=m[e].items.map((function(t){return x(x({},D.default[e](t)),{},{cluster:a,type:e})}));h.workloads.data=[].concat((0,i.default)(h.workloads.data),(0,i.default)(t))}})),this.workloads.isLoading=!1;case 13:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchList",value:(t=(0,d.default)(f.default.mark((function e(){var t,a,r,n,l,u,o,c,d,p,m=this,h=arguments;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},a=t.cluster,r=t.workspace,n=t.namespace,l=t.more,u=t.devops,o=t.searchByApp,c=(0,s.default)(t,["cluster","workspace","namespace","more","devops","searchByApp"]),this.list.isLoading=!0,c.sortBy||void 0!==c.ascending||(c.sortBy=P.LIST_DEFAULT_ORDER[this.module]||"createTime"),c.limit!==1/0&&-1!==c.limit||(c.limit=-1,c.page=1),c.limit=c.limit||10,e.next=7,request.get(this.getResourceUrl({cluster:a,workspace:r,namespace:n,devops:u}),this.getFilterParams(o,c));case 7:return d=e.sent,p=((0,O.default)(d,"items")||[]).map((function(e){return x({cluster:a,namespace:n},m.mapper(e))})),this.list.update(x(x({data:l?[].concat((0,i.default)(this.list.data),(0,i.default)(p)):p,total:d.totalItems||d.total_count||p.length||0},c),{},{limit:Number(c.limit)||10,page:Number(c.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",p);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),p}(T.default),l=(0,_.default)(n.prototype,"endpoints",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],isLoading:!0}}}),u=(0,_.default)(n.prototype,"workload",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,_.default)(n.prototype,"workloads",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],isLoading:!1}}}),(0,_.default)(n.prototype,"fetchEndpoints",[R.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchEndpoints"),n.prototype),(0,_.default)(n.prototype,"create",[R.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,_.default)(n.prototype,"fetchWorkloads",[R.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchWorkloads"),n.prototype),(0,_.default)(n.prototype,"fetchList",[R.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),n);t.default=M},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=l(r(16)),d=n(r(0)),p=r(1),m=l(r(3)),h=r(25),v=l(r(653)),y=l(r(940)),g=r(58),b=l(r(1882));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,i.default)(r,e);var a=E(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).iconSizeMap={large:48,normal:40,small:20},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.theme,r=e.size,n=e.className,l=e.cluster,u=e.tagClass,o=e.noStatus,i=e.onClick,c=e.isExpired,s=void 0!==c&&c;if(!l)return null;var p="True"===(0,f.default)(l.conditions,"Ready.status"),E=this.iconSizeMap[r];return d.default.createElement("div",{className:(0,m.default)(b.default.wrapper,b.default[a],b.default[r],n)},d.default.createElement("div",{className:b.default.icon,style:{height:E}},d.default.createElement(h.Icon,{name:g.CLUSTER_PROVIDER_ICON[l.provider]||"kubernetes",size:E,type:a}),s?d.default.createElement(v.default,{className:b.default.indicator,type:"error"}):!o&&p&&d.default.createElement(v.default,{className:b.default.indicator,status:"ready"})),d.default.createElement("div",{className:b.default.title},d.default.createElement("div",{className:b.default.name},i?d.default.createElement("a",{title:l.name,onClick:i},l.name):d.default.createElement("span",{title:l.name},l.name),l.group&&d.default.createElement(h.Tag,{className:(0,m.default)("margin-l12",u),type:g.CLUSTER_GROUP_TAG_TYPE[l.group]},t("ENV_".concat(l.group.toUpperCase()),{defaultValue:l.group})),l.isHost&&d.default.createElement(h.Tag,{className:(0,m.default)("margin-l12",u),type:"warning"},t("HOST_CLUSTER"))," ","small"===r&&!o&&!p&&d.default.createElement(y.default,{data:l})),d.default.createElement("div",{className:b.default.description},s?d.default.createElement("p",{className:b.default.isExpired},d.default.createElement(h.Icon,{name:"information",size:"15",color:{primary:"#ffffff",secondary:"#ab2f29"}}),t("KUBE_CONFIG_IS_EXPIRED")):p||o?d.default.createElement("p",{className:(0,m.default)("ellipsis",b.default.ellipsis)},l.description||"-"):d.default.createElement(y.default,{data:l}))))}}]),r}(d.Component);a.default=_,_.propTypes={theme:p.PropTypes.oneOf(["dark","light"]),size:p.PropTypes.oneOf(["normal","small","large"])},_.defaultProps={theme:"dark",size:"normal"}},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=r(a(3)),d=a(25),p=r(a(1841));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var h=function(e){(0,u.default)(a,e);var t=m(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.image,a=e.icon,r=e.title,n=e.desc,l=e.actions,u=e.className;return c.default.createElement("div",{className:(0,f.default)(p.default.wrapper,u)},c.default.createElement("div",{className:p.default.image},t?c.default.createElement("img",{src:t,alt:""}):c.default.createElement(d.Icon,{name:a,size:48})),c.default.createElement("div",{className:p.default.title},r),c.default.createElement("p",{className:p.default.desc},n),l&&c.default.createElement("div",{className:p.default.actions},l))}}]),a}(c.default.PureComponent);t.default=h,h.propTypes={icon:s.default.string,title:s.default.string,desc:s.default.string,actions:s.default.oneOfType([s.default.node,s.default.element])},h.defaultProps={icon:"appcenter"}},,function(e,t,a){"use strict";(function(e){var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(49)),o=r(a(109)),i=r(a(21)),c=r(a(50)),s=r(a(56)),f=r(a(91)),d=r(a(12)),p=r(a(13)),m=r(a(135)),h=r(a(19)),v=r(a(20)),y=r(a(18)),g=r(a(74)),b=(r(a(92)),r(a(16))),E=r(a(190)),_=a(5),O=a(58),S=r(a(186)),k=r(a(277)),C=r(a(193));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var D=function(e,t){return e.labelSelector="system"===t?"kubesphere.io/workspace=system-workspace":"user"===t?"kubesphere.io/workspace!=system-workspace,!kubesphere.io/devopsproject":e.labelSelector||"!kubesphere.io/kubefed-host-namespace,!kubesphere.io/devopsproject",e},T=(n=function(t){(0,h.default)(g,t);var a,r,n,i,v,y=P(g);function g(){var e;(0,d.default)(this,g);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=y.call.apply(y,[this].concat(a)),(0,f.default)(e,"initializing",l,(0,m.default)(e)),e.limitRanges=new C.default,e.module="namespaces",e.getResourceUrl=function(t){var a=t.workspace,r=(0,s.default)(t,["workspace"]);return a?"kapis/tenant.kubesphere.io/v1alpha2/workspaces/".concat(a).concat(e.getPath(r),"/namespaces"):"kapis/resources.kubesphere.io/v1alpha3".concat(e.getPath(r),"/namespaces")},e.getWatchListUrl=function(t){var a=t.workspace,r=(0,s.default)(t,["workspace"]);return a?"".concat(e.apiVersion,"/watch").concat(e.getPath(r),"/namespaces?labelSelector=kubesphere.io/workspace=").concat(a):"".concat(e.apiVersion,"/watch").concat(e.getPath(r),"/namespaces")},e.getListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.workspace?"kapis/tenant.kubesphere.io/v1alpha2/workspaces/".concat(t.workspace).concat(e.getPath(t),"/namespaces"):"".concat(e.apiVersion).concat(e.getPath(t),"/namespaces")},e}return(0,p.default)(g,[{key:"fetchList",value:(v=(0,c.default)(u.default.mark((function e(){var t,a,r,n,l,i,c,f,d,p=this,m=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},a=t.cluster,r=t.workspace,n=t.namespace,l=t.more,i=t.type,c=(0,s.default)(t,["cluster","workspace","namespace","more","type"]),this.list.isLoading=!0,c.sortBy||void 0!==c.ascending||(c.sortBy=O.LIST_DEFAULT_ORDER[this.module]||"createTime"),c.limit!==1/0&&-1!==c.limit||(c.limit=-1,c.page=1),c.limit=c.limit||10,e.next=7,request.get(this.getResourceUrl({cluster:a,workspace:r,namespace:n}),D(c,i)).catch((function(){return{}}));case 7:return f=e.sent,d=(0,b.default)(f,"items",[]).map((function(e){return w({cluster:a},p.mapper(e))})),this.list.update(w(w({data:l?[].concat((0,o.default)(this.list.data),(0,o.default)(d)):d,total:f.totalItems||f.total_count||d.length||0},(0,E.default)(c,"labelSelector")),{},{cluster:globals.app.isMultiCluster?a:void 0,limit:Number(c.limit)||10,page:Number(c.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",d);case 11:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"fetchDetail",value:(i=(0,c.default)(u.default.mark((function t(a,r){var n,l,o,i;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.cluster,l=a.workspace,o=a.namespace,this.isLoading=!0,t.next=4,request.get(this.getDetailUrl({cluster:n,workspace:l,name:o}),null,null,r||function(t){"NotFound"!==t.reason&&"Forbidden"!==t.reason||e.navigateTo("/404")});case 4:i=t.sent,this.detail=w({cluster:n},this.mapper(i)),this.isLoading=!1;case 7:case"end":return t.stop()}}),t,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"create",value:(n=(0,c.default)(u.default.mark((function e(t){var a,r=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=r.length>1&&void 0!==r[1]?r[1]:{}).workspace){e.next=3;break}return e.abrupt("return",this.submitting(request.post(this.getResourceUrl(a),t)));case 3:return e.abrupt("return",this.submitting(request.post(this.getListUrl(a),t)));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchLimitRanges",value:(r=(0,c.default)(u.default.mark((function e(t){var a,r,n,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,this.limitRanges.isLoading=!1,e.next=4,request.get("api/v1".concat(this.getPath({cluster:a,namespace:r}),"/limitranges"));case 4:return n=e.sent,l=n.items.map(S.default.limitranges),this.limitRanges.update({data:l,total:n.items.length,isLoading:!1}),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchListByUser",value:(a=(0,c.default)(u.default.mark((function e(){var t,a,r,n,l,o,i,c,f,d=this,p=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},a=t.cluster,r=t.workspace,n=t.namespace,l=t.username,o=t.type,i=(0,s.default)(t,["cluster","workspace","namespace","username","type"]),this.list.isLoading=!0,i.sortBy||void 0!==i.ascending||(i.sortBy=O.LIST_DEFAULT_ORDER[this.module]||"createTime"),i.limit!==1/0&&-1!==i.limit||(i.limit=-1,i.page=1),i.limit=i.limit||10,e.next=7,request.get("kapis/tenant.kubesphere.io/v1alpha2/workspaces/".concat(r).concat(this.getPath({cluster:a,namespace:n}),"/workspacemembers/").concat(l,"/namespaces"),D(i,o));case 7:return c=e.sent,f=(0,b.default)(c,"items",[]).map((function(e){return w({cluster:a},d.mapper(e))})),this.list.update(w(w({data:f,total:c.totalItems||0},(0,E.default)(i,"labelSelector")),{},{cluster:globals.app.isMultiCluster?a:void 0,limit:Number(i.limit)||10,page:Number(i.page)||1,isLoading:!1})),e.abrupt("return",f);case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}]),g}(k.default),l=(0,g.default)(n.prototype,"initializing",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),(0,g.default)(n.prototype,"fetchList",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,g.default)(n.prototype,"fetchDetail",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),(0,g.default)(n.prototype,"create",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,g.default)(n.prototype,"fetchLimitRanges",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchLimitRanges"),n.prototype),(0,g.default)(n.prototype,"fetchListByUser",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchListByUser"),n.prototype),n);t.default=T}).call(this,a(42))},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.data,r=e.status,n=e.reason,c=e.type,s=void 0===c?"workload":c,f=u.default.createElement("div",null,u.default.createElement("div",{className:"tooltip-title"},t("STATUS_INFORMATION")),u.default.createElement("div",null,(0,l.default)(a,"status.conditions",[]).map((function(e){return u.default.createElement("div",{key:e.type,className:i.default.condition},u.default.createElement("div",{className:i.default.title},function(e,t){var a=t.type,r=t.status;if("volume"===e)return"True"===r;return"ReplicaFailure"===a?"False"===r:"True"===r}(s,e)?u.default.createElement(o.Icon,{name:"success",type:"coloured"}):u.default.createElement(o.Icon,{name:"error",color:{primary:"#ffffff",secondary:"#ea4641"}}),u.default.createElement("span",null,t("".concat(s.toUpperCase(),"_CONDITION_").concat(e.type.toUpperCase()),{defaultValue:e.type}))),e.status&&u.default.createElement("p",null,t("STATUS_VALUE",{value:"True"===e.status?"True":"False"})),e.reason&&u.default.createElement("p",null,t("REASON_VALUE",{value:t("".concat(s.toUpperCase(),"_REASON_").concat(e.reason.toUpperCase()),{defaultValue:e.reason})})),e.message&&u.default.createElement("p",null,t("MESSAGE_VALUE",{value:e.message})))}))));return u.default.createElement("span",{className:i.default.reason},u.default.createElement(o.Tooltip,{placement:"right",content:f},u.default.createElement(o.Icon,{name:"information",color:{primary:"#ffffff",secondary:"error"===r?"#ab2f29":"#f5a623"}})),n&&u.default.createElement("span",{className:"error"===r?i.default.error:i.default.warning},t(n)))};var l=n(r(16)),u=n(r(0)),o=r(25),i=n(r(2702))},,,,function(e,t,a){e.exports={CodeEditor:"_2IGErYZEo2u6vShZitIa79",clickable:"_3ylLQDoZRYBuC4tQG6Htw1",dockerCredentialsContent:"N9fZkoawlX7Y5WKvAn_3z",dockerCredentialsContent__title:"lssVHY8sKSk5ISt0jEvk2",dockerCredentialsContent__content:"_2VLKA_dumPxcwW_D1Rk5Wf",dockerCredentialsContent__trashicon:"_3ibKRdFB6iCNX3nffBkdnD",desc:"_2937jTLnfbzlio0BxmAZm0",info:"_1KJL6X1lqIBhGp1B7GBRMd",columns:"_2g2Tfmk-iTKCRSCInv4oFD"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=n(r(274)),m=n(r(1552));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={confirm:""},e.handleInputChange=function(t){e.setState({confirm:t.target.value})},e.handleOk=function(){e.props.onOk()},e}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({confirm:""})}},{key:"render",value:function(){var e=this.props,a=e.app,r=e.type,n=e.resource,l=e.visible,u=e.onCancel,o=e.title,i=e.desc,c=e.isSubmitting,f=e.deleteCluster,h=r||void 0,v=r?"".concat(r,"_LOW"):void 0,y=r?"".concat(r,"_PL"):void 0,g=i||(n&&r?1===n.split(", ").length?t.html("DELETE_RESOURCE_TYPE_DESC_SI",{type:t(v),resource:n}):t.html("DELETE_RESOURCE_TYPE_DESC_PL",{type:t(v),resource:n}):t.html("DELETE_DESC",{resource:n,type:""}));return a&&(g=t.html("DELETE_APP_RESOURCE_TIP",{type:r,resource:n,app:a})),f&&(g=t.html("UNBIND_CLUSTER_DESC",{name:n})),s.default.createElement(p.default,{width:504,bodyClassName:m.default.modalBody,visible:l,isSubmitting:c,onCancel:u,hideHeader:!0,hideFooter:!0},s.default.createElement("div",{className:m.default.body},s.default.createElement("div",{className:"h5"},s.default.createElement(d.Icon,{name:"close",type:"light",className:m.default.closeIcon}),o||(n&&r?1===n.split(", ").length?t("DELETE_TITLE_SI",{type:t(h)}):t("DELETE_TITLE_PL",{type:t(y)}):t("DELETE"))),s.default.createElement("div",{className:m.default.content},s.default.createElement("p",null,g),n&&s.default.createElement(d.Input,{name:"confirm",value:this.state.confirm,onChange:this.handleInputChange,placeholder:n,autoFocus:!0}))),s.default.createElement("div",{className:m.default.footer},s.default.createElement(d.Button,{onClick:u,"data-test":"modal-cancel"},t("CANCEL")),s.default.createElement(d.Button,{type:"danger",loading:c,disabled:c||!!n&&this.state.confirm!==n,onClick:this.handleOk,"data-test":"modal-ok"},t("OK"))))}}]),r}(s.default.Component);a.default=v,v.propTypes={type:f.default.string,resource:f.default.string,visible:f.default.bool,title:f.default.oneOfType([f.default.string,f.default.node]),desc:f.default.oneOfType([f.default.string,f.default.node]),onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},v.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(32)),p=n(r(68)),m=n(r(0)),h=n(r(1)),v=n(r(3)),y=r(25),g=n(r(1668)),b=n(r(1211));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,i.default)(r,e);var a=E(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).handleAdd=function(){var t=e.props,a=t.value;(0,t.onChange)([].concat((0,l.default)(a),[e.getDefaultValue()]))},e.handleChange=function(t,a){var r=e.props,n=r.value,u=r.onChange,o=(0,f.default)(a,"currentTarget.value",a),i=[];(0,p.default)(n[t])?(n[t]=o,i=(0,l.default)(n)):i=n.map((function(e,a){return a===t?o:e})),u(i)},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)(r.filter((function(e,a){return a!==t})))},e.rolesValidator=function(e,a,r){return a?a.role?void r():r({message:t("SELECT_ROLE_TIP")}):r()},e}return(0,o.default)(r,[{key:"getDefaultValue",value:function(){return"object"===this.props.itemType?{}:""}},{key:"isAddEnable",value:function(){var e=this.props,t=e.value,a=e.checkItemValid;return a?t.every(a):t.every((function(e){return!(0,d.default)(e)&&Object.values(e).every((function(e){return e}))}))}},{key:"renderItems",value:function(){var e=this,t=this.props,a=t.value,r=t.children,n=t.id;return n&&n.includes("metadata.annotations['kubesphere.io/")?a.map((function(t,l){return m.default.createElement(y.Form.Item,{key:l,rules:[{validator:e.rolesValidator,checkOnSubmit:!0}]},m.default.createElement(g.default,{name:"".concat(n,"[").concat(l,"]"),index:l,value:t||e.getDefaultValue(),arrayValue:a,component:r,onChange:e.handleChange.bind(e,l),onDelete:e.handleDelete.bind(e,l)}))})):a.map((function(t,n){return m.default.createElement(g.default,{key:n,index:n,value:t||e.getDefaultValue(),arrayValue:a,component:r,onChange:e.handleChange.bind(e,n),onDelete:e.handleDelete.bind(e,n)})}))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.addText,r=e.extraAdd,n=e.desc;return m.default.createElement("div",{className:(0,v.default)(b.default.wrapper,t)},this.renderItems(),m.default.createElement("div",{className:b.default.footer},m.default.createElement("div",{className:b.default.desc},n),m.default.createElement("div",{className:"text-right"},m.default.createElement(y.Button,{className:b.default.add,onClick:this.handleAdd,disabled:!this.isAddEnable()},a),r)))}}]),r}(m.default.Component);a.default=_,_.propTypes={name:h.default.string,value:h.default.array,onChange:h.default.func,addText:h.default.string,itemType:h.default.oneOf(["string","object"]),children:h.default.node.isRequired,checkItemValid:h.default.func},_.defaultProps={name:"",value:[""],onChange:function(){},addText:t("ADD"),itemType:"string"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=a(5),f=a(70),d=a(37),p=a(58),m=r(a(1142)),h=r(a(1143));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var y=function(e){(0,u.default)(a,e);var t=v(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).eventStore=new m.default,r}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this.store.detail,t=e.uid,a=e.name,r=e.namespace,n=e._originData,l={"involvedObject.name":a,"involvedObject.namespace":r,"involvedObject.kind":(void 0===n?{}:n).kind||this.kind,"involvedObject.uid":t};this.eventStore.fetchList({namespace:r,cluster:this.cluster,fieldSelector:(0,d.joinSelector)(l)})}},{key:"render",value:function(){var e=(0,s.toJS)(this.eventStore.list),t=e.data,a=e.isLoading;return c.default.createElement(h.default,{data:t,loading:a})}},{key:"store",get:function(){return this.props.detailStore}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"module",get:function(){return this.store.module}},{key:"kind",get:function(){return p.MODULE_KIND_MAP[this.module]}}]),a}(c.default.Component),g=(0,f.inject)("detailStore")((0,f.observer)(y));t.default=g;var b=y;t.Component=b},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(49)),o=r(a(50)),i=r(a(91)),c=r(a(12)),s=r(a(13)),f=r(a(135)),d=r(a(19)),p=r(a(20)),m=r(a(18)),h=r(a(74)),v=(r(a(92)),a(5)),y=a(37),g=r(a(854));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var E=(n=function(e){(0,d.default)(m,e);var t,a,r,n,p=b(m);function m(){var e;(0,c.default)(this,m);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=p.call.apply(p,[this].concat(a)),(0,i.default)(e,"mountedPods",l,(0,f.default)(e)),e.module="persistentvolumeclaims",e.snapshotType=[],e}return(0,s.default)(m,[{key:"getSnapshotType",value:(n=(0,o.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("/apis/snapshot.storage.k8s.io/v1beta1/volumesnapshotclasses");case 2:this.snapshotType=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchVolumeMountStatus",value:(r=(0,o.default)(u.default.mark((function e(){var t,a,r,n,l,o,i=this;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.detail,a=t.name,r=t.namespace,e.next=3,(0,y.to)(request.get(this.getResourceUrl({namespace:r}),{name:a}));case 3:n=e.sent,l=n.items||[],o=l.find((function(e){return i.mapper(e).name===a}))||{},this.detail.inUse=this.mapper(o).inUse;case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"cloneVolume",value:(a=(0,o.default)(u.default.mark((function e(t){var a,r,n,l,o,i,c,s,f,d;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=this.detail,n=r.cluster,l=r.namespace,o=r.name,i=r.accessModes,c=r.capacity,s=r.storageClassName,f={apiVersion:"v1",kind:this.resourceKind,metadata:{name:a},spec:{accessModes:i,resources:{requests:{storage:c}},dataSource:{kind:this.resourceKind,name:o},storageClassName:s}},d=this.getListUrl({cluster:n,namespace:l}),e.next=6,this.submitting(request.post(d,f));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"createSnapshot",value:(t=(0,o.default)(u.default.mark((function e(t){var a,r,n,l,o,i,c,s,f;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.type,n=new g.default,l=this.detail,o=l.cluster,i=l.namespace,c=l.name,s=n.getListUrl({cluster:o,namespace:i}),f={apiVersion:"snapshot.storage.k8s.io/v1beta1",kind:n.resourceKind,metadata:{name:a},spec:{volumeSnapshotClassName:r,source:{kind:this.resourceKind,persistentVolumeClaimName:c}}},e.next=7,this.submitting(request.post(s,f));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"resourceKind",get:function(){return"PersistentVolumeClaim"}}]),m}(r(a(277)).default),l=(0,h.default)(n.prototype,"mountedPods",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],isLoading:!0}}}),n);t.default=E},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=a(5),d=a(70),p=r(a(2813)),m=r(a(2814));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,o.default)(a,e);var t=h(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=(0,f.toJS)(this.store.detail),t=e.labels,a=e.annotations;return s.default.createElement(s.default.Fragment,null,s.default.createElement(p.default,{labels:t}),s.default.createElement(m.default,{annotations:a}))}},{key:"store",get:function(){return this.props.detailStore}}]),a}(s.default.Component))||n)||n;t.default=v},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(56)),u=n(r(71)),o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(135)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(16)),h=n(r(93)),v=n(r(185)),y=n(r(23)),g=n(r(190)),b=n(r(0)),E=n(r(1)),_=r(25),O=n(r(274)),S=n(r(808)),k=n(r(1555)),C=n(r(1559)),R=n(r(1566));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=function(e){(0,f.default)(r,e);var a=D(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).getFormDataFromCode=function(e){return(0,y.default)(e)?e.reduce((function(e,t){return P(P({},e),{},(0,o.default)({},t.kind.replace("Federated",""),t))}),{}):e},n.handleModeChange=function(){n.setState((function(e){var a=e.isCodeMode,r=e.formTemplate,l=Object.keys(r)[0],u=["".concat(l,".spec.template.totalReplicas"),"totalReplicas","".concat(l,".totalReplicas")],o={formTemplate:r=(0,g.default)(r,u),isCodeMode:!a};return!a&&(0,h.default)((0,m.default)((0,s.default)(n),"formRef.current.hasSubRoute"))&&n.formRef.current.hasSubRoute()?_.Notify.warning(t("SAVE_FORM_TIP")):(!a&&(0,h.default)((0,m.default)((0,s.default)(n),"formRef.current.getCurrentStep"))&&(o.currentStep=n.formRef.current.getCurrentStep()),a&&(0,h.default)((0,m.default)((0,s.default)(n),"codeRef.current.getData"))&&(o.formTemplate=n.getFormDataFromCode(n.codeRef.current.getData())),o)}))},n.handleCode=function(e){(0,n.props.onOk)(n.getFormDataFromCode(e))},n.state={formTemplate:(0,v.default)(e.formTemplate),isCodeMode:e.onlyCode||!1,currentStep:0},n.codeRef=b.default.createRef(),n.formRef=b.default.createRef(),n}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible!==e.visible&&this.props.visible&&this.setState({currentStep:0,isCodeMode:this.props.onlyCode||!1,formTemplate:(0,v.default)(this.props.formTemplate)})}},{key:"renderForms",value:function(){var e=this.state,t=e.formTemplate,a=e.currentStep;return b.default.createElement(k.default,(0,u.default)({},this.props,{ref:this.formRef,formTemplate:t,currentStep:a}))}},{key:"renderCodeEditor",value:function(){var e=this.props,t=e.onCancel,a=e.isSubmitting,r=this.state.formTemplate;return b.default.createElement(C.default,{ref:this.codeRef,formTemplate:r,onOk:this.handleCode,onCancel:t,isSubmitting:a})}},{key:"renderOperations",value:function(){var e=this.props,a=e.noCodeEdit,r=e.onlyCode,n=this.state.isCodeMode;return a||r?null:b.default.createElement(S.default,{className:R.default.switch,text:t("EDIT_YAML"),onChange:this.handleModeChange,checked:n})}},{key:"render",value:function(){var e=this.props,a=e.name,r=e.width,n=e.visible,o=e.onCancel,i=e.noCodeEdit,c=(0,l.default)(e,["name","width","visible","onCancel","noCodeEdit"]),s=this.state.isCodeMode,f=this.props.title||t("CREATE_NAME",{name:t(a)});return b.default.createElement(O.default,(0,u.default)({width:r||960,title:f,bodyClassName:R.default.body,onCancel:o,visible:n},c,{operations:this.renderOperations(),hideFooter:!0}),!i&&s?this.renderCodeEditor():this.renderForms())}}]),r}(b.default.Component);a.default=T,T.propTypes={title:E.default.string,name:E.default.string,module:E.default.string,steps:E.default.array,store:E.default.object,formTemplate:E.default.object,visible:E.default.bool,okBtnText:E.default.string,onOk:E.default.func,onCancel:E.default.func,noCodeEdit:E.default.bool,isSubmitting:E.default.bool},T.defaultProps={visible:!1,noCodeEdit:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(109)),c=r(a(21)),s=r(a(56)),f=r(a(49)),d=r(a(50)),p=r(a(91)),m=r(a(12)),h=r(a(13)),v=r(a(135)),y=r(a(19)),g=r(a(20)),b=r(a(18)),E=r(a(74)),_=(r(a(92)),r(a(16))),O=r(a(32)),S=a(5),k=a(58),C=r(a(186)),R=a(279),w=r(a(277)),P=r(a(193));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var I=(n=function(e){(0,y.default)(D,e);var t,a,r,n,c,g,b,E,S,w,P=N(D);function D(){var e;(0,m.default)(this,D);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=P.call.apply(P,[this].concat(a))).module="gateways",e.getOldGatewayUrl=function(t){return"kapis/resources.kubesphere.io/v1alpha2".concat(e.getPath(t),"/router")},e.gatewayUrl=function(t){var a=t.cluster,r=t.namespace,n=t.gatewayName,l=void 0===n?"":n;return"".concat(e.apiVersion).concat(e.getPath({namespace:r||"kubesphere-system",cluster:a}),"/").concat(e.module).concat(e.isCluster(r)?"/".concat(l):"")},e.gatewayeditUrl=function(t){var a=t.cluster,r=t.namespace,n=t.gatewayName,l=void 0===n?"":n;return"/".concat(e.isCluster(r)?"k":"","apis/gateway.kubesphere.io/v1alpha1").concat(e.getPath({namespace:r||"kubesphere-controls-system",cluster:a}),"/").concat(e.module).concat(e.isCluster(r)?"/".concat(l):"/kubesphere-router-kubesphere-system")},e.gatewayPodsUrl=function(t){var a=t.cluster,r=t.namespace,n=t.gatewayName,l=void 0===n?"":n;return"".concat(e.apiVersion).concat(e.getPath({namespace:r||"kubesphere-system",cluster:a}),"/").concat(e.module).concat(e.isCluster(r)?"/".concat(l):"/kubesphere-router-kubesphere-system")},(0,p.default)(e,"gateway",l,(0,v.default)(e)),(0,p.default)(e,"podList",u,(0,v.default)(e)),(0,p.default)(e,"logs",o,(0,v.default)(e)),e}return(0,h.default)(D,[{key:"isCluster",value:function(e){return e&&"kubesphere-controls-system"!==e}},{key:"getGateway",value:(w=(0,d.default)(f.default.mark((function e(t){var a,r,n,l;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gateway.isLoading=!0,a=this.gatewayUrl(t),e.next=4,request.get(a,null,null,(function(){}));case 4:return r=e.sent,n={},r&&!(0,O.default)(r)&&(this.isCluster(t.namespace)?(l=r.filter((function(e){return"kubesphere-router-kubesphere-system"!==e.metadata.name})).map((function(e){return C.default.gateway(e)})).find((function(e){return e.name.indexOf(t.namespace)>-1})),n=l):n=C.default.gateway(r[0])),this.detail=n,this.gateway.data=n,this.gateway.isLoading=!1,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"getGatewayByProject",value:(S=(0,d.default)(f.default.mark((function e(t){var a,r,n,l,u,o,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gateway.isLoading=!0,a=this.gatewayUrl(t),e.next=4,request.get(a,null,null,(function(){}));case 4:for(r=e.sent,n=[],l=0;l<2;l++)u=r&&r[l]?C.default.gateway(r[l]):void 0,n.push(u);return o=n[0],"kubesphere-router-kubesphere-system"!==(0,_.default)(o,"name")&&(i=n[1],n[0]=i,n[1]=o),o=n[1]||n[0],this.detail=o,this.gateway.data=o,this.gateway.isLoading=!1,e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"addGateway",value:(E=(0,d.default)(f.default.mark((function e(t,a){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.submitting(request.post(this.gatewayeditUrl(t),a)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return E.apply(this,arguments)})},{key:"editGateway",value:(b=(0,d.default)(f.default.mark((function e(t,a){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.submitting(request.put(this.gatewayeditUrl(t),a)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"deleteGateway",value:(g=(0,d.default)(f.default.mark((function e(t){var a,r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.cluster,r=t.namespace,!t.isOld){e.next=3;break}return e.abrupt("return",this.submitting(request.delete(this.getOldGatewayUrl({cluster:a,namespace:r}))));case 3:return e.abrupt("return",this.submitting(request.delete(this.gatewayeditUrl({cluster:a,namespace:r}))));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"updateGateway",value:(c=(0,d.default)(f.default.mark((function e(t,a){var r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(this.gatewayeditUrl(t),"/upgrade"),e.abrupt("return",this.submitting(request.post(r,a)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"getGatewayLogs",value:(n=(0,d.default)(f.default.mark((function e(t){var a,r,n,l,u,o;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=t.gatewayName,t.component,l=(0,s.default)(t,["cluster","namespace","gatewayName","component"]),this.logs.isLoading=!0,e.next=4,request.get("".concat(this.gatewayPodsUrl({cluster:a,namespace:r,gatewayName:n}),"/logs"),T(T({},l),{},{start_time:l.start_time?Math.floor(l.start_time/1e3):void 0,end_time:l.end_time?Math.floor(l.end_time/1e3):void 0,container_query:"controller"}),{},(function(){return[]}));case 4:return u=e.sent,o=(0,_.default)(u,"query.records")||[],this.logs=T(T({data:o,total:u.query.total||o.length||0},l),{},{size:Number(l.size)||10,from:Number(l.from)||0,isLoading:!1}),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"exportLinkFactory",value:function(e){var t=e.cluster,a=e.namespace,r=e.gatewayName,n=e.start_time,l=e.end_time,u=(0,s.default)(e,["cluster","namespace","gatewayName","start_time","end_time"]),o="".concat(this.gatewayPodsUrl({cluster:t,namespace:a,gatewayName:r}),"/logs");return"/".concat(o,"?").concat((0,R.stringify)(T(T({sort:"asc"},u),{},{start_time:Math.floor(n/1e3),end_time:Math.floor(l/1e3),operation:"export"})))}},{key:"getGatewayPods",value:(r=(0,d.default)(f.default.mark((function e(t){var a,r,n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(this.gatewayPodsUrl(t),"/pods"),e.next=3,this.submitting(request.get(a));case 3:return r=e.sent,n=[],r&&r.totalItems>0&&(n=r.items.map((function(e){return C.default.pods(e)}))),this.gateway.data.pods=n,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getGatewayPodsList",value:(a=(0,d.default)(f.default.mark((function e(t){var a,r,n,l,u,o,c,d;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,t.name,r=t.gatewayName,n=t.namespace,t.workspace,l=t.more,t.component,u=t.search,o=(0,s.default)(t,["cluster","name","gatewayName","namespace","workspace","more","component","search"]),this.podList.isLoading=!0,o.sortBy||void 0!==o.ascending||(o.sortBy=k.LIST_DEFAULT_ORDER[this.module]||"createTime"),o.limit!==1/0&&-1!==o.limit||(o.limit=-1,o.page=1),o.limit=o.limit||10,e.next=7,request.get("".concat(this.gatewayPodsUrl({cluster:a,namespace:n,gatewayName:r}),"/pods"),T(T({},o),{},{name:u}),{},(function(){return[]}));case 7:return c=e.sent,d=((0,_.default)(c,"items")||[]).map((function(e){return T({cluster:a,namespace:e.metadata.name.split("kubesphere-router-")[1]},C.default.pods(e))})),this.podList.update(T(T({data:l?[].concat((0,i.default)(this.list.data),(0,i.default)(d)):d,total:c.totalItems||c.total_count||d.length||0},o),{},{limit:Number(o.limit)||10,page:Number(o.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"scale",value:function(e,t){var a=this.gateway.data._originData;return a.spec.deployment.replicas=t,this.submitting(request.put(this.gatewayUrl(e),a))}},{key:"fetchList",value:(t=(0,d.default)(f.default.mark((function e(t){var a,r,n,l,u;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,t.namespace,r=t.more,t.component,n=(0,s.default)(t,["cluster","namespace","more","component"]),this.list.isLoading=!0,n.sortBy||void 0!==n.ascending||(n.sortBy=k.LIST_DEFAULT_ORDER[this.module]||"createTime"),n.limit!==1/0&&-1!==n.limit||(n.limit=-1,n.page=1),n.limit=n.limit||10,e.next=7,request.get("".concat(this.apiVersion).concat(this.getPath({cluster:a}),"/gateways"),T({},n),{},(function(){return[]}));case 7:return l=e.sent,u=((0,_.default)(l,"items")||[]).map((function(e){return T({cluster:a,namespace:e.metadata.name.split("kubesphere-router-")[1]},C.default.gateway(e))})),this.list.update(T(T({data:r?[].concat((0,i.default)(this.list.data),(0,i.default)(u)):u,total:l.totalItems||l.total_count||u.length||0},n),{},{limit:Number(n.limit)||10,page:Number(n.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),D}(w.default),l=(0,E.default)(n.prototype,"gateway",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!0}}}),u=(0,E.default)(n.prototype,"podList",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new P.default}}),o=(0,E.default)(n.prototype,"logs",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new P.default}}),(0,E.default)(n.prototype,"getGateway",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"getGateway"),n.prototype),(0,E.default)(n.prototype,"getGatewayByProject",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"getGatewayByProject"),n.prototype),(0,E.default)(n.prototype,"addGateway",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"addGateway"),n.prototype),(0,E.default)(n.prototype,"editGateway",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"editGateway"),n.prototype),(0,E.default)(n.prototype,"deleteGateway",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"deleteGateway"),n.prototype),(0,E.default)(n.prototype,"updateGateway",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"updateGateway"),n.prototype),(0,E.default)(n.prototype,"getGatewayLogs",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"getGatewayLogs"),n.prototype),(0,E.default)(n.prototype,"getGatewayPods",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"getGatewayPods"),n.prototype),(0,E.default)(n.prototype,"getGatewayPodsList",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"getGatewayPodsList"),n.prototype),(0,E.default)(n.prototype,"scale",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"scale"),n.prototype),(0,E.default)(n.prototype,"fetchList",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),n);t.default=I},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getTimeRange=t.getMinuteValue=void 0;var n,l,u,o,i,c,s=r(a(49)),f=r(a(50)),d=r(a(109)),p=r(a(21)),m=r(a(56)),h=r(a(91)),v=r(a(12)),y=r(a(13)),g=r(a(74)),b=(r(a(92)),a(5)),E=r(a(32)),_=r(a(23)),O=r(a(16)),S=r(a(73)),k=a(37),C=a(725);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"60s",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.slice(-1),r=parseFloat(e);switch(a){default:case"s":break;case"m":r*=60;break;case"h":r*=3600;break;case"d":r=24*r*60*60}return t?"".concat(r,"s"):r};t.getMinuteValue=P;var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,a=void 0===t?"600s":t,r=e.times,n=void 0===r?20:r,l=parseFloat(a)*n,u=Math.floor(Date.now()/1e3),o=Math.floor(u-l);return{start:o,end:u}};t.getTimeRange=D;var T=(n=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,v.default)(this,e),(0,h.default)(this,"isLoading",l,this),(0,h.default)(this,"isRefreshing",u,this),(0,h.default)(this,"etcdChecking",o,this),(0,h.default)(this,"supportETCD",i,this),this.isConfirmSupportETCD=!1,this.data={},this.resourceName="resource_name",this.getApi=function(){return"".concat(t.apiVersion,"/cluster")},this.getParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.start,r=e.end,n=e.step,l=void 0===n?"600s":n,u=e.times,o=void 0===u?20:u,i=e.resources,c=void 0===i?[]:i,s=e.metrics,f=void 0===s?[]:s,d=e.last,p=void 0!==d&&d,h=(0,m.default)(e,["start","end","step","times","resources","metrics","last"]),v=w({},h);if(!p&&(Object.assign(v,{start:a,end:r,step:P(l),times:o}),!a||!r)){var y=D(v);v.start=y.start,v.end=y.end}return v.start&&(v.start=Math.floor(v.start)),v.end&&(v.end=Math.floor(v.end)),(0,E.default)(c)||(v.resources_filter="".concat(c.join("|"),"$")),(0,E.default)(f)||(v.metrics_filter="".concat(f.join("|"),"$")),t.handleParams(v)},this.handleParams=function(e){return e},this.getResult=function(e){var t={},a=(0,_.default)(e)?e:(0,O.default)(e,"results",[])||[];if((0,E.default)(a)){var r=(0,O.default)(e,"metric_name");r&&(t[r]=e)}else a.forEach((function(e){t[e.metric_name]=e}));return t},this.getNewValues=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=(0,E.default)(e)?[]:(0,d.default)(e),r=t||[];return(0,E.default)(r)||(a.length>10&&a.shift(),a.push(r)),a},this.getNewRefreshedResult=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,d.default)(a);return e.forEach((function(e,a){var n=(0,O.default)(e,"metric.".concat(t.resourceName)),l=null;if(n){var u=r.find((function(e){return(0,O.default)(e,"metric.".concat(t.resourceName))===n}));(0,E.default)(u)?r.push(e):l=u}else l=r[a];if(!(0,E.default)(l)){var o=t.getNewValues(l.values,e.value);(0,S.default)(l,"values",o)}})),r},this.getRefreshResult=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,b.toJS)(a);return(0,E.default)(r)?e:(Object.values(e).forEach((function(e){var a=(0,O.default)(e,"metric_name"),n=r[a];if(n){var l=(0,O.default)(e,"data.result")||[],u=(0,O.default)(n,"data.result",(0,O.default)(n,"data.results"))||[];(0,S.default)(n,"data.result",t.getNewRefreshedResult(l,u))}})),r)},this.getMoreResult=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,b.toJS)(t);return(0,E.default)(a)?e:(Object.values(e).forEach((function(e){var t=(0,O.default)(e,"metric_name"),r=a[t];if(r){var n=(0,O.default)(r,"data.result",(0,O.default)(r,"data.results"))||[],l=(0,O.default)(e,"data.result")||[],u=[].concat((0,d.default)(n),(0,d.default)(l));(0,S.default)(r,"data.result",u)}})),a)},(0,h.default)(this,"checkEtcd",c,this),Object.keys(a).forEach((function(e){return(0,S.default)(t,e,a[e])}))}var t;return(0,y.default)(e,[{key:"fetchMetrics",value:(t=(0,f.default)(s.default.mark((function e(t){var a,r,n,l,u,o,i,c,f,d,p;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.autoRefresh,r=void 0!==a&&a,n=t.more,l=void 0!==n&&n,u=t.fillZero,o=void 0===u||u,i=(0,m.default)(t,["autoRefresh","more","fillZero"]),r?(i.last=!0,this.isRefreshing=!0):this.isLoading=!0,i.cluster&&(this.cluster=i.cluster),c=this.getParams(i),f=this.getApi(i),e.next=7,(0,k.to)(request.get(f,c));case 7:return d=e.sent,p=this.getResult(d),r&&(p=this.getRefreshResult(p,this.data)),l&&(p=this.getMoreResult(p,this.data)),this.data=o?(0,C.fillEmptyMetrics)(c,p):p,this.isLoading=!1,this.isRefreshing=!1,e.abrupt("return",p);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return globals.app.isMultiCluster&&this.cluster?"kapis/clusters/".concat(this.cluster,"/monitoring.kubesphere.io/v1alpha3"):"kapis/monitoring.kubesphere.io/v1alpha3"}}]),e}(),l=(0,g.default)(n.prototype,"isLoading",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=(0,g.default)(n.prototype,"isRefreshing",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=(0,g.default)(n.prototype,"etcdChecking",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,g.default)(n.prototype,"supportETCD",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,g.default)(n.prototype,"fetchMetrics",[b.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchMetrics"),n.prototype),c=(0,g.default)(n.prototype,"checkEtcd",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,f.default)(s.default.mark((function t(){var a,r;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="apis".concat(e.cluster&&globals.app.isMultiCluster?"/clusters/".concat(e.cluster):"","/monitoring.coreos.com/v1/namespaces/kubesphere-monitoring-system/servicemonitors/etcd"),e.etcdChecking=!0,t.prev=2,t.next=5,request.get(a,{},{},(function(){}));case 5:r=t.sent,e.supportETCD="404"!==r.code,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.supportETCD=!1;case 12:return t.prev=12,e.etcdChecking=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})))}}),n);t.default=T},,function(e,t,a){"use strict";(function(e){var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(109)),i=r(a(49)),c=r(a(21)),s=r(a(50)),f=r(a(91)),d=r(a(12)),p=r(a(13)),m=r(a(135)),h=r(a(19)),v=r(a(20)),y=r(a(18)),g=r(a(74)),b=(r(a(92)),r(a(16))),E=r(a(32)),_=a(5),O=r(a(186)),S=a(58),k=r(a(277)),C=r(a(193));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var D=(n=function(t){(0,h.default)(c,t);var a,r,n=P(c);function c(){var e;(0,d.default)(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),(0,f.default)(e,"initializing",l,(0,m.default)(e)),e.module="workspaces",e.clusters=new C.default,(0,f.default)(e,"cluster",u,(0,m.default)(e)),e.namespaces=new C.default,e.devops=new C.default,e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.cluster?"kapis/resources.kubesphere.io/v1alpha3".concat(e.getPath(t),"/").concat(e.module):"host"===globals.clusterRole?"kapis/tenant.kubesphere.io/v1alpha3".concat(e.getPath(t),"/workspacetemplates"):"kapis/tenant.kubesphere.io/v1alpha3".concat(e.getPath(t),"/").concat(e.module)},e.getListUrl=e.getResourceUrl,e.getWatchListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion,"/watch").concat(e.getPath(t),"/workspacetemplates")},e}return(0,p.default)(c,[{key:"fetchDetail",value:(r=(0,s.default)(i.default.mark((function t(){var a,r,n,l,u=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=u.length>0&&void 0!==u[0]?u[0]:{},r=a.cluster,n=a.workspace,!(0,E.default)(n)){t.next=3;break}return t.abrupt("return");case 3:return this.isLoading=!0,t.next=6,request.get(this.getDetailUrl({name:n,cluster:r}),null,null,(function(t,a){"Not Found"!==a.reason&&"No Such Object"!==a.reason&&"Forbidden"!==a.reason||e.navigateTo("/404")}));case 6:return l=t.sent,this.detail=w(w({},this.mapper(l)),{},{cluster:r}),this.isLoading=!1,t.abrupt("return",w(w({},this.mapper(l)),{},{cluster:r}));case 10:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchClusters",value:(a=(0,s.default)(i.default.mark((function e(){var t,a,r,n,l,u,c=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.workspace,r=t.more,this.clusters.isLoading=!0,n={},!globals.app.isMultiCluster){e.next=9;break}return e.next=6,request.get("kapis/tenant.kubesphere.io/v1alpha2/workspaces/".concat(a,"/clusters"),n);case 6:l=e.sent,e.next=10;break;case 9:l={items:[S.DEFAULT_CLUSTER]};case 10:u=l.items.map(O.default.clusters),this.clusters.update({data:r?[].concat((0,o.default)(this.namespaces.data),(0,o.default)(u)):u,total:l.totalItems,limit:10,page:1,isLoading:!1}),this.clusters.data.length>0&&this.selectCluster((0,b.default)(this.clusters.data.find((function(e){return e.isReady})),"name"));case 13:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"selectCluster",value:function(e){this.cluster=e}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.submitting(request.delete(this.getDetailUrl(e),t))}}]),c}(k.default),l=(0,g.default)(n.prototype,"initializing",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=(0,g.default)(n.prototype,"cluster",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,g.default)(n.prototype,"fetchDetail",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),(0,g.default)(n.prototype,"fetchClusters",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchClusters"),n.prototype),(0,g.default)(n.prototype,"selectCluster",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"selectCluster"),n.prototype),(0,g.default)(n.prototype,"delete",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"delete"),n.prototype),n);t.default=D}).call(this,a(42))},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(49)),o=n(r(50)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(74)),m=n(r(16)),h=r(5);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var y=(l=function(e){(0,s.default)(n,e);var a,r=v(n);function n(){var e;(0,i.default)(this,n);for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return(e=r.call.apply(r,[this].concat(a))).module="secrets",e}return(0,c.default)(n,[{key:"validateImageRegistrySecret",value:(a=(0,o.default)(u.default.mark((function e(a){var r,n,l,o,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.fedFormTemplate,n=a.cluster,l=a.namespace,o=a.name,i={validate:!0,reason:""},e.next=4,request.post(" kapis/resources.kubesphere.io/v1alpha3".concat(this.getPath({namespace:l,cluster:n}),"/registrysecrets/").concat(o,"/verify"),r,{},(function(e,a){var r=(0,m.default)(a,"message","");r&&(i.reason=t(r)),i.validate=!1}));case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}]),n}(n(r(277)).default),(0,p.default)(l.prototype,"validateImageRegistrySecret",[h.action],Object.getOwnPropertyDescriptor(l.prototype,"validateImageRegistrySecret"),l.prototype),l);a.default=y},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(16)),f=r(a(73)),d=r(a(68)),p=r(a(24)),m=r(a(0)),h=r(a(1)),v=r(a(3)),y=r(a(1669));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,o.default)(a,e);var t=E(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).handleChildChange=function(t,a,r){var n=e.props.onChange,l=e.props.value,u=void 0===l?{}:l;u=(0,p.default)(u)?u:{},r=(0,s.default)(r,"currentTarget.value",r),(0,f.default)(u,t,r),n(b({},u)),a&&a(r)},e.getValue=function(t,a){var r=(0,s.default)(e.props.value,t),n=(0,s.default)(e.props.defaultValue,t);return(0,d.default)(r)?(0,d.default)(n)?((0,f.default)(e.props.value,t,a),a):((0,f.default)(e.props.value,t,n),n):r},e}return(0,u.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.value,n=t.children,l=m.default.Children.map(n,(function(t){return m.default.cloneElement(t,b(b({},t.props),{},{className:(0,v.default)(t.props.className,y.default.item),value:(0,d.default)(r)?t.props.value:e.getValue(t.props.name,t.props.defaultValue),onChange:e.handleChildChange.bind(e,t.props.name,t.props.onChange)}))}));return m.default.createElement("div",{className:(0,v.default)(y.default.wrapper,a)},l)}}]),a}(m.default.Component);t.default=_,_.propTypes={name:h.default.string,value:h.default.object,defaultValue:h.default.object,onChange:h.default.func,children:h.default.node.isRequired},_.defaultProps={name:"",value:{},onChange:function(){}}},,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Controller",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"TimeSelector",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"StatusCircle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"StatusTabs",{enumerable:!0,get:function(){return o.default}});var n=r(a(2732)),l=r(a(891)),u=r(a(2735)),o=r(a(2737))},,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(0)),u=n(r(16)),o=n(r(32)),i=n(r(848)),c=n(r(1637)),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.active)return null;var a=e.renderLabel,r=e.payload,n=e.usageData,s=e.totalData,f=r||[],d=e.label,p=(0,u.default)(f,"[0].unit")||"",m="default"===p?"":"%"===p?"%":" ".concat(t(p)),h=a?a(e):d;return l.default.createElement("div",{className:c.default.tooltip},l.default.createElement("div",{className:c.default.label},h),l.default.createElement("div",{className:c.default.list},f.map((function(e){var a=e.dataKey,r=e.name,f=e.value,p=void 0===f?0:f;if((0,i.default)(Number(p)))return null;var h=(0,u.default)(e,"stroke"),v="";if(!(0,o.default)(n)&&!(0,o.default)(s)){var y=(0,u.default)(n.find((function(e){return e.time===d})),r)||0,g=(0,u.default)(s.find((function(e){return e.time===d})),r)||0;v=" (".concat(y,"/").concat(g,")")}return l.default.createElement("div",{key:a,className:c.default.item},l.default.createElement("i",{style:{background:h}}),t(r),": ",p,m,v)}))))};a.default=s},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(21)),o=n(r(109)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(32)),m=n(r(291)),h=n(r(0)),v=n(r(1)),y=n(r(3)),g=r(25),b=n(r(1676)),E=n(r(1212));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=function(e){(0,s.default)(r,e);var a=S(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).handleAdd=function(){n.setState((function(e){var t=e.arrayValues;return{arrayValues:[].concat((0,o.default)(t),[{key:""}])}}))},n.triggerChange=function(e){var a=n.props.onChange,r=n.state,l=r.hiddenValues,i=r.readOnlyValues,c=!1,s=!1;n.props.onError();var f=[].concat((0,o.default)(l),(0,o.default)(i),(0,o.default)(e)).reduce((function(e,t){return t.key=t.key||"",(0,p.default)(t.key)&&(0,p.default)(t.value)&&(s=!0),(0,m.default)(e,t.key)?(c=!0,e):O(O({},e),{},(0,u.default)({},t.key,t.value||""))}),{});n.setState({arrayValues:e},(function(){s||c||a(f)})),Object.keys(f).some((function(e){return(0,p.default)(e)}))?n.props.onError({message:t("EMPTY_KEY")}):c?n.props.onError({message:t("DUPLICATE_KEYS")}):n.props.onError()},n.handleItemChange=function(e,t){var a=n.state.arrayValues;a[e]=t,n.triggerChange(a)},n.handleItemDelete=function(e){var t=n.state.arrayValues;n.triggerChange(t.filter((function(t,a){return a!==e})))},n.state=O({existedKey:!1,propsValue:e.value},r.getValues(e)),n}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.controlled&&this.props.value!==e.value&&this.setState(O({propsValue:this.props.value},r.getValues(this.props)))}},{key:"isAddEnable",value:function(){return this.state.arrayValues.every((function(e){return!((0,p.default)(e)||!e.key&&!e.value)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.addText,n=t.itemProps,u=this.state,o=u.readOnlyValues,i=u.arrayValues;return h.default.createElement("div",{className:(0,y.default)(E.default.wrapper,a)},o.map((function(e){return h.default.createElement(b.default,(0,l.default)({key:"readonly-".concat(e.key),value:e,readOnly:!0},n))})),i.map((function(t,a){return h.default.createElement(b.default,(0,l.default)({key:"array-".concat(a),index:a,value:t||{},onChange:e.handleItemChange,onDelete:e.handleItemDelete},n))})),h.default.createElement("div",{className:"text-right"},h.default.createElement(g.Button,{className:E.default.add,onClick:this.handleAdd,disabled:!this.isAddEnable()},r)))}}],[{key:"getValues",value:function(e){var t=e.value||{},a=[],r=[],n=[];return Object.keys(t).forEach((function(l){e.hiddenKeys.some((function(e){return new RegExp(e).test(l)}))?a.push({key:l,value:t[l]}):e.readOnlyKeys.some((function(e){return new RegExp(e).test(l)}))?r.push({key:l,value:t[l]}):n.push({key:l,value:t[l]})})),(0,p.default)(n)&&(0,p.default)(r)&&n.push({key:""}),{hiddenValues:a,readOnlyValues:r,arrayValues:n}}}]),r}(h.default.Component);a.default=k,k.propTypes={name:v.default.string,value:v.default.object,hiddenKeys:v.default.arrayOf(v.default.string),readOnlyKeys:v.default.arrayOf(v.default.string),controlled:v.default.bool,onChange:v.default.func,onError:v.default.func},k.defaultProps={name:"",value:{},hiddenKeys:[],readOnlyKeys:[],controlled:!1,onChange:function(){}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCREENSHOTS_LIMIT=t.UPLOAD_FILE_TYPES=t.UPLOAD_CHECK_RULES=t.OPENPITRIX_LINKS=t.CATEGORY_ICONS=t.UPLOAD_STATUS_WORD=t.CLUSTER_QUERY_STATUS=t.REVIEW_QUERY_STATUS=t.STORE_APP_LIMIT=t.MAX_LIMIT=t.STORE_QUERY_STATUS=t.DEFAULT_QUERY_STATUS=void 0;t.DEFAULT_QUERY_STATUS="draft|active|suspended|passed";t.STORE_QUERY_STATUS="active|suspended";t.MAX_LIMIT=200;t.STORE_APP_LIMIT=12;t.REVIEW_QUERY_STATUS={all:"active|rejected|passed|submitted|suspended",processed:"active|rejected|passed|suspended",unprocessed:"submitted"};t.CLUSTER_QUERY_STATUS="creating|active|failed|deleting|upgrading|created|upgraded";t.UPLOAD_STATUS_WORD={init:"HELM_CHART_FORMAT_DESC",uploading:"UPLOADING",success:"UPLOAD_SUCCESSFUL"};t.CATEGORY_ICONS=["database","export","documentation","mail","calendar","column","earth","picture","firewall","ai","camera","image","increase","network","router","storage","scissors","loadbalancer","ip","blockchain","car","nodes","usb-redirection","coding","cdn","ssh","linechart","cart","cluster","role","wrench","radio"];t.OPENPITRIX_LINKS={helm_developer_guide:"https://kubesphere.io/docs/application-store/app-developer-guide/helm-specification/"};t.UPLOAD_CHECK_RULES={package:{format:/\.(tgz|tar\.gz)$/,size:2097152},icon:{format:/\.(png|jpg|jpeg)$/,size:20480},screenshots:{format:/\.(png|jpg|jpeg)$/,size:2097152}};t.UPLOAD_FILE_TYPES={package:"application/x-gzip,application/x-tar",icon:"image/png,image/jpg,image/jpeg",screenshot:"image/png,image/jpg,image/jpeg"};t.SCREENSHOTS_LIMIT=6},function(e,a,r){"use strict";(function(e){var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p=n(r(49)),m=n(r(109)),h=n(r(21)),v=n(r(50)),y=n(r(56)),g=n(r(91)),b=n(r(12)),E=n(r(13)),_=n(r(135)),O=n(r(19)),S=n(r(20)),k=n(r(18)),C=n(r(74)),R=(n(r(92)),n(r(73))),w=n(r(16)),P=n(r(23)),D=n(r(190)),T=n(r(185)),N=r(5),I=n(r(277)),A=n(r(747));function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,h.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,k.default)(e);if(t){var n=(0,k.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,S.default)(this,a)}}var L=(l=function(a){(0,O.default)(N,a);var r,n,l,h,S,k,C=M(N);function N(){var e;(0,b.default)(this,N);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=C.call.apply(C,[this].concat(a)),(0,g.default)(e,"initializing",u,(0,_.default)(e)),e.roleStore=new A.default,e.module="devops",e.hostName="",(0,g.default)(e,"roles",o,(0,_.default)(e)),(0,g.default)(e,"data",i,(0,_.default)(e)),e.detail={},(0,g.default)(e,"devopsListData",c,(0,_.default)(e)),(0,g.default)(e,"devops",s,(0,_.default)(e)),(0,g.default)(e,"devopsName",f,(0,_.default)(e)),e.getDevopsUrlV2=function(t){return"kapis/devops.kubesphere.io/v1alpha2".concat(e.getPath(t),"/")},e.getDevopsUrlV3=function(t){return"kapis/devops.kubesphere.io/v1alpha3".concat(e.getPath(t),"/")},e.getDevopsTenantUrl=function(t){return"kapis/tenant.kubesphere.io/v1alpha2".concat(e.getPath(t),"/devops")},e.getResourceUrl=function(t){return"".concat(e.getDevopsUrlV2(t))},e.getBaseUrl=function(t){return"".concat(e.apiVersion).concat(e.getPath(t),"/")},e.getWatchListUrl=function(t){var a=t.workspace,r=(0,y.default)(t,["workspace"]);return"apis/devops.kubesphere.io/v1alpha3/watch".concat(e.getPath(r),"/devopsprojects?labelSelector=kubesphere.io/workspace=").concat(a)},e.getWatchUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.getWatchListUrl(t),"/").concat(t.name)},(0,g.default)(e,"setSelectRowKeys",d,(0,_.default)(e)),e}return(0,E.default)(N,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=e.workspace,n=e.devops,l="";return t&&(l+="/klusters/".concat(t)),r&&(l+="/workspaces/".concat(r)),a&&(l+="/namespaces/".concat(a)),n&&(l+="/devops/".concat(n)),l}},{key:"getDevops",value:function(e){return e.slice(0,-5)}},{key:"fetchList",value:(k=(0,v.default)(p.default.mark((function e(){var t,a,r,n,l,u,o,i,c=this,s=arguments;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.workspace,r=t.cluster,n=t.more,l=(0,y.default)(t,["workspace","cluster","more"]),this.list.isLoading=!0,l.limit===1/0||-1===l.limit?(l.limit=-1,l.page=1):l.limit=l.limit||10,e.next=5,request.get(this.getDevopsTenantUrl({cluster:r,workspace:a}),l).catch((function(){}));case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:u=e.t0,o=Array.isArray((0,w.default)(u,"items"))?(0,w.default)(u,"items"):[],this.devopsListData=o,i=o.map((function(e){return j({cluster:r},c.mapper(e))})),this.list.update(j(j({data:n?[].concat((0,m.default)(this.list.data),(0,m.default)(i)):i,total:u.totalItems||i.length||0,limit:Number(l.limit)||10,page:Number(l.page)||1,cluster:globals.app.isMultiCluster?r:void 0,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]}),(0,D.default)(l,["limit","page"])));case 13:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"create",value:function(e,t){var a=t.cluster,r=t.workspace;return e.kind="DevOpsProject",e.apiVersion="devops.kubesphere.io/v1alpha3",e.metadata.labels={"kubesphere.io/workspace":r},this.submitting(request.post("".concat(this.getBaseUrl({cluster:a,workspace:r}),"devops"),e))}},{key:"update",value:(S=(0,v.default)(p.default.mark((function e(t,a){var r,n,l,u;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.cluster,n=t.workspace,l=t.devops,e.next=3,this.fetchDetail({cluster:r,workspace:n,devops:l});case 3:if(!(u=(0,T.default)(this.itemDetail))){e.next=8;break}return(0,R.default)(u,'metadata.annotations["kubesphere.io/description"]',a.description),(0,R.default)(u,'metadata.annotations["kubesphere.io/alias-name"]',a.aliasName),e.abrupt("return",this.submitting(request.put("".concat(this.getBaseUrl({cluster:r,workspace:n,devops:l})),u,{headers:{"content-type":"application/json"}})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return S.apply(this,arguments)})},{key:"editAllowlist",value:(h=(0,v.default)(p.default.mark((function e(t,a){var r,n,l,u;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.cluster,n=t.workspace,l=t.devops,e.next=3,this.fetchDetail({cluster:r,workspace:n,devops:l});case 3:return u=(0,T.default)(this.itemDetail),(0,R.default)(u,"spec.argo",(0,w.default)(a,"spec.argo")),e.abrupt("return",this.submitting(request.put("".concat(this.getBaseUrl({cluster:r,workspace:n,devops:l})),u,{headers:{"content-type":"application/json"}})));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"delete",value:function(e){var t=e.devops,a=e.cluster,r=e.workspace;return this.submitting(request.delete("".concat(this.getBaseUrl({workspace:r,cluster:a,devops:t}))))}},{key:"batchDelete",value:function(e,t){var a=this,r=t.workspace,n=t.cluster,l=t.devops;return this.submitting(Promise.all(e.map((function(e){return request.delete("".concat(a.getBaseUrl({workspace:r,cluster:n,devops:a.list.find((function(t){return t.name===e})).devops}),"/").concat(l))}))))}},{key:"fetchDetail",value:(l=(0,v.default)(p.default.mark((function t(a){var r,n,l,u,o;return p.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.devops,l=a.workspace,t.next=3,request.get(this.getBaseUrl({workspace:l,cluster:r,devops:n}),null,null,(function(t){"Not Found"!==t.reason&&"Forbidden"!==t.reason||e.navigateTo("/404")}));case 3:u=t.sent,this.itemDetail=u,o=j({cluster:r},this.mapper(u)),this.devopsName=o.name,this.devops=o.devops,o.workspace=o.workspace||l,this.data=o,this.detail=o;case 11:case"end":return t.stop()}}),t,this)}))),function(e){return l.apply(this,arguments)})},{key:"fetchRoles",value:(n=(0,v.default)(p.default.mark((function e(a){var r,n,l;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.cluster,n=a.devops,this.roles.isLoading=!0,e.next=4,request.get("".concat(this.getListUrl({cluster:r}),"/").concat(n,"/defaultroles"));case 4:l=e.sent,(0,P.default)(l)&&(this.roles.data=l.map((function(e){return e.description=t("pipeline_".concat(e.name)),e})),this.roles.total=l.length),this.roles.isLoading=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchListByUser",value:(r=(0,v.default)(p.default.mark((function e(){var t,a,r,n,l,u,o,i,c=this,s=arguments;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.cluster,r=t.workspace,n=t.namespace,l=t.username,t.type,u=(0,y.default)(t,["cluster","workspace","namespace","username","type"]),this.list.isLoading=!0,u.sortBy||void 0!==u.ascending||(u.sortBy="createTime"),u.limit!==1/0&&-1!==u.limit||(u.limit=-1,u.page=1),u.limit=u.limit||10,e.next=7,request.get("kapis/tenant.kubesphere.io/v1alpha2/workspaces/".concat(r).concat(this.getPath({cluster:a,namespace:n}),"/workspacemembers/").concat(l,"/devops"),u);case 7:return o=e.sent,i=(0,w.default)(o,"items",[]).map((function(e){return j({cluster:a},c.mapper(e))})),this.list.update(j(j({data:i,total:o.totalItems||0},u),{},{cluster:globals.app.isMultiCluster?a:void 0,limit:Number(u.limit)||10,page:Number(u.page)||1,isLoading:!1})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),N}(I.default),u=(0,C.default)(l.prototype,"initializing",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=(0,C.default)(l.prototype,"roles",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,total:0,isLoading:!0}}}),i=(0,C.default)(l.prototype,"data",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=(0,C.default)(l.prototype,"devopsListData",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,C.default)(l.prototype,"devops",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=(0,C.default)(l.prototype,"devopsName",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,C.default)(l.prototype,"fetchList",[N.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchList"),l.prototype),(0,C.default)(l.prototype,"create",[N.action],Object.getOwnPropertyDescriptor(l.prototype,"create"),l.prototype),(0,C.default)(l.prototype,"update",[N.action],Object.getOwnPropertyDescriptor(l.prototype,"update"),l.prototype),(0,C.default)(l.prototype,"editAllowlist",[N.action],Object.getOwnPropertyDescriptor(l.prototype,"editAllowlist"),l.prototype),(0,C.default)(l.prototype,"delete",[N.action],Object.getOwnPropertyDescriptor(l.prototype,"delete"),l.prototype),(0,C.default)(l.prototype,"batchDelete",[N.action],Object.getOwnPropertyDescriptor(l.prototype,"batchDelete"),l.prototype),(0,C.default)(l.prototype,"fetchDetail",[N.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchDetail"),l.prototype),(0,C.default)(l.prototype,"fetchRoles",[N.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchRoles"),l.prototype),d=(0,C.default)(l.prototype,"setSelectRowKeys",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.list.selectedRowKeys=t}}}),(0,C.default)(l.prototype,"fetchListByUser",[N.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchListByUser"),l.prototype),l);a.default=L}).call(this,r(42))},,,,,,,function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(71)),u=n(a(12)),o=n(a(13)),i=n(a(19)),c=n(a(20)),s=n(a(18)),f=r(a(0)),d=n(a(1)),p=n(a(3)),m=a(25),h=n(a(1563));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=(0,f.lazy)((function(){return Promise.all([a.e(0),a.e(11)]).then(a.t.bind(null,3658,7))})),g=function(e){(0,i.default)(a,e);var t=v(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.mode,r=e.options,n=e.value,u=e.onChange;return f.default.createElement(f.Suspense,{fallback:f.default.createElement(m.Loading,{className:"ks-page-loading"})},f.default.createElement(y,(0,l.default)({},r,{className:(0,p.default)(h.default.editor,t),value:n,mode:a,onChange:u})))}}]),a}(f.PureComponent);g.propTypes={value:d.default.oneOfType([d.default.string,d.default.object,d.default.arrayOf(d.default.string),d.default.arrayOf(d.default.object)]),mode:d.default.string,options:d.default.object,onChange:d.default.func},g.defaultProps={value:{},mode:"yaml",options:{},onChange:function(){}};var b=g;t.default=b},,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(3)),f=a(25),d=r(a(1557));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.onOk,r=e.okText,n=e.onCancel,l=e.cancelText;return c.default.createElement("div",{className:(0,s.default)(d.default.wrapper,t)},c.default.createElement("div",{className:d.default.button,onClick:n,"data-test":"confirm-cancel"},l||c.default.createElement(f.Icon,{name:"close",type:"light"})),c.default.createElement("div",{className:d.default.button,onClick:a,"data-test":"confirm-ok"},r||c.default.createElement(f.Icon,{name:"check",type:"light"})))}}]),a}(c.default.PureComponent);t.default=m},,function(e,t,a){"use strict";a.r(t),a.d(t,"ReactComponent",(function(){return c}));var r=a(71),n=a.n(r),l=a(0),u=a.n(l),o=u.a.createElement("path",{d:"M17.613 10.43c1.07.653 2.38 2.418 2.926 4.543.546 2.124.455 4.027.455 4.027s-.706-1.172-.992-1.582c-.287-.411-1.494-1.941-3.367-2.828-1.874-.887-5.005-.73-5.005-.73l.37 3.705-9-6.288 9-6.266-.37 3.716s2.073.16 3.157.39c1.825.389 2.826 1.312 2.826 1.312z"}),i=u.a.createElement("path",{fill:"currentColor",d:"M12 17.564l-9-6.287 9-6.267z"}),c=function(e){return u.a.createElement("svg",n()({viewBox:"0 0 24 24",width:"1em",height:"1em"},e),o,i)};t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnPgogICAgICAgIDxwYXRoIGQ9Ik0xNy42MTMgMTAuNDNjMS4wNy42NTMgMi4zOCAyLjQxOCAyLjkyNiA0LjU0My41NDYgMi4xMjQuNDU1IDQuMDI3LjQ1NSA0LjAyN3MtLjcwNi0xLjE3Mi0uOTkyLTEuNTgyYy0uMjg3LS40MTEtMS40OTQtMS45NDEtMy4zNjctMi44MjgtMS44NzQtLjg4Ny01LjAwNS0uNzMtNS4wMDUtLjczbC4zNyAzLjcwNS05LTYuMjg4IDktNi4yNjYtLjM3IDMuNzE2czIuMDczLjE2IDMuMTU3LjM5YzEuODI1LjM4OSAyLjgyNiAxLjMxMiAyLjgyNiAxLjMxMnoiLz4KICAgICAgICA8cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMiAxNy41NjRsLTktNi4yODcgOS02LjI2N3oiLz4KICAgIDwvZz4KPC9zdmc+Cg=="},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(3)),p=n(r(1772));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.img,n=e.desc;return s.default.createElement("div",{className:(0,d.default)(p.default.wrapper,a)},s.default.createElement("img",{src:r,alt:"No data"}),s.default.createElement("div",{className:p.default.content},t(n)))}}]),r}(s.default.PureComponent);a.default=h,h.propTypes={className:f.default.string,img:f.default.string,desc:f.default.string},h.defaultProps={img:"/assets/empty-card.svg",desc:"NO_DATA"}},,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(71)),c=n(r(136)),s=n(r(49)),f=n(r(21)),d=n(r(56)),p=n(r(50)),m=n(r(12)),h=n(r(13)),v=n(r(19)),y=n(r(20)),g=n(r(18)),b=n(r(0)),E=r(5),_=r(70),O=n(r(1)),S=n(r(3)),k=n(r(745)),C=n(r(32)),R=n(r(291)),w=n(r(16)),P=n(r(820)),D=r(25),T=r(37),N=r(725),I=n(r(186)),A=n(r(654)),x=n(r(920)),j=n(r(657)),M=n(r(723)),L=n(r(2816)),U=n(r(1416));function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var B={cpu:"pod_cpu_usage",memory:"pod_memory_usage_wo_cache"},z=(0,_.observer)((o=u=function(e){(0,v.default)(r,e);var a=q(r);function r(e){var n;(0,m.default)(this,r),(n=a.call(this,e)).getParams=function(e){var t=n.props,a=t.detail,r=t.details,l=(t.isFederated?r[e]:a)||{},u=l.name,o=l.namespace,i=l.kind,c=l.selector,s=l._originData,f=i||(0,w.default)(s,"kind",""),d={};switch(e&&(d.cluster=e),o&&(d.namespace=o),f){case"PVC":d.pvcName=u;break;case"Node":d.nodeName=u;break;case"Namespace":d.namespace=u;break;case"Service":case"IPPool":d.labelSelector=(0,T.joinSelector)(c);break;default:d.ownerKind="Deployment"===f?"ReplicaSet":f,d.labelSelector=(0,T.joinSelector)(c)}return(0,R.default)(d,"labelSelector")&&(0,C.default)(c)&&(d={}),d},n.fetchData=(0,p.default)(s.default.mark((function e(){var t,a,r,l,u,o=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},a=t.noMetrics,r=t.silent,l=(0,d.default)(t,["noMetrics","silent"]),!(0,C.default)(n.state.params)){e.next=4;break}return n.store.list.isLoading=!1,e.abrupt("return");case 4:return u=n.props.limit,r&&(n.store.list.silent=!0),e.next=8,n.store.fetchList(V(V({limit:u},n.state.params),l));case 8:n.store.list.silent=!1,a||n.fetchMetrics();case 10:case"end":return e.stop()}}),e)}))),n.fetchMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.store.list,a=t.data,r=t.isLoading;if((0,C.default)(a)||r||(0,C.default)(n.state.params))return!1;n.monitorStore.fetchMetrics(V(V({step:"1m",times:30,resources:a.map((function(e){return e.name})),metrics:Object.values(B)},n.state.params),e))},n.getPagination=function(){var e=n.store.list;return{page:e.page,limit:e.limit,total:e.total}},n.getPodMetrics=function(e){var t=n.monitorStore.data,a={};return Object.entries(B).forEach((function(r){var n=(0,c.default)(r,2),l=n[0],u=n[1],o=(0,w.default)(t,"".concat(u,".data.result"))||[];a[l]=o.find((function(t){return(0,w.default)(t,"metric.pod")===e.name}))})),a},n.handleSearch=function(e){n.searchValue=e,n.fetchData({name:e}).then((function(){n.props.onSearch(e)}))},n.handleRefresh=function(){var e=n.searchValue?{name:n.searchValue}:{};n.fetchData(e).then((function(){var t=n.props,a=t.onSearch,r=t.onRefresh;(0,C.default)(e)?r():a(n.searchValue)}))},n.handlePage=function(e){n.fetchData({page:e}).then((function(){n.props.onPage(e)}))},n.handleExpand=function(e){n.setState((function(t){return{expandItem:t.expandItem===e?"":e}}))},n.getClustersOptions=function(){return n.props.clusters.map((function(e){return{label:e,value:e}}))},n.handleClusterChange=function(e){n.setState({selectCluster:e,params:n.getParams(e)},(function(){n.fetchData(),n.initWebsocket()}))},n.renderHeader=function(){var e=n.props.isFederated,a=n.state.selectCluster;return b.default.createElement("div",{className:U.default.header},e&&b.default.createElement(D.Select,{name:"cluster",prefixIcon:b.default.createElement(D.Icon,{name:"cluster"}),className:U.default.cluster,value:a,options:n.getClustersOptions(),onChange:n.handleClusterChange}),b.default.createElement(D.InputSearch,{className:U.default.search,name:"search",placeholder:t("SEARCH_BY_NAME"),onSearch:n.handleSearch}),b.default.createElement("div",{className:U.default.actions},b.default.createElement(D.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh})))},n.renderFooter=function(){var e=n.getPagination(),a=e.total;return b.default.createElement(D.Level,{className:U.default.footer},b.default.createElement(D.LevelLeft,null,t("TOTAL_ITEMS",{num:a})),b.default.createElement(D.LevelRight,null,b.default.createElement(D.Pagination,(0,i.default)({},e,{onChange:n.handlePage}))))},n.store=new A.default,n.monitorStore=new x.default;var l=e.isFederated?(0,w.default)(e,"clusters[0]"):e.detail.cluster;return n.state={expandItem:"",selectCluster:l||"",params:n.getParams(l)},n.websocket=new j.default,n.initWebsocket(),n}return(0,h.default)(r,[{key:"initWebsocket",value:function(){var e=this,t=this.state,a=t.selectCluster,r=t.params,n=void 0===r?{}:r,l=n.namespace,u=n.labelSelector,o="api/v1/watch".concat(a?"/klusters/".concat(a):"","/namespaces/").concat(l,"/pods?labelSelector=").concat(u);o&&l&&u&&(this.websocket.watch(o),this.fetchData=(0,P.default)(this.fetchData,2e3),this.disposer=(0,E.reaction)((function(){return e.websocket.message}),(function(t){if("Pod"===t.object.kind)if("MODIFIED"===t.type){var r=V({cluster:a},I.default.pods((0,E.toJS)(t.object)));e.store.list.updateItem(r)}else"DELETED"!==t.type&&"ADDED"!==t.type||e.fetchData({silent:!0})})))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props,r=a.detail,n=a.details,l=a.isFederated,u=l&&!(0,k.default)(n,e.details);if(r!==e.detail||u){var o=l?(0,w.default)(this.props,"clusters[0]"):r.cluster;this.setState({expandItem:"",selectCluster:o||"",params:this.getParams(o)},(function(){t.fetchData(),t.initWebsocket()}))}}},{key:"componentDidMount",value:function(){this.fetchData(),(0,N.startAutoRefresh)(this,{method:"fetchMetrics",leading:!1})}},{key:"componentWillUnmount",value:function(){(0,N.stopAutoRefresh)(this),this.disposer&&this.disposer()}},{key:"renderContent",value:function(){var e=this,a=this.props,r=a.prefix,n=a.isFederated,l=this.store.list,u=l.data,o=l.isLoading,i=l.silent,c=this.state.selectCluster,s=b.default.createElement("div",{className:U.default.body},(0,C.default)(u)?b.default.createElement("div",{className:U.default.empty},t("NO_RESOURCE_FOUND")):u.map((function(t){return b.default.createElement(L.default,{key:t.uid,prefix:n?"".concat(r,"/clusters/").concat(c):r,detail:t,metrics:e.getPodMetrics(t),loading:e.monitorStore.isLoading,refreshing:e.monitorStore.isRefreshing,isExpand:e.state.expandItem===t.uid,onExpand:e.handleExpand})})));return i?s:b.default.createElement(D.Loading,{spinning:o},s)}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=e.hideHeader,l=e.hideFooter,u=e.noWrapper,o=this.store.list.data;return u?this.renderContent():b.default.createElement(M.default,{className:(0,S.default)(U.default.main,a),title:t(r),empty:t("EMPTY_WRAPPER",{resource:t("POD")}),isEmpty:(0,C.default)(o)},!n&&this.renderHeader(),this.renderContent(),!l&&this.renderFooter())}}]),r}(b.default.Component),u.propTypes={prefix:O.default.string,title:O.default.string,detail:O.default.object,details:O.default.object,hideHeader:O.default.bool,hideFooter:O.default.bool,isFederated:O.default.bool,onSearch:O.default.func,onRefresh:O.default.func,onPage:O.default.func,limit:O.default.number},u.defaultProps={title:"Pods",detail:{},details:{},hideHeader:!1,hideFooter:!1,isFederated:!1,onSearch:function(){},onRefresh:function(){},onPage:function(){}},l=o))||l;a.default=z},,function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(12)),o=n(a(13)),i=n(a(19)),c=n(a(20)),s=n(a(18)),f=n(a(32)),d=r(a(0)),p=n(a(1)),m=n(a(3)),h=a(25),v=n(a(1554));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,i.default)(a,e);var t=y(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).toggleSwitch=function(){var t=e.props,a=t.checked;(0,t.onChange)(!a)},e}return(0,o.default)(a,[{key:"render",value:function(){var e,t=this.props,a=t.className,r=t.disabled,n=t.type,u=t.text,o=t.checked,i=!(0,f.default)(u);return d.default.createElement(h.Button,{className:(0,m.default)(v.default.wrapper,(0,l.default)({},v.default[n],o),a),type:"default",onClick:this.toggleSwitch},d.default.createElement("label",{className:(0,m.default)(v.default.switch,(e={},(0,l.default)(e,v.default.disabled,r),(0,l.default)(e,v.default.on,o),e))},i&&d.default.createElement("span",{className:v.default.inner},u)))}}]),a}(d.PureComponent);t.default=g,g.propTypes={className:p.default.string,type:p.default.string,text:p.default.string,disabled:p.default.bool,checked:p.default.bool,onChange:p.default.func},g.defaultProps={type:"primary",checked:!1,onChange:function(){}}},,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(49)),o=r(a(50)),i=r(a(91)),c=r(a(12)),s=r(a(13)),f=r(a(135)),d=r(a(19)),p=r(a(20)),m=r(a(18)),h=r(a(74)),v=(r(a(92)),a(5));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var g=(n=function(e){(0,d.default)(r,e);var t,a=y(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).module="resourcequotas",(0,i.default)(e,"data",l,(0,f.default)(e)),e}return(0,s.default)(r,[{key:"fetch",value:(t=(0,o.default)(u.default.mark((function e(t){var a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get("kapis/resources.kubesphere.io/v1alpha2".concat(this.getPath(t),"/quotas"));case 3:return a=e.sent,this.data=a.data,this.isLoading=!1,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),r}(r(a(277)).default),l=(0,h.default)(n.prototype,"data",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,h.default)(n.prototype,"fetch",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"fetch"),n.prototype),n);t.default=g},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.checkRepoInvalidReason=a.compareVersion=a.downloadFileFromBase64=a.getAppCategoryNames=a.getVersionTypesName=a.transferReviewStatus=a.transferVersionStatus=a.transferAppStatus=void 0;var l=n(r(192)),u=n(r(303)),o=r(914);a.transferAppStatus=function(e){return o.STATUS_TRANSFER_MAP[e]?t("APP_STATUS_".concat(o.STATUS_TRANSFER_MAP[e].toUpperCase().replace(/[^A-Z]+/g,"_"))):e};a.transferVersionStatus=function(e){return o.STATUS_TRANSFER_MAP[e]?"draft"===e?t("APP_STATUS_NOT_SUBMITTED"):t("APP_STATUS_".concat(o.STATUS_TRANSFER_MAP[e].toUpperCase().replace(/[^A-Z]+/g,"_"))):e};a.transferReviewStatus=function(e){var t;switch(e){case"submitted":t="to-be-reviewed";break;case"passed":case"suspended":case"rejected":case"active":t=e;break;default:t="in-review"}return t};a.getVersionTypesName=function(e){return e?e.split(",").map((function(e){return(0,u.default)(e)})).join(" "):"-"};a.getAppCategoryNames=function(e){var a=[];return e.forEach((function(e){var r=e.category_id,n=e.name,l=e.status;if(r&&"disabled"!==l){var u="ctg-uncategorized"===r?t("Uncategorized"):n;a.push(t(u||r))}})),a.length?a.join(", "):"-"};a.downloadFileFromBase64=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=document.createElement("a");a.href="data:application/tar+gzip;base64,".concat(e),a.download="".concat(t,".tgz"),a.click()};a.compareVersion=function(e,t){if((0,l.default)(e)+(0,l.default)(t)!=="stringstring")return!1;for(var a=e.split("."),r=t.split("."),n=Math.max(a.length,r.length),u=0;u<n;u++){if(a[u]&&!r[u]&&parseInt(a[u],10)>0||parseInt(a[u],10)>parseInt(r[u],10))return 1;if(r[u]&&!a[u]&&parseInt(r[u],10)>0||parseInt(a[u],10)<parseInt(r[u],10))return-1}return 0};a.checkRepoInvalidReason=function(e){return t({102:"Unrecognized URL",103:"Invalid format of credential",104:"Missing access key ID",105:"Missing secret access key",106:"S3 access denied",107:"Invalid format of URL",108:"Invalid HTTP Scheme",109:"HTTP access denied",110:"Invalid HTTPS Scheme",111:"Invalid type",112:"Invalid Providers",113:"Invalid Repo URL",114:"Invalid S3 Scheme"}[e]||"INVALID_URL_DESC")}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(49)),o=r(a(56)),i=r(a(50)),c=r(a(91)),s=r(a(12)),f=r(a(135)),d=r(a(19)),p=r(a(20)),m=r(a(18)),h=r(a(74)),v=(r(a(92)),a(5)),y=a(914);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var b=(n=function(e){(0,d.default)(a,e);var t=g(a);function a(){var e;(0,s.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).resourceName="versions",e.sortKey="sequence",e.defaultStatus=y.DEFAULT_QUERY_STATUS,(0,c.default)(e,"handle",l,(0,f.default)(e)),e}return a}(r(a(844)).default),l=(0,h.default)(n.prototype,"handle",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,i.default)(u.default.mark((function t(){var a,r,n,l,i,c,s=arguments;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:{},r=a.app_id,n=a.version_id,l=a.workspace,i=(0,o.default)(a,["app_id","version_id","workspace"]),c=e.getUrl({app_id:r,version_id:n,workspace:l,name:"action"}),t.next=4,e.submitting(request.post(c,i));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))}}),n);t.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0;var l=n(r(21)),u=n(r(71)),o=n(r(56)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(291)),m=n(r(138)),h=n(r(0)),v=r(276),y=r(70),g=n(r(2799)),b=r(58),E=r(634),_=n(r(2800)),O=n(r(2808));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=function(e){(0,s.default)(r,e);var a=C(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).getEnabledOperations=function(){var e=t.props.operations;return(void 0===e?[]:e).filter((function(e){return!((0,p.default)(e,"show")&&!e.show)&&(!e.action||t.enabledActions.includes(e.action))}))},t.stores={},t.state={routes:t.getEnabledRoutes()},t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){e.routes!==this.props.routes&&this.setState({routes:this.getEnabledRoutes()})}},{key:"getEnabledRoutes",value:function(){var e=this.props.routes,t=this.props.match.params.cluster;return e.filter((function(e){return e.ksModule?((0,m.default)(e.ksModule)?[e.ksModule]:e.ksModule).every((function(e){return globals.app.hasKSModule(e)})):!e.clusterModule||((0,m.default)(e.clusterModule)?[e.clusterModule]:e.clusterModule).every((function(e){return globals.app.hasClusterModule(t,e)}))}))}},{key:"renderNav",value:function(e){var a=this.props.match.params;return h.default.createElement("div",{className:O.default.nav},e.map((function(e){return e.title?h.default.createElement(v.NavLink,{key:e.path,className:O.default.navItem,activeClassName:O.default.active,to:g.default.compile(e.path)(a)},t(e.title)):null})))}},{key:"render",value:function(){var e=this.props,t=e.stores,a=e.nav,r=(0,o.default)(e,["stores","nav"]),n=this.state.routes;return h.default.createElement(y.Provider,(0,u.default)({},this.stores,t),h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:O.default.sider},h.default.createElement(_.default,(0,u.default)({},r,{icon:r.icon||b.ICON_TYPES[r.module],operations:this.getEnabledOperations()}))),h.default.createElement("div",{className:O.default.content},a||this.renderNav(n),(0,E.renderRoutes)(n))))}},{key:"authKey",get:function(){return this.props.authKey||this.props.module}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.namespace,a=(0,o.default)(e,["namespace"]);return globals.app.getActions(k(k({module:this.authKey},a),{},{project:t}))}}]),r}(h.default.Component),w=(0,y.inject)("rootStore")((0,v.withRouter)(R));a.default=w;var P=R;a.Component=P},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=a(276),d=a(70),p=a(815);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=(n=(0,d.inject)("rootStore"),(0,f.withRouter)(l=n(l=function(e){(0,i.default)(a,e);var t=m(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return globals.app.getActions({module:this.authKey,cluster:t,project:a})}}]),a}(p.Component))||l)||l);t.default=h},,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(16)),u={},o={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.pathname;return(0,l.default)(u,"".concat(e,".").concat(t))},set:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:location.pathname;u[e]=(0,n.default)({},a,t)},delete:function(e){delete u[e]}};t.default=o},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(56)),c=r(a(21)),s=r(a(49)),f=r(a(109)),d=r(a(50)),p=r(a(91)),m=r(a(12)),h=r(a(13)),v=r(a(135)),y=r(a(19)),g=r(a(20)),b=r(a(18)),E=r(a(74)),_=(r(a(92)),r(a(16))),O=r(a(73)),S=r(a(738)),k=r(a(281)),C=a(5),R=r(a(277)),w=a(37),P=r(a(733)),D=a(58),T=r(a(927));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var x=(n=function(e){(0,y.default)(r,e);var t,a=A(r);function r(){var e;(0,m.default)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).module="s2ibuilders",e.runStore=new T.default,(0,p.default)(e,"detail",l,(0,v.default)(e)),e.getS2iSupportLanguage=function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,l;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getBuilderTemplate(a);case 2:return r=t.sent,n={s2i:(0,f.default)(D.S2I_SUPPORTED_TYPES),b2i:(0,f.default)(D.B2I_SUPPORTED_TYPES)},l={java:"jar",tomcat:"war"},r&&r.items&&r.items.forEach((function(e){(0,_.default)(e,'metadata.labels["builder-type.kubesphere.io/b2i"]')&&n.b2i.push(l[e.spec.codeFramework]||e.spec.codeFramework),(0,_.default)(e,'metadata.labels["builder-type.kubesphere.io/s2i"]')&&n.s2i.push(e.spec.codeFramework)})),n.s2i=(0,k.default)(n.s2i),n.b2i=(0,k.default)(n.b2i),t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getBuilderTemplate=function(){var t=(0,d.default)(s.default.mark((function t(a){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request.get("apis/devops.kubesphere.io/v1alpha1".concat(e.getPath(a),"/s2ibuildertemplates"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(0,p.default)(e,"fetchDetail",u,(0,v.default)(e)),(0,p.default)(e,"rerun",o,(0,v.default)(e)),e}return(0,h.default)(r,[{key:"updateCreateData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){var a="".concat((0,_.default)(e,"spec.config.imageName","").replace(/[_/:]/g,"-"),"-").concat((0,_.default)(e,"spec.config.tag"));e.metadata.name="".concat(a.slice(0,60),"-").concat((0,w.generateId)(3))}var r=(0,_.default)(e,'metadata.annotations["kubesphere.io/repoUrl"]',"");r=r.replace(/^(http(s)?:\/\/)?(.*)$/,"$3");var n=(0,_.default)(e,"spec.config.imageName","");if(r&&!n.startsWith(r)){var l=r.endsWith("/")?"".concat(r).concat(n):"".concat(r,"/").concat(n);(0,O.default)(e,"spec.config.imageName",l)}!1===e.isUpdateWorkload?(0,O.default)(e,'metadata.annotations["devops.kubesphere.io/donotautoscale"]',"true"):(0,S.default)(e,'metadata.annotations["devops.kubesphere.io/donotautoscale"]'),delete e.isUpdateWorkload}},{key:"creatBinary",value:function(e,t,a){var r=P.default.b2iBuilders({name:e,namespace:t});return request.post("apis/devops.kubesphere.io/v1alpha1/".concat(this.getPath({namespace:t,cluster:a}),"/s2ibinaries/").concat(e),r)}},{key:"create",value:function(e,t){var a=this,r=t.cluster,n=t.namespace;return this.updateCreateData(e,!1),request.post(this.getListUrl({cluster:r,namespace:n}),e).then((function(){var t=(0,_.default)(e,"metadata.annotations.sourceUrl");a.createS2IRun({cluster:r,namespace:n,builderName:(0,_.default)(e,"metadata.name"),binaryUrl:t})}))}},{key:"updateBuilder",value:function(e,t){var a=this,r=t.cluster,n=t.namespace,l=t.name;return this.updateCreateData(e,!0),request.patch(this.getDetailUrl({cluster:r,namespace:n,name:l}),e).then((function(){var t=(0,_.default)(e,"metadata.annotations.sourceUrl");a.createS2IRun({cluster:r,namespace:n,builderName:(0,_.default)(e,"metadata.name"),binaryUrl:t})}))}},{key:"createS2IRun",value:function(e){var t=e.cluster,a=e.namespace,r=e.builderName,n=e.binaryUrl;if(r&&a){var l={apiVersion:"devops.kubesphere.io/v1alpha1",kind:"S2iRun",metadata:{name:"".concat(r.slice(0,37),"-").concat((0,w.generateId)(3)),cluster:t,namespace:a},spec:I({builderName:r,binaryUrl:n},n?{isBinaryURL:!0}:{})};return this.runStore.create(l,{cluster:t,namespace:a})}}},{key:"verifyRepoReadable",value:(t=(0,d.default)(s.default.mark((function e(t,a,r){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=a?{remoteUrl:t,secretRef:{name:a,namespace:r}}:{remoteUrl:t},e.next=5,request.post("kapis/resources.kubesphere.io/v1alpha2/git/verify",n,{},(function(e){var t=(0,_.default)(e,"message","");return t?Promise.resolve({message:t}):Promise.reject(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),function(e,a,r){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"apis/devops.kubesphere.io/v1alpha1"}}]),r}(R.default),l=(0,E.default)(n.prototype,"detail",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,E.default)(n.prototype,"fetchDetail",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,l,u;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.namespace,l=a.name,e.isLoading=!0,t.next=4,request.get("apis/devops.kubesphere.io/v1alpha1".concat(e.getPath({cluster:r,namespace:n}),"/s2ibuilders/").concat(l),void 0,void 0,(function(e){if("NotFound"===e.reason)return e;Promise.reject(e)}));case 4:return u=t.sent,e.detail=e.mapper(u),e.detail.cluster=r,e.isLoading=!1,t.abrupt("return",e.detail);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),o=(0,E.default)(n.prototype,"rerun",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,l,u,o,c;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.name,a.cluster,n=a.namespace,l=a.isUpdateWorkload,u=void 0===l||l,o=(0,i.default)(a,["name","cluster","namespace","isUpdateWorkload"]),c=u?{}:{"devops.kubesphere.io/donotautoscale":"true"},t.abrupt("return",e.runStore.create({apiVersion:"devops.kubesphere.io/v1alpha1",kind:"S2iRun",metadata:{annotations:c,name:"".concat(r,"-rerun-").concat((0,w.generateId)(3)),namespace:n},spec:I({builderName:r},o)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),n);t.default=x},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),u=n(r(50)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(32)),v=n(r(16)),y=n(r(820)),g=n(r(68)),b=r(25),E=n(r(802)),_=n(r(1773));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){var t=e.data,a=e.total,r=e.isEnd;return(0,g.default)(r)?!(0,h.default)(t)&&t.length<a:!r},k=function(e){(0,c.default)(r,e);var a=O(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).isElementAtBottom=function(e){return Math.abs(e.scrollTop+e.clientHeight-e.scrollHeight)<1},t.handleScroll=(0,y.default)((function(){var e=(0,v.default)(t.containerRef,"current",{});S(t.props)&&t.isElementAtBottom(e)&&t.finish&&(t.finish=!1,t.setState({loadMore:!0},(0,u.default)(l.default.mark((function e(){var a,r,n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props,r=a.page,n=a.onFetch,e.next=3,n({more:!0,page:r+1});case 3:t.finish=!0;case 4:case"end":return e.stop()}}),e)})))))}),300),t.state={loading:e.loading,loadMore:!1},t.containerRef=d.default.createRef(),t.finish=!0,t}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.props.noMount||this.props.onFetch()}},{key:"renderContent",value:function(){var e=this.props,a=e.empty,r=e.data,n=e.loading,l=e.children,u=this.state.loadMore;return n&&!u?null:(0,h.default)(r)||!l?a||d.default.createElement(E.default,{className:_.default.empty,desc:t("No Data")}):l}},{key:"render",value:function(){var e=this.props,t=e.wrapperClassName,a=e.className,r=e.width,n=e.minHeight,l=e.height,u=this.state,o=u.loading,i=u.loadMore,c={width:r,height:l};return d.default.createElement("div",{className:(0,m.default)(_.default.wrapper,t)},d.default.createElement(b.Loading,{spinning:o},d.default.createElement("div",{ref:this.containerRef,className:_.default.main,style:c,onScrollCapture:this.handleScroll},d.default.createElement("div",{className:(0,m.default)(_.default.content,a),style:{minHeight:n||l}},this.renderContent()),i&&d.default.createElement("div",{className:_.default.loadMore},d.default.createElement(b.Loading,null)))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.loadMore?{loading:!1,loadMore:S(e)}:e.loading!==t.loading?{loading:e.loading}:null}}]),r}(d.default.Component);a.default=k,k.propTypes={wrapperClassName:p.default.string,width:p.default.oneOfType([p.default.number,p.default.string]),height:p.default.oneOfType([p.default.number,p.default.string]),minHeight:p.default.oneOfType([p.default.number,p.default.string]),empty:p.default.oneOfType([p.default.string,p.default.element,p.default.node]),loading:p.default.bool.isRequired,data:p.default.array.isRequired,total:p.default.number.isRequired,page:p.default.number.isRequired,onFetch:p.default.func.isRequired},k.defaultProps={wrapperClassName:"",width:"100%",height:"100%",isEmpty:!1,loading:!0,data:[],total:10,page:1,noMount:!1,onFetch:function(){}}},,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p=r(a(21)),m=r(a(49)),h=r(a(56)),v=r(a(50)),y=r(a(91)),g=r(a(12)),b=r(a(13)),E=r(a(135)),_=r(a(19)),O=r(a(20)),S=r(a(18)),k=r(a(74)),C=(r(a(92)),a(5)),R=r(a(57)),w=a(292),P=a(813),D=a(787);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,S.default)(e);if(t){var n=(0,S.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,O.default)(this,a)}}var A=(n=function(e){(0,_.default)(r,e);var t,a=I(r);function r(){var e;(0,g.default)(this,r);for(var t=arguments.length,n=new Array(t),p=0;p<t;p++)n[p]=arguments[p];return(e=a.call.apply(a,[this].concat(n))).resourceName="files",(0,y.default)(e,"files",l,(0,E.default)(e)),(0,y.default)(e,"isLoading",u,(0,E.default)(e)),e.filters={},(0,y.default)(e,"checkFile",o,(0,E.default)(e)),(0,y.default)(e,"handleFileByBase64Str",i,(0,E.default)(e)),(0,y.default)(e,"validateImageSize",c,(0,E.default)(e)),(0,y.default)(e,"validatePackage",s,(0,E.default)(e)),(0,y.default)(e,"uploadPackage",f,(0,E.default)(e)),(0,y.default)(e,"downloadPackage",d,(0,E.default)(e)),e.reject=function(t){e.isLoading=!1,window.onunhandledrejection(t)},e}return(0,b.default)(r,[{key:"fetch",value:(t=(0,v.default)(m.default.mark((function e(){var t,a,r,n,l,u,o=arguments;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},a=t.app_id,r=t.version_id,n=(0,h.default)(t,["app_id","version_id"]),this.isLoading=!0,this.filters=Object.assign(this.filters,n),e.next=5,request.get(this.getUrl({app_id:a,version_id:r}),this.filters,null,this.reject);case 5:(l=e.sent)&&(u=l.files||{},Object.keys(u).forEach((function(e){u[e]=(0,w.safeAtob)(u[e])})),this.files=u,this.isLoading=!1);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(r(a(844)).default),l=(0,k.default)(n.prototype,"files",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,k.default)(n.prototype,"isLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,k.default)(n.prototype,"fetch",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"fetch"),n.prototype),o=(0,k.default)(n.prototype,"checkFile",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e,t){var a=D.UPLOAD_CHECK_RULES[t];return a.format.test(e.name.toLocaleLowerCase())?e.size>a.size?"FILE_MAX_".concat(t.toLocaleUpperCase()):"":"FILE_FORMAT_".concat(t.toLocaleUpperCase())}}}),i=(0,k.default)(n.prototype,"handleFileByBase64Str",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,v.default)(m.default.mark((function e(t,a){var r;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FileReader).readAsDataURL(t,"UTF-8"),r.addEventListener("load",(0,v.default)(m.default.mark((function e(){var t,n;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.result,n=t.substring(t.indexOf(",")+1,t.length),e.next=4,a(n);case 4:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}}),c=(0,k.default)(n.prototype,"validateImageSize",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,v.default)(m.default.mark((function e(t){var a;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Image).src=t,e.abrupt("return",new Promise((function(e){a.addEventListener("load",(0,v.default)(m.default.mark((function t(){var r;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,(a.width>96||a.height>96)&&(r=!1),e(r);case 3:case"end":return t.stop()}}),t)}))))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),s=(0,k.default)(n.prototype,"validatePackage",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,v.default)(m.default.mark((function t(a,r){var n,l,u;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSubmitting=!0,n={},r?(n.type="helm",n.package=a):(n.version_type="helm",n.version_package=a),l=r?"versions":"apps",t.next=6,request.post("".concat(e.getUrl({app_id:r,name:l}),"?validate=true"),n,{},e.reject);case 6:return u=t.sent,e.isSubmitting=!1,u&&u.name&&(u.base64Str=a),u&&u.error_details&&(u.missFile=(0,R.default)(u.error_details),u.error="MISS_FILE_NOTE"),t.abrupt("return",u);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),f=(0,k.default)(n.prototype,"uploadPackage",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,v.default)(m.default.mark((function e(t){var a,r,n,l=arguments;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:{},r=l.length>2?l[2]:void 0,n=N({},a),"CREATE_APP"===t?n.version_package=a.base64Str:n.package=a.base64Str,delete n.base64Str,e.next=7,r(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),d=(0,k.default)(n.prototype,"downloadPackage",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,v.default)(m.default.mark((function t(){var a,r,n,l,u,o,i=arguments;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:{},r=a.app_id,n=a.version_id,l=a.packageName,u=e.getUrl({app_id:r,version_id:n,name:"package"}),t.next=4,e.submitting(request.get(u));case 4:o=t.sent,(0,P.downloadFileFromBase64)(o.package,l);case 6:case"end":return t.stop()}}),t)})))}}),n);t.default=A},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNIT_CONFIG=t.PIE_COLORS=t.AREA_COLORS=t.METER_RESOURCE_USAGE=t.FEE_CONFIG=t.LEVEL_CONFIG=t.MERTER_TYPE=t.METER_RESOURCE_USAGE_TITLE=t.METER_RESOURCE_TITLE=t.RESOURCE_TITLE=t.RESOURCES_TYPE=t.RESOURCES_METER_TYPE=t.CARD_CONFIG=void 0;t.CARD_CONFIG=[{icon:"cluster",subTitle:"CLUSTER_CONSUMPTION",type:"cluster",desc:"CLUSTER_CONSUMPTION_DESC",infos:["CLUSTER_RESOURCE_CONSUMPTION_DESC","CLUSTER_NODE_CONSUMPTION_DESC","CLUSTER_POD_CONSUMPTION_DESC"]},{icon:"enterprise",subTitle:"WORKSPACE_CONSUMPTION",type:"workspaces",desc:"WORKSPACE_CONSUMPTION_DESC",infos:["WORKSPACE_RESOURCE_CONSUMPTION_DESC","WORKSPACE_PROJECT_CONSUMPTION_DESC","PROJECT_CONSUMPTION_DESC"]}];t.RESOURCES_METER_TYPE={deployments:"workload",statefulsets:"workload",daemonsets:"workload",nodes:"node",workspaces:"workspace",namespaces:"namespace",applications:"application",openpitrixs:"application",services:"service",pods:"pod",cluster:"cluster"};t.RESOURCES_TYPE=["namespaces","applications","services","deployments","statefulsets","daemonsets","openpitrixs","nodes","pods"];t.RESOURCE_TITLE={nodes:"Cluster Node",pods:"Pod",openpitrixs:"App Template",applications:"Composing App",deployments:"Deployment",statefulsets:"StatefulSet",daemonsets:"DaemonSet",workspaces:"Workspace",cluster:"Cluster",namespaces:"Project",services:"Service"};t.METER_RESOURCE_TITLE={cpu:"CPU",memory:"Memory",disk:"Volumes",net_received:"Net Received",net_transmitted:"Net Transmitted"};var r={cpu:"Meter CPU Usage",memory:"Meter Memory Usage",disk:"Meter Volume Usage",net_received:"Meter Net Received Usage",net_transmitted:"Meter Net Transmitted Usage"};t.METER_RESOURCE_USAGE_TITLE=r;var n=Object.keys(r);t.MERTER_TYPE=n;t.LEVEL_CONFIG={openpitrix:[{type:"openpitrix",children:["service"]}],workspaces:[{type:"workspaces",children:["namespaces"]},{type:"namespaces",children:["applications","deployments","statefulsets","openpitrixs","daemonsets"],parent:["workspaces"]},{type:"applications",children:["deployments","statefulsets","daemonsets"],parent:["namespaces"]},{type:"openpitrixs",children:["deployments","statefulsets","daemonsets"],parent:["namespaces"]},{type:"services",children:["pods"],parent:["applications","namespaces","openpitrixs","daemonsets"]},{type:["deployments","statefulsets","daemonsets"],children:["pods"],parent:["applications","namespaces","openpitrixs"]},{type:"pods",parent:["deployments","statefulsets","namespaces","services","daemonsets"]}],cluster:[{type:"cluster",children:["nodes"]},{type:"nodes",children:["pods"],parent:["cluster"]},{type:"pods",parent:["nodes"]}]};t.FEE_CONFIG={cpu_per_core_per_hour:"cpu",egress_network_traffic_per_megabytes_per_hour:"net_transmitted",ingress_network_traffic_per_megabytes_per_hour:"net_received",mem_per_gigabytes_per_hour:"memory",pvc_per_gigabytes_per_hour:"disk",currency:"currency"};t.METER_RESOURCE_USAGE={cpu:"cpu_usage",memory:"memory_usage_wo_cache",net_received:"net_bytes_received",net_transmitted:"net_bytes_transmitted",disk:"pvc_bytes_total"};t.AREA_COLORS=["green","blue","yellow","red","darkestGreen","darkestBlue","darkestYellow","darkestRed","lightestGreen","lightestBlue","lightestYellow","lightestRed"];t.PIE_COLORS=["#3b747a","#479e88","#55bc8a","#a2d8bb","#326e93","#3385b0","#329dce","#7eb8dc","#c7deef","#8c3231","#ab2f29","#ca2621","#ea8573","#fae7e5","#8d663e","#e0992c","#f5a623","#ffc781","#ffe1be"];t.UNIT_CONFIG={cpu:{label:"Core",value:"core"},memory:{label:"Gi",value:"Gi"},number:{label:"M",value:"Mi"},disk:{label:"GB",value:"Gi"},net_received:{label:"M",value:"Mi"},net_transmitted:{label:"M",value:"Mi"}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(651)),v=r(5),y=n(r(16)),g=n(r(32)),b=r(25),E=r(37),_=n(r(2541)),O=n(r(2543)),S=n(r(1132)),k=n(r(2546)),C=n(r(2548));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var P={ascend:!1,descend:!0},D=function(e){(0,c.default)(r,e);var a=w(r);function r(e){var n;(0,o.default)(this,r),(n=a.call(this,e)).handleChange=function(e,t){n.props.onFetch(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({sortBy:t.field||"",ascending:!P[t.order]},e))},n.handlePagination=function(e){var t=e.page,a=e.limit;(0,n.props.onFetch)({page:t,limit:a})},n.handleRefresh=function(){var e=n.props.pagination;n.props.onFetch({limit:e.limit,page:e.page})},n.handleColumnsHide=function(e){n.setState({hideColumns:e},(function(){if(n.props.tableId){var e=(0,E.safeParseJSON)(localStorage.getItem("hide-columns"),{});e[n.props.tableId]=n.state.hideColumns,localStorage.setItem("hide-columns",JSON.stringify(e))}}))},n.handleCancelSelect=function(){n.props.onSelectRowKeys([])},n.handleFilterInput=function(e){(0,h.default)(e,n.props.filters)||n.props.onFetch(e,!0)},n.handleSearch=function(e){var t=n.props.searchType;n.props.onFetch((0,u.default)({},t,e),!0)},n.clearFilter=function(){n.props.searchType&&n.handleSearch(),n.handleFilterInput([])},n.renderSelectedTitle=function(){return d.default.createElement(b.Level,null,d.default.createElement(b.LevelLeft,null,n.renderSelectActions()),d.default.createElement(b.LevelRight,null,d.default.createElement(b.Button,{type:"flat",className:C.default.cancelSelect,onClick:n.handleCancelSelect,"data-test":"table-cancel-select"},t("DESELECT"))))},n.renderTableTitle=function(){return n.props.selectedRowKeys&&n.props.selectedRowKeys.length>0?n.renderSelectedTitle():n.renderNormalTitle()},n.renderTableFooter=function(){if(!n.props.pagination)return null;var e=n.props.pagination,t=e.total,a=e.page,r=e.limit;return d.default.createElement(k.default,{page:a,total:t,limit:r,onChange:n.handlePagination})};var l=(0,y.default)((0,E.safeParseJSON)(localStorage.getItem("hide-columns"),{}),e.tableId,[]);return n.state={hideColumns:l},n}return(0,i.default)(r,[{key:"shouldComponentUpdate",value:function(e,t){return!!this.props.alwaysUpdate||(e.data!==this.props.data||e.columns.length!==this.props.columns.length||e.selectedRowKeys.length!==this.props.selectedRowKeys.length||!(0,h.default)(e.filters,this.props.filters)||e.isLoading!==this.props.isLoading||!(0,h.default)(e.pagination,this.props.pagination)||t.hideColumns.length!==this.state.hideColumns.length)}},{key:"renderSelectActions",value:function(){var e=this.props,a=e.onDelete,r=e.selectActions;return r?d.default.createElement("div",null,r.map((function(e){return d.default.createElement(b.Button,{key:e.key,type:e.type,disabled:e.disabled,className:C.default.button,onClick:e.onClick,"data-test":"table-".concat(e.key)},e.text)}))):d.default.createElement("div",null,a&&d.default.createElement(b.Button,{type:"danger",className:C.default.button,onClick:a,"data-test":"table-delete"},t("DELETE")))}},{key:"renderSearch",value:function(){var e=this.props,a=e.hideSearch,r=e.searchType,n=e.filters,l=e.columns;if(a)return null;if(r){var u=this.props.placeholder||t("SEARCH_BY_NAME");return d.default.createElement(b.InputSearch,{className:C.default.search,value:n[r],onSearch:this.handleSearch,placeholder:u})}return d.default.createElement(O.default,{className:C.default.search,columns:l,filters:n,onChange:this.handleFilterInput})}},{key:"renderActions",value:function(){var e=this.props,a=e.onCreate,r=e.createText,n=e.actions;return n?n.map((function(e){return d.default.createElement(b.Button,{key:e.key,type:e.type,className:C.default.create,onClick:e.onClick,"data-test":"table-".concat(e.key)},e.text)})):a?d.default.createElement(b.Button,{type:"control",className:C.default.create,onClick:a,"data-test":"table-create"},t(r||"CREATE")):null}},{key:"renderNormalTitle",value:function(){var e=this.props,a=e.hideCustom,r=e.customFilter,n=e.columns,l=this.state.hideColumns;return d.default.createElement(b.Level,null,r&&d.default.createElement(b.LevelLeft,null,r),d.default.createElement(b.LevelItem,null,this.renderSearch()),d.default.createElement(b.LevelRight,null,d.default.createElement("div",null,d.default.createElement(b.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh,"data-test":"table-refresh"}),!a&&d.default.createElement(_.default,{className:C.default.columnMenu,title:t("CUSTOM_COLUMNS"),columns:n,value:l,onChange:this.handleColumnsHide}),this.renderActions())))}},{key:"renderEmptyText",value:function(){return this.props.emptyText||d.default.createElement("div",{className:C.default.emptyText},d.default.createElement("span",{className:C.default.emptyTipIcon},d.default.createElement(b.Icon,{name:"exclamation",size:48})),d.default.createElement("div",null,t("NO_MATCHING_RESULT_FOUND")),d.default.createElement("p",null,t("You can try to"),d.default.createElement("span",{className:C.default.action,onClick:this.handleRefresh,"data-test":"table-empty-refresh"},t("refresh data")),t("or"),d.default.createElement("span",{className:C.default.action,onClick:this.clearFilter,"data-test":"table-empty-clear-filter"},t("clear search conditions"))))}},{key:"renderEmpty",value:function(){var e=this.props,t=e.module,a=e.name,r=e.emptyProps,n=void 0===r?{}:r;return d.default.createElement(S.default,(0,l.default)({action:this.renderActions(),name:a,module:t},n))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.data,r=e.isLoading,n=e.silentLoading,u=e.rowKey,o=e.selectedRowKeys,i=e.onSelectRowKeys,c=e.hideHeader,s=e.hideFooter,f=e.extraProps,p=e.getCheckboxProps;if(this.showEmpty)return this.renderEmpty();var h={};return c||(h.title=this.renderTableTitle()),s||(h.footer=this.renderTableFooter()),i&&(h.rowSelection={selectedRowKeys:o,getCheckboxProps:p,onSelect:function(e,t,a){i(a)},onSelectAll:function(e,t){i(t)}}),d.default.createElement(b.Table,(0,l.default)({className:(0,m.default)(C.default.table,"ks-table",t),rowKey:u,columns:this.filteredColumns,dataSource:(0,v.toJS)(a),loading:!n&&r,onChange:this.handleChange,emptyText:this.renderEmptyText()},h,f))}},{key:"showEmpty",get:function(){var e=this.props,t=e.filters,a=e.pagination,r=e.isLoading;return"showEmpty"in this.props?this.props.showEmpty:!r&&(0,g.default)(t)&&0===a.total}},{key:"filteredColumns",get:function(){var e=this.state.hideColumns;return this.props.columns.filter((function(t){return!e.includes(t.key||t.dataIndex)}))}}]),r}(d.default.Component);a.default=D,D.propTypes={data:p.default.oneOfType([p.default.array,p.default.object]).isRequired,columns:p.default.array.isRequired,selectedRowKeys:p.default.array,isLoading:p.default.bool,pagination:p.default.object,filters:p.default.object,rowKey:p.default.any,onFetch:p.default.func,onSelectRowKeys:p.default.func,getCheckboxProps:p.default.func,onDelete:p.default.func,onCreate:p.default.func,hideHeader:p.default.bool,hideFooter:p.default.bool,hideSearch:p.default.bool,hideCustom:p.default.bool,actions:p.default.array,selectActions:p.default.array,extraProps:p.default.object,alwaysUpdate:p.default.bool,emptyText:p.default.any},D.defaultProps={rowKey:"name",selectedRowKeys:[],onFetch:function(){},hideHeader:!1,hideFooter:!1,hideSearch:!1,hideCustom:!1,extraProps:{},pagination:{},filters:{}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.BANDWIDTH_RULE_CONFIG=t.THROUGHPUT_RULE_CONFIG=t.DISK_RULE_CONFIG=t.MEMORY_RULE_CONFIG=t.CPU_RULE_CONFIG=t.PERCENT_RULE_CONFIG=t.BASE_RULE_CONFIG=t.getBaseRuleConfig=t.SEVERITY_LEVEL=void 0;var n=r(a(21));function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var o=[{label:">",value:">"},{label:">=",value:">="},{label:"<",value:"<"},{label:"<=",value:"<="}];t.SEVERITY_LEVEL=[{type:"critical",prefixIcon:"information",color:{primary:"#fae7e5",secondary:"#ca2621"},label:"CRITICAL_ALERT",value:"critical"},{type:"error",prefixIcon:"information",color:{primary:"#fae7e5",secondary:"#f5a623"},label:"ERROR_ALERT",value:"error"},{type:"warning",prefixIcon:"information",color:{primary:"#fae7e5",secondary:"#79879c"},label:"WARNING_ALERT",value:"warning"}];var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.condition,a=void 0===t?{}:t,r=e.thresholds,n=void 0===r?{}:r;return[u({name:"condition_type",options:o},a),u({type:"number",name:"thresholds",placeholder:"THRESHOLD"},n)]};t.getBaseRuleConfig=i;var c=i({thresholds:{min:0}});t.BASE_RULE_CONFIG=c;var s=i({thresholds:{min:0,max:100,unit:"%",converter:function(e){return e/100}}});t.PERCENT_RULE_CONFIG=s;var f=i({thresholds:{unit:"core",min:0}});t.CPU_RULE_CONFIG=f;var d=i({thresholds:{unit:"Mi",min:0,converter:function(e){return e*Math.pow(1024,2)}}});t.MEMORY_RULE_CONFIG=d;var p=i({thresholds:{unit:"GB",min:0,converter:function(e){return e*Math.pow(1e3,3)}}});t.DISK_RULE_CONFIG=p;var m=i({thresholds:{unit:"KB/s",min:0,converter:function(e){return 1e3*e}}});t.THROUGHPUT_RULE_CONFIG=m;var h=i({thresholds:{unit:"Mbps",min:0,converter:function(e){return e*(Math.pow(1024,2)/8)}}});t.BANDWIDTH_RULE_CONFIG=h},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s=r(a(49)),f=r(a(109)),d=r(a(56)),p=r(a(50)),m=r(a(21)),h=r(a(91)),v=r(a(12)),y=r(a(13)),g=r(a(135)),b=r(a(19)),E=r(a(20)),_=r(a(18)),O=r(a(74)),S=(r(a(92)),a(5)),k=a(296),C=r(a(16)),R=r(a(190)),w=a(58);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,m.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,E.default)(this,a)}}var N=(n=function(e){(0,b.default)(S,e);var t,a,r,n,m,E,_,O=T(S);function S(){var e;(0,v.default)(this,S);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=O.call.apply(O,[this].concat(a)),(0,h.default)(e,"nodesMetrics",l,(0,g.default)(e)),(0,h.default)(e,"nodeMetrics",u,(0,g.default)(e)),(0,h.default)(e,"masterNum",o,(0,g.default)(e)),(0,h.default)(e,"masterCount",i,(0,g.default)(e)),(0,h.default)(e,"masterWorkerCount",c,(0,g.default)(e)),e.module="nodes",e.withTypeSelectParams=function(e,t){var a=D({},e);return"node"===t?a.labelSelector=a.labelSelector?",!node-role.kubernetes.io/edge":"!node-role.kubernetes.io/edge":"edgenode"===t&&(a.labelSelector=a.labelSelector?",node-role.kubernetes.io/edge=":"node-role.kubernetes.io/edge="),a.role&&(a.labelSelector+=",node-role.kubernetes.io/".concat(e.role,"="),delete a.role),a},e}return(0,y.default)(S,[{key:"fetchList",value:(_=(0,p.default)(s.default.mark((function e(){var t,a,r,n,l,u,o,i,c,p,m,h=this,v=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},a=t.cluster,r=t.workspace,n=t.namespace,l=t.more,u=t.devops,o=t.type,i=void 0===o?"node":o,c=(0,d.default)(t,["cluster","workspace","namespace","more","devops","type"]),this.list.isLoading=!0,c.sortBy||void 0!==c.ascending||(c.sortBy=w.LIST_DEFAULT_ORDER[this.module]||"createTime"),c.limit!==1/0&&-1!==c.limit||(c.limit=-1,c.page=1),c.limit=c.limit||10,e.next=7,request.get(this.getResourceUrl({cluster:a,workspace:r,devops:u}),this.withTypeSelectParams(c,i));case 7:return p=e.sent,m=((0,C.default)(p,"items")||[]).map((function(e){return D({cluster:a,namespace:n},h.mapper(e))})),this.list.update(D(D({data:l?[].concat((0,f.default)(this.list.data),(0,f.default)(m)):m,total:p.totalItems||p.total_count||m.length||0},(0,R.default)(c,"labelSelector")),{},{limit:Number(c.limit)||10,page:Number(c.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",m);case 11:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"fetchDetail",value:(E=(0,p.default)(s.default.mark((function e(t){var a,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get("".concat(this.getResourceUrl(t),"/").concat(t.name));case 3:return a=e.sent,r=D(D(D({},t),this.mapper(a)),{},{kind:"Node"}),this.detail=r,this.isLoading=!1,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"fetchCount",value:(m=(0,p.default)(s.default.mark((function e(t){var a,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get(this.getResourceUrl(t),{labelSelector:"node-role.kubernetes.io/master"});case 2:a=e.sent,r=a.items.filter((function(e){return(0,k.getNodeRoles)(e.metadata.labels).includes("worker")})).length,this.masterNum=a.items.filter((function(e){var t=(0,k.getNodeRoles)(e.metadata.labels);return t.includes("master")||t.includes("control-plane")})).length,this.masterCount=a.totalItems,this.masterWorkerCount=r;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"batchPatchTaints",value:(n=(0,p.default)(s.default.mark((function e(t){var a=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.submitting(Promise.all(t.map((function(e){var t=e.taints;return request.patch(a.getDetailUrl(e),{spec:{taints:t}})}))));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"cordon",value:(r=(0,p.default)(s.default.mark((function e(t){var a,r,n,l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.name,n={spec:{unschedulable:!0}},e.next=4,request.patch(this.getDetailUrl({cluster:a,name:r}),n);case 4:l=e.sent,this.detail=this.mapper(l),this.originDetail=l;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"uncordon",value:(a=(0,p.default)(s.default.mark((function e(t){var a,r,n,l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.name,n={spec:{unschedulable:null}},e.next=4,request.patch(this.getDetailUrl({cluster:a,name:r}),n);case 4:l=e.sent,this.detail=this.mapper(l),this.originDetail=l;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"deleteSelected",value:(t=(0,p.default)(s.default.mark((function e(t){var a=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){var t=a.list.data[e];return"master"===t.role?null:request.delete(a.getDetailUrl(t),{orphanDependents:!1})})));case 2:this.list.selectedRowKeys=[];case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),S}(r(a(277)).default),l=(0,O.default)(n.prototype,"nodesMetrics",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,O.default)(n.prototype,"nodeMetrics",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,O.default)(n.prototype,"masterNum",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i=(0,O.default)(n.prototype,"masterCount",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=(0,O.default)(n.prototype,"masterWorkerCount",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,O.default)(n.prototype,"fetchList",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,O.default)(n.prototype,"fetchDetail",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),(0,O.default)(n.prototype,"fetchCount",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchCount"),n.prototype),(0,O.default)(n.prototype,"batchPatchTaints",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"batchPatchTaints"),n.prototype),(0,O.default)(n.prototype,"cordon",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"cordon"),n.prototype),(0,O.default)(n.prototype,"uncordon",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"uncordon"),n.prototype),(0,O.default)(n.prototype,"deleteSelected",[S.action],Object.getOwnPropertyDescriptor(n.prototype,"deleteSelected"),n.prototype),n);t.default=N},,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p,m,h,v=r(a(49)),y=r(a(109)),g=r(a(21)),b=r(a(56)),E=r(a(50)),_=r(a(91)),O=r(a(12)),S=r(a(13)),k=r(a(74)),C=(r(a(92)),a(5)),R=r(a(16)),w=r(a(32)),P=r(a(190)),D=a(787),T=a(37);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=(n=function(){function e(){var t=this;(0,O.default)(this,e),this.sortKey="create_time",this.defaultStatus=[],this.defaultRepo="",(0,_.default)(this,"list",l,this),(0,_.default)(this,"detail",u,this),(0,_.default)(this,"isLoading",o,this),(0,_.default)(this,"isSubmitting",i,this),this.getUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.workspace,r=e.app_id,n=e.version_id,l=e.name,u=t.baseUrl;if(a&&(u+="/workspaces/".concat(a)),n){var o="versions"===t.resourceName?"":t.resourceName;return"".concat(u,"/apps/").concat(r,"/versions/").concat(n,"/").concat(l||o)}if(r){var i="apps"===t.resourceName?"":t.resourceName;return"".concat(u,"/apps/").concat(r,"/").concat(l||i)}return"".concat(u,"/").concat(l||t.resourceName)},(0,_.default)(this,"submitting",c,this),this.getConditions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.status,r=e.app_id,n=e.version_id,l=e.repo_id,u={status:a||t.defaultStatus};return"applications"===t.resourceName&&(u.app_id=r,u.version_id=n),(l||t.defaultRepo)&&(u.repo_id=l||t.defaultRepo),u},(0,_.default)(this,"fetchList",s,this),(0,_.default)(this,"fetchDetail",f,this),(0,_.default)(this,"create",d,this),(0,_.default)(this,"update",p,this),(0,_.default)(this,"delete",m,this),(0,_.default)(this,"setSelectRowKeys",h,this),this.reject=function(e){t.isSubmitting=!1,t.isLoading=!1,window.onunhandledrejection(e)}}return(0,S.default)(e,[{key:"getPath",value:function(e){var t=e.workspace,a=e.cluster,r=e.namespace,n="";return t&&(n+="/workspaces/".concat(t)),globals.app.isMultiCluster&&a&&(n+="/clusters/".concat(a)),r&&(n+="/namespaces/".concat(r)),n}},{key:"clearSearch",value:function(){this.list.keyword=""}},{key:"baseUrl",get:function(){return"kapis/openpitrix.io/v1"}}]),e}(),l=(0,k.default)(n.prototype,"list",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:0,limit:10,total:0,reverse:!1,filters:{},isLoading:!0,keyword:"",selectedRowKeys:[],setSelectRowKeys:this.setSelectRowKeys}}}),u=(0,k.default)(n.prototype,"detail",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,k.default)(n.prototype,"isLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i=(0,k.default)(n.prototype,"isSubmitting",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,k.default)(n.prototype,"submitting",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return e.isSubmitting=!0,setTimeout((function(){t.catch((function(){})).finally((function(){e.isSubmitting=!1}))}),a),t}}}),s=(0,k.default)(n.prototype,"fetchList",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,E.default)(v.default.mark((function t(){var a,r,n,l,u,o,i,c,s,f,d,p,m,h,g,E,_,O,S,k=arguments;return v.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=k.length>0&&void 0!==k[0]?k[0]:{},r=a.limit,n=a.page,l=a.noLimit,u=a.status,o=a.app_id,i=a.version_id,c=a.repo_id,s=a.statistics,f=a.order,d=a.reverse,p=a.more,m=a.workspace,h=(0,b.default)(a,["limit","page","noLimit","status","app_id","version_id","repo_id","statistics","order","reverse","more","workspace"]),e.list.isLoading=!0,g=e.getConditions({status:u,app_id:o,version_id:i,repo_id:c}),E={orderBy:f||e.sortKey,paging:"limit=".concat(l?D.MAX_LIMIT:r||10,",page=").concat(n||1),conditions:(0,T.getFilterString)(g)},void 0===d&&(d=!0),(0,w.default)(h)||(_=(0,T.getFilterString)(h),E.conditions+=_?",".concat(_):""),d&&(E.reverse=!0),s&&(E.statistics=!0),t.next=10,request.get(e.getUrl({workspace:m,app_id:o,version_id:i}),E,{},e.reject);case 10:O=t.sent,S=(0,R.default)(O,"items",[]).map((function(e){return I(I({},e),{},{workspace:m})})),Object.assign(e.list,{data:p?[].concat((0,y.default)(e.list.data),(0,y.default)(S)):S,total:(0,R.default)(O,"total_count",0),isLoading:!1,limit:Number(r)||10,page:Number(n)||1,order:f,reverse:d,filters:(0,P.default)(h,["isv","workspace","category_id"]),selectedRowKeys:[]});case 13:case"end":return t.stop()}}),t)})))}}),f=(0,k.default)(n.prototype,"fetchDetail",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,E.default)(v.default.mark((function t(){var a,r,n,l,u,o,i,c=arguments;return v.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:{},r=a.app_id,n=a.appId,l=a.version_id,u=a.workspace,o=(0,b.default)(a,["app_id","appId","version_id","workspace"]),e.isLoading=!0,t.next=4,request.get(e.getUrl({app_id:r||n,version_id:l,workspace:u}),o,{},e.reject);case 4:i=t.sent,e.detail=i||{},e.detail.workspace=u,e.isLoading=!1;case 8:case"end":return t.stop()}}),t)})))}}),d=(0,k.default)(n.prototype,"create",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,E.default)(v.default.mark((function t(){var a,r,n,l,u,o=arguments;return v.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:{},r=a.app_id,n=a.version_id,l=a.workspace,u=(0,b.default)(a,["app_id","version_id","workspace"]),t.next=3,e.submitting(request.post(e.getUrl({app_id:r,workspace:l,version_id:n}),u));case 3:case"end":return t.stop()}}),t)})))}}),p=(0,k.default)(n.prototype,"update",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,E.default)(v.default.mark((function t(){var a,r,n,l,u,o=arguments;return v.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:{},r=a.app_id,n=a.version_id,l=a.workspace,u=(0,b.default)(a,["app_id","version_id","workspace"]),t.next=3,e.submitting(request.patch(e.getUrl({app_id:r,workspace:l,version_id:n}),u));case 3:case"end":return t.stop()}}),t)})))}}),m=(0,k.default)(n.prototype,"delete",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,E.default)(v.default.mark((function t(a){return v.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete a.name,t.next=3,e.submitting(request.delete(e.getUrl(a)));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),(0,k.default)(n.prototype,"clearSearch",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"clearSearch"),n.prototype),h=(0,k.default)(n.prototype,"setSelectRowKeys",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.list.selectedRowKeys=t}}}),n);t.default=A},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(56)),i=r(a(49)),c=r(a(50)),s=r(a(91)),f=r(a(12)),d=r(a(13)),p=r(a(135)),m=r(a(19)),h=r(a(20)),v=r(a(18)),y=r(a(74)),g=(r(a(92)),a(5)),b=r(a(16)),E=a(37);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var O=(n=function(e){(0,m.default)(n,e);var t,a,r=_(n);function n(){var e;(0,f.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,s.default)(e,"statistics",l,(0,p.default)(e)),(0,s.default)(e,"resourceMetrics",u,(0,p.default)(e)),e.fetchClusterDevopsCount=(0,c.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("kapis/tenant.kubesphere.io/v1alpha2/devopscount/");case 2:return t=e.sent,e.abrupt("return",(0,b.default)(t,"count",0));case 4:case"end":return e.stop()}}),e)}))),e}return(0,d.default)(n,[{key:"fetchStatistics",value:(a=(0,c.default)(i.default.mark((function e(){var t,a,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.statistics.isLoading=!0,t={type:"statistics"},e.next=4,(0,E.to)(request.get(this.getApi(),t));case 4:return a=e.sent,r=this.getResult(a),this.statistics={data:r,isLoading:!1},e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchApplicationResourceMetrics",value:(t=(0,c.default)(i.default.mark((function e(t){var a,r,n,l,u,c,s,f,d,p,m;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.workspace,r=t.namespace,n=t.autoRefresh,l=void 0!==n&&n,u=(0,o.default)(t,["workspace","namespace","autoRefresh"]),l?(u.last=!0,this.resourceMetrics.isRefreshing=!0):this.resourceMetrics.isLoading=!0,u.cluster&&(this.cluster=u.cluster),c=this.getParams(u),s=/^[a-zA-Z]+_/g,f=(0,b.default)(u.metrics,"[0]","").replace(s,"cluster_"),d="cluster",a&&(d="workspaces/".concat(a),c.metrics_filter="".concat(f.replace(s,"workspace_"),"$")),r&&"all"!==r&&(d="namespaces/".concat(r),c.metrics_filter="".concat(f.replace(s,"namespace_"),"$")),e.next=11,(0,E.to)(request.get("".concat(this.apiVersion,"/").concat(d),c));case 11:return p=e.sent,m=this.getResult(p),l&&(m=this.getRefreshResult(m,this.resourceMetrics.originData)),this.resourceMetrics={originData:m,data:(0,b.default)(Object.values(m),"[0].data.result")||[],isLoading:!1,isRefreshing:!1},e.abrupt("return",m);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}(r(a(768)).default),l=(0,y.default)(n.prototype,"statistics",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!1}}}),u=(0,y.default)(n.prototype,"resourceMetrics",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{originData:{},data:[],isLoading:!1}}}),(0,y.default)(n.prototype,"fetchStatistics",[g.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchStatistics"),n.prototype),(0,y.default)(n.prototype,"fetchApplicationResourceMetrics",[g.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchApplicationResourceMetrics"),n.prototype),n);t.default=O},,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(49)),u=r(a(21)),o=r(a(50)),i=r(a(12)),c=r(a(13)),s=r(a(19)),f=r(a(20)),d=r(a(18)),p=r(a(74)),m=r(a(277)),h=a(5),v=r(a(16));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(n=function(e){(0,s.default)(r,e);var t,a=b(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).module="resourcequotas",e}return(0,c.default)(r,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.workspace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/workspaces/".concat(a)),r}},{key:"fetchDetail",value:(t=(0,o.default)(l.default.mark((function e(t){var a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getDetailUrl(t),{},{},(function(){}));case 3:return a=e.sent,r=g(g({},t),this.mapper(a)),this.detail=r,this.isLoading=!1,e.abrupt("return",(0,v.default)(a,"status.total"));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"kapis/tenant.kubesphere.io/v1alpha2"}}]),r}(m.default),(0,p.default)(n.prototype,"fetchDetail",[h.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),n);t.default=E},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(49)),l=r(a(50)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var d=function(e){(0,i.default)(r,e);var t,a=f(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).module="volumesnapshots",e}return(0,o.default)(r,[{key:"createSnapshot",value:(t=(0,l.default)(n.default.mark((function e(t){var a,r,l,u,o,i,c;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.type,l=t.sourceName,u=t.cluster,o=t.namespace,i=this.getListUrl({cluster:u,namespace:o}),c={apiVersion:"snapshot.storage.k8s.io/v1beta1",kind:this.resourceKind,metadata:{name:a},spec:{volumeSnapshotClassName:r,source:{kind:this.resourceKind,persistentVolumeClaimName:l}}},e.next=5,this.submitting(request.post(i,c));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"resourceKind",get:function(){return"VolumeSnapshot"}},{key:"apiVersion",get:function(){return"apis/snapshot.storage.k8s.io/v1beta1"}}]),r}(r(a(277)).default);t.default=d},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(19)),u=r(a(20)),o=r(a(18));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var c=function(e){(0,l.default)(a,e);var t=i(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).module="ingresses",e}return a}(r(a(277)).default);t.default=c},,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p=r(a(56)),m=r(a(49)),h=r(a(50)),v=r(a(91)),y=r(a(12)),g=r(a(13)),b=r(a(135)),E=r(a(19)),_=r(a(20)),O=r(a(18)),S=r(a(74)),k=(r(a(92)),a(5)),C=r(a(16)),R=a(787);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,O.default)(e);if(t){var n=(0,O.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,_.default)(this,a)}}var P=(n=function(e){(0,E.default)(r,e);var t,a=w(r);function r(){var e;(0,y.default)(this,r);for(var t=arguments.length,n=new Array(t),p=0;p<t;p++)n[p]=arguments[p];return(e=a.call.apply(a,[this].concat(n))).defaultStatus=R.DEFAULT_QUERY_STATUS,e.resourceName="apps",(0,v.default)(e,"showAddVersion",l,(0,b.default)(e)),(0,v.default)(e,"allApps",u,(0,b.default)(e)),e.uploadScreenshotsList=[],(0,v.default)(e,"upload",o,(0,b.default)(e)),(0,v.default)(e,"uploadBySequence",i,(0,b.default)(e)),(0,v.default)(e,"uploadIcon",c,(0,b.default)(e)),(0,v.default)(e,"uploadScreenshot",s,(0,b.default)(e)),(0,v.default)(e,"deleteScreenshot",f,(0,b.default)(e)),(0,v.default)(e,"handle",d,(0,b.default)(e)),e}return(0,g.default)(r,[{key:"deploy",value:(t=(0,h.default)(m.default.mark((function e(t,a){var r,n,l;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.workspace,n=a.namespace,l=a.cluster,!n){e.next=4;break}return e.next=4,this.submitting(request.post("".concat(this.baseUrl).concat(this.getPath({workspace:r,namespace:n,cluster:l}),"/applications"),t));case 4:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})}]),r}(r(a(844)).default),l=(0,S.default)(n.prototype,"showAddVersion",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=(0,S.default)(n.prototype,"allApps",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,S.default)(n.prototype,"upload",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,h.default)(m.default.mark((function t(){var a,r,n,l,u=arguments;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>0&&void 0!==u[0]?u[0]:{},r=a.app_id,n=a.workspace,l=(0,p.default)(a,["app_id","workspace"]),t.next=3,request.patch(e.getUrl({app_id:r,workspace:n}),l);case 3:case"end":return t.stop()}}),t)})))}}),i=(0,S.default)(n.prototype,"uploadBySequence",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,h.default)(m.default.mark((function t(a,r,n,l){var u,o,i;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.upload({app_id:e.detail.app_id,workspace:e.detail.workspace,type:"screenshot",attachment_content:n,sequence:a+r});case 2:if(u=l?"".concat(l,",").concat(n):n,o=r+1,!(i=e.uploadScreenshotsList[o])){t.next=9;break}return t.next=8,e.uploadBySequence(a,o,i,u);case 8:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",u);case 10:case"end":return t.stop()}}),t)})));return function(e,a,r,n){return t.apply(this,arguments)}}()}}),(0,S.default)(n.prototype,"deploy",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"deploy"),n.prototype),c=(0,S.default)(n.prototype,"uploadIcon",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.upload({app_id:e.detail.app_id,workspace:e.detail.workspace,type:"icon",attachment_content:t})}}}),s=(0,S.default)(n.prototype,"uploadScreenshot",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,h.default)(m.default.mark((function t(a,r,n){var l,u,o;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=r.length,u="",!(n+l>=R.SCREENSHOTS_LIMIT)){t.next=5;break}return t.abrupt("return",!1);case 5:if(0!==n){t.next=12;break}return e.uploadScreenshotsList=[a],o=l<1?"":r.join(","),t.next=10,e.uploadBySequence(l,n,a,o);case 10:return u=t.sent,t.abrupt("return",u);case 12:e.uploadScreenshotsList.push(a);case 13:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()}}),f=(0,S.default)(n.prototype,"deleteScreenshot",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,h.default)(m.default.mark((function t(a,r){var n,l,u;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,C.default)(r,"screenshots",""),l=n?n.split(","):[],!(a>=0)){t.next=9;break}return l.splice(a,1),n=l.join(","),t.next=7,e.upload({app_id:e.detail.app_id,workspace:e.detail.workspace,type:"screenshot",attachment_content:"",sequence:a});case 7:t.next=17;break;case 9:u=l.length-1;case 10:if(!(u>=0)){t.next=16;break}return t.next=13,e.upload({app_id:e.detail.app_id,workspace:e.detail.workspace,type:"screenshot",attachment_content:"",sequence:u});case 13:u--,t.next=10;break;case 16:n="";case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),d=(0,S.default)(n.prototype,"handle",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,h.default)(m.default.mark((function t(){var a,r,n,l,u,o=arguments;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:{},r=a.app_id,n=a.workspace,l=(0,p.default)(a,["app_id","workspace"]),u=e.getUrl({app_id:r,workspace:n,name:"action"}),t.next=4,e.submitting(request.post(u,l));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))}}),n);t.default=P},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getDateStr=a.getTimeOptions=a.getTimeLabel=a.getLastTimeStr=a.getTimeStr=a.getTimes=a.getStep=a.getMinutes=void 0;var n=r(37),l=function(e){var t=e.slice(-1),a=parseFloat(e);switch(t){default:case"s":return a/60;case"m":return a;case"h":return 60*a;case"d":return 24*a*60}};a.getMinutes=l;a.getStep=function(e,t){return"".concat(parseInt(l(e)/t,10),"m")};a.getTimes=function(e,t){return Math.floor(l(e)/l(t))};var u=function(e){var t=Math.round(parseFloat(e)/60);return t<60?"".concat(t,"m"):(t=Math.round(t/60))<24?"".concat(t,"h"):"".concat(Math.round(t/24),"d")};a.getTimeStr=u;a.getLastTimeStr=function(e,t){var a=e.slice(-1),r="".concat(parseFloat(e)*t).concat(a),n=60*l(r);return u(n)};var o=function(e){var a=e.slice(-1).toUpperCase();return t("TIME_".concat(a),{num:parseInt(e,10)})};a.getTimeLabel=o;a.getTimeOptions=function(e){return e.map((function(e){return{label:o(e),value:e}}))};a.getDateStr=function(e){return(0,n.getLocalTime)(1e3*e).format("YYYY-MM-DD HH:mm:ss")}},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(56)),i=r(a(49)),c=r(a(21)),s=r(a(136)),f=r(a(50)),d=r(a(91)),p=r(a(12)),m=r(a(13)),h=r(a(135)),v=r(a(19)),y=r(a(20)),g=r(a(18)),b=r(a(74)),E=(r(a(92)),r(a(16))),_=r(a(73)),O=r(a(291)),S=r(a(990)),k=a(5),C=a(37),R=a(58),w=a(889),P=r(a(277));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var I=function(e){if((0,O.default)(e,"requests.errorRatio"))return e;var t=0,a=0,r=(0,E.default)(e,"requests.inbound.http",{});return Object.keys(r).forEach((function(e){var n=Number(r[e]);t+=n,Number(e)>=400&&(a+=n)})),(0,_.default)(e,"requests.errorRatio",Math.max(100*a/t,0)),e},A=(n=function(e){(0,v.default)(n,e);var t,a,r=N(n);function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"applications";return(0,p.default)(this,n),e=r.call(this,t),(0,d.default)(e,"isTracingLoading",l,(0,h.default)(e)),e.tracing={data:[],total:0},e.graph={data:{},health:{}},(0,d.default)(e,"env",u,(0,h.default)(e)),e.getGraphUrl=function(t){var a=t.cluster,r=t.namespace,n=t.duration;return"kapis/servicemesh.kubesphere.io/v1alpha2".concat(e.getPath({cluster:a,namespace:r}),"/graph?duration=").concat(n,"s&graphType=versionedApp&injectServiceNodes=true&groupBy=app&appenders=deadNode,sidecarsCheck,serviceEntry,istio,responseTime")},e.getHealthUrl=function(t){var a=t.cluster,r=t.namespace,n=t.type,l=t.duration;return"kapis/servicemesh.kubesphere.io/v1alpha2".concat(e.getPath({cluster:a,namespace:r}),"/health?rateInterval=").concat(l,"s&type=").concat(n)},e}return(0,m.default)(n,[{key:"fetchGraph",value:(a=(0,f.default)(i.default.mark((function e(){var t,a,r,n,l,u,o,f,d,p,m,h,v,y,g,b=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},a=t.cluster,r=t.namespace,n=t.app,l=t.duration,e.next=3,Promise.all([request.get(this.getGraphUrl({cluster:a,namespace:r,app:n,duration:l})),request.get(this.getHealthUrl({cluster:a,namespace:r,type:"app",duration:l})),request.get(this.getHealthUrl({cluster:a,namespace:r,type:"service",duration:l})),request.get(this.getHealthUrl({cluster:a,namespace:r,type:"workload",duration:l}))]);case 3:u=e.sent,o=(0,s.default)(u,4),f=o[0],d=o[1],p=o[2],m=o[3],h=this.detail.services||[],v=this.detail.workloads||[],y={},d&&p&&m&&(this.graph.health=h.reduce((function(e,t){if(!d[t])return e;var a=d[t],r=a.requests,n=a.workloadStatuses,l=n.reduce((function(e,t){return T(T({},e),{},(0,c.default)({},t.name,I(m[t.name])))}),{});return Object.keys(l).forEach((function(e){y[e]=t})),T(T({},e),{},(0,c.default)({},t,{requests:r,workloadStatuses:n,workloads:l,service:I(p[t])}))}),{})),f&&f.elements&&(g=[],f.elements.nodes.forEach((function(e){"service"===e.data.nodeType&&h.includes(e.data.service)?g.push(e):"app"===e.data.nodeType&&e.data.workload&&v.includes(e.data.workload)&&(e.data.app=y[e.data.workload],g.push(e)),e.data.isRoot&&e.data.namespace!==r&&(e.data.targetNamespace=r,g.push(e))})),this.graph.data={nodes:g,edges:f.elements.edges});case 14:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchAppMetrics",value:function(e){var t=e.name,a=e.cluster,r=e.namespace,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=Math.floor((new Date).getTime()/1e3),u=T({queryTime:l,duration:60,step:20,rateInterval:"20s","filters[]":["request_count","request_duration","request_error_count","tcp_sent","tcp_received"],direction:"inbound",reporter:"destination"},n);return request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:a,namespace:r}),"/apps/").concat(t,"/metrics"),u)}},{key:"fetchServiceMetrics",value:function(e){var t=e.name,a=e.cluster,r=e.namespace,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=Math.floor((new Date).getTime()/1e3),u=T({queryTime:l,duration:60,step:20,rateInterval:"20s",direction:"inbound",reporter:"source"},n);return request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:a,namespace:r}),"/services/").concat(t,"/metrics"),u)}},{key:"fetchWorkloadMetrics",value:function(e){var t=e.name,a=e.cluster,r=e.namespace,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=T({duration:60,step:20,rateInterval:"20s",direction:"inbound",reporter:"source"},n);return request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:a,namespace:r}),"/workloads/").concat(t,"/metrics"),l)}},{key:"fetchTracing",value:(t=(0,f.default)(i.default.mark((function e(t){var a,r,n,l,u,c,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.service,r=t.cluster,n=t.namespace,l=(0,o.default)(t,["service","cluster","namespace"]),this.isTracingLoading=!0,u=T({limit:5},l),c=(new Date).getTime(),u.start="".concat(u.start||"".concat(c-R.TIME_MICROSECOND_MAP[u.lookback]),"000"),u.end="".concat(u.end||"".concat(c),"000"),e.prev=6,e.next=9,request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:r,namespace:n}),"/services/").concat(a,"/traces"),u);case 9:(s=e.sent)&&s.data&&(this.tracing.data=(0,w.transformTraces)(s.data)),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(6);case 15:this.isTracingLoading=!1;case 16:case"end":return e.stop()}}),e,this,[[6,13]])}))),function(e){return t.apply(this,arguments)})},{key:"setSelectRowKeys",value:function(e){this.list.selectedRowKeys.replace(e)}},{key:"create",value:function(e,t){var a=this,r=e.application,n=e.ingress,l=(0,o.default)(e,["application","ingress"]),u="true"===(0,E.default)(r,'metadata.annotations["servicemesh.kubesphere.io/enabled"]'),i=[{url:this.getListUrl(t),data:r}];if((0,E.default)(n,"spec.rules",[]).length>0){var c=(0,E.default)(r,"metadata.name");if((0,E.default)(n,"metadata.name")||(0,_.default)(n,"metadata.name","".concat(c,"-ingress-").concat((0,C.generateId)())),u){var s=(0,E.default)(n,"spec.rules[0].http.paths[0].backend.service.name");s&&(0,_.default)(n,'metadata.annotations["nginx.ingress.kubernetes.io/upstream-vhost"]',"".concat(s,".").concat(t.namespace,".svc.cluster.local"))}i.push({url:"apis/networking.k8s.io/v1".concat(this.getPath(t),"/ingresses"),data:n})}return Object.values(l).forEach((function(e){if(e.workload&&e.service){var r=(0,S.default)(R.MODULE_KIND_MAP,(function(t){return t===e.workload.kind}))||"deployments";i.push({url:"apis/apps/v1".concat(a.getPath(t),"/").concat(r),data:e.workload},{url:"api/v1".concat(a.getPath(t),"/services"),data:e.service})}})),this.submitting((0,C.withDryRun)(i))}},{key:"addComponent",value:function(e,t){var a=[];if(t.namespace){if(e.workload&&e.service){var r=(0,S.default)(R.MODULE_KIND_MAP,(function(t){return t===e.workload.kind}))||"deployments";a.push({url:"apis/apps/v1".concat(this.getPath(t),"/").concat(r),data:e.workload},{url:"api/v1".concat(this.getPath(t),"/services"),data:e.service})}return this.submitting((0,C.withDryRun)(a))}}},{key:"patch",value:function(e,t){var a=e.namespace,r=e.cluster,n=e.name;return this.submitting(request.patch(this.getDetailUrl({name:n,cluster:r,namespace:a}),t))}},{key:"delete",value:function(e){var t=e.name,a=e.cluster,r=e.namespace;return this.submitting(request.delete(this.getDetailUrl({name:t,cluster:a,namespace:r})))}},{key:"checkName",value:function(e){var t=e.name,a=e.cluster,r=e.namespace;return request.get(this.getDetailUrl({name:t,cluster:a,namespace:r}),{},{headers:{"x-check-exist":!0}})}},{key:"fetchSampleData",value:function(e){return request.get("sample/".concat(e))}}]),n}(P.default),l=(0,b.default)(n.prototype,"isTracingLoading",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=(0,b.default)(n.prototype,"env",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!1}}}),(0,b.default)(n.prototype,"fetchGraph",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchGraph"),n.prototype),(0,b.default)(n.prototype,"fetchAppMetrics",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchAppMetrics"),n.prototype),(0,b.default)(n.prototype,"fetchServiceMetrics",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchServiceMetrics"),n.prototype),(0,b.default)(n.prototype,"fetchWorkloadMetrics",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchWorkloadMetrics"),n.prototype),(0,b.default)(n.prototype,"fetchTracing",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchTracing"),n.prototype),(0,b.default)(n.prototype,"setSelectRowKeys",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectRowKeys"),n.prototype),(0,b.default)(n.prototype,"create",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,b.default)(n.prototype,"addComponent",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"addComponent"),n.prototype),(0,b.default)(n.prototype,"patch",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"patch"),n.prototype),(0,b.default)(n.prototype,"delete",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"delete"),n.prototype),(0,b.default)(n.prototype,"checkName",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"checkName"),n.prototype),(0,b.default)(n.prototype,"fetchSampleData",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchSampleData"),n.prototype),n);t.default=A},,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=r(a(3)),d=a(821),p=r(a(16)),m=r(a(32)),h=r(a(138)),v=r(a(1561)),y=a(25),g=r(a(795)),b=a(979),E=r(a(1564));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var O=function(e){(0,u.default)(a,e);var t=_(a);function a(e){var r,l;return(0,n.default)(this,a),(r=t.call(this,e)).handleUpload=function(e){var t=new FileReader;t.onload=function(e){(0,m.default)(e.target.result)||(r.value=e.target.result,r.forceUpdate(),r.props.onChange&&r.props.onChange(r.value))},t.readAsText(e[0])},r.handleDownload=function(){var e,t=r.props,a=t.value,n=t.mode;if(a.metadata)e=a;else{var l=Object.values(a);l&&l[0]&&l[0].metadata&&(e=l[0])}var u=[(0,p.default)(e,"metadata.name","default"),(0,p.default)(e,"metadata.namespace",""),(0,p.default)(e,"kind","").toLowerCase()].filter((function(e){return e})).join(".");r.saveAsFile(r.value,"".concat(u,".").concat(n))},r.saveAsFile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default.txt",a=new Blob([e],{type:"text/plain;charset=utf-8"});(0,d.saveAs)(a,t)},r.handleChange=function(e){r.value=e,r.props.onChange&&r.props.onChange(e)},r.getData=function(){return e=r.value,t=!!r.props.value.metadata,a=(0,b.getAllYAMLValue)(e),t&&1===a.length?a[0]:a;var e,t,a},r.value=(l=e.value).metadata?(0,b.getValue)(l):(0,h.default)(l)?l:Object.values(l).map((function(e){return(0,b.getValue)(e||{})})).join("---\n"),r}return(0,l.default)(a,[{key:"options",get:function(){return{readOnly:this.props.readOnly,width:"100%",height:"100%"}}}]),(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.mode,a=e.className,r=e.editorClassName,n=e.readOnly;return c.default.createElement("div",{className:(0,f.default)(E.default.mode,a)},c.default.createElement("div",{className:(0,f.default)(E.default.edit,r)},c.default.createElement(g.default,{className:E.default.editor,mode:t,value:this.value,options:this.options,onChange:this.handleChange}),c.default.createElement("div",{className:E.default.ops,onClick:this.handleModeChange},!n&&c.default.createElement(c.default.Fragment,null,c.default.createElement(v.default,{fileTypes:[".yaml"],handleFiles:this.handleUpload},c.default.createElement(y.Icon,{name:"upload",size:20,color:{primary:"#fff",secondary:"#fff"},clickable:!0,changeable:!0})),c.default.createElement("span",{className:E.default.split},"|")),c.default.createElement(y.Icon,{name:"download",size:20,color:{primary:"#fff",secondary:"#fff"},onClick:this.handleDownload,clickable:!0,changeable:!0}))))}}]),a}(c.default.Component);t.default=O,O.propTypes={className:s.default.string,mode:s.default.string,value:s.default.oneOfType([s.default.object,s.default.arrayOf(s.default.object)]),readOnly:s.default.bool},O.defaultProps={mode:"yaml",readOnly:!1}},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(16)),v=n(r(73)),y=n(r(745)),g=n(r(1689)),b=n(r(32)),E=n(r(848)),_=n(r(68)),O=r(25),S=r(37),k=n(r(1690)),C=n(r(1216));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var D=function(e){(0,c.default)(r,e);var a=P(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).cpuFormatter=function(e){return e>0&&e<1?e.toFixed(2):e>1&&e!==1/0?e.toFixed(1):e},n.memoryFormatter=function(e){return(e=Math.round(e))>0&&e<1e3?e-e%10:e>1e3&&e<2e3?e-e%50:e>2e3&&e!==1/0?e-e%100:e},n.checkError=function(e){var t="",a="",r=e.requests,n=e.limits;return n.cpu&&!String(n.cpu).endsWith(".")&&Number(r.cpu)>Number(n.cpu)&&(t="RequestExceed"),n.memory&&!String(n.memory).endsWith(".")&&Number(r.memory)>Number(n.memory)&&(a="RequestExceed"),{cpuError:t,memoryError:a}},n.checkAndTrigger=function(){var e=n.state,t=e.requests,a=e.limits,r=e.gpu,l=e.workspaceLimits,u=e.workspaceRequests;n.setState({workspaceLimitCheck:{requestCpuError:n.checkNumOutLimit(t.cpu,u.cpu),requestMemoryError:n.checkNumOutLimit(t.memory,u.memory),limitCpuError:n.checkNumOutLimit(a.cpu,l.cpu),limitMemoryError:n.checkNumOutLimit(a.memory,l.memory),gpuLimitError:n.checkGpuOutOfLimit(r)}},n.triggerChange)},n.checkGpuOutOfLimit=function(e){var t=e.type,a=(0,h.default)(n.props,"workspaceLimitProps.gpuLimit",[]).filter((function(e){return Object.keys(e)[0].endsWith(t)})),r=a.length>0?Object.values(a[0])[0]:"Not Limited";return n.checkNumOutLimit(e.value,r)},n.checkNumOutLimit=function(e,t){return"Not Limited"!==t&&(0,g.default)(Number(e))&&Number(e)>t?"workspaceRequestExceed":""},n.triggerChange=function(){var e=n.props,t=e.onChange,a=e.onError,r=n.state,l=r.requests,o=r.limits,i=r.cpuError,c=r.memoryError,s=r.workspaceLimitCheck,f=r.gpu,d=n.getMemoryProps().unit,p=n.getCPUProps().unit;p="Core"===p?"":p;var m=n.getWorkspaceCheckError();m.length>0?a(i||c||s[m[0]]):a(i||c);var h={};l.cpu>0&&l.cpu<1/0&&(0,v.default)(h,"requests.cpu","".concat(l.cpu).concat(p)),l.memory>0&&l.memory<1/0&&(0,v.default)(h,"requests.memory","".concat(l.memory).concat(d)),o.cpu>0&&o.cpu<1/0&&(0,v.default)(h,"limits.cpu","".concat(o.cpu).concat(p)),o.memory>0&&o.memory<1/0&&(0,v.default)(h,"limits.memory","".concat(o.memory).concat(d)),f.type&&f.value&&((0,v.default)(h,"limits",w(w({},h.limits),{},(0,u.default)({},"".concat(f.type),f.value))),(0,v.default)(h,"requests",w(w({},h.requests),{},(0,u.default)({},"".concat(f.type),f.value)))),t(h)},n.getWorkspaceCheckError=function(){return Object.keys(n.state.workspaceLimitCheck).filter((function(e){return""!==n.state.workspaceLimitCheck[e]}))},n.handleCPUChange=function(e){n.setState((function(t){var a=t.requests,r=t.limits;return{requests:w(w({},a),{},{cpu:e[0]}),limits:w(w({},r),{},{cpu:e[1]})}}),n.checkAndTrigger)},n.handleMemoryChange=function(e){n.setState((function(t){var a=t.requests,r=t.limits;return{requests:w(w({},a),{},{memory:e[0]}),limits:w(w({},r),{},{memory:e[1]})}}),n.checkAndTrigger)},n.handleInputChange=function(e,t){var a,r=e.target.name;if(""===t)a="";else{var l=/^(([1-9]{1}\d*)|(0{1}))(\.\d{0,2})?$/.exec(t);a=null==l?(0,h.default)(n.state,r,null):l[0]}n.setState((function(e){return(0,v.default)(e,r,(0,E.default)(a)?"":a),w(w({},e),n.checkError(e))}),n.checkAndTrigger)},n.handleGpuInputChange=function(e,t){var a;if(""===t)a="";else{var r=/^(0|[1-9][0-9]*)$/.exec(t);a=null==r?(0,h.default)(n.state,"gpu.value",""):r[0]}n.setState({gpu:{type:n.state.gpu.type,value:a}},n.checkAndTrigger)},n.gpuSelectChange=function(e){n.setState({gpu:{type:e,value:n.state.gpu.value}},n.checkAndTrigger)},n.renderLimitTip=function(e,a){return"Not Limited"!==e?"".concat(e," ").concat(a):t("NO_LIMIT")},n.renderGpuTip=function(){var e=n.props.workspaceLimitProps,a=n.state.gpu,r=null==e?void 0:e.gpuLimit.filter((function(e){return(0,b.default)(e)?e:Object.keys(e)[0].endsWith(a.type)}))[0];return d.default.createElement("div",{className:C.default.message},d.default.createElement("span",null,t("GPU_TYPE"),":"),d.default.createElement("span",null,(0,_.default)(r)?t("NO_LIMIT"):a.type),d.default.createElement("br",null),d.default.createElement("span",null,t("GPU_LIMIT"),":"),d.default.createElement("span",null,(0,_.default)(r)?t("NO_LIMIT"):Object.values(r)[0]))},n.renderGpuSelect=function(){return d.default.createElement(O.Column,null,d.default.createElement("div",{className:C.default.inputGroup},d.default.createElement("img",{src:"/assets/GPU.svg",size:48}),d.default.createElement("div",{className:(0,m.default)(C.default.input)},d.default.createElement("div",{className:C.default.label},d.default.createElement("span",null,t("GPU_TYPE"))),d.default.createElement("div",{className:C.default.inputBox},d.default.createElement(O.Select,{options:n.gpuOption,value:n.state.gpu.type,onChange:n.gpuSelectChange,placeholder:" "}))),d.default.createElement("div",{className:(0,m.default)(C.default.input)},d.default.createElement("div",{className:C.default.label},d.default.createElement("span",null,t("GPU_LIMIT"))),d.default.createElement("div",{className:C.default.inputBox},d.default.createElement(O.Input,{name:"gpu.value",value:n.state.gpu.value,onChange:n.handleGpuInputChange,placeholder:t("NO_LIMIT")})))))},n.state=w(w({},r.getValue(e)),{},{defaultValue:e.defaultValue,cpuError:"",memoryError:"",workspaceLimitCheck:{}}),n}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e,t){e.isEdit&&!this.props.isEdit&&(0,y.default)(e.defaultValue,t.defaultValue)&&this.setState(w(w({},r.getValue(this.props)),{},{defaultValue:this.props.defaultProps}))}},{key:"getCPUProps",value:function(){var e=this.state,a=e.requests,r=e.limits;return w(w({marks:[{value:0,label:t("NO_REQUEST"),weight:2},{value:.2,label:.2,weight:2},{value:.5,label:.5,weight:2},{value:1,label:1,weight:2},{value:2,label:2,weight:2},{value:3,label:3,weight:2},{value:4,label:4},{value:1/0,label:t("NO_LIMIT")}],value:[a.cpu||0,r.cpu||1/0],onChange:this.handleCPUChange,valueFormatter:this.cpuFormatter},this.props.cpuProps),{},{unit:this.cpuUnit})}},{key:"getMemoryProps",value:function(){var e=this.state,a=e.requests,r=e.limits;return w(w({marks:[{value:0,label:t("NO_REQUEST"),weight:2},{value:200,label:200,weight:1},{value:500,label:500,weight:1},{value:1e3,label:1e3,weight:2},{value:2e3,label:2e3,weight:2},{value:4e3,label:4e3,weight:2},{value:6e3,label:6e3,weight:1},{value:8e3,label:8e3},{value:1/0,label:t("NO_LIMIT")}],value:[a.memory||0,r.memory||1/0],onChange:this.handleMemoryChange,valueFormatter:this.memoryFormatter},this.props.memoryProps),{},{unit:this.memoryUnit})}},{key:"getLimit",value:function(e){return(0,g.default)(Number(e))?e:""}},{key:"getRequest",value:function(e){return 0===e?"":e}},{key:"renderQuotasTip",value:function(){var e=this,a=this.props,r=a.workspaceLimitProps,n=a.supportGpuSelect,l=this.state,u=l.workspaceLimits,o=l.workspaceRequests,i=this.memoryUnit,c=this.cpuUnit,s=t("AVAILABLE_QUOTAS");return d.default.createElement(O.Alert,{title:s,type:"info",className:"margin-t12",message:d.default.createElement(d.default.Fragment,null,d.default.createElement("div",null,d.default.createElement("div",{className:C.default.message},d.default.createElement("span",null,t("WS_RESOURCE_REQUESTS"),":"),d.default.createElement("span",null,"CPU ",e.renderLimitTip(o.cpu,c),", ",t("MEMORY")," ",e.renderLimitTip(o.memory,i))),d.default.createElement("div",{className:C.default.message},d.default.createElement("span",null,t("WS_RESOURCE_LIMITS"),":"),d.default.createElement("span",null,"CPU ",e.renderLimitTip(u.cpu,c),", ",t("MEMORY")," ",e.renderLimitTip(u.memory,i))),n&&r.gpuLimit&&e.renderGpuTip()))})}},{key:"render",value:function(){var e=this.state,a=e.cpuError,r=e.memoryError,n=e.workspaceLimitCheck,l=this.props.supportGpuSelect,o=this.getWorkspaceCheckError();return d.default.createElement("div",{className:C.default.wrapper},d.default.createElement("div",{className:C.default.sliderWrapper},d.default.createElement("div",null,"CPU (",this.cpuUnit,")"),d.default.createElement(k.default,this.getCPUProps())),d.default.createElement("div",{className:C.default.sliderWrapper},d.default.createElement("div",null,t("MEMORY")," (",this.memoryUnit,")"),d.default.createElement(k.default,this.getMemoryProps())),d.default.createElement("div",{className:C.default.inputWrapper},d.default.createElement(O.Columns,{className:"is-gapless"},d.default.createElement(O.Column,null,d.default.createElement("div",{className:C.default.inputGroup},d.default.createElement(O.Icon,{name:"cpu",size:48}),d.default.createElement("div",{className:(0,m.default)(C.default.input,(0,u.default)({},C.default.error,a||n.requestCpuError))},d.default.createElement("span",{className:C.default.label},t("CPU_REQUEST")),d.default.createElement("div",{className:C.default.inputBox},d.default.createElement(O.Input,{name:"requests.cpu",value:this.getRequest(this.state.requests.cpu),onChange:this.handleInputChange,placeholder:t("NO_REQUEST")}),d.default.createElement("span",{className:C.default.unit},this.cpuUnit))),d.default.createElement("div",{className:(0,m.default)(C.default.input,(0,u.default)({},C.default.error,a||n.limitCpuError))},d.default.createElement("span",{className:C.default.label},t("CPU_LIMIT")),d.default.createElement("div",{className:C.default.inputBox},d.default.createElement(O.Input,{name:"limits.cpu",value:this.getLimit(this.state.limits.cpu),onChange:this.handleInputChange,placeholder:t("NO_LIMIT")}),d.default.createElement("span",{className:C.default.unit},this.cpuUnit))))),d.default.createElement(O.Column,null,d.default.createElement("div",{className:C.default.inputGroup},d.default.createElement(O.Icon,{name:"memory",size:48}),d.default.createElement("div",{className:(0,m.default)(C.default.input,(0,u.default)({},C.default.error,r||n.requestMemoryError))},d.default.createElement("span",{className:C.default.label},t("MEMORY_REQUEST")),d.default.createElement("div",{className:C.default.inputBox},d.default.createElement(O.Input,{name:"requests.memory",value:this.getRequest(this.state.requests.memory),onChange:this.handleInputChange,placeholder:t("NO_REQUEST")}),d.default.createElement("span",{className:C.default.unit},this.memoryUnit))),d.default.createElement("div",{className:(0,m.default)(C.default.input,(0,u.default)({},C.default.error,r||n.limitMemoryError))},d.default.createElement("span",{className:C.default.label},t("MEMORY_LIMIT")),d.default.createElement("div",{className:C.default.inputBox},d.default.createElement(O.Input,{name:"limits.memory",value:this.getLimit(this.state.limits.memory),onChange:this.handleInputChange,placeholder:t("NO_LIMIT")}),d.default.createElement("span",{className:C.default.unit},this.memoryUnit))))),l&&this.renderGpuSelect())),this.ifRenderTip&&this.renderQuotasTip(),(a||r)&&d.default.createElement(O.Alert,{type:"error",className:"margin-t12",message:t("REQUEST_EXCEED_LIMIT")}),o.length>0&&d.default.createElement(O.Alert,{type:"error",className:"margin-t12",message:t("REQUEST_EXCEED_AVAILABLE_QUOTA")}))}},{key:"cpuUnit",get:function(){return this.props.cpuProps.unit||"Core"}},{key:"memoryUnit",get:function(){return this.props.memoryProps.unit||"Mi"}},{key:"gpuOption",get:function(){return globals.config.supportGpuType.reduce((function(e,a){return[].concat((0,l.default)(e),[{value:a,label:t(a.replace(/[-/.]/g,"_").toUpperCase())}])}),[])}},{key:"gpuType",get:function(){return this.state.gpu.type}},{key:"ifRenderTip",get:function(){var e=this.props.workspaceLimitProps;return!(0,b.default)(e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(0,y.default)(e.defaultValue,t.defaultValue)&&(0,y.default)(e.workspaceLimitProps,t.workspaceLimitProps)?null:w(w({},r.getValue(e)),{},{defaultValue:e.defaultValue,workspaceLimitProps:e.workspaceLimitProps})}},{key:"allowInputDot",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e===1/0)return e;var n=e&&r?e.slice(0,-2):e;if(n&&String(n).endsWith(".")){var l=a(e,t);return"".concat(l,".")}if(n&&String(n).endsWith(".0")){var u=a(e,t);return"".concat(u,".0")}return a(e,t)}},{key:"getValue",value:function(e){var t=(0,h.default)(e,"cpuProps.unit","Core"),a=(0,h.default)(e,"memoryProps.unit","Mi"),n=r.getDefaultRequestValue(e,"cpu"),l=r.getDefaultRequestValue(e,"memory"),u=r.getDefaultLimitValue(e,"cpu"),o=r.getDefaultLimitValue(e,"memory"),i=r.allowInputDot(n,t,S.cpuFormat),c=r.allowInputDot(l,a,S.memoryFormat,!0),s=r.allowInputDot(u,t,S.cpuFormat),f=r.allowInputDot(o,a,S.memoryFormat,!0),d=(0,S.memoryFormat)("".concat(r.getWorkspaceRequestLimit(e,"memory"),"Mi"),a),p=(0,S.memoryFormat)("".concat(r.getWorkspaceLimitValue(e,"memory"),"Mi"),a),m=(0,S.cpuFormat)(r.getWorkspaceRequestLimit(e,"cpu"),t),v=(0,S.cpuFormat)(r.getWorkspaceLimitValue(e,"cpu"),t);return{requests:{cpu:i,memory:c},limits:{cpu:s,memory:f},workspaceRequests:{cpu:(0,E.default)(m)?"Not Limited":m,memory:(0,E.default)(d)?"Not Limited":d},workspaceLimits:{cpu:(0,E.default)(v)?"Not Limited":v,memory:(0,E.default)(p)?"Not Limited":p},gpu:r.gpuSetting(e)}}},{key:"getGpuFromProps",value:function(e){var t=globals.config.supportGpuType;if(!e)return{type:t[0],value:""};var a=Object.keys((0,h.default)(e,"requests",{})).filter((function(e){return t.some((function(t){return e.endsWith(t)}))})),r=(0,b.default)(a)?t[0]:a[0];return{type:r,value:(0,b.default)(a)?"":e.requests["".concat(r)]}}},{key:"gpuSetting",value:function(e){var t=(0,h.default)(e,"value",{}),a=(0,h.default)(e,"defaultValue",{});return(0,b.default)(t)?(0,b.default)(a)?r.getGpuFromProps():r.getGpuFromProps(a):r.getGpuFromProps(t)}},{key:"getDefaultRequestValue",value:function(e,t){var a;return(0,h.default)(e,"value.requests.".concat(t),null!==(a=(0,h.default)(e,"defaultValue.requests.".concat(t)))&&void 0!==a?a:0)}},{key:"getDefaultLimitValue",value:function(e,t){var a;return(0,h.default)(e,"value.limits.".concat(t),null!==(a=(0,h.default)(e,"defaultValue.limits.".concat(t)))&&void 0!==a?a:1/0)}},{key:"getWorkspaceRequestLimit",value:function(e,t){return(0,h.default)(e,"workspaceLimitProps.requests.".concat(t),"Not Limited")}},{key:"getWorkspaceLimitValue",value:function(e,t){return(0,h.default)(e,"workspaceLimitProps.limits.".concat(t),"Not Limited")}}]),r}(d.default.Component);a.default=D,D.propTypes={value:p.default.object,defaultValue:p.default.object,onChange:p.default.func,onError:p.default.func,supportGpuSelect:p.default.bool},D.defaultProps={value:{},onChange:function(){},onError:function(){},cpuProps:{},memoryProps:{},supportGpuSelect:!1}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(21)),i=r(a(56)),c=r(a(49)),s=r(a(50)),f=r(a(91)),d=r(a(12)),p=r(a(13)),m=r(a(135)),h=r(a(939)),v=r(a(19)),y=r(a(20)),g=r(a(18)),b=r(a(74)),E=(r(a(92)),r(a(16))),_=r(a(73)),O=r(a(138)),S=r(a(32)),k=r(a(23)),C=a(5),R=r(a(186)),w=r(a(874));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var N=(n=function(e){(0,v.default)(y,e);var t,a,r,n,o=T(y);function y(){var e;(0,d.default)(this,y);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=o.call.apply(o,[this].concat(a)),(0,f.default)(e,"resources",l,(0,m.default)(e)),(0,f.default)(e,"metrics",u,(0,m.default)(e)),e.module="storageclasses",e.getResourceUrl=function(t){return"kapis/resources.kubesphere.io/v1alpha3".concat(e.getPath(t),"/").concat(e.module)},e}return(0,p.default)(y,[{key:"delete",value:(n=(0,s.default)(c.default.mark((function e(t){var a;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.default)((0,g.default)(y.prototype),"delete",this).call(this,t);case 2:return a=new w.default,e.next=5,a.deleteSilent(t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"batchDelete",value:(r=(0,s.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.default)((0,g.default)(y.prototype),"batchDelete",this).call(this,t);case 2:(new w.default).silentBatchDelete(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"create",value:function(e,t){"custom"===e.provisioner&&(e.provisioner=e.parameters.provisioner,delete e.parameters.provisioner),(0,O.default)(e.allowVolumeExpansion)&&(e.allowVolumeExpansion="true"===e.allowVolumeExpansion);var a=(0,E.default)(e,'metadata.annotations["storageclass.kubesphere.io/supported-access-modes"]');return!(0,S.default)(a)&&(0,k.default)(a)&&(0,_.default)(e,'metadata.annotations["storageclass.kubesphere.io/supported-access-modes"]',JSON.stringify(a)),this.submitting(request.post(this.getListUrl(t),e))}},{key:"createAlongWithSnapshotClasses",value:(a=(0,s.default)(c.default.mark((function e(t,a){var r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.create(t,a);case 2:if(r=new w.default,"true"!==(0,E.default)(t,'metadata.annotations["storageclass.kubesphere.io/support-snapshot"]')){e.next=6;break}return e.next=6,r.create({metadata:{name:(0,E.default)(t,"metadata.name")},driver:(0,E.default)(t,"provisioner")},a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"fetchResources",value:(t=(0,s.default)(c.default.mark((function e(t){var a,r,n,l;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=(0,i.default)(t,["name"]),this.resources.isLoading=!0,n=D({},r),a&&(n.conditions="storageClassName=".concat(a)),e.next=6,request.get("kapis/resources.kubesphere.io/v1alpha2/persistentvolumeclaims",n);case 6:l=e.sent,this.resources={data:l.items?l.items.map(R.default.volumes):[],isLoading:!1};case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getStorageSizeConfig",value:function(){var e=this.detail||{};return{min:Number((0,E.default)(e,"parameters.minSize"))||0,max:Number((0,E.default)(e,"parameters.maxSize"))||2048,step:Number((0,E.default)(e,"parameters.stepSize"))||1}}}]),y}(r(a(277)).default),l=(0,b.default)(n.prototype,"resources",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],isLoading:!0}}}),u=(0,b.default)(n.prototype,"metrics",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],isLoading:!0}}}),(0,b.default)(n.prototype,"create",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,b.default)(n.prototype,"fetchResources",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchResources"),n.prototype),n);t.default=N},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(49)),u=r(a(50)),o=r(a(21)),i=r(a(12)),c=r(a(13)),s=r(a(939)),f=r(a(19)),d=r(a(20)),p=r(a(18)),m=r(a(74)),h=a(5);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var b=(n=function(e){(0,f.default)(o,e);var t,a,r,n=g(o);function o(){var e;(0,i.default)(this,o);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).module="volumesnapshotclasses",e}return(0,c.default)(o,[{key:"create",value:function(e,t){return(0,s.default)((0,p.default)(o.prototype),"create",this).call(this,y({apiVersion:"snapshot.storage.k8s.io/v1beta1",kind:this.resourceKind,deletionPolicy:"Delete"},e),t)}},{key:"fetchDetail",value:(r=(0,u.default)(l.default.mark((function e(t){var a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getDetailUrl(t),{},{},(function(){}));case 3:return a=e.sent,r=a?y(y({},t),this.mapper(a)):{},this.detail=r,this.isLoading=!1,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"deleteSilent",value:(a=(0,u.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.delete(this.getDetailUrl(t),{},{},(function(){}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"silentBatchDelete",value:(t=(0,u.default)(l.default.mark((function e(t){var a=this;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return request.delete(a.getDetailUrl({name:e}),{},{},(function(){}))}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"resourceKind",get:function(){return"VolumeSnapshotClass"}},{key:"apiVersion",get:function(){return"apis/snapshot.storage.k8s.io/v1beta1"}}]),o}(r(a(277)).default),(0,m.default)(n.prototype,"fetchDetail",[h.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),n);t.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(136)),o=n(r(49)),i=n(r(50)),c=n(r(21)),s=n(r(12)),f=n(r(13)),d=n(r(135)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(995)),y=n(r(16)),g=n(r(73)),b=n(r(738)),E=n(r(32)),_=n(r(190)),O=n(r(301)),S=n(r(291)),k=n(r(850)),C=n(r(996)),R=n(r(936)),w=n(r(68)),P=n(r(199)),D=n(r(300)),T=n(r(0)),N=r(37),I=r(58),A=r(280),x=n(r(773)),j=n(r(937)),M=n(r(737)),L=n(r(811)),U=n(r(853)),F=n(r(753)),V=r(25),q=n(r(1226)),B=n(r(1227)),z=n(r(1714)),G=n(r(1071)),H=n(r(1228)),Y=n(r(1725)),K=n(r(1745)),W=n(r(1746)),J=n(r(1747));function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var $=function(e){(0,p.default)(r,e);var a=Z(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).getReplicas=function(){return(0,y.default)(n.fedFormTemplate,"spec.replicas")||1},n.singleClusterQuota=function(e,t,a){return new Promise((function(r){Promise.all([n.quotaStore.fetch({cluster:a,namespace:t}),n.workspaceQuotaStore.fetchDetail({name:e,workspace:e,cluster:a})]).then((function(e){var t=(0,y.default)(e[0],"data.hard"),a=(0,A.getLeftQuota)(e[1],(0,y.default)(e[0],"data")),n=a.namespace,l=a.workspace;r({workspaceQuota:l,namespaceQuota:X(X({},n),(0,_.default)(t,N.resourceLimitKey))})}))}))},n.multiClusterQuota=function(e,t){var a=[],r={"limits.cpu":void 0,"limits.memory":void 0};n.clusters.forEach((function(r){return a.push(n.singleClusterQuota(e,t,r))})),Promise.all(a).then((function(e){var t=e.map((function(e){return(0,y.default)(e,"workspaceQuota",r)})),a=e.map((function(e){return(0,y.default)(e,"namespaceQuota",r)})),l=e.map((function(e){return(0,_.default)((0,y.default)(e,"namespaceQuota",{}),N.resourceLimitKey)}));n.setState({leftQuota:{workspace:n.transformQuota(t),namespace:n.transformQuota(a)},availableQuota:{workspace:n.transformQuota(t),namespace:X(X({},n.transformQuota(a)),n.transformGpu(l))}})}))},n.transformQuota=function(e){return{"limits.cpu":n.findCpuOrMemoryMin(e,"limits.cpu"),"limits.memory":n.findCpuOrMemoryMin(e,"limits.memory"),"requests.cpu":n.findCpuOrMemoryMin(e,"requests.cpu"),"requests.memory":n.findCpuOrMemoryMin(e,"requests.memory")}},n.findCpuOrMemoryMin=function(e,t){var a=e.map((function(e){return e[t]}));return(0,k.default)(a)},n.transformGpu=function(e){var t=globals.config.supportGpuType,a=e.map((function(e){return(0,P.default)(e,(function(e,a){return t.some((function(e){return(0,D.default)(a,e)}))}))}));return(0,C.default)(a,(function(e,t){var a=(0,y.default)(e,"".concat(Object.keys(t)[0]));return a?Number(a)>Number(Object.values(t)[0])?X(X({},e),t):X({},e):X(X({},e),t)}),{})},n.fetchQuota=(0,i.default)(o.default.mark((function e(){var t,a,r,l,u,i,c,s,f,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.namespace,r=n.props,l=r.cluster,u=r.projectDetail,i=r.isFederated,!(t=u?u.workspace:n.props.workspace)||!a){e.next=15;break}if(i){e.next=14;break}return e.next=7,n.singleClusterQuota(t,a,l);case 7:c=e.sent,s=c.workspaceQuota,f=c.namespaceQuota,d={workspace:s,namespace:f},n.setState({leftQuota:d,availableQuota:d}),e.next=15;break;case 14:n.multiClusterQuota(t,a);case 15:case"end":return e.stop()}}),e)}))),n.handleReplicaChange=function(e){n.setState({replicas:e})},n.handleClusterUpdate=function(){n.updateService()},n.showContainer=function(e){n.setState({showContainer:!0,selectContainer:e||{}})},n.hideContainer=function(){n.setState({showContainer:!1,selectContainer:{}})},n.updateTimeZone=function(e){var t=(0,y.default)(n.fedFormTemplate,"".concat(n.prefix,"spec.volumes"),[]);e.some((function(e){return(e.volumeMounts||[]).some((function(e){return"/etc/localtime"===e.mountPath}))}))?t.every((function(e){return"host-time"!==e.name}))&&t.push({hostPath:{path:"/etc/localtime",type:""},name:"host-time"}):t=t.filter((function(e){var t;return!("host-time"===e.name&&"/etc/localtime"===(null==e||null===(t=e.hostPath)||void 0===t?void 0:t.path))})),(0,g.default)(n.fedFormTemplate,"".concat(n.prefix,"spec.volumes"),t)},n.updatePullSecrets=function(){var e={},t="".concat(n.prefix,"spec.imagePullSecrets"),a=(0,y.default)(n.fedFormTemplate,"".concat(n.prefix,"spec.containers"),[]),r=(0,y.default)(n.fedFormTemplate,"".concat(n.prefix,"spec.initContainers"),[]);(0,v.default)(a,r).forEach((function(t){t.pullSecret&&(e[t.pullSecret]="")})),(0,g.default)(n.fedFormTemplate,t,(0,E.default)(e)?null:Object.keys(e).map((function(e){return{name:e}})))},n.updateService=function(){var e=n.props,t=e.formTemplate,a=e.module;if(e.withService){var r=(0,y.default)(n.fedFormTemplate,"".concat(n.prefix,"spec.containers"),[]),l=[];r.forEach((function(e){e.ports&&e.ports.forEach((function(e){e.servicePort&&l.push({name:e.name,protocol:e.protocol,port:e.servicePort,targetPort:e.containerPort})}))}));var u=t.Service,o=n.props.isFederated?"spec.template.":"";(0,g.default)(u,"".concat(o,"spec.ports"),l);var i=(0,y.default)(n.formTemplate,"metadata.labels",{}),c=(0,y.default)(n.fedFormTemplate,"".concat(n.prefix,"metadata.labels"),{});(0,g.default)(u,"metadata.labels",i),(0,g.default)(u,"".concat(o,"spec.selector"),(0,_.default)(c,"version"));var s=(0,y.default)(n.formTemplate,"spec.placement");s?(0,g.default)(u,"spec.placement",s):(0,b.default)(u,"spec.placement"),"statefulsets"===a?(0,g.default)(u,"".concat(o,"spec.clusterIP"),"None"):(0,b.default)(u,"".concat(o,"spec.clusterIP"))}},n.handleDelete=function(){n.updatePullSecrets(),n.updateService()},n.containersValidator=function(e,a,r){if((0,E.default)(a))return r({message:t("CONTAINER_EMPTY_DESC")});r()},n.state={showContainer:!1,selectContainer:{},limitRange:{},imageRegistries:[],replicas:n.getReplicas(),leftQuota:{}},n.module=e.module,n.limitRangeStore=new j.default,n.imageRegistryStore=new x.default,n.quotaStore=new L.default,n.workspaceQuotaStore=new U.default,n.projectStore=new F.default,e.isFederated&&(n.limitRangeStore=new M.default({module:n.limitRangeStore.module}),n.imageRegistryStore=new M.default({module:n.imageRegistryStore.module})),n.handleContainer=n.handleContainer.bind((0,d.default)(n)),n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.store;this.fetchData(),this.fetchQuota(),this.props.withService&&this.initService(this.formTemplate),e.renderScheduleTab&&this.props.store.setMetadata(this.formTemplate.metadata)}},{key:"initService",value:function(){var e=(0,y.default)(this.formTemplate,"metadata.name"),t=(0,y.default)(this.props.formTemplate,"Service.metadata.name");e&&!t&&(t="".concat(e.slice(0,57),"-").concat((0,N.generateId)(4)),/^[a-z]/.test(t)||(t="s".concat(t)),(0,g.default)(this.props.formTemplate,"Service.metadata.name",t),(0,g.default)(this.props.formTemplate,'Service.metadata.annotations["kubesphere.io/alias-name"]',e),(0,g.default)(this.props.formTemplate,'Service.metadata.annotations["kubesphere.io/serviceType"]',"statefulservice"),(0,g.default)(this.fedFormTemplate,"spec.serviceName",t))}},{key:"fetchData",value:function(){var e=this,t=this.props,a=t.cluster,r=t.isFederated,n={cluster:a,namespace:(0,y.default)(this.formTemplate,"metadata.namespace")};Promise.all([this.limitRangeStore.fetchListByK8s(n),r?this.imageRegistryStore.fetchList(X(X({},n),{},{limit:-1,type:"kubernetes.io/dockerconfigjson"})):this.imageRegistryStore.fetchListByK8s(X(X({},n),{},{fieldSelector:"type=kubernetes.io/dockerconfigjson"}))]).then((function(t){var a=(0,u.default)(t,2),r=a[0],n=a[1];e.setState({limitRange:(0,y.default)(r,"[0].limit"),imageRegistries:n})}))}},{key:"handleContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,S.default)(e,"resources.limits")&&(e.resources.limits=(0,O.default)(e.resources.limits,E.default)),e.type=e.type||"worker";var t=(0,y.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.containers"),[]).map((function(e){return X(X({},e),{},{type:"worker"})})),a=(0,y.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.initContainers"),[]).map((function(e){return X(X({},e),{},{type:"init"})})),r=(0,v.default)(t,a),n=this.state.selectContainer,l=r.findIndex((function(e){return e.name===n.name}));l>-1?r[l]=e:r.push(e);var u=[],o=[];r.forEach((function(e){"worker"===e.type?(delete e.type,u.push(e)):(delete e.type,o.push(e))})),o.forEach((function(e){(0,N.cancelContainerDot)(e)})),u.forEach((function(e){(0,N.cancelContainerDot)(e)})),(0,g.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.containers"),u),(0,g.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.initContainers"),o),this.updateTimeZone(r),this.updatePullSecrets(),this.updateService(),this.hideContainer()}},{key:"renderContainerForm",value:function(e){var t=this.props,a=t.withService,r=t.isFederated,n=t.cluster,u=t.supportGpuSelect,o=t.projectDetail,i=this.state,c=i.limitRange,s=i.imageRegistries,f=e.image?"Edit":"Add",d={limitRange:c,imageRegistries:s};return T.default.createElement(Y.default,(0,l.default)({type:f,module:this.module,namespace:this.namespace,data:e,projectDetail:o,onSave:this.handleContainer,onCancel:this.hideContainer,withService:a,isFederated:r,workspaceQuota:this.workspaceQuota,cluster:n,supportGpuSelect:u},d))}},{key:"renderDeployPlacementTip",value:function(){return T.default.createElement("div",{className:J.default.tipBox},T.default.createElement("div",{className:J.default.tipTitle},t("SPECIFY_REPLICAS")),T.default.createElement("p",null,t("SPECIFY_REPLICAS_DESC")),T.default.createElement("br",null),T.default.createElement("div",{className:J.default.tipTitle},t("SPECIFY_WEIGHTS")),T.default.createElement("p",null,t("SPECIFY_WEIGHTS_DESC")))}},{key:"renderDeployPlace",value:function(){var e=this.props.projectDetail;return T.default.createElement(V.Form.Item,{className:"margin-b12",label:t("POD_REPLICAS"),tip:this.renderDeployPlacementTip()},T.default.createElement(z.default,{module:this.module,template:this.formTemplate,clusters:e.clusters,onClusterUpdate:this.handleClusterUpdate}))}},{key:"renderDeployMode",value:function(){var e=this.props.projectDetail;return T.default.createElement("div",{className:"margin-b12"},T.default.createElement("div",{className:J.default.formTip},T.default.createElement("span",{className:J.default.tipLabel},t("REPLICA_SCHEDULING_MODE")),T.default.createElement(V.Tooltip,{placement:"right",content:this.renderDeployPlacementTip()},T.default.createElement(V.Icon,{name:"question",size:"20"}))),T.default.createElement(V.Form.Item,null,T.default.createElement(z.default,{module:this.module,template:this.formTemplate,clusters:e.clusters,onClusterUpdate:this.handleClusterUpdate,store:this.props.store})))}},{key:"renderReplicasControl",value:function(){if("daemonsets"===this.module)return null;var e=this.props,t=e.isFederated,a=e.store;return t?a.renderScheduleTab?this.renderDeployMode():this.renderDeployPlace():T.default.createElement("div",{className:"margin-b12"},T.default.createElement(B.default,{module:this.module,replicas:this.state.replicas,template:this.formTemplate,onChange:this.handleReplicaChange}))}},{key:"renderContainerList",value:function(){var e=(0,y.default)(this.fedFormTemplate,"".concat(this.prefix,"spec"));return T.default.createElement(V.Form.Item,{label:t("CONTAINERS"),rules:[{validator:this.containersValidator}]},T.default.createElement(H.default,{name:"".concat(this.prefix,"spec.containers"),onShow:this.showContainer,onDelete:this.handleDelete,specTemplate:e,leftQuota:this.state.leftQuota,projectDetail:this.props.projectDetail,replicas:this.state.replicas,isEdit:this.props.isEdit}))}},{key:"renderUpdateStrategy",value:function(){var e=this.props.module;return T.default.createElement("div",{className:"margin-t12"},T.default.createElement(G.default,{module:e,data:this.fedFormTemplate}))}},{key:"renderPodSecurityContext",value:function(){return T.default.createElement("div",{className:"margin-t12"},T.default.createElement(K.default,{prefix:"".concat(this.prefix,"spec.securityContext")}))}},{key:"renderPodAffinity",value:function(){var e=this.props,t=e.cluster,a=e.namespace;return T.default.createElement("div",{className:"margin-b12"},T.default.createElement(q.default,{initial:!0,data:this.fedFormTemplate,module:this.module,cluster:t,namespace:a,checkable:!0}))}},{key:"renderMetadata",value:function(){return T.default.createElement("div",{className:"margin-b12"},T.default.createElement(V.Form.Group,{label:t("ADD_METADATA"),desc:t("POD_ADD_METADATA_DESC"),keepDataWhenUnCheck:!0,checkable:!0},T.default.createElement(W.default,null)))}},{key:"render",value:function(){var e=this.props.formRef,t=this.state,a=t.showContainer,r=t.selectContainer;return a?this.renderContainerForm(r):T.default.createElement(V.Form,{data:this.fedFormTemplate,ref:e},this.renderReplicasControl(),this.renderContainerList(),this.renderUpdateStrategy(),this.renderPodSecurityContext(),this.renderPodAffinity(),this.renderMetadata())}},{key:"prefix",get:function(){return this.props.prefix||"spec.template."}},{key:"namespace",get:function(){return(0,y.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module,r=(0,y.default)(t,I.MODULE_KIND_MAP[a],t);return r.totalReplicas="",r}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,y.default)(this.formTemplate,"spec.template"):this.formTemplate}},{key:"workspaceQuota",get:function(){var e=(0,y.default)(this.state.availableQuota,"namespace",{}),t=(0,y.default)(this.state.availableQuota,"workspace",{});return(0,R.default)(e,t,(function(e,t){if(e||t)return(0,w.default)(e)?t:e<t?e:t}))}},{key:"clusters",get:function(){return this.props.projectDetail.clusters.map((function(e){return e.name}))}}]),r}(T.default.Component);a.default=$},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Component=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(21)),i=n(r(109)),c=n(r(12)),s=n(r(13)),f=n(r(135)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(995)),v=n(r(16)),y=n(r(73)),g=n(r(738)),b=n(r(68)),E=n(r(32)),_=n(r(0)),O=r(5),S=r(70),k=r(25),C=r(37),R=r(58),w=r(313),P=n(r(763)),D=n(r(737)),T=n(r(753)),N=n(r(1748)),I=n(r(1750)),A=n(r(1760)),x=n(r(1762)),j=n(r(1764)),M=n(r(1766));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var V=function(e){(0,d.default)(r,e);var a=F(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).showVolume=function(){t.setState({state:"ShowVolume",selectVolume:{}})},t.showEditVolume=function(e){var a;a=(0,b.default)(e.configMap)&&(0,b.default)(e.secret)?"ShowVolume":"ShowConfig",t.setState({state:a,selectVolume:e})},t.showVolumeTemplate=function(){t.setState({state:"ShowVolumeTemplate"})},t.showEditVolumeTemplate=function(e){t.setState({state:"ShowVolumeTemplate",selectVolume:e})},t.resetState=function(e){t.setState({state:e||"",selectVolume:{}})},t.showConfig=function(){t.setState({state:"ShowConfig",selectVolume:{}})},t.formatSpecVolume=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,w.isNotPersistentVolume)(t)?t:{name:e.name||"volume-".concat((0,C.generateId)()),persistentVolumeClaim:{claimName:t.name}}},t.updateVolumes=function(e){var a=(0,v.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.volumes"),[]),r=[],n=(0,E.default)(t.selectVolume)?void 0:(0,v.default)(t.selectVolume,"specVolume",t.selectVolume),l=t.formatSpecVolume(n,e);r=n?a.map((function(e){return e.name===n.name?l:e})):[].concat((0,i.default)(a),[l]),(0,y.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.volumes"),r),t.checkMaxUnavalable(a)},t.updateVolumeMounts=function(e,a){var r=(0,v.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.containers"),[]).map((function(e){return U(U({},e),{},{type:"worker"})})),n=(0,v.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.initContainers"),[]).map((function(e){return U(U({},e),{},{type:"init"})})),l=(0,h.default)(r,n),o=(0,v.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.volumes"),[]);e.forEach((function(e){var t=e.containerName,r=e.volume,n=(0,u.default)(e,["containerName","volume"]),i=l.find((function(e){return e.name===t})),c=(0,w.findVolume)(o,r);if(c&&i){i.volumeMounts=i.volumeMounts||[];var s=U({name:c.name},n);i.volumeMounts.find((function(e){return e.name===c.name}))?i.volumeMounts=i.volumeMounts.map((function(e){return e.name===c.name?s:e})):i.volumeMounts.push(s),a&&a.name!==c.name&&(i.volumeMounts=i.volumeMounts.filter((function(e){return e.name!==a.name}))),i.volumeMounts=i.volumeMounts.filter((function(e){return"null"!==e.readOnly})).map((function(e){e.logPath;var t=(0,u.default)(e,["logPath"]);return U(U({},t),{},{readOnly:"true"===String(t.readOnly)})}))}}));var i=[],c=[];l.forEach((function(e){"worker"===e.type?(delete e.type,i.push(e)):(delete e.type,c.push(e))})),(0,y.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.containers"),i),(0,y.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.initContainers"),c)},t.checkMaxUnavalable=function(e){if(["deployments","daemonsets"].includes(t.props.module)&&"RollingUpdate"===(0,v.default)(t.fedFormTemplate,"spec.strategy.type")){var a=e.some((function(e){return!(0,E.default)(e.persistentVolumeClaim)})),r=(0,v.default)(t.fedFormTemplate,"spec.strategy.rollingUpdate.maxUnavailable",null);a&&!r&&(0,y.default)(t.fedFormTemplate,"spec.strategy.rollingUpdate.maxUnavailable",1)}},t.updateLogConfigs=function(e){var a=(0,C.safeParseJSON)((0,v.default)(t.fedFormTemplate,t.logPathPrefix,""),{}),r=(0,v.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.volumes"),[]);e.forEach((function(e){var t=(0,w.findVolume)(r,e.volume);if(t){var n="containerLogConfigs.".concat(e.containerName,".").concat(e.name||t.name);e.logPath?(0,y.default)(a,n,e.logPath.split(",")):(0,g.default)(a,n)}})),(0,y.default)(t.fedFormTemplate,t.logPathPrefix,JSON.stringify(a))},t.updateVolumeTemplate=function(e){var a=(0,v.default)(t.formTemplate,"metadata.namespace"),r=(0,v.default)(t.fedFormTemplate,"spec.volumeClaimTemplates",[]);(0,y.default)(e,"metadata.namespace",a);var n=[];n=r.find((function(t){return t.metadata.name===e.metadata.name}))?r.map((function(t){return t.metadata.name===e.metadata.name?e:t})):[].concat((0,i.default)(r),[e]),(0,y.default)(t.fedFormTemplate,"spec.volumeClaimTemplates",n)},t.updateVolumeTemplateMounts=function(e){var a=(0,v.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.containers"),[]).map((function(e){return U(U({},e),{},{type:"worker"})})),r=(0,v.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.initContainers"),[]).map((function(e){return U(U({},e),{},{type:"init"})})),n=(0,h.default)(a,r);e.forEach((function(e){var t=e.containerName,a=(0,u.default)(e,["containerName"]),r=n.find((function(e){return e.name===t}));if(r){r.volumeMounts=r.volumeMounts||[];var l=a;r.volumeMounts.find((function(e){return e.name===l.name}))?r.volumeMounts=r.volumeMounts.map((function(e){return e.name===l.name?l:e})):r.volumeMounts.push(l),r.volumeMounts=r.volumeMounts.filter((function(e){return"null"!==e.readOnly})).map((function(e){return U(U({},e),{},{readOnly:"true"===e.readOnly})}))}}));var l=[],o=[];n.forEach((function(e){"worker"===e.type?(delete e.type,l.push(e)):(delete e.type,o.push(e))})),(0,y.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.containers"),l),(0,y.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.initContainers"),o)},t.checkVolumeNameExist=function(e){var a=(0,v.default)(t.fedFormTemplate,"".concat(t.prefix,"spec.volumes"),[]),r=(0,v.default)(t.fedFormTemplate,"spec.volumeClaimTemplates",[]);return a.some((function(t){return t.name===e}))||r.some((function(t){return t.name===e}))},t.state={state:"",selectVolume:{},collectSavedLog:(0,v.default)(t.fedFormTemplate,t.collectSavedLogPath)},t.store=new P.default,t.projectStore=new T.default,e.isFederated&&(t.projectStore=new D.default({module:t.projectStore.module}),t.store=new D.default({module:t.store.module})),t.store.fetchList({namespace:t.namespace,cluster:t.cluster,limit:-1}),t.handleVolume=t.handleVolume.bind((0,f.default)(t)),t.handleVolumeTemplate=t.handleVolumeTemplate.bind((0,f.default)(t)),t.handleLogToggle=t.handleLogToggle.bind((0,f.default)(t)),t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.namespace&&this.projectStore.fetchDetail({name:this.namespace,namespace:this.namespace,cluster:this.cluster})}},{key:"handleVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;e.uid||t.forEach((function(t){t.name=e.name})),this.updateVolumes(e),this.updateVolumeMounts(t,a),this.updateLogConfigs(t),this.resetState()}},{key:"handleVolumeTemplate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.forEach((function(t){t.name=e.name||(0,v.default)(e,"metadata.name")})),this.updateVolumeTemplate(e),this.updateVolumeTemplateMounts(t),this.updateLogConfigs(t),this.resetState()}},{key:"renderVolume",value:function(){var e=this.state.collectSavedLog,t=(0,O.toJS)(this.store.list.data),a=this.store.list.isLoading,r=(0,v.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.containers"),[]),n=(0,v.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.initContainers"),[]),l=(0,h.default)(r,n);return _.default.createElement(I.default,{volumes:t,volume:this.selectVolume,namespace:this.namespace,module:this.props.module,containers:l,onSave:this.handleVolume,onCancel:this.resetState,isLoading:a,checkVolumeNameExist:this.checkVolumeNameExist,collectSavedLog:e})}},{key:"renderConfig",value:function(){var e=this.props,t=e.isFederated,a=e.projectDetail,r=(0,v.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.containers"),[]),n=(0,v.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.initContainers"),[]),l=(0,h.default)(r,n);return _.default.createElement(A.default,{volume:this.selectVolume,containers:l,cluster:this.cluster,namespace:this.namespace,onSave:this.handleVolume,onCancel:this.resetState,isFederated:t,projectDetail:a,checkVolumeNameExist:this.checkVolumeNameExist})}},{key:"renderVolumeTemplate",value:function(){var e=this.props.cluster,t=this.state.collectSavedLog,a=(0,v.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.containers"),[]),r=(0,v.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.initContainers"),[]),n=(0,h.default)(a,r),l=(0,v.default)(this.formTemplate,"metadata.namespace","");return _.default.createElement(j.default,{volume:this.selectVolume,containers:n,cluster:e,namespace:l,onSave:this.handleVolumeTemplate,onCancel:this.resetState,checkVolumeNameExist:this.checkVolumeNameExist,collectSavedLog:t})}},{key:"handleLogToggle",value:function(){var e=this;this.setState((function(e){return{collectSavedLog:"true"===e.collectSavedLog?"false":"true"}}),(function(){(0,y.default)(e.fedFormTemplate,e.collectSavedLogPath,e.state.collectSavedLog),"false"===e.state.collectSavedLog&&(0,g.default)(e.fedFormTemplate,e.logPathPrefix)}))}},{key:"renderToolTipContent",value:function(){return _.default.createElement("div",null,_.default.createElement("p",null,t("COLLECT_LOGS_ON_VOLUMES_DESC")))}},{key:"renderToggle",value:function(e){var t=this.state.collectSavedLog;return _.default.createElement("span",null,_.default.createElement(k.Toggle,{disabled:e,checked:"true"===t,onChange:this.handleLogToggle}))}},{key:"renderTitle",value:function(){return _.default.createElement("div",{className:"font-bold margin-b8 relative"},_.default.createElement("span",null,t("STORAGE_SETTINGS")),globals.app.hasClusterModule(this.cluster,"logging")&&_.default.createElement("div",{className:M.default.toggle},this.projectEnableCollectingFileLog?this.renderToggle():_.default.createElement(k.Tooltip,{content:t.html("PROJECT_COLLECT_SAVED_DISABLED_DESC")},this.renderToggle(!0)),_.default.createElement("span",{className:"text-secondary align-middle"}," ",t("COLLECT_LOGS_ON_VOLUMES")," "),_.default.createElement(k.Tooltip,{content:this.renderToolTipContent()},_.default.createElement(k.Icon,{name:"question"}))))}},{key:"renderList",value:function(){var e=this.props,a=e.formRef,r=e.formProps,n=void 0===r?{}:r,u=e.module,o=e.hideVolumeSetting,i=void 0!==o&&o,c=this.state.collectSavedLog,s=(0,O.toJS)(this.store.list.data),f=this.store.list.isLoading,d=(0,v.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.containers"),[]),p=(0,v.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.initContainers"),[]),m=(0,h.default)(d,p),y=0===(0,v.default)(this.fedFormTemplate,"".concat(this.prefix,"spec.volumes"),[]).length&&0===(0,v.default)(this.fedFormTemplate,"spec.volumeClaimTemplates",[]).length,g=(0,C.safeParseJSON)((0,v.default)(this.fedFormTemplate,this.logPathPrefix,[])),b="statefulsets"===u;return _.default.createElement(k.Form,(0,l.default)({data:this.fedFormTemplate,ref:a},n),this.renderTitle(),"true"===c&&y&&_.default.createElement(k.Alert,{className:"margin-b12",icon:"information",type:"warning",message:t(b?"PVC_OR_TEMPLATE_EMPTY":"PVC_EMPTY")}),_.default.createElement("div",{className:M.default.volumes},b&&!i&&_.default.createElement(k.Form.Item,null,_.default.createElement(x.default,{prefix:this.prefix,name:"spec.volumeClaimTemplates",containers:m,onShowAddVolume:this.showVolumeTemplate,onShowEdit:this.showEditVolumeTemplate,collectSavedLog:c,logPath:g})),_.default.createElement(k.Form.Item,null,_.default.createElement(N.default,{prefix:this.prefix,name:"".concat(this.prefix,"spec.volumes"),volumes:s,containers:m,loading:f,onShowVolume:this.showVolume,onShowConfig:this.showConfig,onShowEdit:this.showEditVolume,collectSavedLog:c,logPath:g}))))}},{key:"render",value:function(){var e=null;switch(this.state.state){case"ShowVolume":e=this.renderVolume();break;case"ShowConfig":e=this.renderConfig();break;case"ShowVolumeTemplate":e=this.renderVolumeTemplate();break;default:e=this.renderList()}return e}},{key:"prefix",get:function(){return this.props.prefix||"spec.template."}},{key:"cluster",get:function(){return this.props.cluster}},{key:"namespace",get:function(){return this.props.namespace||(0,v.default)(this.formTemplate,"metadata.namespace","")}},{key:"collectSavedLogPath",get:function(){return"".concat(this.prefix,'metadata.annotations["kubesphere.io/collectSavedLog"]')}},{key:"logPathPrefix",get:function(){return"".concat(this.prefix,'metadata.annotations["logging.kubesphere.io/logsidecar-config"]')}},{key:"projectEnableCollectingFileLog",get:function(){return"enabled"===(0,v.default)(this.projectStore.detail,'labels["logging.kubesphere.io/logsidecar-injection"]')}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,v.default)(t,R.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,v.default)(this.formTemplate,"spec.template"):this.formTemplate}},{key:"selectVolume",get:function(){return U({},this.state.selectVolume)}}]),r}(_.default.Component),q=V;a.Component=q;var B=(0,S.observer)(V);a.default=B},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(19)),u=r(a(20)),o=r(a(18));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var c=function(e){(0,l.default)(a,e);var t=i(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).resourceName="node",e.getApi=function(){return"".concat(e.apiVersion,"/nodes")},e}return a}(r(a(768)).default);t.default=c},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1790)).default;t.default=n},,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p,m,h,v,y,g,b,E,_,O,S=r(a(49)),k=r(a(21)),C=r(a(56)),R=r(a(50)),w=r(a(91)),P=r(a(12)),D=r(a(13)),T=r(a(135)),N=r(a(19)),I=r(a(20)),A=r(a(18)),x=r(a(74)),j=(r(a(92)),r(a(190))),M=r(a(23)),L=r(a(16)),U=r(a(73)),F=r(a(32)),V=r(a(185)),q=a(821),B=a(5),z=a(37),G=r(a(195)),H=r(a(788));function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){(0,k.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,A.default)(e);if(t){var n=(0,A.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,I.default)(this,a)}}var J={headers:{"content-type":"application/x-www-form-urlencoded"}},Q=(n=function(e){(0,N.default)(ce,e);var t,a,r,n,k,I,A,x,H,Y,Q,X,Z,$,ee,te,ae,re,ne,le,ue,oe,ie=W(ce);function ce(){var e;(0,P.default)(this,ce);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=ie.call.apply(ie,[this].concat(a))).module="pipelines",(0,w.default)(e,"pipelineConfig",l,(0,T.default)(e)),(0,w.default)(e,"originalList",u,(0,T.default)(e)),(0,w.default)(e,"list",o,(0,T.default)(e)),(0,w.default)(e,"branchList",i,(0,T.default)(e)),(0,w.default)(e,"activityList",c,(0,T.default)(e)),(0,w.default)(e,"pullRequestList",s,(0,T.default)(e)),(0,w.default)(e,"credentialsList",f,(0,T.default)(e)),(0,w.default)(e,"detail",d,(0,T.default)(e)),(0,w.default)(e,"isLoading",p,(0,T.default)(e)),(0,w.default)(e,"notFound",m,(0,T.default)(e)),(0,w.default)(e,"repositoryLog",h,(0,T.default)(e)),(0,w.default)(e,"pipelineJsonData",v,(0,T.default)(e)),(0,w.default)(e,"branchDetail",y,(0,T.default)(e)),(0,w.default)(e,"jenkinsfile",g,(0,T.default)(e)),(0,w.default)(e,"devops",b,(0,T.default)(e)),(0,w.default)(e,"devopsName",E,(0,T.default)(e)),(0,w.default)(e,"setPipelineConfig",_,(0,T.default)(e)),(0,w.default)(e,"setSelectRowKeys",O,(0,T.default)(e)),e.saveAsFile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default.txt",a=new Blob([e],{type:"text/plain;charset=utf-8"});(0,q.saveAs)(a,t)},e}return(0,D.default)(ce,[{key:"getPipelineUrl",value:function(e){var t=e.cluster,a=e.devops,r=e.name;return"".concat(this.getDevopsUrlV2({cluster:t,devops:a||this.devops}),"pipelines/").concat(decodeURIComponent(r),"/")}},{key:"fetchList",value:(oe=(0,R.default)(S.default.mark((function e(){var t,a,r,n,l,u,o,i,c,s,f,d,p,m,h=this,v=arguments;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},a=t.devops,t.workspace,r=t.devopsName,n=t.silent,l=t.cluster,u=(0,C.default)(t,["devops","workspace","devopsName","silent","cluster"]),n||(this.list.isLoading=!0),o=u.page,i=u.limit,c=u.name,s=u.filter,f=c?"".concat(encodeURIComponent(c)):void 0,d="".concat(this.getBaseUrl({cluster:l,devops:a}),"pipelines"),e.next=7,request.get(d,{page:o||1,limit:10,name:f,filter:s||void 0},{params:K({},u)});case 7:p=e.sent,m=p.items.map((function(e){return K({},h.mapper(e))})),this.setDevops(a),this.devopsName=r,this.list={data:m||[],total:p.totalItems||0,limit:parseInt(i,10)||10,page:parseInt(o,10)||1,filters:(0,j.default)(u,"devops"),selectedRowKeys:[],isLoading:!1};case 12:case"end":return e.stop()}}),e,this)}))),function(){return oe.apply(this,arguments)})},{key:"fetchDetail",value:(ue=(0,R.default)(S.default.mark((function e(t){var a,r,n,l,u,o;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.name,n=t.isSilent,l=t.devops,n||(this.isLoading=!0),e.next=4,request.get("".concat(this.getBaseUrl({devops:l,cluster:a})).concat(this.module,"/").concat(r));case 4:return u=e.sent,o=this.mapper(u),this.setPipelineConfig(u),this.detail=o,this.isLoading=!1,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return ue.apply(this,arguments)})},{key:"checkPipelineName",value:(le=(0,R.default)(S.default.mark((function e(t){var a,r,n;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.cluster,n=t.devops,e.next=3,request.get(this.getPipelineUrl({cluster:r,name:a,devops:n}),{},{headers:{"x-check-exist":!0}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return le.apply(this,arguments)})},{key:"getJenkinsFile",value:(ne=(0,R.default)(S.default.mark((function e(t){var a,r,n,l,u;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.cluster,r=t.name,n=t.devops,this.pipelineJsonData.isLoading=!0,l=decodeURIComponent(r),!(0,F.default)(this.detail)){e.next=6;break}return e.next=6,this.fetchDetail({cluster:a,name:l,devops:n});case 6:return this.jenkinsfile=(0,L.default)(this.pipelineConfig,"spec.pipeline.jenkinsfile",""),e.next=9,this.convertJenkinsFileToJson((0,B.toJS)(this.jenkinsfile),a);case 9:u=e.sent,this.pipelineJsonData={pipelineJson:u,isLoading:!1};case 11:case"end":return e.stop()}}),e,this)}))),function(e){return ne.apply(this,arguments)})},{key:"convertJenkinsFileToJson",value:(re=(0,R.default)(S.default.mark((function e(t,a){var r;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,request.post("".concat(this.getDevopsUrlV2({cluster:a}),"tojson"),{jenkinsfile:t},J);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return re.apply(this,arguments)})},{key:"getPullRequest",value:(ae=(0,R.default)(S.default.mark((function e(t){var a,r,n,l,u,o,i;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.name,r=t.devops,t.workspace,n=t.cluster,l=(0,C.default)(t,["name","devops","workspace","cluster"]),u=decodeURIComponent(a),o=l.page,!(0,F.default)(this.detail)){e.next=6;break}return e.next=6,this.fetchDetail({name:u,devops:r});case 6:return e.next=8,request.get("".concat(this.getBaseUrl({cluster:n,namespace:r}),"pipelines/").concat(decodeURIComponent(a),"/branches"),{filter:"pull-requests",page:o||1,limit:10});case 8:i=e.sent,Array.isArray(i.items)&&i.items.forEach((function(e){e.id=e.latestRun.endTime})),this.pullRequestList={data:i.items||[],total:i.totalItems||0,limit:10,page:parseInt(o,10)||1,filters:(0,j.default)(l,"devops"),isLoading:!1,selectedRowKeys:[]};case 11:case"end":return e.stop()}}),e,this)}))),function(e){return ae.apply(this,arguments)})},{key:"getBranches",value:(te=(0,R.default)(S.default.mark((function e(t){var a,r,n,l,u,o,i,c;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.cluster,r=t.devops,n=t.name,l=t.branch,u=(0,C.default)(t,["cluster","devops","name","branch"]),o=decodeURIComponent(n),i=u.page,!(0,F.default)(this.detail)){e.next=6;break}return e.next=6,this.fetchDetail({cluster:a,name:o,devops:r});case 6:return e.next=8,request.get("".concat(this.getBaseUrl({cluster:a,namespace:r}),"pipelines/").concat(decodeURIComponent(n),"/branches"),{filter:"origin",page:i||1,limit:10,branch:encodeURIComponent(l)});case 8:c=e.sent,this.branchList={data:c.items||[],limit:10,total:c.totalItems||0,page:parseInt(i,10)||1,filters:(0,j.default)(u,"devops"),isLoading:!1,selectedRowKeys:[]};case 10:case"end":return e.stop()}}),e,this)}))),function(e){return te.apply(this,arguments)})},{key:"getActivities",value:(ee=(0,R.default)(S.default.mark((function e(t){var a,r,n,l,u,o,i,c,s,f,d,p;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.name,r=t.branch,n=t.devops,l=t.cluster,u=t.backward,o=void 0!==u&&u,i=(0,C.default)(t,["name","branch","devops","cluster","backward"]),a=decodeURIComponent(a),c=i.page,s=this.activityList.limit,f=void 0===s?10:s,!(0,F.default)(this.detail)){e.next=7;break}return e.next=7,this.fetchDetail({cluster:l,name:a,devops:n});case 7:return d={page:c||1,limit:f,branch:r,backward:o},c<0&&(delete d.page,delete d.limit),e.next=11,request.get("".concat(this.getBaseUrl({cluster:l,namespace:n}),"pipelines/").concat(a,"/pipelineruns"),K({},d));case 11:return p=e.sent,(0,M.default)(p)&&(p=p.filter((function(e){return e._links}))),!1===o&&!(0,F.default)(p)&&(0,M.default)(p.items)&&(p.items=p.items.map((function(e){return K(K({},(0,z.safeParseJSON)((0,L.default)(e,"metadata.annotations.['devops.kubesphere.io/jenkins-pipelinerun-status']"))),{},{uid:e.metadata.uid,_originData:e})}))),this.activityList={limit:f,data:p.items||[],total:p.totalItems||0,page:parseInt(c,10)||1,filters:(0,j.default)(i,"devops"),isLoading:!1,selectedRowKeys:[]},e.abrupt("return",p.items);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return ee.apply(this,arguments)})},{key:"getBranchDetail",value:($=(0,R.default)(S.default.mark((function e(t){var a,r,n,l,u;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.devops,r=t.cluster,n=t.name,l=t.branch,e.prev=1,e.next=4,request.get("".concat(this.getBaseUrl({cluster:r,namespace:a}),"pipelines/").concat(decodeURIComponent(n),"/branches/").concat(encodeURIComponent(l)));case 4:return(u=e.sent).name&&(this.branchDetail=u),e.abrupt("return",u);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return $.apply(this,arguments)})},{key:"handleActivityReplay",value:(Z=(0,R.default)(S.default.mark((function e(t){var a,r,n,l;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.devops,n=t.name,l=t.cluster,e.next=3,request.post("".concat(this.getPipelineUrl({cluster:l,devops:r,name:n})).concat(a,"/replay/"));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return Z.apply(this,arguments)})},{key:"handleActivityStop",value:(X=(0,R.default)(S.default.mark((function e(t){var a,r,n,l;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.devops,n=t.name,l=t.cluster,e.next=3,request.post("".concat(this.getPipelineUrl({cluster:l,devops:r,name:n})).concat(a,"/stop/?blocking=true&timeOutInSecs=10"));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return X.apply(this,arguments)})},{key:"runBranch",value:(Q=(0,R.default)(S.default.mark((function e(t){var a,r,n,l,u,o,i,c=this;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.devops,n=t.name,l=t.branch,u=t.parameters,o="".concat(this.getBaseUrl({cluster:a,namespace:r}),"pipelines/").concat(n,"/pipelineruns").concat(l?"?branch=".concat(encodeURIComponent(l)):""),i=(0,F.default)(u)?{parameters:[]}:{parameters:u},e.next=5,request.post(o,i).then((function(){setTimeout((function(){c.fetchDetail({cluster:a,devops:r,name:n,isSilent:!0})}),1e3)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return Q.apply(this,arguments)})},{key:"getPipeLineConfig",value:function(){var e=(0,V.default)((0,B.toJS)(this.pipelineConfig));return delete(e=K(K({},(0,B.toJS)(e.spec)),(0,B.toJS)(e))).spec,delete e.kind,delete e.apiVersion,e}},{key:"setDevops",value:function(e){this.devops=e}},{key:"createPipeline",value:(Y=(0,R.default)(S.default.mark((function e(t){var a,r,n,l;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,r=t.devops,n=t.cluster,a.kind="Pipeline",a.apiVersion="devops.kubesphere.io/v1alpha3",l="".concat(this.getBaseUrl({devops:r,cluster:n}),"pipelines"),e.next=6,request.post(l,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return Y.apply(this,arguments)})},{key:"updatePipeline",value:(H=(0,R.default)(S.default.mark((function e(t){var a,r,n,l,u;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.data,n=t.devops,r.kind="Pipeline",r.apiVersion="devops.kubesphere.io/v1alpha3",l="".concat(this.getBaseUrl({devops:n,cluster:a}),"pipelines/").concat(r.metadata.name),e.next=6,request.put(l,r);case 6:return u=e.sent,this.setPipelineConfig(u),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return H.apply(this,arguments)})},{key:"updateJenkinsFile",value:function(e,t){var a=(0,V.default)((0,B.toJS)(this.pipelineConfig));return(0,U.default)(a,"spec.pipeline.jenkinsfile",e),this.updatePipeline({data:a,devops:t.devops,cluster:t.cluster})}},{key:"delete",value:(x=(0,R.default)(S.default.mark((function e(t){var a,r,n,l;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.devops,n=t.cluster,l="".concat(this.getBaseUrl({devops:r,cluster:n}),"pipelines/").concat(a),e.next=4,request.delete(l);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"scanRepository",value:(A=(0,R.default)(S.default.mark((function e(t){var a,r,n,l;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.devops,r=t.name,n=t.cluster,l={},e.next=4,request.defaults({method:"POST",url:"".concat(this.getPipelineUrl({cluster:n,devops:a||this.devops,name:r||this.detail.name}),"scan"),options:l,handler:function(e){return e.text().then((function(){if(e.redirected)return"Scan success"}))}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"getRepoScanLogs",value:(I=(0,R.default)(S.default.mark((function e(t){var a,r,n,l;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.devops,r=t.name,n=t.cluster,e.next=3,request.get("".concat(this.getPipelineUrl({cluster:n,name:r,devops:a}),"consolelog"));case 3:l=e.sent,this.repositoryLog=l;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"checkCron",value:(k=(0,R.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("".concat(this.getDevopsUrlV2(),"check/cron?value=").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"checkScriptCompile",value:(n=(0,R.default)(S.default.mark((function e(t){var a,r,n,l;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.devops,r=t.pipeline,n=t.value,l=t.cluster,e.abrupt("return",this.submitting(request.post("".concat(this.getPipelineUrl({cluster:l,name:r,devops:a}),"checkScriptCompile"),{value:n},J)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getBranchLists",value:(r=(0,R.default)(S.default.mark((function e(t){var a,r,n,l,u;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.devops,r=t.name,t.workspace,n=t.cluster,l=(0,C.default)(t,["devops","name","workspace","cluster"]),u=l.page,e.next=4,request.get("".concat(this.getPipelineUrl({cluster:n,name:r,devops:a}),"branches/"),{filter:"origin",start:10*(u-1)||0,limit:10});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getPipelineTemplateList",value:(a=(0,R.default)(S.default.mark((function e(){var t,a,r,n;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="zh"===(0,G.default)("lang")?"ZH":"EN",e.next=3,request.get("".concat(this.getBaseUrl(),"clustertemplates?limit=100"));case 3:return a=e.sent,r=a.items,n=(void 0===r?[]:r).map((function(e){var a={},r=(0,L.default)(e,"metadata.annotations",{}),n=r["devops.kubesphere.io/icon"];return a.type=e.metadata.name,a.desc=r["devops.kubesphere.io/description".concat(t)]||r["devops.kubesphere.io/descriptionEN"],a.title=r["devops.kubesphere.io/displayName".concat(t)]||r["devops.kubesphere.io/displayNameEN"]||r.displayNameEN,a.image=n&&n.indexOf("http")>-1?n:"/assets/pipeline/".concat(n),a.parameters=(0,L.default)(e,"spec.parameters",[]),a})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getTempleJenkins",value:(t=(0,R.default)(S.default.mark((function e(t,a){var r,n;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.post("".concat(this.getBaseUrl(),"clustertemplates/").concat(t,"/render"),a);case 2:return r=e.sent,n=(0,L.default)(r,'metadata.annotations["devops.kubesphere.io/render-result"]',""),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})}]),ce}(H.default),l=(0,x.default)(n.prototype,"pipelineConfig",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,x.default)(n.prototype,"originalList",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,x.default)(n.prototype,"list",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,order:"",reverse:!1,filters:{},isLoading:!0}}}),i=(0,x.default)(n.prototype,"branchList",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,order:"",reverse:!1,filters:{},isLoading:!0}}}),c=(0,x.default)(n.prototype,"activityList",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,order:"",reverse:!1,filters:{},isLoading:!0}}}),s=(0,x.default)(n.prototype,"pullRequestList",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,order:"",reverse:!1,filters:{},isLoading:!0,selectedRowKeys:[]}}}),f=(0,x.default)(n.prototype,"credentialsList",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],total:0,isLoading:!0}}}),d=(0,x.default)(n.prototype,"detail",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=(0,x.default)(n.prototype,"isLoading",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=(0,x.default)(n.prototype,"notFound",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=(0,x.default)(n.prototype,"repositoryLog",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=(0,x.default)(n.prototype,"pipelineJsonData",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pipelineJson:{},isLoading:!0}}}),y=(0,x.default)(n.prototype,"branchDetail",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=(0,x.default)(n.prototype,"jenkinsfile",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=(0,x.default)(n.prototype,"devops",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=(0,x.default)(n.prototype,"devopsName",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,x.default)(n.prototype,"fetchList",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,x.default)(n.prototype,"fetchDetail",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),_=(0,x.default)(n.prototype,"setPipelineConfig",[B.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.pipelineConfig=t}}}),O=(0,x.default)(n.prototype,"setSelectRowKeys",[B.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.list.selectedRowKeys.replace(t)}}}),(0,x.default)(n.prototype,"checkPipelineName",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"checkPipelineName"),n.prototype),(0,x.default)(n.prototype,"getJenkinsFile",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"getJenkinsFile"),n.prototype),(0,x.default)(n.prototype,"convertJenkinsFileToJson",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"convertJenkinsFileToJson"),n.prototype),(0,x.default)(n.prototype,"getPullRequest",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"getPullRequest"),n.prototype),(0,x.default)(n.prototype,"getBranches",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"getBranches"),n.prototype),(0,x.default)(n.prototype,"getActivities",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"getActivities"),n.prototype),(0,x.default)(n.prototype,"getBranchDetail",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"getBranchDetail"),n.prototype),(0,x.default)(n.prototype,"getPipeLineConfig",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"getPipeLineConfig"),n.prototype),(0,x.default)(n.prototype,"setDevops",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"setDevops"),n.prototype),(0,x.default)(n.prototype,"createPipeline",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"createPipeline"),n.prototype),(0,x.default)(n.prototype,"updatePipeline",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"updatePipeline"),n.prototype),(0,x.default)(n.prototype,"updateJenkinsFile",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"updateJenkinsFile"),n.prototype),(0,x.default)(n.prototype,"delete",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"delete"),n.prototype),(0,x.default)(n.prototype,"scanRepository",[B.action],Object.getOwnPropertyDescriptor(n.prototype,"scanRepository"),n.prototype),n);t.default=Q},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m,h,v,y,g,b=n(r(91)),E=n(r(12)),_=n(r(13)),O=n(r(135)),S=n(r(19)),k=n(r(20)),C=n(r(18)),R=n(r(74)),w=(n(r(92)),n(r(136))),P=n(r(0)),D=n(r(1)),T=n(r(3)),N=r(5),I=r(70),A=n(r(16)),x=r(25),j=n(r(1125)),M=n(r(1126)),L=r(863),U=n(r(2414));function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,C.default)(e);if(t){var n=(0,C.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,k.default)(this,a)}}var V=function(e){var t=e.match(/(\d+)(\w+)/),a=(0,w.default)(t,3),r=a[1],n=void 0===r?0:r,l=a[2];return n*{s:1,m:60,h:3600,d:86400}[void 0===l?"s":l]},q=(0,I.observer)((g=y=function(e){(0,S.default)(r,e);var a=F(r);function r(){var e;(0,E.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return e=a.call.apply(a,[this].concat(n)),(0,b.default)(e,"searchWord",o,(0,O.default)(e)),(0,b.default)(e,"showDropDown",i,(0,O.default)(e)),e.duration=(0,N.observable)({end:Math.ceil(Date.now()/1e3),start:Math.ceil(Date.now()/1e3)-1800,step:"1m"}),e.inputRef=P.default.createRef(),(0,b.default)(e,"removeParam",c,(0,O.default)(e)),(0,b.default)(e,"changeSearchWord",s,(0,O.default)(e)),e.changeInputKey=function(t){13===t.keyCode&&e.handlerInputEnter()},(0,b.default)(e,"hiddenDropDown",f,(0,O.default)(e)),(0,b.default)(e,"changeNextQueryKey",d,(0,O.default)(e)),(0,b.default)(e,"showDurationMenu",p,(0,O.default)(e)),(0,b.default)(e,"removeParamsDuration",m,(0,O.default)(e)),(0,b.default)(e,"cancelChangeTime",h,(0,O.default)(e)),e.focus=function(){e.inputRef.current.focus()},(0,b.default)(e,"handleTimeChange",v,(0,O.default)(e)),e}return(0,_.default)(r,[{key:"handlerInputEnter",value:function(){var e=this.props,t=e.params,a=e.dropDownItems,r=e.onChange;if(this.searchWord.trim()){var n=t.nextParamsKey,l=this.searchWord.match(/([^:]+):(.+)/)||[],u=(0,w.default)(l,3),o=u[1],i=u[2],c=this.findParamKeyInDropDown(o);n?this.props.params.query.push({key:n,value:this.searchWord}):c?this.props.params.query.push({key:c,value:i}):this.props.params.query.push({key:Object.keys(a)[0],value:this.searchWord}),this.searchWord="",this.showDropDown=!0,t.nextParamsKey="",this.focus(),r()}}},{key:"findParamKeyInDropDown",value:function(e){return(Object.entries(this.props.dropDownItems).find((function(t){return(0,w.default)(t,2)[1].text===e}))||[])[0]}},{key:"render",value:function(){var e=this.props,t=e.enableClear,a=e.className;return P.default.createElement("div",{className:(0,T.default)(U.default.container,a),onClick:this.focus},this.renderParamsItems(),this.renderParamsDuration(),this.renderInput(),t&&this.renderClear(),this.showDurationDropDown&&this.renderTimeDuration())}},{key:"renderTimeDuration",value:function(){return P.default.createElement("div",{className:U.default.durationDropdown},P.default.createElement(j.default,{step:this.duration.step,times:this.durationTimes,onChange:this.handleTimeChange}),P.default.createElement(M.default,{className:U.default.customRange,step:this.duration.step,times:this.durationTimes,onSubmit:this.handleTimeChange,onCancel:this.cancelChangeTime,showStep:this.props.showStep}))}},{key:"renderParamsDuration",value:function(){var e=this.props.params,a=e.start,r=e.end,n=e.durationAlias;return a?P.default.createElement("span",{className:U.default.param,key:"_duration"},P.default.createElement("span",null,n?t("TIME_RANGE_LAST",{value:(0,L.getTimeLabel)(n)}):t("TIME_RANGE_RANGE",{startTime:(0,L.getDateStr)(a),endTime:(0,L.getDateStr)(r)})),P.default.createElement("span",{onClick:this.removeParamsDuration},P.default.createElement(x.Icon,{name:"close",className:U.default.removeParam,type:"light"}))):null}},{key:"renderParamsItems",value:function(){var e=this,t=this.props,a=t.dropDownItems;return t.params.query.map((function(t,r){var n=t.key,l=t.value;return n?P.default.createElement("span",{className:U.default.param,key:r},P.default.createElement("span",null,(0,A.default)(a,"".concat(n,".text")),": ",l),P.default.createElement("span",{"data-index":r,onClick:e.removeParam},P.default.createElement(x.Icon,{name:"close",className:U.default.removeParam,type:"light"}))):null}))}},{key:"renderFilterKey",value:function(){return this.currentParamText?P.default.createElement("span",{className:U.default.currentParam},this.currentParamText,":"):null}},{key:"renderInput",value:function(){return P.default.createElement("div",{className:U.default.input},this.renderFilterKey(),P.default.createElement("input",{type:"text",placeholder:t("SEARCH"),value:this.searchWord,ref:this.inputRef,disabled:this.showDurationDropDown,onChange:this.changeSearchWord,onFocus:this.changeSearchWord,onBlur:this.hiddenDropDown,onKeyUp:this.changeInputKey}),this.showDropDown&&this.renderDropdownContent())}},{key:"renderDropdownContent",value:function(){var e=this,a=this.props,r=a.dropDownItems,n=a.enableTimeDuration,l=a.dropdownClass,u=a.iconThem;return P.default.createElement("div",{className:(0,T.default)(U.default.dropdown,l)},Object.entries(r).map((function(t){var a=(0,w.default)(t,2),r=a[0],n=a[1];return P.default.createElement("div",{className:U.default.dropdownItem,key:r,onMouseDown:e.changeNextQueryKey,"data-query":r},P.default.createElement("span",{className:U.default.icon},n.imgUrl?P.default.createElement("img",{height:"100%",src:n.imgUrl}):P.default.createElement(x.Icon,{name:n.icon,type:u||"dark"})),P.default.createElement("span",null,n.text))})),n&&P.default.createElement("div",{className:U.default.dropdownItem,onMouseDown:this.showDurationMenu,key:"_time"},P.default.createElement("span",{className:U.default.icon},P.default.createElement(x.Icon,{name:"clock"})),P.default.createElement("span",null,t("TIME_RANGE_SCAP"))))}},{key:"renderClear",value:function(){}},{key:"durationTimes",get:function(){return(this.duration.end-this.duration.start)/V(this.duration.step)}},{key:"showDurationDropDown",get:function(){return this.props.enableTimeDuration&&"_time"===this.props.params.nextParamsKey}},{key:"currentParamText",get:function(){var e=this.props,a=e.dropDownItems,r=e.params;return"_time"===r.nextParamsKey?t("TIME_RANGE_SCAP"):(0,A.default)(a,"".concat(r.nextParamsKey,".text"))}}]),r}(P.default.Component),y.propType={params:D.default.object.isRequired,onChange:D.default.func,dropDownItems:D.default.object.isRequired,enableClear:D.default.bool,enableTimeDuration:D.default.bool},y.defaultProps={enableTimeDuration:!0,enableClear:!1,onChange:function(){}},u=g,o=(0,R.default)(u.prototype,"searchWord",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=(0,R.default)(u.prototype,"showDropDown",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,R.default)(u.prototype,"durationTimes",[N.computed],Object.getOwnPropertyDescriptor(u.prototype,"durationTimes"),u.prototype),(0,R.default)(u.prototype,"showDurationDropDown",[N.computed],Object.getOwnPropertyDescriptor(u.prototype,"showDurationDropDown"),u.prototype),(0,R.default)(u.prototype,"currentParamText",[N.computed],Object.getOwnPropertyDescriptor(u.prototype,"currentParamText"),u.prototype),c=(0,R.default)(u.prototype,"removeParam",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=e.props,r=a.onChange,n=a.params,l=(0,A.default)(t,"currentTarget.dataset.index");n.query[l]={},r()}}}),s=(0,R.default)(u.prototype,"changeSearchWord",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.target.value,r=e.props.params;e.showDropDown=!r.nextParamsKey||!a,e.searchWord=a}}}),(0,R.default)(u.prototype,"handlerInputEnter",[N.action],Object.getOwnPropertyDescriptor(u.prototype,"handlerInputEnter"),u.prototype),f=(0,R.default)(u.prototype,"hiddenDropDown",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showDropDown=!1}}}),d=(0,R.default)(u.prototype,"changeNextQueryKey",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.preventDefault();var a=(0,A.default)(t,"currentTarget.dataset.query");e.props.params.nextParamsKey=a,e.focus()}}}),p=(0,R.default)(u.prototype,"showDurationMenu",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.params.nextParamsKey="_time",e.searchWord="",e.showDropDown=!1}}}),m=(0,R.default)(u.prototype,"removeParamsDuration",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props,a=t.params,r=t.onChange;a.start="",a.end="",a.step="",r()}}}),h=(0,R.default)(u.prototype,"cancelChangeTime",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.params.nextParamsKey=""}}}),v=(0,R.default)(u.prototype,"handleTimeChange",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.step,r=t.start,n=t.end,l=t.lastTime,u=e.props,o=u.params,i=u.onChange;o.step=a,o.durationAlias=l,l?(o.end=Math.ceil(Date.now()/1e3),o.start=Math.ceil(Date.now()/1e3)-V(l)):(o.end=n,o.start=r),o.nextParamsKey="",i()}}}),l=u))||l;a.default=q},,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.COORD_COUNT=t.renderIntoCanvas=t.createViewedBoundsFunc=t.formatDuration=t.formatRelativeDate=t.isErrorSpan=t.isServerSpan=t.isClientSpan=t.spanHasTag=t.transformTraces=t.transformTraceItem=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(294)),o=r(a(137)),i=a(58),c=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,n.default)(this,e),this.value=t,this.children=a}return(0,l.default)(e,null,[{key:"iterFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a){return e(a.value,a,t)}}},{key:"searchFunction",value:function(t){return"function"==typeof t?t:function(a,r){return t instanceof e?r===t:a===t}}}]),(0,l.default)(e,[{key:"addChild",value:function(t){return this.children.push(t instanceof e?t:new e(t)),this}},{key:"find",value:function(t){if(e.iterFunction(e.searchFunction(t))(this))return this;for(var a=0;a<this.children.length;a++){var r=this.children[a].find(t);if(r)return r}return null}},{key:"getPath",value:function(t){var a=e.iterFunction(e.searchFunction(t));return function e(t,r){var n=r.concat([t]);if(a(t))return n;for(var l=0;l<t.children.length;l++){var u=e(t.children[l],n);if(u)return u}return null}(this,[])}},{key:"walk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],r=t;for(a.push({node:this,depth:r});a.length;){var n=a.pop(),l=n.node,u=n.depth;e(l.value,l,u),r=u+1;for(var o=l.children.length-1;o>=0;)a.push({node:l.children[o],depth:r}),o--}}},{key:"depth",get:function(){return this.children.reduce((function(e,t){return Math.max(t.depth+1,e)}),1)}},{key:"size",get:function(){var e=0;return this.walk((function(){return e++})),e}}]),e}(),s=function(e){var t=e.traceID;if(!t)return null;t=t.toLowerCase();var a=0,r=Number.MAX_SAFE_INTEGER,n=new Map,l=new Map;e.spans=e.spans.filter((function(e){return Boolean(e.startTime)}));for(var u=e.spans.length,o=0;o<u;o++){var i=e.spans[o],s=i.startTime,f=i.duration,d=i.processID,p=i.spanID;s<r&&(r=s),s+f>a&&(a=s+f);var m=n.get(p);null!=m?(n.set(p,m+1),p="".concat(p,"_").concat(m),i.spanID=p):n.set(p,1),i.process=e.processes[d],l.set(p,i)}var h=function(e){var t=new Map(e.spans.map((function(e){return[e.spanID,new c(e.spanID)]}))),a=new Map(e.spans.map((function(e){return[e.spanID,e]}))),r=new c("__root__");e.spans.forEach((function(e){var a=t.get(e.spanID);if(Array.isArray(e.references)&&e.references.length){var n=e.references[0],l=n.refType,u=n.spanID;if("CHILD_OF"!==l&&"FOLLOWS_FROM"!==l)throw new Error("Unrecognized ref type: ".concat(l));(t.get(u)||r).children.push(a)}else r.children.push(a)}));var n=function(e,t){var r=a.get(e.value),n=a.get(t.value);return+(r.startTime>n.startTime)||+(r.startTime===n.startTime)-1};return e.spans.forEach((function(e){var a=t.get(e.spanID);a.children.length>1&&a.children.sort(n)})),r.children.sort(n),r}(e),v=[],y={},g="";return h.walk((function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("__root__"!==e){var n=l.get(e);if(n){var u=n.process.serviceName;y[u]=(y[u]||0)+1,n.references&&n.references.length||(g="".concat(u,": ").concat(n.operationName)),n.relativeStartTime=n.startTime-r,n.depth=a-1,n.hasChildren=t.children.length>0,n.references.forEach((function(e){var t=l.get(e.spanID);t&&(e.span=t)})),v.push(n)}}})),{services:Object.keys(y).map((function(e){return{name:e,numberOfSpans:y[e]}})),spans:v,traceID:t,traceName:g,processes:e.processes,duration:a-r,startTime:r,endTime:a}};t.transformTraceItem=s;t.transformTraces=function(e){var t=e.map(s),a=0,r=0,n={};return t.forEach((function(e){e.duration&&(a=Math.max(a,e.duration)),e.services.forEach((function(e){n[e.name]||(n[e.name]=i.TRACING_COLORS_HEX[r++])}))})),t.forEach((function(e){a&&(e.durationPercent=100*e.duration/a),e.serviceColorMap=n})),(0,u.default)(t,"startTime").reverse()};var f=function(e,t,a){return!(!Array.isArray(a.tags)||!a.tags.length)&&a.tags.some((function(a){return a.key===e&&a.value===t}))};t.spanHasTag=f;var d=f.bind(null,"span.kind","client");t.isClientSpan=d;var p=f.bind(null,"span.kind","server");t.isServerSpan=p;var m=f.bind(null,"error",!0),h=f.bind(null,"error","true");t.isErrorSpan=function(e){return m(e)||h(e)};t.formatRelativeDate=function(e,t){var a=o.default.isMoment(e)?e:(0,o.default)(e),r=t?"MMMM":"MMM",n=new Date;if(n.getFullYear()!==a.year())return a.format("".concat(r," D, YYYY"));var l=a.month(),u=a.date(),i=n.getDate();return l===n.getMonth()&&u===i?"Today":(n.setDate(i-1),l===n.getMonth()&&u===n.getDate()?"Yesterday":a.format("".concat(r," D")))};t.formatDuration=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"microseconds",a=e;"microseconds"===t&&(a=e/1e3);var r="ms";return a>=1e3&&(r="s",a/=1e3),a.toFixed(2)+r};t.createViewedBoundsFunc=function(e){var t=e.min,a=e.max,r=e.viewStart,n=e.viewEnd,l=a-t,u=t+r*l,o=a-(1-n)*l-u;return function(e,t){return{start:(e-u)/o,end:(t-u)/o}}};t.renderIntoCanvas=function(e,t,a,r){var n=new Map,l=(t.length<60?60:Math.min(t.length,200))-1,u=2*window.innerWidth;e.width=u,e.height=l;var o=Math.min(Math.max(2,(l-(1*t.length-1))/t.length),4),i=l/t.length,c=e.getContext("2d",{alpha:!1});c.fillStyle="#fff",c.fillRect(0,0,u,l);for(var s=0;s<t.length;s++){var f=t[s],d=f.valueWidth,p=f.valueOffset,m=f.serviceName,h=p/a*u,v=d/a*u;v<10&&(v=10);var y=n.get(m);y||(y="".concat(r(m)).concat("a0"),n.set(m,y)),c.fillStyle=y,c.fillRect(h,s*i,v,o)}};t.COORD_COUNT=4},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.data,r=e.module,n=((0,f.getWorkloadStatus)(a,r)||"").status;if(n.startsWith("S2I")){var p=n.slice(4);return o.default.createElement("div",{className:d.default.status},o.default.createElement(c.default,{type:p,name:t(s.S2I_STATUS_DESC[p]),flicker:!0}))}if("daemonsets"===r)return o.default.createElement("div",{className:d.default.status},o.default.createElement(c.default,{type:n,name:t(n),total:(0,l.default)(a,"status.desiredNumberScheduled",0),ready:(0,l.default)(a,"status.numberAvailable",0),flicker:!0}));return o.default.createElement("div",{className:d.default.status},o.default.createElement(c.default,{type:n,name:t(n.toUpperCase()),total:a.podNums,ready:a.readyPodNums,flicker:!0}),!(0,u.default)((0,l.default)(a,'annotations["kubesphere.io/relatedHPA"]'))&&o.default.createElement(i.Tooltip,{content:t("HPA_SET_TIP"),trigger:"hover"},o.default.createElement(i.Icon,{name:"timed-task"})))};var l=n(r(16)),u=n(r(32)),o=n(r(0)),i=r(25),c=n(r(729)),s=r(58),f=r(289),d=n(r(2717))},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(190)),h=r(25),v=n(r(1125)),y=n(r(1126)),g=r(863),b=n(r(2733));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var O=function(e){(0,i.default)(r,e);var a=_(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e)).handleToggle=function(){t.setState({visible:!t.state.visible},(function(){t.props.onToggle(t.state.visible)}))},t.hideSelector=function(){t.setState({visible:!1},(function(){t.props.onToggle(!1)}))},t.handleTimeChange=function(e){t.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({visible:!1},e),(function(){var a=(0,m.default)(e,["lastTime"]);t.props.onChange(a)}))};var n=e.step,o=e.times;return t.state={visible:!1,prevPropStep:n,step:n,prevPropTimes:o,times:o,start:"",end:"",lastTime:""},t}return(0,o.default)(r,[{key:"renderButtonText",value:function(){var e=this.state,a=e.step,r=e.times,n=e.start,l=e.end,u=e.lastTime,o=this.props.showStep,i=void 0===o||o;if(n&&l&&!u){var c="(".concat(t("Interval")," ").concat((0,g.getTimeLabel)(a),")");return"".concat((0,g.getDateStr)(n)," ~ ").concat((0,g.getDateStr)(l)," ").concat(i?c:"")}var s=(0,g.getTimeLabel)(u||(0,g.getLastTimeStr)(a,r));return t("LAST_TIME",{value:s})}},{key:"renderContent",value:function(){var e=this.state,t=e.step,a=e.times,r=this.props.showStep,n=void 0===r||r;return f.default.createElement("div",{className:b.default.content},f.default.createElement(v.default,{step:t,times:a,onChange:this.handleTimeChange}),f.default.createElement(y.default,{step:t,times:a,showStep:n,onSubmit:this.handleTimeChange,onCancel:this.hideSelector}))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.dark,r=e.arrowIcon;return f.default.createElement("div",{className:(0,p.default)(b.default.selector,t,(0,l.default)({},b.default.active,this.state.visible))},f.default.createElement("div",{className:(0,p.default)(b.default.mask,(0,l.default)({},b.default.active,this.state.visible)),onClick:this.hideSelector}),f.default.createElement(h.Button,{className:b.default.button,onClick:this.handleToggle},f.default.createElement(h.Icon,{type:a?"dark":"light",name:"timed-task",size:20}),f.default.createElement("p",null,this.renderButtonText()),f.default.createElement(h.Icon,{className:b.default.arrow,type:a?"dark":"light",name:r||"caret-down"})),f.default.createElement("div",{className:b.default.dropdown},this.renderContent()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.step!==t.prevPropStep||e.times!==t.prevPropTimes){var a=e.step,r=e.times;return{prevPropStep:a,step:a,prevPropTimes:r,times:r}}return null}}]),r}(f.default.PureComponent);a.default=O,O.propTypes={step:d.default.string,times:d.default.number,onChange:d.default.func,onToggle:d.default.func},O.defaultProps={step:"10m",times:30,onChange:function(){},onToggle:function(){}}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=l(r(0)),p=r(70),m=r(276),h=n(r(290)),v=r(25),y=n(r(723)),g=n(r(749)),b=n(r(637)),E=n(r(737)),_=n(r(2831));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,p.observer)(u=function(e){(0,c.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).fedStore=new E.default({module:e.props.module}),e.clusterStore=new b.default,e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,a=e.namespace;this.fedStore.fetchDetail({name:t,namespace:a}),this.clusterStore.fetchList({limit:-1})}},{key:"render",value:function(){var e=this.props,a=e.module,r=e.name,n=e.namespace,l=this.fedStore.detail.clusters,u=(0,h.default)(this.clusterStore.list.data,"name");return l?d.default.createElement(y.default,{title:t("CLUSTER_PL")},d.default.createElement(v.Alert,{type:"info",message:t("MULTI_CLUSTER_RESOURCE_TIP"),hideIcon:!0}),d.default.createElement("div",{className:_.default.clusters},l.map((function(e){return u[e.name]?d.default.createElement(m.Link,{key:e.name,className:_.default.cluster,to:"/clusters/".concat(e.name,"/projects/").concat(n,"/").concat(a,"/").concat(r)},d.default.createElement(g.default,{cluster:u[e.name],theme:"light",tagClass:"float-right"})):null})))):null}}]),r}(d.Component))||u;a.default=S},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=r(a(3)),d=r(a(2865));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.desc;return c.default.createElement("div",{className:(0,f.default)(d.default.wrapper,t)},c.default.createElement("div",null,c.default.createElement("img",{src:"/assets/empty-card.svg",alt:""})),c.default.createElement("div",null,c.default.createElement("p",{className:d.default.desc,dangerouslySetInnerHTML:{__html:a}}),this.props.children))}}]),a}(c.default.Component);t.default=m,m.propTypes={className:s.default.string,title:s.default.string,desc:s.default.string,onCreate:s.default.func}},,,,,,,,function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),u=n(a(13)),o=n(a(19)),i=n(a(20)),c=n(a(18)),s=r(a(0)),f=a(25),d=n(a(290)),p=a(58),m=n(a(1666));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(a,e);var t=h(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=(0,d.default)(this.props.clustersDetail,"name"),t=this.props,a=t.children,r=t.clusters,n=void 0===r?[]:r;return s.default.createElement("div",{className:m.default.wrapper},s.default.createElement("div",{className:m.default.tags},n.map((function(t){var r=e[t.name]||t;return s.default.createElement(f.Tag,{key:r.name,type:p.CLUSTER_GROUP_TAG_TYPE[r.group]},s.default.createElement(f.Icon,{name:p.CLUSTER_PROVIDER_ICON[r.provider]||"kubernetes",size:16,type:"light"}),a?a(r):r.name)}))))}}]),a}(s.Component);t.default=v},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=r(25),p=l(r(799)),m=l(r(1688));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,i.default)(r,e);var a=h(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).formRef=f.default.createRef(),e.handleSubmit=function(){var t=e.props.onOk,a=e.formRef.current;a&&a.validate((function(){t(a.getData())}))},e.handleCancel=function(){(0,e.props.showEdit)("")},e.handleClick=function(){var t=e.props,a=t.formData;(0,t.showEdit)(a)},e.stopPropagation=function(e){e.stopPropagation()},e}return(0,o.default)(r,[{key:"renderContent",value:function(){var e=this.props,t=e.formData,a=e.children;return f.default.createElement("div",{className:m.default.form,onClick:this.stopPropagation},f.default.createElement(d.Form,{ref:this.formRef,type:"inner",data:t},f.default.createElement("div",{className:m.default.formContent},a)),f.default.createElement(p.default,{className:m.default.confirm,onOk:this.handleSubmit,onCancel:this.handleCancel}))}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.selected,n=e.isEdit;return f.default.createElement(d.Dropdown,{visible:n,placement:"bottom",closeAfterClick:!1,content:this.renderContent(),modifiers:this.modifiers,always:n,onClick:this.handleClick},f.default.createElement("div",{onClick:this.stopPropagation},a,r&&f.default.createElement("span",{className:m.default.modify},f.default.createElement("span",null,t("EDIT")),f.default.createElement(d.Icon,{type:"light",size:20,name:"chevron-down"}))))}},{key:"modifiers",get:function(){return{computeStyle:{gpuAcceleration:!1}}}}]),r}(f.Component);a.default=v},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(1),p=n(r(3)),m=r(25),h=n(r(1691));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(r,e);var a=v(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={show:e.props.defaultShow||!1},e.toggle=function(){e.setState((function(e){return{show:!e.show}}))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.label,r=e.children,n=this.state.show;return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:h.default.toggle,onClick:this.toggle},f.default.createElement("a",null,f.default.createElement("span",{className:"align-middle"},t(a)," "),f.default.createElement(m.Icon,{name:n?"chevron-up":"chevron-down"}))),f.default.createElement("div",{className:(0,p.default)((0,l.default)({},h.default.children,!n))},r))}}]),r}(f.default.Component);a.default=y,y.propTypes={label:d.PropTypes.string},y.defaultProps={label:"ADVANCED_SETTINGS"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(19)),u=r(a(20)),o=r(a(18));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var c=function(e){(0,l.default)(a,e);var t=i(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).module="configmaps",e}return a}(r(a(277)).default);t.default=c},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(109)),l=r(a(21)),u=r(a(56)),o=r(a(12)),i=r(a(13)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=r(a(0)),p=r(a(1)),m=r(a(1752));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(a,e);var t=y(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).getReadOny=function(e){return"true"===e||"null"===e?e:"false"},e.getFormatValue=function(){var t=e.props,a=t.value;return t.containers.map((function(t){var r=a.find((function(e){return e.containerName===t.name}));if(!r)return{readOnly:"null",mountPath:""};r.containerName;var n=r.readOnly;return v(v({},(0,u.default)(r,["containerName","readOnly"])),{},{readOnly:e.getReadOny(String(n))})}))},e.handleItemChange=function(t,a){var r=e.props,l=r.value,u=r.onChange,o=l.find((function(e){return e.containerName===t}));u(o?l.map((function(e){return e.containerName===t?v(v({},o),a):e})):[].concat((0,n.default)(l),[a]))},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.containers,r=t.collectSavedLog,n=t.supportedAccessModes,l=this.getFormatValue();return d.default.createElement("div",null,a.map((function(t,a){return d.default.createElement(m.default,{key:t.name,value:l[a],container:t.name,onChange:e.handleItemChange.bind(e,t.name),supportedAccessModes:n,collectSavedLog:r})})))}}]),a}(d.default.Component);t.default=g,g.propTypes={name:p.default.string,containers:p.default.array,value:p.default.array,onChange:p.default.func},g.defaultProps={name:"",value:[],containers:[],onChange:function(){}}},,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageIcon=t.groovyToJS=t.updatePipelineParamsInSpec=t.updatePipelineParams=void 0;var n=r(a(21)),l=r(a(56)),u=r(a(73)),o=r(a(185));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s=function(e){for(var t in e)t.startsWith("enable_")&&!1===e[t]&&(delete e[t.slice(7)],e.git_source&&delete e.git_source[t.slice(7)],e.github_source&&delete e.github_source[t.slice(7)],e.bitbucket_server_source&&delete e.bitbucket_server_source[t.slice(7)],e.svn_source&&delete e.svn_source[t.slice(7)])};t.updatePipelineParams=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.multi_branch_pipeline,r=e.pipeline,n=(e.type,(0,l.default)(e,["multi_branch_pipeline","pipeline","type"]));t&&!n.description&&(n.description="");var u=(0,o.default)(n);if(u.metadata&&delete u.metadata,a&&(t?Object.assign(e.multi_branch_pipeline,u):n&&Object.assign(e.multi_branch_pipeline,n),e.type="multi-branch-pipeline",s(e.multi_branch_pipeline)),r&&(t?Object.assign(e.pipeline,u):Object.assign(e.pipeline,n),e.type="pipeline",s(e.pipeline)),!t)for(var i in n)"devopsName"!==i&&delete e[i]};t.updatePipelineParamsInSpec=function(e,t){e.multi_branch_pipeline&&(delete(e=(0,u.default)(e,"metadata.name",e.multi_branch_pipeline.name)).multi_branch_pipeline.metadata,e.spec={multi_branch_pipeline:c({},e.multi_branch_pipeline),type:e.type},delete e.multi_branch_pipeline),e.pipeline&&(delete(e=(0,u.default)(e,"metadata.name",e.pipeline.name)).pipeline.metadata,e.spec={pipeline:c({},e.pipeline),type:e.type},delete e.pipeline),delete e.type,delete e.description,e=(0,u.default)(e,"metadata.namespace",t)};t.groovyToJS=function(e){for(var t,a=/([\w-]*) ?: '?([\w-:/_.]*)'?/g,r={};null!==(t=a.exec(e));)t[1]&&(r[t[1]]=t[2]);return r};t.getLanguageIcon=function(e,t){return["java","gradle","javascript","php","python","golang","nodejs","jar","war","binary"].includes(e)?e:t}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(32)),v=n(r(879)),y=r(25),g=n(r(2088));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={inputValue:""},e.handleInputChange=function(t){e.setState({inputValue:t.target.value})},e.handleAdd=function(){var t=e.props,a=t.validate,r=t.onAdd,n=e.state.inputValue;a((0,v.default)(n))&&e.setState({inputValue:""},(function(){r((0,v.default)(n))}))},e.handleKeyUp=function(t){13===t.keyCode&&e.handleAdd()},e}return(0,i.default)(r,[{key:"renderInput",value:function(){var e=this.props,t=e.className,a=e.defaultSelectValue,r=e.options,n=e.onSelectChange,o=(0,u.default)(e,["className","defaultSelectValue","options","onSelectChange"]),i=this.state.inputValue;return(0,h.default)(r)?d.default.createElement(y.Input,(0,l.default)({value:i,onKeyUp:this.handleKeyUp,onChange:this.handleInputChange},o)):d.default.createElement("div",{className:(0,m.default)(g.default.selectWrapper,t)},d.default.createElement(y.Input,{className:g.default.selectInput,onChange:this.handleInputChange,value:i,onKeyUp:this.handleKeyUp}),d.default.createElement(y.Select,{className:g.default.select,defaultValue:a,options:r,onChange:n}))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title;return d.default.createElement("div",{className:a},r&&d.default.createElement("p",{className:g.default.title},r),d.default.createElement("div",{className:g.default.inputWrapper},this.renderInput(),d.default.createElement(y.Button,{className:"margin-l12",onClick:this.handleAdd},t("ADD"))))}}]),r}(d.default.Component);a.default=E,E.propTypes={title:p.default.string,defaultSelectValue:p.default.string,options:p.default.array,onSelectChange:p.default.func,onAdd:p.default.func,validate:p.default.func},E.defaultProps={title:"",defaultSelectValue:"",options:[],onAdd:function(){},onSelectChange:function(){},validate:function(){}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVIEW_PASS_ACTIONS=t.ACTION_TO_NAME=t.HANDLE_TYPE_TO_SHOW=t.ACTION_TO_STATUS=t.STATUS_TO_ACTION_ADMIN=t.STATUS_TO_ACTION=t.APP_STORE_ACTIONS=t.CAN_DELETE_STATUS=t.CAN_EDIT_STATUS=t.STATUS_TO_ICON=t.STATUS_TRANSFER_MAP=t.DEFAULT_QUERY_STATUS=void 0;t.DEFAULT_QUERY_STATUS="draft|submitted|rejected|in-review|passed|active|suspended";t.STATUS_TRANSFER_MAP={active:"active",suspended:"suspended",suspend:"suspending",submitted:"submitted",passed:"passed",draft:"draft",rejected:"rejected"};t.STATUS_TO_ICON={submitted:"review","in-review":"review",rejected:"suspended",active:"passed"};t.CAN_EDIT_STATUS=["draft","rejected"];t.CAN_DELETE_STATUS=["draft","rejected","passed","suspended"];t.APP_STORE_ACTIONS=["suspend","recover"];t.STATUS_TO_ACTION={draft:"submit",submitted:"cancel",rejected:"submit",passed:"release",active:"view"};t.STATUS_TO_ACTION_ADMIN={active:"suspend",suspended:"recover"};t.ACTION_TO_STATUS={suspend:"active",recover:"suspended"};t.HANDLE_TYPE_TO_SHOW={recover:"activate"};t.ACTION_TO_NAME={submit:"SUBMIT_FOR_REVIEW",cancel:"CANCEL_SUBMISSION",release:"RELEASE",view:"VIEW_IN_STORE",suspend:"SUSPEND",recover:"RELEASE"};t.REVIEW_PASS_ACTIONS=[{role:"isv",action:"review"},{role:"isv",action:"pass"},{role:"business",action:"review"},{role:"business",action:"pass"},{role:"technical",action:"review"},{role:"technical",action:"pass"}]},,,function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(136)),o=l(r(12)),i=l(r(13)),c=l(r(19)),s=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(137)),m=l(r(1)),h=l(r(3));r(1061);var v=l(r(900)),y=l(r(783)),g=l(r(772)),b=l(r(1058)),E=l(r(784)),_=r(725),O=l(r(2412));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=a.call.apply(a,[this].concat(l))).xTickFormatter=function(t){var a=e.props.interval.match(/\d+(\w+)/)||[],r=(0,u.default)(a,2)[1],n=void 0===r?"s":r,l=parseInt(t,10);return(0,p.default)(l).format({s:"HH:mm:ss",m:"HH:mm",h:"HH:mm",d:"MM/DD",M:"YYYY/MM",Y:"YYYY"}[n])},e.labelFormatter=function(a){var r=a,n=r+(0,_.timestampify)(e.props.interval),l=(0,p.default)(r),u=(0,p.default)(n),o=l.isSame(u,"day"),i="".concat("YYYY/MM/DD"," ").concat("HH:mm:ss"),c=l.format(i),s=u.format(i),f=o?"".concat(c," ~ ").concat(u.format("HH:mm:ss")):"".concat(c," ~ ").concat(s);return"".concat(t("TIME_RANGE")," : ").concat(f)},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.className,r=e.data,n=e.xKey,l=e.tooltipCursor;return d.default.createElement("div",{className:(0,h.default)(O.default.wrapper,a)},t,d.default.createElement(E.default,{width:"100%",height:"100%",debounce:1},d.default.createElement(b.default,{data:r},d.default.createElement(g.default,{dataKey:n,tickFormatter:this.xTickFormatter,tickLine:!1}),d.default.createElement(y.default,{cursor:l,labelFormatter:this.labelFormatter}),this.renderBars())))}},{key:"renderBars",value:function(){var e=this.props,t=e.legend,a=e.onBarClick;return t.map((function(e){var t=(0,u.default)(e,2),r=t[0],n=t[1];return d.default.createElement(v.default,{key:r,dataKey:r,onClick:a,name:n,maxBarSize:40})}))}}]),r}(d.Component);k.propTypes={title:m.default.string,xKey:m.default.string,onBarClick:m.default.func,tooltipCursor:m.default.oneOfType([m.default.object,m.default.bool]),data:m.default.array.isRequired,interval:m.default.string.isRequired,legend:m.default.arrayOf(m.default.array)},k.defaultProps={tooltipCursor:!1,onBarClick:function(){}};var C=k;a.default=C},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=a(5),f=a(70),d=r(a(32)),p=r(a(16)),m=r(a(1413)),h=r(a(1414));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var y=function(e){(0,u.default)(a,e);var t=v(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).fetchData=function(){r.envStore.fetchList({namespace:r.namespace,cluster:r.cluster,containers:r.containers,initContainers:r.initContainers})},r.envStore=new m.default,r.fetchData(),r}return(0,l.default)(a,[{key:"render",value:function(){var e=(0,s.toJS)(this.envStore.list),t=e.data,a=e.isLoading;return c.default.createElement("div",null,t.map((function(e,t){return c.default.createElement(h.default,{key:t,detail:e,expand:0===t,loading:a})})))}},{key:"module",get:function(){return this.store.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"namespace",get:function(){return this.store.detail.namespace}},{key:"cluster",get:function(){return this.store.detail.cluster}},{key:"containers",get:function(){var e=(0,s.toJS)(this.store.detail),t=e.spec,a=e.containers,r=void 0===a?[]:a;return"containers"===this.module?[e]:(0,d.default)(r)?(0,d.default)(t)?[]:(0,p.default)(t,"template.spec.containers",[]):r}},{key:"initContainers",get:function(){var e=(0,s.toJS)(this.store.detail),t=e.spec,a=e.initContainers,r=void 0===a?[]:a;return"containers"===this.module?[e]:(0,d.default)(r)?(0,d.default)(t)?[]:(0,p.default)(t,"template.spec.initContainers",[]):r}}]),a}(c.default.Component),g=(0,f.inject)("rootStore","detailStore")((0,f.observer)(y));t.default=g;var b=y;t.Component=b},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(49)),o=r(a(56)),i=r(a(50)),c=r(a(91)),s=r(a(12)),f=r(a(13)),d=r(a(135)),p=r(a(19)),m=r(a(20)),h=r(a(18)),v=r(a(74)),y=(r(a(92)),a(5)),g=r(a(32)),b=r(a(190)),E=a(37);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var O=(n=function(e){(0,p.default)(r,e);var t,a=_(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return e=a.call.apply(a,[this].concat(n)),(0,c.default)(e,"sort",l,(0,d.default)(e)),e.resourceName="pod",e.getApi=function(t){var a=t.nodeName,r=t.namespace,n=t.workloadKind,l=t.workloadName,u=t.pod,o=r?"/namespaces/".concat(r):"/";return n&&l&&(o="".concat(o,"/workloads/").concat(n,"/").concat(l)),a&&(o="/nodes/".concat(a)),u?"".concat(e.apiVersion).concat(o,"/pods/").concat(u):"".concat(e.apiVersion).concat(o,"/pods")},e.handleParams=function(e){return(0,b.default)(e,["nodeName","namespace","workloadKind","workloadName","pod"])},e}return(0,f.default)(r,[{key:"fetchSortedMetrics",value:(t=(0,i.default)(u.default.mark((function e(t){var a,r,n,l,i,c,s,f,d,p;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,r=t.page,n=t.more,l=t.metrics,i=void 0===l?[]:l,c=(0,o.default)(t,["limit","page","more","metrics"]),this.sort.isLoading=!0,s={},(0,g.default)(i)||(s.sort_metric=i.join("|")),s.limit=a||10,s.page=r||1,c.cluster&&(this.cluster=c.cluster),f=this.getApi(c),e.next=10,(0,E.to)(request.get(f,s));case 10:return d=e.sent,p=this.getResult(d.results),n&&(p=this.getMoreResult(p,this.sort.data)),this.sort={data:p,total:d.total_item||0,limit:Number(d.limit||10),page:Number(d.page||1),isLoading:!1},e.abrupt("return",p);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),r}(r(a(768)).default),l=(0,v.default)(n.prototype,"sort",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},page:1,limit:10,total:0,isLoading:!1}}}),(0,v.default)(n.prototype,"fetchSortedMetrics",[y.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchSortedMetrics"),n.prototype),n);t.default=O},,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=r(a(1)),d=r(a(3)),p=a(276),m=r(a(293)),h=r(a(3113));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(a,e);var t=v(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"renderImage",value:function(){var e=this.props,t=e.avatar,a=e.iconLetter,r=e.iconSize,n=e.avatarClass;return s.default.createElement("label",{className:(0,d.default)(h.default.image,n)},s.default.createElement(m.default,{src:t,iconLetter:a,iconSize:r}))}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.desc,r=e.to,l=e.onClick,u=e.className,o=r?s.default.createElement(p.Link,{to:r},t):t;return s.default.createElement("div",{className:(0,d.default)(h.default.wrapper,u)},this.renderImage(),s.default.createElement("div",{className:(0,d.default)(h.default.title,h.default.isIcon,"avatar-title")},s.default.createElement("div",null,s.default.createElement("strong",{className:(0,d.default)((0,n.default)({},h.default.canClick,Boolean(l))),onClick:l},o)),s.default.createElement("div",{className:h.default.desc,title:a},a)))}}]),a}(s.default.Component);t.default=y,y.propTypes={avatar:f.default.string,avatarClass:f.default.string,iconLetter:f.default.string,iconSize:f.default.number,title:f.default.string,desc:f.default.string,to:f.default.string,onClick:f.default.func},y.defaultProps={iconSize:20,onClick:null}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(49)),u=r(a(50)),o=r(a(12)),i=r(a(13)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=r(a(74)),p=a(5),m=a(280);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=(n=function(e){(0,c.default)(r,e);var t,a=h(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).module="horizontalpodautoscalers",e}return(0,i.default)(r,[{key:"create",value:function(e,t){return this.submitting(request.post(this.getListUrl(t),(0,m.getHpaFormattedData)(e)))}},{key:"patch",value:(t=(0,u.default)(l.default.mark((function e(t,a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.submitting(request.patch(this.getDetailUrl(t),(0,m.getHpaFormattedData)(a)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"reset",value:function(){this.detail={}}}]),r}(r(a(277)).default),(0,d.default)(n.prototype,"create",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,d.default)(n.prototype,"patch",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"patch"),n.prototype),(0,d.default)(n.prototype,"reset",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"reset"),n.prototype),n);t.default=v},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f=r(a(109)),d=r(a(21)),p=r(a(56)),m=r(a(49)),h=r(a(50)),v=r(a(91)),y=r(a(12)),g=r(a(13)),b=r(a(135)),E=r(a(19)),_=r(a(20)),O=r(a(18)),S=r(a(74)),k=(r(a(92)),a(5)),C=a(25),R=r(a(186)),w=r(a(23)),P=r(a(16)),D=a(37);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,O.default)(e);if(t){var n=(0,O.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,_.default)(this,a)}}var A=(n=function(e){(0,E.default)(O,e);var t,a,r,n,d,_=I(O);function O(){var e;return(0,y.default)(this,O),e=_.call(this),(0,v.default)(e,"list",l,(0,b.default)(e)),(0,v.default)(e,"logData",u,(0,b.default)(e)),(0,v.default)(e,"jobDetail",o,(0,b.default)(e)),(0,v.default)(e,"runDetail",i,(0,b.default)(e)),(0,v.default)(e,"isLoading",c,(0,b.default)(e)),(0,v.default)(e,"getLog",s,(0,b.default)(e)),e.module="s2iruns",e}return(0,g.default)(O,[{key:"fetchJobDetail",value:(d=(0,h.default)(m.default.mark((function e(t){var a,r,n,l,u;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.cluster,n=t.namespace,this.isLoading=!0,e.next=4,request.get("apis/batch/v1".concat(this.getPath({cluster:r,namespace:n}),"/jobs/").concat(a));case 4:l=e.sent,u=R.default.jobs(l),this.jobDetail=u,this.isLoading=!1;case 8:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"fetchRunDetail",value:(n=(0,h.default)(m.default.mark((function e(t){var a,r,n,l;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.cluster,r=t.namespace,n=t.runName){e.next=3;break}return e.abrupt("return");case 3:return this.getRunDetailLoading=!0,e.next=6,request.get("apis/devops.kubesphere.io/v1alpha1".concat(this.getPath({cluster:a,namespace:r}),"/").concat(this.module,"/").concat(n));case 6:return l=e.sent,this.runDetail=R.default.s2iruns(l),this.getRunDetailLoading=!1,e.abrupt("return",this.runDetail);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"deleteRun",value:(r=(0,h.default)(m.default.mark((function e(t){var a,r,n;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.cluster,r=t.namespace,n=t.runName){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,request.delete("apis/devops.kubesphere.io/v1alpha1".concat(this.getPath({cluster:a,namespace:r}),"/").concat(this.module,"/").concat(n));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchS2IRunRecords",value:(a=(0,h.default)(m.default.mark((function e(){var t,a,r,n,l,u,o,i,c,s,d,h,v,y,g,b=arguments;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},a=t.limit,r=void 0===a?10:a,n=t.name,l=t.page,u=void 0===l?1:l,o=t.order,i=t.reverse,t.workspace,c=t.cluster,s=t.namespace,d=t.more,h=(0,p.default)(t,["limit","name","page","order","reverse","workspace","cluster","namespace","more"]),this.list.data.length||(this.list.isLoading=!0),(v={}).conditions=(0,D.getFilterString)(N(N({},h),{},{"labels.devops.kubesphere.io/builder-name":n})),o||void 0!==i||(o="createTime",i=!0),r!==1/0&&(v.paging="limit=".concat(r,",page=").concat(u)),o&&(v.orderBy=o),v.reverse=!0,e.next=10,request.get("kapis/resources.kubesphere.io/v1alpha2".concat(this.getPath({cluster:c,namespace:s}),"/").concat(this.module),v);case 10:return y=e.sent,(g=y.items.map(this.mapper)).forEach((function(e,t){e.count=y.total_count-t-10*(u-1),e.cluster=c})),this.list={data:d?[].concat((0,f.default)(this.list.data),(0,f.default)(g)):g,total:y.total_count||0,limit:Number(r)||10,page:Number(u)||1,order:o,reverse:i,filters:h,isLoading:!1,selectedRowKeys:[]},e.abrupt("return",this.list);case 15:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchPodsLogs",value:(t=(0,h.default)(m.default.mark((function e(t,a){var r,n,l;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,P.default)(this.logData,"logURL","")!==t&&(this.logData={isLoading:!1,log:"",start:0,hasMore:!1}),this.logData.isLoading=!0,r=(0,P.default)(t.match(/namespaces\/([\w-/.]*)*\?/),"1"),this.containerName){e.next=11;break}return e.next=6,request.get("api/v1".concat(this.getPath({namespace:r,cluster:a})));case 6:if(n=e.sent,(0,P.default)(n,"status.containerStatuses[0]containerID")){e.next=10;break}return e.abrupt("return",C.Notify.error("container not ready"));case 10:this.containerName=(0,P.default)(n,"spec.containers[0].name","");case 11:return e.next=13,request.get("api/v1".concat(this.getPath({namespace:r,cluster:a}),"/log"),{container:this.containerName,timestamps:!0,tailLines:1e3});case 13:l=e.sent,this.logData={logURL:t,isLoading:!1,log:l,start:0,hasMore:!1};case 15:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"apis/devops.kubesphere.io/v1alpha1"}}]),O}(r(a(277)).default),l=(0,S.default)(n.prototype,"list",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,isLoading:!0,selectedRowKeys:[]}}}),u=(0,S.default)(n.prototype,"logData",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLoading:!0,log:"",start:0,hasMore:!0}}}),o=(0,S.default)(n.prototype,"jobDetail",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=(0,S.default)(n.prototype,"runDetail",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=(0,S.default)(n.prototype,"isLoading",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),(0,S.default)(n.prototype,"fetchJobDetail",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchJobDetail"),n.prototype),(0,S.default)(n.prototype,"fetchRunDetail",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchRunDetail"),n.prototype),(0,S.default)(n.prototype,"deleteRun",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"deleteRun"),n.prototype),(0,S.default)(n.prototype,"fetchS2IRunRecords",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchS2IRunRecords"),n.prototype),s=(0,S.default)(n.prototype,"getLog",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,h.default)(m.default.mark((function t(a,r){var n,l,u,o,i,c,s,f;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.logData.logURL!==a&&(e.logData={isLoading:!0,log:"",start:0,hasMore:!0}),n=(0,D.parseUrl)(a).pathname.slice(1),l=(0,P.default)(n.match(/\/namespaces\/(.*)\/pods\//),"1"),u=(0,P.default)(n.match(/\/pods\/(.*)/),"1"),n="kapis/tenant.kubesphere.io/v1alpha2".concat(e.getPath({cluster:r}),"/logs"),t.next=7,request.get(n,{namespaces:l,pods:u,container:e.containerName,timestamps:!0,tailLines:1e3,size:300,from:e.logData.start,sort:"asc"});case 7:o=t.sent,i=(0,P.default)(o,"query.records",[]),c=(0,P.default)(o,"query.total",[]),s=e.logData.log,(0,w.default)(i)&&(f=i.reduce((function(e,t){return e+t.log}),s),e.logData={logURL:a,log:f,start:e.logData.start+i.length,hasMore:c>e.logData.start+i.length,isLoading:!1});case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),(0,S.default)(n.prototype,"fetchPodsLogs",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchPodsLogs"),n.prototype),n);t.default=A},,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(0)),o=n(r(3)),i=n(r(16)),c=n(r(1643)),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.className,r=e.payload,n=e.activeSeries,s=void 0===n?[]:n,f=e.showAll,d=void 0!==f&&f,p=r||[];if(p.length<2&&!d)return u.default.createElement("div",{className:c.default.legend});var m=function(t){var a=e.onClick;a&&a(t,(0,i.default)(t.target,"dataset.key"))};return u.default.createElement("div",{className:(0,o.default)(a,c.default.legend),onClick:m},p.map((function(e){var a=!s.includes(e.value),r=(0,i.default)(e,"payload.stroke");return u.default.createElement("div",{key:e.dataKey,"data-key":e.dataKey,className:(0,o.default)(c.default.item,(0,l.default)({},c.default.inactive,a))},u.default.createElement("i",{style:{backgroundColor:r}}),t(e.value))})))};a.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveSeries=void 0;t.getActiveSeries=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.xKey,a=e.data;return Object.keys(a[0]||{}).filter((function(e){return e!==t}))}},,function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(71)),i=n(r(56)),c=n(r(21)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=l(r(0)),v=r(70),y=n(r(191)),g=r(25),b=n(r(753)),E=n(r(1663));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var k=(0,v.observer)(u=function(e){(0,d.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).projectStore=new b.default,e.fetchProjects=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props.cluster;return e.projectStore.fetchList(O({cluster:a},t))},e.optionRenderer=function(a){return h.default.createElement("div",{className:E.default.option},a.isFedManaged?h.default.createElement("img",{className:E.default.indicator,src:"/assets/cluster.svg"}):h.default.createElement(g.Icon,{name:"project"}),a.label,a.isFedManaged&&h.default.createElement(g.Tooltip,{content:e.props.tipMessage||t("FEDPROJECT_RESOURCE_TIP")},h.default.createElement(g.Icon,{className:E.default.tip,name:"question"})))},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchProjects()}},{key:"getProjects",value:function(){var e=this.props.defaultValue,t=this.projectStore.list.data,a=t.filter((function(e){return"Terminating"!==e.status})).map((function(e){return{label:e.name,value:e.name,disabled:e.isFedManaged,isFedManaged:e.isFedManaged}}));return e&&!t.find((function(t){return t.name===e}))&&a.unshift({label:e,value:e}),a}},{key:"render",value:function(){var e=this.props,t=(e.cluster,(0,i.default)(e,["cluster"]));return!t.value&&t.defaultValue&&(t.value=t.defaultValue),h.default.createElement(g.Select,(0,o.default)({options:this.getProjects(),pagination:(0,y.default)(this.projectStore.list,["page","limit","total"]),isLoading:this.projectStore.list.isLoading,valueRenderer:this.optionRenderer,optionRenderer:this.optionRenderer,onFetch:this.fetchProjects,searchable:!0,clearable:!0,placeholder:" "},t))}}]),r}(h.Component))||u;a.default=k},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(49)),u=r(a(21)),o=r(a(56)),i=r(a(50)),c=r(a(12)),s=r(a(13)),f=r(a(19)),d=r(a(20)),p=r(a(18)),m=r(a(74)),h=r(a(277)),v=a(5),y=a(37);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(n=function(e){(0,f.default)(r,e);var t,a=E(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).module="limitranges",e}return(0,s.default)(r,[{key:"fetchListByK8s",value:(t=(0,i.default)(l.default.mark((function e(){var t,a,r,n,u,i,c,s,f=this,d=arguments;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},a=t.cluster,r=t.namespace,n=t.module,u=(0,o.default)(t,["cluster","namespace","module"]),this.list.isLoading=!0,n&&(this.module=n),i=u,e.next=6,request.get(this.getListUrl({cluster:a,namespace:r,module:n}),i);case 6:return c=e.sent,s=c.items.map((function(e){return b({cluster:a,module:n||f.module},f.mapper(e))})),(0,y.LimitsEqualRequests)(s),this.list.update({data:s,total:c.items.length,isLoading:!1}),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(h.default),(0,m.default)(n.prototype,"fetchListByK8s",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchListByK8s"),n.prototype),n);t.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(16)),p=n(r(848)),m=n(r(738)),h=n(r(191)),v=n(r(68)),y=n(r(32)),g=n(r(0)),b=r(5),E=r(1),_=r(37),O=r(58),S=r(25),k=n(r(1069)),C=n(r(873));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var D=function(e){(0,c.default)(r,e);var a=P(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).updateStorageClass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({isLoading:!0});var t=n.context.formData,a=(0,d.default)(t,"spec.storageClassName");return n.store.fetchList(w(w({},e),{},{cluster:n.props.cluster})).then((function(){var e=(0,b.toJS)(n.store.list.data);n.setState({storageClasses:(0,b.toJS)(n.store.list.data),storageClass:e.find((function(e){return a===e.name}))||e.find((function(e){return e.default}))||{},isLoading:!1})}))},n.getStorageClasses=function(){return n.state.storageClasses.map((function(e){return{label:e.name,value:e.name}}))},n.getSupportedAccessModes=function(){var e=n.state.storageClass,t=null;return e&&(t=(0,_.safeParseJSON)((0,d.default)(e,'annotations["storageclass.kubesphere.io/supported-access-modes"]',""))),(0,v.default)(t)?[]:t},n.handleStorageClassChange=function(e){var t=n.state.storageClasses.find((function(t){return t.name===e}))||{};(0,m.default)(n.context.formData,"spec.accessModes"),n.setState({storageClass:t})},n.sizeValidator=function(e,a,r){return parseInt(a,10)<=0?r({message:t("VOLUME_SIZE_TIP"),field:e.field}):r()},n.store=new C.default,n.state={storageClasses:[],storageClass:{},isLoading:!1},n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.updateStorageClass()}},{key:"getSliderProps",value:function(e){var t={min:0,max:2048,defaultValue:"10Gi",step:1,unit:"Gi"},a=Number((0,d.default)(e,"parameters.minSize")),r=Number((0,d.default)(e,"parameters.maxSize")),n=Number((0,d.default)(e,"parameters.stepSize"));(0,p.default)(a)||(t.min=a),(0,p.default)(r)||(t.max=r),(0,p.default)(n)||(t.step=n);for(var l=(t.max/t.step-t.min/t.step)/4,u={},o=0;o<4;o++){var i=Math.floor(l*o)*t.step+t.min;u[i]=0===i?"0":"".concat(i,"Gi")}return u[t.max]="".concat(t.max,"Gi"),t.marks=u,t}},{key:"render",value:function(){var e=this.state,a=e.storageClass,r=e.isLoading,n=this.props,u=n.editModalTitle,o=n.tabTitle,i=this.getStorageClasses(),c=this.store.list||{},s=this.getSupportedAccessModes(),f=(0,y.default)(s)?Object.keys(O.ACCESS_MODES):s,d=f.map((function(e){return{value:e,label:e}})),p="ReadWriteOnce"in f?["ReadWriteOnce"]:f.slice(0,1);return g.default.createElement(g.default.Fragment,null,g.default.createElement(S.Form.Item,{label:t("STORAGE_CLASS"),desc:t("VOLUME_STORAGE_CLASS_DESC"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},g.default.createElement(S.Select,{name:"spec.storageClassName",defaultValue:a.name,pagination:(0,h.default)(c,["page","limit","total"]),isLoading:c.isLoading,onChange:this.handleStorageClassChange,options:i,onFetch:this.updateStorageClass,searchable:!0,clearable:!0})),"EDIT_SETTINGS"!==u&&"CLUSTER_DIFF"!==o?g.default.createElement(S.Form.Item,{label:t("ACCESS_MODE"),rules:[{required:!0,message:t("PARAM_REQUIRED")}],desc:t("ACCESS_MODES_DESC")},g.default.createElement(S.Select,{name:"spec.accessModes",options:d,loading:r,defaultValue:p,multi:!0})):"",g.default.createElement(S.Form.Item,{label:t("VOLUME_CAPACITY"),rules:[{validator:this.sizeValidator}]},g.default.createElement(k.default,(0,l.default)({name:"spec.resources.requests.storage"},this.getSliderProps(a),{withInput:!0}))))}}]),r}(g.default.Component);a.default=D,D.contextTypes={formData:E.PropTypes.object}},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.data,r=e.noTip,n=u.default.createElement("div",null,u.default.createElement("div",{className:"tooltip-title"},t("CLUSTER_CONDITIONS")),u.default.createElement("div",null,Object.values((0,l.default)(a,"conditions",{})).map((function(e){return u.default.createElement("div",{key:e.type,className:i.default.condition},u.default.createElement("div",{className:i.default.title},"True"===e.status?u.default.createElement(o.Icon,{name:"success",type:"coloured"}):u.default.createElement(o.Icon,{name:"error",color:{primary:"#ffffff",secondary:"#ea4641"}}),u.default.createElement("span",null,t("CLUSTER_CONDITION_".concat(e.type.toUpperCase()),{defaultValue:e.type}))),e.status&&u.default.createElement("p",null,"".concat(t("STATUS"),": ").concat(e.status)),e.reason&&u.default.createElement("p",null,"".concat(t("REASON"),": ").concat(t("CLUSTER_REASON_".concat(e.reason.toUpperCase()),{defaultValue:e.reason}))),e.message&&u.default.createElement("p",null,"".concat(t("MESSAGE"),": ").concat(e.message)))})))),c=u.default.createElement(o.Icon,{name:"information",color:{primary:"#ffffff",secondary:"error"===status?"#ab2f29":"#f5a623"}});return u.default.createElement("span",{className:i.default.reason},r?c:u.default.createElement(o.Tooltip,{placement:"right",content:n},c),u.default.createElement("span",{className:"error"===status?i.default.error:i.default.warning},t("Not Ready")))};var l=n(r(16)),u=n(r(0)),o=r(25),i=n(r(1881))},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(192)),c=r(a(49)),s=r(a(109)),f=r(a(21)),d=r(a(56)),p=r(a(50)),m=r(a(91)),h=r(a(12)),v=r(a(13)),y=r(a(135)),g=r(a(19)),b=r(a(20)),E=r(a(18)),_=r(a(74)),O=(r(a(92)),r(a(73))),S=r(a(16)),k=r(a(32)),C=r(a(24)),R=r(a(738)),w=r(a(68)),P=a(5),D=a(292),T=a(58),N=r(a(733)),I=r(a(788));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,b.default)(this,a)}}var M=(n=function(e){(0,g.default)(E,e);var t,a,r,n,f,b=j(E);function E(){var e;(0,h.default)(this,E);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=b.call.apply(b,[this].concat(a))).module="secrets",(0,m.default)(e,"list",l,(0,y.default)(e)),(0,m.default)(e,"detail",u,(0,y.default)(e)),(0,m.default)(e,"params",o,(0,y.default)(e)),e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a="".concat(e.getBaseUrl(t),"credentials");return t.name?"".concat(a,"/").concat(t.name):a},e}return(0,v.default)(E,[{key:"setParams",value:function(e){this.params=e}},{key:"fetchList",value:(f=(0,p.default)(c.default.mark((function e(){var t,a,r,n,l,u,o,i=this,f=arguments;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},a=t.devops,r=t.cluster,n=(0,d.default)(t,["devops","cluster"]),this.list.isLoading=!0,n.limit===1/0||-1===n.limit?(n.limit=-1,n.page=1):n.limit=n.limit||10,l=n.more||!1,(0,R.default)(n,"more"),n.sortBy=n.sortBy||"createTime",e.next=8,request.get(this.getResourceUrl({devops:a,cluster:r}),x({},n));case 8:return u=e.sent,o=Array.isArray(u.items)?u.items.filter((function(e){return T.CREDENTIAL_TYPE_LIST.includes(e.type)})).map((function(e){return(e=i.mapper(e)).type=T.CREDENTIAL_DISPLAY_KEY[e.type.split("/")[1]],e})):[],this.list.update({data:l?[].concat((0,s.default)(this.list.data),(0,s.default)(o)):o,total:u.totalItems||o.length||0,filters:n,limit:Number(n.limit)||10,page:Number(n.page)||1,isLoading:!1}),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"handleCreate",value:(n=(0,p.default)(c.default.mark((function e(t,a){var r,n,l,u,o;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.devops,n=a.cluster,l=N.default[this.module]({namespace:r}),u=(0,S.default)(t,t.type,{}),o=u.id||t.id,(0,O.default)(l,"metadata.labels.app",o),(0,O.default)(l,'metadata.annotations["kubesphere.io/description"]',t.description),(0,O.default)(l,"metadata.name",o),delete t.description,u.id&&delete u.id,!(0,k.default)(u)&&(0,C.default)(u)&&Object.keys(u).forEach((function(e){u[e]&&(u[e]=(0,D.safeBtoa)(u[e]))})),delete t[t.type],l.data=x({},u),l.type="credential.devops.kubesphere.io/".concat(T.CREDENTIAL_KEY[t.type]),e.next=15,request.post(this.getResourceUrl({devops:r,cluster:n}),l,null,null);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"fetchDetail",value:(r=(0,p.default)(c.default.mark((function e(t){var a,r,n,l,u,o;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,w.default)(t)||(0,k.default)(t)||(this.params=t),a=this.params,r=a.devops,n=a.credential_id,l=a.cluster,e.next=4,request.get("".concat(this.getResourceUrl({devops:r,name:n,cluster:l}),"?content=1"));case 4:u=e.sent,(o=this.mapper(u)).display_name=o.name,o.id=o.name,o.type=T.CREDENTIAL_DISPLAY_KEY[o.type.split("/")[1]],this.detail=o,this.isLoading=!1;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"updateCredential",value:(a=(0,p.default)(c.default.mark((function e(t,a){var r,n,l,u,o;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.devops,n=a.cluster,l=t[t.type],u=t.description,o=t._originData,"{}"!==JSON.stringify(l)&&"object"===(0,i.default)(l)&&Object.keys(l).forEach((function(e){l[e]=(0,D.safeBtoa)(l[e])})),(0,O.default)(o,"data",l),(0,O.default)(o,'metadata.annotations["kubesphere.io/description"]',u),e.next=9,request.put("".concat(this.getResourceUrl({devops:r,name:t.name,cluster:n}),"?content=1"),o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"delete",value:(t=(0,p.default)(c.default.mark((function e(t){var a,r,n,l;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,r=this.params,n=r.devops,l=r.cluster,e.next=4,request.delete("".concat(this.getResourceUrl({devops:n,name:a,cluster:l})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"checkName",value:function(e){return request.get(this.getResourceUrl(e),{},{headers:{"x-check-exist":!0}})}},{key:"apiVersion",get:function(){return T.API_VERSIONS.devops}}]),E}(I.default),l=(0,_.default)(n.prototype,"list",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,order:"",reverse:!1,filters:{},isLoading:!0}}}),u=(0,_.default)(n.prototype,"detail",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,_.default)(n.prototype,"params",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,_.default)(n.prototype,"setParams",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"setParams"),n.prototype),(0,_.default)(n.prototype,"fetchList",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,_.default)(n.prototype,"handleCreate",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"handleCreate"),n.prototype),(0,_.default)(n.prototype,"fetchDetail",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),(0,_.default)(n.prototype,"updateCredential",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"updateCredential"),n.prototype),(0,_.default)(n.prototype,"delete",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"delete"),n.prototype),(0,_.default)(n.prototype,"checkName",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"checkName"),n.prototype),n);t.default=M},,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(32)),h=r(25),v=n(r(3)),y=r(58),g=n(r(2084));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=/(?=.*?[A-Z])(?=.*?[a-z])/,_=/(?=.*?[0-9])/,O=function(e){if((0,m.default)(e))return-1;var t=0;return E.test(e)&&(t+=4),_.test(e)&&(t+=2),e.length>=6&&e<12?t+=2:e.length>=12&&(t+=4),y.PATTERN_PASSWORD.test(e)?t:0},S=function(e){(0,s.default)(r,e);var a=b(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={strength:-1,showTip:!1},e.ref=p.default.createRef(),e.handleChange=function(t,a){var r=e.props,n=r.withStrength,l=r.onChange;if(l&&l(t,a),n){var u=O(a);e.setState({strength:u,showTip:u>-1})}},e.handleDropdownClose=function(t){t&&t.target&&e.ref&&e.ref.current&&e.ref.current.contains(t.target)?e.setState({showTip:!0}):e.setState({showTip:!1})},e.handleInputClick=function(){var t=e.state.strength;e.setState({showTip:t>-1})},e.handleInputBlur=function(){e.setState({showTip:!1})},e.getColor=function(){var t=e.state.strength;return-1===t?{width:0,backgroundColor:"#fff"}:t>=0&&t<6?{width:"33%",backgroundColor:"#ca2621"}:t>=6&&t<8?{width:"66%",backgroundColor:"#f5a623"}:t>=8?{width:"100%",backgroundColor:"#55bc8a"}:void 0},e}return(0,c.default)(r,[{key:"renderStrengthContent",value:function(){var e=this.props.value,a=void 0===e?"":e;return p.default.createElement("div",{className:g.default.content},p.default.createElement("p",null,t("Your password must meet the following requirements")),p.default.createElement("ul",{className:g.default.rules},p.default.createElement("li",null,p.default.createElement(h.Icon,{className:(0,v.default)(g.default.icon,(0,o.default)({},g.default.selected,E.test(a))),name:"check",size:12,type:"light"}),t("At least 1 uppercase and lowercase letter")),p.default.createElement("li",null,p.default.createElement(h.Icon,{className:(0,v.default)(g.default.icon,(0,o.default)({},g.default.selected,_.test(a))),name:"check",size:12,type:"light"}),t("At least 1 number")),p.default.createElement("li",null,p.default.createElement(h.Icon,{className:(0,v.default)(g.default.icon,(0,o.default)({},g.default.selected,a.length>=8)),name:"check",size:12,type:"light"}),t("Password length is at least 6 characters"))),p.default.createElement("p",null,t("Password Strength"),":"),p.default.createElement("div",{className:g.default.barWrapper},p.default.createElement("div",{className:g.default.bar,style:this.getColor()})),p.default.createElement("p",{className:g.default.tip},t("Avoid using the password that has already been used on other websites or the one that can be easily guessed.")))}},{key:"render",value:function(){var e=this.props,t=e.withStrength,a=e.tipClassName,r=(0,u.default)(e,["withStrength","tipClassName"]),n=this.state,o=n.showTip,i=n.strength;return t?p.default.createElement("div",{className:g.default.wrapper,ref:this.ref},p.default.createElement(h.Dropdown,{className:a,visible:o&&i>-1,content:this.renderStrengthContent(),placement:"bottomRight",closeAfterClick:!1,onClose:this.handleDropdownClose},p.default.createElement("div",{className:g.default.trigger})),p.default.createElement(h.InputPassword,(0,l.default)({},r,{onChange:this.handleChange,onBlur:this.handleInputBlur,onClick:this.handleInputClick}))):p.default.createElement(h.InputPassword,r)}}]),r}(p.default.Component);a.default=S},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=r(a(1)),d=r(a(3)),p=r(a(2122)),m=a(25),h=r(a(2177));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(a,e);var t=y(a);function a(e){var r;return(0,l.default)(this,a),(r=t.call(this,e)).handleIFrameLoad=function(){r.iframeLoaded=!0,r.setState({loading:!1}),r.updateMarkdown()},r.updateIFrame=function(){r.iframe&&(r.iframe.style.height="".concat(r.iframe.contentWindow.document.body.scrollHeight+16,"px"))},r.handleIFrameRef=function(e){r.iframe=e},r.iframeLoaded=!1,r.md=new p.default(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({html:!0,linkify:!0},e.options)),r.state={loading:!0},r}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this.iframe.addEventListener("load",this.handleIFrameLoad)}},{key:"componentWillUnmount",value:function(){this.iframe.removeEventListener("load",this.handleIFrameLoad),this.removeMediaListeners()}},{key:"componentDidUpdate",value:function(e){e.options!==this.props.options&&(this.md=new p.default(this.props.options)),this.updateMarkdown()}},{key:"addMediaListeners",value:function(){var e=this,t=this.iframe.contentDocument;this.iframeMedias=t.querySelectorAll("img, video, audio"),this.iframeMedias&&this.iframeMedias.length>0&&Array.prototype.forEach.call(this.iframeMedias,(function(t){t.removeEventListener("load",e.updateIFrame),t.addEventListener("load",e.updateIFrame)}))}},{key:"removeMediaListeners",value:function(){var e=this;this.iframeMedias&&this.iframeMedias.length>0&&Array.prototype.forEach.call(this.iframeMedias,(function(t){t.removeEventListener("load",e.updateIFrame)}))}},{key:"updateMarkdown",value:function(){var e=this.iframe.contentDocument;this.iframeLoaded&&(e.body.innerHTML=this.md.render(this.props.source),this.iframe.style.height="".concat(e.body.scrollHeight+16,"px")),this.removeMediaListeners(),this.addMediaListeners()}},{key:"render",value:function(){var e=this.props.className;return s.default.createElement("div",null,this.state.loading&&s.default.createElement(m.Loading,{className:"loading"}),s.default.createElement("iframe",{className:(0,d.default)(h.default.markdown,e),ref:this.handleIFrameRef,src:"/blank_md",name:"frame_markdown",width:"100%",frameBorder:"0",scrolling:"no"}))}}]),a}(s.default.Component);g.propTypes={source:f.default.string,options:f.default.object},g.defaultProps={source:"",options:{}};var b=g;t.default=b},,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p=r(a(109)),m=r(a(56)),h=r(a(49)),v=r(a(50)),y=r(a(91)),g=r(a(12)),b=r(a(13)),E=r(a(135)),_=r(a(19)),O=r(a(20)),S=r(a(18)),k=r(a(74)),C=(r(a(92)),r(a(21))),R=r(a(16)),w=r(a(32)),P=a(5),D=a(37),T=a(787),N=r(a(748)),I=r(a(654)),A=r(a(844));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,S.default)(e);if(t){var n=(0,S.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,O.default)(this,a)}}function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,C.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L={creating:"Creating",created:"Creating",active:"Running",failed:"Failed",deleting:"Deleting",upgrading:"Upgrading",upgraded:"Upgrading"},U=function(e){var t=(0,R.default)(e,"cluster.status");return M(M(M({},e),e.cluster),{},{selector:{"app.kubesphere.io/instance":e.cluster.name},status:L[t]})},F=(n=function(e){(0,_.default)(r,e);var t,a=x(r);function r(){var e;(0,g.default)(this,r);for(var t=arguments.length,n=new Array(t),p=0;p<t;p++)n[p]=arguments[p];return(e=a.call.apply(a,[this].concat(n))).resourceName="applications",e.defaultStatus=T.CLUSTER_QUERY_STATUS,e.serviceStore=new N.default,e.podStore=new I.default,(0,y.default)(e,"components",l,(0,E.default)(e)),e.getWatchListUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace;return"apis/application.kubesphere.io/v1alpha1/watch/helmreleases?labelSelector=".concat((0,D.joinSelector)({"kubesphere.io/cluster":globals.app.isMultiCluster?t:null,"kubesphere.io/namespace":a}))},e.getUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.workspace,r=t.namespace,n=t.cluster,l=t.cluster_id,u="".concat(e.baseUrl).concat(e.getPath({workspace:a,namespace:r,cluster:n}),"/applications");return l?"".concat(u,"/").concat(l):u},(0,y.default)(e,"env",u,(0,E.default)(e)),(0,y.default)(e,"fetchList",o,(0,E.default)(e)),(0,y.default)(e,"fetchDetail",i,(0,E.default)(e)),(0,y.default)(e,"update",c,(0,E.default)(e)),(0,y.default)(e,"patch",s,(0,E.default)(e)),(0,y.default)(e,"delete",f,(0,E.default)(e)),(0,y.default)(e,"batchDelete",d,(0,E.default)(e)),e}return(0,b.default)(r,[{key:"upgrade",value:(t=(0,v.default)(h.default.mark((function e(t,a){var r,n,l,u;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.workspace,n=a.namespace,l=a.cluster,u=a.cluster_id,e.abrupt("return",this.submitting(request.post(this.getUrl({workspace:r,namespace:n,cluster:l,cluster_id:u}),t)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})}]),r}(A.default),l=(0,k.default)(n.prototype,"components",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],total:0,isLoading:!0}}}),u=(0,k.default)(n.prototype,"env",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!1}}}),o=(0,k.default)(n.prototype,"fetchList",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,v.default)(h.default.mark((function t(){var a,r,n,l,u,o,i,c,s,f,d,v,y,g,b,E=arguments;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=E.length>0&&void 0!==E[0]?E[0]:{},r=a.limit,n=a.page,l=a.cluster,u=a.namespace,o=a.workspace,i=a.more,c=a.status,s=a.sortBy,f=a.reverse,d=(0,m.default)(a,["limit","page","cluster","namespace","workspace","more","status","sortBy","reverse"]),e.list.isLoading=!0,v={conditions:(0,D.getFilterString)({status:c||e.defaultStatus})},s||void 0!==f||(s="status_time"),(0,w.default)(d)||(y=(0,D.getFilterString)(d))&&(v.conditions+=",".concat(y)),r!==1/0&&(v.paging="limit=".concat(r||10,",page=").concat(n||1)),s&&(v.orderBy=s),f&&(v.reverse=!0),t.next=10,request.get(e.getUrl({workspace:o,namespace:u,cluster:l}),v);case 10:return g=t.sent,b=(g.items||[]).map((function(e){return M(M({},U(e)),{},{workspace:o,cluster:l})})),Object.assign(e.list,{data:i?[].concat((0,p.default)(e.list.data),(0,p.default)(b)):b,total:g.total_count||0,limit:Number(r)||10,page:Number(n)||1,order:s,reverse:f,filters:d,selectedRowKeys:[]}),e.list.isLoading=!1,t.abrupt("return",b);case 15:case"end":return t.stop()}}),t)})))}}),i=(0,k.default)(n.prototype,"fetchDetail",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,v.default)(h.default.mark((function t(a){var r,n,l,u,o;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,n=a.namespace,l=a.cluster,u=a.id,e.isLoading=!0,t.next=4,request.get(e.getUrl({workspace:r,namespace:n,cluster:l,cluster_id:u}));case 4:o=t.sent,e.detail=M(M({},U(o)),{},{workspace:r,namespace:n,cluster:l}),e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),(0,k.default)(n.prototype,"upgrade",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"upgrade"),n.prototype),c=(0,k.default)(n.prototype,"update",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.cluster_id,r=t.cluster,n=t.workspace,l=t.zone,u=(0,m.default)(t,["cluster_id","cluster","workspace","zone"]);return e.submitting(request.patch(e.getUrl({namespace:l,cluster_id:a,cluster:r,workspace:n}),u))}}}),s=(0,k.default)(n.prototype,"patch",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var r=t.cluster_id,n=t.cluster,l=t.workspace,u=t.zone;return e.submitting(request.patch(e.getUrl({namespace:u,cluster_id:r,cluster:n,workspace:l}),a))}}}),f=(0,k.default)(n.prototype,"delete",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.cluster_id,r=t.cluster,n=t.workspace,l=t.zone;return e.submitting(request.delete(e.getUrl({namespace:l,cluster_id:a,cluster:r,workspace:n})))}}}),d=(0,k.default)(n.prototype,"batchDelete",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var r=a.namespace,n=a.cluster,l=a.workspace;return e.submitting(Promise.all(t.map((function(t){return request.delete(e.getUrl({namespace:r,cluster:n,workspace:l,cluster_id:t}))}))))}}}),n);t.default=F},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(49)),u=r(a(21)),o=r(a(50)),i=r(a(12)),c=r(a(13)),s=r(a(19)),f=r(a(20)),d=r(a(18)),p=r(a(74)),m=r(a(16)),h=r(a(73)),v=a(5);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(n=function(e){(0,s.default)(n,e);var t,a,r=b(n);function n(){var e;(0,i.default)(this,n);for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return(e=r.call.apply(r,[this].concat(a))).module="persistentvolumes",e.getDetailUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.getResourceUrl(t),"/").concat(t.name)},e.getKs8Url=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"api/v1".concat(e.getPath(t),"/").concat(e.module,"/").concat(t.name)},e}return(0,c.default)(n,[{key:"fetchDetail",value:(a=(0,o.default)(l.default.mark((function e(t){var a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getKs8Url(t));case 3:return a=e.sent,r=g(g({},t),this.mapper(a)),this.detail=r,this.isLoading=!1,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"update",value:(t=(0,o.default)(l.default.mark((function e(t,a){var r,n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get(this.getResourceUrl(t));case 2:return r=e.sent,(n=(0,m.default)(r,"metadata.resourceVersion"))&&(0,h.default)(a,"metadata.resourceVersion",n),e.abrupt("return",this.submitting(request.put(this.getKs8Url(t),a)));case 6:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"patch",value:function(e,t){return this.submitting(request.patch(this.getKs8Url(e),t))}},{key:"delete",value:function(e){return this.submitting(request.delete(this.getKs8Url(e)))}}]),n}(r(a(277)).default),(0,p.default)(n.prototype,"fetchDetail",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),(0,p.default)(n.prototype,"update",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"update"),n.prototype),(0,p.default)(n.prototype,"patch",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"patch"),n.prototype),(0,p.default)(n.prototype,"delete",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"delete"),n.prototype),n);t.default=E},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(56)),i=r(a(49)),c=r(a(50)),s=r(a(91)),f=r(a(12)),d=r(a(13)),p=r(a(135)),m=r(a(19)),h=r(a(20)),v=r(a(18)),y=r(a(74)),g=(r(a(92)),a(5)),b=r(a(16)),E=a(37),_=r(a(768)),O=r(a(788));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var k=(n=function(e){(0,m.default)(h,e);var t,a,r,n=S(h);function h(){var e;(0,f.default)(this,h);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),(0,s.default)(e,"statistics",l,(0,p.default)(e)),(0,s.default)(e,"resourceMetrics",u,(0,p.default)(e)),e.getApi=function(t){var a=t.workspace;return a?"".concat(e.apiVersion,"/workspaces/").concat(a):"".concat(e.apiVersion,"/cluster")},e}return(0,d.default)(h,[{key:"fetchStatistics",value:(r=(0,c.default)(i.default.mark((function e(t){var a,r,n,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.statistics.isLoading=!0,a={type:"statistics"},r=this.getApi({workspace:t}),e.next=5,(0,E.to)(request.get(r,a));case 5:return n=e.sent,l=this.getResult(n),this.statistics={data:l,isLoading:!1},e.abrupt("return",l);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getDevopsCount",value:(a=(0,c.default)(i.default.mark((function e(t){var a,r,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new O.default,e.next=3,request.get(a.getBaseUrl({workspace:t}),{paging:"limit=Infinity"});case 3:return r=e.sent,n=r&&r.items.length>0?r.items.length:0,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"fetchApplicationResourceMetrics",value:(t=(0,c.default)(i.default.mark((function e(t){var a,r,n,l,u,c,s,f,d,p,m;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.workspace,r=t.namespace,n=t.autoRefresh,l=void 0!==n&&n,u=(0,o.default)(t,["workspace","namespace","autoRefresh"]),l?u.last=!0:this.resourceMetrics.isLoading=!0,u.cluster&&(this.cluster=u.cluster),c=this.getParams(u),s=/^[a-zA-Z]+_/g,f=(0,b.default)(u.metrics,"[0]","").replace(s,"workspace_"),d="workspaces",a&&"all"!==a&&(d="workspaces/".concat(a)),r&&"all"!==r&&(d="namespaces/".concat(r),c.metrics_filter="".concat(f.replace(s,"namespace_"),"$")),e.next=11,(0,E.to)(request.get("".concat(this.apiVersion,"/").concat(d),c));case 11:return p=e.sent,m=this.getResult(p),l&&(m=this.getRefreshResult(m,this.resourceMetrics.originData)),this.resourceMetrics={originData:m,data:(0,b.default)(Object.values(m),"[0].data.result",{}),isLoading:!1},e.abrupt("return",m);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),h}(_.default),l=(0,y.default)(n.prototype,"statistics",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!1}}}),u=(0,y.default)(n.prototype,"resourceMetrics",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{originData:{},data:{},isLoading:!1}}}),(0,y.default)(n.prototype,"fetchStatistics",[g.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchStatistics"),n.prototype),(0,y.default)(n.prototype,"getDevopsCount",[g.action],Object.getOwnPropertyDescriptor(n.prototype,"getDevopsCount"),n.prototype),(0,y.default)(n.prototype,"fetchApplicationResourceMetrics",[g.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchApplicationResourceMetrics"),n.prototype),n);t.default=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(5),p=r(70),m=n(r(32)),h=n(r(297)),v=n(r(782)),y=n(r(781)),g=n(r(926)),b=n(r(806)),E=n(r(1145)),_=n(r(2820)),O=n(r(1417)),S=n(r(2825)),k=n(r(892)),C=n(r(2832));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var D=function(e){(0,i.default)(r,e);var a=P(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).fetchData=function(){var e=t.store.detail,a=e.cluster,r=e.namespace,n=e.name;if("deployments"===t.module){var l=t.store.detail.annotations,u={cluster:a,namespace:r,name:(void 0===l?{}:l)["kubesphere.io/relatedHPA"]||n};t.hpaStore.checkName(u).then((function(e){e.exist&&t.hpaStore.fetchDetail(u)}))}},t.handleScale=function(e){var a=t.store.detail,r=a.cluster,n=a.namespace,l=a.name;t.store.scale({cluster:r,namespace:n,name:l},e)},t.handleDeleteHpa=function(){t.store.patch(t.store.detail,{metadata:{annotations:{"kubesphere.io/relatedHPA":null}}}).then((function(){t.hpaStore.reset()}))},t.hpaStore=e.hpaStore||new g.default,t.state={},t}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?f.default.createElement(k.default,{module:this.store.module,name:t,namespace:a}):null}},{key:"renderS2IBuilder",value:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace,r=this.store.detail;return(0,m.default)((0,d.toJS)(r.builderNames))?null:f.default.createElement(S.default,{builderNames:(0,d.toJS)(r.builderNames),cluster:t,namespace:a,className:C.default.deployment_codeResource})}},{key:"renderReplicaInfo",value:function(){var e=(0,d.toJS)(this.store.detail);return f.default.createElement(O.default,{module:this.module,detail:e,onScale:this.handleScale,enableScale:this.enableScaleReplica})}},{key:"renderHpaConfig",value:function(){var e=(0,d.toJS)(this.hpaStore.detail);return e.name?f.default.createElement(_.default,{store:this.hpaStore,detail:e,loading:this.hpaStore.isLoading,onDeleted:this.handleDeleteHpa}):null}},{key:"renderContainerPorts",value:function(){if(this.props.noPorts)return null;var e=this.store.isLoading,t=(0,d.toJS)(this.store.detail).containers;t=(0,y.default)(t)?[]:t;var a=(0,v.default)((0,h.default)(t.map((function(e){return(0,m.default)(e.ports)?[]:e.ports}))),"name");return(0,m.default)(a)?null:f.default.createElement(E.default,{ports:a,loading:e})}},{key:"renderPods",value:function(){return f.default.createElement(b.default,{prefix:this.prefix,detail:this.store.detail})}},{key:"renderContent",value:function(){return f.default.createElement("div",null,this.renderPlacement(),this.renderReplicaInfo(),this.renderHpaConfig(),this.renderContainerPorts(),this.renderS2IBuilder(),this.renderPods())}},{key:"render",value:function(){return f.default.createElement("div",{className:C.default.main},this.renderContent())}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster;return"".concat(t?"/".concat(t):"","/clusters/").concat(a)}},{key:"enabledActions",get:function(){return globals.app.getActions(w(w({module:this.module},this.props.match.params),{},{project:this.props.match.params.namespace}))}},{key:"volumesTitle",get:function(){return t("STORAGE_DEVICES")}},{key:"enableScaleReplica",get:function(){return this.enabledActions.includes("edit")&&!this.store.detail.isFedManaged}}]),r}(f.default.Component),T=(0,p.inject)("detailStore","hpaStore")((0,p.observer)(D));a.default=T;var N=D;a.Component=N},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(849)),p=n(r(0)),m=r(5),h=r(70),v=n(r(741)),y=n(r(2991));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=(0,h.inject)("detailStore")(l=(0,h.observer)(l=function(e){(0,i.default)(r,e);var a=g(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=(0,m.toJS)(this.props.detailStore),a=e.detail,r=e.roleTemplates,n=e.isLoading,l=(0,d.default)(r.data.filter((function(e){return(0,f.default)(e,'annotations["iam.kubesphere.io/module"]')&&a.roleTemplates.includes(e.name)})),'annotations["iam.kubesphere.io/module"]');return p.default.createElement(v.default,{title:t("PERMISSION_PL"),empty:t("NO_PERMISSION"),loading:n,isEmpty:Object.keys(l).length<=0},p.default.createElement(y.default,{templates:l}))}}]),r}(p.default.Component))||l)||l;a.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=r(37),v=r(58),y=n(r(723)),g=n(r(729)),b=n(r(835)),E=n(r(278)),_=n(r(2993));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,m.inject)("detailStore")(l=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=k(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=a.call.apply(a,[this].concat(l))).store=new E.default,e.fetchData=function(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.props.match.params,n=r.name,l=r.namespace,o=r.workspace,i=r.cluster,c=e.props.detailStore.module;e.store.fetchList(S((t={},(0,u.default)(t,v.ROLE_QUERY_KEY[c],n),(0,u.default)(t,"namespace",l),(0,u.default)(t,"workspace",o),(0,u.default)(t,"cluster",i),t),a))},e.getColumns=function(){return[{title:t("USERNAME"),dataIndex:"username",width:"33%"},{title:t("STATUS"),dataIndex:"status",width:"33%",render:function(e){return d.default.createElement(g.default,{type:e,name:t("USER_".concat(e.toUpperCase()))})}},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",width:"33%",render:function(e){return d.default.createElement("p",null,e?(0,h.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET"))}}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=(0,p.toJS)(this.store.list),a=e.data,r=e.total,n=e.page,l=e.limit,u=e.isLoading,o={total:r,page:n,limit:l};return d.default.createElement(y.default,{title:t("AUTHORIZED_USER_PL")},d.default.createElement(b.default,{className:_.default.table,data:a,columns:this.getColumns(),pagination:o,isLoading:u,onFetch:this.fetchData,emptyProps:this.emptyProps,hideCustom:!0,hideHeader:!0}))}},{key:"emptyProps",get:function(){return{icon:"human",name:"USER",desc:t("NO_AUTHORIZED_USER_DESC"),className:_.default.table}}}]),r}(d.default.Component))||l)||l;a.default=C},,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllYAMLValue=t.getValueObj=t.getValue=void 0;var n=r(a(24)),l=r(a(1049));t.getValue=function(e){if((0,n.default)(e))try{return l.default.safeDump(JSON.parse(JSON.stringify(e)),{noRefs:!0})}catch(t){return console.error(t),JSON.stringify(e,null,2)}return String(e)};t.getValueObj=function(e){if(!(0,n.default)(e))try{return l.default.safeLoad(e)}catch(e){}return e};t.getAllYAMLValue=function(e){var t=[];try{l.default.safeLoadAll(e,(function(e){t.push(e)}),{noRefs:!0})}catch(e){}return t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ALERTING_STATUS=t.getAlertingResource=t.getQuery=void 0;var r=a(981);t.getQuery=function(e){var t=e.kind,a=e.rule,n=e.resources,l="",u=a._metricType,o=a.thresholds,i=a.condition_type;switch(t){case"Node":l=u.replace("$1","node=".concat(n.length>1?"~":"",'"').concat(n.join("|"),'"'));break;case"Deployment":case"StatefulSet":case"DaemonSet":l=u.replace("$1","workload=".concat(n.length>1?"~":"",'"').concat(n.map((function(e){return"".concat(t,":").concat(e)})).join("|"),'"')).replace("$2",t.toLowerCase())}var c=o,s=r.ALL_METRICS_CONFIG[u].ruleConfig.find((function(e){return"thresholds"===e.name}));return s&&s.converter&&(c=s.converter(o)),l+=" ".concat(i," ").concat(c)};var n={Deployment:"deployments",StatefulSet:"statefulsets",DaemonSet:"daemonsets",Pod:"pods"};t.getAlertingResource=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e,t){var a=e.pod;return a&&a.startsWith(e[t])?{module:"pods",name:e.pod,namespace:e.namespace}:{module:"job_name"===t?"jobs":"".concat(t,"s"),name:e[t],namespace:e.namespace}};if(e.node)return{module:"nodes",name:e.node};if(e.namespace){if(e.workload)return{module:n[e.owner_kind],name:e.workload.replace("".concat(e.owner_kind,":"),""),namespace:e.namespace};if(e.job_name)return t(e,"job_name");if(e.cronjob)return t(e,"cronjob");if(e.hpa)return{module:"hpas",name:e.hpa,namespace:e.namespace};if(e.deployment)return t(e,"deployment");if(e.statefulset)return t(e,"statefulset");if(e.daemonset)return t(e,"daemonset");if(e.pod)return{module:"pods",name:e.pod,namespace:e.namespace};if(e.service)return{module:"services",name:e.service,namespace:e.namespace}}return{}};t.ALERTING_STATUS=["inactive","pending","firing"]},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.ALL_METRICS_CONFIG=t.RESOURCE_METRICS_CONFIG=void 0;var n=r(a(21)),l=r(a(1567)),u=r(a(1568)),o=r(a(1569));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s={node:l.default,workload:u.default,pod:o.default};t.RESOURCE_METRICS_CONFIG=s;var f=c(c(c({},l.default),u.default),o.default);t.ALL_METRICS_CONFIG=f},,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p=r(a(21)),m=r(a(56)),h=r(a(49)),v=r(a(50)),y=r(a(91)),g=r(a(12)),b=r(a(13)),E=r(a(74)),_=(r(a(92)),a(5)),O=r(a(16)),S=r(a(186)),k=a(280),C=a(37);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=(n=function(){function e(){(0,g.default)(this,e),(0,y.default)(this,"detail",l,this),(0,y.default)(this,"isLoading",u,this),(0,y.default)(this,"volumes",o,this),(0,y.default)(this,"logs",i,this),this.watchHandler=null,this.encryptKey=(0,O.default)(globals,"config.encryptKey","kubesphere"),this.module="containers",this.getDetailUrl=function(e){var t=e.cluster,a=e.namespace,r=e.podName,n=e.gateways,l="api/v1";return t&&(l+="/klusters/".concat(t)),n?"kapis/gateway.kubesphere.io/v1alpha1/namespaces/".concat("kubesphere-controls-system"!==a&&a?a:"kubesphere-system","/gateways/").concat(n,"/pods/").concat(r):"".concat(l,"/namespaces/").concat(a,"/pods/").concat(r)},this.getPath=function(e){var t=e.cluster,a="";return t&&(a+="/klusters/".concat(t)),a},(0,y.default)(this,"getDockerImagesLists",c,this),(0,y.default)(this,"getHarborImagesLists",s,this),(0,y.default)(this,"getHarborImageTag",f,this),(0,y.default)(this,"getImageDetail",d,this)}var t,a,r,n;return(0,b.default)(e,[{key:"fetchDetail",value:(n=(0,v.default)(h.default.mark((function e(t){var a,r,n,l,u,o,i;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=t.podName,l=t.containerName,this.isLoading=!0,e.next=4,request.get(this.getDetailUrl({cluster:a,namespace:r,podName:n}));case 4:return u=e.sent,o=S.default.pods(u),(i=o.containers.find((function(e){return e.name===l}))||o.initContainers.find((function(e){return e.name===l}))).createTime=(0,O.default)(o,"createTime",""),i.app=i.app||o.app,i.cluster=a,o.cluster=a,e.next=13,(0,k.getWorkloadVolumes)(o);case 13:this.volumes=e.sent,this.detail=i,this.isLoading=!1;case 16:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"watchLogs",value:(r=(0,v.default)(h.default.mark((function e(t,a){var r,n,l,u,o,i,c,s=this;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.cluster,n=t.namespace,l=t.podName,u=t.gateways,o=t.silent,i=(0,m.default)(t,["cluster","namespace","podName","gateways","silent"]),o||(this.logs.isLoading=!0),!i.follow){e.next=6;break}this.watchHandler=request.watch("".concat(this.getDetailUrl({cluster:r,namespace:n,podName:l,gateways:u}),"/log"),i,(function(e){s.logs={data:e,isLoading:!1},a()})),e.next=11;break;case 6:return e.next=8,request.get("".concat(this.getDetailUrl({cluster:r,namespace:n,podName:l,gateways:u}),"/log"),i);case 8:c=e.sent,this.logs={data:c,isLoading:!1},a();case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"stopWatchLogs",value:function(){this.watchHandler&&this.watchHandler.abort()}},{key:"checkPreviousLog",value:(a=(0,v.default)(h.default.mark((function e(t){var a,r,n,l,u;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=t.podName,l=(0,m.default)(t,["cluster","namespace","podName"]),e.next=3,request.get("".concat(this.getDetailUrl({cluster:a,namespace:r,podName:n}),"/log"),l,{},(function(){}));case 3:return u=e.sent,e.abrupt("return",!!u);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchAllLogs",value:(t=(0,v.default)(h.default.mark((function e(t){var a,r,n,l;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=t.podName,l=(0,m.default)(t,["cluster","namespace","podName"]),e.next=3,request.get("".concat(this.getDetailUrl({cluster:a,namespace:r,podName:n}),"/log"),l);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),l=(0,E.default)(n.prototype,"detail",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,E.default)(n.prototype,"isLoading",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=(0,E.default)(n.prototype,"volumes",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,E.default)(n.prototype,"logs",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:"",isLoading:!0}}}),(0,E.default)(n.prototype,"fetchDetail",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),(0,E.default)(n.prototype,"watchLogs",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"watchLogs"),n.prototype),(0,E.default)(n.prototype,"stopWatchLogs",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"stopWatchLogs"),n.prototype),(0,E.default)(n.prototype,"fetchAllLogs",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchAllLogs"),n.prototype),c=(0,E.default)(n.prototype,"getDockerImagesLists",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,v.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.post("dockerhub/api/content/v1/products/search",t,{headers:{"Search-Version":"v3"}},(function(){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),s=(0,E.default)(n.prototype,"getHarborImagesLists",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,v.default)(h.default.mark((function t(a){var r,n;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.params,n=a.harborData,t.next=3,request.post("harbor/search",{harborData:(0,C.encrypt)(e.encryptKey,JSON.stringify(n)),params:r});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),f=(0,E.default)(n.prototype,"getHarborImageTag",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,v.default)(h.default.mark((function t(a,r,n,l){return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request.post("harbor/artifacts",{harborData:(0,C.encrypt)(e.encryptKey,JSON.stringify(w(w({},a),{},{projectName:r,repositoryName:n}))),params:l});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,a,r,n){return t.apply(this,arguments)}}()}}),d=(0,E.default)(n.prototype,"getImageDetail",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,v.default)(h.default.mark((function t(a){var r,n,l,u;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.namespace,l=(0,m.default)(a,["cluster","namespace"]),t.next=3,request.get("kapis/resources.kubesphere.io/v1alpha3".concat(e.getPath({cluster:r}),"/namespaces/").concat(n,"/imageconfig"),l,null,(function(e,t){return t}));case 3:if(u=t.sent,"succeeded"===(0,O.default)(u,"status","succeeded")){t.next=6;break}return t.abrupt("return",{status:"failed",message:u.message});case 6:return t.abrupt("return",S.default.imageBlob(u));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),n);t.default=P},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(58),d=r(25),p=n(r(1219)),m=n(r(1220)),h=n(r(761));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).portsValidator=function(a,r,n){if(!r)return n();if(r.length>0){var l=[];r.forEach((function(a){return!a.name||!a.containerPort||e.props.withService&&!a.servicePort?n({message:t("INVALID_PORT")}):l.includes(a.name)?n({message:t("PORT_INPUT_DESC")}):a.name&&(a.name.length>15||!f.PATTERN_PORT_NAME.test(a.name))?n({message:t("WORKLOAD_PORT_NAME_DESC")}):void l.push(a.name)}))}n()},e.checkContainerPortValid=function(t){return e.props.withService?t&&t.name&&t.containerPort&&t.servicePort:t&&t.name&&t.containerPort},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.withService,r=e.className;return s.default.createElement(d.Form.Group,{className:r,label:t("PORT_SETTINGS"),desc:t("PORT_SETTINGS_DESC")},s.default.createElement(d.Form.Item,{rules:[{required:a,message:t("PORT_EMPTY")},{validator:this.portsValidator,checkOnSubmit:!0}]},s.default.createElement(h.default,{name:"".concat(this.prefix,"ports"),itemType:"object",addText:t("ADD_PORT"),checkItemValid:this.checkContainerPortValid},a?s.default.createElement(m.default,null):s.default.createElement(p.default,null))))}},{key:"prefix",get:function(){var e=this.props.prefix;return e?"".concat(e,"."):""}}]),r}(s.default.Component);a.default=y,y.defaultProps={prefix:""}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(56)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(3)),m=r(a(1699));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,i.default)(a,e);var t=y(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.prefix,a=e.suffix,r=e.children,n=(0,l.default)(e,["prefix","suffix","children"]),u=f.default.cloneElement(r,v(v({},r.props),{},{className:(0,p.default)({"ks-input-addons-prefix":!!t,"ks-input-addons-suffix":!!a},r.props.className)},n));return f.default.createElement("div",{className:(0,p.default)(m.default.wrapper,"ks-input-addons")},t&&f.default.createElement("div",{className:m.default.text},t),u,a&&f.default.createElement("div",{className:m.default.text},a))}}]),a}(f.default.Component);t.default=g,g.propTypes={prefix:d.default.any,suffix:d.default.any,name:d.default.string,value:d.default.any,onChange:d.default.func}},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(49)),o=n(r(50)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(16)),h=n(r(73)),v=n(r(3)),y=r(25),g=r(37),b=r(58),E=n(r(773)),_=n(r(823)),O=n(r(1243)),S=n(r(903)),k=n(r(1245)),C=n(r(1796));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var w=function(e){(0,s.default)(r,e);var a=R(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).fetchData=(0,o.default)(u.default.mark((function e(){var t,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.secretStore.fetchListByK8s({namespace:n.namespace,cluster:n.props.cluster,fieldSelector:"type=kubernetes.io/basic-auth"});case 2:t=e.sent,a=t.map((function(e){return{label:(0,g.getDisplayName)(e),value:e.name,type:"basic-auth"}})),n.setState({basicSecretOptions:a});case 5:case"end":return e.stop()}}),e)}))),n.fetchImageSecrets=(0,o.default)(u.default.mark((function e(){var t,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.secretStore.fetchListByK8s({namespace:n.namespace,cluster:n.props.cluster,fieldSelector:"type=kubernetes.io/dockerconfigjson"});case 2:t=e.sent,a=t.map((function(e){var t=(0,m.default)(e,'data[".dockerconfigjson"].auths',{}),a=Object.keys(t)[0]||"";return{label:(0,g.getDisplayName)(e),value:e.name,repoUrl:a,type:"dockerconfigjson"}})),n.setState({imageSecretOptions:a});case 5:case"end":return e.stop()}}),e)}))),n.getTemplateList=(0,o.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isGetTemplateListLoading:!0}),e.next=3,n.builderStore.getBuilderTemplate({cluster:n.props.cluster});case 3:t=e.sent,n.setState({builderTemplateLists:(0,m.default)(t,"items",[]),isGetTemplateListLoading:!1});case 5:case"end":return e.stop()}}),e)}))),n.handleImageTemplateChange=function(e){var t=e.environment,a=e.docUrl,r=(0,m.default)(globals,"user.lang","zh"),l=(t||[]).map((function(e){var t=(e.description||"").split(". "),a="zh"===r?(0,m.default)(t,"1",e.description):(0,m.default)(t,"0",e.description);return e.label="".concat(e.key,"  (").concat(a,")"),e.value=e.key,e}));n.setState({environment:l,docUrl:a})},n.handleSecretChange=function(){n.handleRepoReadableCheck()},n.handleImageSecretChange=function(e,t){var a=n.props.formTemplate,r=(0,m.default)(t,"[0]repoUrl","");(0,h.default)(a,"".concat(n.prefix,'metadata.annotations["kubesphere.io/repoUrl"]'),r)},n.handleRepoReadableCheck=(0,o.default)(u.default.mark((function e(){var a,r,l,o,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props.formTemplate,r=(0,m.default)(a,"".concat(n.prefix,"spec.config.sourceUrl"),"")){e.next=4;break}return e.abrupt("return");case 4:return n.setState({readRepoLoading:!0}),l=(0,m.default)(a,"".concat(n.prefix,"spec.config.gitSecretRef.name"),""),e.next=8,n.builderStore.verifyRepoReadable(r,l,n.namespace).finally((function(){n.setState({readRepoLoading:!1})}));case 8:if(o=e.sent,"success"!==(i=(0,m.default)(o,"message",""))){e.next=14;break}return n.setState({repoReadError:null}),l||n.setState({repoNeedSecret:!1}),e.abrupt("return");case 14:n.setState({repoReadError:{message:t(i)},repoNeedSecret:!0});case 15:case"end":return e.stop()}}),e)}))),n.secretStore=new E.default,n.builderStore=new _.default,n.state={isGetTemplateListLoading:!0,environment:[],basicSecretOptions:[],imageSecretOptions:[],repoReadError:null,repoNeedSecret:!0,readRepoLoading:!1,docUrl:""},n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.fetchImageSecrets(),this.getTemplateList(),this.handleRepoReadableCheck()}},{key:"renderAdvancedSetting",value:function(){return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:C.default.margin_b_10},p.default.createElement(y.Form.Item,{label:t("TRIGGER_TOKEN"),desc:t("TRIGGER_TOKEN_DESC"),rules:[{pattern:/^[a-zA-Z0-9]+$/,message:"".concat(t("INVALID_TRIGGER_TOKEN_DESC"))}]},p.default.createElement(y.Input,{name:"".concat(this.prefix,"spec.config.secretCode"),defaultValue:""}))),p.default.createElement("div",{className:C.default.margin_b_10},p.default.createElement(y.Form.Item,{label:t("CODE_RELATIVE_PATH"),desc:t("CODE_RELATIVE_PATH_DESC")},p.default.createElement(y.Input,{name:"".concat(this.prefix,"spec.config.contextDir"),defaultValue:"/"}))),p.default.createElement(y.Alert,{className:C.default.margin_b_10,message:t.html("S2I_ENVIRONMENT_DESC",{link:this.state.docUrl||(0,g.getDocsUrl)("s2i_template")}),type:"info"}),p.default.createElement(y.Form.Item,null,p.default.createElement(O.default,{name:"".concat(this.prefix,"spec.config.environment"),options:this.state.environment})))}},{key:"render",value:function(){var e=this.props,a=e.formTemplate,r=e.formRef,n=e.mode,u=e.prefix;return p.default.createElement(y.Form,{ref:r,data:a},p.default.createElement(k.default,{loading:this.state.isGetTemplateListLoading,formTemplate:u?a[u]:a,builderTemplate:this.state.builderTemplateLists,onEnvironmentChange:this.handleImageTemplateChange}),p.default.createElement("div",{className:(0,v.default)(C.default.columns,(0,l.default)({},C.default.columsEdit,"edit"===n))},p.default.createElement("div",{className:C.default.column},p.default.createElement(y.Loading,{spinning:this.state.readRepoLoading,size:18},p.default.createElement(y.Form.Item,{label:t("CODE_REPOSITORY_URL"),desc:t("CODE_REPOSITORY_URL_DESC"),error:this.state.repoReadError,rules:[{required:!0,message:t("PARAM_REQUIRED")}]},p.default.createElement(y.Input,{name:"".concat(this.prefix,"spec.config.sourceUrl"),onBlur:this.handleRepoReadableCheck})))),p.default.createElement("div",{className:"is-2"},p.default.createElement(y.Form.Item,{label:t("CODE_REPOSITORY_BRANCH"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},p.default.createElement(y.Input,{name:"".concat(this.prefix,"spec.config.revisionId"),defaultValue:"master"}))),p.default.createElement("div",{className:"is-half"},p.default.createElement(y.Loading,{spinning:this.state.readRepoLoading,size:18},p.default.createElement(y.Form.Item,{className:this.state.repoNeedSecret?"":C.default.disabled,label:t("CODE_REPOSITORY_KEY"),desc:this.state.repoNeedSecret?t("CODE_REPOSITORY_KEY_DESC"):t("CODE_REPOSITORY_KEY_NOT_REQUIRED")},p.default.createElement(y.Select,{onChange:this.handleSecretChange,options:this.state.basicSecretOptions,name:"".concat(this.prefix,"spec.config.gitSecretRef.name"),placeholder:" "}))))),p.default.createElement("div",{className:(0,v.default)(C.default.columns,(0,l.default)({},C.default.columsEdit,"edit"===n))},p.default.createElement("div",{className:C.default.column},p.default.createElement(y.Form.Item,{label:t("IMAGE_NAME"),desc:t("S2I_IMAGE_NAME_DESC"),rules:[{required:!0,message:t("PARAM_REQUIRED")},{pattern:b.PATTERN_IMAGE_NAME,message:t("INVALID_NAME_DESC",{message:t("S2I_IMAGE_NAME_DESC")})}]},p.default.createElement(y.Input,{name:"".concat(this.prefix,"spec.config.imageName")}))),p.default.createElement("div",{className:"is-2"},p.default.createElement(y.Form.Item,{label:t("IMAGE_TAG"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},p.default.createElement(y.Input,{name:"".concat(this.prefix,"spec.config.tag"),defaultValue:"latest"}))),p.default.createElement("div",{className:"is-half"},p.default.createElement(y.Form.Item,{label:t("TARGET_IMAGE_REPOSITORY"),desc:t.html("S2I_TARGET_IMAGE_REPOSITORY_DESC",{link:(0,g.getDocsUrl)("secrets")}),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},p.default.createElement(y.Select,{name:"".concat(this.prefix,"spec.config.pushAuthentication.secretRef.name"),options:this.state.imageSecretOptions,onChange:this.handleImageSecretChange,placeholder:" "})))),p.default.createElement(S.default,null,this.renderAdvancedSetting()))}},{key:"prefix",get:function(){var e=this.props.prefix;return e?"".concat(e,"."):""}},{key:"namespace",get:function(){return this.props.namespace}}]),r}(p.default.Component);a.default=w,w.defaultProps={mode:"create",prefix:""}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var s=function(e){(0,u.default)(a,e);var t=c(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).module="servicemonitors",e}return(0,l.default)(a,[{key:"apiVersion",get:function(){return"apis/monitoring.coreos.com/v1"}}]),a}(r(a(277)).default);t.default=s},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(49)),o=r(a(50)),i=r(a(91)),c=r(a(12)),s=r(a(13)),f=r(a(135)),d=r(a(19)),p=r(a(20)),m=r(a(18)),h=r(a(74)),v=(r(a(92)),r(a(16))),y=a(5),g=a(37),b=r(a(186));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var _=(n=function(e){(0,d.default)(r,e);var t,a=E(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).module="clusters",(0,i.default)(e,"parameters",l,(0,f.default)(e)),e}return(0,s.default)(r,[{key:"fetchParameters",value:(t=(0,o.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("api/v1/namespaces/kubekey-system/configmaps/kubekey-parameters",{},{},(function(){}));case 2:t=e.sent,this.parameters=(0,g.safeParseJSON)((0,v.default)(t,"data['parameters.json']",""),{});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"apis/kubekey.kubesphere.io/v1alpha1"}},{key:"mapper",get:function(){return b.default.kkclusters}}]),r}(r(a(277)).default),l=(0,h.default)(n.prototype,"parameters",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,h.default)(n.prototype,"fetchParameters",[y.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchParameters"),n.prototype),n);t.default=_},,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f=r(a(49)),d=r(a(109)),p=r(a(21)),m=r(a(56)),h=r(a(50)),v=r(a(91)),y=r(a(12)),g=r(a(13)),b=r(a(135)),E=r(a(19)),_=r(a(20)),O=r(a(18)),S=r(a(74)),k=(r(a(92)),r(a(190))),C=r(a(32)),R=r(a(291)),w=r(a(16)),P=a(5);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,O.default)(e);if(t){var n=(0,O.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,_.default)(this,a)}}var I=(n=function(e){(0,E.default)(P,e);var t,a,r,n,p,_,O,S=N(P);function P(){var e;(0,y.default)(this,P);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=S.call.apply(S,[this].concat(a))).module="cds",(0,v.default)(e,"list",l,(0,b.default)(e)),(0,v.default)(e,"clustersList",u,(0,b.default)(e)),(0,v.default)(e,"detail",o,(0,b.default)(e)),(0,v.default)(e,"syncResult",i,(0,b.default)(e)),(0,v.default)(e,"summary",c,(0,b.default)(e)),e.getListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/applications").concat(t.dryRun?"?dryRun=All":"")},e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/applications")},e.getDetailUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.getListUrl(t),"/").concat(t.name)},(0,v.default)(e,"setSelectRowKeys",s,(0,b.default)(e)),e}return(0,g.default)(P,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=e.workspace,n=e.devops,l="";return t&&(l+="/klusters/".concat(t)),r&&(l+="/workspaces/".concat(r)),a&&(l+="/namespaces/".concat(a)),n&&(l+="/devops/".concat(n)),l}},{key:"fetchList",value:(O=(0,h.default)(f.default.mark((function e(){var t,a,r,n,l,u,o,i,c=this,s=arguments;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.devops,t.workspace,r=t.cluster,n=t.more,l=(0,m.default)(t,["devops","workspace","cluster","more"]),this.list.isLoading=!0,l.limit!==1/0&&-1!==l.limit||(l.limit=-1,l.page=1),l.limit=l.limit||10,u="".concat(this.getResourceUrl({namespace:a,cluster:r})),e.next=7,request.get(u,T({},l),{},(function(){}));case 7:return o=e.sent,i=Array.isArray(o.items)?o.items.map((function(e){return T({},c.mapper(T(T({},e),{},{devops:a})))})):[],this.list.update(T(T({data:n?[].concat((0,d.default)(this.list.data),(0,d.default)(i)):i,total:o.totalItems||o.total_count||i.length||0},l),{},{limit:Number(l.limit)||10,page:Number(l.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"create",value:(_=(0,h.default)(f.default.mark((function e(t){var a,r,n,l,u;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,r=t.devops,n=t.cluster,l="".concat(this.getResourceUrl({namespace:r,cluster:n})),e.next=4,request.post(l,a);case 4:return u=e.sent,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"updateSync",value:(p=(0,h.default)(f.default.mark((function e(t){var a,r,n,l,u;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,r=t.application,n=t.devops,l=t.cluster,u="".concat(this.getResourceUrl({namespace:n,cluster:l}),"/").concat(r,"/sync"),e.abrupt("return",this.submitting(request.post(u,a)));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"update",value:(n=(0,h.default)(f.default.mark((function e(t,a){var r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(this.getResourceUrl({namespace:t.devops,cluster:t.cluster}),"/").concat(a.metadata.name),e.abrupt("return",this.submitting(request.put(r,a)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"patch",value:function(e,t){var a="".concat(this.getResourceUrl({namespace:e.devops,cluster:e.cluster}),"/").concat(t.metadata.name);return this.submitting(request.put(a,t))}},{key:"delete",value:function(e){var t=(0,k.default)(T(T({},e),{},{namespace:e.devops}),"devops");return this.submitting(request.delete("".concat(this.getDetailUrl(t)).concat(t.isRelated?"?cascade=true":"")))}},{key:"fetchDetail",value:(r=(0,h.default)(f.default.mark((function e(t){var a,r,n,l,u,o;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.isSilent,n=t.devops,l=t.cluster,r||(this.isLoading=!0),e.next=4,request.get("".concat(this.getResourceUrl({namespace:n,cluster:l}),"/").concat(a));case 4:return u=e.sent,o=this.mapper(T(T({},u),{},{devops:n})),this.detail=o,this.isLoading=!1,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getClustersList",value:(a=(0,h.default)(f.default.mark((function e(){var t,a,r,n,l;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.apiVersion,"/clusters"),e.next=3,request.get(t,null,null,(function(){return[]}));case 3:if(a=e.sent,r="default",!globals.app.isMultiCluster){e.next=11;break}return e.next=8,request.get("kapis/tenant.kubesphere.io/v1alpha2/clusters");case 8:n=e.sent,l=n.items.find((function(e){return(0,R.default)(e,'metadata.labels["cluster-role.kubesphere.io/host"]')})),r=(0,w.default)(l,"metadata.name","host");case 11:(0,C.default)(a)?this.clustersList=[{server:"https://kubernetes.default.svc",name:"in-cluster",label:r}]:this.clustersList=a.map((function(e){return T(T({},e),{},{label:"in-cluster"===e.name?r:e.name})})),globals.hostClusterName=r;case 13:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchStatusSummary",value:(t=(0,h.default)(f.default.mark((function e(t){var a,r,n,l;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.devops,r=t.cluster,n="".concat(this.apiVersion).concat(this.getPath({namespace:a,cluster:r}),"/application-summary"),e.next=4,request.get(n);case 4:l=e.sent,this.summary=l||{};case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),P}(r(a(277)).default),l=(0,S.default)(n.prototype,"list",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,order:"",filters:{},isLoading:!1,selectedRowKeys:[]}}}),u=(0,S.default)(n.prototype,"clustersList",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,S.default)(n.prototype,"detail",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=(0,S.default)(n.prototype,"syncResult",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,total:0,filters:{},isLoading:!1}}}),c=(0,S.default)(n.prototype,"summary",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=(0,S.default)(n.prototype,"setSelectRowKeys",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.list.selectedRowKeys=t}}}),(0,S.default)(n.prototype,"fetchList",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,S.default)(n.prototype,"create",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,S.default)(n.prototype,"updateSync",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"updateSync"),n.prototype),(0,S.default)(n.prototype,"update",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"update"),n.prototype),(0,S.default)(n.prototype,"patch",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"patch"),n.prototype),(0,S.default)(n.prototype,"delete",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"delete"),n.prototype),(0,S.default)(n.prototype,"fetchDetail",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),(0,S.default)(n.prototype,"getClustersList",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"getClustersList"),n.prototype),(0,S.default)(n.prototype,"fetchStatusSummary",[P.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchStatusSummary"),n.prototype),n);t.default=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(32)),h=n(r(274)),v=n(r(2029)),y=n(r(2031));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){(0,c.default)(r,e);var a=g(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.title,n=e.module,o=e.store,i=e.forms,c=e.onOk,s=e.onCancel,f=e.cluster,p=e.namespace,m=(0,u.default)(e,["visible","title","module","store","forms","onOk","onCancel","cluster","namespace"]);return d.default.createElement(h.default,(0,l.default)({width:1162,bodyClassName:y.default.body,title:t(r),visible:a,onCancel:s,hideFooter:!0},m),d.default.createElement(v.default,(0,l.default)({},m,{module:n,store:o,forms:i,cluster:f,namespace:p,data:this.formData,onSubmit:c,onCancel:s})))}},{key:"formData",get:function(){var e=this.props,t=e.detail,a=e.formData;return(0,m.default)(a)?t:a}}]),r}(d.default.Component);a.default=b,b.propTypes={visible:p.default.bool,title:p.default.string,module:p.default.string,store:p.default.object,forms:p.default.array,formData:p.default.object,detail:p.default.object,onOk:p.default.func,onCancel:p.default.func},b.defaultProps={visible:!1,title:"Edit",store:{},forms:[],formData:{},detail:{},onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(3)),d=r(25),p=n(r(740)),m=n(r(2065));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.readOnly;return s.default.createElement(d.Columns,{className:(0,f.default)(m.default.columns,a)},s.default.createElement(d.Column,{className:"is-7"},s.default.createElement(d.Form.Item,{rules:this.props.hostRules},s.default.createElement(d.Input,{name:this.props.hostName,placeholder:"".concat(t("EXAMPLE"),"192.168.1.10"),readOnly:r}))),s.default.createElement(d.Column,null,s.default.createElement(d.Form.Item,{rules:this.props.portRules},s.default.createElement(p.default,{min:0,max:65535,name:this.props.portName,onChange:this.onPortChange,defaultValue:this.props.defaultPort,readOnly:r,integer:!0}))))}}]),r}(s.default.Component);a.default=v,v.defaultProps={hostName:"Host",portName:"Port",defaultPort:9200,hostRules:[{required:!0,message:t("ENTER_SERVICE_ADDRESS")}],portRules:[{required:!0,message:t("PORT_NUMBER_EMPTY")}]}},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=r(25),h=n(r(2274));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(r,e);var a=v(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).getIconColr=function(){var e={primary:"#fff"};switch(t.props.type){default:case"info":e.secondary="#329dce"}return e},t.handleCancel=function(){t.setState({show:!1},(function(){var e=setTimeout((function(){t.props.onCancel(),clearTimeout(e)}),1e3)}))},t.state={show:e.visible},t}return(0,o.default)(r,[{key:"renderBtns",value:function(){var e=this.props,a=e.btns,r=e.confirmText,n=e.cancelText,l=e.onConfirm,u=e.isSubmitting;return a||f.default.createElement("div",null,f.default.createElement(m.Button,{onClick:this.handleCancel},t(n)),f.default.createElement(m.Button,{type:"control",onClick:l,loading:u},t(r)))}},{key:"renderCard",value:function(){var e,t=this.props,a=t.visible,r=t.width,n=t.title,u=t.content;if(!a)return null;var o=this.state.show,i={width:r};return f.default.createElement("div",{className:(0,p.default)(h.default.card,(e={},(0,l.default)(e,h.default.in,o),(0,l.default)(e,h.default.out,!o),e)),style:i},f.default.createElement("div",{className:h.default.cardMain},f.default.createElement("div",{className:h.default.title},f.default.createElement(m.Icon,{name:"information",size:20,color:this.getIconColr()}),f.default.createElement("strong",null,n)),f.default.createElement("div",{className:h.default.content},u)),f.default.createElement("div",{className:h.default.cardFoot},this.renderBtns()))}},{key:"render",value:function(){return f.default.createElement("div",{className:h.default.wrapper},this.renderCard())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.visible!==t.show?{show:e.visible}:null}}]),r}(f.default.PureComponent);a.default=y,y.propTypes={visible:d.default.bool,width:d.default.number,type:d.default.string,title:d.default.string,content:d.default.oneOfType([d.default.node,d.default.element]),btns:d.default.oneOfType([d.default.node,d.default.element]),confirmText:d.default.string,cancelText:d.default.string,onConfirm:d.default.func,onCancel:d.default.func,isSubmitting:d.default.bool},y.defaultProps={visible:!1,isSubmitting:!1,width:"auto",type:"info",title:"title",content:"content",confirmText:"Confirm",cancelText:"Cancel",onConfirm:function(){},onCancel:function(){}}},function(e,t,a){e.exports={pipelineCard:"uLmxymVsGkkYEf4yNccS6",pipelineCard__title:"_374bDv2bi1dgj-3Ep0nJtt","pipelineCard__title-error":"_2f_2SEsh5G2oZIyeNZAaOj",pipelineCard__content:"_1yZ2ddWm3YllTHSa1mSMac",pipelineCard__item:"_1j55rjwffi54nOaArMvQB2","pipelineCard-error":"rUnBDmlIjlvSq8C8rupWI",errorTip:"_1xCvRnuQl_HK5ABGqg_4Gt","pipelineCard-active":"_2RjzuvDfXn-yRmy6gVBXQ",content__title:"_1LbrO1eYXEftlLojLl8elX",content__title__error:"dL6e5rCCy45AlcnTNKd8c",content__title__noDetail:"dN_jyqpuK7-wjUCtyBwgQ",content__title__text:"_2i2A2H340NtX7tTERjbDnT",content__text:"_2TlASMvryC2WAexUpv5Pt5",content__detail:"_1EDW6C4SqJ_GXk04u0vtVo",pipeline_column:"_2Vr4U7R21ewKodQbQ3yxvA",addSteps:"_1XL2Tx9WZXsq6XUPqcr2-n",addBranchCard:"_1TrqGHHYXzKjWoHt9nGppf",conditions:"_1Clw9YoUbLC8bkdFwJyCp4",nestStage_content:"_8fLMHq9hBtobMpLMRVB6p",indentBorder:"pgY1DAUVAYW-QogDMobqg",nestsStage_detail:"_3vTIWGQ45B-Lpw4vdbSQIO"}},function(e,t,a){e.exports={sider:"_3y7-mTgYjs2dHEX56ZcZlC",sheet:"_1VTQEGDBWPuUTtcgiyEAOC",title:"vlfMOA3JURdw5nk7WeIqH",delete:"_1kpyCW22GDVJh1I5gLyodh",edit:"_17i-NSdS-P7GUZCw1-YPnt",describtion:"_1ZLAf7WvHoqwp-0F-8tdTc",form:"_1LP-CIeypBa9wbadIjZn8d",name_input:"_1JAZWUE9yJWoVQUSCQPHM7",form_lable:"_5Q1qFPpM3eL-rJAdDuEs-",footer:"_3bSiW6kTLb3kTBF6VFFXXK",clickable:"_23bCX01Ss7OCfh3hJlUDtX",pipelineCard__item__drag:"_2c5vlHp7UGoWb30NL5EO4d",conditionList:"_3v2nj92lVAeDDd8IDTPLPt"}},,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s=n(r(91)),f=n(r(12)),d=n(r(13)),p=n(r(135)),m=n(r(19)),h=n(r(20)),v=n(r(18)),y=(n(r(92)),n(r(74))),g=n(r(0)),b=n(r(3)),E=r(5),_=r(70),O=n(r(68)),S=n(r(16)),k=n(r(32)),C=n(r(3675)),R=n(r(2482)),w=n(r(2484)),P=n(r(2485)),D=r(25),T=n(r(2486));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var I=(0,_.observer)((c=i=function(e){(0,m.default)(r,e);var a=N(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).measureCache=new w.default({fixedWidth:!0,minHeight:e.props.defaultRowHeight}),e.clearMeasurerCache=function(){e.measureCache.clearAll()},e.onTrClick=function(t){var a=t.target,r=t.currentTarget,n=function e(t){var a=(0,S.default)(t,"dataset.itemIndex");if(t!==r)return(0,O.default)(a)?e(t.parentNode):a}(a);if(!(0,O.default)(n)){var l=e.props.data[n];e.props.onTrClick&&e.props.onTrClick(l)}},(0,s.default)(e,"toggleCol",o,(0,p.default)(e)),e.handleRefresh=function(){location.reload()},e.renderDropdownContent=function(){return g.default.createElement("div",{className:T.default.dropdown},g.default.createElement("h3",null,t("CUSTOM_COLUMNS")),e.dropDownCols.map((function(t,a){return g.default.createElement("div",{key:t.thead,className:T.default.visibleItem,"data-index":a,onClick:e.toggleCol},g.default.createElement(D.Icon,{name:t.hidden?"eye-closed":"eye"}),g.default.createElement("span",null,t.thead))})))},e.renderItem=function(t){var a=t.index,r=t.key,n=t.parent,l=t.style,u=e.props.data[a]||{};return g.default.createElement(P.default,{key:r,parent:n,columnIndex:0,rowIndex:a,cache:e.measureCache},g.default.createElement("div",{style:l},g.default.createElement("div",{"data-item-index":a,className:(0,b.default)(T.default.tr,e.props.trCLassName)},e.visibleCol.map((function(e){return g.default.createElement("div",{key:e.key,className:(0,b.default)(T.default.bodyItems,e.className)},e.content(u))})))))},e}return(0,d.default)(r,[{key:"componentDidUpdate",value:function(){this.clearMeasurerCache()}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,r=t.body,n=t.tableRef,l=t.onScroll,u=a.length;return g.default.createElement("div",{className:T.default.table},this.renderTitle(),g.default.createElement("div",{className:(0,b.default)(T.default.body,r),onClick:this.onTrClick},g.default.createElement(R.default,{onResize:this.CellMeasurerCache},(function(t){var r=t.width,o=t.height;return g.default.createElement(C.default,{ref:n,width:r,height:o,overscanRowCount:10,rowRenderer:e.renderItem,onScroll:l,rowCount:u,rowHeight:e.measureCache.rowHeight,deferredMeasurementCache:e.measureCache,data:a,visibleCol:e.visibleCol})}))))}},{key:"renderTitle",value:function(){return g.default.createElement("div",{className:(0,b.default)(T.default.header,this.props.header)},this.visibleCol.map((function(e){return g.default.createElement("div",{key:e.key,className:(0,b.default)(T.default.headerItems,e.className)},e.thead)})),(0,k.default)((0,E.toJS)(this.dropDownCols))?null:g.default.createElement("div",{className:T.default.visibleBtn},g.default.createElement(D.Dropdown,{content:this.renderDropdownContent(),onOpen:this.handleOpen,onClose:this.handleClose},g.default.createElement("div",null,t("CUSTOM_COLUMNS")," ",g.default.createElement(D.Icon,{name:"cogwheel"})))))}},{key:"dropDownCols",get:function(){return this.props.cols.filter((function(e){return!e.mustShow}))}},{key:"visibleCol",get:function(){return this.props.cols.filter((function(e){return!e.hidden}))}}]),r}(g.default.Component),i.defaultProps={defaultRowHeight:32},u=c,(0,y.default)(u.prototype,"dropDownCols",[E.computed],Object.getOwnPropertyDescriptor(u.prototype,"dropDownCols"),u.prototype),(0,y.default)(u.prototype,"visibleCol",[E.computed],Object.getOwnPropertyDescriptor(u.prototype,"visibleCol"),u.prototype),o=(0,y.default)(u.prototype,"toggleCol",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.currentTarget.dataset.index,r=e.dropDownCols[a];r.hidden=!r.hidden,e.clearMeasurerCache()}}}),l=u))||l;a.default=I},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.handleStrTimeToX=t.getListConfig=t.getFetchParams=t.handleWSChartData=t.filterResourceLevel=t.filterListByType=t.hasNameSpacesType=t.handleLabelSelector=t.handleNodeParams=t.handleWorkloadToKind=t.handleValueByUnit=t.fillEmptyMeterValue=t.getResourceFilters=t.getMetricsFilters=t.getTimeParams=t.getTimeRange=t.getRetentionDay=t.handleLevelParams=t.handleSortBySourceType=t.getFormatTime=t.getMeterFilterByDic=t.getMeterFilter=void 0;var n=r(a(49)),l=r(a(50)),u=r(a(56)),o=r(a(109)),i=r(a(21)),c=r(a(16)),s=r(a(23)),f=r(a(32)),d=r(a(185)),p=r(a(68)),m=r(a(354)),h=r(a(944)),v=a(834),y=a(296),g=a(289),b=a(37),E=a(725),_=a(768),O=r(a(137));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=function(e){var t=v.RESOURCES_METER_TYPE[e],a={cpu:"meter_".concat(t,"_cpu_usage"),memory:"meter_".concat(t,"cluster"===t||"workspace"===t?"_memory_usage":"_memory_usage_wo_cache"),net_transmitted:"meter_".concat(t,"_net_bytes_transmitted"),net_received:"meter_".concat(t,"_net_bytes_received")};switch(t){case"cluster":case"node":case"workspace":case"application":case"namespace":a.disk="meter_".concat(t,"_pvc_bytes_total")}return function(e){if("all"===e)return a;var t={};return e.forEach((function(e){t[e]=a[e]})),t}};t.getMeterFilter=C;var R=function(e){var t,a=v.RESOURCES_METER_TYPE[e];return t={},(0,i.default)(t,"meter_".concat(a,"_cpu_usage"),"cpu"),(0,i.default)(t,"meter_".concat(a,"_memory_usage"),"memory"),(0,i.default)(t,"meter_".concat(a,"_memory_usage_wo_cache"),"memory"),(0,i.default)(t,"meter_".concat(a,"_pvc_bytes_total"),"disk"),(0,i.default)(t,"meter_".concat(a,"_net_bytes_transmitted"),"net_transmitted"),(0,i.default)(t,"meter_".concat(a,"_net_bytes_received"),"net_received"),t};t.getMeterFilterByDic=R;t.getFormatTime=function(e,t){return(0,b.getLocalTime)(Number(e)).format(t?"YYYY-MM-DD HH:mm":"HH:mm:ss").replace(/:00$/g,"")};t.handleSortBySourceType=function(e){if((0,f.default)(e))return[];var t=(0,d.default)(e);return t.length<2?t:(v.MERTER_TYPE.forEach((function(e,a){var r=t.findIndex((function(t){return!(0,f.default)(t)&&t.type===e}));if(a!==r&&r>=0){var n=t[r];t[r]=t[a],t[a]=n}})),t=t.filter((function(e){return!!e})))};t.handleLevelParams=function(e){var t=e.module,a=v.RESOURCES_METER_TYPE[t];return{level:"Level".concat((0,m.default)(a))}};t.getRetentionDay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"7d";return(0,O.default)().endOf("day").add(1,"second").subtract(1,"day").subtract(e.slice(0,-1),"day")};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,a=void 0===t?"600s":t,r=e.times,n=void 0===r?20:r,l=parseFloat(a)*n,u=Math.floor((0,O.default)().endOf("day").add(1,"second").subtract(1,"day")/1e3),o=Math.floor(u-l);return{start:o,end:u}};t.getTimeRange=w;t.getTimeParams=function(e){var t=e.isTime,a=e.start,r=e.end,n=e.step,l=void 0===n?"1h":n,u={};if(t){var o=l;if(!r||!a){var i=w({step:(0,_.getMinuteValue)(l)});u.start=i.start,u.end=i.end}a&&(u.start=Math.floor(a/1e3)),r&&(u.end=Math.floor(r/1e3)),Math.floor((u.end-u.start)/3600/24)>=30&&(o="1d"),u.step=(0,_.getMinuteValue)(o)}return u};t.getMetricsFilters=function(e){var t=e.meters,a=e.module,r=[];if((0,f.default)(t)||(0,h.default)(C(a)(t),(function(e){r.push(e)})),!(0,f.default)(r))return{metrics_filter:r.join("|")}};t.getResourceFilters=function(e){var t=e.resources,a=e.module;if(!(0,f.default)(t)){var r=t.join("|"),n={};switch(a){case"applications":n={applications:r};break;case"openpitrixs":n={openpitrixs_ids:r};break;case"services":n={services:r};break;default:n={resources_filter:t.join("|")}}return n}};t.fillEmptyMeterValue=function(e,t){if(!e.step||!e.start||!e.end)return t;var a,r=e.step,n=Math.floor((e.end-e.start)/r)+1;if(((0,p.default)(t)||!(0,s.default)(t)?0:t.length)<n){for(var l=[],u=0;u<n-t.length;u++){var i=(a=e.start+u*r,String(a).replace(/\..*$/,""));l.push([i,"0"])}return[].concat(l,(0,o.default)(t))}return t};t.handleValueByUnit=function(e,t){var a=(0,d.default)(e);a.type=R(t)[a.type];var r="net_received"===a.type||"net_transmitted"===a.type?"number":a.type,n=v.UNIT_CONFIG[r];return Object.keys(a).forEach((function(e){e.indexOf("_value")>-1&&(a[e]=(0,E.getValueByUnit)(a[e],n.value,3),a.unit=n)})),a};t.handleWorkloadToKind=function(e){var t=e.deployments,a=e.statefulsets,r=e.daemonsets,n={};return t&&(n.kind="deployments"),a&&(n.kind="statefulsets"),r&&(n.kind="daemonsets"),n};t.handleNodeParams=function(e){var t=e.nodes,a=e.pods,r=e.resources;if(t&&a&&r.length>1)return{resources_filter:void 0}};var P=function(e){var t="";return!e||(0,f.default)(e)?t:(Object.keys(e).forEach((function(a){t+="".concat(a,"=").concat(e[a],",")})),t=t.slice(0,-1))};t.handleLabelSelector=P;t.hasNameSpacesType=function(e){return["services","deployments","statefulsets","daemonsets","pods"].indexOf(e)>-1};t.filterListByType=function(e){var t=e.type,a=(0,u.default)(e,["type"]);return(a.services||a.deployments||a.statefulsets||a.daemonsets)&&"pods"===t&&(0,f.default)(a.labelSelector)?function(){return!1}:function(){return!0}};var D=function(){var e=(0,l.default)(n.default.mark((function e(t){var a,r,l,o,i,s,m,h,v,y,g,b,E;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.levelMeterData,r=t.type,l=t.data,o=t.levelKey,i=(0,u.default)(t,["levelMeterData","type","data","levelKey"]),s=o||i.namespaces,m=(0,c.default)(a,s),h=[],v=[],y="applications"===r?"apps":r,!["services","deployments","statefulsets","daemonsets"].includes(r)){e.next=23;break}if(!i.applications&&!i.openpitrixs){e.next=19;break}return g=(0,d.default)(i),b=i.applications||i.openpitrixs,E=i.applications?"apps":"openpitrixs",s="".concat(s,".").concat(E,".").concat(b),delete g.openpitrixs,delete g.applications,e.next=16,D(k({levelMeterData:a,type:r,data:l,levelKey:s},g));case 16:v=e.sent,e.next=21;break;case 19:h=m&&m[y]?Object.keys(m[y]):[],v=l.map((function(e){var t=h.find((function(t){return t===e.name}));return(0,p.default)(t)||(0,f.default)(t)?void 0:e}));case 21:e.next=29;break;case 23:if("applications"!==r&&"openpitrixs"!==r){e.next=28;break}h=m[y]?Object.keys(m[y]):[],v=l.map((function(e){var t=h.find((function(t){return t===e.name||t===e.cluster_id}));return(0,p.default)(t)||(0,f.default)(t)?void 0:e})),e.next=29;break;case 28:return e.abrupt("return",l);case 29:return v=v.filter((function(e){return!(0,p.default)(e)})),e.abrupt("return",v);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.filterResourceLevel=D;t.handleWSChartData=function(e){var t,a=e.levelMeterData,r=e.meters,n=e.type,l=e.params;switch(n){case"applications":case"openpitrixs":t=function(e,t,a,r){var n=[],l="applications"===r?"apps":"openpitrixs",u=e[t.namespaces]["".concat(l)];return!(0,f.default)(u)&&Object.keys(u).forEach((function(e){if(u[e]){var t=u[e][v.METER_RESOURCE_USAGE[a]]||0,l=v.UNIT_CONFIG[a];n.push({name:e,value:(0,E.getValueByUnit)(t,l.value,3),unit:l.label,type:r})}})),n}(a,l,r,n);break;case"services":case"deployments":case"statefulsets":case"daemonsets":t=function(e,t,a,r){var n=[],l="";if(a.applications||a.openpitrixs){var u=a.applications?"apps":"openpitrixs";l=e[a.namespaces][u];var o=a.applications||a.openpitrixs,i=Object.keys(l).find((function(e){return e.indexOf(o)>-1}));l=l[i][t]}else l=e[a.namespaces][t];return!(0,f.default)(l)&&Object.keys(l).forEach((function(e){var a=(0,c.default)(l,"".concat(e,".").concat(v.METER_RESOURCE_USAGE[r]),0),u=v.UNIT_CONFIG[r];n.push({name:e,value:(0,E.getValueByUnit)(a,u.value,3),unit:u.label,type:t})})),n}(a,n,l,r);break;default:t=function(e,t,a,r){var n=[],l="";if(a.applications||a.openpitrixs){var u=a.applications?"apps":"openpitrixs";l=e[a.namespaces][u];var o=a.applications||a.openpitrixs,i=Object.keys(l).find((function(e){return e.indexOf(o)>-1}));l=l[i]}else l=e[a.namespaces];return a.deployments&&(l=l.deployments[a.deployments][t]),a.services&&(l=l.services[a.services][t]),a.statefulsets&&(l=l.statefulsets[a.statefulsets][t]),a.daemonsets&&(l=l.daemonsets[a.daemonsets][t]),!(0,f.default)(l)&&Object.keys(l).forEach((function(e){var a=(0,c.default)(l,"".concat(e,".").concat(v.METER_RESOURCE_USAGE[r]),0),u=v.UNIT_CONFIG[r];n.push({name:e,value:(0,E.getValueByUnit)(a,u.value,3),unit:u.label,type:t})})),n}(a,n,l,r)}return t};t.getFetchParams=function(e){var t=e.isMultiCluster,a=e.type,r=e.cluster,n=e.namespaces,l=e.workspaces,o=e.applications,i=e.openpitrixs,c=(0,u.default)(e,["isMultiCluster","type","cluster","namespaces","workspaces","applications","openpitrixs"]),s=globals.app.hasPermission({module:"clusters",action:"view"});return{cluster:t||!s?[{page:1,limit:-1}]:[{page:1,limit:-1,labelSelector:"cluster-role.kubesphere.io/host"},{page:1,limit:-1,labelSelector:"!cluster-role.kubesphere.io/host"}],nodes:[{limit:-1,page:1,cluster:r}],workspaces:[{limit:-1,page:1,namespace:n,workspace:l}],namespaces:[{page:1,limit:-1,cluster:r,namespace:n,workspace:l,labelSelector:"!kubesphere.io/devopsproject"}],openpitrixs:[{page:1,limit:-1,workspace:l,cluster:r,namespace:n,openpitrix:i}],applications:[{page:1,limit:-1,workspace:l,cluster:r,namespace:n,application:o}],services:[{page:1,limit:-1,cluster:r,namespace:n,labelSelector:P(c.labelSelector)}],deployments:[{page:1,limit:-1,cluster:r,namespace:n,labelSelector:P(c.labelSelector)}],statefulsets:[{page:1,limit:-1,cluster:r,namespace:n,labelSelector:P(c.labelSelector)}],daemonsets:[{page:1,limit:-1,cluster:r,namespace:n,labelSelector:P(c.labelSelector)}],pods:[{page:1,limit:-1,cluster:r,namespace:n,labelSelector:P(c.labelSelector),nodeName:c.nodes,ownerKind:c.statefulsets?"StatefulSet":c.deployments?"ReplicaSet":void 0}]}[a]};t.getListConfig=function(e){var t=e.type;return{cluster:e.isMultiCluster?[{status:function(e){return e.isReady?"ready":"stop"},desc:""}]:[{status:function(e){return e.isReady?"ready":"stop"},desc:"Host Cluster"},{status:function(e){return e.isReady?"ready":"stop"},desc:"Member Cluster"}],nodes:[{status:function(e){return(0,y.getNodeStatus)(e)},desc:v.RESOURCE_TITLE[t]}],workspaces:[{desc:v.RESOURCE_TITLE[t]}],namespaces:[{status:function(e){return e.status},desc:v.RESOURCE_TITLE[t]}],applications:[{status:function(e){return e.status||""},desc:v.RESOURCE_TITLE[t]}],openpitrixs:[{status:function(e){return e.status||""},desc:v.RESOURCE_TITLE[t]}],services:[{desc:v.RESOURCE_TITLE[t]}],daemonsets:[{status:function(e){var a=(0,g.getWorkloadStatus)(e,t).status;return a},desc:v.RESOURCE_TITLE[t]}],deployments:[{status:function(e){var a=(0,g.getWorkloadStatus)(e,t).status;return a},desc:v.RESOURCE_TITLE[t]}],statefulsets:[{status:function(e){var a=(0,g.getWorkloadStatus)(e,t).status;return a},desc:v.RESOURCE_TITLE[t]}],pods:[{status:function(e){return(0,c.default)(e,"podStatus.status","")},desc:v.RESOURCE_TITLE[t]}]}[t]};t.handleStrTimeToX=function(e){return 1e3*(0,O.default)(e).format("X")}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(71)),u=n(a(56)),o=n(a(12)),i=n(a(13)),c=n(a(19)),s=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(1)),m=n(a(3)),h=n(a(2596));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(a,e);var t=v(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.name,r=e.value,n=(0,u.default)(e,["className","name","value"]);return d.default.createElement("div",(0,l.default)({className:(0,m.default)(h.default.label,t)},n),d.default.createElement("span",{className:h.default.name},a),r)}}]),a}(d.PureComponent);t.default=y,y.propTypes={className:p.default.string,name:p.default.string,value:p.default.string},y.defaultProps={name:"",value:""}},function(e,t,a){e.exports={wrapper:"k0vk_c1ZyPCRUMMpipwCh",titleWrapper:"_2uqWBIFfRH4KunvhbfjI7B",icon:"_1ItfxPdCoCJbI5IBYM8qFz",title:"ThEs3yhp382IH4lTVQgX5",more:"_1b6Sz4BPMxD6xHHK-kt11i",tip:"_2L9SGDIY7BXd_hPf_5P6Rh",tipIcon:"_3SM5xM4niT8oxCDuqIJ7II",operations:"oN75oPJD3rroOyRPHKbui",tipContent:"_1bQzGX9rIXqPoeFOyVVDT8",tabsWrapper:"_2_45-StQhVb_5fgk6w8OF9"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(19)),u=r(a(20)),o=r(a(18)),i=r(a(190));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var s=function(e){(0,l.default)(a,e);var t=c(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).handleParams=function(e){return(0,i.default)(e,["cluster","workspace"])},e.getApi=function(t){var a=t.workspace,r=t.namespace,n="/namespaces";return n+=r?"/".concat(r):"",a&&!r&&(n="/workspaces/".concat(a).concat(n)),"".concat(e.apiVersion).concat(n)},e}return a}(r(a(768)).default);t.default=s},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.className,r=void 0===a?"":a,n=e.content,l=(0,o.useState)(!0),f=(0,u.default)(l,2),d=f[0],p=f[1];return o.default.createElement("div",{className:(0,c.default)(s.default.manage,r)},o.default.createElement(i.Dropdown,{theme:"dark",content:n,trigger:"click",placement:"bottomRight",onClick:function(){return p(!d)}},o.default.createElement("div",{className:s.default.button},o.default.createElement("span",null,t("MANAGE")),o.default.createElement(i.Icon,{name:d?"caret-down":"caret-up",type:"dark"}))))};var u=l(r(136)),o=n(r(0)),i=r(25),c=l(r(3)),s=l(r(2781))},function(e,t,a){e.exports={item:"_3Xoun1GGSpEsfE5aWEQ9Yv",monitoring:"_1aOl615oh8Ih9fUPtTBhfd",bar:"_20RAGHBL8fX-ti-BXPuzBO",notify:"_18sX1j09auA6ziIaU1CBUz",title:"_1lF530kFIwcrEQtvNYNrCc",content:"_1ZPod2F51gAOcCH6rfumRQ",query:"_3hS2kcE73dceWq08WzoKaq"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(109)),c=n(r(136)),s=n(r(21)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(0)),y=r(5),g=r(70),b=r(2965),E=r(25),_=n(r(723)),O=r(37),S=n(r(3)),k=n(r(32)),C=n(r(23)),R=r(635),w=r(58),P=n(r(2966)),D=n(r(2968));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var N=(0,g.inject)("rootStore")(l=(0,g.observer)(l=(0,R.trigger)((o=u=function(e){(0,p.default)(r,e);var a=T(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).handleMoreMenuClick=function(t,a){var r=e.props.match.params.namespace,n=e.props,l=n.type;switch(n.isFederated&&localStorage.setItem("federated-cluster",e.cluster),a){case"view":e.props.rootStore.routing.push(e.linkUrl);break;case"edit":e.trigger("gateways.edit",{cluster:e.cluster,namespace:"cluster"===l?"":r,detail:(0,y.toJS)(e.gateway._originData),store:e.store,success:e.props.getData});break;case"update":e.trigger("gateways.update",{cluster:e.cluster,namespace:r,detail:(0,y.toJS)(e.gateway._originData),store:e.store,success:e.props.getData});break;case"delete":e.trigger("gateways.delete",{cluster:e.cluster,type:"cluster"===e.props.type?"CLUSTER_GATEWAY":"PROJECT_GATEWAY",namespace:r,detail:(0,y.toJS)(e.gateway),store:e.store,success:e.props.getData})}},e.title=function(){var a=e.gateway.createTime;return v.default.createElement(v.default.Fragment,null,v.default.createElement("span",null,"project"===e.props.type?t("PROJECT_GATEWAY"):t("CLUSTER_GATEWAY")),a?null:v.default.createElement(E.Tooltip,{content:t("UPDATE_GATEWAY_DESC"),placement:"top"},v.default.createElement(E.Icon,{name:"update",color:{primary:"#f5a623 ",secondary:"#ffe1be"}})))},e.handleCreateGateway=function(){var t=e.props.match.params.namespace,a=e.props,r=a.type,n=a.getData;e.trigger("gateways.create",{name:"cluster"===r?"kubesphere-router-kubesphere-system":"",namespace:"cluster"===r?"kubesphere-controls-system":t,cluster:e.cluster,store:e.store,success:n})},e.renderInternetAccess=function(){var a=e.props,r=a.isFederated,n=a.title;return v.default.createElement(v.default.Fragment,null,n,v.default.createElement(_.default,{className:(0,S.default)("margin-t12",(0,s.default)({},D.default.federatedContainer,r))},e.gatewayConfig.map((function(e,a){return v.default.createElement("div",{className:D.default.container,key:a},e.map((function(e){return e.icon?v.default.createElement("div",{className:D.default.header,key:e.key},"string"==typeof e.icon?v.default.createElement(E.Icon,{name:e.icon,size:40}):v.default.createElement("span",{className:D.default.customIcon},e.icon),v.default.createElement("div",{className:D.default.item},v.default.createElement("div",null,e.title),v.default.createElement("p",null,e.desc))):e.component?v.default.createElement("div",{className:(0,S.default)(D.default.item,"text-right"),key:e.key},e.component):v.default.createElement("div",{className:D.default.item,key:e.key},v.default.createElement("div",null,e.title),v.default.createElement("p",null,t(e.desc)))})))})),"NodePort"!==e.gateway.type&&v.default.createElement("div",{className:(0,S.default)(D.default.annotations,(0,s.default)({},D.default.bgWhite,r))},v.default.createElement("p",null,t("ANNOTATION_PL")),v.default.createElement("ul",null,(0,k.default)(e.gateway.annotations)?v.default.createElement("li",null,t("NO_DATA")):Object.entries(e.gateway.annotations).map((function(e){var t=(0,c.default)(e,2),a=t[0],r=t[1];return v.default.createElement("li",{key:a},v.default.createElement("span",{className:D.default.key},a),v.default.createElement("span",null,r))}))))))},e}return(0,d.default)(r,[{key:"getNodePorts",value:function(e){return e.ports?e.ports.map((function(e){return"".concat(e.name,":").concat(e.nodePort)})).join("; "):"-"}},{key:"getExternalIP",value:function(e){var t="-";return(0,k.default)(e.loadBalancerIngress)?(0,k.default)(e.externalIPs)||(t=e.externalIPs.join("; ")):t=e.loadBalancerIngress.join("; "),t}},{key:"renderMoreMenu",value:function(){return v.default.createElement(E.Menu,{onClick:this.handleMoreMenuClick},this.itemActions.map((function(e){return v.default.createElement(E.Menu.MenuItem,{key:e.key,disabled:e.disabled},v.default.createElement(E.Icon,{name:e.icon,type:"light"})," ",e.text)})))}},{key:"render",value:function(){var e=this.props.match.params,t=e.component,a=e.namespace,r=this.props,n=r.type,l=r.title,u=r.gatewayList,o=(0,C.default)(u)&&u[0]&&!u[1];return v.default.createElement("div",null,this.isEmptyData?a&&"cluster"===n||o&&a&&"project"===n?null:v.default.createElement(v.default.Fragment,null,l,v.default.createElement(P.default,{component:t,type:n,handleCreateGateway:this.handleCreateGateway,cluster:this.cluster,canEdit:this.canEdit})):this.renderInternetAccess())}},{key:"gateway",get:function(){return this.props.detail}},{key:"store",get:function(){return this.props.store}},{key:"isEmptyData",get:function(){return(0,k.default)((0,y.toJS)(this.gateway))}},{key:"canEdit",get:function(){return this.props.actions&&!this.props.actions.includes("manage")}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.isFederated?this.props.cluster.name:e}},{key:"itemActions",get:function(){var e=this.canEdit||null!=this.gateway.createTime,a=[{key:"view",icon:"eye",text:t("VIEW_DETAILS"),disabled:this.canEdit||null==this.gateway.createTime},{key:"edit",icon:"pen",text:t("EDIT"),disabled:this.canEdit||null==this.gateway.createTime},{key:"delete",icon:"trash",text:t("DISABLE"),disabled:this.canEdit}],r={key:"update",icon:"update",text:t("UPDATE"),disabled:e};return!e&&a.splice(2,0,r),a}},{key:"linkUrl",get:function(){var e=this.props.prefix;return e?"".concat(e,"/").concat(this.gateway.name):"/clusters/".concat(this.cluster,"/gateways/cluster/").concat(this.gateway.name)}},{key:"gatewayConfig",get:function(){var e=this.gateway,a=e.creator,r=e.createTime,n=e.replicas,l=e.type,u=e.ports,o=e.loadBalancerIngress,c=e.serviceMeshEnable,s=e.lb,f=this.props.renderOperations,d=(0,k.default)(u)?"-":u.map((function(e){return"".concat(e.name.toUpperCase(),": ").concat("NodePort"===l?e.nodePort:e.port)})).join("/"),p=(0,k.default)(o)?"-":o.join(";"),m=[].concat((0,i.default)(w.CLUSTER_PROVIDERS),[{label:"OpenELB",value:"OpenELB",icon:"kubernetes"}]),h=s&&m.find((function(e){return e.value===s})).icon,y=globals.app.hasPermission({module:"clusters",action:"view"})&&"cluster"===this.props.type;return[[{key:"clusterType",icon:"loadbalancer",title:this.title(),desc:t("TYPE")},{key:"author",title:a||"-",desc:t("CREATOR")},{key:"createTime",title:r?(0,O.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss"):"-",desc:t("CREATION_TIME")},{key:"edit",component:f?f({url:this.linkUrl,disabled:!y||(0,k.default)(r)}):v.default.createElement(E.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},v.default.createElement(E.Button,null,t("MANAGE")))}],[{key:"method",icon:"eip-group",title:l,desc:t("ACCESS_MODE_SCAP")},s?{key:"lb",icon:h,title:s,desc:t("LOAD_BALANCER_PROVIDER_SCAP")}:{key:"ip",icon:"ip",title:p,desc:t("GATEWAY_ADDRESS_SCAP")},{key:"earth",icon:"earth",title:d,desc:t("NODE_PORTS_SCAP")},{key:"pod",icon:"pod",title:n,desc:1===n?t("REPLICA"):t("REPLICA_PL")},{key:"appGover",icon:v.default.createElement(b.ReactComponent,null),title:c?t("ON"):t("OFF"),desc:t("TRACING")}]]}}]),r}(v.default.Component),u.defaultProps={type:"cluster"},l=o))||l)||l)||l;a.default=N},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(73)),p=n(r(299)),m=n(r(0)),h=r(25),v=n(r(774)),y=n(r(1670));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=g(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e)).handleChange=function(e){var a=t.props.onChange,r=(0,f.default)(e,"backend.service.port.number");(0,p.default)(r)&&(0,d.default)(e,"backend.service.port.number",Number(r)),(0,d.default)(e,"pathType","ImplementationSpecific"),a&&a(e)},t.handleServiceChange=function(e){t.setState({service:e})};var n=(0,f.default)(t.props,"value.backend.service.name");return t.state={service:n,defaultService:n},t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.services.map((function(e){return e.value}));return m.default.createElement(v.default,(0,l.default)({},this.props,{onChange:this.handleChange}),m.default.createElement(h.Input,{name:"path",placeholder:t("PATH"),defaultValue:"/"}),m.default.createElement(h.AutoComplete,{className:y.default.autocomplete,name:"backend.service.name",placeholder:t("PATH_SERVICE_TIP"),onChange:this.handleServiceChange,options:e}),m.default.createElement(h.Select,{className:y.default.input,name:"backend.service.port.number",placeholder:t("PORT"),options:this.ports,searchable:!0}))}},{key:"services",get:function(){return this.props.services.map((function(e){return{label:e.name,value:e.name}}))}},{key:"ports",get:function(){var e=this,t=this.props.services.find((function(t){return t.name===e.state.service}));return t?t.ports.map((function(e){return{label:e.port,value:e.port}})):[]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,f.default)(e,"value.backend.service.name");return a&&a!==t.defaultService?{service:a,defaultService:a}:null}}]),r}(m.default.Component);a.default=b,b.defaultProps={value:{},onChange:function(){}}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),u=n(a(13)),o=n(a(19)),i=n(a(20)),c=n(a(18)),s=r(a(0)),f=n(a(1)),d=a(25),p=a(58),m=n(a(1671)),h=n(a(1672));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(a,e);var t=v(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.defaultValue,r=e.onChange,n=e.options;return s.default.createElement("div",{className:h.default.group},s.default.createElement(m.default,{value:t,defaultValue:a,onChange:r},n.map((function(e){return s.default.createElement(d.Checkbox,{key:e.name,value:e.name},s.default.createElement(d.Icon,{name:p.CLUSTER_PROVIDER_ICON[e.provider]||"kubernetes"}),s.default.createElement("span",null,e.name))}))))}}]),a}(s.Component);t.default=y,y.propTypes={value:f.default.array,options:f.default.array,onChange:f.default.func},y.defaultProps={value:[],options:[],onChange:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(290)),m=r(58),h=r(25),v=n(r(1066)),y=n(r(1215)),g=n(r(1687)),b=n(r(1218)),E=n(r(1221)),_=n(r(1224)),O=n(r(1225));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var k=function(e){(0,i.default)(r,e);var a=S(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.formRef,n=a.projectDetail,u=a.withService,o=a.supportGpuSelect,i=(0,p.default)(n.clusters,"name");return f.default.createElement(h.Form,{data:this.formTemplate,ref:r},f.default.createElement(h.Form.Group,{label:t("CONTAINER_SETTINGS"),desc:t("CLUSTER_DIFF_CONTAINER_SETTINGS_DESC"),checkable:!0},f.default.createElement(v.default,{clusters:this.clusters,clustersDetail:i,namespace:this.namespace},(function(t){return f.default.createElement(y.default,(0,l.default)({formTemplate:e.formTemplate},t),(function(e){return f.default.createElement(g.default,(0,l.default)({supportGpuSelect:o,workspace:n.workspace},e))}))}))),this.showVolumeTemplate&&f.default.createElement(h.Form.Group,{label:t("VOLUME_TEMPLATE_SETTINGS"),desc:t("CLUSTER_VOLUME_DIFF_DESC"),checkable:!0},f.default.createElement(v.default,{clusters:this.clusters,clustersDetail:i,namespace:this.namespace},(function(t){return f.default.createElement(_.default,(0,l.default)({formTemplate:e.formTemplate},t),(function(e){return f.default.createElement(O.default,e)}))}))),f.default.createElement(h.Form.Group,{label:t("PORT_SETTINGS"),desc:t("CLUSTER_DIFF_PORT_SETTINGS_DESC"),checkable:!0},f.default.createElement(v.default,{clusters:this.clusters,clustersDetail:i,namespace:this.namespace},(function(t){return f.default.createElement(y.default,(0,l.default)({formTemplate:e.formTemplate,withService:u,serviceTemplate:(0,d.default)(e.props.formTemplate,"Service")},t),(function(e){return f.default.createElement(b.default,e)}))}))),f.default.createElement(h.Form.Group,{label:t("ENVIRONMENT_VARIABLE_PL"),desc:t("CLUSTER_DIFF_ENVIRONMENT_VARIABLES_DESC"),checkable:!0},f.default.createElement(v.default,{clusters:this.clusters,clustersDetail:i,namespace:this.namespace},(function(t){return f.default.createElement(y.default,(0,l.default)({formTemplate:e.formTemplate},t),(function(e){return f.default.createElement(E.default,e)}))}))))}},{key:"namespace",get:function(){return(0,d.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,m.MODULE_KIND_MAP[a],t)}},{key:"clusters",get:function(){return(0,d.default)(this.formTemplate,"spec.placement.clusters",[])}},{key:"showVolumeTemplate",get:function(){return"statefulsets"===this.props.module&&(0,d.default)(this.formTemplate,"spec.template.spec.volumeClaimTemplates")}}]),r}(f.default.Component);a.default=k},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(12)),o=n(a(13)),i=n(a(19)),c=n(a(20)),s=n(a(18)),f=r(a(0)),d=n(a(3)),p=a(25),m=a(58),h=n(a(1685));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=v(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={selectCluster:""},e.handleClick=function(t){e.setState({selectCluster:t.currentTarget.dataset.cluster})},e.handleSelect=function(t){e.setState({selectCluster:t})},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.clusters,r=t.clustersDetail,n=t.namespace,u=t.children,o=this.state.selectCluster;return f.default.createElement("div",{className:h.default.wrapper},a.map((function(t){var i=r[t.name]||t;return f.default.createElement("div",{key:i.name,className:(0,d.default)(h.default.cluster,(0,l.default)({},h.default.selected,i.name===o)),onClick:e.handleClick,"data-cluster":i.name},f.default.createElement("div",{className:h.default.title},f.default.createElement(p.Icon,{name:m.CLUSTER_PROVIDER_ICON[i.provider||"kubesphere"],type:"light",size:20}),f.default.createElement("span",null,i.name)),f.default.createElement("div",null,u({namespace:n,clusters:a,cluster:i.name,selected:i.name===o,onSelect:e.handleSelect})))})))}}]),a}(f.Component);t.default=y},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(16)),d=n(r(32)),p=r(37),m=r(58),h=r(25),v=n(r(872)),y=n(r(903)),g=n(r(1692)),b=n(r(1698));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,o.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).limitError="",e.valueRenderer=function(e){return s.default.createElement(h.Tag,{className:b.default.type,type:"init"===e.value?"warning":"default"},e.label)},e.renderImageForm=function(){var t=e.props,a=t.data,r=t.namespace,n=e.imageRegistries,l=e.getFormTemplate(a,n);return s.default.createElement(g.default,{className:b.default.imageSearch,name:"image",namespace:r,formTemplate:l,imageRegistries:n})},e.handleError=function(t){e.limitError=t},e.limitValidator=function(t,a,r){""!==e.limitError&&r({message:""}),r()},e}return(0,u.default)(r,[{key:"getGpuLimit",value:function(){return(0,p.gpuLimitsArr)(this.props.workspaceQuota)}},{key:"getFormTemplate",value:function(e,t){if(e&&e.image&&!e.pullSecret){var a=(0,p.parseDockerImage)(e.image),r=a.registry,n=a.namespace;if(r){var l=t.find((function(e){var t=e.url,a=(t=t.endsWith("/")?t.slice(0,-1):t).replace(/^https?:\/\//,"").split("/");return r===a[0]&&(n&&a[1]&&a[1]===n||!n&&!a[1])}));l&&(e.pullSecret=l.value)}}return e}},{key:"renderAdvancedSettings",value:function(){var e=this.props,a=e.defaultContainerType,r=e.onContainerTypeChange,n=e.supportGpuSelect,l=this.defaultResourceLimit;return s.default.createElement(y.default,{defaultShow:(0,d.default)(l)},s.default.createElement(s.default.Fragment,null,s.default.createElement(h.Columns,{className:b.default.columns},s.default.createElement(h.Column,null,s.default.createElement(h.Form.Item,{label:t("CONTAINER_NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:m.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})}]},s.default.createElement(h.Input,{name:"name",defaultValue:"container-".concat((0,p.generateId)()),maxLength:63}))),s.default.createElement(h.Column,null,s.default.createElement(h.Form.Item,{label:t("CONTAINER_TYPE")},s.default.createElement(h.Select,{name:"type",defaultValue:a,options:this.containerTypes,onChange:r,valueRenderer:this.valueRenderer})))),s.default.createElement(h.Alert,{className:"margin-b12",type:"info",message:t("CONTAINER_RESOURCE_LIMIT_TIP")}),s.default.createElement(h.Form.Item,{rules:[{validator:this.limitValidator,checkOnSubmit:!0}]},s.default.createElement(v.default,{name:"resources",defaultValue:l,onError:this.handleError,workspaceLimitProps:this.workspaceLimitProps,supportGpuSelect:n}))))}},{key:"render",value:function(){var e=this.props.className;return s.default.createElement(h.Form.Group,{className:e,label:t("CONTAINER_SETTINGS"),desc:t("CONTAINER_SETTINGS_DESC"),noWrapper:!0},this.renderImageForm(),this.renderAdvancedSettings())}},{key:"defaultResourceLimit",get:function(){var e=this.props.limitRange,t=void 0===e?{}:e;if(t.defaultRequest||t.default)return{requests:t.defaultRequest||{},limits:t.default||{}}}},{key:"containerTypes",get:function(){return[{label:t("WORKER_CONTAINER"),value:"worker"},{label:t("INIT_CONTAINER"),value:"init"}]}},{key:"imageRegistries",get:function(){var e=this.props.imageRegistries;return(void 0===e?[]:e).map((function(e){var t=(0,f.default)(e,'data[".dockerconfigjson"].auths',{}),a=Object.keys(t)[0]||"",r=(0,f.default)(t[a],"username"),n=e.isFedManaged?(0,f.default)(e,"clusters[0].name"):e.cluster,l=Boolean((0,f.default)(e,'annotations["secret.kubesphere.io/force-insecure"]',!1)),u=(0,f.default)(t[a],"auth");return{url:a,username:r,label:e.name,value:e.name,cluster:n,isSkipTLS:l,auth:u}}))}},{key:"workspaceLimitProps",get:function(){var e=this.props.workspaceQuota;return(0,d.default)(e)?{}:{limits:{cpu:(0,f.default)(e,"limits.cpu"),memory:(0,f.default)(e,"limits.memory")},requests:{cpu:(0,f.default)(e,"requests.cpu"),memory:(0,f.default)(e,"requests.memory")},gpuLimit:this.getGpuLimit()}}}]),r}(s.default.Component);a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1222)),p=n(r(667));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=(0,r(37).lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(3)]).then(r.t.bind(null,712,7))})),v=function(e){(0,o.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).rootStore=new p.default,e.envError="",e.handleErrorStatus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.envError=t},e.envValidator=function(t,a,r){""===e.envError&&r()},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this;h().then((function(t){return e.rootStore.registerActions(t.default)}))}},{key:"render",value:function(){var e=this.props,a=e.checkable,r=e.namespace,n=e.isFederated,l=e.cluster,u=e.projectDetail;return s.default.createElement(f.Form.Group,{label:t("ENVIRONMENT_VARIABLE_PL"),desc:t("CONTAINER_ENVIRONMENT_DESC"),checkable:a},s.default.createElement(f.Form.Item,{rules:[{validator:this.envValidator}]},s.default.createElement(d.default,{rootStore:this.rootStore,name:"".concat(this.prefix,"env"),namespace:r,isFederated:n,cluster:l,projectDetail:u,handleInputError:this.handleErrorStatus})))}},{key:"prefix",get:function(){var e=this.props.prefix;return e?"".concat(e,"."):""}}]),r}(s.default.Component);a.default=v,v.defaultProps={prefix:"",checkable:!0}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=a(25);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,i.default)(a,e);var t=p(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){var a=e.props,r=a.onChange,n=a.unit,l=t;n&&String(t).indexOf(n)<0&&(l="".concat(t).concat(n)),r&&r(l)},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=(e.onChange,(0,l.default)(e,["onChange"]));return f.default.createElement(d.Slider,(0,n.default)({onChange:this.handleChange},t))}}]),a}(f.default.Component);t.default=m},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(37),l=r(a(1710)),u=r(a(875)),o=r(a(876)),i=r(a(1767)),c=r(a(1076)),s=r(a(1077)),f=r(a(1785)),d=r(a(1079)),p=r(a(997)),m=r(a(1797)),h={statelessservice:[{title:"BASIC_INFORMATION",icon:"cdn",component:l.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:(0,n.withProps)(u.default,{withService:!0}),required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:i.default,required:!0}],statefulservice:[{title:"BASIC_INFORMATION",icon:"cdn",component:l.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:(0,n.withProps)(u.default,{withService:!0}),required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:i.default,required:!0}],externalservice:[{title:"BASIC_INFORMATION",icon:"cdn",component:(0,n.withProps)(l.default,{noWorkload:!0}),required:!0},{title:"EXTERNAL_SERVICE",icon:"strategy-group",component:c.default,required:!0}],simpleservice:[{title:"BASIC_INFORMATION",icon:"cdn",component:(0,n.withProps)(l.default,{noWorkload:!0}),required:!0},{title:"SERVICE_SETTINGS",component:s.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:(0,n.withProps)(i.default,{noWorkload:!0}),required:!0}],b2iservice:[{title:"BASIC_INFORMATION",icon:"cdn",component:l.default,required:!0},{title:"BUILD_SETTINGS",icon:"strategy-group",component:(0,n.composeComponent)(f.default,(0,n.withProps)(d.default,{prefix:"S2i"})),required:!0},{title:"POD_SETTINGS",icon:"docker",component:(0,n.withProps)(m.default,{withService:!0}),required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:i.default,required:!0}],s2iservice:[{title:"BASIC_INFORMATION",icon:"cdn",component:l.default,required:!0},{title:"BUILD_SETTINGS",icon:"strategy-group",component:(0,n.composeComponent)(f.default,(0,n.withProps)(p.default,{prefix:"S2i"})),required:!0},{title:"POD_SETTINGS",icon:"docker",component:(0,n.withProps)(m.default,{withService:!0}),required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:i.default,required:!0}]};t.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(1)),v=n(r(16)),y=n(r(73)),g=n(r(738)),b=n(r(32)),E=r(58),_=r(25),O=n(r(636)),S=n(r(740)),k=n(r(1722));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,m.observer)((o=u=function(e){(0,s.default)(r,e);var a=C(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).getStrategy=function(e){return(0,v.default)(e.data,"".concat(n.prefix,".type"))},n.handleStrategyChange=function(e){var t=n.props,a=t.data,r=t.module;n.setState({strategy:e},(function(){if("RollingUpdate"!==e)(0,g.default)(a,n.rollingUpdatePrefix);else{var t=(0,v.default)(a,n.rollingUpdatePrefix);if((0,b.default)(t))switch(r){case"deployments":(0,y.default)(a,n.rollingUpdatePrefix,{maxUnavailable:"25%",maxSurge:"25%"});break;case"statfulsets":(0,y.default)(a,n.rollingUpdatePrefix,{partition:0});break;case"daemonsets":(0,y.default)(a,n.rollingUpdatePrefix,{maxUnavailable:"25%"})}}}))},n.valueValidator=function(e,a,r){if(!a)return r();if(!/^[0-9]*$/.test(a)&&!/^[0-9]+%$/.test(a))return r({message:t("ENTER_INTEGER_OR_PERCENTAGE")});r()},n.valueValidatorNumber=function(e,a,r){if(!a)return r();if(!/^[0-9]*$/.test(a))return r({message:t("PARTITION_ORDINAL_EMPTY")});r()},n.state={strategy:n.getStrategy(e)},n}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e,t){var a=this.getStrategy(this.props);a!==t.strategy&&this.setState({strategy:a})}},{key:"renderRollingUpdateParams",value:function(){var e=this.props.module;return"statefulsets"===e?p.default.createElement(_.Columns,{className:k.default.wrapper},p.default.createElement(_.Column,null,p.default.createElement(_.Form.Item,{label:t("PARTITION_ORDINAL"),desc:t("PARTITION_ORDINAL_DESC"),rules:[{required:!0,message:t("PARTITION_ORDINAL_EMPTY")},{validator:this.valueValidatorNumber}]},p.default.createElement(S.default,{name:"".concat(this.rollingUpdatePrefix,".partition"),defaultValue:0,min:0,integer:!0})))):"daemonsets"===e?p.default.createElement(_.Columns,{className:k.default.wrapper},p.default.createElement(_.Column,null,p.default.createElement(_.Form.Item,{label:t("MAX_UNAVAILABLE_PODS"),desc:t("MAX_UNAVAILABLE_PODS_DESC"),rules:[{required:!0,message:t("MAX_UNAVAILABLE_EMPTY")}]},p.default.createElement(_.Input,{name:"".concat(this.rollingUpdatePrefix,".maxUnavailable"),defaultValue:"20%"}))),p.default.createElement(_.Column,null,p.default.createElement(_.Form.Item,{label:t("MIN_READY_SECONDS"),desc:t("MIN_READY_SECONDS_DESC"),rules:[{required:!0,message:t("MIN_READY_SECONDS_EMPTY")}]},p.default.createElement(S.default,{name:"spec.minReadySeconds",defaultValue:0,min:0,integer:!0})))):p.default.createElement(_.Columns,{className:k.default.wrapper},p.default.createElement(_.Column,null,p.default.createElement(_.Form.Item,{label:t("MAX_UNAVAILABLE_PODS"),desc:t("MAX_UNAVAILABLE_PODS_DESC"),rules:[{required:!0,message:t("MAX_UNAVAILABLE_EMPTY")},{validator:this.valueValidator}]},p.default.createElement(_.Input,{name:"".concat(this.rollingUpdatePrefix,".maxUnavailable"),defaultValue:"25%"}))),p.default.createElement(_.Column,null,p.default.createElement(_.Form.Item,{label:t("MAX_EXTRA_PODS"),desc:t("MAX_EXTRA_PODS_DESC"),rules:[{required:!0,message:t("MAX_EXTRA_EMPTY")},{validator:this.valueValidator}]},p.default.createElement(_.Input,{name:"".concat(this.rollingUpdatePrefix,".maxSurge"),defaultValue:"25%"}))))}},{key:"render",value:function(){return p.default.createElement(p.default.Fragment,null,p.default.createElement(_.Form.Item,{label:t("UPDATE_STRATEGY")},p.default.createElement(O.default,{name:"".concat(this.prefix,".type"),onChange:this.handleStrategyChange,defaultValue:"RollingUpdate",options:this.strategyOptions})),p.default.createElement(_.Form.Group,{label:t("ROLLING_UPDATE_SETTINGS"),checkable:!0,keepDataWhenUnCheck:!0},this.isRollingUpdate&&this.renderRollingUpdateParams()))}},{key:"isRollingUpdate",get:function(){return"RollingUpdate"===this.state.strategy}},{key:"prefix",get:function(){var e=this.props,t=e.isFederated,a=e.module,r=e.isEdit;return"".concat(t&&r?"spec.template.":"").concat(E.STRATEGIES_PREFIX[a])}},{key:"rollingUpdatePrefix",get:function(){return"".concat(this.prefix,".rollingUpdate")}},{key:"strategyOptions",get:function(){var e=this.props.module;return E.STRATEGIES[e].map((function(e){var a=e.label,r=e.value,n=e.description;return{label:t(a),description:t(n),icon:"update",value:r}}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.data,r=/^[0-9]*$/,n="spec.strategy.rollingUpdate";return"RollingUpdate"===t.strategy&&(r.test((0,v.default)(a,"".concat(n,".maxSurge")))&&(0,y.default)(a,"".concat(n,".maxSurge"),Number((0,v.default)(a,"".concat(n,".maxSurge")))),r.test((0,v.default)(a,"".concat(n,".maxUnavailable")))&&(0,y.default)(a,"".concat(n,".maxUnavailable"),Number((0,v.default)(a,"".concat(n,".maxUnavailable"))))),null}}]),r}(p.default.Component),u.propTypes={module:h.default.string,data:h.default.object,onChange:h.default.func,isFederated:h.default.bool,isEdit:h.default.bool},u.defaultProps={module:"",data:{},isFederated:!1,isEdit:!1,onChange:function(){}},l=o))||l;a.default=R},function(e,t,a){e.exports={wrapper:"_2xSH4jSaiZaiXb3eNvbfsD",limits:"_2UajGKZaa_7OOh_UcRtlQa",limit:"_3ybjepPZouY_ndzpJzL-YE",message:"_2aiLZf_rHbV44YbgvIJ8zK"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(138)),m=r(a(23)),h=a(25);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,u.default)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=r.props,a=t.onChange,n=t.parser;r.setState({value:e}),a(e?n(e):[])},r.state={value:e.stringify(e.value)},r}return(0,o.default)(a,[{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.props.value&&this.setState({value:this.props.stringify(this.props.value)})}},{key:"render",value:function(){var e=this.props,t=(e.value,e.onChange,e.parser,e.stringify,(0,l.default)(e,["value","onChange","parser","stringify"]));return f.default.createElement(h.TextArea,(0,n.default)({value:this.state.value},t,{onChange:this.handleChange,rows:2}))}}]),a}(f.default.Component);t.default=y,y.propTypes={value:d.default.oneOfType([d.default.string,d.default.array]),stringify:d.default.func,parser:d.default.func,onChange:d.default.func},y.defaultProps={value:"",stringify:function(e){return(0,m.default)(e)?e.join(","):""},parser:function(e){return(0,p.default)(e)?e.split(",").map((function(e){return/^["'].*["']$/.test(e)&&(e=e.slice(1,e.length-1)),e})):[]},onChange:function(){}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(19)),u=r(a(20)),o=r(a(18));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var c=function(e){(0,l.default)(a,e);var t=i(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).module="ippools",e}return a}(r(a(277)).default);t.default=c},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(49)),l=r(a(50)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=a(58);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=function(e){(0,i.default)(a,e);var t=d(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).module="edgenodes",e.getListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/nodes").concat(t.dryRun?"?dryRun=All":"")},e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"kapis/resources.kubesphere.io/v1alpha3".concat(e.getPath(t),"/nodes")},e.createEdgeNode=function(){var t=(0,l.default)(n.default.mark((function t(a){var r,l,u,o,i,c;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,l=a.name,u=a.ip,o=a.defaultTaint,i="kapis/edgeruntime.kubesphere.io/v1alpha1/".concat(e.getPath({cluster:r}),"/nodes/join"),t.next=4,request.get(i,{node_name:l,node_ip:u,add_default_taint:o},{},(function(e){return e}));case 4:return c=t.sent,t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,o.default)(a,[{key:"apiVersion",get:function(){return f.API_VERSIONS.nodes||""}}]),a}(r(a(837)).default);t.default=p},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(16)),f=n(r(73)),d=n(r(0)),p=r(25),m=r(58);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"componentDidMount",value:function(){"ExternalName"!==(0,s.default)(this.formTemplate,"spec.type")&&(0,f.default)(this.formTemplate,"spec",{type:"ExternalName"})}},{key:"render",value:function(){var e=this.props.formRef;return d.default.createElement(p.Form,{data:this.formTemplate,ref:e},d.default.createElement(p.Form.Item,{label:t("EXTERNAL_SERVICE_ADDRESS"),desc:t("EXTERNAL_SERVICE_ADDRESS_DESC"),rules:[{required:!0,message:t("EXTERNAL_SERVICE_ADDRESS_EMPTY_DESC")}]},d.default.createElement(p.Input,{name:"spec.externalName",placeholder:"foo.bar.example.com"})))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,s.default)(t,m.MODULE_KIND_MAP[a],t)}}]),r}(d.default.Component);a.default=v},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(16)),f=n(r(73)),d=n(r(738)),p=n(r(32)),m=n(r(0)),h=r(25),v=n(r(636)),y=n(r(761)),g=n(r(1078)),b=r(37),E=r(58),_=n(r(1241)),O=n(r(1784));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var k=function(e){(0,o.default)(r,e);var a=S(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).state={serviceType:"virtualIP"},e.handleTypeChange=function(t){e.setState({serviceType:t},(function(){"virtualIP"===t?(0,d.default)(e.formTemplate,"spec.clusterIP"):(0,f.default)(e.formTemplate,"spec.clusterIP","None")}))},e.portsValidator=function(e,a,r){if(!a)return r();if(a.length>0){var n=[];a.forEach((function(e){return e.name&&e.port?n.includes(e.name)?r({message:t("PORT_INPUT_DESC")}):e.name&&(e.name.length>63||!E.PATTERN_PORT_NAME.test(e.name))?r({message:t("PORT_NAME_DESC")}):void n.push(e.name):r({message:t("INVALID_PORT")})}))}r()},e.labelsValidator=function(e,a,r){return a?(0,p.default)(a)?r({message:t("ENTER_SELECTOR_TIP")}):(0,b.isValidLabel)(a)?r():r({message:t("LABEL_FORMAT_DESC")}):r()},e}return(0,u.default)(r,[{key:"renderTypeSelect",value:function(){return m.default.createElement(h.Form.Item,{label:t("INTERNAL_ACCESS_MODE")},m.default.createElement(v.default,{className:"margin-b12",value:this.state.serviceType,onChange:this.handleTypeChange,options:this.types}))}},{key:"renderLabelSelector",value:function(){return m.default.createElement(h.Form.Item,{label:t("WORKLOAD_SELECTOR"),rules:[{required:!0,message:t("ENTER_SELECTOR_TIP")},{validator:this.labelsValidator}]},m.default.createElement(_.default,{name:"spec.selector",cluster:this.props.cluster,namespace:this.namespace,addText:t("ADD")}))}},{key:"renderPorts",value:function(){return m.default.createElement(h.Form.Group,{label:t("PORT_PL"),desc:t("SERVICE_PORTS_DESC")},m.default.createElement(h.Form.Item,{rules:[{required:!0,message:t("PORT_EMPTY")},{validator:this.portsValidator,checkOnSubmit:!0}]},m.default.createElement(y.default,{name:"spec.ports",itemType:"object",addText:t("ADD")},m.default.createElement(g.default,null))))}},{key:"render",value:function(){var e=this.props.formRef;return m.default.createElement("div",{className:O.default.wrapper},m.default.createElement(h.Form,{data:this.formTemplate,ref:e},this.renderTypeSelect(),this.renderLabelSelector(),this.renderPorts()))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,s.default)(t,E.MODULE_KIND_MAP[a],t)}},{key:"namespace",get:function(){return(0,s.default)(this.formTemplate,"metadata.namespace")}},{key:"types",get:function(){return[{icon:"cluster",label:t("VIRTUAL_IP_TITLE"),description:t("VIRTUAL_IP_DESC"),value:"virtualIP"},{icon:"blockchain",label:t("INTERNAL_DOMAIN_NAME"),description:t("INTERNAL_DOMAIN_NAME_DESC"),value:"headlessSelector"}]}}]),r}(m.default.Component);a.default=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(650)),d=n(r(68)),p=n(r(0)),m=r(25),h=n(r(740)),v=n(r(994)),y=r(58),g=n(r(1780));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var O=function(e){var t="HTTP",a=e.value,r=a.name,n=a.targetPort,l=a.port;if(!(0,d.default)(r)){var u=r.match(/^(\w+)-(.*)/);u&&(t=(u[1]||"HTTP").toUpperCase())}return{name:(0,d.default)(r)?"".concat(t.toLowerCase(),"-"):r,protocol:y.PROTOCOLS.some((function(e){return e.value===t}))?t:e.value.protocol,targetPort:n,port:l}},S=function(e){(0,i.default)(r,e);var a=_(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).triggerChange=(0,f.default)((function(){var e=t.state,a=e.name,r=e.protocol,n=e.targetPort,l=e.port;t.props.onChange({name:a,protocol:"UDP"===r?"UDP":"TCP",targetPort:n,port:l})}),300),t.handleNameChange=function(e,a){t.setState({name:a},(function(){return t.triggerChange()}))},t.handleProtocolChange=function(e){var a,r=t.state.name,n="".concat(t.state.protocol.toLowerCase(),"-");a=r.startsWith(n)?"".concat(e.toLowerCase(),"-").concat(r.replace(n,"")):"".concat(e.toLowerCase(),"-"),t.setState({name:a,protocol:e},(function(){return t.triggerChange()}))},t.handleTargetPortChange=function(e){t.setState({targetPort:e},(function(){return t.triggerChange()}))},t.handlePortChange=function(e){t.setState({port:e},(function(){return t.triggerChange()}))},t.state=E(E({},O(e)),{},{value:e.value}),t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.state,a=e.name,r=e.protocol,n=e.targetPort,l=e.port;return p.default.createElement("div",{className:g.default.wrapper},p.default.createElement(v.default,{prefix:p.default.createElement("div",{className:g.default.tip},p.default.createElement("span",null,t("PROTOCOL")),p.default.createElement(m.Tooltip,{content:t("ISTIO_PROTOCOL_TIP")},p.default.createElement(m.Icon,{name:"question"})))},p.default.createElement(m.Select,{name:"protocol",value:r,options:y.PROTOCOLS,defaultValue:"HTTP",onChange:this.handleProtocolChange})),p.default.createElement(v.default,{prefix:t("NAME"),placeholder:t("REQUIRED")},p.default.createElement(m.Input,{name:"name",value:a,onChange:this.handleNameChange})),p.default.createElement(v.default,{prefix:t("CONTAINER_PORT")},p.default.createElement(h.default,{name:"targetPort",min:1,max:65535,value:n,integer:!0,onChange:this.handleTargetPortChange})),p.default.createElement(v.default,{prefix:t("SERVICE_PORT")},p.default.createElement(h.default,{name:"port",min:1,max:65535,value:l,integer:!0,placeholder:t("REQUIRED"),onChange:this.handlePortChange})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value?E(E({},O(e)),{},{value:e.value}):null}}]),r}(p.default.Component);a.default=S,S.defaultProps={value:{},onChange:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(49)),o=n(r(50)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(16)),h=n(r(73)),v=n(r(3)),y=r(25),g=r(37),b=n(r(773)),E=n(r(823)),_=n(r(1243)),O=n(r(1245)),S=n(r(903)),k=r(58),C=n(r(1789)),R=n(r(1795));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=function(e){(0,s.default)(r,e);var a=w(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).fetchData=(0,o.default)(u.default.mark((function e(){var a,r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.secretStore.fetchListByK8s({namespace:t.namespace,cluster:t.props.cluster,fieldSelector:"type=kubernetes.io/basic-auth"});case 2:a=e.sent,r=a.map((function(e){return{label:(0,g.getDisplayName)(e),value:e.name,type:"basic-auth"}})),t.setState({basicSecretOptions:r});case 5:case"end":return e.stop()}}),e)}))),t.fetchImageSecrets=(0,o.default)(u.default.mark((function e(){var a,r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.secretStore.fetchListByK8s({namespace:t.namespace,cluster:t.props.cluster,fieldSelector:"type=kubernetes.io/dockerconfigjson"});case 2:a=e.sent,r=a.map((function(e){var t=(0,m.default)(e,'data[".dockerconfigjson"].auths',{}),a=Object.keys(t)[0]||"";return{label:(0,g.getDisplayName)(e),value:e.name,repoUrl:a,type:"dockerconfigjson"}})),t.setState({imageSecretOptions:r});case 5:case"end":return e.stop()}}),e)}))),t.getTemplateList=(0,o.default)(u.default.mark((function e(){var a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isGetTemplateListLoading:!0}),e.next=3,t.builderStore.getBuilderTemplate({cluster:t.props.cluster});case 3:a=e.sent,t.setState({builderTemplateLists:(0,m.default)(a,"items",[]),isGetTemplateListLoading:!1});case 5:case"end":return e.stop()}}),e)}))),t.handleImageSecretChange=function(e,a){var r=t.props.formTemplate,n=(0,m.default)(a,"[0]repoUrl","");(0,h.default)(r,"".concat(t.prefix,'metadata.annotations["kubesphere.io/repoUrl"]'),n)},t.handleImageTemplateChange=function(e){var a=e.environment,r=e.docUrl,n=(0,m.default)(globals,"user.lang","zh"),l=(a||[]).map((function(e){e.label=e.key;var t=(e.description||"").split(". "),a="zh"===n?(0,m.default)(t,"1",e.description):(0,m.default)(t,"0",e.description);return e.label="".concat(e.key,"  (").concat(a,")"),e.value=e.key,e}));t.setState({environment:l,docUrl:r})},t.secretStore=new b.default,t.builderStore=new E.default,t.state={isGetTemplateListLoading:!0,environment:[],basicSecretOptions:[],imageSecretOptions:[],docUrl:""},t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.fetchImageSecrets(),this.getTemplateList()}},{key:"renderAdvancedSetting",value:function(){return p.default.createElement(p.default.Fragment,null,p.default.createElement(y.Form.Item,{label:t("TRIGGER_TOKEN"),desc:t("TRIGGER_TOKEN_DESC"),rules:[{pattern:/^[a-zA-Z0-9]+$/,message:"".concat(t("INVALID_TRIGGER_TOKEN_DESC"))}]},p.default.createElement(y.Input,{name:"".concat(this.prefix,"spec.config.secretCode"),defaultValue:""})),p.default.createElement(y.Alert,{className:R.default.environment_info,message:t.html("S2I_ENVIRONMENT_DESC",{link:this.state.docUrl||(0,g.getDocsUrl)("s2i_template")}),type:"info"}),p.default.createElement(y.Form.Item,null,p.default.createElement(_.default,{name:"".concat(this.prefix,"spec.config.environment"),options:this.state.environment})))}},{key:"render",value:function(){var e=this.props,a=e.formTemplate,r=e.formRef,n=e.mode,u=e.prefix;return p.default.createElement(y.Form,{ref:r,data:a},p.default.createElement(y.Form.Item,{label:t("ARTIFACT_FILE"),rules:[{required:!0,message:t("ARTIFACT_FILE_EMPTY_DESC")}]},p.default.createElement(C.default,{name:"".concat(this.prefix,"spec.config.sourceUrl"),namespace:this.namespace,formTemplate:u?a[u]:a,cluster:this.props.cluster})),p.default.createElement(O.default,{loading:this.state.isGetTemplateListLoading,formTemplate:u?a[u]:a,builderTemplate:this.state.builderTemplateLists,onEnvironmentChange:this.handleImageTemplateChange}),p.default.createElement("div",{className:(0,v.default)(R.default.columns,(0,l.default)({},R.default.columsEdit,"edit"===n))},p.default.createElement("div",{className:R.default.column},p.default.createElement(y.Form.Item,{label:t("IMAGE_NAME"),desc:t("S2I_IMAGE_NAME_DESC"),rules:[{required:!0,message:t("IMAGE_NAME_EMPTY_DESC")},{pattern:k.PATTERN_IMAGE_NAME,message:t("INVALID_NAME_DESC",{message:t("S2I_IMAGE_NAME_DESC")})}]},p.default.createElement(y.Input,{name:"".concat(this.prefix,"spec.config.imageName")}))),p.default.createElement("div",{className:"is-2"},p.default.createElement(y.Form.Item,{label:t("IMAGE_TAG"),rules:[{required:!0,message:t("IMAGE_TAG_EMPTY_DESC")}]},p.default.createElement(y.Input,{name:"".concat(this.prefix,"spec.config.tag"),defaultValue:"latest"}))),p.default.createElement("div",{className:"is-half"},p.default.createElement(y.Form.Item,{label:t("TARGET_IMAGE_REPOSITORY"),desc:t.html("S2I_TARGET_IMAGE_REPOSITORY_DESC",{link:(0,g.getDocsUrl)("secrets")}),rules:[{required:!0,message:t("TARGET_IMAGE_REPOSITORY_EMPTY_DESC")}]},p.default.createElement(y.Select,{name:"".concat(this.prefix,"spec.config.pushAuthentication.secretRef.name"),options:this.state.imageSecretOptions,onChange:this.handleImageSecretChange,placeholder:" "})))),p.default.createElement(S.default,null,this.renderAdvancedSetting()))}},{key:"prefix",get:function(){var e=this.props.prefix;return e?"".concat(e,"."):""}},{key:"namespace",get:function(){return this.props.namespace}}]),r}(p.default.Component);a.default=P,P.defaultProps={mode:"create",prefix:""}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(49)),c=r(a(109)),s=r(a(21)),f=r(a(56)),d=r(a(50)),p=r(a(91)),m=r(a(12)),h=r(a(13)),v=r(a(135)),y=r(a(19)),g=r(a(20)),b=r(a(18)),E=r(a(74)),_=(r(a(92)),r(a(190))),O=a(5);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var R=(n=function(e){(0,y.default)(b,e);var t,a,r,n,s,g=C(b);function b(){var e;(0,m.default)(this,b);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=g.call.apply(g,[this].concat(a))).module="codeRepos",(0,p.default)(e,"list",l,(0,v.default)(e)),(0,p.default)(e,"detail",u,(0,v.default)(e)),e.getListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/gitrepositories").concat(t.dryRun?"?dryRun=All":"")},e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/gitrepositories")},e.getDetailUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.getListUrl(t),"/").concat(t.name)},(0,p.default)(e,"setSelectRowKeys",o,(0,v.default)(e)),e}return(0,h.default)(b,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.namespace,a=e.cluster,r="";return a&&(r+="/klusters/".concat(a)),t&&(r+="/namespaces/".concat(t)),r}},{key:"fetchList",value:(s=(0,d.default)(i.default.mark((function e(){var t,a,r,n,l,u,o,s,d=this,p=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},a=t.devops,t.workspace,r=t.cluster,n=t.more,l=(0,f.default)(t,["devops","workspace","cluster","more"]),this.list.isLoading=!0,l.limit!==1/0&&-1!==l.limit||(l.limit=-1,l.page=1),l.limit=l.limit||10,u="".concat(this.getResourceUrl({namespace:a,cluster:r})),e.next=7,request.get(u,k({},l),{},(function(){return[]}));case 7:return o=e.sent,s=Array.isArray(o.items)?o.items.map((function(e){return k({},d.mapper(k(k({},e),{},{devops:a})))})):[],this.list.update(k(k({data:n?[].concat((0,c.default)(this.list.data),(0,c.default)(s)):s,total:o.totalItems||o.total_count||s.length||0},l),{},{limit:Number(l.limit)||10,page:Number(l.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"create",value:(n=(0,d.default)(i.default.mark((function e(t){var a,r,n,l,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,r=t.devops,n=t.cluster,l="".concat(this.getResourceUrl({namespace:r,cluster:n})),e.next=4,request.post(l,a);case 4:return u=e.sent,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"edit",value:(r=(0,d.default)(i.default.mark((function e(t){var a,r,n,l,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,r=t.devops,n=t.name,l=t.cluster,u="".concat(this.getResourceUrl({namespace:r,cluster:l}),"/").concat(n),e.abrupt("return",this.submitting(request.put(u,a)));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"update",value:(a=(0,d.default)(i.default.mark((function e(t,a){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(this.getResourceUrl({namespace:t.devops,cluster:t.cluster}),"/").concat(a.metadata.name),e.abrupt("return",this.submitting(request.put(r,a)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"delete",value:function(e){var t=(0,_.default)(k(k({},e),{},{namespace:e.devops}),"devops");return this.submitting(request.delete(this.getDetailUrl(t)))}},{key:"fetchDetail",value:(t=(0,d.default)(i.default.mark((function e(t){var a,r,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(this.getResourceUrl({namespace:t.devops,cluster:t.cluster}),"/").concat(t.name),e.next=3,this.submitting(request.get(a),null,null,(function(){return{}}));case 3:return r=e.sent,n=this.mapper(r),this.detail=n,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),b}(r(a(277)).default),l=(0,E.default)(n.prototype,"list",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,order:"",filters:{},isLoading:!1,selectedRowKeys:[]}}}),u=(0,E.default)(n.prototype,"detail",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,E.default)(n.prototype,"setSelectRowKeys",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.list.selectedRowKeys=t}}}),(0,E.default)(n.prototype,"fetchList",[O.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,E.default)(n.prototype,"create",[O.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,E.default)(n.prototype,"edit",[O.action],Object.getOwnPropertyDescriptor(n.prototype,"edit"),n.prototype),(0,E.default)(n.prototype,"update",[O.action],Object.getOwnPropertyDescriptor(n.prototype,"update"),n.prototype),(0,E.default)(n.prototype,"delete",[O.action],Object.getOwnPropertyDescriptor(n.prototype,"delete"),n.prototype),(0,E.default)(n.prototype,"fetchDetail",[O.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),n);t.default=R},,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m,h,v,y=n(r(49)),g=n(r(50)),b=n(r(21)),E=n(r(91)),_=n(r(12)),O=n(r(13)),S=n(r(135)),k=n(r(19)),C=n(r(20)),R=n(r(18)),w=n(r(74)),P=(n(r(92)),n(r(0))),D=n(r(1)),T=n(r(16)),N=n(r(73)),I=r(5),A=r(70),x=n(r(274)),j=r(25),M=n(r(941)),L=r(58),U=n(r(1886));function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){(0,b.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,R.default)(e);if(t){var n=(0,R.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,C.default)(this,a)}}var B=(0,A.observer)((v=h=function(e){(0,k.default)(n,e);var a,r=q(n);function n(e){var a;return(0,_.default)(this,n),(a=r.call(this,e)).clearData=function(){a.formData={},a.isSubmitting=!1,a.type="username_password"},(0,E.default)(a,"formData",o,(0,S.default)(a)),(0,E.default)(a,"type",i,(0,S.default)(a)),(0,E.default)(a,"kubeconfig",c,(0,S.default)(a)),(0,E.default)(a,"isSubmitting",s,(0,S.default)(a)),(0,E.default)(a,"isGetConfigLoading",f,(0,S.default)(a)),(0,E.default)(a,"fetchKubeConfig",d,(0,S.default)(a)),(0,E.default)(a,"handleOk",p,(0,S.default)(a)),(0,E.default)(a,"handleTypeChange",m,(0,S.default)(a)),a.nameValidator=function(e,r,n){var l=a.props,u=l.devops,o=l.cluster,i=l.isEditMode;if(!r||i)return n();a.store.checkName({name:r,devops:u,cluster:o}).then((function(a){if(a.exist)return n({message:t("CREDENTIAL_NAME_EXIST_DESC"),field:e.field});n()}))},a.renderCredentForm=function(){switch(a.type){case"ssh":return P.default.createElement(P.default.Fragment,null,P.default.createElement(j.Form.Item,{label:t("USERNAME")},P.default.createElement(j.Input,{name:"ssh.username"})),P.default.createElement(j.Form.Item,{label:t("PRIVATE_KEY")},P.default.createElement(j.TextArea,{name:"ssh.private_key"})),P.default.createElement(j.Form.Item,{label:t("PASSPHRASE")},P.default.createElement(j.Input,{type:"password",name:"ssh.passphrase"})));case"username_password":return P.default.createElement(P.default.Fragment,null,P.default.createElement(j.Form.Item,{label:t("USERNAME")},P.default.createElement(j.Input,{name:"username_password.username",defaultValue:"admin",disabled:a.props.sourceType&&"github"===a.props.sourceType})),P.default.createElement(j.Form.Item,{label:t("PASSWORD_TOKEN")},P.default.createElement(j.Input,{name:"username_password.password",type:"password"})));case"secret_text":return P.default.createElement(P.default.Fragment,null,P.default.createElement(j.Form.Item,{label:t("TOKEN")},P.default.createElement(j.TextArea,{name:"secret_text.secret"})));case"kubeconfig":return P.default.createElement(j.Form.Item,{className:U.default.narrowItem,label:t("CONTENT"),desc:t("KUBECONFIG_CONTENT_DESC")},a.isGetConfigLoading?P.default.createElement(j.Loading,null,P.default.createElement(j.TextArea,{name:"kubeconfig.content",defaultValue:a.kubeconfig})):P.default.createElement(j.TextArea,{name:"kubeconfig.content",defaultValue:a.kubeconfig}));default:return null}},a.formRef=P.default.createRef(),a.store=new M.default,e.formTemplate&&(a.formData=e.formTemplate,a.type=e.formTemplate.type,a.formData[a.type]=V({},a.formData.data)),e.credentialType&&(a.type=e.credentialType,a.formData.type=e.credentialType),a.username=(0,T.default)(globals,"user.username",""),a}return(0,O.default)(n,[{key:"componentDidMount",value:function(){"kubeconfig"!==this.type||this.props.isEditMode||this.fetchKubeConfig()}},{key:"componentDidUpdate",value:function(e){this.props.visible&&!e.visible&&(this.clearData(),this.props.formTemplate&&(this.formData=this.props.formTemplate,this.type=this.props.formTemplate.type,this.formData[this.type]=V({},this.formData.data)),this.props.credentialType&&(this.type=this.props.credentialType,this.formData.type=this.props.credentialType,this.kubeconfig||"kubeconfig"!==this.props.credentialType||this.fetchKubeConfig()))}},{key:"handleCreate",value:(a=(0,g.default)(y.default.mark((function e(t,a){var r,n;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.devops,n=a.cluster,e.next=3,this.store.handleCreate(t,{devops:r,cluster:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"updateFormData",value:function(e){e[this.type]&&(e[this.type].id=e.id)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isEditMode,l=(e.credentialType,e.title);return P.default.createElement(x.default,{width:680,bodyClassName:U.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,isSubmitting:this.isSubmitting,title:l||t("CREATE_CREDENTIAL")},P.default.createElement(j.Form,{data:this.formData,ref:this.formRef},P.default.createElement(j.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("CREDENTIAL_NAME_EMPTY_DESC")},{pattern:L.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},P.default.createElement(j.Input,{name:"id",disabled:n})),P.default.createElement(j.Form.Item,{label:t("TYPE")},P.default.createElement(j.Select,{options:[{label:t("CREDENTIAL_TYPE_USERNAME_PASSWORD"),value:"username_password"},{label:t("CREDENTIAL_TYPE_SSH"),value:"ssh"},{label:t("CREDENTIAL_TYPE_SECRET_TEXT"),value:"secret_text"},{label:t("CREDENTIAL_TYPE_KUBECONFIG"),value:"kubeconfig"}],disabled:n,onChange:this.handleTypeChange,defaultValue:"username_password",name:"type"})),this.renderCredentForm(),P.default.createElement(j.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},P.default.createElement(j.TextArea,{name:"description",maxLength:256}))))}}]),n}(P.default.Component),h.propTypes={name:D.default.string,isEditMode:D.default.bool,formTemplate:D.default.object,credentialType:D.default.string,title:D.default.string},h.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isEditMode:!1},u=v,o=(0,w.default)(u.prototype,"formData",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=(0,w.default)(u.prototype,"type",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"username_password"}}),c=(0,w.default)(u.prototype,"kubeconfig",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=(0,w.default)(u.prototype,"isSubmitting",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,w.default)(u.prototype,"isGetConfigLoading",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,w.default)(u.prototype,"handleCreate",[I.action],Object.getOwnPropertyDescriptor(u.prototype,"handleCreate"),u.prototype),d=(0,w.default)(u.prototype,"fetchKubeConfig",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,g.default)(y.default.mark((function t(){var a,r;return y.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.cluster,e.isGetConfigLoading=!0,t.next=4,request.get("kapis/resources.kubesphere.io/v1alpha2/".concat(e.store.getPath({cluster:a}),"/users/").concat(e.username,"/kubeconfig")).finally((function(){e.isGetConfigLoading=!1}));case 4:r=t.sent,e.kubeconfig=r,(0,N.default)(e.formData,"kubeconfig.content",r),e.forceUpdate();case 8:case"end":return t.stop()}}),t)})))}}),p=(0,w.default)(u.prototype,"handleOk",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.formRef.current.getData();e.formRef.current.validate((0,g.default)(y.default.mark((function a(){return y.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.isSubmitting=!0,e.updateFormData(t),e.props.onOk(t,(function(){e.isSubmitting=!1}));case 3:case"end":return a.stop()}}),a)}))))}}}),m=(0,w.default)(u.prototype,"handleTypeChange",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.type=t,e.formData[t]={id:(0,T.default)(e.formData,"id","")},e.kubeconfig||"kubeconfig"!==e.type||e.fetchKubeConfig()}}}),l=u))||l;a.default=B},,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1012)),p=n(r(2066));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement("div",{className:p.default.fromGroup},s.default.createElement(f.Form.Item,{label:t("SERVICE_ADDRESS"),desc:t("LOG_COLLECTION_ES_URL_TIPS")},s.default.createElement(d.default,{hostName:"host",portName:"port"})),s.default.createElement(f.Form.Item,{label:t("INDEX_PREFIX"),desc:t("LOG_COLLECTION_ES_INDEX_TIPS"),rules:[{required:!0,message:t("PARAMETER_REQUIRED")}]},s.default.createElement(f.Input,{name:"logstashPrefix",defaultValue:"ks-logstash-log"})))}}]),r}(s.default.Component);a.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(136)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(25),p=n(r(2067));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,i.default)(r,e);var a=m(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).addressValidator=function(e,a,r){return a.split(",").every((function(e){var t=e.match(/(.*):(.*)$/)||[],a=(0,l.default)(t,3),r=a[1],n=void 0===r?"":r,u=a[2];return n&&(void 0===u?"":u)}))?r():r({message:t("INVALID_SERVICE_ADDRESS")})},e}return(0,o.default)(r,[{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement(d.Form.Item,{label:t("TOPIC")},f.default.createElement(d.Input,{name:"topics",autoComplete:"nope"})),f.default.createElement(d.Form.Item,{label:t("SERVICE_ADDRESS"),rules:[{required:!0,message:t("ENTER_SERVICE_ADDRESS")},{validator:this.addressValidator}]},f.default.createElement(p.default,{name:"brokers"})))}}]),r}(f.default.Component);a.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1012)),p=n(r(2069));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement("div",{className:p.default.fromGroup},s.default.createElement(f.Form.Item,{label:t("SERVICE_ADDRESS"),desc:t("LOG_COLLECTION_FLUENTD_URL_TIPS")},s.default.createElement(d.default,{hostName:"host",portName:"port",defaultPort:24224})))}}]),r}(s.default.Component);a.default=h},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(68)),p=n(r(0)),m=r(25),h=n(r(2085));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y={className:h.default.slider,railStyle:{height:30,backgroundColor:"#7eb8dc",borderRadius:2},handleStyle:{width:14,height:30,marginTop:0,backgroundColor:"#fff",borderRadius:0,border:"none"},trackStyle:{height:30,borderRadius:2,backgroundColor:"#329dce"}},g=function(e){(0,c.default)(r,e);var a=v(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.leftContent,r=e.rightContent,n=e.defaultValue,o=(0,u.default)(e,["leftContent","rightContent","defaultValue"]),i=(0,d.default)(o.value)?n:o.value;return p.default.createElement("div",{className:h.default.wrapper},p.default.createElement(m.Slider,(0,l.default)({min:0,max:100,defaultValue:i},o,y)),p.default.createElement("span",{className:h.default.floatContent,style:{left:"".concat(Math.floor(i/2),"%"),maxWidth:"".concat(i,"%")}},t("VERSION_TRAFFIC_PERCENT",{version:a,percent:i})),p.default.createElement("span",{className:h.default.floatContent,style:{left:"".concat(Math.floor(i/2)+50,"%"),maxWidth:"".concat(100-i,"%")}},t("VERSION_TRAFFIC_PERCENT",{version:r,percent:100-i})))}}]),r}(p.default.PureComponent);a.default=g,g.defaultProps={defaultValue:50}},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(49)),i=n(r(50)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(3)),v=r(70),y=r(821),g=n(r(16)),b=n(r(32)),E=n(r(1013)),_=r(58),O=r(25),S=n(r(741)),k=n(r(802)),C=n(r(992)),R=n(r(654)),w=n(r(2100));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N=new E.default,I=(0,v.observer)(l=function(e){(0,f.default)(n,e);var a,r=T(n);function n(e){var a;return(0,c.default)(this,n),(a=r.call(this,e)).scrollToBottom=function(){var e=a.ref.current;e&&(e.scrollTop=e.scrollHeight),a.setState({loadingNext:!1})},a.scrollToCurrent=function(){var e=a.ref.current;e&&(e.scrollTop=e.scrollHeight-a.currentHeight),a.setState({loadingPrev:!1})},a.handleNext=function(){a.tailLines=1e3,a.setState({loadingNext:!0}),a.getData({silent:!0},a.scrollToBottom)},a.handlePrev=function(){a.tailLines+=1e3,a.setState({loadingPrev:!0}),a.currentHeight=(0,g.default)(a.ref,"current.scrollHeight",0),a.getData({silent:!0},a.scrollToCurrent)},a.handleRealtime=function(){a.setState((function(e){return{isRealtime:!e.isRealtime}}),(function(){return a.getData({silent:!0},a.scrollToBottom)}))},a.handleDownload=(0,i.default)(o.default.mark((function e(){var r,n,l,u,i,c,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props,n=r.cluster,l=r.namespace,u=r.podName,i=r.containerName,a.setState({isDownloading:!0}),e.next=4,a.store.fetchAllLogs({cluster:n,namespace:l,podName:u,container:i});case 4:if(c=e.sent,a.setState({isDownloading:!1}),c){e.next=9;break}return O.Notify.info({content:"".concat(t("NO_RESOURCE",{resource:t("LOG_DATA_LOW")}))}),e.abrupt("return");case 9:s=new Blob([c],{type:"text/plain;charset=utf-8"}),(0,y.saveAs)(s,"".concat(i,".log"));case 11:case"end":return e.stop()}}),e)}))),a.state={loadingPrev:!1,loadingNext:!1,isDownloading:!1,isRealtime:!!e.isRealtime},a.tailLines=1e3,a.store=new C.default,a.podStore=new R.default,a.ref=m.default.createRef(),a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.getData({},this.scrollToBottom)}},{key:"componentDidUpdate",value:function(e){this.props.podName&&this.props.podName!==e.podName&&this.getData({},this.scrollToBottom)}},{key:"componentWillUnmount",value:function(){this.store.stopWatchLogs()}},{key:"getData",value:(a=(0,i.default)(o.default.mark((function e(t,a){var r,n,l,u,i,c,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,n=r.cluster,l=r.namespace,u=r.podName,i=r.containerName,c=r.gatewayName,s=r.gatewayNamespace,this.store.stopWatchLogs(),e.next=4,this.podStore.checkName({cluster:n,namespace:l,name:u});case 4:e.sent.exist&&this.store.watchLogs(D({cluster:n,namespace:c?s:l,podName:u,container:i,tailLines:this.tailLines,timestamps:!0,follow:this.state.isRealtime,gateways:c},t),a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"renderOperations",value:function(){var e=this.state,a=e.isRealtime,r=e.isDownloading;return m.default.createElement("div",{className:w.default.operations},m.default.createElement(O.Tooltip,{content:t(a?"STOP_REAL_TIME_CONTAINER_LOG":"START_REAL_TIME_CONTAINER_LOG")},m.default.createElement(O.Icon,{name:a?"stop":"start",color:{primary:"#fff",secondary:"#fff"},size:20,onClick:this.handleRealtime,clickable:!0,changeable:!0})),m.default.createElement("span",{className:w.default.split},"|"),m.default.createElement(O.Tooltip,{content:t("REFRESH")},m.default.createElement(O.Icon,{name:"refresh",color:{primary:"#fff",secondary:"#fff"},size:20,onClick:this.handleNext,clickable:!0,changeable:!0,disabled:a})),m.default.createElement("span",{className:w.default.split},"|"),m.default.createElement(O.Tooltip,{content:t("DOWNLOAD")},r?m.default.createElement(O.Loading,{size:16}):m.default.createElement(O.Icon,{name:"download",color:{primary:"#fff",secondary:"#fff"},size:20,onClick:this.handleDownload,clickable:!0,changeable:!0})))}},{key:"renderContent",value:function(){var e=this.props.contentClassName,a=this.store.logs.data,r=this.state,n=r.loadingPrev,l=r.loadingNext;if((0,b.default)(a))return m.default.createElement(k.default,{desc:"NO_DATA"});var u=String(a).replace(/\\r\\n/g,"\n").split("\n");return m.default.createElement("div",{className:(0,h.default)(w.default.content,e),ref:this.ref},this.tailLines<=u.length&&m.default.createElement("div",{className:w.default.loading},n?m.default.createElement(O.Loading,{spinning:n,size:"small"}):m.default.createElement("div",{className:w.default.more,onClick:this.handlePrev},t("VIEW_MORE"))),u.map((function(e,t){var a=e.match(_.PATTERN_UTC_TIME),r=a?a[0]:t,n=a?e.replace(a[0],""):e;return m.default.createElement("p",{key:r,dangerouslySetInnerHTML:{__html:N.ansi_to_html(n)}})})),m.default.createElement("div",{className:w.default.loading},m.default.createElement(O.Loading,{spinning:l,size:"small"})),this.renderOperations())}},{key:"render",value:function(){var e=this.props.className,a=this.store.logs.isLoading;return m.default.createElement(S.default,{className:e,empty:t("NO_RESOURCE",{resource:t("Log Data")}),loading:a},this.renderContent())}}]),n}(m.default.Component))||l;a.default=I},,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c=r(a(49)),s=r(a(50)),f=r(a(56)),d=r(a(91)),p=r(a(12)),m=r(a(13)),h=r(a(135)),v=r(a(19)),y=r(a(20)),g=r(a(18)),b=r(a(74)),E=(r(a(92)),a(5)),_=r(a(16)),O=r(a(844)),S=r(a(193));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var C=(n=function(e){(0,v.default)(r,e);var t,a=k(r);function r(){var e;(0,p.default)(this,r);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).resourceName="repos",e.defaultStatus=["active"],(0,d.default)(e,"events",l,(0,h.default)(e)),e.getUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.workspace,r=t.repo_id,n=t.name,l=e.baseUrl;return a&&(l+="/workspaces/".concat(a)),r?"".concat(l,"/repos/").concat(r,"/").concat(n||""):"".concat(l,"/repos")},e.getWatchListUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workspace;return"apis/application.kubesphere.io/v1alpha1/watch/helmrepos?labelSelector=kubesphere.io/workspace=".concat(t)},(0,d.default)(e,"fetchDetail",u,(0,h.default)(e)),(0,d.default)(e,"update",o,(0,h.default)(e)),(0,d.default)(e,"delete",i,(0,h.default)(e)),e}return(0,m.default)(r,[{key:"validate",value:function(e){var t=e.workspace,a=(0,f.default)(e,["workspace"]);return request.post("".concat(this.getUrl({workspace:t}),"?validate=true"),a)}},{key:"index",value:function(e){var t=e.workspace,a=e.repo_id;if(a)return request.post(this.getUrl({workspace:t,repo_id:a,name:"action"}),{action:"index"})}},{key:"fetchEvents",value:(t=(0,s.default)(c.default.mark((function e(t){var a,r,n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.workspace,r=t.repo_id,this.events.isLoading=!0,e.next=4,request.get(this.getUrl({workspace:a,repo_id:r,name:"events"}),{});case 4:n=e.sent,this.events.update({data:(0,_.default)(n,"items",[]),total:(0,_.default)(n,"total_count",0)}),this.events.isLoading=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setSelectRowKeys",value:function(e){this.list.selectedRowKeys=e}}]),r}(O.default),l=(0,b.default)(n.prototype,"events",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new S.default}}),u=(0,b.default)(n.prototype,"fetchDetail",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,s.default)(c.default.mark((function t(){var a,r,n,l,u=arguments;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>0&&void 0!==u[0]?u[0]:{},r=a.workspace,n=a.repo_id,e.isLoading=!0,t.next=4,request.get(e.getUrl({workspace:r,repo_id:n}));case 4:l=t.sent,e.detail=l||{},e.detail.workspace=r,e.isLoading=!1;case 8:case"end":return t.stop()}}),t)})))}}),(0,b.default)(n.prototype,"validate",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"validate"),n.prototype),(0,b.default)(n.prototype,"index",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"index"),n.prototype),(0,b.default)(n.prototype,"fetchEvents",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchEvents"),n.prototype),o=(0,b.default)(n.prototype,"update",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,s.default)(c.default.mark((function t(){var a,r,n,l,u=arguments;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>0&&void 0!==u[0]?u[0]:{},r=a.workspace,n=a.repo_id,l=(0,f.default)(a,["workspace","repo_id"]),t.next=3,e.submitting(request.patch(e.getUrl({workspace:r,repo_id:n}),l));case 3:case"end":return t.stop()}}),t)})))}}),i=(0,b.default)(n.prototype,"delete",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.workspace,r=t.repo_id;return e.submitting(request.delete(e.getUrl({workspace:a,repo_id:r}),{}))}}}),(0,b.default)(n.prototype,"setSelectRowKeys",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectRowKeys"),n.prototype),n);t.default=C},,,,,function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(21)),o=l(r(49)),i=l(r(50)),c=l(r(12)),s=l(r(13)),f=l(r(19)),d=l(r(20)),p=l(r(18)),m=n(r(0)),h=l(r(1)),v=l(r(3)),y=r(25),g=l(r(878)),b=r(787),E=r(37),_=l(r(2217));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=function(e){(0,f.default)(r,e);var a=k(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).showPackage=function(){var e=n.props,t=e.hasPackage,a=e.canCreate,r=e.canEdit;return(t||a||r)&&"init"===n.state.status},n.onUploadClick=function(e){e.stopPropagation(),n.uploadRef.onClick()},n.checkPackage=function(){var e=(0,i.default)(o.default.mark((function e(t){var a,r,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({status:"uploading",fileName:t.name});case 2:if(a=n.fileStore,r=a.checkFile,l=a.handleFileByBase64Str,!(u=r(t,"package"))){e.next=8;break}n.setState({errorInfo:u,status:"error"}),e.next=10;break;case 8:return e.next=10,l(t,n.validatePackage);case 10:return e.abrupt("return",Promise.reject());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.validatePackage=function(){var e=(0,i.default)(o.default.mark((function e(t){var a,r,l,u,i,c,s,f,d,p,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.versionId,l=a.type,u=a.changeCheckStatus,i=a.appId,c=a.onOk,s=n.fileStore,f=s.validatePackage,d=s.uploadPackage,e.next=4,f(t,i);case 4:p=e.sent,m=p.error?"error":"success",n.setState({missFile:p.missFile,errorInfo:p.error,status:m}),u(S({status:m},p)),"MODIFY_VERSION"===l&&"success"===m&&(d(l,{version_id:r,app_id:i,name:p.version_name,base64Str:p.base64Str},c),n.setState({status:"init"}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.downloadPackage=function(){var e=n.props,a=e.appId,r={version_id:e.versionId,app_id:a,packageName:e.packageName};n.fileStore.downloadPackage(r).then((function(){y.Notify.success({content:t("DOWNLOAD_SUCCESSFUL")})}))},n.fileStore=n.props.fileStore,n.state={errorInfo:"",status:"init"},n}return(0,s.default)(r,[{key:"renderIcon",value:function(){var e=this.state.status;return"uploading"===e?m.default.createElement("div",{className:_.default.statusIcon},m.default.createElement(y.Loading,null)):m.default.createElement("div",{className:_.default.statusIcon},m.default.createElement("span",{className:_.default.emoji},"📦"),m.default.createElement(y.Icon,{size:16,name:e,className:_.default.icon}))}},{key:"renderUploadInfo",value:function(){var e=this.state,a=e.status,r=e.fileName,n=e.errorInfo,l=e.missFile,u=S(S({},b.UPLOAD_STATUS_WORD),{},{error:n});return m.default.createElement("div",{className:_.default.word},m.default.createElement("div",{className:_.default.name},"init"===a?t("UPLOAD_HELM_TITLE"):r),m.default.createElement("div",{className:_.default.description},t(u[a],{file:l}),"error"===a&&m.default.createElement("label",null,". ",t("UPLOAD_AGAIN_TIP"))))}},{key:"renderPackageInfo",value:function(){var e=this,a=this.props,r=a.className,n=a.packageName,l=a.updateTime,u=a.canEdit;return m.default.createElement("div",{className:(0,v.default)(_.default.upload,_.default.packageInfo,r)},this.renderIcon(),m.default.createElement("div",{className:_.default.word},m.default.createElement("div",{className:_.default.name},n,u&&m.default.createElement("label",{className:_.default.edit,onClick:this.onUploadClick},t("UPLOAD"))),m.default.createElement("div",{className:_.default.description},t("UPDATE_TIME_COLON"),(0,E.getLocalTime)(l).format("YYYY-MM-DD HH:mm:ss"))),m.default.createElement(y.Button,{onClick:this.downloadPackage,type:"default"},t("DOWNLOAD")),m.default.createElement(g.default,{ref:function(t){e.uploadRef=t},beforeUpload:this.checkPackage,accept:b.UPLOAD_FILE_TYPES.package}))}},{key:"renderInfo",value:function(){var e=this.props,a=e.className,r=e.canCreate,n=this.state.status;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:(0,v.default)(_.default.upload,_.default[n],(0,u.default)({},_.default.hide,this.showPackage()),a)},this.renderIcon(),this.renderUploadInfo()),r&&m.default.createElement("div",{onClick:this.onUploadClick,className:_.default.reUpload},"👉 ",t("INCORRECT_FILE"),m.default.createElement("label",null,t("TRY_AGAIN"))))}},{key:"render",value:function(){var e=this;return this.showPackage()?this.renderPackageInfo():m.default.createElement(g.default,{ref:function(t){e.uploadRef=t},beforeUpload:this.checkPackage,accept:b.UPLOAD_FILE_TYPES.package},this.renderInfo())}}]),r}(m.Component);a.default=C,C.propTypes={className:h.default.string,type:h.default.string,appId:h.default.string,versionId:h.default.string,packageName:h.default.string,updateTime:h.default.string,hasPackage:h.default.bool,canCreate:h.default.bool,canEdit:h.default.bool,onOk:h.default.func,changeCheckStatus:h.default.func,fileStore:h.default.object},C.defaultProps={type:"CREATE_APP",appId:"",versionId:"",packageName:"",updateTime:"",hasPackage:!1,canCreate:!1,canEdit:!1,onOk:function(){},changeCheckStatus:function(){},fileStore:{}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(49)),i=r(a(56)),c=r(a(50)),s=r(a(91)),f=r(a(12)),d=r(a(135)),p=r(a(19)),m=r(a(20)),h=r(a(18)),v=r(a(74)),y=(r(a(92)),a(5));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var b=(n=function(e){(0,p.default)(a,e);var t=g(a);function a(){var e;(0,f.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).resourceName="categories",e.getUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.category_id;return a?"".concat(e.baseUrl,"/").concat(e.resourceName,"/").concat(a):"".concat(e.baseUrl,"/").concat(e.resourceName)},(0,s.default)(e,"update",l,(0,d.default)(e)),(0,s.default)(e,"delete",u,(0,d.default)(e)),e}return a}(r(a(844)).default),l=(0,v.default)(n.prototype,"update",[y.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,c.default)(o.default.mark((function t(){var a,r,n,l=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:{},r=a.category_id,n=(0,i.default)(a,["category_id"]),t.next=3,e.submitting(request.patch(e.getUrl({category_id:r}),n));case 3:case"end":return t.stop()}}),t)})))}}),u=(0,v.default)(n.prototype,"delete",[y.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.category_id;return e.submitting(request.delete(e.getUrl({category_id:a}),{}))}}}),n);t.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d=n(r(21)),p=n(r(91)),m=n(r(12)),h=n(r(13)),v=n(r(135)),y=n(r(19)),g=n(r(20)),b=n(r(18)),E=n(r(74)),_=(n(r(92)),n(r(0))),O=n(r(3)),S=n(r(16)),k=n(r(32)),C=r(70),R=r(5),w=n(r(1121)),P=n(r(1014)),D=n(r(2275)),T=n(r(2280)),N=n(r(2315)),I=n(r(2316));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var j={json:{pipeline:{stages:[],agent:{type:"any"}}}},M=(0,C.observer)((f=s=function(e){(0,y.default)(r,e);var a=x(r);function r(e){var t;if((0,m.default)(this,r),t=a.call(this,e),(0,p.default)(t,"clearFocus",o,(0,v.default)(t)),(0,p.default)(t,"handleContinue",i,(0,v.default)(t)),(0,p.default)(t,"handleDiscard",c,(0,v.default)(t)),t.state={},e.isEditMode){t.store=new N.default,t.store.params=e.params;var n=e.params,l=n.devops,u=n.name,s=n.cluster;t.prevData=JSON.parse(localStorage.getItem("".concat(globals.user.username,"-").concat(l,"-").concat(u))),t.store.fetchLabel({cluster:s,devops:l}),(0,k.default)(e.jsonData)?t.store.setData(t.prevData||j):(t.store.jsonData=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.jsonData),t.prevData&&(t.state={showConfirmPrevdata:!0}))}return t}return(0,h.default)(r,[{key:"render",value:function(){var e=this.props,a=e.isEditMode,r=e.className,n=e.isSubmitting;return _.default.createElement("div",{className:(0,O.default)(I.default.content,"pipeline-content",r)},_.default.createElement(w.default,{enableToggleFullScreen:!a,XOffset:30,YOffset:60,onClick:this.clearFocus},_.default.createElement(D.default,{store:this.store,isEditMode:a,stages:this.stages})),a?_.default.createElement(T.default,{store:this.store,onOk:this.props.onOk,onCancel:this.props.onCancel,isSubmitting:n}):null,_.default.createElement(P.default,{visible:this.state.showConfirmPrevdata,width:400,title:t("LoadPrevData_Desc"),content:"",cancelText:t("Discard"),confirmText:t("Continue"),onCancel:this.handleDiscard,onConfirm:this.handleContinue}))}},{key:"stages",get:function(){var e=this.props,t=e.isEditMode,a=e.jsonData;return t?this.store.stages:(0,S.default)(a,"json.pipeline.stages",[])}}]),r}(_.default.Component),s.defaultProps={onOK:function(){},onCancel:function(){}},u=f,o=(0,E.default)(u.prototype,"clearFocus",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.isEditMode&&e.store.clearFocus()}}}),i=(0,E.default)(u.prototype,"handleContinue",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props.params,a=t.devops,r=t.name;e.setState({showConfirmPrevdata:!1}),e.store.setData(e.prevData),localStorage.removeItem("".concat(globals.user.username,"-").concat(a,"-").concat(r))}}}),c=(0,E.default)(u.prototype,"handleDiscard",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props.params,a=t.devops,r=t.name;e.setState({showConfirmPrevdata:!1}),localStorage.removeItem("".concat(globals.user.username,"-").concat(a,"-").concat(r))}}}),l=u))||l;a.default=M},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p,m,h,v,y,g,b,E,_,O,S,k,C,R=r(a(91)),w=r(a(12)),P=r(a(135)),D=r(a(13)),T=r(a(19)),N=r(a(20)),I=r(a(18)),A=(r(a(92)),r(a(74))),x=r(a(0)),j=a(1),M=r(a(3)),L=r(a(73)),U=a(70),F=a(5),V=a(25),q=a(638),B=r(a(2273));function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,I.default)(e);if(t){var n=(0,I.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,N.default)(this,a)}}var G=(0,U.observer)((C=k=function(e){(0,T.default)(a,e);var t=z(a);function a(e){var r;return(0,w.default)(this,a),(r=t.call(this,e)).handleContainerClick=function(e){Math.abs(r.deltaX)>10||Math.abs(r.deltaY)>10?e.stopPropagation():r.props.onClick(e)},r.fullScreenFlagChange=function(){r.isFullscreen=!r.isFullscreen},(0,R.default)(r,"scale",u,(0,P.default)(r)),(0,R.default)(r,"translateX",o,(0,P.default)(r)),(0,R.default)(r,"translateY",i,(0,P.default)(r)),(0,R.default)(r,"isFullscreen",c,(0,P.default)(r)),(0,R.default)(r,"initialComponent",s,(0,P.default)(r)),(0,R.default)(r,"initialPosition",f,(0,P.default)(r)),(0,R.default)(r,"initialScale",d,(0,P.default)(r)),(0,R.default)(r,"handleWheel",p,(0,P.default)(r)),r.stopPropagation=function(e){e.stopPropagation()},(0,R.default)(r,"handleZoomOut",m,(0,P.default)(r)),(0,R.default)(r,"handleZoomIn",h,(0,P.default)(r)),(0,R.default)(r,"handleNormalSize",v,(0,P.default)(r)),(0,R.default)(r,"handleAutoSize",y,(0,P.default)(r)),(0,R.default)(r,"handleContentMove",g,(0,P.default)(r)),(0,R.default)(r,"handleMouseLeave",b,(0,P.default)(r)),(0,R.default)(r,"handleMouseDown",E,(0,P.default)(r)),(0,R.default)(r,"handleMouseUp",_,(0,P.default)(r)),(0,R.default)(r,"handleChangeScale",O,(0,P.default)(r)),(0,R.default)(r,"toggleFullscreen",S,(0,P.default)(r)),r.initPosition={x:0,y:0},r.lastPosition={x:0,y:0},r.isMoved=!1,r}return(0,D.default)(a,[{key:"getChildContext",value:function(){return{scale:this.scale}}}]),(0,D.default)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.initialComponent(),(0,q.addFullScreenChangeEvents)(this.fullScreenFlagChange),this.container&&this.container.addEventListener("wheel",this.handleWheel),this.content){var t=this.content.getBoundingClientRect(),a=t.left,r=t.top;this.domOffsetX=a,this.domOffsetY=r}this.content&&(this.setStyleReaction=(0,F.reaction)((function(){return e.styles}),(function(){(0,L.default)(e.content,"style.transform",(0,F.toJS)(e.styles).transform)}),{fireImmediately:!0}))}},{key:"componentWillUnmount",value:function(){(0,q.removeFullScreenChangeEvents)(this.fullScreenFlagChange),this.container&&this.container.removeEventListener("wheel",this.handleWheel,!1),this.setStyleReaction&&this.setStyleReaction()}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,r=t.className,n=t.contentClassName,l=t.controlStyle,u=t.enableToggleFullScreen,o=t.onRefresh;return x.default.createElement("div",{className:(0,M.default)(B.default.container,r),onClickCapture:this.handleContainerClick,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleContentMove,onMouseUp:this.handleMouseUp,onMouseDown:this.handleMouseDown,"data-container":"pipeline",ref:function(t){e.container=t}},x.default.createElement("div",{className:B.default.controls,style:l,onMouseLeave:this.stopPropagation,onMouseMove:this.stopPropagation},u?x.default.createElement("div",{className:B.default.control,onClick:this.toggleFullscreen},x.default.createElement(V.Icon,{name:this.isFullscreen?"minimize":"maximize",clickable:!0})):null,x.default.createElement("div",{className:B.default.control,onClick:this.handleZoomOut},x.default.createElement(V.Icon,{name:"add",clickable:!0})),x.default.createElement("div",{className:B.default.control,onClick:this.handleZoomIn},x.default.createElement(V.Icon,{name:"substract",clickable:!0})),o&&x.default.createElement("div",{className:B.default.control,onClick:o},x.default.createElement(V.Icon,{name:"refresh",clickable:!0}))),x.default.createElement("div",{className:(0,M.default)(B.default.main_content,n),ref:function(t){e.content=t}},a))}},{key:"styles",get:function(){return{transform:"translate3d(".concat(this.translateX,"px, ").concat(this.translateY,"px, 0)\n          scale(").concat(this.scale,")")}}}]),a}(x.default.Component),k.defaultProps={onClick:function(){},enableToggleFullScreen:!0,XOffset:0,YOffset:0},k.childContextTypes={scale:j.PropTypes.number},l=C,(0,A.default)(l.prototype,"styles",[F.computed],Object.getOwnPropertyDescriptor(l.prototype,"styles"),l.prototype),u=(0,A.default)(l.prototype,"scale",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),o=(0,A.default)(l.prototype,"translateX",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),i=(0,A.default)(l.prototype,"translateY",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),c=(0,A.default)(l.prototype,"isFullscreen",[F.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,A.default)(l.prototype,"initialComponent",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.initialScale?e.scale=e.props.initialScale:e.initialScale(),e.initialPosition()}}}),f=(0,A.default)(l.prototype,"initialPosition",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props,a=t.XOffset,r=t.YOffset;e.translateX=a,e.translateY=r,e.lastPosition={x:e.translateX,y:e.translateY}}}}),d=(0,A.default)(l.prototype,"initialScale",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.container.clientWidth/e.content.clientWidth,a=e.container.clientHeight/e.content.clientHeight,r=Math.min(t,a);e.scale=r>1?1:Math.max(r,.6)}}}),p=(0,A.default)(l.prototype,"handleWheel",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.preventDefault(),t.stopPropagation();var a=t.deltaY>0?1:-1,r=t.clientY-e.domOffsetY,n=t.clientX-e.domOffsetX,l=-.01*(Math.abs(t.deltaY)>5?5*a:t.deltaY),u=e.scale+l;if(u<1&&u>.2){var o=e.content.clientWidth*e.scale,i=e.content.clientHeight*e.scale;n>e.translateX+o?e.translateX=-l*e.content.clientWidth+e.translateX:n>=e.translateX&&(e.translateX=-l*(n-e.translateX)/e.scale+e.translateX),r>e.translateY+i?e.translateY=-l*e.content.clientHeight+e.translateY:r>=e.translateY&&(e.translateY=-l*(r-e.translateY)/e.scale+e.translateY),e.scale=u,e.lastPosition={x:e.translateX,y:e.translateY},e.isMoved=!0}}}}),m=(0,A.default)(l.prototype,"handleZoomOut",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.scale<1&&(e.scale+=.2,e.isMoved=!0)}}}),h=(0,A.default)(l.prototype,"handleZoomIn",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.scale>.4&&(e.scale-=.2,e.isMoved=!0)}}}),v=(0,A.default)(l.prototype,"handleNormalSize",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.scale=1,e.translateX=30,e.translateY=60,e.lastPosition={x:e.translateX,y:e.translateY}}}}),y=(0,A.default)(l.prototype,"handleAutoSize",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.initialScale(),e.initialPosition()}}}),g=(0,A.default)(l.prototype,"handleContentMove",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.DragContent&&(e.translateX=t.clientX-e.initPosition.x+e.lastPosition.x,e.translateY=t.clientY-e.initPosition.y+e.lastPosition.y,e.isMoved=!0)}}}),b=(0,A.default)(l.prototype,"handleMouseLeave",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){"pipeline"===t.currentTarget.dataset.container&&(e.lastPosition={x:e.translateX,y:e.translateY},e.DragContent=!1)}}}),E=(0,A.default)(l.prototype,"handleMouseDown",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.preventDefault(),0===t.button&&(e.initPosition={x:t.clientX,y:t.clientY},e.DragContent=!0)}}}),_=(0,A.default)(l.prototype,"handleMouseUp",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.DragContent&&(e.deltaX=t.clientX-e.initPosition.x,e.deltaY=t.clientY-e.initPosition.y,e.translateX=e.deltaX+e.lastPosition.x,e.translateY=e.deltaY+e.lastPosition.y,e.lastPosition={x:e.translateX,y:e.translateY},e.DragContent=!1)}}}),O=(0,A.default)(l.prototype,"handleChangeScale",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.scale=t/100}}}),S=(0,A.default)(l.prototype,"toggleFullscreen",[F.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props.onFullScreen;if(t)return e.fullScreenFlagChange(),t();e.isFullscreen?(0,q.exitFullScreen)(e.container):(0,q.enterFullScreen)(e.container)}}}),n=l))||n;t.default=G},,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(49)),c=r(a(21)),s=r(a(56)),f=r(a(50)),d=r(a(91)),p=r(a(12)),m=r(a(13)),h=r(a(74)),v=(r(a(92)),a(5));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=(n=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,p.default)(this,e),(0,d.default)(this,"isLoading",l,this),(0,d.default)(this,"pathParams",u,this),(0,d.default)(this,"data",o,this),Object.getOwnPropertyNames(a).forEach((function(e){t[e]=a[e]}))}return(0,m.default)(e,[{key:"getApiPath",value:function(e){return e?"kapis/clusters/".concat(e,"/tenant.kubesphere.io/v1alpha2/logs"):"kapis/tenant.kubesphere.io/v1alpha2/logs"}},{key:"request",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((0,f.default)(i.default.mark((function e(){var t,a,r,n,l,u,o,c=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=c.length>1&&void 0!==c[1]?c[1]:"get",this.isLoading=!0,r=t.start_time,n=t.end_time,l=t.cluster,u=(0,s.default)(t,["start_time","end_time","cluster"]),e.next=6,request[a](this.getApiPath(l),g(g({},u),{},{start_time:r?Math.floor(r/1e3):void 0,end_time:n?Math.floor(n/1e3):void 0}));case 6:return o=e.sent,this.isLoading=!1,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)}))))},{key:"apiVersion",get:function(){return"kapis/logging.kubesphere.io/v1alpha2"}}]),e}(),l=(0,h.default)(n.prototype,"isLoading",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=(0,h.default)(n.prototype,"pathParams",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,h.default)(n.prototype,"data",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,h.default)(n.prototype,"request",[v.action],Object.getOwnPropertyDescriptor(n.prototype,"request"),n.prototype),n);t.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=r(863),h=n(r(1349));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=["10m","20m","30m","1h","2h","3h","5h","12h","1d","2d","3d","7d"],g=function(e){(0,i.default)(r,e);var a=v(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(t){var a=t.target.dataset.value;if(a){var r=e.props.times,n=(0,m.getStep)(a,r),l=parseInt(n,10);l<1&&(r=10,n=(0,m.getStep)(a,r)),l>60&&(n="60m",r=(0,m.getTimes)(a,n)),e.props.onChange({step:n,times:r,start:"",end:"",lastTime:a})}},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.step,r=e.times,n=(0,m.getTimeOptions)(y),u=(0,m.getLastTimeStr)(a,r);return f.default.createElement("div",{className:h.default.default},f.default.createElement("div",{className:h.default.title},t("SELECT_TIME_RANGE")),f.default.createElement("ul",{onClick:this.handleClick},n.map((function(e){var a=e.label,r=e.value;return f.default.createElement("li",{key:a,"data-value":r,className:(0,p.default)((0,l.default)({},h.default.cur,r===u))},t("LAST_TIME",{value:a}))}))))}}]),r}(f.default.Component);a.default=g,g.propTypes={step:d.default.string,times:d.default.number,onChange:d.default.func},g.defaultProps={step:"10m",times:30,onChange:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=r(25),h=r(863),v=n(r(1349));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=["1m","2m","5m","10m","15m","30m","1h","2h","5h"],b=function(e){(0,i.default)(r,e);var a=y(r);function r(e){var n;(0,u.default)(this,r),(n=a.call(this,e)).handlerStartDateClose=n.handlerDateClose("start"),n.handlerEndDateClose=n.handlerDateClose("end"),n.handleOk=function(){var e=n.formData,a=e.step,r=e.start,l=e.end;if(r[0]&&l[0]){var u=r[0].valueOf()/1e3,o=l[0].valueOf()/1e3,i=o-u;if(i>0){var c={step:a,times:Math.floor(i/(60*(0,h.getMinutes)(a)))||1,start:u,end:o,lastTime:""};n.props.onSubmit(c)}else m.Notify.error({content:t("TIMERANGE_SELECTOR_MSG")})}else m.Notify.error({content:t("TIMERANGE_SELECTOR_ERROR_MSG")})};var l=new Date,o=new Date(l.valueOf()-36e5);return n.formData={step:e.step,start:e.start?[e.start]:[o],end:e.end?[e.end]:[l]},n}return(0,o.default)(r,[{key:"handlerDateClose",value:function(e){var t=this;return function(a){t.formData[e]=a,t.forceUpdate()}}},{key:"render",value:function(){var e=this.props,a=e.onCancel,r=e.className,n=this.formData,u=n.start,o=n.end;return f.default.createElement("div",{className:(0,p.default)(v.default.custom,r)},f.default.createElement("div",{className:v.default.title},t("CUSTOM_TIME_RANGE")),f.default.createElement(m.Form,{data:this.formData},f.default.createElement(m.Form.Item,{label:t("START_TIME")},f.default.createElement(m.DatePicker,{name:"start",defaultDate:u[0],maxDate:o[0],enableTime:!0,enableSeconds:!0,dateFormat:"Y-m-d H:i:S",onClose:this.handlerStartDateClose})),f.default.createElement(m.Form.Item,{label:t("END_TIME")},f.default.createElement(m.DatePicker,{name:"end",defaultDate:o[0],maxDate:o[0],enableTime:!0,enableSeconds:!0,dateFormat:"Y-m-d H:i:S",onClose:this.handlerEndDateClose})),this.props.showStep&&f.default.createElement(m.Form.Item,{label:t("SAMPLING_INTERVAL")},f.default.createElement(m.Select,{className:v.default.selectBox,defaultValue:"1m",name:"step",options:(0,h.getTimeOptions)(g)})),f.default.createElement("div",{className:(0,p.default)(v.default.actions,(0,l.default)({},v.default.bottom10,!this.props.showStep))},f.default.createElement(m.Button,{onClick:a},t("CANCEL")),f.default.createElement(m.Button,{type:"control",onClick:this.handleOk},t("OK")))))}}]),r}(f.default.Component);a.default=b,b.propTypes={showStep:d.default.bool,step:d.default.string,times:d.default.number,onSubmit:d.default.func,onCancel:d.default.func},b.defaultProps={showStep:!0,step:"10m",times:30,onSubmit:function(){},onCancel:function(){}}},,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),l=a(25),u=r(a(293)),o=r(a(2525)),i=function(e){var t=e.type,a=e.name,r=e.isActive,i=void 0!==r&&r,c=e.icon,s=e.crumb,f=void 0!==s&&s?18:"openpitrixs"===t?35:40;return n.default.createElement(n.default.Fragment,null,"openpitrixs"===t?n.default.createElement("div",{className:o.default.img},n.default.createElement(u.default,{src:null,iconLetter:a,iconSize:f})):n.default.createElement(l.Icon,{name:c,size:f,type:i?"light":"dark"}))};t.default=i},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(3)),p=n(r(68)),m=r(25),h=r(58),v=n(r(2545));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=y(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.module,r=e.icon,n=e.title,l=e.name,u=e.desc,o=e.action,i=e.className,c=(0,p.default)(u)?t.html("".concat(l.replace(/[-\s]/g,"_").toUpperCase(),"_EMPTY_DESC")):u,f=r||h.ICON_TYPES[a]||"appcenter";return s.default.createElement("div",{className:(0,d.default)(v.default.wrapper,i)},s.default.createElement("div",{className:v.default.image},s.default.createElement(m.Icon,{name:f,size:48})),s.default.createElement("div",{className:v.default.title},n||t("EMPTY_WRAPPER",{resource:t(l.replace(/[- ]/g,"_").toUpperCase())})),s.default.createElement("p",{className:v.default.desc},c),o&&s.default.createElement("div",{className:v.default.actions},o))}}]),r}(s.default.PureComponent);a.default=g,g.propTypes={module:f.default.string,name:f.default.string,title:f.default.string,desc:f.default.string,className:f.default.string,action:f.default.node},g.defaultProps={name:"",module:""}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),u=r(a(109)),o=r(a(12)),i=r(a(13)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=r(a(0)),p=a(70),m=r(a(32)),h=r(a(93)),v=r(a(16)),y=a(25);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){var t=function(t){(0,c.default)(r,t);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).getColumns=function(){var t=e.props.columns;return[].concat((0,u.default)(t),[{key:"more",width:20,render:e.renderMore}])},e.handleMoreMenuClick=function(t){return function(a,r){var n=e.enabledItemActions.find((function(e){return e.key===r}));n&&n.onClick&&n.onClick(t)}},e.renderMore=function(t,a){if((0,m.default)(e.enabledItemActions))return null;var r=e.renderMoreMenu(a);return null===r?null:d.default.createElement(y.Dropdown,{content:r,trigger:"click",placement:"bottomRight"},d.default.createElement(y.Button,{icon:"more",type:"flat"}))},e.renderMoreMenu=function(t){var a=e.enabledItemActions.map((function(e){var a=(0,h.default)(e.show)?e.show(t):e.show||!0,r=(0,h.default)(e.icon)?e.icon(t):e.icon,n=(0,h.default)(e.text)?e.text(t):e.text,l=(0,v.default)(e,"disabled",void 0);return a?d.default.createElement(y.Menu.MenuItem,{key:e.key,disabled:!!(0,h.default)(l)&&l(t)},d.default.createElement(y.Icon,{name:r})," ",d.default.createElement("span",{"data-test":"table-item-".concat(e.key)},n)):null}));return a.every((function(e){return null===e}))?null:d.default.createElement(y.Menu,{onClick:e.handleMoreMenuClick(t)},a)},e}return(0,i.default)(r,[{key:"getEnabledTableActions",value:function(){var e=this,t=this.props,a=t.tableActions,r=t.enabledActions,n=(0,l.default)(t,["tableActions","enabledActions"]);return Object.assign(a,n),r.includes("delete")||(a.onDelete=null),r.includes("create")||(a.onCreate=null),a.actions&&(a.actions=a.actions.filter((function(t){return!t.action||"function"==typeof t.filter&&t.filter.call(e,t)||r.includes(t.action)}))),a.selectActions&&(a.selectActions=a.selectActions.filter((function(e){return!e.action||r.includes(e.action)}))),(0,m.default)(a.selectActions)&&(a.onSelectRowKeys=null),a}},{key:"render",value:function(){return d.default.createElement(e,(0,n.default)({},this.getEnabledTableActions(),{columns:this.getColumns()}))}},{key:"enabledItemActions",get:function(){var e=this.props,t=e.itemActions,a=e.enabledActions;return t.filter((function(e){return!e.action||a.includes(e.action)}))}}]),r}(d.default.Component);return t.defaultProps={itemActions:[],enabledActions:[],tableActions:{}},(0,p.observer)(t)};t.default=b},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p,m,h=r(a(49)),v=r(a(50)),y=r(a(91)),g=r(a(12)),b=r(a(13)),E=r(a(74)),_=(r(a(92)),a(5)),O=r(a(32)),S=r(a(16)),k=r(a(655)),C=r(a(73)),R=a(37),w=a(821),P=(n=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,g.default)(this,e),(0,y.default)(this,"page",l,this),(0,y.default)(this,"data",u,this),(0,y.default)(this,"total_page",o,this),(0,y.default)(this,"isLoading",i,this),(0,y.default)(this,"limit",c,this),(0,y.default)(this,"sort_metric",s,this),(0,y.default)(this,"sort_type",f,this),(0,y.default)(this,"changeSortType",d,this),(0,y.default)(this,"changeSortMetric",p,this),(0,y.default)(this,"changePagination",m,this),this.download=function(e){var a=JSON.stringify(t.data,null,2),r=new Blob([a],{type:"text/plain;charset=utf-8"});(0,w.saveAs)(r,e)},this.handleResult=function(e){var t=(0,S.default)(e,"results",[]);return(0,O.default)(t)?[]:t.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.metric_name,r=(0,S.default)(t,"data.result")||[];return r.forEach((function(t,r){var n=e[r]||{},l=(0,S.default)(t,"value",[]),u=(0,S.default)(t,"metric",{});n[a]=l[1],Object.assign(n,u),e[r]=n})),e}),[])},Object.keys(a).forEach((function(e){return(0,C.default)(t,e,a[e])}))}var t;return(0,b.default)(e,[{key:"apiVersion",get:function(){return globals.app.isMultiCluster&&this.cluster?"kapis/clusters/".concat(this.cluster,"/monitoring.kubesphere.io/v1alpha3"):"kapis/monitoring.kubesphere.io/v1alpha3"}},{key:"fetchUrl",get:function(){return"".concat(this.apiVersion,"/").concat(this.resource)}},{key:"rankRequestTag",get:function(){return"rank"}},{key:"defaultParams",get:function(){return{type:this.rankRequestTag}}}]),(0,b.default)(e,[{key:"fetchAll",value:(t=(0,v.default)(h.default.mark((function e(){var t,a,r,n,l=arguments;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},this.isLoading=!0,a={type:this.rankRequestTag,metrics_filter:this.metrics_filter,page:this.page,limit:this.limit,sort_type:this.sort_type,sort_metric:this.sort_metric||(0,S.default)(this,"sort_metric_options.[0]")},e.next=5,(0,R.to)(request.get(this.fetchUrl,(0,k.default)(a,t)));case 5:return r=e.sent,n=this.handleResult(r),this.total_page=r.total_page,this.data=n,this.isLoading=!1,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),l=(0,E.default)(n.prototype,"page",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=(0,E.default)(n.prototype,"data",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,E.default)(n.prototype,"total_page",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),i=(0,E.default)(n.prototype,"isLoading",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c=(0,E.default)(n.prototype,"limit",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),s=(0,E.default)(n.prototype,"sort_metric",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,E.default)(n.prototype,"sort_type",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"desc"}}),d=(0,E.default)(n.prototype,"changeSortType",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.sort_type="desc"===e.sort_type?"asc":"desc",e.fetchAll()}}}),p=(0,E.default)(n.prototype,"changeSortMetric",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.sort_metric=t,e.fetchAll()}}}),m=(0,E.default)(n.prototype,"changePagination",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.page=t,e.fetchAll()}}}),(0,E.default)(n.prototype,"fetchAll",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchAll"),n.prototype),n);t.default=P},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.data,r=e.module,n=(0,o.getWorkloadStatus)(a,r).status,i="Running"===n?"JobRunning":n;return l.default.createElement(u.default,{type:i,name:t(n),flicker:!0})};var l=n(r(0)),u=n(r(729)),o=r(289)},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(19)),u=r(a(20)),o=r(a(18));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var c=function(e){(0,l.default)(a,e);var t=i(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).module="serviceaccounts",e}return a}(r(a(277)).default);t.default=c},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(19)),u=r(a(20)),o=r(a(18));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var c=function(e){(0,l.default)(a,e);var t=i(a);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"namespacenetworkpolicies";return(0,n.default)(this,a),t.call(this,e)}return a}(r(a(277)).default);t.default=c},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(49)),o=r(a(56)),i=r(a(50)),c=r(a(91)),s=r(a(12)),f=r(a(13)),d=r(a(74)),p=(r(a(92)),r(a(2810))),m=a(5),h=r(a(186)),v=(n=function(){function e(){(0,s.default)(this,e),(0,c.default)(this,"list",l,this)}var t;return(0,f.default)(e,[{key:"fetchList",value:(t=(0,i.default)(u.default.mark((function e(t){var a,r,n,l,i,c;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.name,a=t.cluster,r=t.namespace,n=(0,o.default)(t,["name","cluster","namespace"]),this.list.isLoading=!0,l=a?"/klusters/".concat(a):"",i=r?"/namespaces/".concat(r):"",e.next=6,request.get("api/v1".concat(l).concat(i,"/events"),n);case 6:c=e.sent,this.list={data:(0,p.default)(c.items.map(h.default.events),"lastTimestamp"),total:c.items.length,isLoading:!1};case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),l=(0,d.default)(n.prototype,"list",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,isLoading:!0}}}),(0,d.default)(n.prototype,"fetchList",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),n);t.default=v},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=n(r(723)),m=n(r(729)),h=n(r(2811));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).getColumns=function(){return[{title:t("TYPE"),dataIndex:"type",width:"10%",render:function(e){return s.default.createElement(m.default,{type:e,name:t("EVENT_".concat(e.toUpperCase()))})}},{title:t("REASON"),dataIndex:"reason",width:"16%"},{title:t("EVENT_AGE"),dataIndex:"age",width:"16%"},{title:t("SOURCE"),dataIndex:"from",width:"18%"},{title:t("MESSAGE"),dataIndex:"message"}]},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.data,r=e.loading;return s.default.createElement(p.default,{title:t("EVENT_PL")},s.default.createElement(d.Table,{className:h.default.table,dataSource:a,columns:this.getColumns(),loading:r}))}}]),r}(s.default.Component);y.propTypes={data:f.default.array,loading:f.default.bool};var g=y;a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(276),m=n(r(1)),h=n(r(3)),v=n(r(68)),y=n(r(32)),g=r(25),b=n(r(653)),E=r(638),_=r(289),O=n(r(2817)),S=n(r(1415));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=function(e){(0,c.default)(r,e);var a=k(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).state={showContainerLog:!1},e.getLink=function(t){return"".concat(e.props.prefix,"/containers/").concat(t)},e.handleOpenTerminal=function(){var t=e.props,a=t.cluster,r=t.podName,n=e.props.detail,l=n.namespace,u=n.name,o="/terminal/cluster/".concat(a,"/projects/").concat(l,"/pods/").concat(r,"/containers/").concat(u);window.open(o,"Connecting ".concat(u),(0,E.createCenterWindowOpt)({width:1200,height:800,scrollbars:1,resizable:1}))},e.showContainerLog=function(){e.setState({showContainerLog:!0})},e.hideContainerLog=function(){e.setState({showContainerLog:!1})},e.renderLife=function(){var a=e.props.detail.lifecycle,r=a.preStop,n=a.postStart;return a?d.default.createElement("div",{className:S.default.probe},e.renderProbeRecord({probe:n,title:t("PostStart"),tagType:"primary",noTime:!0}),e.renderProbeRecord({probe:r,title:t("PreStop"),tagType:"warning",noTime:!0})):null},e}return(0,i.default)(r,[{key:"renderProbe",value:function(){var e=this.props.detail,a=e.livenessProbe,r=e.readinessProbe,n=e.startupProbe;return a||r||n?d.default.createElement("div",{className:S.default.probe},this.renderProbeRecord({probe:r,title:t("READINESS_PROBE"),tagType:"primary"}),this.renderProbeRecord({probe:a,title:t("LIVENESS_PROBE"),tagType:"warning"}),this.renderProbeRecord({probe:n,title:t("STARTUP_PROBE"),tagType:"info"})):null}},{key:"renderProbeRecord",value:function(e){var a=e.probe,r=e.title,n=e.tagType,l=e.noTime,u=void 0!==l&&l;if(!a)return null;var o,i,c=a.initialDelaySeconds||0,s=a.timeoutSeconds||0;if("httpGet"in a){var f=a.httpGet,p=f.path,m=f.port,h=f.scheme;o="HTTP_REQUEST",i="GET ".concat(p," on port ").concat(m," (").concat(h,")")}else if("tcpSocket"in a)o="TCP_PORT",i="Open socket on port ".concat(a.tcpSocket.port," (TCP)");else{var v=a.exec.command;o="COMMAND",i=(void 0===v?[]:v).join(" ")}return d.default.createElement("div",{className:S.default.probeItem},d.default.createElement("div",null,d.default.createElement(g.Tag,{type:n},r),d.default.createElement("span",{className:S.default.probeType},t(o)),d.default.createElement("br",null),!u&&d.default.createElement("span",{className:S.default.probeTime},t("INITIAL_DELAY_TIMEOUT_VALUE",{delay:c,timeout:s}))),d.default.createElement("p",null,i))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.detail,n=e.isCreating,o=e.prefix,i=e.podName,c=e.cluster,s=e.isInit,f=e.onContainerClick,m=(0,u.default)(e,["className","detail","isCreating","prefix","podName","cluster","isInit","onContainerClick"]),E=this.state.showContainerLog,k=this.getLink(r.name),C=(0,_.getContainerStatus)(r),R=C.status,w=C.reason,P=r.livenessProbe||r.readinessProbe||r.startupProbe,D=r.lifecycle&&!(0,y.default)(r.lifecycle);return d.default.createElement("div",(0,l.default)({className:(0,h.default)(S.default.item,a)},m),d.default.createElement("div",{className:S.default.icon},d.default.createElement(g.Icon,{name:"docker",size:40}),!(0,v.default)(r.ready)&&d.default.createElement(b.default,{className:S.default.indicator,type:R,flicker:!0})),d.default.createElement("div",{className:(0,h.default)(S.default.text,S.default.name)},d.default.createElement("div",null,o&&"terminated"!==R?d.default.createElement(p.Link,{to:k},d.default.createElement("span",{onClick:f},r.name)):d.default.createElement("span",{className:S.default.noLink},r.name),o&&!n&&d.default.createElement(g.Tooltip,{content:t("CONTAINER_LOGS")},d.default.createElement(g.Icon,{className:"margin-l8",name:"log",size:16,clickable:!0,onClick:this.showContainerLog})),"running"===R&&o&&this.canViewTerminal&&d.default.createElement(g.Tooltip,{content:t("TERMINAL")},d.default.createElement(g.Icon,{className:"margin-l8",name:"terminal",size:16,clickable:!0,onClick:this.handleOpenTerminal})),s&&d.default.createElement(g.Tag,{className:"margin-l8",type:"warning"},t("INIT_CONTAINER")),P&&d.default.createElement(g.Tooltip,{content:this.renderProbe()},d.default.createElement(g.Tag,{className:"margin-l8"},t("PROBE_PL"))),D&&d.default.createElement(g.Tooltip,{content:this.renderLife()},d.default.createElement(g.Tag,{color:"#55BC8A",className:"margin-l8"},t("HOOK_PL")))),w?d.default.createElement("p",null,t(w)):d.default.createElement("p",null,t("IMAGE_VALUE",{value:r.image}))),d.default.createElement("div",{className:S.default.text},d.default.createElement("div",null,(0,v.default)(R)?"-":t(R.toUpperCase())),d.default.createElement("p",null,t("STATUS"))),d.default.createElement("div",{className:S.default.text},d.default.createElement("div",null,(0,v.default)(r.restartCount)?"-":r.restartCount),d.default.createElement("p",null,(0,v.default)(r.restartCount)||1!==r.restartCount?t("RESTART_PL"):t("RESTART"))),d.default.createElement("div",{className:S.default.text},d.default.createElement("div",null,(0,y.default)(r.ports)?"-":r.ports.map((function(e){return"".concat(e.containerPort,"/").concat(e.protocol)})).join(", ")),d.default.createElement("p",null,(0,y.default)(r.ports)||1!==r.ports.length?t("PORT_PL"):t("PORT"))),d.default.createElement(O.default,{visible:E,podName:i,container:r,cluster:c,onCancel:this.hideContainerLog}))}},{key:"canViewTerminal",get:function(){var e=this.props,t=e.cluster,a=e.hideterminal,r=this.props.detail.namespace;return!a&&globals.app.hasPermission({module:"pods",project:r,action:"edit",cluster:t})}}]),r}(d.default.Component);a.default=C,C.propTypes={className:m.default.string,prefix:m.default.string,detail:m.default.object,podName:m.default.string,isCreating:m.default.bool},C.defaultProps={prefix:"",detail:{},isCreating:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(32)),v=r(58),y=n(r(723)),g=n(r(2819));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(r,e);var a=b(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"renderContent",value:function(){var e=this.props,a=e.ports,r=e.isFederated;return(0,h.default)(a)?null:d.default.createElement("div",{className:g.default.content},d.default.createElement("table",{className:g.default.table},d.default.createElement("thead",null,d.default.createElement("tr",null,r&&d.default.createElement("th",null,t("CLUSTER")),d.default.createElement("th",null,t("NAME")),d.default.createElement("th",null,t("PROTOCOL")),d.default.createElement("th",null,t("PORT")))),d.default.createElement("tbody",null,a.map((function(e,t){return d.default.createElement("tr",{key:t},r&&d.default.createElement("td",null,e.cluster),d.default.createElement("td",null,e.name),d.default.createElement("td",null,e.protocol),d.default.createElement("td",null,e.containerPort))})))))}},{key:"render",value:function(){var e=this.props,a=e.className,r=(e.loading,(0,u.default)(e,["className","loading"])),n=this.props.title||t("PORT_PL");return d.default.createElement(y.default,(0,l.default)({className:(0,m.default)(g.default.card,a),title:n},r),this.renderContent())}},{key:"protocols",get:function(){return v.PROTOCOLS.map((function(e){return e.value}))}}]),r}(d.default.Component);a.default=E,E.propTypes={className:p.default.string,ports:p.default.array},E.defaultProps={ports:[]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(74)),d=n(r(0)),p=r(5),m=r(70),h=n(r(294)),v=r(37),y=r(979),g=r(280),b=n(r(1377)),E=r(25),_=n(r(275)),O=n(r(636)),S=n(r(723)),k=n(r(2833)),C=n(r(2838));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var w=(l=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).revisionStore=new b.default(e.module),e.state={showViewYaml:!1,lastRevision:0,selectRevision:0},e.fetchData=function(){e.revisionStore.fetchList(e.store.detail).then((function(){e.setState({selectRevision:e.curRevision})}))},e.handleRevisionChange=function(t){e.setState({selectRevision:t})},e}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderDiff",value:function(){var e=this.state.selectRevision,a=(0,p.toJS)(this.revisionStore.list.data),r=Math.max(Number(e)-1,0),n=a.find((function(t){return t.revision===e})),l=a.find((function(e){return e.revision===r})),u=n?(0,y.getValue)(n._originData):"",o=l?(0,y.getValue)(l._originData):"";return d.default.createElement(k.default,{datas:[o,u],title:t("CONFIG_FILE"),description:l?t("COMPARE_WITH",{version:"#".concat(r," (").concat(l.name.replace("".concat(l.ownerName,"-"),""),")")}):""})}},{key:"render",value:function(){var e=this.revisionStore.list,a=e.data,r=e.isLoading,n=this.state.selectRevision,l=a.find((function(e){return e.revision===n}));return d.default.createElement("div",null,d.default.createElement(S.default,{title:t("REVISION_RECORDS")},d.default.createElement(E.Alert,{className:"margin-b12",message:t("REVISION_RECORDS_DESC"),hideIcon:!0}),d.default.createElement(O.default,{value:n,options:this.revisions,loading:r,onChange:this.handleRevisionChange})),l&&d.default.createElement(S.default,null,d.default.createElement("div",{className:C.default.header},d.default.createElement(_.default,{title:"#".concat(l.revision),description:t("SERIAL_NUMBER")}),d.default.createElement(_.default,{title:(0,v.getLocalTime)(l.createTime).format("YYYY-MM-DD HH:mm:ss"),description:t("CREATION_TIME")})),d.default.createElement("div",{className:C.default.diffWrapper},this.renderDiff())))}},{key:"module",get:function(){return this.store.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"curRevision",get:function(){var e=(0,p.toJS)(this.revisionStore.list).data;return(0,g.getCurrentRevision)(this.store.detail,e,this.module)}},{key:"revisions",get:function(){var e=this,a=(0,p.toJS)(this.revisionStore.list).data;return(0,h.default)(a,(function(e){return parseInt(e.revision,10)})).reverse().map((function(a){var r="#".concat(a.revision," (").concat(a.name.replace("".concat(a.ownerName,"-"),""),")");return a.revision===e.curRevision&&(r=d.default.createElement("span",null,d.default.createElement("span",null,r)," ",d.default.createElement(E.Tag,{type:"primary"},t("RUNNING")))),{label:r,description:t("CREATED_TIME",{diff:(0,v.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")}),icon:"timed-task",value:a.revision}}))}}]),r}(d.default.Component),(0,f.default)(l.prototype,"curRevision",[p.computed],Object.getOwnPropertyDescriptor(l.prototype,"curRevision"),l.prototype),(0,f.default)(l.prototype,"revisions",[p.computed],Object.getOwnPropertyDescriptor(l.prototype,"revisions"),l.prototype),l),P=(0,m.inject)("rootStore","detailStore")((0,m.observer)(w));a.default=P;var D=w;a.Component=D},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(135)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(70),v=n(r(3)),y=n(r(32)),g=n(r(16)),b=r(37),E=r(725),_=n(r(920)),O=r(25),S=r(735),k=r(779),C=n(r(1422)),R=n(r(2841));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T={cpu_usage:"pod_cpu_usage",memory_usage:"pod_memory_usage_wo_cache",net_transmitted:"pod_net_bytes_transmitted",net_received:"pod_net_bytes_received"},N={deployments:"deployment",statefulsets:"statefulset",daemonsets:"daemonset"},I=(0,h.inject)("detailStore")(l=(0,h.observer)(l=function(e){(0,f.default)(r,e);var a=D(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state.pods;(0,y.default)(a)?t.resourceStore.fetchSortedMetrics(P(P({},t.resourceParams),{},{metrics:[T.cpu_usage],limit:5})).then((function(a){var r=((0,g.default)(a[T.cpu_usage],"data.result")||[]).map((function(e){return(0,g.default)(e,"metric.pod")}));t.setState({pods:r},(function(){t.fetchMetrics(P({resources:r},e))}))})):t.fetchMetrics(P({resources:a},e))},t.fetchMetrics=function(e){t.monitorStore.fetchMetrics(P(P({resources:[],metrics:Object.values(T)},t.resourceParams),e))},t.getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU_USAGE",unitType:"cpu",metricType:T.cpu_usage},{type:"memory",title:"MEMORY_USAGE",unitType:"memory",metricType:T.memory_usage},{type:"bandwidth",title:"OUTBOUND_TRAFFIC",unitType:"bandwidth",metricType:T.net_transmitted},{type:"bandwidth",title:"INBOUND_TRAFFIC",unitType:"bandwidth",metricType:T.net_received}]},t.showMultipleModal=function(e){return(0,b.cacheFunc)("_showMultipleModal_".concat(e.title),(function(){t.setState({showMultipleModal:!0,selectItem:P(P({},e),{},{legend:["USAGE"]})})}),(0,s.default)(t))},t.hideMultipleModal=function(){t.setState({showMultipleModal:!1,selectItem:{}})},t.state={showMultipleModal:!1,selectItem:{},pods:[]},t.monitorStore=new _.default,t.resourceStore=new _.default,t}return(0,c.default)(r,[{key:"renderCard",value:function(){var e=this,a=this.store.detail.createTime,r=this.monitorStore,n=r.isLoading,l=r.isRefreshing,o=this.getMonitoringCfgs(),i=this.isMore;return m.default.createElement(k.Controller,{createTime:a,onFetch:this.fetchData,loading:n,refreshing:l,isEmpty:(0,y.default)(this.metrics)},i&&m.default.createElement(O.Alert,{message:t.html("MONITORING_ALERT_DESC"),type:"info"}),o.map((function(a){a.data=(0,g.default)(e.metrics,"".concat(a.metricType,".data.result"))||[],a.legend=a.data.map((function(e,t){return(0,g.default)(e,"metric.pod","pod".concat(t))}));var r=(0,E.getAreaChartOps)(a);return(0,y.default)(r.data)?null:m.default.createElement("div",{key:a.title,className:(0,v.default)(R.default.item)},i&&m.default.createElement("div",{className:R.default.more,onClick:e.showMultipleModal(a)},t("VIEW_ALL_REPLICAS")),m.default.createElement(S.MultiArea,(0,u.default)({width:"100%"},r)))})))}},{key:"renderModal",value:function(){var e=this.state,t=e.showMultipleModal,a=e.selectItem,r=this.store.detail,n=r.name,l=r.cluster,u=r.namespace;return m.default.createElement("div",null,m.default.createElement(C.default,{visible:t,module:this.monitoringModule,name:n,cluster:l,namespace:u,config:a,onCancel:this.hideMultipleModal}))}},{key:"render",value:function(){return m.default.createElement("div",null,this.renderCard(),this.renderModal())}},{key:"store",get:function(){return this.props.detailStore}},{key:"monitoringModule",get:function(){return N[this.store.module]}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"resourceParams",get:function(){var e=this.store.detail,t=e.cluster,a=e.namespace,r=e.name;return{cluster:t,namespace:a,workloadKind:this.monitoringModule,workloadName:r}}},{key:"isMore",get:function(){var e=this.store.detail,t=e.podNums,a=e.status;return(t||a.numberAvailable)>5}}]),r}(m.default.Component))||l)||l;a.default=I},function(e,t,a){e.exports={content:"_3FM8kUfPi58NTqG-v-BrNb",resources:"_1R7muvnsTC4Zhjl-4l-zuy",title:"_3de4DzGT3yyhEyce7ihHLp",list:"_2rzKFi8FHaUSYu0OXiI41n",hide:"_24XSytwk4ADbSpIYr6psrA",item:"e5UojLojMu_nnf3Yno4yX",itemCheck:"_16RkaI9cwAEHeMx-9x8l2-",itemInfo:"_2IvG7dy1qfqM5fGJKiD55j",charts:"_4ZadmDzM-srhYaOfs2tU9"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(49)),c=r(a(50)),s=r(a(91)),f=r(a(12)),d=r(a(13)),p=r(a(74)),m=(r(a(92)),a(5)),h=a(37),v=r(a(186)),y=(n=function(){function e(){var t=this;(0,f.default)(this,e),(0,s.default)(this,"isExistService",l,this),(0,s.default)(this,"service",u,this),(0,s.default)(this,"isLoading",o,this),this.getServiceUrl=function(e){var a=e.name,r=e.cluster,n=e.namespace;return"api/v".concat(t.getPath({cluster:r,namespace:n}),"/services/").concat(a)}}var t,a;return(0,d.default)(e,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"checkService",value:(a=(0,c.default)(i.default.mark((function e(t){var a,r,n,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.name,r=t.cluster,n=t.namespace,a&&n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,request.get(this.getServiceUrl({name:a,cluster:r,namespace:n}),{},{headers:{"x-check-exist":!0}});case 5:l=e.sent,this.isExistService=l.exist;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchService",value:(t=(0,c.default)(i.default.mark((function e(t){var a,r,n,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.cluster,n=t.namespace,this.isLoading=!0,e.next=4,(0,h.to)(request.get(this.getServiceUrl({name:a,cluster:r,namespace:n})));case 4:l=e.sent,this.service=v.default.services(l),this.isLoading=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),l=(0,p.default)(n.prototype,"isExistService",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=(0,p.default)(n.prototype,"service",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,p.default)(n.prototype,"isLoading",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),(0,p.default)(n.prototype,"checkService",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"checkService"),n.prototype),(0,p.default)(n.prototype,"fetchService",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchService"),n.prototype),n);t.default=y},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(49)),c=n(r(109)),s=n(r(136)),f=n(r(50)),d=n(r(12)),p=n(r(13)),m=n(r(19)),h=n(r(20)),v=n(r(18)),y=n(r(0)),g=n(r(1)),b=n(r(3)),E=n(r(32)),_=r(70),O=r(25),S=n(r(736)),k=n(r(723)),C=r(37),R=n(r(2857)),w=n(r(1429));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var D=(0,_.observer)((o=u=function(e){(0,m.default)(r,e);var a=P(r);function r(){var e;(0,d.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=new S.default,e.state={workloads:[],isLoading:!0},e.getData=(0,f.default)(i.default.mark((function t(){var a,r,n,l,u,o,f,d,p,m;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.selector,n=a.cluster,l=a.namespace,(0,E.default)(r)){t.next=12;break}return e.setState({isLoading:!0}),u=(0,C.joinSelector)(r),t.next=6,Promise.all([e.store.fetchListByK8s({cluster:n,namespace:l,labelSelector:u,module:"deployments"}),e.store.fetchListByK8s({cluster:n,namespace:l,labelSelector:u,module:"statefulsets"}),e.store.fetchListByK8s({cluster:n,namespace:l,labelSelector:u,module:"daemonsets"})]);case 6:o=t.sent,f=(0,s.default)(o,3),d=f[0],p=f[1],m=f[2],e.setState({workloads:[].concat((0,c.default)(d),(0,c.default)(p),(0,c.default)(m)),isLoading:!1});case 12:case"end":return t.stop()}}),t)}))),e}return(0,p.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"renderContent",value:function(){var e=this.props.prefix,a=this.state,r=a.workloads,n=a.isLoading;return(0,E.default)(r)&&!n?y.default.createElement("div",{className:w.default.empty},t("NO_AVAILABLE_RESOURCE_VALUE",{resource:t("WORKLOAD")})):y.default.createElement(O.Loading,{spinning:n},y.default.createElement("div",{className:w.default.content},r.map((function(t){return y.default.createElement(R.default,{key:"".concat(t.module,"-").concat(t.name),prefix:e,detail:t})}))))}},{key:"render",value:function(){var e=this.props.className;return y.default.createElement(k.default,{className:(0,b.default)(w.default.main,e),title:t("WORKLOAD_PL")},this.renderContent())}}]),r}(y.default.Component),u.propTypes={className:g.default.string,prefix:g.default.string,selector:g.default.object},u.defaultProps={prefix:"",selector:{}},l=o))||l;a.default=D},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=r(a(3)),d=r(a(2973));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.className,r=e.text,n=e.rightText,l={width:"".concat(100*t,"%")},u="default";t>=.8&&(u="warning"),t>=.95&&(u="danger");var o={left:"".concat(t>.35?t/2*100:100*(t+.01),"%"),transform:t>.35?"translateX(-50%)":"",color:t>.35?"#fff":"#79879c"};return c.default.createElement("div",{className:(0,f.default)(d.default.wrapper,a)},c.default.createElement("div",{className:(0,f.default)(d.default.bar,d.default[u]),style:l}),r&&!!t&&c.default.createElement("span",{className:d.default.text,style:o},r),n&&c.default.createElement("span",{className:d.default.rightText},n))}}]),a}(c.default.Component);t.default=m,m.propTypes={value:s.default.number.isRequired,className:s.default.string},m.defaultProps={value:0}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=n(r(32)),v=r(25),y=r(37),g=r(635),b=n(r(767)),E=n(r(816)),_=n(r(3004));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,m.inject)("rootStore")(l=(0,m.observer)(l=(0,g.trigger)(l=function(e){(0,c.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new b.default,e.fetchData=function(){e.store.getGateway({cluster:e.cluster,namespace:e.namespace})},e.getOperations=function(){var a=(0,p.toJS)(e.detail),r=[{key:"edit",icon:"pen",text:t("EDIT"),action:"manage",onClick:function(){return e.trigger("gateways.edit",{cluster:e.cluster,namespace:e.namespace,detail:(0,p.toJS)(e.detail._originData),success:e.fetchData})}},{key:"update",icon:"update",text:t("UPDATE"),action:"manage",disabled:!(0,h.default)(a.createTime),onClick:function(){return e.trigger("gateways.edit",{cluster:e.cluster,namespace:e.namespace,detail:(0,p.toJS)(e.detail._originData),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DISABLE"),action:"delete",onClick:function(){return e.trigger("gateways.delete",{cluster:e.cluster,namespace:e.namespace,detail:(0,p.toJS)(e.detail),success:function(){location.replace(e.listUrl)}})}}];return!(0,h.default)(a.createTime)&&r.splice(1,1),r},e.getAttrs=function(){var a=(0,p.toJS)(e.detail)||{};if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:e.cluster},{name:t("Create Time"),value:(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,y.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){localStorage.removeItem("federated-cluster")}},{key:"render",value:function(){var e={detailStore:this.store},a=this.props.match.params.workspace;if(this.store.gateway.isLoading&&!this.store.gateway.name)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var r={module:this.module,name:this.detail.name,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:a?t("PROJECT_GATEWAY"):t("CLUSTER_GATEWAY"),url:this.listUrl}]};return d.default.createElement(E.default,(0,u.default)({stores:e,routes:(0,_.default)(this.props.match.path)},r))}},{key:"module",get:function(){return"gateways"}},{key:"detail",get:function(){return this.store.gateway.data||{}}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.location.pathname.indexOf("federatedprojects")>-1?localStorage.getItem("federated-cluster"):e}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"listUrl",get:function(){var e=this.props.match.params.workspace;return"".concat(this.props.match.url.split("gateways")[0],e?"gateways":"gateways/cluster")}}]),r}(d.default.Component))||l)||l)||l;a.default=S},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(49)),l=r(a(50)),u=r(a(21)),o=r(a(56)),i=r(a(12)),c=r(a(13)),s=r(a(19)),f=r(a(20)),d=r(a(18)),p=r(a(32)),m=a(725),h=a(37);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var t,a=g(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).resourceName="gateways",e.getApi=function(t){var a=t.namespace;return"".concat(e.apiVersion,"/namespaces/").concat(a||"kubesphere-system","/ingresses")},e.getGatewayParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resources,a=void 0===t?[]:t,r=e.metrics,n=void 0===r?[]:r,l=(0,o.default)(e,["resources","metrics"]),u=y({},l);return(0,p.default)(a)||(u.resources_filter="".concat(a.join("|"),"$")),(0,p.default)(n)||(u.metrics_filter="".concat(n.join("|"),"$")),u.time=Math.floor(Date.now()/1e3),u},e}return(0,c.default)(r,[{key:"fetchGatewayMetrics",value:(t=(0,l.default)(n.default.mark((function e(t){var a,r,l,u,i,c,s,f,d,p,v;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.autoRefresh,r=void 0!==a&&a,l=t.more,u=void 0!==l&&l,i=t.fillZero,c=void 0===i||i,s=(0,o.default)(t,["autoRefresh","more","fillZero"]),r?(s.last=!0,this.isRefreshing=!0):this.isLoading=!0,s.cluster&&(this.cluster=s.cluster),f=this.getGatewayParams(s),d=this.getApi(s),e.next=7,(0,h.to)(request.get(d,f));case 7:return p=e.sent,v=this.getResult(p),r&&(v=this.getRefreshResult(v,this.data)),u&&(v=this.getMoreResult(v,this.data)),this.data=c?(0,m.fillEmptyMetrics)(f,v):v,this.isLoading=!1,this.isRefreshing=!1,e.abrupt("return",v);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),r}(r(a(768)).default);t.default=b},,,function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),u=n(a(13)),o=n(a(19)),i=n(a(20)),c=n(a(18)),s=r(a(0)),f=n(a(1)),d=n(a(3)),p=a(25),m=a(813),h=a(914),v=n(a(3129));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(a,e);var t=y(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"renderIcon",value:function(){var e=this.props.type,t=h.STATUS_TO_ICON[e]||e;return"draft"===t?s.default.createElement("label",{className:v.default.draft}):"review"===t?s.default.createElement("label",{className:v.default.review}):"passed"===t?s.default.createElement(p.Icon,{size:16,name:"success",className:v.default.passed}):"suspended"===t?s.default.createElement("label",{className:v.default.suspended},s.default.createElement(p.Icon,{size:13,name:"substract",className:v.default.substract})):"deleted"===t?s.default.createElement(p.Icon,{size:16,name:"error",className:v.default.deleted}):s.default.createElement("label",{className:v.default.review})}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.name,r=e.type,n=e.noIcon,l=e.noName,u=(0,m.transferVersionStatus)(a||r);return s.default.createElement("span",{className:(0,d.default)(v.default.status,t)},!n&&s.default.createElement("label",{className:v.default.icon},this.renderIcon()),!l&&s.default.createElement("label",{className:v.default.name},u))}}]),a}(s.PureComponent);t.default=g,g.propTypes={className:f.default.string,name:f.default.string,type:f.default.string,noIcon:f.default.bool,noName:f.default.bool},g.defaultProps={type:"",name:"",noIcon:!1,noName:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(3)),m=r(70),h=n(r(16)),v=n(r(32)),y=r(25),g=n(r(723)),b=n(r(1468)),E=n(r(960)),_=n(r(3137)),O=n(r(1475));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var R=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=C(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.props,a=t.appId,r=t.versionId,l=t.workspace,u=n.state.cluster;n.store.fetchList(k({app_id:a,version_id:r,workspace:l,cluster:u},e))},n.getPagination=function(){var e=n.store.list;return{page:e.page,limit:e.limit,total:e.total}},n.handleSearch=function(e){n.searchValue=e,n.fetchData({keyword:e})},n.handleRefresh=function(){var e=n.searchValue?{keyword:n.searchValue}:{};n.fetchData(e)},n.handlePage=function(e){n.fetchData({page:e})},n.handleClusterChange=function(e){n.setState({cluster:e},(function(){n.fetchData()}))},n.renderHeader=function(){return d.default.createElement("div",{className:O.default.header},n.renderClusters(),d.default.createElement(y.InputSearch,{className:O.default.search,name:"search",placeholder:t("SEARCH_BY_NAME"),onSearch:n.handleSearch}),d.default.createElement("div",{className:O.default.actions},d.default.createElement(y.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh})))},n.renderFooter=function(){var e=n.getPagination(),a=e.total,r=e.page,l=e.limit;return d.default.createElement(y.Level,{className:O.default.footer},d.default.createElement(y.LevelLeft,null,t("TOTAL_ITEMS",{num:a})),d.default.createElement(y.LevelRight,null,d.default.createElement(y.Pagination,{page:r,total:a,limit:l,onChange:n.handlePage})))},n.state={uploadModal:!1,cluster:(0,h.default)(e,"clusters[0].name","")},n.store=new E.default,n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderClusters",value:function(){var e=this.props.clusters;if((0,v.default)(e))return null;var t=e.map((function(e){return{label:e.name,value:e.name,disabled:!e.isReady,cluster:e}}));return d.default.createElement(b.default,{clusters:t,cluster:this.state.cluster,onChange:this.handleClusterChange})}},{key:"renderContent",value:function(){var e=this.props.versionId,a=this.store.list,r=a.data;return a.isLoading?d.default.createElement(y.Loading,{className:O.default.loading}):d.default.createElement("div",{className:O.default.body},(0,v.default)(r)?d.default.createElement("div",{className:O.default.empty},t("NO_RESOURCE_FOUND")):r.map((function(t){return d.default.createElement(_.default,{key:t.name,detail:t,showVersion:!e})})))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=e.hideHeader,l=e.hideFooter;return d.default.createElement(g.default,{className:(0,p.default)(O.default.main,a),title:r||t("APP_INSTANCES")},d.default.createElement("div",{className:O.default.inner},!n&&this.renderHeader(),this.renderContent(),!l&&this.renderFooter()))}}]),r}(d.default.Component))||l;a.default=R},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=a(25),d=r(a(3169)),p=r(a(3175));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var h=function(e){(0,u.default)(a,e);var t=m(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).showSelect=function(){r.setState({showSelect:!0})},r.hideSelect=function(){r.setState({showSelect:!1})},r.handleSelect=function(e){var t=r.props.onChange;r.hideSelect(),t(e)},r.state={showSelect:!1},r}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.type,r=e.detail,n=r.name,l=r.description,u=r.cluster,o=r.workspace,i=this.state.showSelect;return c.default.createElement("div",null,c.default.createElement("div",{className:p.default.titleWrapper,onClick:this.showSelect},c.default.createElement("div",{className:p.default.icon},c.default.createElement(f.Icon,{name:"devops"===a?"strategy-group":"project",size:40,type:"light"})),c.default.createElement("div",{className:p.default.text},c.default.createElement(f.Tooltip,{content:n},c.default.createElement("div",{className:"h6"},n)),c.default.createElement("p",null,l||t))),c.default.createElement(d.default,{defaultType:a,cluster:u,workspace:o||this.props.workspace,visible:i,onChange:this.handleSelect,onCancel:this.hideSelect}))}}]),a}(c.default.Component);t.default=h,h.propTypes={detail:s.default.object,onChange:s.default.func},h.defaultProps={type:"projects",detail:{},onChange:function(){}}},,,,,,,,,,function(e,t,a){e.exports={title:"_23ICmTFZPZciTzxk6GwlL7",workloads:"_2pydmsXzGwPczsCCJ75una",trafficCard:"_1IK6lET9gevbaUDSF49pYC"}},,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=n(r(275)),m=n(r(1556));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v={current:"CURRENT",finished:"FINISHED",notfinish:"NOT_SET"},y=function(e){var a=e.step,r=e.state;return s.default.createElement("li",{className:m.default[r]},s.default.createElement("div",{className:m.default.icon},s.default.createElement(d.Icon,{name:a.icon||"appcenter",size:40})),s.default.createElement(p.default,{className:m.default.text,title:t(a.title),description:t(v[r])}))},g=function(e){(0,o.default)(a,e);var t=h(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).getState=function(t){var a=e.props.current;return t===a?"current":t<a?"finished":"notfinish"},e}return(0,u.default)(a,[{key:"render",value:function(){var e=this,t=this.props.steps;return s.default.createElement("div",{className:m.default.steps},s.default.createElement("ul",null,t.map((function(t,a){return s.default.createElement(y,{key:t.title,step:t,state:e.getState(a)})}))))}}]),a}(s.default.Component);a.default=g,g.propTypes={steps:f.default.array.isRequired,current:f.default.number.isRequired}},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FUNCTIONS=t.OPERATORS=t.RATE_RANGES=void 0;t.RATE_RANGES=[{label:"$__interval",sortText:"$__interval"},{label:"$__rate_interval",sortText:"$__rate_interval"},{label:"1m",sortText:"00:01:00"},{label:"5m",sortText:"00:05:00"},{label:"10m",sortText:"00:10:00"},{label:"30m",sortText:"00:30:00"},{label:"1h",sortText:"01:00:00"},{label:"1d",sortText:"24:00:00"}];var r=["by","group_left","group_right","ignoring","on","offset","without"];t.OPERATORS=r;var n=[].concat([{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate φ-quantile (0 ≤ φ ≤ 1) over dimensions"}],[{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(φ float, b instant-vector)",documentation:"Calculates the φ-quantile (0 ≤ φ ≤ 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The φ-quantile (0 ≤ φ ≤ 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}]);t.FUNCTIONS=n;var l={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=})/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp("\\b(?:".concat(n.map((function(e){return e.label})).join("|"),")(?=\\s*\\()"),"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp("/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:".concat(r.join("|"),")\\b"),"i"),punctuation:/[{};()`,.]/};t.default=l},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.getTokenContext=t.highlightPromql=t.OPERATORS=t.PUNCTUATION_MAP=t.setCaretPosition=t.getCaretCharacterOffsetWithin=void 0;var n=r(a(21)),l=r(a(16)),u=r(a(1586)),o=r(a(1187));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}a(1587),u.default.languages.promql=o.default;t.getCaretCharacterOffsetWithin=function(e){var t=0,a=e.ownerDocument||e.document,r=a.defaultView||a.parentWindow;if(void 0!==r.getSelection){if(r.getSelection().rangeCount>0){var n=r.getSelection().getRangeAt(0),l=n.cloneRange();l.selectNodeContents(e),l.setEnd(n.endContainer,n.endOffset),t=l.toString().length}}else if("Control"!==a.selection.type){var u=a.selection.createRange(),o=a.body.createTextRange();o.moveToElementText(e),o.setEndPoint("EndToEnd",u),t=o.text.length}return t};t.setCaretPosition=function(e,t){var a=document.createRange(),r=window.getSelection(),n=[];!function e(t,a){t&&3===t.nodeType&&a.push(t);for(var r=t.childNodes,n=0;n<r.length;n++)e(r[n],a)}(e,n);for(var u=t,o=0;u>0;)u-=(0,l.default)(n,"[".concat(o,"].length"),0),o++;var i=n[o-1];null!=i&&(a.setStart(i,u+i.length),a.collapse(!0),r.removeAllRanges(),r.addRange(a))};t.PUNCTUATION_MAP={"(":")","[":"]","{":"}",'"':'"',"'":"'"};t.OPERATORS=["(","[","{",'"',"'",'""',"''","=",","];t.highlightPromql=function(e){return u.default.highlight(e,u.default.languages.promql,"promql")};t.getTokenContext=function(e,t){for(var a=[],r=t;r.parentNode&&e!==r.parentNode;)a.push(r.parentNode),r=r.parentNode;var u=a.reverse().map((function(e){return e.className&&e.className.split(" ")[1]||""})).join("."),o={},c=t.parentNode.className;return c.indexOf("label-key")>-1?o.label="":c.indexOf("label-value")>-1?(o.label=(0,l.default)(t,"parentNode.previousSibling.previousSibling.textContent",""),o.value=""):c.indexOf("context-labels")>-1&&(t.previousSibling?t.previousSibling.className.indexOf("label-key")>-1?(o.label=t.previousSibling.textContent.replace(/{,/g,""),o.value=""):t.previousSibling.className.indexOf("label-value")>-1&&(o.label=t.textContent.replace(/{,/g,"")):o.label=""),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({type:u},o)}},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=r(a(1));a(1061);var d=r(a(934)),p=r(a(987)),m=r(a(1059));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(a,e);var t=h(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,r=e.data,l=e.dataKey,u=e.innerRadius,o=void 0===u?"60%":u,i=e.outerRadius,c=void 0===i?"100%":i;return s.default.createElement(m.default,{width:t,height:a},s.default.createElement(p.default,{data:r,dataKey:l,innerRadius:o,outerRadius:c,animationDuration:1e3},r.map((function(e){return s.default.createElement(d.default,(0,n.default)({key:"cell-".concat(e.name)},e.itemStyle,{strokeWidth:0}))}))))}}]),a}(s.default.Component);t.default=v,v.propTypes={width:f.default.oneOfType([f.default.string,f.default.number]),height:f.default.oneOfType([f.default.string,f.default.number])},v.defaultProps={width:100,height:100,dataKey:"value"}},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(16)),u=n(r(23)),o=n(r(0)),i=n(r(1)),c=r(25),s=n(r(275)),f=n(r(901)),d=n(r(1210)),p=function(e){var a=e.index,r=e.rule,n=e.tls,i=void 0===n?[]:n,p=e.projectDetail,m=e.onDelete,h=e.onEdit,v=i.find((function(e){return e.hosts&&e.hosts.includes(r.host)})),y=v?"https":"http",g=(0,u.default)(r.clusters)&&r.clusters.map((function(e){return{name:e}}));return o.default.createElement("div",{className:d.default.item},o.default.createElement("div",{className:d.default.texts},o.default.createElement(s.default,{icon:"earth",title:r.host,description:o.default.createElement("div",{className:d.default.description},o.default.createElement("span",null,t("PROTOCOL_VALUE",{value:y.toUpperCase()})),"https"===y&&o.default.createElement("span",null,t("CERTIFICATE_VALUE",{value:v.secretName})))}),(0,u.default)(g)&&o.default.createElement(s.default,{title:o.default.createElement(f.default,{clusters:g,clustersDetail:p.clusters}),description:t("CLUSTER")})),o.default.createElement("div",{className:d.default.paths},r.http.paths.map((function(e,a){return o.default.createElement("div",{key:"".concat(e.path,"-").concat(a),className:d.default.path},o.default.createElement(c.Columns,null,o.default.createElement(c.Column,null,o.default.createElement("span",null,t("PATH_VALUE",{value:e.path}))),o.default.createElement(c.Column,null,o.default.createElement("span",null,t("SERVICE_VALUE",{value:(0,l.default)(e,"backend.service.name")}))),o.default.createElement(c.Column,null,o.default.createElement("span",null,t("PORT_VALUE",{value:(0,l.default)(e,"backend.service.port.number")})))))}))),o.default.createElement("div",{className:"buttons"},o.default.createElement(c.Button,{type:"flat",icon:"trash",onClick:function(){return m(a)}}),o.default.createElement(c.Button,{type:"flat",icon:"pen",onClick:function(){return h(a)}})))};p.propTypes={rule:i.default.object};var m=p;a.default=m},function(e,t,a){e.exports={wrapper:"_284aGjeDc3Uk3LO7g2rowk",item:"my6nlJHVChE52IZiKWdVb",texts:"_1yy5gvLzkXqOotnVq-jQ6u",description:"_1tlfloLSiJeUMQ-FyCn8CE",clusters:"_1syXUJ7F5BYlpz5yEGJFbc",text:"rs7zBfbhTmwlfIFuDt9am",title:"_1gOz0zu0HbDowoy4JxPNfJ",add:"_2rqJgLlKvmtvwGzZG3jKXD",paths:"_3IlHyvAlhdaotlptF5rQ4w",path:"_3yf0E7_uPDFXwIFcT8Q_aV",error:"_2XVUGBf34mWkPMEhwt3zCO"}},function(e,t,a){e.exports={item:"c49tC4yzToWvu0kD5Uyz4",delete:"_3fSs_FpKcGbijULFpsHXgu",desc:"_2AW58cyKifXEsVKANdRBkn",footer:"_3UWE6J4ANxTg-EcxMf1D7v",errorText:"_1uxnypWghpFkOGJOD7d7I4"}},function(e,t,a){e.exports={wrapper:"xOYrPqG-g6DB69YLsD_O_",item:"_2J4NQFpiE-obu_q7zar3ui",delete:"_2g8qpE4Omp7AMSnwds-dIM",add:"_3FHnKtK9lpIC2ASOyLOQja",desc:"_3nS3Wz5YrzLn95jhccTvof"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),u=n(r(50)),o=n(r(56)),i=n(r(12)),c=n(r(13)),s=n(r(135)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(16)),h=n(r(73)),v=n(r(93)),y=n(r(0)),g=r(5),b=n(r(1)),E=r(25),_=n(r(274)),O=n(r(808)),S=r(37),k=n(r(733)),C=n(r(767)),R=n(r(1680)),w=n(r(1682)),P=n(r(1684)),D=n(r(1816)),T=n(r(1821)),N=n(r(1823));function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A=function(e){(0,f.default)(n,e);var a,r=I(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).handleOk=function(){var e,t=a.props.isFederated;if(e=a.state.isCodeMode&&(0,v.default)((0,m.default)((0,s.default)(a),"codeRef.current.getData"))?a.getFormDataFromCode(a.codeRef.current.getData()):a.state.formData,t){var r={},n=e,l=n.application,u=n.ingress,i=(0,o.default)(n,["application","ingress"]);r.Application=l,r.Ingress=u,Object.keys(i).forEach((function(e){var t=i[e];r["".concat(e,"-workload")]=t.workload,r["".concat(e,"-service")]=t.service})),e=r}a.props.onOk(e)},a.handlePrev=function(){a.setState((function(e){var t=e.currentStep;return{currentStep:Math.max(0,t-1)}}))},a.handleNext=function(){var e=a.formRef.current;e&&e.validate((function(){a.setState((function(e){var t=e.currentStep;return{currentStep:Math.min(a.steps.length-1,t+1)}}))}))},a.handleModeChange=function(){a.setState((function(e){var r=e.isCodeMode,n=e.formData;return!r&&(0,v.default)((0,m.default)((0,s.default)(a),"resourcesFormRef.current.hasSubRoute"))&&a.resourcesFormRef.current.hasSubRoute()?E.Notify.warning(t("SAVE_FORM_TIP")):(r&&(0,v.default)((0,m.default)((0,s.default)(a),"codeRef.current.getData"))&&(n=a.getFormDataFromCode(a.codeRef.current.getData())),{isCodeMode:!r,formData:n})}))},a.handleAppLabelsChange=function(e){var t=a.state.formData,r=(t.application,t.ingress),n=(0,o.default)(t,["application","ingress"]);(0,S.mergeLabels)(r,e),Object.values(n).forEach((function(t){(0,S.mergeLabels)(t.service,e),(0,S.mergeLabels)(t.workload,e)}))},a.handleGovernanceChange=function(e){var t=a.props.isFederated,r=a.state.formData,n=(r.application,r.ingress,(0,o.default)(r,["application","ingress"]));a.setState({isGovernance:"true"===e}),Object.values(n).forEach((function(a){(0,h.default)(a.workload,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',e),(0,h.default)(a.service,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',e),(0,h.default)(a.workload,'spec.template.metadata.annotations["sidecar.istio.io/inject"]',e),t&&((0,S.updateFederatedAnnotations)(a.workload),(0,S.updateFederatedAnnotations)(a.service))}))},a.state={currentStep:0,formData:a.federatedWrapper({application:k.default.applications({namespace:e.namespace}),ingress:k.default.ingresses({namespace:e.namespace})}),isCodeMode:!1,isGovernance:!1},a.formRef=y.default.createRef(),a.codeRef=y.default.createRef(),a.gatewayStore=new C.default,a}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.isFederated?((0,h.default)(this.state.formData.application,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',"false"),this.setState({isGovernance:!1})):this.fetchData().then((function(){var t=e.props.sampleApp;t&&e.fecthSampleData(t)}))}},{key:"federatedWrapper",value:function(e){var t=this.props,a=t.isFederated,r=t.projectDetail;if(a){Object.keys(e).forEach((function(t){e[t]=k.default.federated({data:e[t],clusters:r.clusters.map((function(e){return e.name})),kind:e[t].kind})}));var n=(0,m.default)(e.application,"spec.template.metadata.labels",{});(0,h.default)(e.application,"metadata.labels",n)}return e}},{key:"fecthSampleData",value:function(e){var t=this,a=this.props,r=a.namespace,n=a.store,l=this.state.gateway;n.fetchSampleData(e).then((function(e){var a=t.getFormDataFromCode(e);(0,h.default)(a.ingress,'metadata.annotations["nginx.ingress.kubernetes.io/upstream-vhost"]',"productpage.".concat(r,".svc.cluster.local")),l.defaultIngress?(0,h.default)(a.ingress,"spec.rules[0].host",l.isHostName?l.defaultIngress:"productpage.".concat(r,".").concat(l.defaultIngress,".nip.io")):(0,h.default)(a.ingress,"spec.rules",[]),t.setState({formData:a})}))}},{key:"getFormDataFromCode",value:function(e){var t=this.props.namespace,a={};return e.forEach((function(e){if((0,h.default)(e,"metadata.namespace",t),-1!==e.kind.indexOf("Application"))a.application=e;else if(-1!==e.kind.indexOf("Service")){var r=(0,m.default)(e,"metadata.labels.app");(0,h.default)(a,"".concat(r,".service"),e)}else if(-1!==e.kind.indexOf("Ingress"))a.ingress=e;else{var n=(0,m.default)(e,"metadata.labels.app");(0,h.default)(a,"".concat(n,".workload"),e)}})),a}},{key:"fetchData",value:(a=(0,u.default)(l.default.mark((function e(){var t,a,r,n,u,o,i,c=this;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.cluster,r=t.namespace,n=function(){return c.gatewayStore.getGatewayByProject({namespace:r,cluster:a})},e.next=4,n();case 4:u=e.sent,o=u[1]||u[0],i=!(!this.serviceMeshEnable||!o.serviceMeshEnable),(0,h.default)(this.state.formData.application,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',String(i)),this.setState({gateway:(0,g.toJS)(o),isGovernance:i});case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderHeader",value:function(){var e=this.props.onCancel,a=this.state,r=a.currentStep,n=a.isCodeMode;return y.default.createElement("div",{className:N.default.header},y.default.createElement("div",{className:N.default.title},y.default.createElement(E.Icon,{name:"close",size:20,clickable:!0,onClick:e}),y.default.createElement("span",null),y.default.createElement(E.Icon,{name:"appcenter",size:20}),y.default.createElement("span",null,t("CREATE_COMPOSED_APP"))),!n&&y.default.createElement("div",{className:N.default.steps},y.default.createElement("div",null),y.default.createElement(R.default,{steps:this.steps,current:r})),y.default.createElement(O.default,{className:N.default.switch,text:t("EDIT_YAML"),onChange:this.handleModeChange,checked:n}),y.default.createElement("div",{className:N.default.headerBottom}))}},{key:"renderForm",value:function(){var e=this.props,t=e.cluster,a=e.namespace,r=e.store,n=e.isFederated,l=e.projectDetail,u=this.state,o=u.formData,i=u.gateway,c=u.currentStep,s=u.isGovernance,f=this.steps[c],d=f.component,p={store:r,cluster:t,namespace:a,formData:o,gateway:i,isGovernance:s,isFederated:n,projectDetail:l,serviceMeshEnable:this.serviceMeshEnable,onLabelsChange:this.handleAppLabelsChange,onGovernanceChange:this.handleGovernanceChange};return f.isForm?p.formRef=this.formRef:p.ref=this.formRef,y.default.createElement("div",{className:N.default.wrapper},y.default.createElement("div",{className:N.default.form},y.default.createElement(d,p)))}},{key:"renderCode",value:function(){var e=this.state.formData;return y.default.createElement(T.default,{ref:this.codeRef,formTemplate:e})}},{key:"renderFooter",value:function(){var e=this.props,a=e.onCancel,r=e.store,n=this.state,l=n.currentStep;if(n.isCodeMode)return y.default.createElement("div",{className:N.default.footer},y.default.createElement("div",{className:N.default.wrapper},y.default.createElement("div",{className:"text-right"},y.default.createElement(E.Button,{onClick:a},t("CANCEL")),y.default.createElement(E.Button,{type:"control",onClick:this.handleOk,loading:r.isSubmitting},t("CREATE")))));var u=this.steps.length-1;return y.default.createElement("div",{className:N.default.footer},y.default.createElement("div",{className:N.default.wrapper},y.default.createElement("div",{className:"text-right"},y.default.createElement(E.Button,{onClick:a},t("CANCEL")),l>0&&y.default.createElement(E.Button,{type:"control",onClick:this.handlePrev},t("PREVIOUS")),l<u?y.default.createElement(E.Button,{type:"control",onClick:this.handleNext},t("NEXT")):y.default.createElement(E.Button,{type:"control",onClick:this.handleOk,loading:r.isSubmitting},t("CREATE")))))}},{key:"render",value:function(){var e=this.props.visible,t=this.state.isCodeMode;return y.default.createElement(_.default,{className:N.default.modal,bodyClassName:N.default.body,visible:e,hideHeader:!0,hideFooter:!0,fullScreen:!0},this.renderHeader(),y.default.createElement("div",{className:N.default.content},t?this.renderCode():this.renderForm()),this.renderFooter())}},{key:"serviceMeshEnable",get:function(){return!!this.props.isFederated||globals.app.hasClusterModule(this.props.cluster,"servicemesh")}},{key:"steps",get:function(){return[{title:"BASIC_INFORMATION",component:w.default,required:!0,isForm:!0},{title:"SERVICE_SETTINGS",component:P.default,required:!0},{title:"ROUTE_SETTINGS",component:D.default,required:!0}]}}]),n}(y.default.Component);a.default=A,A.propTypes={namespace:b.default.string,visible:b.default.bool,onOk:b.default.func,onCancel:b.default.func,sampleApp:b.default.string},A.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(21)),o=n(r(109)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(25),h=n(r(73)),v=n(r(191)),y=n(r(32)),g=n(r(274)),b=n(r(766)),E=n(r(1065)),_=n(r(736)),O=n(r(1070)),S=r(37),k=n(r(733)),C=n(r(1802));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D=function(e){(0,s.default)(r,e);var a=P(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleTypeSelect=function(e){t.setState({type:e.currentTarget.dataset.value})},t.handleWorkloadModuleChange=function(e){t.setState({workloadModule:e})},t.workloadStore=new _.default,t.state={type:"",workloadModule:"deployments",groups:[{name:"SELECT_SERVICE_TYPE",description:"APP_SELECT_SERVICE_TYPE_DESC",options:[{icon:"backup",name:"STATELESS_SERVICE",value:"statelessservice"},{icon:"stateful-set",name:"STATEFUL_SERVICE",value:"statefulservice"}]}]},t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){if(this.props.visible!==e.visible)if(this.props.visible){var t=this.props.detail||{},a="",r="deployments";t.StatefulSet?(a="statefulservice",r="statefulsets"):t.Deployment&&(a="statelessservice"),this.setState({type:a,workloadModule:r})}else this.setState({type:"",workloadModule:"deployments"})}},{key:"renderHeader",value:function(){return p.default.createElement("div",{className:C.default.header},p.default.createElement("div",{className:"h4 margin-b12"},t("CREATE_SERVICE")),p.default.createElement("p",null,t.html("APP_CREATE_SERVICE_DESC")),p.default.createElement("img",{src:"/assets/create-service.svg",alt:""}))}},{key:"renderGroups",value:function(){var e=this;return p.default.createElement("div",{className:C.default.groups},this.state.groups.map((function(a){return p.default.createElement("div",{key:a.name,className:C.default.group},p.default.createElement("div",{className:C.default.title},p.default.createElement("div",null,t(a.name)),p.default.createElement("p",null,t(a.description))),p.default.createElement("ul",null,a.options&&a.options.map((function(r){return p.default.createElement("li",{key:r.value||r,"data-value":r.value||r,"data-type":a.type,onClick:e.handleTypeSelect},p.default.createElement("div",null,p.default.createElement(m.Icon,{name:r.icon,size:48})),p.default.createElement("div",null,t(r.name||r)))}))))})))}},{key:"renderSubModal",value:function(e){var a,r=this.props,n=r.visible,u=r.onOk,i=r.onCancel,c=r.cluster,s=r.namespace,f=r.detail,d=r.isFederated,m=r.projectDetail,g=r.isSubmitting;switch(e){case"statelessservice":var _=(0,y.default)(f)?{Deployment:k.default.deployments({namespace:s}),Service:k.default.services({namespace:s})}:(0,v.default)(f,["Deployment","Service"]),C=(0,o.default)(O.default[e]);C[0]=w(w({},C[0]),{},{component:(0,S.withProps)(C[0].component,{noApp:!0})}),(0,y.default)(f)&&d&&Object.keys(_).forEach((function(e){_[e]=k.default.federated({data:_[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})})),(0,h.default)(_,'Service.metadata.annotations["kubesphere.io/serviceType"]',e),this.workloadStore.setModule("deployments"),d&&C.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:(0,S.withProps)(E.default,{withService:!0})});var R=(0,y.default)(f)?{name:t("STATELESS_SERVICE")}:{title:t("EDIT_TITLE",{title:t("STATELESS_SERVICE")})};a=p.default.createElement(b.default,(0,l.default)({width:960,module:"deployments",store:this.workloadStore},R,{description:t("STATELESS_SERVICE_DESC"),visible:n,cluster:c,namespace:s,isFederated:d,projectDetail:m,steps:C,formTemplate:_,isSubmitting:g,onOk:u,onCancel:i,maskClosable:!1,okBtnText:(0,y.default)(f)?t("CREATE"):t("OK")}));break;case"statefulservice":var P=(0,y.default)(f)?{StatefulSet:k.default.statefulsets({namespace:s}),Service:k.default.services({namespace:s})}:(0,v.default)(f,["StatefulSet","Service"]),D=(0,o.default)(O.default[e]);D[0]=w(w({},D[0]),{},{component:(0,S.withProps)(D[0].component,{noApp:!0})}),d&&(0,y.default)(f)&&Object.keys(P).forEach((function(e){P[e]=k.default.federated({data:P[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})})),(0,h.default)(P,'Service.metadata.annotations["kubesphere.io/serviceType"]',e),this.workloadStore.setModule("statefulsets"),d&&D.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:(0,S.withProps)(E.default,{withService:!0})});var T=(0,y.default)(f)?{name:t("STATEFUL_SERVICE")}:{title:t("EDIT_TITLE",{title:t("STATEFUL_SERVICE")})};a=p.default.createElement(b.default,(0,l.default)({width:960,module:"statefulsets",store:this.workloadStore},T,{description:t("STATEFUL_SERVICE_DESC"),visible:n,cluster:c,namespace:s,isFederated:d,projectDetail:m,steps:D,formTemplate:P,isSubmitting:g,onOk:u,onCancel:i,okBtnText:(0,y.default)(f)?t("CREATE"):t("OK")}))}return a}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=this.state.type;return r?this.renderSubModal(r):p.default.createElement(g.default,{bodyClassName:C.default.body,width:960,visible:t,onCancel:a,hideHeader:!0},this.renderHeader(),this.renderGroups())}}]),r}(p.default.Component);a.default=D},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(109)),o=n(a(12)),i=n(a(13)),c=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(16)),p=n(a(73)),m=n(a(185)),h=n(a(32)),v=n(a(782)),y=r(a(0)),g=n(a(3)),b=n(a(1686));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(a,e);var t=O(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={editContainer:""},e.showEdit=function(t){var a=e.props,r=a.onSelect,n=a.cluster;e.setState({editContainer:t.name},(function(){r(n)}))},e.handleEdit=function(t){var a=t.index,r=t.containerType,n=t.data,l=e.props,o=l.cluster,i=l.withService,c=l.formTemplate,s=l.onChange,f="spec.template.spec.".concat("init"===r?"init_containers":"containers",".").concat(a),m=[];Object.keys(n).forEach((function(e){var t="".concat(f,".").concat(e);m.push({path:"/".concat(t.replace(/\./g,"/")),value:n[e]})}));var h=(0,d.default)(c,"spec.overrides",[]),y=h.find((function(e){return e.clusterName===o}));y?y.clusterOverrides=(0,v.default)([].concat(m,(0,u.default)(y.clusterOverrides||[])),"path"):h.push({clusterName:o,clusterOverrides:m}),(0,p.default)(c,"spec.overrides",h),i&&n.ports&&e.updateService(n),e.setState({editContainer:""}),s&&s()},e.updateService=function(t){var a=e.props,r=a.cluster,n=a.serviceTemplate,l=[];t.ports.forEach((function(e){e.servicePort&&l.push({name:e.name,protocol:e.protocol,port:e.servicePort,targetPort:e.containerPort})}));var o=[{path:"/spec/ports",value:l}],i=(0,d.default)(n,"spec.overrides",[]),c=i.find((function(e){return e.clusterName===r}));c?c.clusterOverrides=(0,v.default)([].concat(o,(0,u.default)(c.clusterOverrides||[])),"path"):i.push({clusterName:r,clusterOverrides:o}),(0,p.default)(n,"spec.overrides",i)},e.renderContainer=function(t,a,r){var n=e.props,u=n.children,o=n.selected,i=e.state.editContainer,c=e.getContainer({container:t,index:a,containerType:r});return y.default.createElement("div",{key:t.name,className:(0,g.default)(b.default.wrapper,(0,l.default)({},b.default.selected,o))},u(_(_({},e.props),{},{index:a,key:a,containerType:"worker",formData:c,isEdit:i===t.name,showEdit:e.showEdit,onEdit:e.handleEdit})))},e}return(0,i.default)(a,[{key:"getContainer",value:function(e){var t=e.index,a=e.container,r=e.containerType,n=this.props,l=n.cluster,u=n.formTemplate,o=(0,d.default)(u,"spec.overrides",[]).find((function(e){return e.clusterName===l}))||{},i=(0,m.default)(a),c="/spec/template/spec/".concat("init"===r?"init_containers":"containers","/").concat(t,"/");return o&&!(0,h.default)(o.clusterOverrides)&&o.clusterOverrides.forEach((function(e){if(e.path.startsWith(c)){var t=e.path.replace(c,"").replace(/\//g,".");(0,p.default)(i,t,e.value)}})),i}},{key:"render",value:function(){var e=this,t=this.props.formTemplate,a=(0,d.default)(t,"spec.template.spec.template.spec.containers",[]),r=(0,d.default)(t,"spec.template.spec.template.spec.init_containers",[]);return y.default.createElement(y.default.Fragment,null,a.map((function(t,a){return e.renderContainer(t,a,"worker")})),r.map((function(t,a){return e.renderContainer(t,a,"init")})))}}]),a}(y.Component);t.default=S},function(e,t,a){e.exports={sliderWrapper:"Y_HMoQktCjM5s4rQUonWH",slider:"_2Z0oF_HrGj41f6mk6oeJZY",rail:"_2fQ_2XoG4bgi-HQnbVhELc",track:"_2K11MAgQH-2WazFGn1bsBK",handler:"sN1mpztRhBqcxKM73ma17",mark:"_1BWhd5npWCe-BuinAqeWuz",inputWrapper:"_7a-iOmSre-6ZQ5JGEtyFS",inputGroup:"uJp3XJ8KkJt0PsTnw9d30",input:"_1hUtlYz76D9dWN6yODl74y",error:"_3KjnNKsbXkt85jyce4IGi7",label:"_1cl2HxbEyCJLmZwIB4fBwN",inputBox:"UU2VPB0msbiVAtD2_vSu2",unit:"_2CZHs_9Es7HMzNYtZTKF0V",message:"_3GIRf9iG6YpbzpLPoeAPy1"}},function(e,t,a){e.exports={dropContent:"_1dgWc_FlxZ0I2I8eO_mtsY",header:"_1eg7T1EUzEx9lO_Vk2smqx",listContent:"_1R7XJrTUSk0K11NbeSsvLQ",starContainer:"_4tmFCc6PQiPbAgn206MC8",actions:"_3F90TmEUEEPlTASxdMgZNV",info:"_2R3U9MOi9qgl_FL21JznCz",tabs:"_28RQBc6TkhuRe7tAIJCGmp",tab:"_2hTxWsg41px5hCSv1Wm99F",selected:"_2VkYzhd5Ow_BEjxkhOq3eX",search:"_1XQXLeI-z0GOUpjlyPkOfe",defaultPortButtons:"_2mYkPdeJwZRp7iTmJ23QcO",selectedInfo:"_25UPs6oZb2m0_CwkRBpmWK",icon:"_10xemcZ1Xi6n-LscTe8-8U",imageInfo:"_2-qLBNFfWh3DKt1NKsQZBH",message:"KvW_BUlNf1lu0E8HSDczo",selectedContent:"_3KFGJfmozlVYx4gEvbu6dA",config:"_28ZTN4yd_gzm59CAD-Bs5T",secretInfo:"_25ul7m6MMSBOWJrdFGxFWe",emptyContent:"_1NipMFmAIiG0us8zcmeW3p",desc:"_2qpXEBvwkvD9MmvpqIxKu9",textConfirm:"_1EMGC0hNKltp9Gqej1THm9",registryFooter:"_1ohyELTkhVtaqqWwThH647",selectOption:"_2p3WXjvpR1XTnlPX_nTKFX",dropContent_hide:"_1trQN1nAMesw9gU4dm2GmW",dropDownIcon:"_2Ispz9PQoN4qvKuwb3ZVWB",clickable:"_3dHyyekpvmPUPtbo3xQG0Z",star:"_1SkfiEdBayGXiRRaBkwk7H",imageInput:"DhITaL97AQEJeR5vr14Je"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(71)),o=l(r(12)),i=l(r(13)),c=l(r(19)),s=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(191)),m=l(r(902)),h=l(r(993)),v=l(r(1702));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleSubmit=function(t){var a=e.props,r=a.index,n=a.containerType;(0,a.onEdit)({index:r,containerType:n,data:(0,p.default)(t,["ports"])})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formData,r=e.containerType,n=e.withService,l="init"!==r&&n,o=d.default.createElement(d.default.Fragment,null,d.default.createElement("div",null,"".concat(t("IMAGE"),": ").concat(a.image)),a.ports&&a.ports.map((function(e,a){return d.default.createElement("div",{key:a,className:v.default.port},d.default.createElement("span",null,"".concat(t("PROTOCOL"),": ").concat(e.protocol)),d.default.createElement("span",null,"".concat(t("NAME"),": ").concat(e.name)),d.default.createElement("span",null,"".concat(t("CONTAINER_PORT"),": ").concat(e.containerPort)),l&&d.default.createElement("span",null,"".concat(t("SERVICE_PORT"),": ").concat(e.servicePort)))})));return d.default.createElement(m.default,(0,u.default)({},this.props,{title:o,onOk:this.handleSubmit}),d.default.createElement(h.default,{withService:"init"!==r&&n}))}}]),r}(d.Component);a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(650)),f=n(r(68)),d=n(r(0)),p=r(25),m=n(r(740)),h=n(r(994)),v=r(58),y=n(r(1700));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){var t="HTTP",a=e.value,r=a.name,n=a.containerPort,l=e.index;if(!(0,f.default)(r)){var u=r.match(/^(\w+)-(.*)/);u&&(t=(u[1]||"HTTP").toUpperCase())}return{name:(0,f.default)(r)?"".concat(t.toLowerCase(),"-").concat(l):r,protocol:v.PROTOCOLS.some((function(e){return e.value===t}))?t:e.value.protocol,containerPort:n,propsValue:e.value}},E=function(e){(0,o.default)(r,e);var a=g(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).triggerChange=(0,s.default)((function(){var e=t.state,a=e.name,r=e.protocol,n=e.containerPort;t.props.onChange({name:a,protocol:"UDP"===r?"UDP":"TCP",containerPort:n})}),300),t.handleNameChange=function(e,a){t.setState({name:a},(function(){return t.triggerChange()}))},t.handleProtocolChange=function(e){var a,r=t.state.name,n="".concat(t.state.protocol.toLowerCase(),"-"),l=t.props.index;a=r.startsWith(n)?"".concat(e.toLowerCase(),"-").concat(r.replace(n,"")):"".concat(e.toLowerCase(),"-").concat(l),t.setState({name:a,protocol:e},(function(){return t.triggerChange()}))},t.handleContainerPortChange=function(e){t.setState({containerPort:e},(function(){return t.triggerChange()}))},t.state=b(e),t}return(0,u.default)(r,[{key:"render",value:function(){var e=this.state,a=e.name,r=e.protocol,n=e.containerPort;return d.default.createElement("div",{className:y.default.wrapper},d.default.createElement(h.default,{prefix:d.default.createElement("div",{className:y.default.tip},d.default.createElement("span",null,t("PROTOCOL")),d.default.createElement(p.Tooltip,{content:t("ISTIO_PROTOCOL_TIP")},d.default.createElement(p.Icon,{name:"question"})))},d.default.createElement(p.Select,{name:"protocol",value:r,options:v.PROTOCOLS,defaultValue:"HTTP",onChange:this.handleProtocolChange})),d.default.createElement(h.default,{prefix:t("NAME")},d.default.createElement(p.Input,{name:"name",value:a,placeholder:t("REQUIRED"),onChange:this.handleNameChange})),d.default.createElement(h.default,{prefix:t("CONTAINER_PORT")},d.default.createElement(m.default,{name:"containerPort",min:1,max:65535,value:n,integer:!0,onChange:this.handleContainerPortChange})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.propsValue?b(e):null}}]),r}(d.default.Component);a.default=E,E.defaultProps={value:{},onChange:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(650)),f=n(r(68)),d=n(r(0)),p=r(25),m=n(r(740)),h=n(r(994)),v=r(58),y=n(r(1701));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){var t="HTTP",a=e.value,r=a.name,n=a.containerPort,l=a.servicePort,u=e.index;if(!(0,f.default)(r)){var o=r.match(/^(\w+)-(.*)/);o&&(t=(o[1]||"HTTP").toUpperCase())}return{name:(0,f.default)(r)?"".concat(t.toLowerCase(),"-").concat(u):r,protocol:v.PROTOCOLS.some((function(e){return e.value===t}))?t:e.value.protocol,containerPort:n,servicePort:l,propsValue:e.value}},E=function(e){(0,o.default)(r,e);var a=g(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).triggerChange=(0,s.default)((function(){var e=t.state,a=e.name,r=e.protocol,n=e.containerPort,l=e.servicePort;t.props.onChange({name:a,protocol:"UDP"===r?"UDP":"TCP",containerPort:n,servicePort:l})}),300),t.handleNameChange=function(e,a){t.setState({name:a},(function(){return t.triggerChange()}))},t.handleProtocolChange=function(e){var a,r=t.state.name,n="".concat(t.state.protocol.toLowerCase(),"-"),l=t.props.index;a=r.startsWith(n)?"".concat(e.toLowerCase(),"-").concat(r.replace(n,"")):"".concat(e.toLowerCase(),"-").concat(l),t.setState({name:a,protocol:e},(function(){return t.triggerChange()}))},t.handleContainerPortChange=function(e){t.setState({containerPort:e},(function(){return t.triggerChange()}))},t.handleServicePortChange=function(e){t.setState({servicePort:e},(function(){return t.triggerChange()}))},t.state=b(e),t}return(0,u.default)(r,[{key:"render",value:function(){var e=this.state,a=e.name,r=e.protocol,n=e.containerPort,l=e.servicePort;return d.default.createElement("div",{className:y.default.wrapper},d.default.createElement(h.default,{prefix:d.default.createElement("div",{className:y.default.tip},d.default.createElement("span",null,t("PROTOCOL")),d.default.createElement(p.Tooltip,{content:t("ISTIO_PROTOCOL_TIP")},d.default.createElement(p.Icon,{name:"question"})))},d.default.createElement(p.Select,{name:"protocol",value:r,options:v.PROTOCOLS,defaultValue:"HTTP",onChange:this.handleProtocolChange})),d.default.createElement(h.default,{prefix:t("NAME")},d.default.createElement(p.Input,{name:"name",value:a,placeholder:t("REQUIRED"),onChange:this.handleNameChange})),d.default.createElement(h.default,{prefix:t("CONTAINER_PORT")},d.default.createElement(m.default,{name:"containerPort",min:1,max:65535,value:n,integer:!0,placeholder:t("REQUIRED"),onChange:this.handleContainerPortChange})),d.default.createElement(h.default,{prefix:t("SERVICE_PORT")},d.default.createElement(m.default,{name:"servicePort",min:1,max:65535,value:l,integer:!0,placeholder:t("REQUIRED"),onChange:this.handleServicePortChange})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.propsValue?b(e):null}}]),r}(d.default.Component);a.default=E,E.defaultProps={value:{},onChange:function(){}}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(71)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=l(r(0)),m=r(70),h=n(r(902)),v=n(r(1068));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var g=(0,m.observer)(u=function(e){(0,s.default)(r,e);var a=y(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleSubmit=function(t){var a=e.props,r=a.index;(0,a.onEdit)({index:r,data:t})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formData,r=e.clusters,n=e.namespace,l=p.default.createElement("span",null,"".concat(t("ENVIRONMENT_VARIABLE_PL"),": ").concat((a.env||[]).map((function(e){return e.name})).join(", ")||t("NONE")));return p.default.createElement(h.default,(0,o.default)({},this.props,{title:l,onOk:this.handleSubmit}),p.default.createElement(v.default,{checkable:!1,isFederated:!0,namespace:n,projectDetail:{clusters:r}}))}}]),r}(p.Component))||u;a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(71)),c=n(r(56)),s=n(r(49)),f=n(r(50)),d=n(r(21)),p=n(r(109)),m=n(r(136)),h=n(r(12)),v=n(r(13)),y=n(r(19)),g=n(r(20)),b=n(r(18)),E=n(r(0)),_=n(r(1)),O=n(r(904)),S=n(r(773)),k=n(r(737)),C=n(r(185)),R=n(r(16)),w=n(r(32)),P=r(635),D=n(r(1703)),T=n(r(1705)),N=n(r(761)),I=n(r(1223)),A=n(r(1706));function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var L=(0,P.trigger)((o=u=function(e){(0,y.default)(r,e);var a=M(r);function r(e){var t;return(0,h.default)(this,r),(t=a.call(this,e)).handleGetResource=function(){var e=t.props,a={namespace:e.namespace,cluster:e.cluster};Promise.all([t.configMapStore.fetchListByK8s(a),t.secretStore.fetchListByK8s(a)]).then((function(e){var a=(0,m.default)(e,2),r=a[0],n=a[1];t.setState({configMaps:r,secrets:n})}))},t.handleResourceData=function(e,a){var r=t.props,n=r.value,l=r.onChange,u="configmaps"===a?"configMapKeyRef":"secretKeyRef",o=(0,R.default)(e,"metadata.name"),i=(0,R.default)(e,"data"),c=(0,w.default)(i)?"":Object.keys((0,R.default)(e,"data"))[0],s={name:c,valueFrom:{}};s.valueFrom[u]={name:o,key:c},Array.isArray(n)?(n.push(s),l((0,p.default)(n))):l([j({},s)])},t.handleCreateSecrets=function(){var e,a=t.props,r=a.namespace,n=a.cluster,l=a.isFederated,u=a.projectDetail;t.trigger("secret.create",{module:"secrets",namespace:r,cluster:n,isFederated:l,projectDetail:u,store:t.secretStore,success:(e=(0,f.default)(s.default.mark((function e(a){var l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.secretStore.fetchListByK8s({namespace:r,cluster:n});case 2:l=e.sent,t.setState({secrets:l},(function(){t.handleResourceData(a,"secrets")}));case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})},t.handleCreateConfig=function(){var e,a=t.props,r=a.namespace,n=a.cluster,l=a.isFederated,u=a.projectDetail;t.trigger("configmap.create",{module:"configmaps",namespace:r,cluster:n,isFederated:l,projectDetail:u,store:t.configMapStore,success:(e=(0,f.default)(s.default.mark((function e(a){var l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.configMapStore.fetchListByK8s({namespace:r,cluster:n});case 2:l=e.sent,t.setState({configMaps:l},(function(){t.handleResourceData(a,"configmaps")}));case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})},t.checkItemValid=function(e){return!((0,w.default)(e)||(0,w.default)(e.name)||(0,w.default)(e.value)&&(0,w.default)(e.valueFrom))},t.handleBulkQuote=function(e){var a=(0,C.default)(e),r=t.props,n=r.value,l=null!=n?n:[];(0,r.onChange)([].concat((0,p.default)(l),(0,p.default)(a)))},t.configMapStore=new O.default,t.secretStore=new S.default,e.isFederated&&(t.configMapStore=new k.default({module:t.configMapStore.module}),t.secretStore=new k.default({module:t.secretStore.module})),t.state={configMaps:[],secrets:[]},t}return(0,v.default)(r,[{key:"componentDidMount",value:function(){this.handleGetResource()}},{key:"render",value:function(){var e=this.props,a=e.handleInputError,r=(0,c.default)(e,["handleInputError"]),n=this.state,l=n.configMaps,u=n.secrets;return E.default.createElement(N.default,(0,i.default)({className:I.default.wrapper,itemType:"object",checkItemValid:this.checkItemValid,addText:t("ADD_ENVIRONMENT_VARIABLE"),extraAdd:E.default.createElement(E.default.Fragment,null,E.default.createElement("span",{className:I.default.desc},t.html("CREATE_CONFIGMAP_SECRET_DESC"),E.default.createElement("a",{onClick:this.handleCreateConfig},t("CREATE_CONFIG")),t("or"),E.default.createElement("a",{onClick:this.handleCreateSecrets},t("CREATE_SECRET"))),E.default.createElement(A.default,{className:I.default.extraBtn,dataTest:"add-env-configmap",onOK:this.handleBulkQuote,text:t("BATCH_REFERENCE"),modalWidth:520,modalHeight:492},E.default.createElement(D.default,{configMaps:l,secrets:u})))},r),E.default.createElement(T.default,{configMaps:l,secrets:u,repeatKeyArr:this.getRepeat,handleInputError:a}))}},{key:"getRepeat",get:function(){var e=this.props.value,t=void 0===e?[]:e;if(t.length>1){var a={};return t.forEach((function(e,t){var r,n=null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"";""!==e.name&&(a[n]?a[n].push("".concat(t)):a[n]=[])})),Object.values(a).reduce((function(e,t){return[].concat((0,p.default)(e),(0,p.default)(t))}),[])}return[]}}]),r}(E.default.Component),u.propTypes={name:_.default.string,value:_.default.array,onChange:_.default.func,handleInputError:_.default.func},u.defaultProps={name:"",onChange:function(){},handleInputError:function(){}},l=o))||l;a.default=L},function(e,t,a){e.exports={wrapper:"_-4cD0WdpjLQRRfr3eATB5",desc:"_2trN64nTOrpOtASKkHhxbZ",extraBtn:"_3NUIXlnSX0odfiMD6xuinj",formError:"_1xwVkCYNchrNAw08m7njse",nameTip:"_3_TvkG3h8EIIY2xImC5li9",typeBox:"_1ct3Xc_GatVlbSJhR46WFq",textContent:"_3tiLSem7va-QAMUpYlyOLJ"}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(109)),o=n(a(12)),i=n(a(13)),c=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(16)),p=n(a(73)),m=n(a(185)),h=n(a(32)),v=n(a(782)),y=r(a(0)),g=n(a(3)),b=n(a(1708));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(a,e);var t=O(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={editVolumeTemplate:""},e.showEdit=function(t){var a=e.props,r=a.onSelect,n=a.cluster;e.setState({editVolumeTemplate:(0,d.default)(t,"metadata.name")},(function(){r(n)}))},e.handleEdit=function(t){var a=t.index,r=t.data,n=e.props,l=n.cluster,o=n.formTemplate,i="spec.volumeClaimTemplates.".concat(a),c=[];Object.keys(r).forEach((function(e){var t="".concat(i,".").concat(e);(0,d.default)(o,"spec.template.".concat(t))!==r[e]&&c.push({path:"/".concat(t.replace(/\./g,"/")),value:r[e]})}));var s=(0,d.default)(o,"spec.overrides",[]),f=s.find((function(e){return e.clusterName===l}));f?f.clusterOverrides=(0,v.default)([].concat(c,(0,u.default)(f.clusterOverrides||[])),"path"):s.push({clusterName:l,clusterOverrides:c}),(0,p.default)(o,"spec.overrides",s),e.setState({editVolumeTemplate:""})},e.renderVolumeTemplates=function(t,a){var r=e.props,n=r.children,u=r.selected,o=e.state.editVolumeTemplate,i=e.getVolumeTemplate({vt:t,index:a}),c=(0,d.default)(t,"metadata.name");return y.default.createElement("div",{key:c,className:(0,g.default)(b.default.wrapper,(0,l.default)({},b.default.selected,u))},n(_(_({},e.props),{},{index:a,key:a,formData:i,isEdit:o===c,showEdit:e.showEdit,onEdit:e.handleEdit})))},e}return(0,i.default)(a,[{key:"getVolumeTemplate",value:function(e){var t=e.index,a=e.vt,r=this.props,n=r.cluster,l=r.formTemplate,u=(0,d.default)(l,"spec.overrides",[]).find((function(e){return e.clusterName===n}))||{},o=(0,m.default)(a),i="/spec/volumeClaimTemplates/".concat(t,"/");return u&&!(0,h.default)(u.clusterOverrides)&&u.clusterOverrides.forEach((function(e){if(e.path.startsWith(i)){var t=e.path.replace(i,"").replace(/\//g,".");(0,p.default)(o,t,e.value)}})),o}},{key:"render",value:function(){var e=this,t=this.props.formTemplate;return(0,d.default)(t,"spec.template.spec.volumeClaimTemplates",[]).map((function(t,a){return e.renderVolumeTemplates(t,a)}))}}]),a}(y.Component);t.default=S},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(71)),o=l(r(12)),i=l(r(13)),c=l(r(19)),s=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(16)),m=l(r(191)),h=l(r(938)),v=l(r(902));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleSubmit=function(t){var a=e.props,r=a.index;(0,a.onEdit)({index:r,data:(0,m.default)(t,["spec"])})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.formData;return d.default.createElement(v.default,(0,u.default)({},this.props,{title:"".concat(t("Storage Class"),": ").concat((0,p.default)(n,"spec.storageClassName")),onOk:this.handleSubmit}),d.default.createElement("div",{className:"padding-12"},d.default.createElement(h.default,{cluster:a,namespace:r})))}}]),r}(d.Component);a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=r(25),y=n(r(16)),g=n(r(73)),b=n(r(32)),E=n(r(745)),_=n(r(636)),O=n(r(761)),S=n(r(774)),k=n(r(736));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,h.observer)((o=u=function(e){(0,s.default)(r,e);var a=C(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).handleAffinityChange=function(e){var t=n.replicasPolicyOptions.find((function(t){return t.value===e}));(0,g.default)(n.props.data,"spec.template.spec.affinity",t.affinity),"custom"===e?(0,g.default)(n.props.data,"spec.template.spec.customMode",[{}]):delete n.props.data.spec.template.spec.customMode,n.setState({mode:e},(function(){n.props.formProps&&n.props.formProps.onChange()}))},n.handleChange=function(e){var t={};e.forEach((function(e){"preferredDuringSchedulingIgnoredDuringExecution"===e.type?t[e.policy]={preferredDuringSchedulingIgnoredDuringExecution:[{weight:100,podAffinityTerm:{labelSelector:{matchExpressions:[{key:"app",operator:"In",values:[e.target]}]},topologyKey:"kubernetes.io/hostname"}}]}:"requiredDuringSchedulingIgnoredDuringExecution"===e.type&&(t[e.policy]={requiredDuringSchedulingIgnoredDuringExecution:[{labelSelector:{matchExpressions:[{key:"app",operator:"In",values:[e.target]}]},topologyKey:"kubernetes.io/hostname"}]})})),(0,g.default)(n.props.data,"spec.template.spec.affinity",t)},n.checkItemValid=function(e){return e.policy&&e.type&&e.target},n.modeValidator=function(e,a,r){return a?a.some((function(e){return!n.checkItemValid(e)}))?(r({message:t("RULE_NOT_COMPLETE"),field:e.field}),void n.forceUpdate()):void r():r()},n.state={mode:"default"},n.store=new k.default(e.module),n}return(0,c.default)(r,[{key:"replicasPolicyOptions",get:function(){var e={preferredDuringSchedulingIgnoredDuringExecution:[{weight:100,podAffinityTerm:{labelSelector:{matchLabels:(0,y.default)(this.props.data,"spec.template.metadata.labels",{})},topologyKey:"kubernetes.io/hostname"}}]};return[{value:"default",label:t("DEFAULT_RULES"),affinity:{},description:t("DEFAULT_RULES_DESC")},{value:"decentralized",label:t("DECENTRALIZED_SCHEDULING"),affinity:{podAntiAffinity:e},description:t("DECENTRALIZED_SCHEDULING_DESC")},{value:"aggregation",label:t("CENTRALIZED_SCHEDULING"),affinity:{podAffinity:e},description:t("CENTRALIZED_SCHEDULING_DESC")},{value:"custom",label:t("CUSTOM_RULES"),affinity:{},description:t("CUSTOM_RULES_DESC")}]}},{key:"policys",get:function(){return[{label:t("SCHEDULE_WITH_TARGET"),value:"podAffinity"},{label:t("SCHEDULE_AWAY_FROM_TARGET"),value:"podAntiAffinity"}]}},{key:"types",get:function(){return[{label:t("MATCH_IF_POSSIBLE"),value:"preferredDuringSchedulingIgnoredDuringExecution"},{label:t("MUST_MATCH"),value:"requiredDuringSchedulingIgnoredDuringExecution"}]}}]),(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=(0,y.default)(this.props.data,"spec.template.spec.affinity",{});if((0,b.default)(t))this.setState({mode:"default"});else{var a=this.replicasPolicyOptions.find((function(e){return(0,E.default)(e.affinity,t)}));a?(this.setState({mode:a.value}),delete this.props.data.spec.template.spec.customMode):this.setState({mode:"custom"},(function(){var a=Object.keys(t).map((function(e){var a=Object.keys(t[e])[0];return{policy:e,type:a,target:(0,y.default)(t,"requiredDuringSchedulingIgnoredDuringExecution"===a?"[".concat(e,"][").concat(a,'][0]["labelSelector"]["matchExpressions"][0]["values"][0]'):"[".concat(e,"][").concat(a,'][0]["podAffinityTerm"]["labelSelector"]["matchExpressions"][0]["values"][0]'),"")}}));(0,g.default)(e.props.data,"spec.template.spec.customMode",a)}))}var r=this.props,n=r.cluster,l=r.namespace;this.store.fetchList({cluster:n,namespace:l,limit:1/0})}},{key:"renderAffinityParams",value:function(){var e=this.state.mode,a=this.replicasPolicyOptions,r=(0,y.default)(this.store,"list.data",[]).map((function(e){return{label:e.name,value:e.name}}));return p.default.createElement(p.default.Fragment,null,p.default.createElement(v.Form.Item,null,p.default.createElement(_.default,{value:e,options:a,onChange:this.handleAffinityChange,defaultValue:a[0].value})),"custom"===e&&p.default.createElement(v.Form.Item,{label:t("CUSTOM_RULES"),rules:[{validator:this.modeValidator,checkOnSubmit:!0}]},p.default.createElement(O.default,{name:"spec.template.spec.customMode",itemType:"object",addText:t("ADD"),checkItemValid:this.checkItemValid,onChange:this.handleChange},p.default.createElement(S.default,null,p.default.createElement(v.Select,{name:"policy",placeholder:t("TYPE"),options:this.policys}),p.default.createElement(v.Select,{name:"type",placeholder:t("STRATEGY"),options:this.types}),p.default.createElement(v.Select,{name:"target",placeholder:t("TARGET"),options:r,style:{marginLeft:20}})))))}},{key:"render",value:function(){var e=this.props.checkable;return p.default.createElement(v.Form.Group,{label:t("POD_SCHEDULING_RULES"),desc:t("POD_SCHEDULING_RULES_DESC"),keepDataWhenUnCheck:!0,checkable:e},this.renderAffinityParams())}}]),r}(p.default.Component),u.propTypes={data:m.default.object,checkable:m.default.bool,initial:m.default.bool},u.defaultProps={data:{},checkable:!1,initial:!1},l=o))||l;a.default=R},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(73)),p=n(r(650)),m=r(25),h=n(r(740)),v=n(r(1713));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=y(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={replicas:e.props.replicas||1},e.triggerChange=(0,p.default)((function(){var t=e.props,a=t.template,r=t.onChange,n=e.state.replicas;(0,d.default)(a,"spec.replicas",n),r&&r(n)}),200),e.handleSubStract=function(){e.setState((function(e){var t=e.replicas;return{replicas:Math.max(t-1,1)}}),(function(){e.triggerChange()}))},e.handleAdd=function(){e.setState((function(e){return{replicas:e.replicas+1}}),(function(){e.triggerChange()}))},e.handleChange=function(t){e.setState({replicas:t},(function(){e.triggerChange()}))},e}return(0,u.default)(r,[{key:"renderReplicas",value:function(){var e=this.state.replicas;return s.default.createElement("div",{className:v.default.replicas},s.default.createElement("div",{className:"margin-b8"},t("POD_REPLICAS")),s.default.createElement("div",{className:"flexbox"},s.default.createElement(m.Button,{type:"flat",icon:"substract",onClick:this.handleSubStract}),s.default.createElement(h.default,{value:e,onChange:this.handleChange}),s.default.createElement(m.Button,{type:"flat",icon:"add",onClick:this.handleAdd})))}},{key:"render",value:function(){return s.default.createElement("div",{className:v.default.wrapper},s.default.createElement(m.Columns,{className:"is-vcentered is-2"},s.default.createElement(m.Column,{className:"is-narrow"},this.renderReplicas())))}}]),r}(s.default.Component);a.default=g,g.propTypes={template:f.default.object}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(3)),p=n(r(1)),m=n(r(652)),h=n(r(1723)),v=n(r(1724)),y=n(r(1072));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleAdd=function(){e.props.onShow()},e.handleEdit=function(t){e.props.onShow(t)},e.handleDelete=function(t){var a=e.props,r=a.value,n=a.specTemplate,u=a.onChange,o=a.onDelete;"init"===t.type&&n.initContainers?(n.initContainers=n.initContainers.filter((function(e){return e.name!==t.name})),u((0,l.default)(r))):u(r.filter((function(e){return e.name!==t.name}))),o&&o(t.name)},e}return(0,o.default)(r,[{key:"renderQuotaCheck",value:function(){var e=this.props,t=e.value,a=e.replicas,r=this.props,n=r.specTemplate.initContainers,l=void 0===n?[]:n,u=r.leftQuota;return f.default.createElement(v.default,{className:"margin-b12",containers:t,initContainers:l,leftQuota:u,replicas:a})}},{key:"renderContainers",value:function(){var e=this,t=this.props,a=t.value,r=t.readOnlyList;return a.map((function(t){return f.default.createElement(h.default,{container:t,key:t.name,onEdit:e.handleEdit,onDelete:e.handleDelete,readOnly:r.includes(t.name)})}))}},{key:"renderInitContainers",value:function(){var e=this,t=this.props.specTemplate.initContainers;return(void 0===t?[]:t).map((function(t){return f.default.createElement(h.default,{container:t,key:t.name,type:"init",onEdit:e.handleEdit,onDelete:e.handleDelete})}))}},{key:"renderAdd",value:function(){var e=this.props,a=e.value,r=e.specTemplate.initContainers,n=void 0===r?[]:r;return f.default.createElement(m.default.Add,{type:a.length<=0&&n.length<=0&&"empty",onClick:this.handleAdd,icon:"docker",title:t("ADD_CONTAINER"),description:t("ADD_CONTAINER_DESC")})}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.projectDetail;return f.default.createElement("div",{className:(0,d.default)(y.default.wrapper,t)},a&&this.renderQuotaCheck(),this.renderInitContainers(),this.renderContainers(),this.renderAdd())}}]),r}(f.default.Component);a.default=b,b.propTypes={className:p.default.string,name:p.default.string,value:p.default.array,onChange:p.default.func,onDelete:p.default.func,onShow:p.default.func,readOnlyList:p.default.array,specTemplate:p.default.object},b.defaultProps={className:"",name:"",value:[],readOnlyList:[],specTemplate:{},onChange:function(){},onShow:function(){},onDelete:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1073)),p=n(r(1726));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement(f.Form.Group,{label:t("STARTUP_COMMAND"),desc:t("STARTUP_COMMAND_DESC"),checkable:!0},s.default.createElement(f.Form.Item,{label:t("COMMAND"),desc:t("CONTAINER_COMMAND_DESC")},s.default.createElement(d.default,{className:p.default.input,name:"".concat(this.prefix,"command")})),s.default.createElement(f.Form.Item,{label:t("PARAMETERS"),desc:t("CONTAINER_ARGUMENT_DESC")},s.default.createElement(d.default,{className:p.default.input,name:"".concat(this.prefix,"args")})))}},{key:"prefix",get:function(){var e=this.props.prefix;return e?"".concat(e,"."):""}}]),r}(s.default.Component);a.default=h,h.defaultProps={prefix:""}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(636));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var m=function(e){(0,o.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"getImagePullPolicyOptions",value:function(){return[{icon:"timed-task",label:t("IMAGE_PULL_POLICY_ALWAYS"),value:"Always",description:t("IMAGE_PULL_POLICY_ALWAYS_DESC")},{icon:"timed-task",label:t("IMAGE_PULL_POLICY_IFNOTPRESENT"),value:"IfNotPresent",description:t("IMAGE_PULL_POLICY_IFNOTPRESENT_DESC")},{icon:"timed-task",label:t("IMAGE_PULL_POLICY_NEVER"),value:"Never",description:t("IMAGE_PULL_POLICY_NEVER_DESC")}]}},{key:"render",value:function(){return s.default.createElement(f.Form.Item,null,s.default.createElement(d.default,{name:"".concat(this.prefix,"imagePullPolicy"),defaultValue:"IfNotPresent",options:this.getImagePullPolicyOptions()}))}},{key:"prefix",get:function(){var e=this.props.prefix;return e?"".concat(e,"."):""}}]),r}(s.default.Component);a.default=m,m.defaultProps={prefix:""}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1232)),p=n(r(1731));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement(f.Form.Group,{label:t("HEALTH_CHECK"),desc:t("HEALTH_CHECKER_DESC"),checkable:!0},s.default.createElement(f.Form.Item,{className:p.default.item,label:t("LIVENESS_CHECK"),desc:t("LIVENESS_CHECK_DESC")},s.default.createElement(d.default,{name:"".concat(this.prefix,"livenessProbe"),probType:"livenessProbe"})),s.default.createElement(f.Form.Item,{className:p.default.item,label:t("READINESS_CHECK"),desc:t("READINESS_CHECK_DESC")},s.default.createElement(d.default,{name:"".concat(this.prefix,"readinessProbe"),probType:"readinessProbe"})),s.default.createElement(f.Form.Item,{className:p.default.item,label:t("STARTUP_CHECK"),tip:t("STARTUP_CHECK_TIP"),desc:t("STARTUP_CHECK_DESC")},s.default.createElement(d.default,{name:"".concat(this.prefix,"startupProbe"),probType:"startupProbe"})))}},{key:"prefix",get:function(){var e=this.props.prefix;return e?"".concat(e,"."):""}}]),r}(s.default.Component);a.default=h,h.defaultProps={prefix:""}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(3)),p=n(r(32)),m=n(r(16)),h=r(25),v=n(r(1727)),y=n(r(1730));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,o.default)(r,e);var a=g(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={showForm:!1},e.getProbeTypeText=function(e){return"httpGet"in e?"HTTP_REQUEST":"tcpSocket"in e?"TCP_PORT":"COMMAND"},e.showForm=function(){e.setState({showForm:!0})},e.hideForm=function(){e.setState({showForm:!1})},e.handleForm=function(t){(0,e.props.onChange)(t),e.hideForm()},e.handleDelete=function(){var t=e.props,a=t.onChange;t.deleteNoObject?a():a({})},e}return(0,u.default)(r,[{key:"renderProbeInfo",value:function(){var e=this.props.value;if("httpGet"in e)return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",null,s.default.createElement("strong",null,(0,m.default)(e,"httpGet.scheme","")),s.default.createElement("p",null,t("TYPE"))),s.default.createElement("div",null,s.default.createElement("strong",null,(0,m.default)(e,"httpGet.path","")),s.default.createElement("p",null,t("PATH"))),s.default.createElement("div",null,s.default.createElement("strong",null,(0,m.default)(e,"httpGet.port","")),s.default.createElement("p",null,t("PORT"))));if("tcpSocket"in e)return s.default.createElement("div",null,s.default.createElement("strong",null,(0,m.default)(e,"tcpSocket.port","")),s.default.createElement("p",null,t("PORT")));if("exec"in e){var a=(0,m.default)(e,"exec.command",[]);return s.default.createElement("div",null,s.default.createElement("strong",null,a[0],a.length>1&&" ..."),s.default.createElement("p",null,t("COMMANDS")))}return null}},{key:"renderProbeForm",value:function(){var e=this.props,t=e.probType,a=e.value,r=e.componentType;return s.default.createElement(v.default,{className:y.default.form,data:a,probType:t,onSave:this.handleForm,onCancel:this.hideForm,componentType:r})}},{key:"render",value:function(){var e=this.props,a=e.description,r=e.value,n=e.componentType,l=e.label;return this.state.showForm?s.default.createElement("div",{className:y.default.probe},this.renderProbeForm()):(0,p.default)(r)?s.default.createElement("div",{className:(0,d.default)(y.default.empty),onClick:this.showForm},s.default.createElement("div",null,l||t("ADD_PROBE")),s.default.createElement("p",{className:"text-secondary"},a)):s.default.createElement("div",{className:y.default.probe},s.default.createElement("div",{className:y.default.content},s.default.createElement(h.Icon,{name:"monitor",size:40}),s.default.createElement("div",null,s.default.createElement("strong",null,t(this.getProbeTypeText(r))),"heal"===n&&s.default.createElement("p",null,s.default.createElement("span",null,t("INITIAL_DELAY_TIMEOUT_VALUE",{delay:r.initialDelaySeconds||0,timeout:r.timeoutSeconds||0})))),this.renderProbeInfo()),s.default.createElement("div",{className:"buttons"},s.default.createElement(h.Button,{type:"flat",icon:"trash",onClick:this.handleDelete}),s.default.createElement(h.Button,{type:"flat",icon:"pen",onClick:this.showForm})))}}]),r}(s.default.Component);a.default=b,b.propTypes={name:f.default.string,label:f.default.string,value:f.default.object,onChange:f.default.func,onShowForm:f.default.func,deleteNoObject:f.default.bool},b.defaultProps={name:"",label:"",value:{},onChange:function(){},onShowForm:function(){},componentType:"heal",deleteNoObject:!1}},function(e,t,a){e.exports={wrapper:"_2qA0DfrVhnER8QvH0wQNVs",radioGroup:"lTdgbwVyGMyso1J2-ZyQQ",confirm:"_3750no6wmEKmoHmvmyPMsm",object:"_2y_cKPnzZxbXLF_dVafN1k"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=a(25),d=r(a(275)),p=r(a(1734));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var h=function(e){(0,u.default)(a,e);var t=m(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).handleChange=function(){var t=e.props,a=t.value;(0,t.onChange)(!a)},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.title,r=e.description;return c.default.createElement("div",{className:p.default.wrapper,onClick:this.handleChange},c.default.createElement(f.Toggle,{checked:t}),c.default.createElement(d.default,{className:p.default.text,title:a,description:r}))}}]),a}(c.default.PureComponent);t.default=h,h.propTypes={value:s.default.bool,onChange:s.default.func},h.defaultProps={onChange:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1234)),p=n(r(740)),m=n(r(1736));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement("div",{className:"margin-b12"},s.default.createElement("div",{className:m.default.title},t("USER_AND_USER_GROUP")),s.default.createElement("div",{className:m.default.content},s.default.createElement(f.Form.Item,null,s.default.createElement(d.default,{name:"".concat(this.prefix,".runAsNonRoot"),title:t("RUN_AS_NON_ROOT"),description:t("RUN_AS_NON_ROOT_DESC")})),s.default.createElement("div",{className:"padding-12"},s.default.createElement(f.Columns,null,s.default.createElement(f.Column,null,s.default.createElement(f.Form.Item,{label:t("USER"),desc:t("RUN_AS_USER_DESC")},s.default.createElement(p.default,{name:"".concat(this.prefix,".runAsUser"),integer:!0}))),s.default.createElement(f.Column,null,s.default.createElement(f.Form.Item,{label:t("USER_GROUP"),desc:t("RUN_AS_USER_GROUP_DESC")},s.default.createElement(p.default,{name:"".concat(this.prefix,".runAsGroup"),integer:!0})))))))}},{key:"prefix",get:function(){return this.props.prefix||"securityContext"}}]),r}(s.default.Component);a.default=v},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1737));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var m=function(e){(0,o.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement("div",{className:"margin-b12"},s.default.createElement("div",{className:d.default.title},t("SELINUX_CONTEXT")),s.default.createElement("div",{className:d.default.content},s.default.createElement(f.Columns,null,s.default.createElement(f.Column,null,s.default.createElement(f.Form.Item,{label:t("LEVEL")},s.default.createElement(f.Input,{name:"".concat(this.prefix,".seLinuxOptions.level")}))),s.default.createElement(f.Column,null,s.default.createElement(f.Form.Item,{label:t("ROLE")},s.default.createElement(f.Input,{name:"".concat(this.prefix,".seLinuxOptions.role")})))),s.default.createElement(f.Columns,null,s.default.createElement(f.Column,null,s.default.createElement(f.Form.Item,{label:t("TYPE")},s.default.createElement(f.Input,{name:"".concat(this.prefix,".seLinuxOptions.type")}))),s.default.createElement(f.Column,null,s.default.createElement(f.Form.Item,{label:t("USER")},s.default.createElement(f.Input,{name:"".concat(this.prefix,".seLinuxOptions.user")}))))))}},{key:"prefix",get:function(){return this.props.prefix||"securityContext"}}]),r}(s.default.Component);a.default=m},function(e,t,a){e.exports={wrapper:"-XBu4b8O2xvI7sz8SdpZE",add:"_39NWTfrUc4MtPeYODxl5g6",list:"uWCXlTgRj640bCk0_flS7",mount:"_22--q6IUrTwpjWke9zshDr"}},function(e,t,a){e.exports={wrapper:"_19UhKk3-mi4ub-5oSlzpX6",add:"h5mILzyoJWeiI4KhywDGq",list:"_11RSctNAug762pT28Zt47a",mount:"_1M1f1DRCC8ZTvK-ac2EW6U"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=l(r(0)),p=r(70),m=n(r(16)),h=n(r(32)),v=r(25),y=n(r(636)),g=n(r(1074));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=(0,p.observer)(u=function(e){(0,c.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=new g.default,e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cluster,a=e.namespace;this.store.fetchList({cluster:t,namespace:a,limit:-1})}},{key:"render",value:function(){var e=this.options;return(0,h.default)(e)?null:d.default.createElement(v.Form.Item,{label:t("POD_IP_POOL")},d.default.createElement(y.default,{name:"".concat(this.prefix,'metadata.annotations["cni.projectcalico.org/ipv4pools"]'),options:e,defaultValue:e[0].value}))}},{key:"prefix",get:function(){return this.props.prefix||"spec.template."}},{key:"options",get:function(){return this.store.list.data.filter((function(e){return(0,m.default)(e,"status.unallocated",0)})).map((function(e){return{label:e.name,value:JSON.stringify([e.name]),icon:"eip-group",description:e.description||"-",details:[{label:e.cidr,description:t("NETWORK_SEGMENT_SCAP")},{label:(0,m.default)(e,"status.unallocated"),description:t("AVAILABLE_ADDRESSES")}]}}))}}]),r}(d.Component))||u;a.default=E},function(e,t,a){e.exports={body:"_20KZWGrRjmRPP_JIbDc10b",footer:"_27w0UI5xapozSRbtunCqBZ",nodes:"_38qhgbAP2cKhs37vbwmci",item:"KyVlOg-pF3VGEh5pnnFdj",selected:"_12yploQohwiLpA0dhK-IV6",ring:"_1ppP-sUCzTYH9DgAkpnI0g",name:"_3vulsZhQIFxLsKFo47U2DA",taints:"_22nVB2_uPqlEF7ZiQy6sqT"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(136)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(32)),p=n(r(650)),m=n(r(0)),h=n(r(651)),v=r(25),y=n(r(786)),g=n(r(736)),b=r(37),E=n(r(1781)),_=n(r(1783));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=O(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).fetchRelatedWorkloads=(0,p.default)((function(e){var a=e.value,r=e.cluster,n=e.namespace;if((0,d.default)(a)||Object.keys(a).some(d.default)||Object.values(a).some(d.default))t.setState({relatedDeployments:[],relatedDaemonSets:[],relatedStatefulSets:[]});else if((0,b.isValidLabel)(a)){var l=(0,b.joinSelector)(a);Promise.all([t.store.fetchListByK8s({cluster:r,namespace:n,labelSelector:l,module:"deployments"}),t.store.fetchListByK8s({cluster:r,namespace:n,labelSelector:l,module:"daemonsets"}),t.store.fetchListByK8s({cluster:r,namespace:n,labelSelector:l,module:"statefulsets"})]).then((function(e){var a=(0,u.default)(e,3),r=a[0],n=a[1],l=a[2];t.setState({relatedDeployments:r,relatedDaemonSets:n,relatedStatefulSets:l})}))}}),500),t.handleWorkloadSelect=function(e){var a=t.props.onChange;a&&a(e)},t.handleCancel=function(){t.setState({visible:!1})},t.store=new g.default,t.state={relatedDeployments:[],relatedDaemonSets:[],relatedStatefulSets:[]},(0,d.default)(e.value)||t.fetchRelatedWorkloads(e),t}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){(0,h.default)(e.value,this.props.value)||this.fetchRelatedWorkloads(this.props)}},{key:"renderRelatedTips",value:function(){var e=this.props.value,a=this.state,r=a.relatedDeployments,n=a.relatedDaemonSets,l=a.relatedStatefulSets,o=r.length+n.length+l.length;if((0,d.default)(e))return null;if(0===o){var i=t("NO_WORKLOAD_MATCH_SELECTOR");return m.default.createElement(v.Alert,{className:_.default.alert,message:i,type:"warning"})}var c=Object.entries(e).map((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})).join(", "),s=1===o?t("WORKLOADS_MATCH_SELECTOR_SI",{selector:c,count:o}):t("WORKLOADS_MATCH_SELECTOR_PL",{selector:c,count:o}),f=m.default.createElement("div",null,m.default.createElement("p",null,t("TOTAL_WORKLOADS_VALUE",{count:o})),r.map((function(e){var a=e.name;return m.default.createElement("p",{key:"deploy-".concat(a)},t("DEPLOYMENTS_VALUE",{value:a}))})),n.map((function(e){var a=e.name;return m.default.createElement("p",{key:"ds-".concat(a)},t("STATEFULSETS_VALUE",{value:a}))})),l.map((function(e){var a=e.name;return m.default.createElement("p",{key:"sts-".concat(a)},t("STATEFULSETS_VALUE",{value:a}))}))),p=m.default.createElement("div",null,m.default.createElement("p",{className:"inline-block"},s)," ",m.default.createElement(v.Tooltip,{content:f,trigger:"click"},m.default.createElement("a",{className:"text-green"},t("VIEW_DETAILS"))));return m.default.createElement(v.Alert,{className:_.default.alert,message:p,type:"warning"})}},{key:"renderWorkloadSelectForm",value:function(){var e=this.props,t=e.cluster,a=e.namespace;return m.default.createElement(E.default,{cluster:t,namespace:a,onSelect:this.handleWorkloadSelect,onCancel:this.handleCancel})}},{key:"render",value:function(){var e=this.state.visible;return m.default.createElement("div",{className:_.default.wrapper},this.renderRelatedTips(),m.default.createElement(y.default,(0,l.default)({},this.props,{controlled:!0})),m.default.createElement(v.Popper,{className:_.default.popper,trigger:"click",visible:e,placement:"right",content:this.renderWorkloadSelectForm(),closeAfterClick:!1},m.default.createElement(v.Button,{className:_.default.workload},t("SPECIFY_WORKLOAD"))))}}]),r}(m.default.Component);a.default=S},function(e,t,a){e.exports={body:"_2MhD2VJyGZ1OnJ2KFe2d23",footer:"_2V8DBKRPjuX7w6AAHpKTfP",workloads:"_1hcCNTwhogb3zYNVUYkdWE",item:"_3-pknnNZ1yrdvtQZk8621N",selected:"_1j4HTHlVC5ELuR7GNArbbV",ring:"_1DMV7CsdVMuAxQ4xSvTJ5I",name:"_3VnHSneXzn9c_lC_mtzDzq"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(761)),h=n(r(1787));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.value,r=void 0===a?[]:a,n=e.onChange,o=e.options,i=(0,u.default)(e,["value","onChange","options"]);return d.default.createElement(m.default,(0,l.default)({value:r,onChange:n,addText:t("ADD_ENVIRONMENT_VARIABLE")},i),d.default.createElement(h.default,{options:o}))}}]),r}(d.default.Component);a.default=y,y.propTypes={value:p.default.array,onChange:p.default.func},y.defaultProps={name:"",value:[],onChange:function(){}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=a(25);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,i.default)(a,e);var t=p(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t,a){var r=e.props.onChange;r&&r(t&&"true"===t,a)},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=(e.onChange,(0,l.default)(e,["value","onChange"]));return f.default.createElement(d.Select,(0,n.default)({value:String(t),onChange:this.handleChange},a))}}]),a}(f.default.Component);t.default=m,m.defaultProps={options:[{label:"true",value:"true"},{label:"false",value:"false"}]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(73)),m=n(r(636)),h=r(25),v=n(r(195)),y=n(r(1788));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,i.default)(r,e);var a=E(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).getDefaultValue=function(){var t=e.props.builderTemplate;return e.isB2i?(0,d.default)(e.containerList[0],"builderImage",""):(0,d.default)(t.find((function(t){return(0,d.default)(t,"spec.codeFramework")===e.languageType})),"spec.defaultBaseImage","")},e.handleTemplateChange=function(t){var a=e.props.formTemplate,r=e.containerList.find((function(e){return e.builderImage===t}))||{};Object.keys(r).forEach((function(e){["environment","docUrl","description"].includes(e)||(0,p.default)(a,"spec.config.".concat(e),r[e])})),e.props.onEnvironmentChange(r)},e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.loading===e.loading||this.props.loading||this.handleTemplateChange(this.getDefaultValue())}},{key:"getOptions",value:function(e){var t="en"===(0,v.default)("lang")?"EN":"CN";return(0,d.default)(e,"spec.containerInfo",[]).map((function(a){return b(b({},a),{},{type:(0,d.default)(e,"spec.codeFramework",""),description:(0,d.default)(e,"metadata.annotations.description".concat(t),"")||(0,d.default)(e,"spec.description",""),environment:(0,d.default)(e,"spec.environment"),docUrl:(0,d.default)(e,'metadata.annotations["devops.kubesphere.io/s2i-template-url"]',"")})}))}},{key:"getTemplateOptions",value:function(){return this.containerList.map((function(e){return{icon:e.type,value:e.builderImage,label:e.builderImage,description:e.description}}))}},{key:"render",value:function(){return this.props.loading?f.default.createElement(h.Form.Item,null,f.default.createElement(h.Loading,{className:y.default.loading})):f.default.createElement(h.Form.Item,{rules:[{required:!0,message:t("PARAM_REQUIRED")}],label:t("BUILD_ENVIRONMENT"),className:y.default.form},f.default.createElement(m.default,{name:"spec.config.builderImage",defaultValue:this.getDefaultValue(),options:this.getTemplateOptions(),onChange:this.handleTemplateChange}))}},{key:"isB2i",get:function(){return"b2i"===(0,d.default)(this.props.formTemplate,'metadata.labels["s2i-type.kubesphere.io"]')}},{key:"languageType",get:function(){return(0,d.default)(this.props.formTemplate,"metadata.annotations.languageType")}},{key:"containerList",get:function(){var e=this,t=this.props.builderTemplate;return this.isB2i?t.reduce((function(t,a){return(0,d.default)(a,'metadata.labels["binary-type.kubesphere.io"]')===e.languageType?t.concat(e.getOptions(a)):t}),[]):t.reduce((function(t,a){return(0,d.default)(a,"spec.codeFramework")===e.languageType?t.concat(e.getOptions(a)):t}),[])}}]),r}(f.default.PureComponent);a.default=_,_.defaultProps={builderTemplate:[],onEnvironmentChange:function(){}}},function(e,t,a){e.exports={item:"_3B6M7jS8yJCJ_db80218Cx",clusters:"yJ5ZeNZrCegufTZ2ZaNKw",icon:"_2lO-9i_JS9eqsIVBPkua-p",texts:"_2YWJAWgI61nIhCS4EYsPi0",text:"_1n80KtncC2AozhPD0jNrLe",title:"GB0KMFlNq6OL-c4Ax-46B",description:"_2JZg6RuX8VztZ-BRkF5XIn",add:"_3QePSiOdhFNLnuISgc5M-b",error:"_1MSBTkDbGWnDCrv3uPORJW",overrides:"_3-XUgSp20r6pfRrzMwEO-I"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={content:"_33UAj8NNyxGlt0XrGjXxDG",container:"_39DHzVANM8BB28BDsjbPDz",tabs:"_1In4WG1eFP8TEpfe2io2n9",active:"vbsTPs6KAl0ma_1Gu0kmT",icon:"_3hCslx0LRjpwUZYHuRm8w2",updated:"_5AdLQjJkeWRoQAcJmG5Tm",form:"_3fv66aOwusgZPt6_7XcUhb",formActions:"_3b9paAt5DebzD_VqB7AD0T",formWrapper:"_3XmPpYsksWGsE4Y8Us31Zo",footer:"VsyyYvKWuTWldOg79WKyW",confirm:"_3s_Vwl-cr6v1rKwl_tgu"}},,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(109)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(3)),m=a(25),h=r(a(2080));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=v(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleClick=function(t){var a=t.currentTarget.dataset.value,r=e.props,n=r.value,u=r.onChange;n.includes(a)?u(n.filter((function(e){return e!==a}))):u([].concat((0,l.default)(n),[a]))},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.options,r=t.value;return f.default.createElement("ul",{className:h.default.wrapper},a.map((function(t){return f.default.createElement("li",{className:(0,p.default)((0,n.default)({},h.default.select,r.includes(t.value))),key:t.value,"data-value":t.value,onClick:e.handleClick},t.icon&&f.default.createElement(m.Icon,{name:t.icon,size:24}),t.label)})))}}]),a}(f.default.Component);t.default=y,y.propTypes={options:d.default.array,value:d.default.array,onChange:d.default.func},y.defaultProps={options:[],value:[],onChange:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(2081));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var m=function(e){(0,o.default)(r,e);var a=p(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleUp=function(){var t=e.props,a=t.value,r=t.onChange;r&&r(a+1)},e.handleDown=function(){var t=e.props,a=t.value,r=t.onChange;r&&r(Math.max(a-1,1))},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.value,r=e.onChange;return s.default.createElement("div",{className:d.default.wrapper},s.default.createElement("span",{className:d.default.value},a),s.default.createElement("span",{className:d.default.text},s.default.createElement("p",null,s.default.createElement("strong",null,t(1===a?"REPLICA":"REPLICA_PL"))),s.default.createElement("p",null,t("GRAYSCALE_REPLICAS_DESC"))),r&&s.default.createElement("span",{className:d.default.buttons},s.default.createElement(f.Icon,{name:"chevron-up",size:24,onClick:this.handleUp}),s.default.createElement(f.Icon,{name:"chevron-down",size:24,onClick:this.handleDown})))}}]),r}(s.default.Component);a.default=m},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(109)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=r(a(1)),d=r(a(3)),p=r(a(298)),m=a(25),h=r(a(2089)),v=r(a(1305));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(a,e);var t=y(a);function a(e){var r;return(0,l.default)(this,a),(r=t.call(this,e)).handleClick=function(){r.autosuggest.focus()},r.handleInputChange=function(e,t){(0,r.props.onInputChange)(e,t)},r.handleAdd=function(e){var t=r.state.tags,a=r.props.onChange,l=[].concat((0,n.default)(t),[e]);r.setState({tags:l},(function(){a(l)}))},r.handleDelete=function(){var e=r.state.tags,t=r.props.onChange;if(!(e.length<=0)){var a=e.filter((function(t,a){return a!==e.length-1}));r.setState({tags:a},(function(){t(a)}))}},r.handleCloseTag=function(e){var t=e.value,a=e.index,n=r.state.tags,l=r.props.onChange,u=n.filter((function(e,r){return e!==t&&r!==a}));r.setState({tags:u},(function(){l(u)}))},r.renderTags=function(){var e=r.state.tags;return s.default.createElement(s.default.Fragment,null,e.map((function(e,t){return s.default.createElement(m.Tag,{key:"".concat(e,"-").concat(t+1)},e,s.default.createElement(m.Icon,{name:"close",color:{primary:"rgb(255,255,255)"},size:16,clickable:!0,onClick:function(){return r.handleCloseTag({item:e,index:t})}}))})))},r.state={tags:e.value||[]},r}return(0,u.default)(a,[{key:"render",value:function(){var e=this;return s.default.createElement("div",{className:(0,d.default)("input",v.default.filterInput),onClick:this.handleClick},this.renderTags(),s.default.createElement(h.default,{ref:function(t){e.autosuggest=t},placeholder:this.placeholder,onChange:this.handleInputChange,onAdd:this.handleAdd,onDelte:this.handleDelete}))}},{key:"placeholder",get:function(){var e=this.props.placeholder;return 0===this.state.tags.length?e:null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.tags!==e.value?{tags:e.value}:null}}]),a}(s.default.Component);t.default=g,g.propTypes={placeholder:f.default.string,value:f.default.array,onChange:f.default.func,onInputChange:f.default.func},g.defaultProps={value:[],onChange:p.default,onBlur:p.default,onFocus:p.default,onClear:p.default,onInputChange:p.default}},function(e,t,a){e.exports={filterInput:"_1MAMYv0UrOlESlnzVfu722",autosuggest:"F1O1y45zwuVzWE1dlw2Gd",autosuggestInput:"_3fF_SwZ-22BGOTCZ-kjnjq","form-item":"_3YZtMb8CsU0LUi7NvmB1RK","error-item":"_3vxyKMkvbZdJrwkvPrScKl"}},,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=n(r(3)),m=n(r(298)),h=r(276),v=n(r(2117)),y=r(279),g=n(r(2119));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,o.default)(r,e);var a=b(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"renderApps",value:function(){var e=this.props,a=e.workspace,r=e.cluster,n=e.namespace,l=e.apps,u=e.isLoading,o=e.itemCls,i=e.disableLink,c=e.onClickAppItem;if(0===l.length&&!u)return s.default.createElement("div",{className:g.default.noApp},s.default.createElement("img",{src:"/assets/empty-card.svg",alt:""}),s.default.createElement("p",null,t("NO_RESOURCE_FOUND")));var f=(0,y.stringify)({workspace:a,cluster:r,namespace:n});return s.default.createElement(s.default.Fragment,null,l.map((function(e){var t="/apps/".concat(e.app_id,"?").concat(f);return i&&c?s.default.createElement("div",{key:e.app_id,className:(0,p.default)(g.default.appItem,o),onClick:function(){return c(e)}},s.default.createElement(v.default,{app:e})):s.default.createElement(h.Link,{key:e.app_id,className:(0,p.default)(g.default.appItem,o),to:t},s.default.createElement(v.default,{app:e}))})))}},{key:"render",value:function(){var e=this.props,a=e.apps,r=e.isLoading,n=e.total,l=e.onFetchMore,u=e.title,o=e.className,i=e.appRef;return s.default.createElement("div",{className:(0,p.default)(g.default.appList,o),ref:i},u&&s.default.createElement("p",{className:"apps-title"},u),this.renderApps(),r&&s.default.createElement("div",{className:g.default.loading},s.default.createElement(d.Loading,null)),!r&&a.length<n&&s.default.createElement("a",{className:g.default.loadMore,onClick:l},s.default.createElement("span",null,t("VIEW_MORE"))))}}]),r}(s.default.PureComponent);a.default=E,E.propTypes={apps:f.default.array,isLoading:f.default.bool,total:f.default.number,onFetchMore:f.default.func,itemCls:f.default.string,title:f.default.string,disableLink:f.default.bool,onClickAppItem:f.default.func},E.defaultProps={apps:[],isLoading:!1,total:0,onFetchMore:m.default,disableLink:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(74)),h=n(r(0)),v=n(r(1)),y=r(5),g=r(70),b=r(25),E=n(r(32)),_=n(r(832)),O=n(r(953)),S=n(r(1320)),k=n(r(2179));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R=b.Tabs.TabPanel,w=(0,g.observer)((i=o=function(e){(0,f.default)(r,e);var a=C(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).handleTabChange=function(e){n.setState({tab:e})},n.renderReadMe=function(){var e=n.files["README.md"];return e||n.fileStore.isLoading?h.default.createElement(O.default,{source:e}):h.default.createElement("p",{className:k.default.noReadme},t("VERSION_INTRO_EMPTY_DESC"))},n.renderChartFiles=function(){if(!(0,E.default)(n.files)){return h.default.createElement(S.default,{files:(0,y.toJS)(n.files),editorOptions:{options:{readOnly:!0}}})}},n.fileStore=new _.default,n.state={tab:"versionInfo"},n}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.versionId;t!==e.versionId&&this.fetchFile(t)}},{key:"componentDidMount",value:function(){var e=this.props.versionId;this.fetchFile(e)}},{key:"fetchFile",value:function(e){var t=this.props.appId;e&&this.fileStore.fetch({app_id:t,version_id:e})}},{key:"render",value:function(){var e=this.props,a=e.versionId,r=e.currentTab,n=this.state.tab;return a?this.fileStore.isLoading?h.default.createElement(b.Loading,{className:k.default.loading}):"versionInfo"===r?h.default.createElement(h.default.Fragment,null,this.renderReadMe()):"chartFiles"===r?h.default.createElement(h.default.Fragment,null,this.renderChartFiles()):h.default.createElement(b.Tabs,{type:"button",activeName:n,onChange:this.handleTabChange},h.default.createElement(R,{label:t("APP_INTRODUCTION"),name:"versionInfo"},h.default.createElement("div",{className:k.default.wrapper},this.renderReadMe())),h.default.createElement(R,{label:t("CHART_FILES"),name:"chartFiles"},h.default.createElement("div",{className:k.default.wrapper},this.renderChartFiles()))):null}},{key:"files",get:function(){return this.fileStore.files}}]),r}(h.default.Component),o.propTypes={appId:v.default.string,versionId:v.default.string,currentTab:v.default.string},o.defaultProps={currentTab:"",appId:"",versionId:""},u=i,(0,m.default)(u.prototype,"files",[y.computed],Object.getOwnPropertyDescriptor(u.prototype,"files"),u.prototype),l=u))||l;a.default=w},,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=r(25),m=r(821),h=n(r(1049)),v=n(r(795)),y=n(r(2178));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).DEFAULT_PREVIEW_FILE="values.yaml",e.state={selectFile:e.defaultSelectFile,mode:"yaml"},e.changeMode=function(t){e.setState({mode:t})},e.changeSelectFile=function(t){e.setState({selectFile:t})},e.handleDownload=function(){var t=e.state,a=t.mode,r=t.selectFile,n=e.props.files[r];"yaml"===a?e.downloadAsYaml(n):"json"===a&&e.downloadAsJSON(n)},e}return(0,o.default)(r,[{key:"downloadAsJSON",value:function(e){var t=this.state.selectFile.replace(/yaml$/,"json"),a="";try{a=JSON.stringify(h.default.safeLoad(e),null,2)}catch(e){a=e}this.saveAs(a,t)}},{key:"downloadAsYaml",value:function(e){var t=this.state.selectFile;this.saveAs(e,t)}},{key:"saveAs",value:function(e,t){var a=new Blob([e],{type:"text/plain;charset=utf-8"});(0,m.saveAs)(a,t)}},{key:"renderFileSelect",value:function(){return f.default.createElement(p.Select,{defaultValue:this.state.selectFile,onChange:this.changeSelectFile,options:this.fileOptions})}},{key:"renderOverlayBtns",value:function(){return this.props.hideOverlayBtns?null:f.default.createElement("div",{className:y.default.overlayTools},f.default.createElement(p.Icon,{className:y.default.download,name:"download",size:20,color:{primary:"#fff"},onClick:this.handleDownload,clickable:!0,changeable:!0}))}},{key:"renderToolbar",value:function(){var e=this.props,a=e.type;return e.hideToolbar?null:f.default.createElement("div",{className:y.default.toolbar},"selectFiles"===a&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:y.default.icon},f.default.createElement(p.Icon,{name:"coding",size:20}),f.default.createElement("span",null,t("CHART_FILES"))),this.renderFileSelect()),"values.yaml"===a&&f.default.createElement("div",{className:y.default.icon},f.default.createElement("img",{src:"/assets/helm.svg",alt:""}),f.default.createElement("span",null,"Values.yaml")))}},{key:"renderPreviewContent",value:function(){var e=this.props.editorOptions,t=this.state,a=t.mode,r=t.selectFile;return f.default.createElement(v.default,(0,l.default)({mode:a,value:this.props.files[r]},e))}},{key:"render",value:function(){return this.state.selectFile?f.default.createElement("div",{className:y.default.wrapper},this.renderToolbar(),f.default.createElement("div",{className:y.default.edit},this.renderOverlayBtns(),this.renderPreviewContent())):f.default.createElement("p",null,t("NO_APP_CHART_FILE_FOUND"))}},{key:"fileOptions",get:function(){var e=this.props.files,t=void 0===e?{}:e;return Object.keys(t).map((function(e){return{label:e,value:e}}))}},{key:"defaultSelectFile",get:function(){var e=this.props.files,t=(void 0===e?{}:e)[this.DEFAULT_PREVIEW_FILE],a=this.fileOptions.length?this.fileOptions[0].value:"";return t?this.DEFAULT_PREVIEW_FILE:a}}]),r}(f.default.Component);a.default=b,b.propTypes={files:d.default.object,type:d.default.oneOf(["selectFiles","values.yaml"]),editorOptions:d.default.object,hideToolbar:d.default.bool,hideOverlayBtns:d.default.bool},b.defaultProps={files:{},type:"selectFiles",editorOptions:{},hideToolbar:!1,hideOverlayBtns:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(3)),p=n(r(16)),m=n(r(32)),h=n(r(137)),v=r(37),y=r(813),g=n(r(2180));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,o.default)(r,e);var a=b(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.app,n=(0,v.safeParseJSON)((0,p.default)(r,"latest_app_version.maintainers",[]),[]).map((function(e){return e.name})),l=(0,v.safeParseJSON)((0,p.default)(r,"latest_app_version.sources",[]),[]);return s.default.createElement("div",{className:(0,d.default)(g.default.appBase,a)},s.default.createElement("h3",null,t("BASIC_INFORMATION")),s.default.createElement("dl",null,s.default.createElement("dt",null,t("CATEGORY_COLON")),s.default.createElement("dd",null,(0,y.getAppCategoryNames)((0,p.default)(r,"category_set",[]))),s.default.createElement("dt",null,t("HOMEPAGE_COLON")),s.default.createElement("dd",null,r.home||"-"),s.default.createElement("dt",null,t("RELEASE_DATE_COLON")),s.default.createElement("dd",null,(0,h.default)(r.status_time).format(t("YYYY-MM-DD"))),s.default.createElement("dt",null,t("APP_ID_COLON")),s.default.createElement("dd",null,r.app_id||"-"),!(0,m.default)(n)&&s.default.createElement(s.default.Fragment,null,s.default.createElement("dt",null,t("MAINTAINER_COLON")),s.default.createElement("dd",null,n.join("、"))),!(0,m.default)(l)&&s.default.createElement(s.default.Fragment,null,s.default.createElement("dt",null,t("SOURCE_CODE_ADDRESS")),s.default.createElement("dd",null,l.map((function(e){return s.default.createElement("p",null,e)}))))))}}]),r}(s.default.PureComponent);a.default=E,E.propTypes={className:f.default.string,app:f.default.object.isRequired},E.defaultProps={app:{}}},,function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(71)),o=l(r(56)),i=l(r(21)),c=l(r(49)),s=l(r(50)),f=l(r(12)),d=l(r(13)),p=l(r(19)),m=l(r(20)),h=l(r(18)),v=n(r(0)),y=l(r(1)),g=l(r(3)),b=r(25),E=l(r(274)),_=l(r(1118)),O=l(r(2218)),S=l(r(832)),k=r(37),C=l(r(2220)),R=l(r(2221));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var P=function(e){(0,p.default)(r,e);var a=w(r);function r(e){var n;return(0,f.default)(this,r),(n=a.call(this,e)).reset=function(){n.setState({canCreate:!1,checkStatus:"init"})},n.changeCheckStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({checkStatus:e.status,resultInfo:e})},n.changeIcon=function(e){n.setState({icon:e})},n.onCancel=function(){n.props.onCancel(),n.reset()},n.createApp=(0,s.default)(c.default.mark((function e(){var t,a,r,l,u,o,i,s,f;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props,a=t.type,r=t.onOk,(l=n.state.canCreate)?(u=n.state,o=u.icon,i=u.resultInfo,s=o||i.icon,f={version_type:"helm",name:i.name,base64Str:i.base64Str,icon:s},n.fileStore.uploadPackage(a,f,r).then((function(){n.reset()}))):n.setState({canCreate:!l});case 3:case"end":return e.stop()}}),e)}))),n.handleSubmit=function(){var e=n.props,a=e.appId,r=e.workspace,l=e.type,u=e.onOk,o=n.state.resultInfo;if("success"!==n.state.checkStatus)return b.Notify.error({content:"".concat(t("UPLOAD_PACKAGE_OK_NOTE"))}),!1;if("CREATE_APP"===l)n.createApp();else{var i={type:"helm",app_id:a,workspace:r,base64Str:o.base64Str};n.fileStore.uploadPackage(l,i,u).then((function(){n.setState({checkStatus:"init"})}))}},n.fileStore=new S.default,n.state={checkStatus:"init",canCreate:!1,resultInfo:{},icon:""},n}return(0,d.default)(r,[{key:"renderCheckFiles",value:function(){var e=this.props.errorFiles,a=(0,k.getWebsiteUrl)().url;return v.default.createElement("div",null,v.default.createElement("div",{className:R.default.checkFiles},v.default.createElement("ul",null,C.default.map((function(a){return v.default.createElement("li",{key:a.name,className:(0,g.default)((0,i.default)({},R.default.error,e.includes(a.name)))},v.default.createElement("span",{className:R.default.name},a.name),v.default.createElement("div",{className:R.default.description},"#  ",a.isOptional&&v.default.createElement("span",null,"[",t("OPTIONAL"),"]  "),t(a.description)))}))),"success"!==this.state.checkStatus&&v.default.createElement("div",{className:R.default.configMask})),v.default.createElement("div",{className:R.default.note},"💁‍♂️ ",t.html("APP_CREATE_GUIDE",{docUrl:a})))}},{key:"render",value:function(){var e=this.props,t=e.appId,a=(0,o.default)(e,["appId"]),r=this.state,n=r.canCreate,l=r.resultInfo;return v.default.createElement(E.default,(0,u.default)({width:960,bodyClassName:R.default.body},a,{onOk:this.handleSubmit,onCancel:this.onCancel,disableSubmit:!l.name}),v.default.createElement("div",{className:R.default.content},v.default.createElement("div",{className:R.default.helmIcon},v.default.createElement(b.Icon,{name:"helm",size:60})),v.default.createElement(_.default,{className:(0,g.default)(R.default.upload,(0,i.default)({},R.default.canCreate,n)),canCreate:n,changeCheckStatus:this.changeCheckStatus,fileStore:this.fileStore,appId:t}),n?v.default.createElement(O.default,{createInfo:l,uploadIcon:this.changeIcon,fileStore:this.fileStore}):this.renderCheckFiles()))}}]),r}(v.Component);a.default=P,P.propTypes={detail:y.default.object,visible:y.default.bool,isSubmitting:y.default.bool,errorFiles:y.default.array,appId:y.default.string,type:y.default.string,onOk:y.default.func,onCancel:y.default.func},P.defaultProps={visible:!1,isSubmitting:!1,errorFiles:[],type:"CREATE_APP",appId:"",onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o=n(r(71)),i=n(r(49)),c=n(r(21)),s=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(74)),y=n(r(0)),g=r(5),b=r(70),E=n(r(16)),_=n(r(191)),O=r(25),S=r(813),k=r(58),C=n(r(275)),R=n(r(2232)),w=n(r(2234));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var N=(0,b.observer)((u=function(e){(0,p.default)(r,e);var a=T(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).versionOptionRender=function(a){var r=a.label,n=a.value;return y.default.createElement("span",{style:{display:"flex",alignItem:"center"}},r,"  ",n===e.latestVersion&&y.default.createElement(O.Tag,{type:"warning"},t("LATEST_VERSION_SCAP")))},e.fetchVersions=(0,s.default)(i.default.mark((function t(){var a,r,n,l,u,o=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:{},r=e.props,n=r.appId,l=r.versionStore,u=r.fromStore,t.abrupt("return",l.fetchList(D(D({},a),{},{app_id:n,status:u?"active":void 0})));case 3:case"end":return t.stop()}}),t)}))),e.handleVersionChange=function(t){e.props.fileStore.fetch({version_id:t})},e}return(0,d.default)(r,[{key:"renderStaticPlacement",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.workspace;return y.default.createElement("div",{className:w.default.placementWrapper},y.default.createElement("div",{className:w.default.placementContent},y.default.createElement(C.default,{title:n,description:t("WORKSPACE")}),y.default.createElement(C.default,{title:a,description:t("Cluster")}),y.default.createElement(C.default,{icon:"project",title:r,description:t("PROJECT")})))}},{key:"render",value:function(){var e=this.props,a=e.formData,r=e.formRef,n=e.namespace,l=e.versionStore;return y.default.createElement("div",{className:w.default.wrapper},y.default.createElement(O.Form,{data:a,ref:r},y.default.createElement("div",{className:w.default.title},t("BASIC_INFORMATION")),y.default.createElement(O.Columns,null,y.default.createElement(O.Column,null,y.default.createElement(O.Form.Item,{label:t("NAME"),desc:t("CLUSTER_NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:k.PATTERN_SERVICE_NAME,message:t("INVALID_NAME_DESC",{message:t("CLUSTER_NAME_DESC")})}]},y.default.createElement(O.Input,{name:"name",maxLength:53}))),y.default.createElement(O.Column,null,y.default.createElement(O.Form.Item,{label:t("VERSION"),rules:[{required:!0,message:t("VERSION_EMPTY_DESC")}]},y.default.createElement(O.Select,{name:"version_id",options:this.sortedVersions,placeholder:" ",pagination:(0,_.default)(l.list,["page","limit","total"]),isLoading:l.list.isLoading,onFetch:this.fetchVersions,onChange:this.handleVersionChange,optionRenderer:this.versionOptionRender,valueRenderer:this.versionOptionRender})))),y.default.createElement(O.Columns,null,y.default.createElement(O.Column,null,y.default.createElement(O.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},y.default.createElement(O.TextArea,{name:"description",maxLength:256}))),y.default.createElement(O.Column,null)),y.default.createElement("br",null),y.default.createElement("div",{className:w.default.title},t("LOCATION")),y.default.createElement("div",{className:w.default.placement},n?this.renderStaticPlacement():y.default.createElement(O.Form.Item,{rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},y.default.createElement(R.default,(0,o.default)({name:"namespace"},this.props))))))}},{key:"sortedVersions",get:function(){return this.props.versionStore.list.data.map((function(e){return{label:e.name,value:e.version_id}})).sort((function(e,t){return(0,S.compareVersion)(t.name,e.name)}))}},{key:"latestVersion",get:function(){return(0,E.default)(this.sortedVersions,"[0].value","")}}]),r}(y.default.Component),(0,v.default)(u.prototype,"sortedVersions",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"sortedVersions"),u.prototype),(0,v.default)(u.prototype,"latestVersion",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"latestVersion"),u.prototype),l=u))||l;a.default=N},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(73)),p=r(5),m=r(70),h=r(25),v=n(r(795)),y=n(r(808)),g=r(37),b=r(979),E=n(r(2235)),_=n(r(2237));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=(0,m.observer)(l=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={valuesYaml:"",valuesJSON:{},valuesSchema:void 0,loadingFile:!0,isCodeMode:!1},e.updateState=function(){var t=e.props.fileStore.files;t&&t["values.yaml"]&&e.setState({valuesYaml:t["values.yaml"],valuesJSON:(0,b.getValueObj)(t["values.yaml"]),valuesSchema:(0,g.safeParseJSON)(t["values.schema.json"]),loadingFile:!1})},e.updateFormData=function(){var t=e.props.formData,a=e.state,r=a.isCodeMode,n=a.valuesYaml,l=a.valuesJSON,u=a.valuesSchema;(0,d.default)(t,"conf",(0,b.getValue)(r||!u?(0,b.getValueObj)(n):l))},e.handleModeChange=function(){var t=e.state.isCodeMode;e.setState({isCodeMode:!t})},e.handleValueChange=function(t){e.setState({valueJSON:t})},e.handleYamlChange=function(t){e.setState({valuesYaml:t})},e}return(0,o.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.updateState(),this.props.fileStore.files.packageFiles||(this.dispather=(0,p.reaction)((function(){return e.props.fileStore.files}),this.updateState))}},{key:"componentWillUnmount",value:function(){this.dispather&&this.dispather()}},{key:"validate",value:function(e){this.updateFormData(),e&&e()}},{key:"renderYamlEdit",value:function(){var e=this.state.valuesYaml;return f.default.createElement("div",{className:_.default.codeWrapper},f.default.createElement(v.default,{mode:"yaml",value:e,onChange:this.handleYamlChange}))}},{key:"renderSchemaForm",value:function(){var e=this.state,t=e.valuesJSON,a=e.valuesSchema;return f.default.createElement("div",{className:_.default.schemaWrapper},f.default.createElement(E.default,{schema:a,value:t,onChange:this.handleValueChange}))}},{key:"render",value:function(){var e=this.state,a=e.valuesSchema,r=e.loadingFile,n=e.isCodeMode,l=n||!a;return r?f.default.createElement(h.Loading,{className:_.default.loading}):f.default.createElement("div",{className:_.default.wrapper},f.default.createElement("div",{className:_.default.title},f.default.createElement("div",null,t("APP_SETTINGS")),a&&f.default.createElement(y.default,{className:_.default.switch,text:t("EDIT_YAML"),onChange:this.handleModeChange,checked:n})),a&&f.default.createElement(h.Alert,{className:"margin-b12",type:"info",message:t("HELM_APP_SCHEMA_FORM_TIP")}),l?this.renderYamlEdit():this.renderSchemaForm())}}]),r}(f.default.Component))||l;a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=n(r(274)),m=n(r(2241));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleOk=function(){e.props.onOk()},e}return(0,u.default)(r,[{key:"renderTitle",value:function(){var e=this.props,a=e.icon,r=e.title,n=e.description;return s.default.createElement("div",{className:m.default.title},s.default.createElement(d.Icon,{name:a||"question",size:n?40:32}),n?s.default.createElement("div",{className:m.default.description},s.default.createElement("h3",null,r||t("APP_NOTE")),s.default.createElement("small",null,n)):s.default.createElement("div",{className:m.default.name},r||t("APP_NOTE")))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.content,l=e.isSubmitting;return s.default.createElement(p.default,{width:504,bodyClassName:m.default.modalBody,visible:a,isSubmitting:l,hideHeader:!0,hideFooter:!0},s.default.createElement("div",{className:m.default.body},this.renderTitle(),s.default.createElement("div",{className:m.default.content},n)),s.default.createElement("div",{className:m.default.footer},s.default.createElement(d.Button,{onClick:r},t("CANCEL")),s.default.createElement(d.Button,{type:"control",disabled:l,loading:l,onClick:this.handleOk},t("OK"))))}}]),r}(s.default.Component);a.default=v,v.propTypes={icon:f.default.string,title:f.default.string,description:f.default.string,desc:f.default.oneOfType([f.default.string,f.default.node]),visible:f.default.bool,isSubmitting:f.default.bool,onOk:f.default.func,onCancel:f.default.func},v.defaultProps={icon:"",title:"",description:"",content:"",visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(21)),c=n(r(56)),s=n(r(49)),f=n(r(50)),d=n(r(12)),p=n(r(13)),m=n(r(19)),h=n(r(20)),v=n(r(18)),y=n(r(0)),g=n(r(1)),b=r(25),E=r(70),_=n(r(274)),O=n(r(138)),S=n(r(16)),k=n(r(32)),C=n(r(883)),R=n(r(2267));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var T=(0,E.observer)((o=u=function(e){(0,m.default)(r,e);var a=D(r);function r(e){var t;return(0,d.default)(this,r),(t=a.call(this,e)).init=(0,f.default)(s.default.mark((function e(){var a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.branch){e.next=6;break}return e.next=3,t.getParametersFromBranch(t.branch);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=t.props.parameters;case 7:a=e.t0,t.setState({currentBranch:t.branch,parameters:a});case 9:case"end":return e.stop()}}),e)}))),t.handleOk=function(){var e=t.formRef.current.getData(),a=e.branch,r=(0,c.default)(e,["branch"]),n=t.state,l=n.parameters,u=n.currentBranch;t.formRef.current.validate((function(){var e=(0,k.default)(r)?!(0,k.default)(l)&&Array.isArray(l)?l.map((function(e){return{name:e.name,value:""}})):null:Object.keys(r).map((function(e){return{name:e,value:r[e]}}));t.props.onOk(e,a||u)}))},t.handleBranchChange=function(){var e=(0,f.default)(s.default.mark((function e(a){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getParametersFromBranch(a);case 2:r=e.sent,t.setState({currentBranch:a,parameters:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getParametersFromBranch=function(){var e=(0,f.default)(s.default.mark((function e(a){var r,n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.params,e.next=3,t.store.getBranchDetail(P({branch:a},r));case 3:return n=e.sent,e.abrupt("return",(0,S.default)(n,"parameters",null));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.formRef=y.default.createRef(),t.store=new C.default,t.state={parameters:null,currentBranch:t.branch},t}return(0,p.default)(r,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e){var t=this.props.visible;!e.visible&&t&&this.init()}},{key:"renderParamsItem",value:function(e){var t,a=(null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"").toLowerCase().split("parameterdefinition")[0],r=(0,S.default)(e,"defaultParameterValue.value");switch(a){case"string":return y.default.createElement(b.Form.Item,{key:e.name,label:e.name,desc:e.description},y.default.createElement(b.Input,{defaultValue:r,name:e.name}));case"text":return y.default.createElement(b.Form.Item,{key:e.name,label:e.name,desc:e.description},y.default.createElement(b.TextArea,{defaultValue:r,name:e.name}));case"boolean":return y.default.createElement(b.Form.Item,{key:e.name,label:e.name,desc:e.description},y.default.createElement(b.RadioGroup,{name:e.name,defaultValue:String(r)},y.default.createElement(b.Radio,{name:e.name,value:"true"},"True"),y.default.createElement(b.Radio,{name:e.name,value:"false"},"False")));case"choice":var n=(0,S.default)(e,"choices",[]),l=(0,S.default)(e,"defaultParameterValue.value","");return y.default.createElement(b.Form.Item,{key:e.name,label:e.name,desc:e.description},(0,k.default)(n)?y.default.createElement(b.Input,{name:e.name,defaultValue:l}):y.default.createElement(b.Select,{name:e.name,options:n.map((function(e){return{label:e,value:e}})),defaultValue:l||n[0]}));case"password":return y.default.createElement(b.Form.Item,{key:e.name,label:e.name,desc:e.description},y.default.createElement(b.Input,{defaultValue:r,type:"password",name:e.name}));default:return y.default.createElement(b.Form.Item,{key:e.name,label:e.name,desc:e.description},y.default.createElement(b.Input,{defaultValue:r,name:e.name}))}}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,l=a.branches,u=this.state,o=u.parameters,i=u.currentBranch;return y.default.createElement(_.default,{width:680,onCancel:n,onOk:this.handleOk,visible:r,closable:!1,title:t("SET_PARAMETERS")},y.default.createElement(b.Form,{ref:this.formRef},(0,k.default)(l)?null:y.default.createElement(b.Form.Item,{label:t("BRANCH_SI"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},y.default.createElement(b.Select,{name:"branch",options:this.branchOptions,defaultValue:i,onChange:this.handleBranchChange})),(0,k.default)(o)?null:y.default.createElement("div",{className:R.default.desc},t("PARAMS_DESC")),Array.isArray(o)&&o.map((function(t){return e.renderParamsItem(t)}))))}},{key:"branch",get:function(){var e=this.props,t=e.branches,a=e.params,r=a?a.branch:"";return(0,k.default)(t)||(r=(0,S.default)(this.branchOptions,"[0].value")),r}},{key:"branchOptions",get:function(){var e=this.props,t=e.branches,a=e.params,r=Array.isArray(t)?t.map((function(e){return{label:decodeURIComponent(e),value:e}})):[];return a&&a.branch&&(r=[{label:decodeURIComponent(a.branch),value:a.branch}]),r.sort((function(e,t){return(0,O.default)(e.value)&&["master","main"].includes(e.value.toLowerCase())?-1:(0,O.default)(t.value)&&["master","main"].includes(t.value.toLowerCase())?1:e.value<t.value?-1:e.value>t.value?1:0}))}}]),r}(y.default.Component),u.propTypes={name:g.default.string,branches:g.default.array},u.defaultProps={branches:[],visible:!1,name:"",onOk:function(){},onCancel:function(){}},l=o))||l;a.default=T},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.renderStepArgs=void 0;var l=n(r(0)),u=n(r(138)),o=n(r(16)),i=n(r(191)),c=r(912),s=n(r(1015)),f=function(e){return void 0!==(0,o.default)(e,"value.value")?"string"==typeof e.value.value?e.value.value:JSON.stringify(e.value.value):"string"==typeof e.value?e.value:JSON.stringify(e.value)},d=function(e){return l.default.createElement("div",{key:e.key,className:s.default.content__detail},t(e.key),"   ",f(e))},p=function(e){return Object.entries(e).map((function(e){return l.default.createElement("div",{key:e[0],className:s.default.content__detail},t(e[0]),"   ",e[1])}))},m={git:function(e){return"changelog"===e.key||"poll"===e.key?null:d(e)},withCredentials:function(e){var t=f(e);if((0,u.default)(t)&&t.startsWith("${")){var a=(0,c.groovyToJS)(t);return p(a)}return d(e)},checkout:function(e){if("scm"===e.key){var t=f(e);if((0,u.default)(t)&&t.startsWith("[")){var a=(0,c.groovyToJS)(t);return a=(0,i.default)(a,["remote","credentialsId"]),p(a)}return d(e)}return null},default:d};a.renderStepArgs=function(e){return e.arguments?void 0!==e.arguments.length?e.arguments.map((function(t){return m[e.name]?m[e.name](t):m.default(t)})):m[e.name]?m[e.name](e.arguments):m.default(e.arguments):null}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(109)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=r(a(23)),d=r(a(32)),p=r(a(2279));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(a,e);var t=m(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,u=new Array(r),o=0;o<r;o++)u[o]=arguments[o];return(e=t.call.apply(t,[this].concat(u))).getMaxHeight=function(){var t=e.props,a=t.heights,r=t.index;return Math.max.apply(Math,[].concat((0,n.default)(a[r]||[]),(0,n.default)(a[r+1]||[])))},e.onInsertColumn=function(t){return function(){e.props.onInsertColumn(t)}},e.renderLines=function(t,a){return(0,f.default)(t)?t.map((function(r,n){return n===t.length-1?null:s.default.createElement(s.default.Fragment,{key:n},e.renderLine(r,a))})):null},e.renderEditLines=function(){var t=e.props,a=t.heights,r=t.index,n=t.isEditMode,l=[];if(!(0,f.default)(a)||!n)return null;if((0,f.default)(a[r])&&!(0,d.default)(a[r])){var u=a[r],o=u.length,i=u.last,c=void 0===i?o-1:i;l.push(e.renderLine(a[r][c]-50,"left",!0))}if((0,f.default)(a[r+1])&&!(0,d.default)(a[r+1])){var s=a[r+1],p=s.length,m=s.last,h=void 0===m?p-1:m;l.push(e.renderLine(a[r+1][h]-50,"right",!0))}return l},e}return(0,u.default)(a,[{key:"getRightLinePath",value:function(e){return e?(e+=-4,"M".concat(35," ").concat(6,"  V ").concat(e-10," Q ").concat(35,", ").concat(e," ").concat(45,", ").concat(e," H ").concat(64)):"M ".concat(35," ").concat(6," H ").concat(64)}},{key:"getLeftLinePath",value:function(e){return e?(e+=-4,"M".concat(6," ").concat(e," H ").concat(25," Q ").concat(35,",").concat(e," ").concat(35,",").concat(e-10," V ").concat(6)):"M".concat(6," ").concat(6," H ").concat(35)}},{key:"renderEditButton",value:function(){var e=this.props,t=e.index;if(e.isEditMode)return s.default.createElement("g",{className:p.default.editButton},s.default.createElement("circle",{cx:35,cy:6,r:"10",stroke:"#d8dee5",strokeDasharray:"3,3",fill:"white",strokeWidth:2,onClick:this.onInsertColumn(t+1)}),s.default.createElement("line",{x1:30,x2:40,y1:6,y2:6,stroke:"black"}),s.default.createElement("line",{x1:35,x2:35,y1:1,y2:11,stroke:"black"}))}},{key:"renderLine",value:function(e,t,a){return"left"===t?s.default.createElement("path",{key:"left-".concat(this.props.index),d:this.getLeftLinePath(e),stroke:a?"#d8dee5":"black",strokeWidth:2,fill:"none",markerStart:"url(#path-marker-".concat(a?"grey":"black",")"),markerEnd:"url(#path-marker-".concat(a?"grey":"black",")")}):s.default.createElement("path",{key:"right-".concat(this.props.index),d:this.getRightLinePath(e),stroke:a?"#d8dee5":"black",strokeWidth:2,fill:"none",markerStart:"url(#path-marker-".concat(a?"grey":"black",")"),markerEnd:"url(#path-marker-".concat(a?"grey":"black",")")})}},{key:"renderFirstLines",value:function(){return s.default.createElement(s.default.Fragment,null,this.renderLine(0,"right"),this.renderLine(0,"left"))}},{key:"renderBoldLines",value:function(){var e=this.props,t=e.heights,a=e.index;return s.default.createElement(s.default.Fragment,null,this.renderLines(t[a],"left"),this.renderLines(t[a+1],"right"))}},{key:"renderEdges",value:function(){return s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("defs",null,s.default.createElement("marker",{id:"path-marker-black",viewBox:"0 0 12 12",refX:"6",refY:"6",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse"},s.default.createElement("circle",{cx:6,cy:6,r:5,fill:"#329dce"})),s.default.createElement("marker",{id:"path-marker-grey",viewBox:"0 0 12 12",refX:"6",refY:"6",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse"},s.default.createElement("circle",{cx:6,cy:6,r:5,fill:"#d8dee5"}))),this.renderEditLines(),this.renderBoldLines(),this.renderFirstLines(),this.renderEditButton())}},{key:"render",value:function(){var e=this.props,t=e.heights,a=e.index,r=e.posision,n=e.isEditMode;return n||a!==t.length-1?s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:p.default.connects__column,style:{height:"".concat(this.getMaxHeight()+32,"px")}},this.renderEdges(),n&&!a&&"Right"===r?this.renderEditButton():null)):s.default.createElement("div",{className:p.default.connects__column})}}]),a}(s.default.Component);t.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=n(r(274)),y=n(r(795)),g=n(r(759));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(0,h.observer)((o=u=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleChange=function(e){t.newValue=e},t.handleOk=function(){t.props.onOk(t.newValue)},t.state={value:""},t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.value;this.state.value=e}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(v.default,{width:680,bodyClassName:g.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("yaml")},p.default.createElement(y.default,{className:g.default.CodeEditor,name:"script",mode:"yaml",value:this.state.value,onChange:this.handleChange}))}}],[{key:"getDerivedStateFromProps",value:function(e){return{value:e.value}}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=E},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(23)),l=r(a(32)),u=a(5),o=r(a(0)),i=r(a(2282)),c=function(e){var t=e.zIndex,a=e.listType,r=e.steps,c=(0,u.toJS)(r);return o.default.createElement(o.default.Fragment,null,!(0,l.default)(c)&&(0,n.default)(c)&&c.map((function(e,r){return o.default.createElement(i.default,{key:JSON.stringify((0,u.toJS)(e.name))+r,step:(0,u.toJS)(e),index:r,zIndex:t,listType:a,isLast:c.length-1===r})})))};t.default=c},,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(109)),i=r(a(49)),c=r(a(21)),s=r(a(50)),f=r(a(56)),d=r(a(91)),p=r(a(12)),m=r(a(13)),h=r(a(135)),v=r(a(19)),y=r(a(20)),g=r(a(18)),b=r(a(74)),E=(r(a(92)),a(5)),_=r(a(16)),O=r(a(73)),S=r(a(185)),k=a(1342),C=r(a(733));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var D=(n=function(e){(0,v.default)(g,e);var t,a,r,n,c,y=P(g);function g(){var e;(0,p.default)(this,g);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=y.call.apply(y,[this].concat(a))).module="groups",(0,d.default)(e,"treeData",l,(0,h.default)(e)),(0,d.default)(e,"rowTreeData",u,(0,h.default)(e)),e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"kapis/iam.kubesphere.io/v1alpha2".concat(e.getPath(t),"/groups")},e.getDetailUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.getResourceUrl(t),"/").concat(t.name)},e.getWatchListUrl=function(t){var a=t.workspace,r=(0,f.default)(t,["workspace"]);return"apis/iam.kubesphere.io/v1alpha2/watch".concat(e.getPath(r),"/groups?labelSelector=kubesphere.io/workspace=").concat(a)},e}return(0,m.default)(g,[{key:"getPath",value:function(e){var t=e.cluster,a=e.workspace,r=e.namespace,n=e.devops,l="";return t&&(l+="/klusters/".concat(t)),r?"".concat(l,"/namespaces/").concat(r):n?"".concat(l,"/devops/").concat(n):a?"".concat(l,"/workspaces/").concat(a):l}},{key:"fetchGroup",value:(c=(0,s.default)(i.default.mark((function e(){var t,a,r,n,l,u=this,o=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},a=t.workspace,r=(0,f.default)(t,["workspace"]),this.isLoading=!0,r.sortBy="createTime",r.limit=-1,e.next=6,request.get(this.getResourceUrl(w({workspace:a},r)));case 6:n=e.sent,l=(0,_.default)(n,"items",[]).map((function(e){return w({},u.mapper(e))})),this.total=(0,_.default)(n,"totalItems"),this.treeData=[{key:"root",title:a,group_id:"root",group_name:a,path:[a],children:(0,k.formatTreeData)(l,a)}],this.rowTreeData=(0,k.flattenTreeData)(this.treeData),this.isLoading=!1,this.list.update(w(w({data:l,total:n.totalItems||0},r),{},{limit:Number(r.limit)||10,page:Number(r.page)||1,isLoading:!1}));case 13:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"create",value:function(e,t){var a=(0,_.default)(e,'metadata.annotations["kubesphere.io/project-roles"]',[]),r=(0,_.default)(e,'metadata.annotations["kubesphere.io/devops-roles"]',[]);return(0,O.default)(e,'metadata.annotations["kubesphere.io/project-roles"]',JSON.stringify(a)),(0,O.default)(e,'metadata.annotations["kubesphere.io/devops-roles"]',JSON.stringify(r)),this.submitting(request.post(this.getResourceUrl(t),e))}},{key:"createGroup",value:(n=(0,s.default)(i.default.mark((function e(t,a){var r,n,l,u,c,s,d,p=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.create((0,S.default)(t),a);case 2:return r=e.sent,n=(0,_.default)(r,"metadata.name"),l=(0,_.default)(t,'metadata.annotations["kubesphere.io/workspace-role"]'),u=(0,_.default)(t,'metadata.annotations["kubesphere.io/project-roles"]',[]),c=(0,_.default)(t,'metadata.annotations["kubesphere.io/devops-roles"]',[]),s=[this.addWorksapceRoleBinding([C.default.workspacerolebinding({name:n,role:l})],a)],(d=[].concat((0,o.default)(u),(0,o.default)(c))).length>0&&d.forEach((function(e){var t=e.role,a=(0,f.default)(e,["role"]);return t&&s.push(p.addRolebindings([C.default.rolebinding({name:n,role:t})],w({},a)))})),e.abrupt("return",this.submitting(Promise.all(s)));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"update",value:(r=(0,s.default)(i.default.mark((function e(t,a,r){var n,l,u,c,s,f,d,p,m,h,v,y,g,b;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,_.default)(t,"metadata.name"),l={},u=(0,_.default)(t,'metadata.annotations["kubesphere.io/alias-name"]'),c=(0,_.default)(t,'metadata.annotations["kubesphere.io/workspace-role"]'),s=(0,_.default)(t,'metadata.annotations["kubesphere.io/project-roles"]',[]),f=(0,_.default)(t,'metadata.annotations["kubesphere.io/devops-roles"]',[]),(0,O.default)(l,'metadata.annotations["kubesphere.io/alias-name"]',u),(0,O.default)(l,'metadata.annotations["kubesphere.io/workspace-role"]',c),(0,O.default)(l,'metadata.annotations["kubesphere.io/project-roles"]',JSON.stringify(s)),(0,O.default)(l,'metadata.annotations["kubesphere.io/devops-roles"]',JSON.stringify(f)),d=[request.patch(this.getDetailUrl(w(w({},r),{},{name:n})),l)],p=(0,_.default)(a,'metadata.annotations["kubesphere.io/workspace-role"]'),c===p){e.next=19;break}return e.next=15,this.getWorksapceRoleBinding(n,r);case 15:return m=e.sent,e.next=18,this.deleteWorksapceRoleBinding((0,_.default)(m,"items[0].metadata.name"),r);case 18:d.push(this.addWorksapceRoleBinding([C.default.workspacerolebinding({name:n,role:c})],r));case 19:return h=(0,_.default)(a,'metadata.annotations["kubesphere.io/project-roles"]'),v=(0,_.default)(a,'metadata.annotations["kubesphere.io/devops-roles"]'),y=[].concat((0,o.default)(s),(0,o.default)(f)),g=[].concat((0,o.default)(h),(0,o.default)(v)),(b=this.getUpdateRolebindsRequests(y,g,t)).length>0&&d.push(b),e.abrupt("return",this.submitting(Promise.all(d)));case 26:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return r.apply(this,arguments)})},{key:"getUpdateRolebindsRequests",value:function(e,t,a){var r=this,n=(0,_.default)(a,"metadata.name"),l=[];return e.forEach((function(e){var a=e.role,u=e.namespace,o=e.cluster;t.find((function(e){return e.cluster===o&&e.namespace===u&&e.role===a}))||l.push(r.addRolebindings([C.default.rolebinding({name:n,role:a})],{cluster:o,namespace:u}))})),t.forEach((function(t){var a=t.namespace,n=t.cluster,u=t.role,o=t.name;e.find((function(e){return e.cluster===n&&e.namespace===a&&e.role===u}))||l.push(r.deleteRolebindings(o,{cluster:n,namespace:a}))})),l}},{key:"checkName",value:(a=(0,s.default)(i.default.mark((function e(t){var a,r,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=(0,f.default)(t,["name"]),e.next=3,request.get("".concat(this.getResourceUrl(r)),{name:a});case 3:if(!(n=e.sent).items||!n.items.some((function(e){return(0,_.default)(e,"metadata.generateName")===a}))){e.next=6;break}return e.abrupt("return",{exist:!0});case 6:return e.abrupt("return",{exist:!1});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"addGroupBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.post("".concat(this.apiVersion).concat(this.getPath(t),"/groupbindings"),e)}},{key:"deleteGroupBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.delete("".concat(this.apiVersion).concat(this.getPath(t),"/groupbindings/").concat(e))}},{key:"addWorksapceRoleBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.post("".concat(this.apiVersion).concat(this.getPath(t),"/workspacerolebindings"),e)}},{key:"deleteWorksapceRoleBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.delete("".concat(this.apiVersion).concat(this.getPath(t),"/workspacerolebindings/").concat(e))}},{key:"addRolebindings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.post("".concat(this.apiVersion).concat(this.getPath(t),"/rolebindings"),e)}},{key:"deleteRolebindings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.delete("".concat(this.apiVersion).concat(this.getPath(t),"/rolebindings/").concat(e))}},{key:"getGroupBinding",value:function(e){var t=e.group,a=e.user,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.get("".concat(this.apiVersion).concat(this.getPath(r),"/groupbindings"),{labelSelector:"iam.kubesphere.io/group-ref=".concat(t,",iam.kubesphere.io/user-ref=").concat(a)})}},{key:"getWorksapceRoleBinding",value:(t=(0,s.default)(i.default.mark((function e(t,a){var r,n,l,u,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.cluster,n=a.workspace,l=a.namespace,u=(0,f.default)(a,["cluster","workspace","namespace"]),o=u,t&&(o.labelSelector="iam.kubesphere.io/group-ref=".concat(t)),e.next=5,request.get("".concat(this.apiVersion).concat(this.getPath({cluster:r,workspace:n,namespace:l}),"/workspacerolebindings"),o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"getRoleBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.get("".concat(this.apiVersion).concat(this.getPath(t),"/rolebindings"),{labelSelector:"iam.kubesphere.io/group-ref=".concat(e)})}},{key:"fetchRoleBinding",value:function(e,t){var a=this,r=t.clusters,n=(0,f.default)(t,["clusters"]),l=[];return r.length>0?r.forEach((function(t){l.push(a.getRoleBinding(e,w({cluster:t},n)))})):l.push(this.getRoleBinding(e,w({},n))),Promise.all(l)}},{key:"deleteGroup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.delete("".concat(this.apiVersion).concat(this.getPath(t),"/groups/").concat(e))}},{key:"apiVersion",get:function(){return"kapis/iam.kubesphere.io/v1alpha2"}}]),g}(r(a(277)).default),l=(0,b.default)(n.prototype,"treeData",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,b.default)(n.prototype,"rowTreeData",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,b.default)(n.prototype,"fetchGroup",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchGroup"),n.prototype),(0,b.default)(n.prototype,"create",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,b.default)(n.prototype,"createGroup",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"createGroup"),n.prototype),(0,b.default)(n.prototype,"update",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"update"),n.prototype),(0,b.default)(n.prototype,"checkName",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"checkName"),n.prototype),(0,b.default)(n.prototype,"addGroupBinding",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"addGroupBinding"),n.prototype),(0,b.default)(n.prototype,"deleteGroupBinding",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"deleteGroupBinding"),n.prototype),(0,b.default)(n.prototype,"addWorksapceRoleBinding",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"addWorksapceRoleBinding"),n.prototype),(0,b.default)(n.prototype,"deleteWorksapceRoleBinding",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"deleteWorksapceRoleBinding"),n.prototype),(0,b.default)(n.prototype,"addRolebindings",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"addRolebindings"),n.prototype),(0,b.default)(n.prototype,"deleteRolebindings",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"deleteRolebindings"),n.prototype),(0,b.default)(n.prototype,"getGroupBinding",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"getGroupBinding"),n.prototype),(0,b.default)(n.prototype,"getWorksapceRoleBinding",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"getWorksapceRoleBinding"),n.prototype),(0,b.default)(n.prototype,"getRoleBinding",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"getRoleBinding"),n.prototype),(0,b.default)(n.prototype,"fetchRoleBinding",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchRoleBinding"),n.prototype),(0,b.default)(n.prototype,"deleteGroup",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"deleteGroup"),n.prototype),n);t.default=D},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.getBreadCrumbData=t.flattenTreeData=t.formatTreeData=void 0;var n=r(a(109));t.formatTreeData=function(e,t){return e.map((function(a){var r=a;return r.children=[],r.path=[t,r.group_name],r.parent_id=a.parent_id||"root",e.forEach((function(e){r.group_id===e.parent_id&&(e.parent_name=r.group_name,e.path=[].concat((0,n.default)(r.path),[e.group_name]),r.children=[].concat((0,n.default)(r.children),[e]))})),"root"===r.parent_id?(r.parent_name=t,r):null})).filter((function(e){return e}))};t.flattenTreeData=function(e){var t={};return e.map((function e(a){if(a.group_id&&(t[a.group_id]=a),a.children.length>0)return a.children.map((function(t){return e(t)}))})),t};t.getBreadCrumbData=function(e,t){for(var a=[],r=t[e];r;)a.unshift(r),r=t[r.parent_id];return a}},,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c=n(r(71)),s=n(r(49)),f=n(r(50)),d=n(r(12)),p=n(r(13)),m=n(r(19)),h=n(r(20)),v=n(r(18)),y=n(r(74)),g=n(r(0)),b=n(r(1)),E=r(70),_=r(5),O=n(r(16)),S=n(r(655)),k=n(r(751)),C=n(r(639)),R=n(r(637)),w=r(37),P=r(2410);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var T=(0,C.default)(l=(0,E.observer)((i=o=function(e){(0,m.default)(n,e);var a,r=D(n);function n(){var e,t;(0,d.default)(this,n);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return(e=r.call.apply(r,[this].concat(l))).clusters=new R.default,e.formStepState=e.initStepState(),e.searchInputState=((t=(0,_.observable)({query:[],start:"",end:"",step:"",durationAlias:"",nextParamsKey:"",queryMode:1,cluster:""})).setCluster=(0,_.action)((function(e){t.cluster=e})),t),e.detailState=function(){var e=(0,_.observable)({container:"",host:"",log:"",namespace:"",pod:""});return e.setState=(0,_.action)((function(t){(0,S.default)(e,t)})),e}(),e.formStepConfig=[{Component:P.Home,props:{searchInputState:e.searchInputState}},{Component:P.Search,props:{searchInputState:e.searchInputState,detailState:e.detailState}},{Component:P.Detail,props:{searchInputState:e.searchInputState,detailState:e.detailState,close:e.props.onCancel}}],e}return(0,p.default)(n,[{key:"initStepState",value:function(){var e=(0,_.observable)({step:0});return e.next=(0,_.action)((function(){e.step+=1})),e.pre=(0,_.action)((function(){e.step-=1})),e}},{key:"componentDidMount",value:(a=(0,f.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clusters.fetchList({limit:-1,ascending:!0});case 2:this.searchInputState.setCluster((0,O.default)(this,"clustersOpts[0].value"));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.Content,a=e.Component,r=e.props,n=(0,w.getWebsiteUrl)().url;return a?globals.app.isMultiCluster&&!this.searchInputState.cluster?g.default.createElement(k.default,{className:"no-shadow",icon:"cluster",title:t("NO_AVAILABLE_CLUSTER"),desc:t.html("LOGGING_NOT_ENABLED_DESC",{docUrl:n})}):g.default.createElement(a,(0,c.default)({clustersOpts:this.clustersOpts,formStepState:this.formStepState},r)):null}},{key:"clustersOpts",get:function(){return this.clusters.list.data.filter((function(e){return(0,O.default)(e,"configz.logging")})).map((function(e){var t=e.name;return{value:t,label:t}}))}},{key:"Content",get:function(){return this.formStepConfig[this.formStepState.step]||{}}}]),n}(g.default.Component),o.propTypes={onCancel:b.default.func},u=i,(0,y.default)(u.prototype,"clustersOpts",[_.computed],Object.getOwnPropertyDescriptor(u.prototype,"clustersOpts"),u.prototype),l=u))||l)||l;a.default=T},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s=r(a(49)),f=r(a(50)),d=r(a(91)),p=r(a(12)),m=r(a(13)),h=r(a(135)),v=r(a(19)),y=r(a(20)),g=r(a(18)),b=r(a(74)),E=(r(a(92)),a(5)),_=r(a(655)),O=r(a(16));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var k=(n=function(e){(0,v.default)(r,e);var t,a=S(r);function r(){var e;(0,p.default)(this,r);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=a.call.apply(a,[this].concat(n)),(0,d.default)(e,"startTime",l,(0,h.default)(e)),(0,d.default)(e,"endTime",u,(0,h.default)(e)),(0,d.default)(e,"interval",o,(0,h.default)(e)),(0,d.default)(e,"histograms",i,(0,h.default)(e)),(0,d.default)(e,"logsCount",c,(0,h.default)(e)),e}return(0,m.default)(r,[{key:"fetch",value:(t=(0,f.default)(s.default.mark((function e(){var t,a,r,n=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},a={operation:"histogram",start_time:this.startTime,end_time:this.endTime,interval:this.interval},e.next=4,this.request((0,_.default)(a,t));case 4:r=e.sent,this.histograms=(0,O.default)(r,"histogram.histograms",[])||[],this.logsCount=(0,O.default)(r,"histogram.total",0);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleResult",value:function(e){return e}}]),r}(r(a(1124)).default),l=(0,b.default)(n.prototype,"startTime",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=(0,b.default)(n.prototype,"endTime",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=(0,b.default)(n.prototype,"interval",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"15m"}}),i=(0,b.default)(n.prototype,"histograms",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,b.default)(n.prototype,"logsCount",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,b.default)(n.prototype,"fetch",[E.action],Object.getOwnPropertyDescriptor(n.prototype,"fetch"),n.prototype),n);t.default=k},function(e,t,a){e.exports={title:"_3R9eLWdkRd9o_flAlWvHLx",default:"_2G2DnMhtpeqDEv91UyFh3A",cur:"_1c1g45SkasImY0_alODa4h",custom:"_1zLUgkVtJ5Jr-NdoWiK6aj",selectBox:"_3DT0sgCFRXpA-LxQ7eKvqn",bottom10:"QH6NAxOiq9B6Q6ihrskOG",actions:"_3zCFT6vGh-Uu2uYIZEtuUx"}},,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p,m,h=r(a(56)),v=r(a(49)),y=r(a(21)),g=r(a(50)),b=r(a(91)),E=r(a(12)),_=r(a(13)),O=r(a(135)),S=r(a(19)),k=r(a(20)),C=r(a(18)),R=r(a(74)),w=(r(a(92)),a(5)),P=r(a(655)),D=r(a(16)),T=a(279),N=r(a(1130)),I=a(37);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,C.default)(e);if(t){var n=(0,C.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,k.default)(this,a)}}var M=(n=function(e){(0,S.default)(y,e);var t,a,r,n=j(y);function y(){var e;(0,E.default)(this,y);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),(0,b.default)(e,"size",l,(0,O.default)(e)),(0,b.default)(e,"from",u,(0,O.default)(e)),(0,b.default)(e,"total",o,(0,O.default)(e)),(0,b.default)(e,"records",i,(0,O.default)(e)),(0,b.default)(e,"log_query",c,(0,O.default)(e)),(0,b.default)(e,"startTime",s,(0,O.default)(e)),(0,b.default)(e,"endTime",f,(0,O.default)(e)),(0,b.default)(e,"workspace",d,(0,O.default)(e)),(0,b.default)(e,"pods",p,(0,O.default)(e)),(0,b.default)(e,"containers",m,(0,O.default)(e)),e}return(0,_.default)(y,[{key:"setQuery",value:function(e){this.log_query=e}},{key:"loadMoreLogs",value:(r=(0,g.default)(v.default.mark((function e(){return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fetch(x(x({},this.preParams),{},{from:this.from+this.size}),{loadMore:!0});case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"requestLogs",value:(a=(0,g.default)(v.default.mark((function e(t){return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetch",value:(t=(0,g.default)(v.default.mark((function e(){var t,a,r,n,l,u,o,i=arguments;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=i.length>1&&void 0!==i[1]?i[1]:{},r={operation:"query",start_time:this.startTime,end_time:this.endTime,log_query:this.log_query,pods:this.pods,sort:this.sort,containers:this.containers,from:this.from,size:this.size},n=(0,P.default)(r,t),e.next=6,this.requestLogs(n);case 6:l=e.sent,u=(0,D.default)(l,"query",{}),o=this.stripAnsiRecords(u.records),this.records=a.loadMore?this.records.concat(o):o,this.workspace=l.workspace,this.total=u.total||0,this.from=n.from,this.size=n.size,this.preParams=n;case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"stripAnsiRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return x(x({},e),{},{logStripANSI:(0,N.default)(e.log)})}))}},{key:"exportLinkFactory",value:function(e){var t=e.cluster,a=e.start_time,r=e.end_time,n=(0,h.default)(e,["cluster","start_time","end_time"]),l=(0,I.getClusterUrl)(this.getApiPath(t));return"/".concat(l,"?").concat((0,T.stringify)(x(x({sort:"asc"},n),{},{start_time:Math.floor(a/1e3),end_time:Math.floor(r/1e3),operation:"export"})))}},{key:"haveMore",get:function(){return this.total>this.from+this.size}}]),y}(r(a(1124)).default),l=(0,R.default)(n.prototype,"size",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),u=(0,R.default)(n.prototype,"from",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=(0,R.default)(n.prototype,"total",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i=(0,R.default)(n.prototype,"records",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,R.default)(n.prototype,"log_query",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=(0,R.default)(n.prototype,"startTime",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=(0,R.default)(n.prototype,"endTime",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=(0,R.default)(n.prototype,"workspace",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=(0,R.default)(n.prototype,"pods",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=(0,R.default)(n.prototype,"containers",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,R.default)(n.prototype,"setQuery",[w.action],Object.getOwnPropertyDescriptor(n.prototype,"setQuery"),n.prototype),(0,R.default)(n.prototype,"haveMore",[w.computed],Object.getOwnPropertyDescriptor(n.prototype,"haveMore"),n.prototype),(0,R.default)(n.prototype,"loadMoreLogs",[w.action],Object.getOwnPropertyDescriptor(n.prototype,"loadMoreLogs"),n.prototype),(0,R.default)(n.prototype,"fetch",[w.action],Object.getOwnPropertyDescriptor(n.prototype,"fetch"),n.prototype),n);t.default=M},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.mark=o,t.markAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;if(!t.length)return[e];return t.reduce((function(e,t){return e.reduce((function(e,r){return e.concat(a(r,t))}),[])}),[e])},t.esMark=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hightLighted";if(!(0,l.default)(e))return e;var r=t.match(/\w+|[\u4e00-\u9fa5]/g)||[],n=r.reduce((function(e,t){var a=e.slice(-1),r=i.test(t),n=i.test(a);return"".concat(e,"[^\\w\\u4e00-\\u9fa5]{").concat(r||n?0:1,",}").concat(t)}),"");if(!n)return[e];var u=new RegExp(n,"ig");return c(e,u,a)},t.markStrAsArray=c;var n=r(a(21)),l=r(a(138)),u=/[|\\{}()[\]^$+*?.]/g;function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hightLighted";if(!(0,l.default)(e))return e;if(!t)return[e];var r=t.replace(u,"\\$&"),n=new RegExp(r,"ig");return c(e,n,a)}var i=/[\u4e00-\u9fa5]/;function c(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hightLighted",r=[e],l=0;return e.replace(t,(function(e,t){var u=r.length-1,o=r[u],i=t-l,c=o.slice(0,i),s=o.slice(i+e.length);r[u]=c,r.push((0,n.default)({},a,e),s),l+=t+e.length})),r}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o=n(r(71)),i=n(r(49)),c=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(74)),v=n(r(0)),y=r(70),g=r(5),b=n(r(16)),E=n(r(751)),_=n(r(639)),O=n(r(637)),S=r(37),k=r(2492);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R=(0,_.default)(l=(0,y.observer)((u=function(e){(0,d.default)(n,e);var a,r=C(n);function n(){var e,t;(0,s.default)(this,n);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return(e=r.call.apply(r,[this].concat(l))).clusters=new O.default,e.formStepState=e.initStepState(),e.searchInputState=((t=(0,g.observable)({query:[],start:"",end:"",step:"",durationAlias:"",nextParamsKey:"",queryMode:1,cluster:""})).setCluster=(0,g.action)((function(e){t.cluster=e})),t),e.formStepConfig=[{Component:k.Home,props:{searchInputState:e.searchInputState}},{Component:k.Detail,props:{searchInputState:e.searchInputState}}],e}return(0,f.default)(n,[{key:"initStepState",value:function(){var e=(0,g.observable)({step:0});return e.next=(0,g.action)((function(){e.step+=1})),e.pre=(0,g.action)((function(){e.step-=1})),e}},{key:"componentDidMount",value:(a=(0,c.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clusters.fetchList({limit:-1,ascending:!0});case 2:this.searchInputState.setCluster((0,b.default)(this,"clustersOpts[0].value",""));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.Content,a=e.Component,r=e.props,n=(0,S.getWebsiteUrl)().url;if(a)return globals.app.isMultiCluster&&!this.searchInputState.cluster?v.default.createElement(E.default,{className:"no-shadow",icon:"cluster",title:t("NO_AVAILABLE_CLUSTER"),desc:t.html("EVENT_NOT_ENABLED_DESC",{docUrl:n})}):v.default.createElement(a,(0,o.default)({clustersOpts:this.clustersOpts,formStepState:this.formStepState},r))}},{key:"clustersOpts",get:function(){return this.clusters.list.data.filter((function(e){return(0,b.default)(e,"configz.events")})).map((function(e){var t=e.name;return{value:t,label:t}}))}},{key:"Content",get:function(){return this.formStepConfig[this.formStepState.step]||{}}}]),n}(v.default.Component),(0,h.default)(u.prototype,"clustersOpts",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"clustersOpts"),u.prototype),l=u))||l)||l;a.default=R},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p,m,h,v=r(a(21)),y=r(a(49)),g=r(a(56)),b=r(a(50)),E=r(a(91)),_=r(a(12)),O=r(a(13)),S=r(a(74)),k=(r(a(92)),a(5)),C=r(a(655)),R=r(a(16)),w=a(37),P=r(a(137)),D=r(a(1130));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=(n=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_.default)(this,e),(0,E.default)(this,"isLoading",l,this),(0,E.default)(this,"histogramTodayData",u,this),(0,E.default)(this,"histogramData",o,this),(0,E.default)(this,"interval",i,this),(0,E.default)(this,"data",c,this),(0,E.default)(this,"from",s,this),(0,E.default)(this,"total",f,this),(0,E.default)(this,"size",d,this),(0,E.default)(this,"namespaces",p,this),(0,E.default)(this,"logsCount",m,this),(0,E.default)(this,"changeTimeRang",h,this),Object.getOwnPropertyNames(a).forEach((function(e){t[e]=a[e]}))}var t,a,r;return(0,O.default)(e,[{key:"fetchUrl",value:function(e){return e?"kapis/clusters/".concat(e,"/tenant.kubesphere.io/v1alpha2/events"):"kapis/tenant.kubesphere.io/v1alpha2/events"}},{key:"fetchTodayHistogram",value:(r=(0,b.default)(y.default.mark((function e(){var t,a,r,n,l,u,o,i=arguments;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.cluster,r=(0,g.default)(t,["cluster"]),this.isLoading=!0,n={operation:"statistics",start_time:Math.ceil((0,P.default)().startOf("day").valueOf()/1e3),end_time:Math.ceil(Date.now()/1e3),interval:this.interval},e.next=5,(0,w.to)(request.get(this.fetchUrl(a),(0,C.default)(n,r)));case 5:l=e.sent,u=l.statistics,o=void 0===u?{}:u,this.isLoading=!1,this.histogramTodayData=o;case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchHistogram",value:(a=(0,b.default)(y.default.mark((function e(){var t,a,r,n,l,u,o,i=arguments;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.cluster,r=(0,g.default)(t,["cluster"]),this.isLoading=!0,n={operation:"histogram",start_time:Math.ceil(Date.now()/1e3)-43200,end_time:Math.ceil(Date.now()/1e3),interval:this.interval},e.next=5,(0,w.to)(request.get(this.fetchUrl(a),(0,C.default)(n,r)));case 5:l=e.sent,u=l.histogram,o=void 0===u?{}:u,this.logsCount=o.total||0,this.isLoading=!1,this.histogramData=o;case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchQuery",value:(t=(0,b.default)(y.default.mark((function e(){var t,a,r,n,l,u,o,i,c,s=arguments;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.cluster,r=(0,g.default)(t,["cluster"]),n=s.length>1&&void 0!==s[1]?s[1]:{},this.isLoading=!0,l={operation:"query",from:this.from,size:this.size},u=(0,C.default)(l,r),e.next=7,(0,w.to)(request.get(this.fetchUrl(a),u));case 7:o=e.sent,i=(0,R.default)(o,"query",{}),c=this.stripAnsiRecords(i.records||[]),this.data=n.loadMore?this.data.concat(c):c,this.total=i.total||0,this.isLoading=!1,this.from=u.from,this.size=u.size,this.preParams=u;case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"stripAnsiRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return N(N({},e),{},{logStripANSI:(0,D.default)(e.log)})}))}}]),e}(),l=(0,S.default)(n.prototype,"isLoading",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=(0,S.default)(n.prototype,"histogramTodayData",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,S.default)(n.prototype,"histogramData",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=(0,S.default)(n.prototype,"interval",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"30m"}}),c=(0,S.default)(n.prototype,"data",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,S.default)(n.prototype,"from",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=(0,S.default)(n.prototype,"total",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=(0,S.default)(n.prototype,"size",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),p=(0,S.default)(n.prototype,"namespaces",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=(0,S.default)(n.prototype,"logsCount",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=(0,S.default)(n.prototype,"changeTimeRang",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.time_rang=t,e.fetchQuery()}}}),(0,S.default)(n.prototype,"fetchTodayHistogram",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchTodayHistogram"),n.prototype),(0,S.default)(n.prototype,"fetchHistogram",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchHistogram"),n.prototype),(0,S.default)(n.prototype,"fetchQuery",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchQuery"),n.prototype),n);t.default=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.toArray=function e(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=Object.keys(t),l=a+1,i=0,c=n.length;i<c;i++){var s=n[i];if("object"===(0,o.default)(t[s])&&null!=t[s]){var f,d=t[s],p=e(d,l);r.push((f={},(0,u.default)(f,s,p),(0,u.default)(f,"collapsed",!1),(0,u.default)(f,"level",a),f))}else{var m;r.push((m={},(0,u.default)(m,s,t[s]),(0,u.default)(m,"level",a),m))}}return r},a.supportQueryParams=a.getSecond=a.queryModeOptions=a.dropDownItems=a.queryKeyMapping=void 0;var l=n(r(136)),u=n(r(21)),o=n(r(192));a.queryKeyMapping={workspace_filter:"workspace_search",involved_object_namespace_filter:"involved_object_namespace_search",involved_object_kind_filter:"involved_object_kind_filter",involved_object_name_filter:"involved_object_name_search",reason_filter:"reason_search",message_search:"message_search",type_filter:"type_filter"};var i={message_search:{icon:"magnifier",text:t("MESSAGE")},workspace_filter:{icon:"appcenter",text:t("WORKSPACE")},involved_object_namespace_filter:{icon:"project",text:t("PROJECT")},involved_object_kind_filter:{icon:"vnc",text:t("RESOURCE_TYPE")},involved_object_name_filter:{icon:"strategy-group",text:t("RESOURCE_NAME")},reason_filter:{icon:"resource",text:t("REASON")},type_filter:{icon:"cardview",text:t("CATEGORY")}};a.dropDownItems=i;var c=[1,0].map((function(e){return{value:e,label:e?t("EXACT_QUERY"):t("FUZZY_QUERY")}}));a.queryModeOptions=c;a.getSecond=function(e){var t=e.match(/(\d+)(\w+)/),a=(0,l.default)(t,3),r=a[1],n=void 0===r?0:r,u=a[2];return n*{s:1,m:60,h:3600,d:86400}[void 0===u?"s":u]};var s=[{icon:"magnifier",title:t("SEARCH_BY_MESSAGE"),tips:t("RESOURCE_EVENT_MESSAGE_TIP"),key:"message_search"},{icon:"appcenter",title:t("SEARCH_BY_WORKSPACE"),tips:t("RESOURCE_EVENT_WORKSPACE_TIP"),key:"workspace_filter"},{icon:"project",title:t("SEARCH_BY_PROJECT"),tips:t("RESOURCE_EVENT_PROJECT_TIP"),key:"involved_object_namespace_filter"},{icon:"vnc",title:t("SEARCH_BY_RESOURCE_TYPE"),tips:t("RESOURCE_EVENT_RESOURCE_TYPE_TIP"),key:"involved_object_kind_filter"},{icon:"strategy-group",title:t("SEARCH_BY_RESOURCE_NAME"),tips:t("RESOURCE_EVENT_RESOURCE_NAME_TIP"),key:"involved_object_name_filter"},{icon:"resource",title:t("SEARCH_BY_REASON"),tips:t("RESOURCE_EVENT_REASON_TIP"),key:"reason_filter"},{icon:"cardview",title:t("SEARCH_BY_CATEGORY"),tips:t("RESOURCE_EVENT_CATEGORY_TIP"),key:"type_filter"}];a.supportQueryParams=s},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o=n(r(71)),i=n(r(49)),c=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(74)),v=n(r(0)),y=r(70),g=r(5),b=n(r(16)),E=n(r(751)),_=n(r(639)),O=n(r(637)),S=r(37),k=r(2501);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R=(0,_.default)(l=(0,y.observer)((u=function(e){(0,d.default)(n,e);var a,r=C(n);function n(){var e,t;(0,s.default)(this,n);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return(e=r.call.apply(r,[this].concat(l))).clusters=new O.default,e.formStepState=e.initStepState(),e.searchInputState=((t=(0,g.observable)({query:[],start:"",end:"",step:"",durationAlias:"",nextParamsKey:"",queryMode:1,cluster:""})).setCluster=(0,g.action)((function(e){t.cluster=e})),t),e.formStepConfig=[{Component:k.Home,props:{searchInputState:e.searchInputState}},{Component:k.Detail,props:{searchInputState:e.searchInputState}}],e}return(0,f.default)(n,[{key:"initStepState",value:function(){var e=(0,g.observable)({step:0});return e.next=(0,g.action)((function(){e.step+=1})),e.pre=(0,g.action)((function(){e.step-=1})),e}},{key:"componentDidMount",value:(a=(0,c.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clusters.fetchList({limit:-1,ascending:!0});case 2:this.searchInputState.setCluster((0,b.default)(this,"clustersOpts[0].value",""));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.Content,a=e.Component,r=e.props,n=(0,S.getWebsiteUrl)().url;if(a)return globals.app.isMultiCluster&&!this.searchInputState.cluster?v.default.createElement(E.default,{className:"no-shadow",icon:"cluster",title:t("NO_AVAILABLE_CLUSTER"),desc:t.html("AUDITING_NOT_ENABLED_DESC",{docUrl:n})}):v.default.createElement(a,(0,o.default)({clustersOpts:this.clustersOpts,formStepState:this.formStepState},r))}},{key:"clustersOpts",get:function(){return this.clusters.list.data.filter((function(e){return(0,b.default)(e,"configz.auditing")})).map((function(e){var t=e.name;return{value:t,label:t}}))}},{key:"Content",get:function(){return this.formStepConfig[this.formStepState.step]||{}}}]),n}(v.default.Component),(0,h.default)(u.prototype,"clustersOpts",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"clustersOpts"),u.prototype),l=u))||l)||l;a.default=R},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p,m,h,v=r(a(21)),y=r(a(49)),g=r(a(56)),b=r(a(50)),E=r(a(91)),_=r(a(12)),O=r(a(13)),S=r(a(74)),k=(r(a(92)),a(5)),C=r(a(655)),R=r(a(16)),w=a(37),P=r(a(137)),D=r(a(1130));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=(n=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_.default)(this,e),(0,E.default)(this,"isLoading",l,this),(0,E.default)(this,"histogramTodayData",u,this),(0,E.default)(this,"histogramData",o,this),(0,E.default)(this,"interval",i,this),(0,E.default)(this,"data",c,this),(0,E.default)(this,"from",s,this),(0,E.default)(this,"total",f,this),(0,E.default)(this,"size",d,this),(0,E.default)(this,"namespaces",p,this),(0,E.default)(this,"logsCount",m,this),(0,E.default)(this,"changeTimeRang",h,this),Object.getOwnPropertyNames(a).forEach((function(e){t[e]=a[e]}))}var t,a,r;return(0,O.default)(e,[{key:"fetchUrl",value:function(e){return e?"kapis/clusters/".concat(e,"/tenant.kubesphere.io/v1alpha2/auditing/events"):"kapis/tenant.kubesphere.io/v1alpha2/auditing/events"}},{key:"fetchTodayHistogram",value:(r=(0,b.default)(y.default.mark((function e(){var t,a,r,n,l,u,o,i=arguments;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.cluster,r=(0,g.default)(t,["cluster"]),this.isLoading=!0,n={operation:"statistics",start_time:Math.ceil((0,P.default)().startOf("day").valueOf()/1e3),end_time:Math.ceil(Date.now()/1e3),interval:this.interval},e.next=5,(0,w.to)(request.get(this.fetchUrl(a),(0,C.default)(n,r)));case 5:l=e.sent,u=l.statistics,o=void 0===u?{}:u,this.isLoading=!1,this.histogramTodayData=o;case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchHistogram",value:(a=(0,b.default)(y.default.mark((function e(){var t,a,r,n,l,u,o,i=arguments;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.cluster,r=(0,g.default)(t,["cluster"]),this.isLoading=!0,n={operation:"histogram",start_time:Math.ceil(Date.now()/1e3)-43200,end_time:Math.ceil(Date.now()/1e3),interval:this.interval},e.next=5,(0,w.to)(request.get(this.fetchUrl(a),(0,C.default)(n,r)));case 5:l=e.sent,u=l.histogram,o=void 0===u?{}:u,this.logsCount=o.total||0,this.isLoading=!1,this.histogramData=o;case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchQuery",value:(t=(0,b.default)(y.default.mark((function e(){var t,a,r,n,l,u,o,i,c,s=arguments;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.cluster,r=(0,g.default)(t,["cluster"]),n=s.length>1&&void 0!==s[1]?s[1]:{},this.isLoading=!0,l={operation:"query",from:this.from,size:this.size},u=(0,C.default)(l,r),e.next=7,(0,w.to)(request.get(this.fetchUrl(a),u));case 7:o=e.sent,i=(0,R.default)(o,"query",{}),c=this.stripAnsiRecords(i.records||[]),this.data=n.loadMore?this.data.concat(c):c,this.total=i.total||0,this.isLoading=!1,this.from=u.from,this.size=u.size,this.preParams=u;case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"stripAnsiRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return N(N({},e),{},{logStripANSI:(0,D.default)(e.log)})}))}}]),e}(),l=(0,S.default)(n.prototype,"isLoading",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=(0,S.default)(n.prototype,"histogramTodayData",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,S.default)(n.prototype,"histogramData",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=(0,S.default)(n.prototype,"interval",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"30m"}}),c=(0,S.default)(n.prototype,"data",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,S.default)(n.prototype,"from",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=(0,S.default)(n.prototype,"total",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=(0,S.default)(n.prototype,"size",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),p=(0,S.default)(n.prototype,"namespaces",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=(0,S.default)(n.prototype,"logsCount",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=(0,S.default)(n.prototype,"changeTimeRang",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.time_rang=t,e.fetchQuery()}}}),(0,S.default)(n.prototype,"fetchTodayHistogram",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchTodayHistogram"),n.prototype),(0,S.default)(n.prototype,"fetchHistogram",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchHistogram"),n.prototype),(0,S.default)(n.prototype,"fetchQuery",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchQuery"),n.prototype),n);t.default=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.toArray=function e(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=Object.keys(t),l=a+1,i=0,c=n.length;i<c;i++){var s=n[i];if("object"===(0,o.default)(t[s])&&null!=t[s]){var f,d=t[s],p=e(d,l);r.push((f={},(0,u.default)(f,s,p),(0,u.default)(f,"collapsed",!1),(0,u.default)(f,"level",a),f))}else{var m;r.push((m={},(0,u.default)(m,s,t[s]),(0,u.default)(m,"level",a),m))}}return r},a.supportQueryParams=a.getSecond=a.queryModeOptions=a.dropDownItems=a.queryKeyMapping=a.httpcodes=void 0;var l=n(r(136)),u=n(r(21)),o=n(r(192));a.httpcodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested range not satisfiable",417:"Expectation Failed",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not supported"};a.queryKeyMapping={workspace_filter:"workspace_search",objectref_namespace_filter:"objectref_namespace_search",objectref_name_filter:"objectref_name_search",objectref_resource_filter:"objectref_resource_filter",verb_filter:"verb_filter",response_code_filter:"response_code_filter",user_filter:"user_search",source_ip_search:"source_ip_search"};var i={workspace_filter:{icon:"appcenter",text:t("WORKSPACE")},objectref_namespace_filter:{icon:"project",text:t("PROJECT")},objectref_resource_filter:{icon:"resource",text:t("RESOURCE_TYPE")},objectref_name_filter:{icon:"strategy-group",text:t("RESOURCE_NAME")},verb_filter:{icon:"wrench",text:t("VERB")},response_code_filter:{icon:"logout",text:t("STATUS_CODE")},user_filter:{icon:"human",text:t("OPERATOR")},source_ip_search:{icon:"ip",text:t("SOURCE_IP_ADDRESS")}};a.dropDownItems=i;var c=[1,0].map((function(e){return{value:e,label:e?t("EXACT_QUERY"):t("FUZZY_QUERY")}}));a.queryModeOptions=c;a.getSecond=function(e){var t=e.match(/(\d+)(\w+)/),a=(0,l.default)(t,3),r=a[1],n=void 0===r?0:r,u=a[2];return n*{s:1,m:60,h:3600,d:86400}[void 0===u?"s":u]};var s=[{icon:"appcenter",title:t("SEARCH_BY_WORKSPACE"),tips:t("AUDIT_LOG_WORKSPACE_TIP"),key:"workspace_filter"},{icon:"project",title:t("SEARCH_BY_PROJECT"),tips:t("AUDIT_LOG_PROJECT_TIP"),key:"objectref_namespace_filter"},{icon:"resource",title:t("SEARCH_BY_RESOURCE_TYPE"),tips:t("AUDIT_LOG_RESOURCE_TYPE_TIP"),key:"objectref_resource_filter"},{icon:"strategy-group",title:t("SEARCH_BY_RESOURCE_NAME"),tips:t("AUDIT_LOG_RESOURCE_NAME_TIP"),key:"objectref_name_filter"},{icon:"wrench",title:t("SEARCH_BY_VERB"),tips:t("AUDIT_LOG_VERB_TIP"),key:"verb_filter"},{icon:"logout",title:t("SEARCH_BY_STATUS_CODE"),tips:t("AUDIT_LOG_STATUS_CODE_TIP"),key:"response_code_filter"},{icon:"human",title:t("SEARCH_BY_OPERATOR"),tips:t("AUDIT_LOG_OPERATOR_TIP"),key:"user_filter"},{icon:"ip",title:t("SEARCH_BY_SOURCE_IP_ADDRESS"),tips:t("AUDIT_LOG_SOURCE_IP_ADDRESS_TIP"),key:"source_ip_search"}];a.supportQueryParams=s},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(70),p=n(r(3)),m=r(821),h=n(r(639)),v=n(r(660)),y=r(25),g=n(r(795)),b=n(r(16)),E=n(r(640)),_=n(r(2510));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=(0,h.default)(l=(0,d.observer)(l=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=new E.default,e.handleDownload=function(){var t=e.store.kubeconfig,a=new Blob([t],{type:"text/plain;charset=utf-8"});(0,m.saveAs)(a,"kubeconfig.yaml")},e}return(0,o.default)(r,[{key:"componentDidMount",value:function(){var e=(0,b.default)(this.props,"match.params",{});this.store.fetchKubeConfig(e)}},{key:"render",value:function(){return f.default.createElement(v.default,{wrapperClassName:_.default.kubectl,localStorageKey:"kubectl-config",article:this.renderConfig(),tips:this.renderTips(),onToggle:this.onTipsToggle})}},{key:"renderConfig",value:function(){return f.default.createElement("div",{className:(0,p.default)(_.default.pane,_.default.terminal)},f.default.createElement("div",{className:_.default.download,onClick:this.handleDownload},f.default.createElement(y.Icon,{name:"download",size:20,type:"light"}),t("DOWNLOAD")),f.default.createElement(g.default,{value:this.store.kubeconfig,options:{readOnly:!0}}))}},{key:"renderTips",value:function(){return f.default.createElement("div",{className:(0,p.default)("markdown-body",_.default.tipWrapper)},t.html("KUBECONFIG_TIP"))}}]),r}(f.default.Component))||l)||l;a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s=n(r(71)),f=n(r(91)),d=n(r(12)),p=n(r(13)),m=n(r(135)),h=n(r(19)),v=n(r(20)),y=n(r(18)),g=n(r(74)),b=(n(r(92)),n(r(0))),E=r(70),_=r(5),O=n(r(32)),S=n(r(73)),k=n(r(209)),C=n(r(751)),R=r(25),w=n(r(2511)),P=n(r(2512)),D=n(r(2514)),T=r(834);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var I=(0,E.observer)((u=function(e){(0,h.default)(r,e);var a=N(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return e=a.call.apply(a,[this].concat(l)),(0,f.default)(e,"type",o,(0,m.default)(e)),(0,f.default)(e,"nav",i,(0,m.default)(e)),e.renderEmpty=function(){return b.default.createElement("div",{className:w.default.empty},b.default.createElement(C.default,{className:w.default.empty__Container,title:t("USER_DASHBOARD_EMPTY_TITLE"),desc:t("USER_DASHBOARD_EMPTY_DESC")}))},e.contentConfig=function(){return{home:{Component:P.default,props:{handleSelected:e.handleSelected}},detail:{Component:D.default,props:{handleBack:e.handleBack}},empty:{Component:e.renderEmpty}}},(0,f.default)(e,"handleSelected",c,(0,m.default)(e)),e.handleBack=function(){e.isWorkspace&&e.isCluster&&(e.type=void 0)},e.renderContent=function(){var t=e.contentConfig();if(!e.type){var a=T.CARD_CONFIG;return e.isCluster&&!e.isWorkspace?(a=T.CARD_CONFIG.filter((function(e){return"cluster"===e.type})),e.type="cluster",t.detail):e.isWorkspace&&!e.isCluster?(0,O.default)(globals.user.workspaces)?t.empty:(a=T.CARD_CONFIG.filter((function(e){return"workspaces"===e.type})),e.type="workspaces",t.detail):(globals.app.enableAppStore||(a=T.CARD_CONFIG.filter((function(e){return"openpitrix"!==e.type}))),(0,S.default)(t,"home.props.cardConfigRule",a),t.home)}return t.detail},e.renderTitle=function(){return b.default.createElement("div",null,b.default.createElement(R.Icon,{size:20,name:"wallet",style:{marginRight:7}}),b.default.createElement("span",{style:{fontSize:12,fontWeight:600,lineHeight:"20px",height:"20px"}},t("RESOURCE_CONSUMPTION_STATISTICS")))},e}return(0,p.default)(r,[{key:"render",value:function(){var e=this.renderContent(),t=e.Component,a=e.props,r=this.props,n=r.description,l=r.onCancel;return b.default.createElement(k.default,{visible:!0,fullScreen:!0,hideFooter:!0,title:this.renderTitle(),description:n,onCancel:l,className:w.default.billContainer,headerClassName:w.default.billModalHeader,bodyClassName:w.default.billContent},b.default.createElement("div",{className:w.default.bill},b.default.createElement(t,(0,s.default)({type:this.type},a))))}},{key:"isWorkspace",get:function(){return globals.app.hasPermission({module:"workspaces",action:"view"})||!(0,O.default)(globals.user.workspaces)}},{key:"isCluster",get:function(){return globals.app.hasPermission({module:"clusters",action:"view"})}}]),r}(b.default.Component),o=(0,g.default)(u.prototype,"type",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=(0,g.default)(u.prototype,"nav",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,g.default)(u.prototype,"handleSelected",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.type=t}}}),l=u))||l;a.default=I},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(49)),c=r(a(50)),s=r(a(21)),f=r(a(56)),d=r(a(91)),p=r(a(12)),m=r(a(13)),h=r(a(135)),v=r(a(19)),y=r(a(20)),g=r(a(18)),b=r(a(74)),E=(r(a(92)),r(a(23))),_=r(a(32)),O=r(a(16)),S=r(a(655)),k=a(5),C=a(1022),R=a(834),w=a(58),P=a(863);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var I=(n=function(e){(0,v.default)(r,e);var t,a=N(r);function r(){var e;(0,p.default)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).module="meter",(0,d.default)(e,"isLoading",l,(0,h.default)(e)),(0,d.default)(e,"data",u,(0,h.default)(e)),e.tenantUrl=function(e){var t=e.cluster;return globals.app.isMultiCluster&&t?"kapis/clusters/".concat(t,"/tenant.kubesphere.io/v1alpha2"):"kapis/tenant.kubesphere.io/v1alpha2"},e.getApi=function(t){var a=t.module,r=(0,f.default)(t,["module"]);return"".concat(e.apiVersion).concat(e.getPaths(T({module:a},r)))},e.getTenantApi=function(t){t.module;var a=(0,f.default)(t,["module"]);return"".concat(e.tenantUrl({cluster:a.cluster}),"/metering")},e.getExportParams=function(e){e.cluster;var t=e.workspaces,a=e.namespaces,r=(e.applications,e.services,e.deployments),n=e.statefulsets,l=e.daemonsets,u=e.pods,o=e.nodes,i=e.isTime,c=e.start,s=e.end,d=e.step,p=e.module,m=e.meters,h=e.resources,v=(0,f.default)(e,["cluster","workspaces","namespaces","applications","services","deployments","statefulsets","daemonsets","pods","nodes","isTime","start","end","step","module","meters","resources"]),y=(0,S.default)(T({},v),(0,C.handleLevelParams)({module:p}),(0,C.getTimeParams)({isTime:i,start:c,end:s,step:d}),(0,C.getMetricsFilters)({module:p,meters:m}),(0,C.getResourceFilters)({module:p,resources:h}),(0,C.handleWorkloadToKind)({deployments:r,statefulsets:n,daemonsets:l}),(0,C.handleNodeParams)({nodes:o,pods:u,resources:h}));return v.operation||delete y.resources_filter,y.namespace=a,y.workspace=t,y},e.getParams=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.start,r=t.end,n=t.step,l=void 0===n?"1h":n,u=t.resources,o=void 0===u?[]:u,i=t.meters,c=void 0===i?[]:i,s=t.module,d=t.isTime,p=void 0!==d&&d,m=t.deployments,h=t.statefulsets,v=t.daemonsets,y=t.nodes,g=t.pods,b=(0,f.default)(t,["start","end","step","resources","meters","module","isTime","deployments","statefulsets","daemonsets","nodes","pods"]),E=(0,S.default)(T({},b),(0,C.getTimeParams)({start:a,end:r,step:l,isTime:p}),(0,C.getMetricsFilters)({module:s,meters:c}),(0,C.getResourceFilters)({module:s,resources:o}),(0,C.handleWorkloadToKind)({deployments:m,statefulsets:h,daemonsets:v}),(0,C.handleNodeParams)({nodes:y,pods:g,resources:o,module:s}));return e.setParams(E)},e.setParams=function(e){return e},e.getResource=function(e){var t=e.cluster,a=e.workspaces,r=e.namespaces,n=e.applications,l=e.openpitrixs,u=e.services,o=e.deployments,i=e.statefulsets,c=e.daemonsets,s=e.nodes,f=e.pods,d={cluster:t,namespaces:r,workspaces:a};return f?T({pods:f,nodes:s||void 0},d):s?T({nodes:s},d):o||i||c?T({deployments:o,statefulsets:i,daemonsets:c},d):u?T({services:u},d):l?T({openpitrixs:l},d):n?T({applications:n},d):d},e.setOneSourceAllMeterByType=function(e,t){var a=e.data,r=e.metric_name,n=(0,O.default)(a,"result.0",{});return T({type:r,module:R.RESOURCES_METER_TYPE[t]},n)},e.getOneSourceAllMeterData=function(e,t,a){return t.start&&(e.start=1e3*t.start),t.end&&(e.end=1e3*t.end),t.step&&(e.step=(0,P.getTimeStr)(t.step)),e.values=(0,C.fillEmptyMeterValue)({start:t.start,end:t.end,step:t.step.slice(0,-1)},e.values),(0,C.handleValueByUnit)(e,a)},e.handleAllMeterData=function(t,a,r){var n=t.results.map((function(t){if(t.data.result){var n=e.setOneSourceAllMeterByType(t,r);return e.getOneSourceAllMeterData(n,a,r)}return!1}));return(0,C.handleSortBySourceType)(n)},e.handleOneMeterData=function(e,t){var a=e.results[0],r=(0,O.default)(a,"data.result",[]),n=(0,O.default)(a,"metric_name",""),l=[];return(0,_.default)(r)||(l=r.map((function(e){return e=T({type:n,module:R.RESOURCES_METER_TYPE[t]},e),(0,C.handleValueByUnit)(e,t)}))),l},(0,d.default)(e,"fetchPrice",o,(0,h.default)(e)),e}return(0,m.default)(r,[{key:"getPaths",value:function(e){var t=e.cluster,a=e.workspaces,r=e.namespaces,n=e.applications,l=e.services,u=e.deployments,o=e.statefulsets,i=e.openpitrixs,c=e.daemonsets,s=e.pods,f=e.nodes,d=e.module,p="";return t&&(p+="cluster"===d?"/cluster":""),a&&(p+="/workspaces/".concat(a)),(r||"namespaces"===d)&&(p+="namespaces"===d?"/namespaces":"/namespaces/".concat(r)),n&&(p+="/applications"),i&&!l&&(p+="/openpitrixs"),l&&(p+="/services"),!s&&(u||o||c)&&(p+="/workloads"),f&&!s&&(p+="/nodes"),f&&s&&(p+="/nodes/".concat(f)),s&&(p+="/pods"),p}},{key:"fetchMeter",value:(t=(0,c.default)(i.default.mark((function e(){var t,a,r,n,l,u,o,c,s,d,p,m,h,v,y,g,b,O,S,k,R,w=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},a=t.cluster,r=t.workspaces,n=t.namespaces,l=t.openpitrixs,u=t.applications,o=t.services,c=t.deployments,s=t.statefulsets,d=t.daemonsets,p=t.pods,m=t.nodes,h=(0,f.default)(t,["cluster","workspaces","namespaces","openpitrixs","applications","services","deployments","statefulsets","daemonsets","pods","nodes"]),this.isLoading=!0,v="",y={},this.cluster=a,g=this.getResource({cluster:a,workspaces:r,namespaces:n,openpitrixs:l,applications:u,services:o,deployments:c,statefulsets:s,daemonsets:d,pods:p,nodes:m}),y=h.operation?this.getExportParams(T(T({},g),h)):this.getParams(T({deployments:c,statefulsets:s,daemonsets:d,pods:p,nodes:m},h)),"namespaces"===h.module?(v=this.getTenantApi(T({module:h.module},g)),b=g.workspaces&&g.namespaces?{workspaces:g.workspaces}:{},y=T(T(T({},y),b),(0,C.handleLevelParams)({module:h.module}))):v=this.getApi(T({module:h.module},g)),"openpitrixs"===h.module&&(y.cluster=this.cluster),e.next=11,request.get(v,y,{},(function(){return[]}));case 11:if(O=e.sent,this.isLoading=!1,!h.operation){e.next=15;break}return e.abrupt("return",O);case 15:if((0,_.default)(O)||!(0,E.default)(O.results)){e.next=24;break}if(S=h.module,"all"!==h.meters){e.next=21;break}return k=this.handleAllMeterData(O,y,S),this.data=k,e.abrupt("return",k);case 21:return R=this.handleOneMeterData(O,S),this.data=R,e.abrupt("return",R);case 24:return this.data=[],e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return globals.app.isMultiCluster&&this.cluster?"kapis/clusters/".concat(this.cluster,"/metering.kubesphere.io/v1alpha1"):"kapis/metering.kubesphere.io/v1alpha1"}}]),r}(r(a(277)).default),l=(0,b.default)(n.prototype,"isLoading",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=(0,b.default)(n.prototype,"data",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,b.default)(n.prototype,"fetchMeter",[k.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchMeter"),n.prototype),o=(0,b.default)(n.prototype,"fetchPrice",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,c.default)(i.default.mark((function t(a){var r,n,l,u;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n="".concat(e.tenantUrl({cluster:r}),"/metering/price"),t.next=4,request.get(n,{},{},(function(){}));case 4:if(!(l=t.sent)||(0,_.default)(l)){t.next=13;break}if(!Object.values(l).some((function(e){return"number"==typeof e&&e<0}))&&""!==l.currency){t.next=9;break}return t.abrupt("return",{cluster:r});case 9:return u={},Object.keys(l).forEach((function(e){!["currency","retention_day"].includes(e)&&l[e]>0&&(u[R.FEE_CONFIG[e]]=l[e])})),(0,_.default)(u)||(u.currency=l.currency,u.retention_day=(0,O.default)(l,"retention_day","7d"),u.cluster=r||(0,O.default)(w.DEFAULT_CLUSTER,"metadata.name")),t.abrupt("return",u);case 13:return t.abrupt("return",{cluster:r});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),n);t.default=I},,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(49)),i=r(a(50)),c=r(a(91)),s=r(a(12)),f=r(a(13)),d=r(a(135)),p=r(a(19)),m=r(a(20)),h=r(a(18)),v=r(a(74)),y=(r(a(92)),a(5)),g=a(37),b=a(280),E=r(a(186)),_=a(58);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var S=(n=function(e){(0,p.default)(h,e);var t,a,r,n,m=O(h);function h(e){var t;return(0,s.default)(this,h),t=m.call(this),(0,c.default)(t,"workloadDetail",l,(0,d.default)(t)),(0,c.default)(t,"currentRevision",u,(0,d.default)(t)),t.getDetailUrl=function(e){var a=e.name,r=e.cluster,n=e.namespace,l=e.revision;return"kapis/resources.kubesphere.io/v1alpha2".concat(t.getPath({cluster:r,namespace:n}),"/").concat(t.module,"/").concat(a,"/revisions/").concat(l)},t.module=e,t}return(0,f.default)(h,[{key:"fetchList",value:(n=(0,i.default)(o.default.mark((function e(t){var a,r,n,l,u,i,c,s,f=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=t.name,l=t.selector,this.list.isLoading=!0,u=(0,g.joinSelector)(l),i="deployments"===this.module?"apis/apps/v1".concat(this.getPath({cluster:a,namespace:r}),"/replicasets"):"apis/apps/v1".concat(this.getPath({cluster:a,namespace:r}),"/controllerrevisions"),e.next=6,request.get("".concat(i,"?labelSelector=").concat(u));case 6:c=e.sent,s=c.items.map(E.default.revisions).filter((function(e){return e.ownerName===n&&e.ownerKind===_.MODULE_KIND_MAP[f.module]})),this.list.update({data:s,isLoading:!1});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchDetail",value:(r=(0,i.default)(o.default.mark((function e(t){var a,r,n,l,u,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.cluster,n=t.namespace,l=t.revision,this.isLoading=!0,e.next=4,request.get(this.getDetailUrl({name:a,cluster:r,namespace:n,revision:l}));case 4:u=e.sent,i=E.default.revisions(u),this.detail=i,this.isLoading=!1;case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchWorkloadDetail",value:(a=(0,i.default)(o.default.mark((function e(t){var a,r,n,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.cluster,n=t.namespace,e.next=3,request.get("apis/apps/v1".concat(this.getPath({cluster:r,namespace:n}),"/").concat(this.module,"/").concat(a));case 3:l=e.sent,this.workloadDetail=E.default[this.module](l);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchCurrentRevision",value:(t=(0,i.default)(o.default.mark((function e(){var t,a=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.fetchList(t);case 3:this.currentRevision=(0,b.getCurrentRevision)((0,y.toJS)(t),(0,y.toJS)(this.list.data),this.module);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),h}(r(a(277)).default),l=(0,v.default)(n.prototype,"workloadDetail",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,v.default)(n.prototype,"currentRevision",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,v.default)(n.prototype,"fetchList",[y.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,v.default)(n.prototype,"fetchDetail",[y.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),(0,v.default)(n.prototype,"fetchWorkloadDetail",[y.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchWorkloadDetail"),n.prototype),(0,v.default)(n.prototype,"fetchCurrentRevision",[y.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchCurrentRevision"),n.prototype),n);t.default=S},,,,,,,function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(71)),i=n(r(21)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(303)),v=n(r(16)),y=r(276),g=r(25),b=n(r(275)),E=n(r(729)),_=n(r(724)),O=l(r(726)),S=n(r(728)),k=r(37),C=r(58),R=r(980),w=r(836),P=n(r(1386));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var I=(0,O.default)({store:new P.default,module:"alerts",name:"ALERTING_MESSAGE"})(u=function(e){(0,f.default)(r,e);var a=N(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).state={type:location.search.indexOf("type=builtin")>0?"builtin":"custom"},e.handleTabChange=function(t){e.setState({type:t},(function(){e.props.store.list.reset(),e.getData()}))},e.getData=function(t){e.props.store.fetchList(T(T(T({},e.props.match.params),t),{},{type:e.state.type}))},e.getResourceType=function(e){var a=(0,h.default)(e);return t("ALERT_TYPE",{type:t(a)})},e.getColumns=function(){var a=e.props.getFilteredValue;return[{title:t("MESSAGE"),dataIndex:"value",render:function(e,t){return m.default.createElement(b.default,{icon:"loudspeaker",title:(0,v.default)(t,"annotations.summary"),description:(0,v.default)(t,"annotations.message")||(0,v.default)(t,"annotations.description","-")})}},{title:t("ALERTING_STATUS"),dataIndex:"state",filters:e.getStatus(),filteredValue:a("state"),isHideable:!0,search:!0,width:"12%",render:function(e){return m.default.createElement(E.default,{type:e,name:t("ALERT_RULE_".concat(e.toUpperCase()),{defaultValue:e})})}},{title:t("SEVERITY"),dataIndex:"labels.severity",filters:e.getAlertingTypes(),filteredValue:a("labels.severity"),isHideable:!0,search:!0,width:"12%",render:function(e){var a=w.SEVERITY_LEVEL.find((function(t){return t.value===e}));return a?m.default.createElement(g.Tag,{type:a.type},t(a.label)):m.default.createElement(g.Tag,null,e)}},{title:t("ALERTING_POLICY"),dataIndex:"ruleName",isHideable:!0,width:"12%",render:function(t,a){return m.default.createElement(y.Link,{to:"builtin"===e.state.type?"".concat(e.getPrefix(),"/alert-rules/builtin/").concat(a.ruleId):"".concat(e.getPrefix(),"/alert-rules/").concat(t)},t)}},{title:t("MONITORING_TARGET"),dataIndex:"labels",isHideable:!0,width:"16%",render:function(a){var r=(0,R.getAlertingResource)(a),n=r.module,l=r.name,u=r.namespace;return n?"hpas"===n?m.default.createElement("span",null,t(C.MODULE_KIND_MAP[n]),": ",l):m.default.createElement(y.Link,{to:"".concat(e.getPrefix({namespace:u}),"/").concat(n,"/").concat(l)},t(C.MODULE_KIND_MAP[n]),": ",l):"-"}},{title:t("ACTIVATION_TIME"),dataIndex:"activeAt",isHideable:!0,width:200,render:function(e){return(0,k.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.cluster;!e.namespace&&this.props.store.fetchCount({cluster:t})}},{key:"getPrefix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=this.props.match.params,n=r.cluster,l=r.namespace,u=r.workspace;return t=t||n,a=a||l,"".concat(u?"/".concat(u):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"")}},{key:"getTableProps",value:function(){return{tableActions:T(T({},this.props.tableProps.tableActions),{},{selectActions:[]}),emptyProps:{desc:t("ALERTING_MESSAGE_EMPTY_DESC")}}}},{key:"getAlertingTypes",value:function(){return w.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"getStatus",value:function(){return R.ALERTING_STATUS.map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"render",value:function(){var e=this.props,a=e.match,r=e.bannerProps,n=e.tableProps,l=a.params.namespace;return m.default.createElement(O.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),m.default.createElement(_.default,(0,o.default)({},r,{tips:this.tips,tabs:l?{}:this.tabs,icon:"loudspeaker",title:t("ALERTING_MESSAGE_PL"),description:t("ALERT_MESSAGE_DESC")})),m.default.createElement(S.default,(0,o.default)({},n,this.getTableProps(),{rowKey:"id",itemActions:[],columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"tabs",get:function(){return{value:this.state.type,onChange:this.handleTabChange,options:[{value:"custom",label:t("CUSTOM_POLICIES"),count:this.props.store.ruleCount},{value:"builtin",label:t("BUILT_IN_POLICIES"),count:this.props.store.builtinRuleCount}]}}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_TRIGGER_AN_ALARM_Q"),description:t("REQUESTS_FOR_TRIGGER_AN_ALARM_A")}]}}]),r}(m.default.Component))||u;a.default=I},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(32)),p=r(a(68)),m=r(a(1)),h=r(a(3)),v=a(25);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,i.default)(a,e);var t=y(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.options,r=e.onChange,u=(0,l.default)(e,["value","options","onChange"]);return(0,d.default)(a)?null:f.default.createElement(v.RadioGroup,(0,n.default)({wrapClassName:(0,h.default)("radio-group-button",{"radio-with-badge":a.every((function(e){return!(0,p.default)(e.count)}))}),value:t,onChange:r},u),a.filter((function(e){return!e.hidden})).map((function(e){return f.default.createElement(v.RadioButton,{key:e.value,value:e.value},e.label,!(0,p.default)(e.count)&&f.default.createElement(v.Badge,{status:e.value===t?"success":"default",count:Number(e.count)}))})))}}]),a}(f.default.Component);t.default=g,g.propTypes={options:m.default.array,value:m.default.any,onChange:m.default.func}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(49)),i=r(a(109)),c=r(a(56)),s=r(a(50)),f=r(a(21)),d=r(a(91)),p=r(a(12)),m=r(a(13)),h=r(a(135)),v=r(a(19)),y=r(a(20)),g=r(a(18)),b=r(a(74)),E=(r(a(92)),r(a(16))),_=a(5),O=a(58);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var R=(n=function(e){(0,v.default)(n,e);var t,a,r=C(n);function n(){var e;(0,p.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,d.default)(e,"ruleCount",l,(0,h.default)(e)),(0,d.default)(e,"builtinRuleCount",u,(0,h.default)(e)),e.module="alerts",e.getResourceUrl=e.getListUrl,e.getFilterParams=function(e){var t=k({},e);return t["labels.severity"]&&(t.label_filters="severity=".concat(t["labels.severity"]),delete t["labels.severity"]),t},e}return(0,m.default)(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=e.ruleName,n=e.type,l="";return t&&(l+="/klusters/".concat(t)),a&&(l+="/namespaces/".concat(a)),"builtin"===n&&(l+="/".concat(n)),r&&(l+="/rules/".concat(r)),l}},{key:"fetchList",value:(a=(0,s.default)(o.default.mark((function e(){var t,a,r,n,l,u,s,f,d,p,m,h=this,v=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},a=t.cluster,r=t.workspace,n=t.namespace,l=t.more,u=t.ruleName,s=t.type,f=(0,c.default)(t,["cluster","workspace","namespace","more","ruleName","type"]),this.list.isLoading=!0,f.sortBy||void 0!==f.ascending||(f.sortBy=O.LIST_DEFAULT_ORDER[this.module]||"createTime"),f.limit!==1/0&&-1!==f.limit||(f.limit=-1,f.page=1),f.limit=f.limit||10,e.next=7,request.get(this.getResourceUrl({cluster:a,workspace:r,namespace:n,ruleName:u,type:s}),this.getFilterParams(f));case 7:return d=e.sent,p=((0,E.default)(d,"items")||[]).map((function(e,t){return k({cluster:a,namespace:n,id:t},h.mapper(e))})),m=d.total,"builtin"===s?this.builtinRuleCount=m:this.ruleCount=m,this.list.update(k(k({data:l?[].concat((0,i.default)(this.list.data),(0,i.default)(p)):p,total:m},f),{},{limit:Number(f.limit)||10,page:Number(f.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",p);case 13:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchCount",value:(t=(0,s.default)(o.default.mark((function e(t){var a,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,e.next=3,Promise.all([request.get(this.getResourceUrl({cluster:a,namespace:r}),{page:1,limit:1}),request.get(this.getResourceUrl({cluster:a,namespace:r,type:"builtin"}),{page:1,limit:1})]);case 3:n=e.sent,this.ruleCount=(0,E.default)(n,"0.total",0),this.builtinRuleCount=(0,E.default)(n,"1.total",0);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"kapis/alerting.kubesphere.io/v2alpha1/"}}]),n}(r(a(277)).default),l=(0,b.default)(n.prototype,"ruleCount",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=(0,b.default)(n.prototype,"builtinRuleCount",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,b.default)(n.prototype,"fetchList",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,b.default)(n.prototype,"fetchCount",[_.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchCount"),n.prototype),n);t.default=R},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(71)),i=n(r(49)),c=n(r(21)),s=n(r(56)),f=n(r(50)),d=n(r(12)),p=n(r(13)),m=n(r(19)),h=n(r(20)),v=n(r(18)),y=n(r(0)),g=n(r(16)),b=r(25),E=n(r(727)),_=n(r(729)),O=n(r(724)),S=l(r(726)),k=n(r(728)),C=r(37),R=r(980),w=r(836),P=n(r(1388));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var I=(0,S.default)({store:new P.default,module:"rules",authKey:"alert-rules",name:"ALERTING_POLICY"})(u=function(e){(0,m.default)(r,e);var a=N(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).state={type:location.search.indexOf("type=builtin")>0?"builtin":"custom"},e.handleTabChange=function(t){e.setState({type:t},(function(){e.props.store.list.reset(),e.getData()}))},e.getData=(0,f.default)(i.default.mark((function t(){var a,r,n,l,u=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>0&&void 0!==u[0]?u[0]:{},r=a.silent,n=(0,s.default)(a,["silent"]),l=e.props.store,r&&(l.list.silent=!0),t.next=5,l.fetchList(T(T(T({},e.props.match.params),n),{},{type:e.state.type}));case 5:l.list.silent=!1;case 6:case"end":return t.stop()}}),t)}))),e.getColumns=function(){var a=e.props.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",search:!0,render:function(t,a){return y.default.createElement(E.default,{icon:"wrench",title:(0,C.getDisplayName)(a),desc:a.desc,to:"builtin"===e.state.type?"".concat(e.props.match.url,"/builtin/").concat(a.id):"".concat(e.props.match.url,"/").concat(t)})}},{title:t("ALERTING_STATUS"),dataIndex:"state",filters:e.getStatus(),filteredValue:a("state"),isHideable:!0,search:!0,width:"16%",render:function(e){return y.default.createElement(_.default,{type:e,name:t("ALERT_RULE_".concat(e.toUpperCase()),{defaultValue:e})})}},{title:t("SEVERITY"),dataIndex:"labels.severity",filters:e.getAlertingTypes(),filteredValue:a("labels.severity"),isHideable:!0,search:!0,width:"16%",render:function(e){var a=w.SEVERITY_LEVEL.find((function(t){return t.value===e}));return a?y.default.createElement(b.Tag,{type:a.type},t(a.label)):y.default.createElement(b.Tag,null,e)}},{title:t("ACTIVATION_TIME"),dataIndex:"alerts",isHideable:!0,width:"16%",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,g.default)(e,"".concat(e.length-1,".activeAt"));return t?(0,C.getLocalTime)(t).format("YYYY-MM-DD HH:mm:ss"):"-"}}]},e.showCreate=function(){var a=e.props,r=a.match,n=a.getData,l=a.module;return e.props.trigger("alerting.policy.create",{module:l,cluster:r.params.cluster,namespace:r.params.namespace,title:t("CREATE_ALERTING_POLICY"),success:n})},e}return(0,p.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.cluster;!e.namespace&&this.props.store.fetchCount({cluster:t})}},{key:"getStatus",value:function(){return R.ALERTING_STATUS.map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"getAlertingTypes",value:function(){return w.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps,n=e.match.params.namespace,l="name",u=this.itemActions,i=this.showCreate;return"builtin"===this.state.type&&(r.selectActions=[],u=[],i=null,l="id"),y.default.createElement(S.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),y.default.createElement(O.default,(0,o.default)({},a,{tips:this.tips,tabs:n?{}:this.tabs,title:t("ALERTING_POLICIES"),description:t("ALERT_POLICY_DESC")})),y.default.createElement(k.default,(0,o.default)({},r,{rowKey:l,itemActions:u,columns:this.getColumns(),onCreate:i})))}},{key:"tabs",get:function(){return{value:this.state.type,onChange:this.handleTabChange,options:[{value:"custom",label:t("CUSTOM_POLICIES"),count:this.props.store.ruleCount},{value:"builtin",label:t("BUILT_IN_POLICIES"),count:this.props.store.builtinRuleCount}]}}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_PUSH_AN_ALARM_Q"),description:t("REQUESTS_FOR_PUSH_AN_ALARM_A")},{title:t("HOW_TO_SUPRESS_AN_ALARM_Q"),description:t("HOW_TO_SUPRESS_AN_ALARM_A")}]}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.routing,n=e.match,l=e.getData,u=e.module,o=e.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(e){return a("alerting.policy.create",{detail:e,module:u,cluster:n.params.cluster,namespace:n.params.namespace,title:t("EDIT_ALERTING_POLICY"),success:l})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:o,detail:e,success:r.query})}}]}}]),r}(y.default.Component))||u;a.default=I},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(109)),c=r(a(56)),s=r(a(49)),f=r(a(50)),d=r(a(21)),p=r(a(91)),m=r(a(12)),h=r(a(13)),v=r(a(135)),y=r(a(19)),g=r(a(20)),b=r(a(18)),E=r(a(74)),_=(r(a(92)),r(a(16))),O=a(5);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var R=(n=function(e){(0,y.default)(d,e);var t,a,r,n=C(d);function d(){var e;(0,m.default)(this,d);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).module="rules",e.getResourceUrl=e.getListUrl,(0,p.default)(e,"ruleCount",l,(0,v.default)(e)),(0,p.default)(e,"builtinRuleCount",u,(0,v.default)(e)),(0,p.default)(e,"targetsMetadata",o,(0,v.default)(e)),e.getFilterParams=function(e){var t=k({},e);return t["labels.severity"]&&(t.label_filters="severity=".concat(t["labels.severity"]),delete t["labels.severity"]),t},e.fetchMetric=function(){var t=(0,f.default)(s.default.mark((function t(a){var r,n,l,u,o,i,c;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.expr,n=a.step,l=a.start,u=a.end,o=a.cluster,i=a.namespace,r){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,request.get("kapis/monitoring.kubesphere.io/v1alpha3".concat(e.getPath({cluster:o,namespace:i}),"/targets/query"),{expr:r,step:n,start:l,end:u},null,(function(){}));case 5:return c=t.sent,t.abrupt("return",(0,_.default)(c,"data.result",[]));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,h.default)(d,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=e.type,n="";return t&&(n+="/klusters/".concat(t)),a&&(n+="/namespaces/".concat(a)),"builtin"===r&&(n+="/".concat(r)),n}},{key:"fetchList",value:(r=(0,f.default)(s.default.mark((function e(){var t,a,r,n,l,u,o,f,d,p=this,m=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},a=t.cluster,t.workspace,r=t.namespace,n=t.more,l=t.type,u=(0,c.default)(t,["cluster","workspace","namespace","more","type"]),this.list.isLoading=!0,u.sortBy||void 0!==u.ascending||(u.sortBy="createTime"),u.limit!==1/0&&-1!==u.limit||(u.limit=-1,u.page=1),u.limit=u.limit||10,e.next=7,request.get(this.getResourceUrl({cluster:a,namespace:r,type:l}),this.getFilterParams(u));case 7:return o=e.sent,f=((0,_.default)(o,"items")||[]).map((function(e){return k({cluster:a,namespace:r},p.mapper(e))})),d=Number(o.total),"builtin"===l?this.builtinRuleCount=d:this.ruleCount=d,this.list.update(k(k({data:n?[].concat((0,i.default)(this.list.data),(0,i.default)(f)):f,total:d},u),{},{limit:Number(u.limit)||10,page:Number(u.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",f);case 13:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchCount",value:(a=(0,f.default)(s.default.mark((function e(t){var a,r,n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,e.next=3,Promise.all([request.get(this.getResourceUrl({cluster:a,namespace:r}),{page:1,limit:1}),request.get(this.getResourceUrl({cluster:a,namespace:r,type:"builtin"}),{page:1,limit:1})]);case 3:n=e.sent,this.ruleCount=(0,_.default)(n,"0.total",0),this.builtinRuleCount=(0,_.default)(n,"1.total",0);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchMetadata",value:(t=(0,f.default)(s.default.mark((function e(t){var a,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("kapis/monitoring.kubesphere.io/v1alpha3".concat(this.getPath(t),"/targets/metadata"));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={data:[]};case 5:a=e.t0,r=a.data,this.targetsMetadata=r||[];case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"kapis/alerting.kubesphere.io/v2alpha1/"}}]),d}(r(a(277)).default),l=(0,E.default)(n.prototype,"ruleCount",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=(0,E.default)(n.prototype,"builtinRuleCount",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=(0,E.default)(n.prototype,"targetsMetadata",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,E.default)(n.prototype,"fetchList",[O.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,E.default)(n.prototype,"fetchCount",[O.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchCount"),n.prototype),(0,E.default)(n.prototype,"fetchMetadata",[O.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchMetadata"),n.prototype),n);t.default=R},,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=t(e.name),r=(0,i.getSuitableUnit)(e.total,e.unitType)||r,n=(0,i.getValueByUnit)(e.used,r),s=(0,i.getValueByUnit)(e.total,r)||n;return l.default.createElement("div",{className:c.default.item},l.default.createElement("div",{className:c.default.pie},l.default.createElement(o.PieChart,{width:48,height:48,data:[{name:"Used",itemStyle:{fill:"#329dce"},value:n},{name:"Left",itemStyle:{fill:"#c7deef"},value:s-n}]})),l.default.createElement(u.default,{title:"".concat(Math.round(100*n/s),"%"),description:a}),l.default.createElement(u.default,{title:r?1!==n&&"core"===r?"".concat(n," cores"):"".concat(n," ").concat(r):n,description:t("USED")}),l.default.createElement(u.default,{title:r?1!==s&&"core"===r?"".concat(s," cores"):"".concat(s," ").concat(r):s,description:t("TOTAL")}))};var l=n(r(0)),u=n(r(275)),o=r(735),i=r(725),c=n(r(2677))},,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THEME=void 0;var n,l=r(a(21)),u=r(a(71)),o=r(a(56)),i=r(a(12)),c=r(a(13)),s=r(a(19)),f=r(a(20)),d=r(a(18)),p=r(a(0)),m=a(70),h=a(25),v=r(a(3)),y=r(a(16)),g=r(a(2762));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O={default:(0,v.default)(g.default.table,g.default.table_rank,g.default.table_no_border),transparent:(0,v.default)(g.default.table,g.default.table_rank,g.default.table_no_border,g.default.table_transparent)};t.THEME=O;var S=(0,m.inject)("rootStore")(n=(0,m.observer)(n=function(e){(0,s.default)(a,e);var t=_(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.theme,a=(0,o.default)(e,["theme"]);return p.default.createElement("div",{className:t||O.default,"data-test":"ranking"},p.default.createElement(h.Table,(0,u.default)({},a,{columns:this.columns})))}},{key:"columns",get:function(){var e=(0,y.default)(this,"props.store.sort_metric","");return this.props.columns.map((function(t){return E(E({},t),{},{className:t.sort_metric===e?g.default.rankCol:""})}))}}]),a}(p.default.Component))||n)||n;t.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0;var l=n(r(71)),u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(135)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(3)),v=n(r(32)),y=n(r(68)),g=n(r(16)),b=n(r(190)),E=r(37),_=r(725),O=n(r(845)),S=r(779),k=r(735),C=n(r(1400)),R=n(r(2770));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T={cpu_usage:"cluster_cpu_usage",memory_usage:"cluster_memory_usage_wo_cache",disk_usage:"cluster_disk_size_usage"},N=function(e){(0,s.default)(r,e);var a=D(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.monitorStore.fetchMetrics(P({metrics:Object.values(T)},e))},t.isEmptyData=function(e){return!!(0,v.default)(e)||Object.values(e).every((function(e){return(0,v.default)((0,g.default)(e,"data.result"))}))},t.showModal=function(e){return(0,E.cacheFunc)("_showModal_".concat(e.type),(function(){t.props.workspace&&(e.workspace=t.props.workspace),t.setState({showModal:!0,selectItem:P({},e)})}),(0,c.default)(t))},t.hideModal=function(){t.setState({showModal:!1,selectItem:{}})},t.getControllerProps=function(){return{}},t.getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU",unitType:"cpu",legend:["USAGE"],metricType:T.cpu_usage},{type:"memory",title:"MEMORY",unitType:"memory",legend:["USAGE"],metricType:T.memory_usage}]},t.state={showModal:!1,selectItem:{}},t.init(),t}return(0,i.default)(r,[{key:"init",value:function(){this.monitorStore=new O.default({cluster:this.cluster})}},{key:"renderCard",value:function(){var e=this,a=this.monitorStore,r=a.isLoading,n=a.isRefreshing,o=this.getMonitoringCfgs();return p.default.createElement(S.Controller,(0,l.default)({title:t("CLUSTER_RESOURCE_USAGE"),step:"1h",times:24,onFetch:this.fetchData,loading:r,refreshing:n,isEmpty:this.isEmptyData(this.metrics)},this.getControllerProps()),p.default.createElement("div",{className:R.default.content},o.map((function(t){var a=(0,b.default)(t,["onClick"]),r=(0,y.default)(t.onClick)?e.showModal(a):t.onClick&&t.onClick(a),n=(0,g.default)(e.metrics,"".concat(t.metricType,".data.result"))||[],o=(0,_.getAreaChartOps)(P(P({},a),{},{data:(0,v.default)(n)?[{values:(0,_.getZeroValues)()}]:n}));return p.default.createElement("div",{key:t.type,className:(0,h.default)(R.default.item,(0,u.default)({},R.default.cursor,!!r)),onClick:r},p.default.createElement(k.MediumArea,(0,l.default)({width:"100%",height:100},o)))}))))}},{key:"renderModal",value:function(){var e=this.state,t=e.showModal,a=e.selectItem;return p.default.createElement("div",null,p.default.createElement(C.default,{visible:t,detail:a,cluster:this.cluster,workspace:this.workspace,workspaceStore:this.props.workspaceStore,onCancel:this.hideModal}))}},{key:"render",value:function(){return p.default.createElement("div",null,this.renderCard(),this.renderModal())}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"cluster",get:function(){return(0,g.default)(this.props,"match.params.cluster")}}]),r}(p.default.Component),I=(0,m.inject)("rootStore")((0,m.observer)(N));a.default=I;var A=N;a.Component=A},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(71)),c=n(r(49)),s=n(r(50)),f=n(r(21)),d=n(r(12)),p=n(r(13)),m=n(r(19)),h=n(r(20)),v=n(r(18)),y=n(r(0)),g=r(5),b=r(70),E=n(r(1)),_=n(r(32)),O=n(r(16)),S=r(37),k=r(725),C=n(r(753)),R=n(r(845)),w=r(25),P=r(735),D=n(r(1401)),T=n(r(2769));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var x={times:100,step:"5m"},j=(0,b.observer)((o=u=function(e){(0,m.default)(n,e);var a,r=A(n);function n(e){var t;return(0,d.default)(this,n),(t=r.call(this,e)).fetchNamespaces=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state.cluster;a&&t.projectStore.fetchList(I({cluster:a,workspace:t.props.workspace},e))},t.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.monitorStore.fetchApplicationResourceMetrics(I(I({metrics:[t.metricType],workspace:t.props.workspace},t.state),e))},t.handleClusterChange=function(e){t.workspaceStore&&t.workspaceStore.selectCluster(e),t.setState({cluster:e},t.fetchNamespaces)},t.handleNamespaceChange=function(e){t.setState({namespace:e})},t.handleSubmit=function(){var e=t.state,a=e.times,r=e.step,n=t.formRef.current&&t.formRef.current.getData();t.setState(n,(function(){t.fetchData(I(I({},n),{},{times:a,step:r}))}))},t.onCancel=function(){t.setState(I({},x)),t.props.onCancel()},t.updateMonitorOptions=function(e){var a=e.times,r=e.step;t.setState({times:a,step:r})},t.projectOptionRenderer=function(e){return y.default.createElement("span",{className:T.default.option},e.isFedManaged?y.default.createElement("img",{className:T.default.indicator,src:"/assets/cluster.svg"}):y.default.createElement(w.Icon,{name:"project"}),e.label)},t.clusterOptionRenderer=function(e){return y.default.createElement("span",{className:T.default.option},y.default.createElement(w.Icon,{name:"cluster",type:"light"}),e.label)},t.clusterValueRenderer=function(e){return y.default.createElement("span",{className:T.default.option},y.default.createElement(w.Icon,{name:"cluster"}),e.label)},t.workspaceStore=e.workspaceStore,t.state=I({cluster:t.workspaceStore?t.workspaceStore.cluster:(0,O.default)(e,"cluster",""),namespace:(0,O.default)(e.detail,"namespace","all")},x),t.projectStore=new C.default,t.monitorStore=new R.default,t.formRef=y.default.createRef(),t}return(0,p.default)(n,[{key:"componentDidUpdate",value:(a=(0,s.default)(c.default.mark((function e(t){var a,r,n=this;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=this.props.visible)&&a!==t.visible&&(r=this.props.workspaceStore,this.setState({cluster:r?r.cluster:(0,O.default)(this.props,"cluster","")},(0,s.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchNamespaces();case 2:return e.next=4,n.fetchData();case 4:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"renderFilterForm",value:function(){var e=this.state,a=e.cluster,r=e.namespace,n=I({},this.state),l=this.projectStore.list,u={total:l.total,page:l.page,limit:l.limit};return y.default.createElement(w.Form,{className:T.default.form,ref:this.formRef,data:n},this.props.workspace&&y.default.createElement(w.Form.Item,{label:t("CLUSTER")},y.default.createElement(w.Select,{name:"cluster",placeholder:" ",defaultValue:a,options:this.clusters,onChange:this.handleClusterChange,valueRenderer:this.clusterValueRenderer,optionRenderer:this.clusterOptionRenderer})),y.default.createElement(w.Form.Item,{label:t("PROJECT")},y.default.createElement(w.Select,{name:"namespace",placeholder:" ",defaultValue:r,options:this.namespaces,onFetch:this.fetchNamespaces,onChange:this.handleNamespaceChange,valueRenderer:this.projectOptionRenderer,optionRenderer:this.projectOptionRenderer,isLoading:this.projectStore.list.isLoading,pagination:u,searchable:!0,clearable:!0})),y.default.createElement(w.Form.Item,null,y.default.createElement(w.Button,{type:"control",onClick:this.handleSubmit},t("OK"))))}},{key:"renderChart",value:function(){var e=I(I({},this.props.detail),{},{data:this.monitoringData}),t=(0,k.getAreaChartOps)(e);return y.default.createElement("div",{className:T.default.chart},(0,_.default)(t.data)?y.default.createElement("div",{className:T.default.empty},y.default.createElement("img",{src:"/assets/empty-card.svg"})):y.default.createElement(P.SimpleArea,(0,i.default)({width:"100%",height:"100%"},t)))}},{key:"renderTable",value:function(){var e=this.props.detail.title,a=I({},this.props.detail),r=a.unitType,n=a.unit,l=((0,O.default)(this.monitoringData,"[0].values")||[]).reverse().map((function(e){return{time:1e3*(0,O.default)(e,"[0]",0),value:(0,k.getSuitableValue)((0,O.default)(e,"[1]",0),r||n)}})),u=[{key:"time",title:t("TIME"),dataIndex:"time",width:"30%",render:function(e){return(0,S.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}},{key:"usage",title:t("USAGE"),dataIndex:"value"}];return y.default.createElement("div",{className:T.default.table},y.default.createElement("div",{className:T.default.box},y.default.createElement("div",{className:T.default.title},t(e)||t("RESOURCE_USAGE")),y.default.createElement(w.Table,{columns:u,dataSource:l,scroll:{y:200},expandIconAsCell:!1,rowKey:"time"})))}},{key:"render",value:function(){var e=this.state,t=e.times,a=e.step,r=this.props.visible,n=this.monitorStore.resourceMetrics,l=n.isLoading,u=n.isRefreshing;return r?y.default.createElement(D.default,{visible:r,onFetch:this.fetchData,onCancel:this.onCancel,loading:l,refreshing:u,times:t,step:a,updateMonitorOptions:this.updateMonitorOptions},y.default.createElement("div",{className:T.default.content},this.renderFilterForm(),this.renderChart(),this.renderTable())):null}},{key:"metrics",get:function(){return(0,g.toJS)(this.monitorStore.resourceMetrics.data)}},{key:"metricType",get:function(){return this.props.detail.metricType}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,cluster:e,disabled:!e.isReady}}))}},{key:"namespaces",get:function(){var e=(0,g.toJS)(this.projectStore.list.data).map((function(e){return{label:(0,S.getDisplayName)(e),value:e.name,isFedManaged:e.isFedManaged}}));return e.unshift({label:t("ALL"),value:"all"}),e}},{key:"monitoringData",get:function(){return(0,g.toJS)(this.monitorStore.resourceMetrics.data)}}]),n}(y.default.Component),u.propTypes={visible:E.default.bool,detail:E.default.object,onCancel:E.default.func},u.defaultProps={visible:!1,detail:{},onCancel:function(){}},l=o))||l;a.default=j},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(71)),o=n(r(56)),i=n(r(12)),c=n(r(13)),s=n(r(135)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(1)),v=r(779),y=r(25),g=n(r(274)),b=n(r(16)),E=r(725),_=n(r(2768));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=function(e){(0,f.default)(r,e);var a=k(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t){var a=(0,b.default)(e.props,"updateMonitorOptions",!1);e.params=t,a&&e.props.updateMonitorOptions(t);var r=!t.start&&!t.end&&e.props.enableAutoRefresh;e.setState({enableAutoRefresh:r,autoRefresh:!1},(function(){(0,E.stopAutoRefresh)((0,s.default)(e)),e.fetchData()}))},e}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&(this.initParams(this.props),this.props.onFetch(this.params))}},{key:"componentDidMount",value:function(){this.props.visible&&this.props.onFetch(this.params)}},{key:"init",value:function(){this.initParams(this.props)}},{key:"renderCustomActions",value:function(){var e=this.props.onCancel;return m.default.createElement(y.Button,{className:_.default.button,onClick:e},m.default.createElement(y.Icon,{type:"light",name:"close",size:20}))}},{key:"renderHeader",value:function(){var e=this.props,a=e.icon,r=e.title;return m.default.createElement("div",{className:_.default.header},m.default.createElement("div",{className:_.default.title},m.default.createElement(y.Icon,{name:a||"monitor",size:16}),r||t("MONITORING")),this.renderOperations())}},{key:"renderContent",value:function(){var e=v.Controller.prototype.renderContent.call(this);return m.default.createElement("div",{className:_.default.content},e)}},{key:"render",value:function(){var e=this.props,t=e.loading,a=(e.onFetch,(0,o.default)(e,["loading","onFetch"]));return m.default.createElement(g.default,(0,u.default)({width:1162,bodyClassName:_.default.body,icon:"monitor",onOk:this.handleSubmit,hideHeader:!0,hideFooter:!0,fullScreen:!0},a),this.renderHeader(),m.default.createElement(y.Loading,{spinning:t},this.renderContent()))}}]),r}(v.Controller);a.default=C,C.propTypes=S(S({},v.Controller.propTypes),{},{onCancel:h.default.func}),C.defaultProps=S(S({},v.Controller.defaultProps),{},{times:100,step:"5m",onCancel:function(){}})},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0;var l=n(r(71)),u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(135)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(3)),v=n(r(32)),y=n(r(68)),g=n(r(16)),b=n(r(190)),E=r(37),_=r(725),O=n(r(845)),S=r(779),k=r(735),C=n(r(1400)),R=n(r(2771));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T={deployment_count:"cluster_deployment_count",statefulset_count:"cluster_statefulset_count",daemonset_count:"cluster_daemonset_count",job_count:"cluster_job_count",cronjob_count:"cluster_cronjob_count",pvc_count:"cluster_pvc_count",service_count:"cluster_service_count",route_count:"cluster_ingresses_extensions_count",pod_running_count:"cluster_pod_running_count"},N=function(e){(0,s.default)(r,e);var a=D(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.monitorStore.fetchMetrics(P({metrics:Object.values(T)},e))},t.isEmptyData=function(e){return!!(0,v.default)(e)||Object.values(e).every((function(e){return(0,v.default)((0,g.default)(e,"data.result"))}))},t.showModal=function(e){return(0,E.cacheFunc)("_showModal_".concat(e.type),(function(){t.props.workspace&&(e.workspace=t.props.workspace),t.setState({showModal:!0,selectItem:(0,b.default)(e,["data"])})}),(0,c.default)(t))},t.hideModal=function(){t.setState({showModal:!1,selectItem:{}})},t.getControllerProps=function(){return{}},t.getMonitoringCfgs=function(){return[{type:"deployment",title:"DEPLOYMENT",legend:["DEPLOYMENT_PL"],metricType:T.deployment_count},{type:"statefulset",title:"STATEFULSET",legend:["STATEFULSET_PL"],metricType:T.statefulset_count},{type:"daemonset",title:"DAEMONSET",legend:["DAEMONSET_PL"],metricType:T.daemonset_count},{type:"job",title:"JOB",legend:["JOB_PL"],metricType:T.job_count},{type:"cronjob",title:"CRONJOB",legend:["CRONJOB_PL"],metricType:T.cronjob_count},{type:"pvc",title:"PERSISTENT_VOLUME_CLAIM",legend:["PERSISTENT_VOLUME_CLAIM_PL"],metricType:T.pvc_count},{type:"service",title:"SERVICE",legend:["SERVICE_PL"],metricType:T.service_count},{type:"routes",title:"ROUTE",legend:["ROUTE_PL"],metricType:T.route_count},{type:"pod",title:"POD",legend:["RUNNING_PODS"],metricType:T.pod_running_count}]},t.state={showModal:!1,selectItem:{}},t.init(),t}return(0,i.default)(r,[{key:"init",value:function(){this.monitorStore=new O.default({cluster:this.cluster})}},{key:"renderCard",value:function(){var e=this,a=this.monitorStore,r=a.isLoading,n=a.isRefreshing,o=this.getMonitoringCfgs();return p.default.createElement(S.Controller,(0,l.default)({title:t("APPLICATION_RESOURCE_USAGE"),step:"1h",times:24,onFetch:this.fetchData,loading:r,refreshing:n,isEmpty:this.isEmptyData(this.metrics)},this.getControllerProps()),p.default.createElement("div",{className:R.default.content},o.map((function(t){var a=P(P({},t),{},{unit:""}),r=(0,y.default)(t.onClick)?e.showModal(a):t.onClick&&t.onClick(a),n=(0,g.default)(e.metrics,"".concat(t.metricType,".data.result"))||[],o=(0,_.getAreaChartOps)(P(P({},a),{},{data:(0,v.default)(n)?[{values:(0,_.getZeroValues)()}]:n}));return p.default.createElement("div",{key:t.type,className:R.default.wrapper},p.default.createElement("div",{className:(0,h.default)(R.default.item,(0,u.default)({},R.default.cursor,!!r)),onClick:r},p.default.createElement(k.MediumArea,(0,l.default)({width:"100%",height:100},o))))}))))}},{key:"renderModal",value:function(){var e=this.state,t=e.showModal,a=e.selectItem;return p.default.createElement("div",null,p.default.createElement(C.default,{visible:t,detail:a,cluster:this.cluster,workspace:this.workspace,workspaceStore:this.props.workspaceStore,onCancel:this.hideModal}))}},{key:"render",value:function(){return p.default.createElement("div",null,this.renderCard(),this.renderModal())}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"cluster",get:function(){return(0,g.default)(this.props,"match.params.cluster")}}]),r}(p.default.Component),I=(0,m.inject)("rootStore")((0,m.observer)(N));a.default=I;var A=N;a.Component=A},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c=r(a(91)),s=r(a(12)),f=r(a(13)),d=r(a(135)),p=r(a(19)),m=r(a(20)),h=r(a(18)),v=r(a(74)),y=(r(a(92)),a(5)),g=r(a(1134));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var E=["namespace_cpu_usage","namespace_memory_usage_wo_cache","namespace_pod_count","namespace_net_bytes_received","namespace_net_bytes_transmitted"],_=["namespace_memory_usage_wo_cache","namespace_memory_limit_hard","namespace_cpu_usage","namespace_cpu_limit_hard","namespace_pod_count","namespace_pod_count_hard","namespace_net_bytes_received","namespace_net_bytes_transmitted"],O=(n=function(e){(0,p.default)(a,e);var t=b(a);function a(){var e;(0,s.default)(this,a);for(var r=arguments.length,n=new Array(r),f=0;f<r;f++)n[f]=arguments[f];return e=t.call.apply(t,[this].concat(n)),(0,c.default)(e,"sort_metric_options",l,(0,d.default)(e)),(0,c.default)(e,"sort_metric",u,(0,d.default)(e)),(0,c.default)(e,"metrics_filter",o,(0,d.default)(e)),(0,c.default)(e,"changeWorkSpace",i,(0,d.default)(e)),e}return(0,f.default)(a,[{key:"fetchUrl",get:function(){return this.workspace?"".concat(this.apiVersion,"/workspaces/").concat(this.workspace,"/namespaces"):"".concat(this.apiVersion,"/namespaces")}}]),a}(g.default),l=(0,v.default)(n.prototype,"sort_metric_options",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E}}),u=(0,v.default)(n.prototype,"sort_metric",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E[0]}}),o=(0,v.default)(n.prototype,"metrics_filter",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.join("|")}}),i=(0,v.default)(n.prototype,"changeWorkSpace",[y.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.workspace=t,e.fetchAll()}}}),n);t.default=O},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(70),p=r(725),m=n(r(727)),h=n(r(802)),v=n(r(1398));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=(0,d.inject)("rootStore")(l=(0,d.observer)(l=function(e){(0,i.default)(r,e);var a=y(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).IconWidth=40,e.rankTdWidth=124,e.columns=[{dataIndex:"namespace",title:t("PROJECT"),render:function(t){return f.default.createElement(m.default,{icon:"project",iconSize:40,title:t,to:"".concat(e.prefix,"/").concat(t)})}},{sort_metric:"namespace_cpu_usage",key:"cpu",width:e.rankTdWidth,title:f.default.createElement("div",null,t("CPU_USAGE")),render:function(e){return f.default.createElement("div",null,f.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_cpu_usage,"cpu","-")),f.default.createElement("div",null,t("QUOTA_VALUE",{value:(0,p.getSuitableValue)(e.namespace_cpu_limit_hard,"cpu","-")})))}},{sort_metric:"namespace_memory_usage_wo_cache",width:e.rankTdWidth,title:f.default.createElement("div",null,t("MEMORY_USAGE")),key:"memory",render:function(e){return f.default.createElement("div",null,f.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_memory_usage_wo_cache,"memory","-")),f.default.createElement("div",null,t("QUOTA_VALUE",{value:(0,p.getSuitableValue)(e.namespace_memory_limit_hard,"memory","-")})))}},{sort_metric:"namespace_pod_count",title:t("POD_COUNT"),key:"pod",width:e.rankTdWidth,render:function(e){return f.default.createElement("div",null,f.default.createElement("h3",null,e.namespace_pod_count||"-"),f.default.createElement("div",null,t("QUOTA_VALUE",{value:e.namespace_pod_count_hard||"-"})))}},{sort_metric:"namespace_net_bytes_transmitted",title:t("OUTBOUND_TRAFFIC"),key:"namespace_net_bytes_transmitted",width:e.rankTdWidth,render:function(e){return f.default.createElement("div",null,f.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_net_bytes_transmitted,"bandwidth","-")))}},{sort_metric:"namespace_net_bytes_received",title:t("INBOUND_TRAFFIC"),key:"namespace_net_bytes_received",width:e.rankTdWidth,render:function(e){return f.default.createElement("div",null,f.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_net_bytes_received,"bandwidth","-")))}}],e}return(0,o.default)(r,[{key:"toPercentage",value:function(e){var t=Number(e)||0;return"".concat(Math.ceil(100*t),"%")}},{key:"toUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return isNaN(e)?"-":"".concat(e," ").concat(t)}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.store,r=this.props.store.data;return f.default.createElement(v.default,{theme:t,columns:this.columns,store:a,dataSource:r.toJS(),emptyText:f.default.createElement(h.default,null)})}},{key:"prefix",get:function(){var e=this.props,t=e.workspace,a=e.cluster;return"".concat(t?"/".concat(t):"","/clusters/").concat(a,"/projects")}}]),r}(f.default.Component))||l)||l;a.default=g},,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(21)),i=n(r(49)),c=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(5),y=r(70),g=n(r(32)),b=r(25),E=r(37),_=r(635),O=n(r(736)),S=n(r(926)),k=n(r(744)),C=n(r(2809));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var D=(0,y.inject)("rootStore")(l=(0,y.observer)(l=(0,_.trigger)(l=function(e){(0,d.default)(r,e);var a=P(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new O.default(e.module),e.hpaStore=new S.default,e.fetchData=(0,c.default)(i.default.mark((function t(){var a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,t.next=3,e.store.fetchDetail(a);case 3:case"end":return t.stop()}}),t)}))),e.fetchHPA=function(){var t=e.store.detail,a=t.cluster,r=t.namespace,n=t.name,l=e.store.detail.annotations,u={cluster:a,namespace:r,name:(void 0===l?{}:l)["kubesphere.io/relatedHPA"]||n};e.hpaStore.fetchDetail(u)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,v.toJS)(e.store.detail),success:e.fetchData})}},{key:"rollBack",icon:"timed-task",text:t("ROLL_BACK"),action:"edit",onClick:function(){return e.trigger("workload.revision.rollback",{detail:e.store.detail,success:e.fetchData})}},{key:"editHpa",icon:"firewall",text:t("EDIT_AUTOSCALING"),action:"edit",onClick:function(){return e.trigger("workload.hpa.edit",{detail:e.store.detail,success:e.fetchHPA})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("workload.template.edit",w(w({detail:e.store.detail},e.props.match.params),{},{success:e.fetchData,supportGpuSelect:!0}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(){return e.trigger("workload.redeploy",{module:e.module,detail:e.store.detail})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("workload.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,v.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,l=r.namespace;if(!(0,g.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:l},{name:t("APP"),value:a.app},{name:t("CREATION_TIME_TCAP"),value:(0,E.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,E.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store,hpaStore:this.hpaStore};if(this.store.isLoading&&!this.store.detail.name)return h.default.createElement(b.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("DEPLOYMENT_PL"),url:this.listUrl}]};return h.default.createElement(k.default,(0,u.default)({stores:e},a,{routes:(0,C.default)(this.props.match.path),watch:!0}))}},{key:"module",get:function(){return"deployments"}},{key:"name",get:function(){return"DEPLOYMENT"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}}]),r}(h.default.Component))||l)||l)||l;a.default=D},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(2805)),l=r(a(2806));n.default.Item=l.default;var u=n.default;t.default=u},function(e,t,a){e.exports={attributes:"_1qLfwlSNMUvx_q8t-EGpKu",item:"_2ImD6g_VbE6ZdbovBHYIpG",name:"_3oXgWAWaKT0svZ3eswccyw",value:"_1b7KLypukIC6d3iPAamFVA"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(49)),i=r(a(21)),c=r(a(109)),s=r(a(50)),f=r(a(91)),d=r(a(12)),p=r(a(13)),m=r(a(74)),h=(r(a(92)),a(5)),v=r(a(16)),y=r(a(781)),g=a(292);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _=(n=function(){function e(){(0,d.default)(this,e),(0,f.default)(this,"list",l,this),(0,f.default)(this,"variables",u,this)}var t,a;return(0,p.default)(e,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"fetchList",value:(a=(0,s.default)(o.default.mark((function e(t){var a,r,n,l,u,i,s,f,d=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=t.containers,l=void 0===n?[]:n,u=t.initContainers,i=void 0===u?[]:u,this.list.isLoading=!0,l=(0,y.default)(l)?[]:l,i=(0,y.default)(i)?[]:i,s=[].concat((0,c.default)(i.map((function(e){return E(E({},e),{},{type:"init"})}))),(0,c.default)(l.map((function(e){return E(E({},e),{},{type:"work"})})))),e.next=7,Promise.all(s.map((function(e){return e.cluster=a,e.namespace=r,d.fetchVariables(e)})));case 7:f=e.sent,this.list={data:f,isLoading:!1};case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchVariables",value:(t=(0,s.default)(o.default.mark((function e(t){var a,r,n,l,u,i,c,s=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.variables.isLoading=!0,a=t.cluster,r=t.namespace,n=t.env,l=[],u=[],(void 0===n?[]:n).forEach((function(e){if("valueFrom"in e){var t=e.valueFrom,n=t.secretKeyRef,o=t.configMapKeyRef;n&&(u.push({name:e.name,key:n.key}),l.push(request.get("api/v1".concat(s.getPath({cluster:a,namespace:r}),"/secrets/").concat(n.name)))),o&&(u.push({name:e.name,key:o.key}),l.push(request.get("api/v1".concat(s.getPath({cluster:a,namespace:r}),"/configmaps/").concat(o.name))))}else u.push(e),l.push(e.value||"")})),e.next=7,Promise.all(l);case 7:return i=e.sent,c=u.map((function(e,t){var a=i[t];return"Secret"===a.kind&&e.key?{name:e.name,value:(0,g.safeAtob)((0,v.default)(a.data,e.key,""))}:"ConfigMap"===a.kind&&e.key?{name:e.name,value:(0,v.default)(a.data,e.key,"")}:E({value:""},e)})),this.variables={data:c,isLoading:!1},t.variables=c,e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),l=(0,m.default)(n.prototype,"list",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],isLoading:!0}}}),u=(0,m.default)(n.prototype,"variables",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],isLoading:!0}}}),(0,m.default)(n.prototype,"fetchList",[h.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,m.default)(n.prototype,"fetchVariables",[h.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchVariables"),n.prototype),n);t.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(32)),h=r(25),v=n(r(741)),y=n(r(2812));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=["password","secret"],E=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={isExpand:e.props.expand,defaultExpand:e.props.expand},e.handleHideValue=function(e){var t=e.toLowerCase(),a=!1;return b.forEach((function(e){t.includes(e)&&(a=!0)})),a},e.handleExpand=function(){e.setState({isExpand:!e.state.isExpand})},e}return(0,o.default)(r,[{key:"renderTitle",value:function(){var e=this.props.detail,a=e.type,r=e.name;return f.default.createElement("div",{className:y.default.title},f.default.createElement(h.Icon,{name:"docker",size:20}),"init"===a?t("INIT_CONTAINER_VALUE",{value:r}):t("CONTAINER_VALUE",{value:r}))}},{key:"renderOperations",value:function(){return f.default.createElement("div",{className:y.default.arrow},f.default.createElement(h.Icon,{name:"caret-down",size:12,type:"light"}))}},{key:"renderContent",value:function(){var e=this,t=this.props.detail.variables;return(0,m.default)(t)?null:f.default.createElement("div",{className:y.default.content,onClick:function(e){e.stopPropagation()}},f.default.createElement("ul",{className:y.default.variables},t.map((function(t){var a=t.name,r=t.value,n=e.handleHideValue(a)?"******":r;return f.default.createElement("li",{key:a},f.default.createElement("div",{className:y.default.name},a),f.default.createElement("div",null,n))}))))}},{key:"render",value:function(){return f.default.createElement(v.default,{className:(0,p.default)(y.default.main,(0,l.default)({},y.default.expanded,this.state.isExpand)),title:this.renderTitle(),operations:this.renderOperations(),empty:t("EMPTY_WRAPPER",{resource:t("ENVIRONMENT_VARIABLE")}),loading:this.props.loading,onClick:this.handleExpand},this.renderContent())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.expand!==t.defaultExpand?{isExpand:e.expand,defaultExpand:e.expand}:null}}]),r}(f.default.Component);a.default=E,E.propTypes={className:d.default.string,detail:d.default.object,expand:d.default.bool,loading:d.default.bool},E.defaultProps={detail:{},expand:!1,loading:!0}},function(e,t,a){e.exports={wrapper:"QpFfgb7JJ7HRNLfqWCXji",item:"_2Ls9YLPpw8lkrD3lNui_GK",icon:"_38CQvuXRNm-XbTdpOmjFCM",indicator:"_3O2Bu_ul1hd0RWHSc0uyYY",text:"_2sD8JpjsJvGHwUybEZWCex",name:"_1Sivzw33_5Gsqakv7IJdNz",probeItem:"_1KcpnN-7kCl_NT5wZuH3zy",probeType:"si5bO7SNMAMGa-Y28HKrr",probeTime:"_2ZEFKQF67O0DnJj3L3PcxT",noLink:"_3TsdKO2ShBqmPwtineCIMt"}},function(e,t,a){e.exports={main:"_1mP4Qf6JdvK0Zws9GzHH_m",header:"_38YMa1McIH2a3XFjNFm0Qv",search:"_2iBh5XNyrUQs_npRhRtu-N",actions:"SOTGp48SZ36hInD3GvDqW",body:"_1E1bcvmD960HViEUNPWIj-",footer:"_2wm_WVdZeY_H8Dthsg7qEZ",item:"DfokFLfXy9QDbluhfn4mC",expanded:"_1Upgy-BC2S8CbTT7SwXJsD",arrow:"_2oh1nTH5L2f2z2s_G_Eu6J",itemMain:"_37pJP5bk2g9FqBysuK4mh5",content:"_1QXeIqcQeKMp8jjbDJUQ9R",text:"_1eubB8Mc7lqOuhCmWiSLto",monitors:"XtUDQAWv16NYrbCMYx11z",itemExtra:"_2qw5HNgGsizb6Yt_fColhG",icon:"_2khy6lzSeTcSnB9QLHOBd3",indicator:"_1nnELAL1b4Y_7-IdgMTmJG",statusTip:"_1IQ9UXag7Oj8C5vl685TuJ",charts:"JZvd7sINr_-hgLfx-_Qm3",podip:"_2yAbsvJ0HwjDLmoJoLfek2",ipTip:"_3FpDrLOumpuGj3VMwTeY9-",containers:"_2Vbw0pvM32OD13r9WIDwjd",loading:"_2_wICcLc7ldhJDkDX3UntK",empty:"_26YNgZC9m7cd39OC8YZlxM",cluster:"_1DOCSy9WSCVCd5lDQ942Uu"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(3)),p=n(r(16)),m=r(25),h=n(r(723)),v=n(r(2822)),y=n(r(2824));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,o.default)(r,e);var a=g(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleReplicaChange=function(t){t>=0&&e.props.onScale(t)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.className;return s.default.createElement(h.default,{className:(0,d.default)(y.default.replica,e)},s.default.createElement("div",{className:y.default.replicaCount},s.default.createElement(v.default,this.replicaStatus)),s.default.createElement(m.Alert,{className:y.default.replicaMsg,type:"info",message:s.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.replicaMsg}})}))}},{key:"replicaMsg",get:function(){return t("".concat(this.props.module.toUpperCase(),"_REPLICA_DESC"))}},{key:"replicaStatus",get:function(){var e=this.props,t=e.module,a=e.detail,r=e.enableScale,n={};switch(t){default:case"deployments":n={current:a.availablePodNums||0,desire:a.podNums||0};break;case"statefulsets":n={current:(0,p.default)(a,"status.currentReplicas",a.readyPodNums),desire:a.podNums||0};break;case"daemonsets":n={current:(0,p.default)(a,"status.numberReady",0),desire:(0,p.default)(a,"status.desiredNumberScheduled",0)};break;case"gateways":n={current:Array.isArray(a.pods)?a.pods.length:1,desire:(0,p.default)(a,"replicas",0)}}return n.onScale=r?this.handleReplicaChange:null,n}}]),r}(s.default.Component);a.default=b,b.propTypes={module:f.default.string,detail:f.default.object,enableScale:f.default.bool,onScale:f.default.func},b.defaultProps={module:"deployments",enableScale:!0,onScale:function(){}}},function(e,t,a){e.exports={card:"_1c8ZZJMInbKhNSrY7LtWOz",cardImg:"_2qWxZcMVoJcyTOmp888Qza",dark:"TGr9GCblFo2j_1lfxKdqy",status:"_3XPNv-eRTc_sRrHrDOGDN_",title:"_1Pjqebw9E-Ge5JTqdWweF9",detail:"_1XLvvOKXnflr9NmFv3HM_S",scale:"_1d_O-hnlw9YGlAqNVrW-Sl",control:"nB11JF3vqmggYgl2OHs6s",add:"_2CqxRZ0d1OYdLPjbX03KEK",substract:"_2oexUYxDtB2oVt85gxb8yu"}},function(e,t,a){e.exports={logContainer:"_2bPpJA94l-RyZOyRbjENrM",title:"_1e1_E7xie5w_hppm1LIgSZ",builderSelector:"_2qowcESuT9kmoK7enz5NOI",icon:"_3swHDfiS90QRAWqxRgv4Xw",noneLogDesc:"_2USfiSziwn36bQFEDdxt19",running:"_1QDO-cklO54JfNi3pfh5U8",rotate:"_1Ut0AdFDAAK29Q2sVx4kSM",failed:"_2PhKayJM_cv-avOySIoKM-",unknow:"_1U7K-MS0M-X-097gFQDhAn",successful:"_3Fqsco2IMj-fabpd1-oASz"}},,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o=r(a(71)),i=r(a(49)),c=r(a(21)),s=r(a(50)),f=r(a(12)),d=r(a(13)),p=r(a(19)),m=r(a(20)),h=r(a(18)),v=r(a(0)),y=a(5),g=a(70),b=r(a(1)),E=r(a(32)),_=r(a(16)),O=r(a(920)),S=r(a(1401)),k=r(a(2839)),C=r(a(2840)),R=r(a(1148));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var T=(0,g.observer)((u=l=function(e){(0,p.default)(a,e);var t=D(a);function a(e){var r;return(0,f.default)(this,a),(r=t.call(this,e)).getItemName=function(e){return(0,_.default)(e,"metric.pod","-")},r.fetchResources=function(){var e=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.resourceStore.fetchSortedMetrics(P(P({metrics:[r.metricType],limit:20},r.resourceParams),t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.fetchMonitorings=function(){var e=(0,s.default)(i.default.mark((function e(t){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.state.checked,e.next=3,r.monitorStore.fetchMetrics(P(P({resources:a,metrics:[r.metricType]},r.resourceParams),t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.fetchData=(0,s.default)(i.default.mark((function e(){var t,a=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r.params=t,e.next=4,r.fetchResources();case 4:return e.next=6,r.fetchMonitorings(t);case 6:case"end":return e.stop()}}),e)}))),r.handleChangeChecked=function(e){r.setState({checked:e},(function(){var e=r.state.checked,t=r.monitorsData.map(r.getItemName);e.some((function(e){return!t.includes(e)&&(r.fetchMonitorings(P({pods:[e],more:!0},r.params)),!0)}))}))},r.state={checked:[]},r.init(),r}return(0,d.default)(a,[{key:"componentDidMount",value:function(){var e=this;(0,y.when)((function(){return!(0,E.default)(e.resourcesData)&&(0,E.default)(e.state.checked)}),(function(){var t=e.props.defaultChecked,a=e.resourcesData.map((function(t){return e.getItemName(t)})).slice(0,t);e.setState({checked:a})}))}},{key:"init",value:function(){var e=new O.default;this.resourceStore=e,this.monitorStore=e}},{key:"renderCharts",value:function(){var e=this,t=this.props.config,a=this.state.checked,r=[];return a.forEach((function(t){var a=e.monitorsData.find((function(a){return e.getItemName(a)===t}));a&&r.push(a)})),v.default.createElement(C.default,{loading:this.monitorStore.isLoading,config:t,data:r})}},{key:"renderResroucesList",value:function(){var e=this.props.config,t=this.state.checked,a=this.resources,r=a.page,n=a.total,l=a.isLoading;return v.default.createElement(k.default,{loading:l,config:e,name:this.name,page:r,total:n,checked:t,data:this.resourcesData,onFetch:this.fetchResources,onChange:this.handleChangeChecked})}},{key:"render",value:function(){var e=this.monitorStore,t=e.isLoading,a=e.isRefreshing,r=this.props,n=r.visible,l=r.onCancel;return v.default.createElement(S.default,(0,o.default)({visible:n,onFetch:this.fetchData,onCancel:l,loading:t,refreshing:a},this.monitorOptions),v.default.createElement("div",{className:R.default.content},this.renderResroucesList(),this.renderCharts()))}},{key:"monitorOptions",get:function(){return{times:50,step:"5m"}}},{key:"name",get:function(){return"POD_PL"}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"metricType",get:function(){return this.props.config.metricType}},{key:"resourceParams",get:function(){var e=this.props,t=e.module;return{cluster:e.cluster,namespace:e.namespace,workloadKind:t,workloadName:e.name}}},{key:"resources",get:function(){return(0,y.toJS)((0,_.default)(this.resourceStore,"sort",{}))}},{key:"resourcesData",get:function(){return(0,_.default)(this.resources,"data[".concat(this.metricType,"].data.result"),[])}},{key:"monitorsData",get:function(){return(0,_.default)(this.monitorStore,"data[".concat(this.metricType,"].data.result"),[])}}]),a}(v.default.Component),l.propTypes={visible:b.default.bool,defaultChecked:b.default.number,limit:b.default.number,config:b.default.object,onCancel:b.default.func,module:b.default.string,name:b.default.string,namespace:b.default.string,cluster:b.default.string},l.defaultProps={visible:!1,defaultChecked:5,limit:10,config:{},module:"deployments",name:"",namespace:"",cluster:"",onCancel:function(){}},n=u))||n;t.default=T},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(21)),i=n(r(49)),c=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(5),y=r(70),g=n(r(32)),b=r(25),E=r(37),_=r(635),O=n(r(736)),S=n(r(744)),k=n(r(2842));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,y.inject)("rootStore")(l=(0,y.observer)(l=(0,_.trigger)(l=function(e){(0,d.default)(r,e);var a=w(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new O.default(e.module),e.fetchData=(0,c.default)(i.default.mark((function t(){var a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,t.next=3,e.store.fetchDetail(a);case 3:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,v.toJS)(e.store.detail),success:e.fetchData})}},{key:"rollBack",icon:"timed-task",text:t("ROLL_BACK"),action:"edit",onClick:function(){return e.trigger("workload.revision.rollback",{detail:e.store.detail,success:e.fetchData})}},{key:"editService",show:e.store.detail.spec.serviceName,icon:"network-router",text:t("EDIT_SERVICE"),action:"edit",onClick:function(){return e.trigger("workload.service.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("workload.template.edit",R(R({detail:e.store.detail},e.props.match.params),{},{success:e.fetchData}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(){return e.trigger("workload.redeploy",{module:e.module,detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("workload.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,v.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,l=r.namespace;if(!(0,g.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:l},{name:t("APP"),value:a.app},{name:t("CREATION_TIME_TCAP"),value:(0,E.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,E.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return h.default.createElement(b.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("STATEFULSET_PL"),url:this.listUrl}]};return h.default.createElement(S.default,(0,u.default)({stores:e},a,{routes:(0,k.default)(this.props.match.path),watch:!0}))}},{key:"module",get:function(){return"statefulsets"}},{key:"name",get:function(){return"STATEFULSET"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}}]),r}(h.default.Component))||l)||l)||l;a.default=P},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(5),h=r(70),v=n(r(32)),y=r(25),g=r(37),b=r(635),E=n(r(736)),_=n(r(744)),O=n(r(2846));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,h.inject)("rootStore")(l=(0,h.observer)(l=(0,b.trigger)(l=function(e){(0,s.default)(r,e);var a=C(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new E.default("daemonsets"),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:e.store.detail,success:e.fetchData})}},{key:"rollBack",icon:"timed-task",text:t("ROLL_BACK"),action:"edit",onClick:function(){return e.trigger("workload.revision.rollback",{detail:e.store.detail,success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("workload.template.edit",k(k({detail:e.store.detail},e.props.match.params),{},{success:e.fetchData}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(){return e.trigger("workload.redeploy",{module:e.module,detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("workload.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,l=r.namespace;if(!(0,v.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:l},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,g.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("DAEMONSET_PL"),url:this.listUrl}]};return p.default.createElement(_.default,(0,u.default)({stores:e},a,{routes:(0,O.default)(this.props.match.path),watch:!0}))}},{key:"module",get:function(){return"daemonsets"}},{key:"name",get:function(){return"DAEMONSET"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}}]),r}(p.default.Component))||l)||l)||l;a.default=R},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=r(25),v=r(37),y=r(289),g=r(635),b=n(r(736)),E=n(r(1426)),_=n(r(1149)),O=n(r(744)),S=n(r(2848));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,m.inject)("rootStore")(l=(0,m.observer)(l=(0,g.trigger)(l=function(e){(0,c.default)(r,e);var a=k(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new b.default(e.module),e.resourceStore=new _.default(e.module),e.recordStore=new E.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"rerun",icon:"refresh",text:t("RERUN"),action:"edit",onClick:e.handleRerun},{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,readOnly:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.handleRerun=function(){var t=e.store.detail;e.store.rerun(t).then((function(){e.fetchData()}))},e.getAttrs=function(){var a=e.props.match.params,r=a.cluster,n=a.namespace,l=(0,p.toJS)(e.store.detail),u=l.spec,o=void 0===u?{}:u,i=(0,y.getJobStatus)(l);return[{name:t("CLUSTER"),value:r},{name:t("PROJECT"),value:n},{name:t("STATUS"),value:t(i)},{name:t("MAXIMUM_RETRIES"),value:o.backoffLimit},{name:t("COMPLETE_PODS"),value:o.completions},{name:t("PARALLEL_PODS"),value:o.parallelism},{name:t("MAXIMUM_DURATION"),value:o.activeDeadlineSeconds},{name:t("CREATION_TIME_TCAP"),value:(0,v.getLocalTime)(l.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:l.creator}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store,resourceStore:this.resourceStore,recordStore:this.recordStore};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(h.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,v.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return d.default.createElement(O.default,(0,u.default)({stores:e},a,{routes:(0,S.default)(this.props.match.path)}))}},{key:"module",get:function(){return"jobs"}},{key:"name",get:function(){return"JOB"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}}]),r}(d.default.Component))||l)||l)||l;a.default=C},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(21)),o=r(a(136)),i=r(a(49)),c=r(a(56)),s=r(a(50)),f=r(a(91)),d=r(a(12)),p=r(a(13)),m=r(a(135)),h=r(a(19)),v=r(a(20)),y=r(a(18)),g=r(a(74)),b=(r(a(92)),a(5)),E=r(a(32)),_=r(a(16)),O=a(37);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var R=(n=function(e){(0,h.default)(n,e);var t,a,r=C(n);function n(){var e;return(0,d.default)(this,n),e=r.call(this),(0,f.default)(e,"excute",l,(0,m.default)(e)),e.module="jobs",e}return(0,p.default)(n,[{key:"fetchListByK8s",value:(a=(0,s.default)(i.default.mark((function e(t){var a,r,n,l,u,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=t.selector,l=(0,c.default)(t,["cluster","namespace","selector"]),this.list.isLoading=!0,(0,E.default)(n)||(l.labelSelector=(0,O.joinSelector)(n)),e.next=5,request.get("apis/batch/v1".concat(this.getPath({cluster:a,namespace:r}),"/").concat(this.module),l);case 5:return u=e.sent,o=u.items||[],this.list.update({data:o.map(this.mapper),total:o.length,isLoading:!1,selectedRowKeys:[]}),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchExcuteRecords",value:(t=(0,s.default)(i.default.mark((function e(t){var a,r,n,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.excute.isLoading=!0,e.next=3,request.get("apis/batch/v1".concat(this.getPath(t),"/").concat(this.module,"/").concat(t.name));case 3:a=e.sent,r=this.mapper(a),n=[];try{l=JSON.parse((0,_.default)(r,"annotations.revisions",{})),n=Object.entries(l).map((function(e){var t=(0,o.default)(e,2),a=t[0];return k(k({},t[1]),{},{id:a})}))}catch(e){}this.excute={data:n,total:n.length||0,isLoading:!1};case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"apis/kubesphere.io/v1alpha1"}}]),n}(r(a(277)).default),l=(0,g.default)(n.prototype,"excute",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,isLoading:!0}}}),(0,g.default)(n.prototype,"fetchListByK8s",[b.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchListByK8s"),n.prototype),(0,g.default)(n.prototype,"fetchExcuteRecords",[b.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchExcuteRecords"),n.prototype),n);t.default=R},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=n(r(32)),v=r(25),y=r(37),g=r(289),b=r(635),E=n(r(736)),_=n(r(744)),O=n(r(2852));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,m.inject)("rootStore")(l=(0,m.observer)(l=(0,b.trigger)(l=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new E.default(e.module),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"start",icon:"start",text:t("START"),action:"edit",onClick:e.handleSwitch(!0),show:e.store.detail.suspend},{key:"pause",icon:"stop",text:t("PAUSE"),action:"edit",onClick:e.handleSwitch(!1),show:!e.store.detail.suspend},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.handleSwitch=function(t){return function(){e.store.switch(e.store.detail,t).then((function(){e.fetchData()}))}},e.getAttrs=function(){var a=e.store.detail,r=a.spec,n=void 0===r?{}:r,l=(0,g.getCronJobStatus)(a),u=e.props.match.params,o=u.cluster,i=u.namespace;if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:o},{name:t("PROJECT"),value:i},{name:t("STATUS"),value:t(l)},{name:t("SCHEDULE"),value:n.schedule},{name:t("MAXIMUM_DELAY"),value:n.startingDeadlineSeconds},{name:t("SUCCESSFUL_JOBS_RETAINED"),value:n.successfulJobsHistoryLimit},{name:t("FAILED_JOBS_RETAINED"),value:n.failedJobsHistoryLimit},{name:t("CONCURRENCY_POLICY"),value:"Allow"===n.concurrencyPolicy?t("RUN_JOBS_CONCURRENTLY"):"Forbid"===n.concurrencyPolicy?t("SKIP_NEW_JOB"):t("SKIP_OLD_JOB")},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return d.default.createElement(_.default,(0,u.default)({stores:e},a,{routes:(0,O.default)(this.props.match.path)}))}},{key:"module",get:function(){return"cronjobs"}},{key:"name",get:function(){return"CRONJOB"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}}]),r}(d.default.Component))||l)||l)||l;a.default=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(5),h=r(70),v=n(r(16)),y=n(r(32)),g=r(25),b=r(37),E=r(635),_=r(58),O=n(r(748)),S=n(r(998)),k=n(r(744)),C=n(r(2855));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D=(0,h.inject)("rootStore")(l=(0,h.observer)(l=(0,E.trigger)(l=function(e){(0,s.default)(r,e);var a=P(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new O.default,e.serviceMonitorStore=new S.default,e.fetchData=function(){var t=e.props.match.params;e.store.fetchDetail(t),e.store.fetchEndpoints(t)},e.fetchServiceMonitors=function(){var t=e.store.detail,a=t.cluster,r=t.namespace,n=t.labels;(0,y.default)(n)||e.serviceMonitorStore.fetchListByK8s({cluster:a,namespace:r,labelSelector:(0,b.joinSelector)(n)})},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:e.store.detail,success:e.fetchData})}},{key:"editService",icon:"network-router",text:t("EDIT_SERVICE"),action:"edit",onClick:function(){return e.trigger("service.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editGateway",icon:"ip",text:t("EDIT_EXTERNAL_ACCESS"),action:"edit",show:e.store.detail.type===_.SERVICE_TYPES.VirtualIP,onClick:function(){return e.trigger("service.gateway.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"serviceMonitor",icon:"linechart",text:t("EDIT_MONITORING_EXPORTER"),action:"edit",onClick:function(){return e.trigger("service.monitor.edit",w(w({},e.props.match.params),{},{detail:e.store.detail,success:e.fetchServiceMonitors}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("service.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,l=r.namespace;if(!(0,y.default)(a)){var u;"ExternalName"===a.type?u=a.externalName:"LoadBalancer"===a.specType?u=a.loadBalancerIngress.join("\r\n"):a.externalIPs&&(u=a.externalIPs.join("\r\n"));var o=(0,v.default)(a,'annotations["kubesphere.io/serviceType"]',"");return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:l},{name:t("TYPE"),value:p.default.createElement("span",null,o?t("SERVICE_TYPE_".concat(o.toUpperCase())):t("CUSTOM_SERVICE"),p.default.createElement("span",{className:"text-desc"}," (",t(a.type),")"))},{name:t("APP"),value:a.app},{name:t("VIRTUAL_IP_ADDRESS"),value:a.clusterIP},{name:t("EXTERNAL_IP_ADDRESS"),value:u},{name:t("SESSION_AFFINITY"),value:"None"===a.sessionAffinity?t("DISABLED"):t("ENABLED")},{name:t("SELECTOR"),value:(0,b.joinSelector)(a.selector)},{name:t("DNS"),value:e.renderDNS()},{name:t("ENDPOINT"),value:e.renderEndpoints()},{name:t("CREATION_TIME_TCAP"),value:(0,b.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,b.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]}},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderDNS",value:function(){var e=this.store,t=e.detail,a=e.workloads,r=e.pods;return a.isLoading||"statefulsets"!==a.type||r.isLoading||0===r.data.length?"".concat(t.name,".").concat(t.namespace):r.data.map((function(e){return p.default.createElement("p",{key:e.uid},e.name,".",t.name,".",t.namespace)}))}},{key:"renderEndpoints",value:function(){if("Headless(ExternalName)"===this.store.detail.type)return null;var e=this.store.endpoints,t=e.isLoading,a=e.data;if(t)return p.default.createElement(g.Loading,{size:12});if(0===a.length)return"-";var r=[];return a.forEach((function(e){e.addresses.forEach((function(t){e.ports.forEach((function(e){t.ip&&e.port&&r.push("".concat(t.ip,":").concat(e.port))}))}))})),r.map((function(e,t){return p.default.createElement("p",{key:t},e)}))}},{key:"render",value:function(){var e={detailStore:this.store,serviceMonitorStore:this.serviceMonitorStore};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(g.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,b.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return p.default.createElement(k.default,(0,u.default)({stores:e},a,{routes:(0,C.default)(this.props.match.path)}))}},{key:"module",get:function(){return"services"}},{key:"name",get:function(){return"SERVICE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}}]),r}(p.default.Component))||l)||l)||l;a.default=D},function(e,t,a){e.exports={content:"_2ZwGdPpxAhTzLkxSVThCmZ",item:"_1ObwvAEb1U4k8T2gv7yvsU",empty:"KMh3PEpKo6Jg0Ucbgyq00"}},function(e,t,a){e.exports={content:"_3T2qUTrs27LXHme2DOQQXA",item:"_1E3QOQ7mYtLGZc1fl1NMWq"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=n(r(32)),v=r(25),y=r(37),g=r(635),b=n(r(855)),E=n(r(744)),_=n(r(2863));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,m.inject)("rootStore")(l=(0,m.observer)(l=(0,g.trigger)(l=function(e){(0,c.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new b.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRules",icon:"firewall",text:t("EDIT_ROUTING_RULES"),action:"edit",onClick:function(){return e.trigger("router.rules.edit",{namespace:e.props.match.params.namespace,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editAnnotations",icon:"firewall",text:t("EDIT_ANNOTATIONS"),action:"edit",onClick:function(){return e.trigger("router.annotations.edit",{detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,l=r.namespace;if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:l},{name:t("APP"),value:a.app},{name:t("GATEWAY_ADDRESS_TCAP"),value:a.loadBalancerIngress.join("\r\n")},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return d.default.createElement(E.default,(0,u.default)({stores:e},a,{routes:(0,_.default)(this.props.match.path)}))}},{key:"module",get:function(){return"ingresses"}},{key:"name",get:function(){return"ROUTE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}}]),r}(d.default.Component))||l)||l)||l;a.default=S},function(e,t,a){e.exports={ports:"z2EiKOPaSXkGmpQpoE-H_",card:"_3Q35ZuHxAjDj669cnT2Khd",content:"_1YLdx1Yt-6gMzruD-S8Bot",title:"_1Smdy_zt_LHm1hSRt0Eef-",path:"xGHTWxqXrFVtpy7Zwr6vD",access:"YE_7nvMY_-UKJNrL4GkGh",tip:"Tjbb2yi464EU4fTNJAmIL"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=n(r(32)),v=r(25),y=r(37),g=r(635),b=r(58),E=n(r(773)),_=n(r(744)),O=n(r(2867));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,m.inject)("rootStore")(l=(0,m.observer)(l=(0,g.trigger)(l=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new E.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("secret.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,l=r.namespace;if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:l},{name:t("TYPE"),value:t(b.SECRET_TYPES[a.type]||a.type)},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("SECRET_PL"),url:this.listUrl}]};return d.default.createElement(_.default,(0,u.default)({stores:e},a,{routes:(0,O.default)(this.props.match.path)}))}},{key:"module",get:function(){return"secrets"}},{key:"name",get:function(){return"SECRET"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=(0,p.toJS)(this.store.detail).isFedManaged,t=this.props.match.params,a=t.workspace,r=t.cluster,n=t.namespace;return a?e?"/".concat(a,"/federatedprojects/").concat(n,"/").concat(this.module):"/".concat(a,"/clusters/").concat(r,"/projects/").concat(n,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}}]),r}(d.default.Component))||l)||l)||l;a.default=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=n(r(32)),v=r(25),y=r(37),g=r(635),b=n(r(904)),E=n(r(744)),_=n(r(2870));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,m.inject)("rootStore")(l=(0,m.observer)(l=(0,g.trigger)(l=function(e){(0,c.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new b.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("configmap.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,l=r.namespace;if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:l},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CONFIGMAP_PL"),url:this.listUrl}]};return d.default.createElement(E.default,(0,u.default)({stores:e},a,{routes:(0,_.default)(this.props.match.path)}))}},{key:"module",get:function(){return"configmaps"}},{key:"name",get:function(){return"CONFIGMAP"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=(0,p.toJS)(this.store.detail).isFedManaged,t=this.props.match.params,a=t.workspace,r=t.cluster,n=t.namespace;return a?e?"/".concat(a,"/federatedprojects/").concat(n,"/").concat(this.module):"/".concat(a,"/clusters/").concat(r,"/projects/").concat(n,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}}]),r}(d.default.Component))||l)||l)||l;a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(5),h=r(70),v=n(r(32)),y=r(25),g=r(37),b=r(635),E=n(r(1139)),_=n(r(744)),O=n(r(2873));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,h.inject)("rootStore")(l=(0,h.observer)(l=(0,b.trigger)(l=function(e){(0,s.default)(r,e);var a=C(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new E.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("serviceaccount.edit",k({type:e.name,detail:(0,m.toJS)(e.store.detail),success:e.fetchData},e.props.match.params))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"modifyServiceAccountRole",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",onClick:function(){return e.trigger("serviceaccount.role.edit",k({detail:e.store.detail,success:e.fetchData},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,l=r.namespace;if(!(0,v.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:l},{name:t("ROLE"),value:a.role},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading)return p.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("SERVICE_ACCOUNT_PL"),url:this.listUrl}]};return p.default.createElement(_.default,(0,u.default)({stores:e},a,{routes:(0,O.default)(this.props.match.path)}))}},{key:"module",get:function(){return"serviceaccounts"}},{key:"name",get:function(){return"SERVICE_ACCOUNT"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=(0,m.toJS)(this.store.detail).isFedManaged,t=this.props.match.params,a=t.workspace,r=t.cluster,n=t.namespace;return a?e?"/".concat(a,"/federatedprojects/").concat(n,"/").concat(this.module):"/".concat(a,"/clusters/").concat(r,"/projects/").concat(n,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}}]),r}(p.default.Component))||l)||l)||l;a.default=R},function(e,t,a){e.exports={secretWrapper:"_2w2dYzN4wuGp_wajpcdrcB",title:"_2NnR7nZbdx5sVyDkdr_G-f",defaultWrapper:"_2s4vOIBr8xBPyb5h4ilFgc",configWrapper:"_2R-aXaN8GH_Hz7c1wmLJre",codeEditor:"_1LuBGW3lud3xrU-Jon909o",ops:"Iwmqd8wJBrfmpDxheVZbw",split:"rtimVCShoOZggbnsmeQzP"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(16)),m=n(r(32)),h=r(70),v=r(25),y=r(37),g=r(635),b=n(r(654)),E=n(r(744)),_=n(r(2876));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,h.inject)("rootStore")(l=(0,h.observer)(l=(0,g.trigger)(l=function(e){(0,c.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new b.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.podName;e.store.fetchDetail({cluster:a,namespace:r,name:n})},e.getOperations=function(){return[{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,readOnly:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=e.props.match.params,r=a.cluster,n=a.namespace,l=e.store.detail,u=void 0===l?{}:l;if((0,m.default)(u))return null;var o=u.podStatus,i=o.status,c=o.restarts;return[{name:t("CLUSTER"),value:r},{name:t("PROJECT"),value:n},{name:t("APP"),value:u.app},{name:t("STATUS"),value:t(i)},{name:t("POD_IP_ADDRESS"),value:u.podIp},{name:t("NODE_NAME"),value:u.node},{name:t("NODE_IP_ADDRESS"),value:u.nodeIp},{name:t("RESTART_PL"),value:c},{name:t("QOS_CLASS"),value:(0,p.default)(u,"status.qosClass")},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(u.createTime).format("YYYY-MM-DD HH:mm:ss")}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("POD_PL"),url:this.listUrl}]};return d.default.createElement(E.default,(0,u.default)({stores:e},a,{routes:(0,_.default)(this.props.match.path)}))}},{key:"module",get:function(){return"pods"}},{key:"name",get:function(){return"POD"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace,n=localStorage.getItem("pod-detail-referrer");return n||(t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module))}}]),r}(d.default.Component))||l)||l)||l;a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(21)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(1)),v=n(r(32)),y=r(70),g=n(r(723)),b=n(r(2879)),E=n(r(1439));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=(0,y.inject)("projectStore")((o=u=function(e){(0,f.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).getVolumeMounts=function(t){var a=e.props.containers,r=[];return a.forEach((function(e){(0,v.default)(e.volumeMounts)||e.volumeMounts.forEach((function(a){a.name===t.mountName&&r.push(O(O({},a),{},{containerName:e.name,accessMode:a.readOnly?"read-only":"read-write"}))}))})),r},e}return(0,s.default)(r,[{key:"renderContent",value:function(){var e=this,t=this.props,a=t.volumes,r=t.match;return(0,v.default)(a)?null:a.map((function(t,a){return t.volumeMounts=e.getVolumeMounts(t),m.default.createElement(b.default,{key:a,volume:t,match:r,isMultiProject:e.isMultiProject})}))}},{key:"render",value:function(){var e=this.props.className,a=this.props.title||t("VOLUME_PL");return m.default.createElement(g.default,{className:e,title:a},m.default.createElement("div",{className:E.default.wrapper},this.renderContent()))}},{key:"isMultiProject",get:function(){return this.props.projectStore.detail.isFedManaged}}]),r}(m.default.Component),u.propTypes={className:h.default.string,title:h.default.string,volumes:h.default.array,containers:h.default.array,loading:h.default.bool},u.defaultProps={volumes:[],containers:[],loading:!0},l=o))||l;a.default=k},function(e,t,a){e.exports={wrapper:"_3WmhEG-d3vk4S7uvmlKEK2",mount:"_1k5hKVyDTa6Ri6opeSMPSV",title:"_1sZylEGWneZrTTlPkPSqjX"}},function(e,t,a){e.exports={wrapper:"_29HrZi7B6nepJRA-j04euE",info:"_14NS-RQ6mOfs6zBQ3HySK2",condition:"_3ieGvneFe2nLuN-V-U9qlD",header:"PidKbuMUyOakF0P5ZZoc9",content:"ln9lZ0lhR7sEfH923BAeo",status:"_17JmAbiTz2SgqjjHXqD_YS",requests:"_2hqgO2JzuEYvMmZb5s3TC6",text:"_3fM1y3c5wZIR5tjTDuMLaE",nodes:"_2AoDeFbWjHT3VCxl-nSNVm",chart:"fGLJu8LN4Ey-s6nZdgpi8",chartWrapper:"_2AJnGB-ARgyppudS3lbQsm",podRequests:"_3GtjATOBmdQ3zx7Nk_hlFi"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.default=void 0;var n=r(a(71)),l=r(a(21)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=a(70),p=r(a(32)),m=r(a(16)),h=a(725),v=r(a(920)),y=a(779),g=a(735);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _={cpu_usage:"pod_cpu_usage",memory_usage:"pod_memory_usage_wo_cache",net_transmitted:"pod_net_bytes_transmitted",net_received:"pod_net_bytes_received"},O=function(e){(0,i.default)(a,e);var t=E(a);function a(e){var r;return(0,u.default)(this,a),(r=t.call(this,e)).fetchData=function(e){var t=r.store.detail,a=t.cluster,n=t.namespace,u=t.name;r.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({cluster:a,namespace:n,pod:u,metrics:Object.values(_)},e))},r.getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU_USAGE",unitType:"cpu",legend:["USAGE"],data:(0,m.default)(r.metrics,"".concat(_.cpu_usage,".data.result"))},{type:"memory",title:"MEMORY_USAGE",unitType:"memory",legend:["USAGE"],data:(0,m.default)(r.metrics,"".concat(_.memory_usage,".data.result"))},{type:"bandwidth",title:"OUTBOUND_TRAFFIC",unitType:"bandwidth",legend:["OUTBOUND"],data:(0,m.default)(r.metrics,"".concat(_.net_transmitted,".data.result"))},{type:"bandwidth",title:"INBOUND_TRAFFIC",unitType:"bandwidth",legend:["INBOUND"],data:(0,m.default)(r.metrics,"".concat(_.net_received,".data.result"))}]},r.monitorStore=new v.default,r}return(0,o.default)(a,[{key:"render",value:function(){var e=this.store.detail.createTime,t=this.monitorStore,a=t.isLoading,r=t.isRefreshing,l=this.getMonitoringCfgs();return f.default.createElement(y.Controller,{createTime:e,onFetch:this.fetchData,loading:a,refreshing:r,isEmpty:(0,p.default)(this.metrics)},l.map((function(e){var t=(0,h.getAreaChartOps)(e);return(0,p.default)(t.data)?null:f.default.createElement(g.SimpleArea,(0,n.default)({key:e.title,width:"100%"},t))})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"metrics",get:function(){return this.monitorStore.data}}]),a}(f.default.Component),S=(0,d.inject)("rootStore","detailStore")((0,d.observer)(O));t.default=S;var k=O;t.Component=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(32)),m=r(70),h=r(25),v=r(37),y=r(635),g=r(638),b=n(r(992)),E=n(r(744)),_=n(r(2882));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,m.observer)(l=(0,y.trigger)(l=function(e){(0,c.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new b.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"terminal",type:"control",text:t("TERMINAL"),action:"edit",onClick:e.handleOpenTerminal}]},e.getResourceInfo=function(a){var r=e.store.detail.resources,n=(void 0===r?{}:r)[a];return n&&Object.keys(n).map((function(e){return t("".concat(e.toUpperCase(),"_VALUE"),{value:n[e]})})).join("/")},e.getAttrs=function(){var a=e.props.match.params,r=a.cluster,n=a.namespace,l=e.store.detail,u=void 0===l?{}:l;if((0,p.default)(u))return null;var o,i=u.state?Object.keys(u.state)[0]:"";return o="Always"===u.imagePullPolicy?t("IMAGE_PULL_POLICY_ALWAYS"):"IfNotPresent"===u.imagePullPolicy?t("IMAGE_PULL_POLICY_IFNOTPRESENT"):"Never"===u.imagePullPolicy?t("IMAGE_PULL_POLICY_NEVER"):u.imagePullPolicy,[{name:t("CLUSTER"),value:r},{name:t("PROJECT"),value:n},{name:t("APP"),value:u.app},{name:t("STATUS"),value:t(i)},{name:t("IMAGE"),value:u.image},{name:t("IMAGE_ID"),value:u.imageID},{name:t("PORT"),value:e.ports},{name:t("COMMAND"),value:e.command},{name:t("RESOURCE_REQUESTS"),value:e.getResourceInfo("requests")},{name:t("RESOURCE_LIMITS"),value:e.getResourceInfo("limits")},{name:t("IMAGE_PULL_POLICY"),value:o},{name:t("RESTART_PL"),value:u.restartCount}]},e.handleOpenTerminal=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.podName,l=t.containerName,u="/terminal/cluster/".concat(a,"/projects/").concat(r,"/pods/").concat(n,"/containers/").concat(l);window.open(u,"Connecting ".concat(l),(0,g.createCenterWindowOpt)({width:1200,height:800,scrollbars:1,resizable:1}))},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(h.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,name:(0,v.getDisplayName)(this.store.detail),desc:t("CONTAINER_DETAILS_PAGE_SCAP"),operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CONTAINER_PL"),url:this.listUrl}]};return d.default.createElement(E.default,(0,u.default)({stores:e},a,{routes:(0,_.default)(this.props.match.path)}))}},{key:"name",get:function(){return"CONTAINER"}},{key:"authKey",get:function(){return"pods"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace,n=e.podName;return"".concat(t?"/".concat(t):"","/clusters/").concat(a,"/projects/").concat(r,"/pods/").concat(n)}},{key:"ports",get:function(){var e=this.store.detail.ports,t=void 0===e?[]:e;return(0,p.default)(t)?"-":t.map((function(e){return"".concat(e.name?"".concat(e.name,":"):"").concat(e.containerPort||"None","/").concat(e.protocol)})).join(" ")}},{key:"command",get:function(){var e=this.store.detail.command,t=void 0===e?[]:e;return(0,p.default)(t)?"-":t.join(" ")}}]),r}(d.default.Component))||l)||l;a.default=S},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(19)),u=r(a(20)),o=r(a(18));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var c=function(e){(0,l.default)(a,e);var t=i(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).resourceName="container",e.getApi=function(t){var a=t.namespace,r=t.podName,n=t.container;return"".concat(e.apiVersion,"/namespaces/").concat(a,"/pods/").concat(r,"/containers/").concat(n)},e}return a}(r(a(768)).default);t.default=c},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(71)),c=n(r(49)),s=n(r(50)),f=n(r(91)),d=n(r(12)),p=n(r(13)),m=n(r(135)),h=n(r(19)),v=n(r(20)),y=n(r(18)),g=n(r(74)),b=(n(r(92)),n(r(0))),E=n(r(32)),_=n(r(16)),O=n(r(68)),S=r(70),k=r(25),C=n(r(729)),R=r(37),w=r(635),P=r(5),D=n(r(763)),T=n(r(873)),N=n(r(744)),I=n(r(2898));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var x=(0,S.inject)("rootStore")(l=(0,S.observer)(l=(0,w.trigger)((u=function(e){(0,h.default)(r,e);var a=A(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new D.default,e.storageclass=new T.default,(0,f.default)(e,"ksVersion",o,(0,m.default)(e)),e.getDisAllowToDo=function(t){try{var a=(0,P.toJS)(e.storageclass).detail.annotations[t],r="Pending"===e.store.detail.phase;return!(!(0,O.default)(a)&&!r)||!JSON.parse(a)}catch(e){return!0}},e.fetchData=(0,s.default)(c.default.mark((function t(){var a,r,n;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,r=a.cluster,t.next=4,e.store.fetchDetail(e.props.match.params);case 4:return n=e.store.detail.storageClassName,t.next=7,e.storageclass.fetchDetail({cluster:r,name:n});case 7:return t.next=9,e.store.getSnapshotType();case 9:return t.next=11,e.store.getKsVersion(a);case 11:e.ksVersion=t.sent;case 12:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,P.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"clone",type:"control",text:t("CLONE"),icon:"copy",action:"create",disabled:e.disableClone,onClick:function(){e.trigger("volume.clone",{})}},{key:"snapshot",type:"control",text:t("CREATE_SNAPSHOT"),icon:"copy",action:"create",disabled:e.disableSnapshot,onClick:function(){e.trigger("volume.create.snapshot",{detail:e.store.detail})}},{key:"expand",text:t("EXPAND"),icon:"scaling",action:"edit",disabled:e.allowExpand,onClick:function(){var t=e.store,a=t.detail,r=t.isSubmitting,n=(0,P.toJS)(a._originData),l=e.storageclass.getStorageSizeConfig();e.trigger("volume.expand",{isExpanding:r,shouldAlertVisible:a.inUse,detail:n,max:l.max,min:l.min,step:l.step})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:(0,P.toJS)(e.store.detail),success:e.returnTolist})}}]},e.getAttrs=function(){var a=e.store.detail,r=void 0===a?{}:a,n=r.createTime,l=r.creator,u=r.phase,o=r.capacity,i=r.namespace,c=r.accessMode,s=void 0===c?"-":c;if((0,E.default)(r))return null;var f=r.storageClassName||(0,_.default)(r,"annotations['volume.beta.kubernetes.io/storage-class']");return[{name:t("PROJECT"),value:i},{name:t("STATUS"),value:b.default.createElement("div",null,b.default.createElement(C.default,{type:u,name:t("VOLUME_STATUS_".concat(u.toUpperCase()))}))},{name:t("CAPACITY"),value:o},{name:t("ACCESS_MODE_TCAP"),value:s},{name:t("STORAGE_CLASS"),value:f},{name:t("PROVISIONER"),value:(0,_.default)(r,"annotations['volume.beta.kubernetes.io/storage-provisioner']","-")},{name:t("PERSISTENT_VOLUME"),value:(0,_.default)(r,"_originData.spec.volumeName","")},{name:t("CREATION_TIME_TCAP"),value:(0,R.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:l}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,p.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return b.default.createElement(k.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,name:(0,R.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),operations:this.getOperations(),icon:"storage",breadcrumbs:[{label:t("PERSISTENT_VOLUME_CLAIM_PL"),url:this.listUrl}]};return b.default.createElement(N.default,(0,i.default)({stores:e},a,{routes:(0,I.default)(this.props.match.path)}))}},{key:"name",get:function(){return"PERSISTENT_VOLUME_CLAIM"}},{key:"module",get:function(){return"volumes"}},{key:"authKey",get:function(){return"volumes"}},{key:"listUrl",get:function(){var e=(0,P.toJS)(this.store.detail).isFedManaged,t=this.props.match.params,a=t.workspace,r=t.cluster,n=t.namespace;return a?e?"/".concat(a,"/federatedprojects/").concat(n,"/").concat(this.module):"/".concat(a,"/clusters/").concat(r,"/projects/").concat(n,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}},{key:"disableClone",get:function(){return this.getDisAllowToDo("storageclass.kubesphere.io/allow-clone")}},{key:"disableSnapshot",get:function(){return(0,R.compareVersion)("".concat(this.ksVersion),"v3.3")<0||this.getDisAllowToDo("storageclass.kubesphere.io/allow-snapshot")}},{key:"allowExpand",get:function(){var e=(0,_.default)(this.storageclass.detail,"allowVolumeExpansion",!1);return!!("Pending"===this.store.detail.phase)||!e}}]),r}(b.default.Component),o=(0,g.default)(u.prototype,"ksVersion",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=u))||l)||l)||l;a.default=x},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(939)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(190));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,i.default)(a,e);var t=m(a);function a(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(this,a),(e=t.call(this,"volumes")).getApi=function(t){var a=t.namespace,r=t.pvc,n=void 0===r?"":r;return"".concat(e.apiVersion,"/namespaces/").concat(a,"/persistentvolumeclaims/").concat(n)},e.handleParams=function(e){return(0,f.default)(e,["namespace","pvc"])},e.filters=r,e}return(0,u.default)(a,[{key:"fetchMetrics",value:function(e){(0,o.default)((0,s.default)(a.prototype),"fetchMetrics",this).call(this,p(p({},this.filters),e))}},{key:"monitoringMetrics",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interval:5e3};return this.fetchMetrics(t),setInterval((function(){e.fetchMetrics(p(p({},t),{},{autoRefresh:!0}))}),a.interval)}}]),a}(r(a(768)).default);t.default=h},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=r(a(3)),d=a(725),p=r(a(2901));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var h=function(e){(0,u.default)(a,e);var t=m(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"getWavePath",value:function(){var e=this.props.rate,t=100*(1-e),a=20*(.5-Math.abs(.5-e));return"\n      M0 ".concat(t,"\n      \n      Q ").concat(12.5," ").concat(t+a,", ").concat(25," ").concat(t,"\n      T ").concat(50," ").concat(t,"\n\n      T ").concat(75," ").concat(t,"\n      T ").concat(100," ").concat(t,"\n\n      T ").concat(125," ").concat(t,"\n      T ").concat(150," ").concat(t,"\n\n      T ").concat(175," ").concat(t,"\n      T ").concat(200," ").concat(t,"\n\n      V 100\n      H 0\n\n      Z\n    ")}},{key:"render",value:function(){var e=this.props.className;return c.default.createElement("div",{className:(0,f.default)(p.default.container,e)},this.renderForeground(),this.renderCapacity())}},{key:"renderForeground",value:function(){var e=this.props.rate,t=(0,d.getSuitableValue)(e,"%");return c.default.createElement("div",{className:p.default.foreground},c.default.createElement("h3",null,t,"%"))}},{key:"renderCapacity",value:function(){var e="0 0 ".concat(100," ").concat(100),t=this.getWavePath();return c.default.createElement("svg",{width:"100%",height:"100%",viewBox:e,preserveAspectRatio:"none"},c.default.createElement("path",{className:p.default.wave,d:t}),c.default.createElement("path",{className:p.default.wave2,d:t}))}}]),a}(c.default.Component);t.default=h,h.propTypes={rate:s.default.number,className:s.default.string},h.defaultProps={rate:0}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(21)),i=n(r(49)),c=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=n(r(32)),y=n(r(16)),g=r(70),b=r(25),E=n(r(763)),_=n(r(729)),O=r(37),S=r(635),k=r(5),C=n(r(854)),R=n(r(874)),w=n(r(744)),P=n(r(2906));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var I=(0,g.inject)("rootStore")(l=(0,g.observer)(l=(0,S.trigger)(l=function(e){(0,d.default)(n,e);var a,r=N(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return(e=r.call.apply(r,[this].concat(l))).store=new C.default,e.snapshotClass=new R.default,e.volumeStore=new E.default,e.fetchData=(0,c.default)(i.default.mark((function t(){var a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,t.next=3,e.store.fetchDetail(e.props.match.params);case 3:return t.next=5,e.snapshotClass.fetchDetail({cluster:a.cluster,name:e.store.detail.snapshotClassName});case 5:case"end":return t.stop()}}),t)}))),e.getVolumeInfo=function(){var t=e.props.match.params,a=e.store.detail.snapshotSourceName;e.volumeStore.fetchDetail(T(T({},t),{},{name:a}))},e.showApply=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=(0,k.toJS)(e.snapshotClass).detail;return!(0,v.default)(n)&&globals.app.hasPermission({module:"volumes",action:"create",project:r,cluster:a})},e.getOperations=function(){return[{key:"edit",text:t("EDIT_YAML"),show:"success"===e.store.detail.backupStatus,onClick:function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=e.store.detail;e.trigger("volume.snapshot.yaml.edit",{store:e.store,detail:n._originData,cluster:a,namespace:r,success:e.fetchData})}},{key:"apply",icon:"storage",text:t("CREATE_VOLUME"),show:e.showApply()&&"success"===e.store.detail.backupStatus,onClick:function(){var t=e.props.match.params,a=t.cluster,r=t.namespace;e.trigger("volume.create",{fromSnapshot:!0,module:"persistentvolumeclaims",cluster:a,namespace:r,store:new E.default,noCodeEdit:!0,extendformTemplate:{spec:{resources:{requests:{storage:(0,y.default)(e.store,"detail.restoreSize")}},storageClassName:(0,y.default)(e.volumeStore,"detail.storageClassName"),dataSource:{name:(0,y.default)(e.store,"detail.name"),kind:"VolumeSnapshot",apiGroup:"snapshot.storage.k8s.io"}}}})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:(0,k.toJS)(e.store.detail),success:e.returnTolist})}}]},e.getAttrs=function(){var a=e.store.detail,r=void 0===a?{}:a,n=r.createTime,l=r.restoreSize,u=r.backupStatus,o=void 0===u?"":u,i=r.creator,c=r.errorMessage,s=r.namespace,f=r.snapshotClassName;return(0,v.default)(r)?null:[{name:t("PROJECT"),value:s},{name:t("STATUS"),value:h.default.createElement("div",null,h.default.createElement(_.default,{type:o,name:t("CREATE_STATUS_".concat(o.toUpperCase()))})," ",!(0,v.default)(c)&&h.default.createElement(b.Tooltip,{content:c},h.default.createElement(b.Icon,{name:"question"})))},{name:t("CAPACITY"),value:l},{name:t("VOLUME_SNAPSHOT_CLASS"),value:f},{name:t("CREATION_TIME_TCAP"),value:(0,O.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:i}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,f.default)(n,[{key:"componentDidMount",value:(a=(0,c.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:this.getVolumeInfo();case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return h.default.createElement(b.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,O.getDisplayName)(this.store.detail),operations:this.getOperations(),attrs:this.getAttrs(),icon:"snapshot",breadcrumbs:[{label:t("VOLUME_SNAPSHOT_PL"),url:this.listUrl}]};return h.default.createElement(w.default,(0,u.default)({stores:e},a,{routes:(0,P.default)(this.props.match.path)}))}},{key:"name",get:function(){return"VOLUME_SNAPSHOT"}},{key:"module",get:function(){return"volume-snapshots"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}}]),n}(h.default.Component))||l)||l)||l;a.default=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(5),h=r(70),v=n(r(16)),y=n(r(32)),g=r(25),b=n(r(729)),E=r(37),_=r(635),O=r(836),S=n(r(1388)),k=n(r(816)),C=n(r(2909)),R=n(r(2910));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,h.inject)("rootStore")(l=(0,h.observer)(l=(0,_.trigger)(l=function(e){(0,s.default)(r,e);var a=D(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new S.default,e.fetchData=function(t){var a=e.props.match.params,r=a.cluster,n=a.namespace,l=a.name;e.store.fetchDetail&&e.store.fetchDetail(P({cluster:r,namespace:n,name:l,type:e.type},t))},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT"),type:"control",action:"edit",onClick:function(){return e.trigger("alerting.policy.create",{detail:(0,m.toJS)(e.store.detail),module:e.store.module,cluster:e.props.match.params.cluster,title:t("EDIT_ALERTING_POLICY"),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail);if(!(0,y.default)(a)){var r=(0,v.default)(a,"labels.severity"),n=O.SEVERITY_LEVEL.find((function(e){return e.value===r})),l=(0,v.default)(a,"alerts",[]),u=(0,v.default)(l,"".concat(l.length-1,".activeAt"));return[{name:t("STATUS"),value:p.default.createElement(b.default,{type:a.state,name:t("ALERT_RULE_".concat(a.state.toUpperCase()),{defaultValue:a.state})})},{name:t("SEVERITY"),value:n?p.default.createElement(g.Tag,{type:n.type},t(n.label)):p.default.createElement(g.Tag,null,r)},{name:t("HEALTH_STATUS"),value:p.default.createElement(C.default,{detail:a})},{name:t("THRESHOLD_DURATION"),value:a.duration},{name:t("ACTIVATION_TIME"),value:u?(0,E.getLocalTime)(u).format("YYYY-MM-DD HH:mm:ss"):"-"}]}},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(g.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:"builtin"===this.type?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("ALERTING_POLICY_PL"),url:this.listUrl}]};return p.default.createElement(k.default,(0,u.default)({stores:e,routes:(0,R.default)(this.props.match.path)},a))}},{key:"module",get:function(){return"alert-rules"}},{key:"name",get:function(){return"ALERTING_POLICY"}},{key:"type",get:function(){return this.props.match.url.indexOf("alert-rules/builtin")>0?"builtin":""}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace,r=e.workspace,n=this.type;return"".concat(r?"/".concat(r):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"","/alert-rules").concat(n?"?type=".concat(n):"")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(p.default.Component))||l)||l)||l;a.default=T},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(651)),v=n(r(16)),y=r(5),g=r(58),b=r(725),E=n(r(1451)),_=n(r(1025)),O=r(25),S=n(r(723)),k=n(r(2956)),C=n(r(1452)),R=n(r(2961));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=["namespace_pod_count","namespace_deployment_count","namespace_statefulset_count","namespace_daemonset_count","namespace_job_count","namespace_cronjob_count","namespace_pvc_count","namespace_service_count","namespace_secret_count","namespace_configmap_count","namespace_ingresses_extensions_count"],N=["namespace_cpu_usage","namespace_memory_usage_wo_cache"],I=(0,m.inject)("rootStore")(l=(0,m.observer)(l=function(e){(0,s.default)(r,e);var a=D(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.fetchMetrics(),t.overviewStore.fetchResourceStatus(e)},t.fetchMetrics=function(e){var a=t.state,r=a.resourceType,n=a.range;"application"===r?t.appResourceMonitorStore.fetchMetrics(P(P(P({},t.props.match.params),{},{metrics:T,step:"".concat(Math.floor(n/10),"s"),times:10,fillZero:!0},e),{},{autoRefresh:!1})):t.physicalResourceMonitorStore.fetchMetrics(P(P(P({},t.props.match.params),{},{metrics:N,step:"".concat(Math.floor(n/40),"s"),times:40,fillZero:!0},e),{},{autoRefresh:!1}))},t.getResourceData=function(){var e=(0,y.toJS)(t.overviewStore.resource),a=e.quota,r=void 0===a?{}:a,n=e.status,l=void 0===n?{}:n,u=r.used||{};return[{key:"pods",icon:g.ICON_TYPES.pods,name:"POD",routeName:"pods",num:u["count/pods"],warnNum:l.pods,metric:"namespace_pod_count"},{key:"deployments",icon:g.ICON_TYPES.deployments,name:"DEPLOYMENT",routeName:"deployments",num:u["count/deployments.apps"],warnNum:l.deployments,metric:"namespace_deployment_count"},{key:"statefulsets",icon:g.ICON_TYPES.statefulsets,name:"STATEFULSET",routeName:"statefulsets",num:u["count/statefulsets.apps"],warnNum:l.statefulsets,metric:"namespace_statefulset_count"},{key:"daemonsets",icon:g.ICON_TYPES.daemonsets,name:"DAEMONSET",routeName:"daemonsets",num:u["count/daemonsets.apps"],warnNum:l.daemonsets,metric:"namespace_daemonset_count"},{key:"jobs",icon:g.ICON_TYPES.jobs,name:"JOB",routeName:"jobs",num:u["count/jobs.batch"],metric:"namespace_job_count"},{key:"cronjobs",icon:g.ICON_TYPES.cronjobs,name:"CRONJOB",routeName:"cronjobs",num:u["count/cronjobs.batch"],metric:"namespace_cronjob_count"},{key:"volumes",icon:g.ICON_TYPES.volumes,name:"PERSISTENT_VOLUME_CLAIM",routeName:"volumes",num:u.persistentvolumeclaims||u["count/persistentvolumeclaims"],warnNum:l["persistent-volume-claims"],metric:"namespace_pvc_count"},{key:"services",icon:g.ICON_TYPES.services,name:"SERVICE",routeName:"services",num:u["count/services"],metric:"namespace_service_count"},{key:"routes",icon:g.ICON_TYPES.ingresses,name:"ROUTE",routeName:"ingresses",num:u["count/ingresses.extensions"],metric:"namespace_ingresses_extensions_count"}]},t.handleResouceTypeChange=function(e){t.setState({resourceType:e},(function(){t.fetchMetrics()}))},t.handleRangeChange=function(e){t.setState({range:e},(function(){t.fetchMetrics()}))},t.state={resourceType:"application",range:43200},t.overviewStore=new E.default,t.appResourceMonitorStore=new _.default,t.physicalResourceMonitorStore=new _.default,t.fetchData(t.props.match.params),t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){(0,h.default)(e.match.params,this.props.match.params)||this.fetchData(this.props.match.params)}},{key:"componentDidMount",value:function(){(0,b.startAutoRefresh)(this,{method:"fetchMetrics",interval:1e4,leading:!1})}},{key:"componentWillUnmount",value:function(){(0,b.stopAutoRefresh)(this)}},{key:"renderApplicationResource",value:function(){var e=this,t=(0,y.toJS)(this.overviewStore.resource).isLoading,a=this.appResourceMonitorStore,r=a.data,n=a.isLoading,l=a.isRefreshing,o=this.getResourceData();return p.default.createElement(O.Loading,{spinning:t},p.default.createElement("div",{className:R.default.resources},o.filter((function(e){return!e.disabled})).map((function(t){return p.default.createElement(k.default,(0,u.default)({},e.props.match.params,t,{metrics:(0,v.default)(r,"".concat(t.metric,".data.result")),isMetricsLoading:n||l}))}))))}},{key:"renderPhysicalResource",value:function(){var e=this,a=this.physicalResourceMonitorStore,r=a.data,n=a.isLoading,l=a.isRefreshing,u=this.timeOptions.find((function(t){return t.value===e.state.range}))||{};return p.default.createElement("div",null,p.default.createElement(C.default,{type:"cpu",title:t("CPU_USAGE_TIME",{time:u.label}),metrics:(0,v.default)(r,"namespace_cpu_usage.data.result"),isLoading:n||l,showDay:u.value>=172800}),p.default.createElement(C.default,{type:"memory",title:t("MEMORY_USAGE_TIME",{time:u.label}),metrics:(0,v.default)(r,"namespace_memory_usage_wo_cache.data.result"),isLoading:n||l,showDay:u.value>=172800}))}},{key:"renderHeader",value:function(){return p.default.createElement("div",{className:R.default.header},p.default.createElement(O.RadioGroup,{mode:"button",value:this.state.resourceType,onChange:this.handleResouceTypeChange,size:"small"},p.default.createElement(O.RadioButton,{value:"application"},t("APPLICATION_RESOURCE_PL")),p.default.createElement(O.RadioButton,{value:"physical"},t("PHYSICAL_RESOURCE_PL"))),p.default.createElement(O.Select,{className:R.default.timeSelect,defaultValue:this.state.range,options:this.timeOptions,onChange:this.handleRangeChange}))}},{key:"render",value:function(){var e=this.state.resourceType;return p.default.createElement(S.default,{className:R.default.wrapper,title:t("RESOURCE_STATUS")},this.renderHeader(),"application"===e?this.renderApplicationResource():this.renderPhysicalResource())}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"namespace",get:function(){return(0,v.default)(this.props.match,"params.namespace")}},{key:"cluster",get:function(){return(0,v.default)(this.props.match,"params.cluster")}},{key:"timeOptions",get:function(){return[{label:t("LAST_TIME_H",{num:1}),value:3600},{label:t("LAST_TIME_H",{num:2}),value:7200},{label:t("LAST_TIME_H",{num:5}),value:18e3},{label:t("LAST_TIME_H",{num:12}),value:43200},{label:t("LAST_TIME_D",{num:1}),value:86400},{label:t("LAST_TIME_D",{num:2}),value:172800},{label:t("LAST_TIME_D",{num:3}),value:259200},{label:t("LAST_TIME_D",{num:7}),value:604800}]}}]),r}(p.default.Component))||l)||l;a.default=I},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u=r(a(49)),o=r(a(136)),i=r(a(50)),c=r(a(91)),s=r(a(12)),f=r(a(13)),d=r(a(74)),p=(r(a(92)),a(5)),m=a(37),h=(n=function(){function e(){(0,s.default)(this,e),(0,c.default)(this,"resource",l,this)}var t;return(0,f.default)(e,[{key:"getPath",value:function(e){var t=e.cluster,a=e.namespace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"fetchResourceStatus",value:(t=(0,i.default)(u.default.mark((function e(t){var a,r,n,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resource.isLoading=!0,e.next=3,Promise.all([(0,m.to)(request.get("kapis/resources.kubesphere.io/v1alpha2".concat(this.getPath(t),"/quotas"))),(0,m.to)(request.get("kapis/resources.kubesphere.io/v1alpha2".concat(this.getPath(t),"/abnormalworkloads")))]);case 3:a=e.sent,r=(0,o.default)(a,2),n=r[0],l=r[1],this.resource={quota:n.data,status:l.data,isLoading:!1};case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),l=(0,d.default)(n.prototype,"resource",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{quota:{},status:{},isLoading:!0}}}),(0,d.default)(n.prototype,"fetchResourceStatus",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchResourceStatus"),n.prototype),n);t.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(37),p=r(725),m=n(r(2959)),h=n(r(2960));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(r,e);var a=v(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.type,r=e.title,n=e.metrics,u=e.showDay,o=(0,p.getAreaChartOps)({title:r,unitType:a,legend:["VALUE"],data:n,xFormatter:function(e){return(0,d.getLocalTime)(1e3*Number(e)).format(u?t("Do HH:mm"):"HH:mm")}});return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement("div",{className:h.default.chartWrapper},f.default.createElement("div",{className:h.default.title},r),f.default.createElement("div",{className:h.default.chart},f.default.createElement(m.default,(0,l.default)({width:"100%",height:120,bgColor:"transparent"},o)))))}}]),r}(f.default.Component);a.default=y},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(16)),f=n(r(300)),d=n(r(32)),p=n(r(0)),m=r(25),h=n(r(723)),v=r(37),y=n(r(2971));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,o.default)(r,e);var a=g(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.detail,a=(0,v.cpuFormat)((0,s.default)(e,"limit.default.cpu")),r=(0,v.cpuFormat)((0,s.default)(e,"limit.defaultRequest.cpu")),n=(0,v.memoryFormat)((0,s.default)(e,"limit.default.memory")),l=(0,v.memoryFormat)((0,s.default)(e,"limit.defaultRequest.memory")),u=globals.config.supportGpuType,o=(0,s.default)(e,"limit.defaultRequest",{}),i=u.filter((function(e){return Object.keys(o).some((function(t){return(0,f.default)(t,e)}))})),c=(0,d.default)(i)?{}:{value:o["".concat(i[0])],type:i};return p.default.createElement(h.default,{title:t("DEFAULT_CONTAINER_QUOTA_PL")},p.default.createElement("div",{className:y.default.content},p.default.createElement("div",{className:y.default.contentItem},p.default.createElement(m.Icon,{name:"cpu",size:40}),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,r?t("CPU_REQUEST_CORE",{value:r}):t("NO_REQUEST_TCAP")),p.default.createElement("p",null,t("CPU_REQUEST_LOW"))),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,a?t("CPU_LIMIT_CORE",{value:a}):t("NO_LIMIT_TCAP")),p.default.createElement("p",null,t("CPU_LIMIT_LOW")))),p.default.createElement("div",{className:y.default.contentItem},p.default.createElement(m.Icon,{name:"memory",size:40}),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,l?t("MEMORY_REQUEST_MIB",{value:l}):t("NO_REQUEST_TCAP")),p.default.createElement("p",null,t("MEMORY_REQUEST_SCAP"))),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,n?t("MEMORY_LIMIT_MIB",{value:n}):t("NO_LIMIT_TCAP")),p.default.createElement("p",null,t("MEMORY_LIMIT_SCAP")))),p.default.createElement("div",{className:y.default.contentItem},p.default.createElement("img",{src:"/assets/GPU.svg",size:48}),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,c.value?c.type:t("NONE")),p.default.createElement("p",null,t("GPU_TYPE_SCAP"))),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,c.value?c.value:t("NO_LIMIT_TCAP")),p.default.createElement("p",null,t("GPU_LIMIT_SCAP"))))))}}]),r}(p.default.Component);a.default=b},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.detail,r=(0,i.useState)([]),n=(0,o.default)(r,2),l=n[0],v=n[1];return(0,i.useEffect)((function(){if(a.used){var e=Object.entries(f.QUOTAS_MAP).map((function(e){var t=(0,o.default)(e,2);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({label:t[0]},t[1])}));Object.entries(a.used).forEach((function(t){var a=(0,o.default)(t,1)[0],r=e.find((function(e){return e.name===a}));(0,s.default)(r)&&e.push({label:a,name:a})})),v(e)}}),[a]),i.default.createElement(d.default,{className:m.default.wrapper,title:t("PROJECT_QUOTA_PL")},l.map((function(e){var t=e.label,r=e.name;return i.default.createElement(p.default,{key:t,name:t,total:(0,c.default)(a,'hard["'.concat(r,'"]')),used:(0,c.default)(a,'used["'.concat(r,'"]'),0),left:(0,c.default)(a,'left["'.concat(r,'"]'))})})))};var u=l(r(21)),o=l(r(136)),i=n(r(0)),c=l(r(16)),s=l(r(32)),f=r(58),d=l(r(723)),p=l(r(2972)),m=l(r(2975));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}},function(e,t,a){e.exports={container:"_2IoxQdjwa3SEzKjm6nULdr"}},function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getDateStr=a.getTimeOptions=a.getTimeLabel=a.getLastTimeStr=a.getTimeStr=a.getTimes=a.getStep=a.getMinutes=void 0;var n=r(37),l=function(e){var t=e.slice(-1),a=parseFloat(e);switch(t){default:case"s":return a/60;case"m":return a;case"h":return 60*a;case"d":return 24*a*60}};a.getMinutes=l;a.getStep=function(e,t){return"".concat(parseInt(l(e)/t,10),"m")};a.getTimes=function(e,t){return Math.floor(l(e)/l(t))};var u=function(e){var t=Math.round(parseFloat(e)/60);return t<60?"".concat(t,"m"):(t=Math.round(t/60))<24?"".concat(t,"h"):"".concat(Math.round(t/24),"d")};a.getTimeStr=u;a.getLastTimeStr=function(e,t){var a=e.slice(-1),r="".concat(parseFloat(e)*t).concat(a),n=60*l(r);return u(n)};var o=function(e){var a=e.slice(-1).toUpperCase();return t("TIME_".concat(a),{num:parseInt(e,10)})};a.getTimeLabel=o;a.getTimeOptions=function(e){return e.map((function(e){return{label:o(e),value:e}}))};a.getDateStr=function(e){var a=(0,n.getLocalTime)(1e3*e);return"".concat(a.format(t("MMMM Do YYYY"))," ").concat(a.format("HH:mm:ss"))}},function(e,t,a){e.exports={main:"_2UmmmxPbPExLp1S1tBV0Rw",header:"_2RhnBms20LV76wawA2oEVY",search:"_10avw8k5RKcCXh6P3wZbJu",actions:"DVsgT4Y8cfj7CcE2ypA2E",body:"_1uGm0ldcM0OEYLpBAuTn1O",footer:"_1JoaSQU0RUCOUerLBPuhUh",item:"_1n3J7vD1dSQYm_7w1F7Dui",expanded:"_3J24Eik-TWaxJALzYJK1eU",arrow:"_28StVPadWq7nPFLzDa2iyw",itemMain:"_2TwTn6iT4AYnuAOorDHp3X",content:"baWkJixTVh9pnSgRx3Zd4",text:"GWMCCnin-oEgd2Nzfs-RM",monitors:"HpBVVX0y1hExp1SWKsQlo",itemExtra:"_354nbOj8iEgp7NwMJiwHBV",icon:"_1aEts8wuu51zg7dLr94Mad",indicator:"_3sJL8q9EfyMajUnrw7-OjJ",statusTip:"_3kf0HCRAnfFT0Yv-FV5CNR",charts:"SSkovUn9sqfxbHbq179rj",podip:"_1JuFlUyDOhvtuYh0cW9EqZ",ipTip:"_2rSApFJQWguL2kYTRY8hcS",containers:"_3vu9Ws9d76G-tPwkX-bZ_N",loading:"_2FePZ9n_TRAuqiQgTb21TE",empty:"nf8a4h-fk0cjzQXCu0yeq",cluster:"_1SY7dXQl4iYmAYKqtJcTQ2"}},,,,,,,,,,,function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=r(25),p=l(r(940)),m=l(r(3109));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,i.default)(r,e);var a=h(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).valueRenderer=function(e){return t("CLUSTER_VALUE",{value:e.value})},e.optionRenderer=function(e){return f.default.createElement("div",null,f.default.createElement("div",null,e.value),!e.cluster.isReady&&f.default.createElement("div",null,f.default.createElement(p.default,{data:e.cluster,noTip:!0})))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,t=e.cluster,a=e.clusters,r=e.onChange;return f.default.createElement(d.Select,{className:m.default.select,value:t,onChange:r,options:a,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer})}}]),r}(f.Component);a.default=v},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(49)),u=r(a(109)),o=r(a(21)),i=r(a(50)),c=r(a(56)),s=r(a(12)),f=r(a(13)),d=r(a(19)),p=r(a(20)),m=r(a(18)),h=r(a(74)),v=r(a(16)),y=a(5),g=r(a(186));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var O=(n=function(e){(0,d.default)(r,e);var t,a=_(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).getResourceUrl=function(t){var a=t.workspace,r=(0,c.default)(t,["workspace"]);return"kapis/tenant.kubesphere.io/v1alpha2/workspaces/".concat(a).concat(e.getPath(r),"/federatednamespaces")},e.getWatchListUrl=function(t){var a=t.workspace,r=(0,c.default)(t,["workspace"]);return"".concat(e.apiVersion,"/watch").concat(e.getPath(r),"/federated").concat(e.module,"?labelSelector=kubesphere.io/workspace=").concat(a)},e}return(0,f.default)(r,[{key:"fetchList",value:(t=(0,i.default)(l.default.mark((function e(){var t,a,r,n,o,i,s,f,d=this,p=arguments;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},a=t.workspace,r=t.namespace,n=t.more,o=t.devops,i=(0,c.default)(t,["workspace","namespace","more","devops"]),this.list.isLoading=!0,i.sortBy||void 0!==i.ascending||(i.sortBy="createTime"),i.limit!==1/0&&-1!==i.limit||(i.limit=-1,i.page=1),i.limit=i.limit||10,e.next=7,request.get(this.getResourceUrl({workspace:a,namespace:r,devops:o}),i);case 7:return s=e.sent,f=(0,v.default)(s,"items",[]).map((function(e){return E({},g.default.federated(d.mapper)(e))})),this.list.update(E(E({data:n?[].concat((0,u.default)(this.list.data),(0,u.default)(f)):f,total:s.totalItems||s.total_count||f.length||0},i),{},{limit:Number(i.limit)||10,page:Number(i.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",f);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(r(a(737)).default),(0,h.default)(n.prototype,"fetchList",[y.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),n);t.default=O},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(70),p=r(5),m=n(r(16)),h=n(r(723)),v=n(r(1471));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=(0,d.inject)("detailStore","versionStore")(l=(0,d.observer)(l=function(e){(0,i.default)(r,e);var a=y(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"componentDidMount",value:function(){var e=(0,m.default)(this.props.match,"params.appId","");0===(0,m.default)(this.props.versionStore,"list.data",[]).length&&this.props.versionStore.fetchList({app_id:e})}},{key:"render",value:function(){var e=(0,m.default)(this.props.detailStore,"detail",{}),a=(0,m.default)(this.props.versionStore,"list.data",[]);return f.default.createElement(h.default,{title:t("APP_INFORMATION")},f.default.createElement(v.default,{app:e,versions:(0,p.toJS)(a)}))}}]),r}(f.default.Component))||l)||l;a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(3)),p=n(r(137)),m=n(r(953)),h=n(r(3126)),v=n(r(3128));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=y(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"filterImages",value:function(e){return"string"==typeof e?e.split(",").map((function(e){return e.trim()})).filter(Boolean):Array.isArray(e)?e:[]}},{key:"renderVersionTable",value:function(){var e=this.props.versions;return s.default.createElement("table",{className:v.default.versions},s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,t("VERSION_NUMBER")),s.default.createElement("th",null,t("UPDATE_LOG")))),s.default.createElement("tbody",null,e.map((function(e){var a=e.name,r=e.description,n=e.status_time,l=e.version_id;return s.default.createElement("tr",{key:l},s.default.createElement("td",null,s.default.createElement("p",{className:v.default.name},a),s.default.createElement("p",{className:v.default.date},(0,p.default)(n).format(t("YYYY-MM-DD")))),s.default.createElement("td",null,s.default.createElement("p",{className:v.default.desc},r||"-")))}))))}},{key:"renderAppDeployAgreement",value:function(){var e=this.props,a=e.isCheck,r=e.onChange;return s.default.createElement("div",{className:v.default.agree},s.default.createElement("p",null,t("APP_DEPLOY_AGREEMENT_1")),s.default.createElement("p",null,t.html("APP_DEPLOY_AGREEMENT_2")),s.default.createElement("div",{className:"margin-t12"},s.default.createElement(Checkbox,{checked:a,onChange:r},t("APP_DEPLOY_AGREEMENT_CHEKC"))))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.app,n=r.abstraction,l=r.screenshots;return s.default.createElement("div",{className:(0,d.default)(v.default.appInfo,a)},s.default.createElement("div",null,s.default.createElement("h3",{className:v.default.title},t("APP_INTRODUCTION")),s.default.createElement(m.default,{source:n||t("NONE")})),s.default.createElement("div",null,s.default.createElement("h3",{className:v.default.title},t("APP_SCREENSHOTS")),s.default.createElement(h.default,{images:this.filterImages(l)})),s.default.createElement("div",null,s.default.createElement("h3",{className:v.default.title},t("APP_VERSIONS_TITLE")),this.renderVersionTable()))}}]),r}(s.default.PureComponent);a.default=g,g.propTypes={className:f.default.string,app:f.default.object.isRequired,versions:f.default.array},g.defaultProps={app:{},versions:[]}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(71)),i=n(r(21)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(728)),v=l(r(726)),y=n(r(1156)),g=n(r(1473)),b=r(37),E=n(r(3130));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=(0,v.default)({store:new g.default,module:"apps",name:"RELEASE_RECORD",rowKey:"status_time"})(u=function(e){(0,f.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).getData=function(t){var a=e.props.match.params.appId;e.props.store.fetchList(O({app_id:a},t))},e.getColumns=function(){return[{title:t("TIME"),dataIndex:"status_time",width:"20%",render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"15%",render:function(e){return m.default.createElement(y.default,{type:e,name:e})}},{title:t("VERSION"),dataIndex:"version_name",isHideable:!0,width:"15%"},{title:t("REJECTION_REASON"),key:"reject",isHideable:!0,width:"40%",render:function(e,t){return t.message||"-"}},{title:t("OPERATOR"),dataIndex:"operator",isHideable:!0,width:"10%"}]},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.tableProps;return m.default.createElement(v.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),m.default.createElement("div",{className:E.default.title},t("APP_REVIEW")),m.default.createElement(h.default,(0,o.default)({},e,{tableActions:this.tableActions,itemActions:[],columns:this.getColumns(),hideSearch:!0})))}},{key:"tableActions",get:function(){return O(O({},this.props.tableProps.tableActions),{},{onCreate:null,selectActions:[]})}}]),r}(m.default.Component))||u;a.default=k},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(19)),u=r(a(20)),o=r(a(18));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var c=function(e){(0,l.default)(a,e);var t=i(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).resourceName="audits",e.sortKey="status_time",e}return a}(r(a(844)).default);t.default=c},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(21)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(70),v=n(r(1)),y=n(r(32)),g=n(r(16)),b=r(25),E=n(r(723)),_=n(r(1323)),O=r(787),S=n(r(3132)),k=n(r(1476));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=(0,h.observer)((o=u=function(e){(0,f.default)(r,e);var a=w(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.props.match.params,a=t.appId,r=t.workspace,l=n.props.appStore.isAdmin,u=l?O.STORE_QUERY_STATUS:n.store.defaultStatus;n.store.fetchList(R({app_id:a,workspace:r,status:u},e))},n.getPagination=function(){var e=n.store.list;return{page:e.page,limit:e.limit,total:e.total}},n.handleExpandExtra=function(e){var t=(0,g.default)(n.store,"list.data",[]);n.store.list.data=t.map((function(t){return R(R({},t),{},{isExpand:t.version_id===e&&!t.isExpand})}))},n.handleSearch=function(e){n.searchValue=e,n.fetchData({keyword:e})},n.handleRefresh=function(){var e=n.searchValue?{keyword:n.searchValue}:{};n.fetchData(e)},n.handlePage=function(e){n.fetchData({page:e})},n.addVersion=function(){return n.setState({uploadModal:!0})},n.hideModal=function(){return n.setState({uploadModal:!1})},n.handleCreate=function(e){n.store.create(e).then((function(){n.setState({uploadModal:!1}),b.Notify.success({content:t("CREATE_SUCCESSFUL")}),n.fetchData()}))},n.renderHeader=function(){var e=n.props.appStore.isAdmin;return m.default.createElement("div",{className:k.default.header},m.default.createElement(b.InputSearch,{className:k.default.search,name:"search",placeholder:t("SEARCH_BY_NAME"),onSearch:n.handleSearch}),m.default.createElement("div",{className:k.default.actions},m.default.createElement(b.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh}),!e&&n.enabledActions.includes("manage")&&m.default.createElement(b.Button,{onClick:n.addVersion},t("UPLOAD_NEW_VERSION")," ")))},n.renderFooter=function(){var e=n.getPagination(),a=e.total,r=e.page,l=e.limit;return m.default.createElement(b.Level,{className:k.default.footer},m.default.createElement(b.LevelLeft,null,t("TOTAL_ITEMS",{num:a})),m.default.createElement(b.LevelRight,null,m.default.createElement(b.Pagination,{page:r,total:a,limit:l,onChange:n.handlePage})))},n.state={uploadModal:!1},n.store=n.props.versionStore,n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderContent",value:function(){var e=this,a=this.store.list,r=a.data,n=a.isLoading,l=this.props,u=l.match.params,o=l.appStore,i=l.clusters,c=o.isAdmin,s=o.detail||{};return n?m.default.createElement(b.Loading,{className:k.default.loading}):m.default.createElement("div",{className:k.default.body},(0,y.default)(r)?m.default.createElement("div",{className:k.default.empty},t("NO_RESOURCE_FOUND")):r.map((function(t){return m.default.createElement(S.default,{key:t.version_id,isAdmin:c,appDetail:s,detail:t,params:u,store:e.store,appStore:o,clusters:i,enabledActions:e.enabledActions,handleExpandExtra:e.handleExpandExtra})})))}},{key:"renderModals",value:function(){var e=this.props.match.params,a=e.appId,r=e.workspace,n=this.store.isSubmitting;return m.default.createElement("div",null,m.default.createElement(_.default,{title:t("UPLOAD_NEW_VERSION"),description:t("UPLOAD_NEW_VERSION_DESC"),icon:"templet",visible:this.state.uploadModal,appId:a,workspace:r,isSubmitting:n,type:"ADD_VERSION",onOk:this.handleCreate,onCancel:this.hideModal}))}},{key:"render",value:function(){var e=this.props,a=e.hideHeader,r=e.hideFooter;return m.default.createElement(E.default,{className:k.default.main,title:t("VERSIONS")},m.default.createElement("div",{className:k.default.inner},!a&&this.renderHeader(),this.renderContent(),!r&&this.renderFooter(),this.renderModals()))}},{key:"enabledActions",get:function(){return this.props.match.params.workspace?globals.app.getActions({workspace:this.props.match.params.workspace,module:"app-templates"}):["manage"]}}]),r}(m.default.Component),u.propTypes={versionStore:v.default.object,appStore:v.default.object,match:v.default.object,hideHeader:v.default.bool,hideFooter:v.default.bool,onSearch:v.default.func,onRefresh:v.default.func,onPage:v.default.func},u.defaultProps={versionStore:{},appStore:{},match:{},hideHeader:!1,hideFooter:!1,onSearch:function(){},onRefresh:function(){},onPage:function(){}},l=o))||l;a.default=P},function(e,t,a){e.exports={main:"_3RsBOPqTSIO9U8W9rw7FXZ",header:"_12Agkrs2qKEvnlsCQuk1P7",search:"_3wEHtyer-RmdQNShfTnjwy",actions:"_2LnUPnba8kGi5ojNnufTwt",footer:"HMFMVptmxZyx8kO6TTV_s",item:"j7bcnGZE6qCsukA72vMci",itemMain:"_3_sYqp1scWFI8xP1zi_C1M",content:"_2OVcaaDJfwLdTObXoW1Qsf",more:"_3Co3dwP_Q9vMPyZrkvWpC3",loading:"_3xRw369cTNAcOPS2tUiGBv",empty:"a73qxVl2KPDTuAaZfRhvz"}},function(e,t,a){e.exports={main:"VCMz8Hvdx9QgwfqLBYxPD",inner:"_2duoQ3UI4nja9dVo5Tg6Gu",header:"_1ujEwOD8918eEmngftbE-m",search:"_2W8Nr8NQnrxEQ2OdUFu5Xc",actions:"_3rEgDuHImvyhfRvoItgVGa",body:"_1XFrIa2I7UREilolWDQxqn",footer:"tgtIGSTEm1TCZFeiKkxfr",item:"_3P8oPqxESDZBnojf9VjE16",itemMain:"_3juNmtluJH9n446teuR_C9",icon:"_1Zvv7LvLsTEIen0tCC3Ilz",status:"XqSQXZRHKWjcLvllQIDuo",content:"_1IAefV34zduIcEv3RyPzF0",more:"_3Y-jHnJCq-JnxpS5CZzSgw",itemExtra:"_3S4VI1sg0-UwM0-oTnhysO",expanded:"_36Bum4cJKwtY3pzfp-wlas",instances:"_3Jb0lzRYd1l_Wzc43lAhgD",loading:"_2s-2yo1WGoImJofeVFj_hy",empty:"_16rfxAHXWQIGauFhE4yfGa"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s=r(a(91)),f=r(a(12)),d=r(a(13)),p=r(a(135)),m=r(a(19)),h=r(a(20)),v=r(a(18)),y=r(a(74)),g=(r(a(92)),a(5)),b=r(a(1134));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var _=["workload_cpu_usage","workload_memory_usage_wo_cache","workload_net_bytes_transmitted","workload_net_bytes_received"],O=["workload_cpu_usage","workload_memory_usage_wo_cache","workload_net_bytes_transmitted","workload_net_bytes_received","replica"],S=(n=function(e){(0,m.default)(a,e);var t=E(a);function a(){var e;(0,f.default)(this,a);for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];return e=t.call.apply(t,[this].concat(n)),(0,s.default)(e,"namespaces",l,(0,p.default)(e)),(0,s.default)(e,"sort_metric_options",u,(0,p.default)(e)),(0,s.default)(e,"sort_metric",o,(0,p.default)(e)),(0,s.default)(e,"metrics_filter",i,(0,p.default)(e)),(0,s.default)(e,"changeNamespace",c,(0,p.default)(e)),e}return(0,d.default)(a,[{key:"fetchUrl",get:function(){return"".concat(this.apiVersion,"/namespaces/").concat(this.namespaces,"/workloads")}}]),a}(b.default),l=(0,y.default)(n.prototype,"namespaces",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,y.default)(n.prototype,"sort_metric_options",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _}}),o=(0,y.default)(n.prototype,"sort_metric",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _[0]}}),i=(0,y.default)(n.prototype,"metrics_filter",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.join("|")}}),c=(0,y.default)(n.prototype,"changeNamespace",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.namespaces=t,e.fetchAll()}}}),n);t.default=S},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(109)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(3)),m=r(a(651)),h=a(25),v=a(638),y=r(a(1121)),g=a(3351),b=r(a(3352)),E=r(a(3354)),_=r(a(3358)),O=r(a(3371));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var k=function(e){(0,i.default)(a,e);var t=S(a);function a(e){var r;return(0,u.default)(this,a),(r=t.call(this,e)).handleWrapperClick=function(e){if(e&&null===(0,v.findParent)(e.target,"ks-app-component")&&"app"===r.state.selectedType){var t=r.draggerRef.current.content.querySelector("[data-component='".concat(r.state.selectedData.name,"']"));t&&!t.contains(e.target)&&r.setState({selectedData:{},selectedType:"",selectedEdges:[]})}},r.toggleFullScreen=function(){r.setState((function(e){return{fullScreen:!e.fullScreen}}))},r.handleRefresh=function(){r.props.onFetch()},r.handleSelect=function(e,t){r.setState({selectedData:e,selectedType:t,selectedEdges:[].concat((0,l.default)(e.edges.in.map((function(e){return e.data.id}))),(0,l.default)(e.edges.out.map((function(e){return e.data.id}))))})},r.state={graph:(0,g.processData)(e.data,e.health),selectedData:{},selectedEdges:[],selectedType:"",fullScreen:!1},r.draggerRef=f.default.createRef(),r}return(0,o.default)(a,[{key:"getChildContext",value:function(){return{selectedData:this.state.selectedData,selectedType:this.state.selectedType,onSelectApp:this.handleSelect}}}]),(0,o.default)(a,[{key:"componentDidUpdate",value:function(e){var t=this;if(!(0,m.default)(this.props.data,e.data)||!(0,m.default)(this.props.health,e.health)){var a=(0,g.processData)(this.props.data,this.props.health);if(this.setState({graph:a}),this.state.selectedData&&this.state.selectedData.name){var r=a.nodes.find((function(e){return e.name===t.state.selectedData.name}));this.setState({selectedData:r})}}}},{key:"render",value:function(){var e=this.props,t=e.store,a=e.loading,r=e.className,l=this.state,u=l.graph,o=l.selectedType,i=l.selectedData,c=l.selectedEdges,s=l.fullScreen;return f.default.createElement("div",{className:(0,p.default)(r,O.default.graph,(0,n.default)({},O.default.fullScreen,s))},f.default.createElement("div",{className:O.default.loading},f.default.createElement(h.Loading,{spinning:a})),f.default.createElement(y.default,{className:O.default.dragger,contentClassName:O.default.mainContent,ref:this.draggerRef,onClick:this.handleWrapperClick,initialScale:.6,onFullScreen:this.toggleFullScreen,controlStyle:{right:o?420:20},onRefresh:this.handleRefresh},f.default.createElement("div",{className:O.default.graphContent},u.nodes.map((function(e){return f.default.createElement(E.default,{key:e.name,data:e})})),f.default.createElement("svg",{className:O.default.edgeWrapper},u.edges.map((function(e){return f.default.createElement(b.default,{key:e.data.id,data:e,selected:c.includes(e.data.id)})}))))),o&&f.default.createElement(_.default,{className:O.default.detail,type:o,data:i,store:t,fullScreen:s}))}}]),a}(f.default.Component);t.default=k,k.propTypes={data:d.default.shape({nodes:d.default.arrayOf(d.default.object),edges:d.default.arrayOf(d.default.object)}),health:d.default.object},k.defaultProps={data:{nodes:[],edges:[]},health:{}},k.childContextTypes={wrapperRef:d.default.object,selectedData:d.default.object,selectedType:d.default.string,onSelectApp:d.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=n(r(1168));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.metrics;return s.default.createElement("div",{className:p.default.trafficCard},e.map((function(e){return s.default.createElement("div",{key:e.title},s.default.createElement("div",{className:"h5"},isNaN(e.data)?t("NO_DATA"):"".concat(e.data," ").concat(e.unit)),s.default.createElement("p",null,s.default.createElement(d.Icon,{name:e.icon}),t(e.title)))})))}}]),r}(s.default.Component);a.default=h,h.propTypes={metrics:f.default.array},h.defaultProps={metrics:[]}},function(e,t,a){e.exports={title:"_3S8MQxb58sffym2et4n8QF",version:"_2JU6qDgSBfI1iYZtZVS3Ws",pods:"_1V_HSvgrXsa_TiulD8Xlhb",podItem:"_3LZMf_ISZNdvla2uknihgd",text:"_2ENvj_CljI53fH7AjUd3G7",icon:"_9VjTrVcUD9REGBJOtXHIr",status:"_3FU1QZhF2PEUekQrlD8kWP",running:"_3VnQpTLNm8LOyirY48l7qy",updating:"aqJNY2GpnZtzUBeTTSdxF"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(32)),p=r(25),m=n(r(741)),h=n(r(3376)),v=n(r(1504));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=y(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"shouldComponentUpdate",value:function(e){return e.loading!==this.props.loading}},{key:"renderContent",value:function(){var e=this.props,t=e.data,a=e.onItemClick;return(0,d.default)(t)?null:s.default.createElement("div",{className:v.default.cardContent},t.map((function(e){return s.default.createElement(h.default,{key:e.traceID,detail:e,onClick:a})})))}},{key:"renderEmpty",value:function(){return s.default.createElement("div",{className:v.default.empty},s.default.createElement("div",null,s.default.createElement("div",{className:v.default.icon},s.default.createElement(p.Icon,{name:"target",size:40})),s.default.createElement("p",null,s.default.createElement("strong",null,t("NO_DATA"))),s.default.createElement("p",null,t("TRACING_NO_DATA_DESC"))))}},{key:"renderHeader",value:function(){var e=this.props.operations;return s.default.createElement("div",{className:v.default.cardHeader},e&&s.default.createElement("div",{className:v.default.operations},e),t("TRACING"))}},{key:"render",value:function(){var e=this.props.loading;return s.default.createElement(m.default,{className:v.default.tracing,header:this.renderHeader(),empty:this.renderEmpty(),loading:e},this.renderContent())}}]),r}(s.default.Component);a.default=g,g.propTypes={className:f.default.string,data:f.default.array,loading:f.default.bool,operations:f.default.oneOfType([f.default.string,f.default.element,f.default.node]),onItemClick:f.default.func},g.defaultProps={prefix:"",data:[],onItemClick:function(){},loading:!1}},function(e,t,a){e.exports={tracing:"_2_q0DNdfMx9e5W7v9Si6gS",cardHeader:"_2p8zOOtwLXH4_1SstvLyYC",operations:"_2us2jWBpu0J5F5mLDoSYKh",cardContent:"bLd4-qXNqLMQXv55Rfooi",item:"_21M_0IBeqI3nFGS2xCskvz",header:"_30mNlGFkJHDVCiuEle9Ybl",title:"_1uRSfn8aYD8zmip-xjiUj",duration:"_2L_QSvChdOUhq425WQf0_B",durationBar:"_11R8VXXwf7HPMdd1k9DQWM",content:"_2q0NQ67t-oUZqLh5nHriY7",spanWrapper:"_2fWwhM3oMmksqBHDHXuTay",spans:"IrkUrsjvAGNLoRT_t4qj3",errorSpans:"_1oP4nMdyHintWuioJtC3oY",services:"Chnawuf8D5gcAjmZdcHNf",tag:"_1x47CjJvQTrdcFR4n-KgRt",startTime:"ywM5JVADUKn9T8f8Qohhv",empty:"_1dvYFA65StoQjFB8gJLX2L",icon:"_3dAwFztjwyNQJw8galB6Iz"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(32)),f=n(r(0)),d=n(r(1)),p=r(25),m=n(r(651)),h=n(r(274)),v=r(37),y=r(889),g=n(r(3377)),b=n(r(3379)),E=n(r(3381)),_=n(r(3384));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,o.default)(r,e);var a=O(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleMouseDown=function(e){e.offsetY<4&&(t.originPos=e.y,document.addEventListener("mousemove",t.handleResize,!1))},t.handleMouseUp=function(){document.removeEventListener("mousemove",t.handleResize,!1)},t.handleResize=function(e){var a=t.originPos-e.y;t.originPos=e.y;var r=t.detailPane.current,n=parseInt(getComputedStyle(r.parentNode,"").height,10),l=parseInt(getComputedStyle(r,"").height,10);l+a<n-83&&(r.style.height="".concat(l+a,"px"),t.listPane&&t.listPane.current&&(t.listPane.current.style.bottom="".concat(l+a,"px")))},t.handleSpanClick=function(e){t.setState({selectSpan:e})},t.hideSpanDetail=function(){t.setState({selectSpan:{}})},t.handleRangeChange=function(e){t.getViewedBounds=(0,y.createViewedBoundsFunc)({min:t.props.detail.startTime,max:t.props.detail.endTime,viewStart:e.viewStart,viewEnd:e.viewEnd}),t.setState(e)},t.state={selectSpan:{},viewStart:0,viewEnd:1},t.getViewedBounds=(0,y.createViewedBoundsFunc)({min:e.detail.startTime,max:e.detail.endTime,viewStart:0,viewEnd:1}),t.listPane=f.default.createRef(),t.detailPane=f.default.createRef(),t.originPos=0,t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.detail;(0,m.default)(a,e.detail)||(this.getViewedBounds=(0,y.createViewedBoundsFunc)({min:a.startTime,max:a.endTime,viewStart:0,viewEnd:1}),this.setState({selectSpan:{},viewStart:0,viewEnd:1})),this.detailPane&&this.detailPane.current&&(!(0,s.default)(this.state.selectSpan)&&(0,s.default)(t.selectSpan)?(this.detailPane.current.addEventListener("mousedown",this.handleMouseDown,!1),document.addEventListener("mouseup",this.handleMouseUp,!1)):(0,s.default)(this.state.selectSpan)&&!(0,s.default)(t.selectSpan)&&(this.detailPane.current.removeEventListener("mousedown",this.handleMouseDown,!1),document.removeEventListener("mouseup",this.handleMouseUp,!1),document.removeEventListener("mousemove",this.handleResize,!1)))}},{key:"componentWillUnmount",value:function(){this.detailPane&&this.detailPane.current&&(this.detailPane.current.removeEventListener("mousedown",this.handleMouseDown,!1),document.removeEventListener("mouseup",this.handleMouseUp,!1),document.removeEventListener("mousemove",this.handleResize,!1))}},{key:"getCoords",value:function(){for(var e=100/y.COORD_COUNT,t=[],a=0;a<y.COORD_COUNT;a++)t.push({percent:"".concat(a*e,"%")});return t.push({percent:"100%"}),t}},{key:"renderHeader",value:function(){var e=this.props.detail,a=e.traceName,r=e.traceID,n=e.duration,l=e.startTime,u=e.services,o=e.spans;if(!o)return null;var i=0;return o.forEach((function(e){i=Math.max(i,e.depth)})),f.default.createElement("div",{className:_.default.header},f.default.createElement(p.Icon,{name:"target",size:40}),f.default.createElement("div",{className:_.default.title},f.default.createElement("div",{className:_.default.name},a," ",f.default.createElement("span",null,r)),f.default.createElement("ul",null,f.default.createElement("li",null,f.default.createElement("span",null,t("START_TIME"),": "),f.default.createElement("span",null,(0,v.getLocalTime)(l/1e3).format("YYYY-MM-DD HH:mm:ss"))),f.default.createElement("li",null,f.default.createElement("span",null,t("Duration"),": "),f.default.createElement("span",null,(0,y.formatDuration)(n))),f.default.createElement("li",null,f.default.createElement("span",null,t("Called Services"),": "),f.default.createElement("span",null,u.length)),f.default.createElement("li",null,f.default.createElement("span",null,t("Called Depth"),": "),f.default.createElement("span",null,i)))),f.default.createElement("div",{className:_.default.close,onClick:this.props.onCancel},f.default.createElement(p.Icon,{name:"close",size:20,type:"light"})))}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.detail,l=a.onCancel,u=this.state.selectSpan,o=this.getCoords();return f.default.createElement(h.default,{visible:r,bodyClassName:_.default.body,onCancel:l,hideHeader:!0,hideFooter:!0,fullScreen:!0},this.renderHeader(),f.default.createElement("div",{className:_.default.content},f.default.createElement("div",{className:_.default.wrapper},f.default.createElement(p.Columns,{className:"is-gapless"},f.default.createElement(p.Column,{className:"is-3"},f.default.createElement("div",{className:_.default.leftPane},f.default.createElement("div",{className:_.default.timelineTitle},t("Services & Operations")))),f.default.createElement(p.Column,null,f.default.createElement("div",{className:_.default.rightPane},f.default.createElement("div",{className:_.default.timelineSelect},f.default.createElement(E.default,{data:n,viewRange:this.viewRange,onRangeChange:this.handleRangeChange})),f.default.createElement("svg",{className:_.default.coords},o.map((function(e){return f.default.createElement("line",{key:e.percent,y1:"0%",y2:"100%",x1:e.percent,x2:e.percent})})))))),f.default.createElement("ul",{className:_.default.listPane,ref:this.listPane,style:{bottom:(0,s.default)(u)?0:"50%"}},n.spans&&n.spans.map((function(t){return f.default.createElement(g.default,{key:t.spanID,span:t,selected:u.spanID===t.spanID,color:n.serviceColorMap[t.process.serviceName],getViewedBounds:e.getViewedBounds,onClick:e.handleSpanClick})}))),!(0,s.default)(u)&&f.default.createElement("div",{className:_.default.detailPane,ref:this.detailPane},f.default.createElement(b.default,{span:u,onClose:this.hideSpanDetail})))))}},{key:"viewRange",get:function(){return{viewStart:this.state.viewStart,viewEnd:this.state.viewEnd}}}]),r}(f.default.Component);a.default=S,S.propTypes={visible:d.default.bool,detail:d.default.object,onCancel:d.default.func},S.defaultProps={visible:!1,detail:{},onCancel:function(){}}},function(e,t,a){e.exports={graph:"_2QbHXodqDd2IHEjwUROIxT",cursorGuide:"_1lrCeprU84WiOS_4fpCBLg",scrubber:"iItn2qK_qu11_u1UURlwm",scrubberLine:"_3dtf14S4FmvMYN0TvYQuTv",coord:"_1BgtGWk2uDGdq2RVungzLU",coordLine:"_2aJZBiYerxhhnS1OUc4TKA",range:"_1GZb6kcnvOlH-_rFwzxFz3",hoverBlock:"cJtJ8Gc3yfaiFf3Uxr42t",clearBlock:"_2ljlMynj0Xv2Wkx50Vxjp3"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={modalBody:"_2emSCCZW7Any6zY9sbt0dh",body:"_3zk4pcFFwHI55jC3hhKShH",content:"_2AVQmoTGa5M_aaHwB5m25A",closeIcon:"_3ZNMNqX719F5uyujlsIEEX",footer:"Pv1Crv3p0hsWafBqva7XY"}},,function(e,t,a){e.exports={wrapper:"_2WgnPoNTBlYxMadUOp6X6F",primary:"_1N_xYp5Mlw_vRt2GBQPG3_",control:"_1GBzD41XmCACAyrxXIpA2g",switch:"obdQdmNh6a9AylYbpxZXo",inner:"_24C6iSzaC5OhGiAjheEbHW",on:"u9GufWWwHgs1SY_uAQQuU",disabled:"_2MD8-ccizgfYBdMPKkj0Zv"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(820)),p=n(r(32)),m=n(r(0)),h=n(r(1)),v=r(25),y=n(r(1184)),g=n(r(799)),b=n(r(1558));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,i.default)(r,e);var a=E(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).hasSubRoute=function(){return!(0,p.default)(t.state.subRoute)},t.getCurrentStep=function(){return t.state.currentStep},t.handleCreate=function(){var e=t.formRef.current,a=t.props,r=a.onOk,n=a.formTemplate;e&&e.validate((function(){t.setState({subRoute:{}}),r(n)}))},t.setSteps=function(e){t.setState({steps:e})},t.setCurrentStep=function(e){t.setState({currentStep:e})},t.handleNext=(0,d.default)((function(){var e=t.formRef.current,a=t.state.steps.length;e&&e.validate((function(){t.setState({currentStep:Math.min(t.state.currentStep+1,a-1),subRoute:{}})}))}),300),t.handlePrev=function(){t.setState((function(e){var t=e.currentStep,a=e.subRoute,r=t;return a&&a.onCancel?(a.onCancel(),a={}):r=Math.max(t-1,0),{currentStep:r,subRoute:a}}))},t.handleSubFormSave=function(){var e=t.state.subRoute;e&&e.onSave&&e.onSave((function(){t.setState({subRoute:{}})}))},t.handleSubFormCancel=function(){var e=t.state.subRoute;e&&e.onCancel&&(e.onCancel(),t.setState({subRoute:{}}))},t.registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.state={currentStep:e.currentStep||0,subRoute:{},steps:e.steps},t.formRef=m.default.createRef(),t}return(0,o.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute,setSteps:this.setSteps,setCurrentStep:this.setCurrentStep}}}]),(0,o.default)(r,[{key:"renderTabs",value:function(){var e=this.state,t=e.steps,a=e.currentStep;return t.length<2?null:m.default.createElement("div",{className:b.default.tabs},m.default.createElement(y.default,{steps:t,current:a}))}},{key:"renderContent",value:function(){var e=this.state,t=e.steps,a=e.currentStep,r=this.props.contentWidth,n=(0,f.default)(t,"[".concat(a,"].component"));return n?m.default.createElement("div",{className:b.default.contentWrapper},m.default.createElement("div",{className:b.default.content,style:{width:r||920}},m.default.createElement(n,(0,l.default)({formRef:this.formRef},this.props)))):null}},{key:"renderFooter",value:function(){var e=this.state,a=e.subRoute,r=e.steps,n=e.currentStep,l=this.props,u=l.onCancel,o=l.okBtnText,i=l.isSubmitting,c=r.every((function(e,t){return!e.required||n>=t})),s=n<r.length-1;return m.default.createElement("div",{className:b.default.footer},m.default.createElement(v.Button,{onClick:u},t("CANCEL")),n?m.default.createElement(v.Button,{type:"default",onClick:this.handlePrev,"data-test":"modal-previous"},t("PREVIOUS")):null,s&&m.default.createElement(v.Button,{type:"control",onClick:this.handleNext,disabled:!(0,p.default)(a),"data-test":"modal-next"},t("NEXT")),c&&m.default.createElement(v.Button,{type:"control",onClick:this.handleCreate,loading:i,disabled:i||!(0,p.default)(a),"data-test":"modal-create"},o||t("CREATE")))}},{key:"renderSaveBar",value:function(){var e=this.state.subRoute;return(0,p.default)(e)?null:m.default.createElement(g.default,{className:b.default.confirm,onOk:this.handleSubFormSave,onCancel:this.handleSubFormCancel})}},{key:"render",value:function(){return m.default.createElement("div",null,this.renderTabs(),this.renderContent(),this.renderSaveBar(),this.renderFooter())}}]),r}(m.default.Component);a.default=_,_.propTypes={module:h.default.string,type:h.default.string,store:h.default.object,steps:h.default.array,formTemplate:h.default.object,isSubmitting:h.default.bool,onOk:h.default.func},_.defaultProps={isSubmitting:!1,onOk:function(){}},_.childContextTypes={registerSubRoute:h.default.func,resetSubRoute:h.default.func,setSteps:h.default.func,setCurrentStep:h.default.func}},function(e,t,a){e.exports={steps:"_20tu9Im8llwpkfYXE9v21z",current:"_1e9CQ4LFKTf9trCn_VkMn1",icon:"_2dYVWsIIhurO4I-dcia1IO",finished:"_1LtH163s_fJpBvWtiKM1BK",text:"_1M_oER16TdMn2TVYWNZKBZ"}},function(e,t,a){e.exports={wrapper:"_2fjYJjhcvyIc3JLLe1Ct4e",button:"_3qDgwlVfeUh5aEmbTduK9V"}},function(e,t,a){e.exports={contentWrapper:"_329ovSzDebriZxCIhAIHCK",content:"_3_cNKfUSBkggfQ-mB-8bYV",footer:"_21RObYlJsAzHOse3vvb8GV",confirm:"lZGldm7Q9fbsiCykT1t7J"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=n(r(870)),m=n(r(1565));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleCreate=function(){(0,t.props.onOk)(t.getData())},t.editor=s.default.createRef(),t}return(0,u.default)(r,[{key:"getData",value:function(){return this.editor.current.getData()}},{key:"render",value:function(){var e=this.props,a=e.formTemplate,r=e.onCancel,n=e.isSubmitting;return s.default.createElement("div",null,s.default.createElement("div",{className:m.default.wrapper},s.default.createElement(p.default,{ref:this.editor,value:a})),s.default.createElement("div",{className:m.default.footer},s.default.createElement(d.Button,{onClick:r},t("CANCEL")),s.default.createElement(d.Button,{type:"control",onClick:this.handleCreate,loading:n,disabled:n},t("Create"))))}}]),r}(s.default.Component);a.default=v,v.propTypes={formTemplate:f.default.object,onOk:f.default.func,isSubmitting:f.default.bool},v.defaultProps={onOk:function(){},isSubmitting:!1}},,,,function(e,t,a){e.exports={editor:"yWmws6GM1w410lGHUw2R8"}},function(e,t,a){e.exports={mode:"UHsOLJqEhb-QI90OcqQvo",fileList:"_14VKg2XDHFE6ZJn0z0xTd1",header:"jyc24SDm2s_aNKNrMIpN8",title:"_24W_oS2sZ6FfgcMbcD7gdn",operations:"_27RDWpoGsR9u22k3FNethc",active:"_3lXDBArwOVU3eo0WmTHjpj",edit:"eJjYooLb0r2DCPIXynep-",ops:"i7pQSYfcIVOUu3nV-rmwA",split:"Dk2pfFgr1VcYX4ILWJFC1"}},function(e,t,a){e.exports={wrapper:"_3T0Z5BCP3J3gU7R1ZHf4fy",tabs:"VSwshzPhLFbo6eNswlRGd",tabItem:"_2hwHf9p4VHwC30H-hytu0t",selected:"_1_eWyJlFEga28LyR0aw69n",content:"_3OD9iJs8KUAXl9xoH5L0pK",footer:"_2uFK64wsRTZswYHR5EKeZc"}},function(e,t,a){e.exports={body:"_1JLVg2YqjnWIaC2phuJ4cq",switch:"_3fdkyuHufrCO5KJ9Mm1MCx",close:"Ip-IgPTXRNcOSPzOhgo6z"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(836),n={"node:pod_abnormal:ratio{$1}":{label:"ABNORMAL_PODS",prefixIcon:"pod",ruleConfig:r.PERCENT_RULE_CONFIG},"node:pod_utilisation:ratio{$1}":{label:"POD_USAGE_SCAP",prefixIcon:"pod",ruleConfig:r.PERCENT_RULE_CONFIG},"node:node_cpu_utilisation:avg1m{$1}":{label:"CPU_USAGE_SCAP",prefixIcon:"cpu",ruleConfig:r.PERCENT_RULE_CONFIG},"node:load1:ratio{$1}":{label:"CPU_LOAD_1",prefixIcon:"cpu",ruleConfig:r.BASE_RULE_CONFIG},"node:load5:ratio{$1}":{label:"CPU_LOAD_5",prefixIcon:"cpu",ruleConfig:r.BASE_RULE_CONFIG},"node:load15:ratio{$1}":{label:"CPU_LOAD_15",prefixIcon:"cpu",ruleConfig:r.BASE_RULE_CONFIG},"node:node_memory_bytes_available:sum{$1}":{label:"MEMORY_AVAILABLE",prefixIcon:"memory",ruleConfig:r.DISK_RULE_CONFIG},"node:node_memory_utilisation:{$1}":{label:"MEMORY_USAGE_SCAP",prefixIcon:"memory",ruleConfig:r.PERCENT_RULE_CONFIG},"node:disk_space_available:{$1}":{label:"DISK_SPACE_AVAILABLE",prefixIcon:"storage",ruleConfig:r.DISK_RULE_CONFIG},"node:disk_space_utilization:ratio{$1}":{label:"DISK_SPACE_USAGE",prefixIcon:"storage",ruleConfig:r.PERCENT_RULE_CONFIG},"node:disk_inode_utilization:ratio{$1}":{label:"INODE_USAGE",prefixIcon:"storage",ruleConfig:r.PERCENT_RULE_CONFIG},"node:data_volume_iops_reads:sum{$1}":{label:"DISK_READ_IOPS",prefixIcon:"storage",ruleConfig:r.BASE_RULE_CONFIG},"node:data_volume_iops_writes:sum{$1}":{label:"DISK_WRITE_IOPS",prefixIcon:"storage",ruleConfig:r.BASE_RULE_CONFIG},"node:data_volume_throughput_bytes_read:sum{$1}":{label:"DISK_READ_THROUGHPUT",prefixIcon:"storage",ruleConfig:r.THROUGHPUT_RULE_CONFIG},"node:data_volume_throughput_bytes_written:sum{$1}":{label:"DISK_WRITE_THROUGHPUT",prefixIcon:"storage",ruleConfig:r.THROUGHPUT_RULE_CONFIG},"node:node_net_bytes_transmitted:sum_irate{$1}":{label:"DATA_SEND_RATE",prefixIcon:"network",ruleConfig:r.BANDWIDTH_RULE_CONFIG},"node:node_net_bytes_received:sum_irate{$1}":{label:"DATA_RECEIVE_RATE",prefixIcon:"network",ruleConfig:r.BANDWIDTH_RULE_CONFIG}};t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(836),n=(0,r.getBaseRuleConfig)({thresholds:{unit:"Kbps"}}),l={"namespace:workload_cpu_usage:sum{$1}":{label:"CPU_USAGE_SCAP",prefixIcon:"cpu",ruleConfig:r.CPU_RULE_CONFIG},"namespace:workload_memory_usage:sum{$1}":{label:"MEMORY_USAGE_CACHE",prefixIcon:"memory",ruleConfig:r.MEMORY_RULE_CONFIG},"namespace:workload_memory_usage_wo_cache:sum{$1}":{label:"MEMORY_USAGE_SCAP",prefixIcon:"memory",ruleConfig:r.MEMORY_RULE_CONFIG},"namespace:workload_net_bytes_transmitted:sum_irate{$1}":{label:"DATA_SEND_RATE",prefixIcon:"network",ruleConfig:n},"namespace:workload_net_bytes_received:sum_irate{$1}":{label:"DATA_RECEIVE_RATE",prefixIcon:"network",ruleConfig:n},"namespace:$2_unavailable_replicas:ratio{$1}":{label:"UNAVAILABLE_REPLICAS",prefixIcon:"backup",ruleConfig:r.PERCENT_RULE_CONFIG}};t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(836),n=(0,r.getBaseRuleConfig)({thresholds:{unit:"Kbps"}}),l={pod_cpu_usage:{label:"cpu usage",prefixIcon:"cpu",ruleConfig:r.CPU_RULE_CONFIG},pod_cpu_utilisation:{label:"cpu utilisation",prefixIcon:"cpu",ruleConfig:r.PERCENT_RULE_CONFIG},pod_memory_usage:{label:"MEMORY_USAGE_CACHE",prefixIcon:"memory",ruleConfig:r.MEMORY_RULE_CONFIG},pod_memory_usage_wo_cache:{label:"memory usage",prefixIcon:"memory",ruleConfig:r.MEMORY_RULE_CONFIG},pod_memory_utilisation:{label:"memory utilisation (including cache)",prefixIcon:"memory",ruleConfig:r.PERCENT_RULE_CONFIG},pod_net_bytes_transmitted:{label:"network data transmitting rate",prefixIcon:"network",ruleConfig:n},pod_net_bytes_received:{label:"network data receiving rate",prefixIcon:"network",ruleConfig:n}};t.default=l},,,,,,,,function(e,t,a){e.exports={withUnit:"_2d32hkfOO3cYnvAM-MUswq"}},,,,,,,,,,function(e,t,a){},,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(295)),m=n(r(3)),h=r(58),v=n(r(800)),y=n(r(783)),g=n(r(772)),b=n(r(840)),E=n(r(784)),_=n(r(785)),O=n(r(1638));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var k=function(e){(0,i.default)(r,e);var a=S(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderTitle",value:function(){var e=this.props,a=e.title,r=e.renderTitle;return r?r():f.default.createElement("div",{className:O.default.title},"".concat(t(a)," ").concat(this.lastValue))}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,a=e.areaColors,r=e.renderArea;return r?r():this.series.map((function(e,r){var n=h.COLORS_MAP[a[r]];return f.default.createElement(v.default,{key:e,dataKey:e,stroke:n,fillOpacity:"0.1",fill:n,unit:t})}))}},{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,r=e.bgColor,n=e.xKey,u=e.data,o=e.darkMode;return f.default.createElement("div",{className:(0,m.default)(O.default.chart,(0,l.default)({},O.default.dark,o)),style:{width:t,height:a,background:r}},this.renderTitle(),f.default.createElement(E.default,{width:"100%",height:"100%",debounce:1},f.default.createElement(b.default,{data:u,margin:{top:30,left:0,right:0,bottom:0}},f.default.createElement(g.default,{dataKey:n,hide:!0}),f.default.createElement(y.default,{wrapperStyle:{zIndex:1e3},cursor:{stroke:h.COLORS_MAP.dark,strokeDasharray:"3,2",strokeWidth:2},content:f.default.createElement(_.default,null)}),this.renderArea())))}},{key:"series",get:function(){var e=this.props,t=e.xKey,a=e.data;return Object.keys(a[0]||{}).filter((function(e){return e!==t}))}},{key:"lastValue",get:function(){var e=this.props,t=e.unit,a=e.data,r=this.series;return 1===r.length?"".concat((0,p.default)(a)[r[0]]," ").concat(t):""}}]),r}(f.default.Component);a.default=k,k.propTypes={width:d.default.oneOfType([d.default.string,d.default.number]),height:d.default.oneOfType([d.default.string,d.default.number]),title:d.default.string,xKey:d.default.string,unit:d.default.string,data:d.default.array,bgColor:d.default.string,areaColors:d.default.array,renderTitle:d.default.func,renderArea:d.default.func,darkMode:d.default.bool},k.defaultProps={width:180,height:56,title:"Title",xKey:"time",unit:"",bgColor:h.COLORS_MAP.lightest,areaColors:["green","blue","yellow","red"],data:[],darkMode:!1}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={tooltip:"_2o-FPsZWo_tejfulidLyXN",label:"_14UOFErBhWS51I2ueymzb1",item:"_1ZRF-l-daK6mBpxVp4rWVy"}},function(e,t,a){e.exports={chart:"_1sjDK5GdPxFAEmfUxCI1LV",title:"_2xqrjvSLAex97qiOzpHRqy",dark:"jzlxuWnFI3sN_bACtVOG0"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(16)),p=n(r(295)),m=r(58),h=n(r(800)),v=n(r(783)),y=n(r(772)),g=n(r(840)),b=n(r(784)),E=n(r(785)),_=n(r(1640));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,o.default)(r,e);var a=O(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"renderTitle",value:function(){var e=this.props,a=e.title,r=e.unit,n=e.renderTitle;return n?n():s.default.createElement("div",{className:_.default.title},s.default.createElement("span",null,s.default.createElement("strong",null,this.lastValue)," ",t(r)),1===this.lastValue||r?t(a):t("".concat(a,"_PL")))}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,a=e.areaColors,r=e.renderArea;return r?r():this.series.map((function(e,r){var n=m.COLORS_MAP[a[r]];return s.default.createElement(h.default,{key:e,dataKey:e,stroke:n,fillOpacity:"0.1",fill:n,unit:t})}))}},{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,r=e.xKey,n=e.data;return s.default.createElement("div",{className:_.default.chart,style:{width:t,height:a}},this.renderTitle(),s.default.createElement(b.default,{width:"100%",height:"100%",debounce:1},s.default.createElement(g.default,{data:n,margin:{top:45,left:0,right:0,bottom:0}},s.default.createElement(y.default,{dataKey:r,hide:!0}),s.default.createElement(v.default,{wrapperStyle:{zIndex:1e3},cursor:{stroke:m.COLORS_MAP.dark,strokeDasharray:"3,2",strokeWidth:2},content:s.default.createElement(E.default,null)}),this.renderArea())))}},{key:"series",get:function(){var e=this.props,t=e.xKey,a=e.data;return Object.keys(a[0]||{}).filter((function(e){return e!==t}))}},{key:"lastValue",get:function(){var e=this.props.data,t=(0,d.default)(this.series,[0],"");return(0,p.default)(e)[t]||0}}]),r}(s.default.Component);a.default=S,S.propTypes={width:f.default.oneOfType([f.default.string,f.default.number]),height:f.default.oneOfType([f.default.string,f.default.number]),title:f.default.string,xKey:f.default.string,unit:f.default.string,data:f.default.array,areaColors:f.default.array,renderTitle:f.default.func,renderArea:f.default.func},S.defaultProps={width:280,height:100,title:"Title",xKey:"time",unit:"",areaColors:["green","blue","yellow","red"],data:[]}},function(e,t,a){e.exports={chart:"_2JJzTXT7f7IRE6NiIfNZwA",title:"_3hk5WanipERYCfYDNf8FS9"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(109)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(745)),v=n(r(32)),y=n(r(851)),g=r(58),b=n(r(1203)),E=n(r(838)),_=n(r(800)),O=n(r(783)),S=n(r(810)),k=n(r(772)),C=n(r(839)),R=n(r(825)),w=n(r(840)),P=n(r(784)),D=n(r(932)),T=n(r(785)),N=r(933),I=n(r(1644));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var x=function(e){(0,c.default)(r,e);var a=A(r);function r(e){var t;(0,o.default)(this,r),(t=a.call(this,e)).handleLegendClick=function(e,a){var r=(0,u.default)(t.state.activeSeries);r.includes(a)?(0,y.default)(r,(function(e){return e===a})):r.push(a),t.setState({activeSeries:r})};var n=(0,N.getActiveSeries)(e);return t.state={series:n,activeSeries:n},t}return(0,i.default)(r,[{key:"renderTitle",value:function(){var e=this.props,a=e.title,r=e.unit,n=e.renderTitle,l=n?n():(0,v.default)(r)?t(a):t("TITLE_UNIT",{title:t(a),unit:r});return d.default.createElement("div",{className:I.default.title},l)}},{key:"renderCustomTooltip",value:function(){var e=this.props.renderTooltip;return e?e():d.default.createElement(T.default,null)}},{key:"renderLegend",value:function(){return d.default.createElement(C.default,{wrapperStyle:{top:0,left:"auto",right:0,width:"80%",zIndex:100},content:d.default.createElement(D.default,{activeSeries:this.state.activeSeries,onClick:this.handleLegendClick})})}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,a=e.areaColors,r=this.state,n=r.series,u=r.activeSeries;return n.map((function(e,r){var n=a[r],o=g.COLORS_MAP[n]||n,i={fill:o,fillOpacity:.1};return d.default.createElement(_.default,(0,l.default)({key:e,dataKey:e,stroke:o,activeDot:d.default.createElement(E.default,{r:4,stroke:"#fff",strokeWidth:1,fill:o,fillOpacity:1}),unit:t,hide:!u.includes(e),connectNulls:!0},i))}))}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.width,r=e.height,n=e.xKey,u=e.data,o=e.alert,i=e.xAxis,c=e.yAxis,s=(0,m.default)(I.default.chart,"chart","chart-".concat(t));return d.default.createElement("div",{className:s,style:{width:a,height:r}},this.renderTitle(),d.default.createElement(P.default,{width:a,height:r,debounce:1},d.default.createElement(w.default,{data:u,margin:{top:42,bottom:-20,left:13,right:13}},d.default.createElement(R.default,{stroke:"#d8dee5",strokeDasharray:"2 2",vertical:!1}),d.default.createElement(k.default,(0,l.default)({height:40,dataKey:n,axisLine:!1,tickLine:!1,interval:"preserveStartEnd",minTickGap:60,tickMargin:12},i)),d.default.createElement(S.default,(0,l.default)({width:45,axisLine:!1,tickLine:!1,tickFormatter:function(e){return e<=0?"":e>1e5?"".concat(Math.round(e/1e3),"k"):e}},c)),d.default.createElement(O.default,{wrapperStyle:{zIndex:9999},content:this.renderCustomTooltip()}),this.renderLegend(),this.renderArea(),!(0,v.default)(o)&&d.default.createElement(b.default,{y:o.value,label:"".concat(o.value).concat(this.props.unit),stroke:g.COLORS_MAP.red,strokeDasharray:"3,2",isFront:!0}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,N.getActiveSeries)(e);return(0,h.default)(a,t.series)?null:{series:a,activeSeries:a}}}]),r}(d.default.Component);a.default=x,x.propTypes={theme:p.default.oneOf(["light","dark"]),width:p.default.oneOfType([p.default.string,p.default.number]),height:p.default.oneOfType([p.default.string,p.default.number]),title:p.default.string,xKey:p.default.string,unit:p.default.string,data:p.default.array,bgColor:p.default.string,areaColors:p.default.array,renderTitle:p.default.func,renderTooltip:p.default.func},x.defaultProps={theme:"light",width:"100%",height:200,title:"Title",xKey:"time",unit:"",bgColor:g.COLORS_MAP.lightest,areaColors:["green","blue","yellow","red","darkestGreen","darkestBlue","darkestYellow","darkestRed","lightestGreen","lightestBlue","lightestYellow","lightestRed"],data:[]}},,function(e,t,a){e.exports={legend:"_1XlEXrqD889UqrbxHe-xEK",hide:"_23CvRZz1mMETc8Jy-6Img-",item:"_2baEObAQ1E-zKBmLZq7s1k",inactive:"_25hh9t3akE-oo7U9r1Ixur"}},function(e,t,a){e.exports={chart:"_2HFgq9kor6lheR0Vhq4sCI",title:"_2ArqqbIO8eulO-vuy6Ulu2"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(32)),h=n(r(851)),v=r(58),y=n(r(838)),g=n(r(800)),b=n(r(783)),E=n(r(810)),_=n(r(772)),O=n(r(839)),S=n(r(825)),k=n(r(840)),C=n(r(784)),R=n(r(932)),w=n(r(785)),P=r(933),D=r(725),T=n(r(1646));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var I=function(e){(0,i.default)(r,e);var a=N(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e)).handleLegendClick=function(e,a){var r=(0,l.default)(t.state.activeSeries);r.includes(a)?(0,h.default)(r,(function(e){return e===a})):r.push(a),t.setState({activeSeries:r})};var n=(0,P.getActiveSeries)(e);return t.state={series:n.slice(0,e.maxSeries),activeSeries:n.slice(0,e.maxActiveSeries)},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){if(e.data.length!==this.props.data.length||e.id!==this.props.id){var t=(0,P.getActiveSeries)(this.props);this.setState({series:t.slice(0,this.props.maxSeries),activeSeries:t.slice(0,this.props.maxActiveSeries)})}}},{key:"renderTitle",value:function(){var e=this.props,a=e.title,r=e.unit,n=e.renderTitle,l=n?n():(0,m.default)(r)?t(a):"".concat(t(a)," (").concat(t(r),")");return f.default.createElement("div",{className:T.default.title},l)}},{key:"renderCustomTooltip",value:function(){var e=this.props.renderTooltip;return e?e():f.default.createElement(w.default,null)}},{key:"renderLegend",value:function(){return f.default.createElement(O.default,{wrapperStyle:{zIndex:100,left:24},content:f.default.createElement(R.default,{className:T.default.legend,activeSeries:this.state.activeSeries,showAll:!0,onClick:this.handleLegendClick})})}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,a=e.areaColors,r=e.renderArea,n=this.state,l=n.series,u=n.activeSeries;return r?r():l.map((function(e,r){var n=a[r],l=v.COLORS_MAP[n]||n;return f.default.createElement(g.default,{key:e,dataKey:e,stroke:l,fill:"url(#".concat(n,"-area)"),activeDot:f.default.createElement(y.default,{r:4,stroke:"#fff",strokeWidth:1,fill:l,fillOpacity:1}),unit:t,hide:!u.includes(e)})}))}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.width,r=e.height,n=e.xKey,l=e.data,u=(0,p.default)(T.default.chart,"chart","chart-".concat(t));return f.default.createElement("div",{className:u,style:{width:a,height:r}},this.renderTitle(),f.default.createElement(C.default,{debounce:1},f.default.createElement(k.default,{data:l,margin:{top:50,bottom:0,left:0,right:25}},f.default.createElement(S.default,{stroke:"#d8dee5",strokeDasharray:"2 3",vertical:!1}),f.default.createElement(_.default,{dataKey:n,axisLine:!1,tickLine:!1}),f.default.createElement(E.default,{width:60,axisLine:!1,tickLine:!1,tickFormatter:function(e){return e<=0?"":(0,D.getSuitableValue)(e,"number")}}),f.default.createElement(b.default,{wrapperStyle:{zIndex:101,pointerEvents:"auto"},cursor:{stroke:v.COLORS_MAP["dark"===t?"lightest":"dark"],strokeDasharray:"3,2",strokeWidth:2},content:this.renderCustomTooltip()}),this.renderLegend(),this.renderArea())))}}]),r}(f.default.Component);a.default=I,I.propTypes={theme:d.default.oneOf(["light","dark"]),width:d.default.oneOfType([d.default.string,d.default.number]),height:d.default.oneOfType([d.default.string,d.default.number]),title:d.default.string,xKey:d.default.string,unit:d.default.string,data:d.default.array,maxSeries:d.default.number,maxActiveSeries:d.default.number,areaColors:d.default.array,renderTitle:d.default.func,renderTooltip:d.default.func,renderArea:d.default.func,id:d.default.string},I.defaultProps={theme:"light",width:"100%",height:220,title:"Title",xKey:"time",maxSeries:50,maxActiveSeries:6,unit:"",areaColors:["green","blue","yellow","red","darkestGreen","darkestBlue","darkestYellow","darkestRed","lightestGreen","lightestBlue","lightestYellow","lightestRed"],data:[],id:""}},function(e,t,a){e.exports={chart:"DMLRKPRlM-592oxpl01Ux",title:"_2ndg87suV5PGHdzT74mCy1",legend:"KRlAbphv7IhurquDMCYe6"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(109)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(32)),v=n(r(745)),y=n(r(851)),g=r(58),b=n(r(838)),E=n(r(800)),_=n(r(783)),O=n(r(810)),S=n(r(772)),k=n(r(839)),C=n(r(825)),R=n(r(840)),w=n(r(784)),P=n(r(932)),D=n(r(785)),T=r(933),N=n(r(1648));function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var A=function(e){(0,c.default)(r,e);var a=I(r);function r(e){var t;(0,o.default)(this,r),(t=a.call(this,e)).handleLegendClick=function(e,a){var r=(0,u.default)(t.state.activeSeries);r.includes(a)?(0,y.default)(r,(function(e){return e===a})):r.push(a),t.setState({activeSeries:r})};var n=(0,T.getActiveSeries)(e);return t.state={series:n,activeSeries:n},t}return(0,i.default)(r,[{key:"renderTitle",value:function(){var e=this.props,a=e.title,r=e.unit,n=e.renderTitle,l=n?n():(0,h.default)(r)?t(a):"".concat(t(a)," (").concat(t(r),")");return d.default.createElement("div",{className:N.default.title},l)}},{key:"renderLegend",value:function(){return d.default.createElement(k.default,{wrapperStyle:{top:0,left:"auto",right:0,width:"70%",zIndex:1001},content:d.default.createElement(P.default,{activeSeries:this.state.activeSeries,onClick:this.handleLegendClick})})}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,a=e.areaColors,r=e.renderArea,n=this.state,u=n.series,o=n.activeSeries;return r?r():u.map((function(e,r){var n=a[r],i=g.COLORS_MAP[n]||n,c=!o.includes(e),s={key:e,dataKey:e,stroke:i,activeDot:d.default.createElement(b.default,{r:4,stroke:"#fff",strokeWidth:1,fill:i,fillOpacity:1}),unit:t,hide:c};return r===u.length-1?d.default.createElement(E.default,(0,l.default)({},s,{strokeDasharray:"3, 2",fillOpacity:0})):d.default.createElement(E.default,(0,l.default)({},s,{strokeWidth:0,fill:i,fillOpacity:.7}))}))}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.width,r=e.height,n=e.xKey,l=e.data,u=(0,m.default)(N.default.chart,"chart","chart-".concat(t));return d.default.createElement("div",{className:u,style:{width:a,height:r}},this.renderTitle(),d.default.createElement(w.default,{width:"100%",height:"100%",debounce:1},d.default.createElement(R.default,{data:l,margin:{top:50,bottom:-20,left:0,right:20}},d.default.createElement(C.default,{stroke:"#d8dee5",strokeDasharray:"2 3",vertical:!1}),d.default.createElement(S.default,{dataKey:n,axisLine:!1,tickLine:!1}),d.default.createElement(O.default,{width:45,axisLine:!1,tickLine:!1,tickFormatter:function(e){return e>0?e:""}}),d.default.createElement(_.default,{wrapperStyle:{zIndex:1e3},cursor:{stroke:g.COLORS_MAP["dark"===t?"lightest":"dark"],strokeDasharray:"3,2",strokeWidth:2},content:d.default.createElement(D.default,null)}),this.renderLegend(),this.renderArea())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,T.getActiveSeries)(e);return(0,v.default)(a,t.series)?null:{series:a,activeSeries:a}}}]),r}(d.default.Component);a.default=A,A.propTypes={theme:p.default.oneOf(["light","dark"]),width:p.default.oneOfType([p.default.string,p.default.number]),height:p.default.oneOfType([p.default.string,p.default.number]),title:p.default.string,xKey:p.default.string,unit:p.default.string,data:p.default.array,areaColors:p.default.array,renderTitle:p.default.func,renderArea:p.default.func},A.defaultProps={theme:"light",width:"100%",height:200,title:"Title",xKey:"time",unit:"",areaColors:["lighterRed","lightestYellow","blue","dark"],data:[]}},function(e,t,a){e.exports={chart:"_3h-t0hKcP-Ao4nr8At-NOt",title:"m7sH_qo102jJOrFsmprfd"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(32)),h=n(r(745)),v=n(r(851)),y=r(58),g=n(r(900)),b=n(r(783)),E=n(r(810)),_=n(r(772)),O=n(r(839)),S=n(r(825)),k=n(r(1058)),C=n(r(784)),R=n(r(932)),w=n(r(785)),P=r(933),D=n(r(1650));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var N=function(e){(0,i.default)(r,e);var a=T(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e)).handleLegendClick=function(e,a){var r=(0,l.default)(t.state.activeSeries);r.includes(a)?(0,v.default)(r,(function(e){return e===a})):r.push(a),t.setState({activeSeries:r})};var n=(0,P.getActiveSeries)(e);return t.state={series:n,activeSeries:n},t}return(0,o.default)(r,[{key:"renderTitle",value:function(){var e=this.props,a=e.title,r=e.unit,n=e.renderTitle,l=n?n():(0,m.default)(r)?t(a):"".concat(t(a)," (").concat(r,")");return f.default.createElement("div",{className:D.default.title},l)}},{key:"renderLegend",value:function(){return f.default.createElement(O.default,{wrapperStyle:{top:0,left:"auto",right:0,width:"70%",zIndex:1001},content:f.default.createElement(R.default,{activeSeries:this.state.activeSeries,onClick:this.handleLegendClick})})}},{key:"renderBar",value:function(){var e=this,t=this.props,a=t.unit,r=t.areaColors,n=t.renderBar;return n?n():this.series.map((function(t,n){var l=r[n],u=y.COLORS_MAP[l]||l;return f.default.createElement(g.default,{key:t,dataKey:t,stroke:u,fill:"url(#".concat(l,"-area)"),unit:a,hide:!e.state.activeSeries.includes(t)})}))}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.width,r=e.height,n=e.xKey,l=e.data,u=(0,p.default)(D.default.chart,"chart","chart-".concat(t));return f.default.createElement("div",{className:u,style:{width:a,height:r}},this.renderTitle(),f.default.createElement(C.default,{width:"100%",height:"100%",debounce:1},f.default.createElement(k.default,{data:l,margin:{top:50,bottom:-20,left:0,right:20}},f.default.createElement(S.default,{stroke:"#d8dee5",strokeDasharray:"2 3",vertical:!1}),f.default.createElement(_.default,{dataKey:n,axisLine:!1,tickLine:!1}),f.default.createElement(E.default,{width:45,axisLine:!1,tickLine:!1,tickFormatter:function(e){return e>0?e:""}}),f.default.createElement(b.default,{wrapperStyle:{zIndex:1e3},cursor:"dark"===t?{fill:y.COLORS_MAP.lightest,fillOpacity:.2}:{fill:y.COLORS_MAP.grey},content:f.default.createElement(w.default,null)}),this.renderLegend(),this.renderBar())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,P.getActiveSeries)(e);return(0,h.default)(a,t.series)?null:{series:a,activeSeries:a}}}]),r}(f.default.Component);a.default=N,N.propTypes={theme:d.default.oneOf(["light","dark"]),width:d.default.oneOfType([d.default.string,d.default.number]),height:d.default.oneOfType([d.default.string,d.default.number]),title:d.default.string,xKey:d.default.string,unit:d.default.string,data:d.default.array,areaColors:d.default.array,renderTitle:d.default.func,renderBar:d.default.func},N.defaultProps={theme:"light",width:"100%",height:200,title:"Title",xKey:"time",unit:"",areaColors:["green","blue","yellow"],data:[]}},function(e,t,a){e.exports={chart:"_12oj79UOFmAu5q6GiNUsq2",title:"_1cs-znnZFCTeUErbjSD6Ed"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(32)),h=n(r(745)),v=n(r(851)),y=r(58),g=n(r(900)),b=n(r(783)),E=n(r(810)),_=n(r(772)),O=n(r(839)),S=n(r(825)),k=n(r(1058)),C=n(r(784)),R=n(r(932)),w=n(r(785)),P=r(933),D=n(r(1652));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var N=function(e){(0,i.default)(r,e);var a=T(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e)).getBarSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length<=20?20:8},t.handleLegendClick=function(e,a){var r=(0,l.default)(t.state.activeSeries);r.includes(a)?(0,v.default)(r,(function(e){return e===a})):r.push(a),t.setState({activeSeries:r})};var n=(0,P.getActiveSeries)(e);return t.state={series:n,activeSeries:n},t}return(0,o.default)(r,[{key:"renderTitle",value:function(){var e=this.props,a=e.title,r=e.unit,n=e.renderTitle,l=n?n():(0,m.default)(r)?t(a):"".concat(t(a)," (").concat(r,")");return f.default.createElement("div",{className:D.default.title},l)}},{key:"renderLegend",value:function(){return f.default.createElement(O.default,{wrapperStyle:{top:0,left:"auto",right:0,width:"70%",zIndex:1001},content:f.default.createElement(R.default,{activeSeries:this.state.activeSeries,onClick:this.handleLegendClick})})}},{key:"renderBar",value:function(){var e=this,t=this.props,a=t.unit,r=t.areaColors,n=t.renderBar,l=this.state,u=l.series,o=l.activeSeries;return n?n():u.map((function(t,n){var l=r[n],u=y.COLORS_MAP[l]||l,i=e.getBarSize(e.series),c=0===n?[0,0,2,2]:n===e.series.length-1?[2,2,0,0]:null;return f.default.createElement(g.default,{key:t,dataKey:t,stackId:"series",barSize:i,stroke:u,strokeWidth:0,fill:u,radius:c,unit:a,hide:!o.includes(t)})}))}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.width,r=e.height,n=e.xKey,l=e.data,u=(0,p.default)(D.default.chart,"chart","chart-".concat(t));return f.default.createElement("div",{className:u,style:{width:a,height:r}},this.renderTitle(),f.default.createElement(C.default,{width:"100%",height:"100%",debounce:1},f.default.createElement(k.default,{data:l,margin:{top:50,bottom:-20,left:0,right:20}},f.default.createElement(S.default,{stroke:"#d8dee5",strokeDasharray:"2 3",vertical:!1}),f.default.createElement(_.default,{dataKey:n,axisLine:!1,tickLine:!1}),f.default.createElement(E.default,{width:45,axisLine:!1,tickLine:!1,tickFormatter:function(e){return e>0?e:""}}),f.default.createElement(b.default,{wrapperStyle:{zIndex:1e3},cursor:"dark"===t?{fill:y.COLORS_MAP.lightest,fillOpacity:.2}:{fill:y.COLORS_MAP.grey},content:f.default.createElement(w.default,null)}),this.renderLegend(),this.renderBar())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,P.getActiveSeries)(e);return(0,h.default)(a,t.series)?null:{series:a,activeSeries:a}}}]),r}(f.default.Component);a.default=N,N.propTypes={theme:d.default.oneOf(["light","dark"]),width:d.default.oneOfType([d.default.string,d.default.number]),height:d.default.oneOfType([d.default.string,d.default.number]),title:d.default.string,xKey:d.default.string,unit:d.default.string,data:d.default.array,areaColors:d.default.array,renderTitle:d.default.func,renderBar:d.default.func},N.defaultProps={theme:"light",width:"100%",height:200,title:"Title",xKey:"time",unit:"",areaColors:["green","blue","yellow"],data:[]}},function(e,t,a){e.exports={chart:"_23-9y13KSLTiB9ATkXvt6C",title:"_2tAARTBPZ1UnWw3S1J1rbq"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(21)),o=n(r(71)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(3)),v=n(r(16)),y=n(r(32)),g=r(725),b=n(r(839)),E=n(r(783)),_=n(r(985)),O=n(r(987)),S=n(r(1059)),k=n(r(784)),C=n(r(1654));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D=function(e){(0,s.default)(r,e);var a=P(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).getRate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return n.total?(n.value/n.total*100).toFixed(e):0},n.getPrimaryColor=function(e){var t=e||{},a=t.areaColors,r=t.active,l=t.showRate,u=n.getRate(),o=(0,v.default)(a,[0],"#fff");return l&&(r&&(o="white"),u>=80&&(o="yellow"),u>=90&&(o="red")),o},n.getFills=function(e){var t=e||{},a=t.areaColors,r=t.active,l={fill:(0,g.getColorByName)(n.getPrimaryColor(e))},u=a[1]||l.fill;return{activeFill:l,totalFill:r?{fill:"#fff",fillOpacity:.4}:{fill:(0,g.getColorByName)(u),fillOpacity:a[1]?1:.2}}},n.getData=function(){return[{name:n.props.legend[0],value:n.value},{name:"Remaining",value:n.remain}]},n.renderActiveShape=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cx,a=e.cy,r=e.innerRadius,l=e.outerRadius,u=e.startAngle,i=e.endAngle;return p.default.createElement("g",null,p.default.createElement(_.default,(0,o.default)({cx:t,cy:a,innerRadius:r,outerRadius:l,startAngle:u,endAngle:i},n.state.activeFill)))},n.renderTooltip=function(e){if(!e.active)return null;var a=n.props,r=a.title,l=a.legend,u=a.unit,o=a.value,i=a.total,c=a.showRate,s="%"===u?"%":" ".concat(u),f=c&&" (".concat(n.getRate(),"%)");return p.default.createElement("div",{className:C.default.tooltip},p.default.createElement("div",{className:C.default.label},t(r)),p.default.createElement("div",{className:C.default.list},p.default.createElement("div",{className:C.default.item},p.default.createElement("i",{style:{background:n.state.activeFill.fill}}),p.default.createElement("label",null,t(l[0]),":"),p.default.createElement("p",null,o,s,f)),p.default.createElement("div",{className:C.default.item},p.default.createElement("i",{style:{background:"#fff"}}),p.default.createElement("label",null,t(l[1]),":"),p.default.createElement("p",null,i,s))))},n.state=w({},n.getFills(e)),n}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){e.active!==this.props.active&&this.setState(w({},this.getFills(this.props)))}},{key:"renderCenter",value:function(){var e,t=this.props,a=t.theme,r=t.value,n=t.total,l=t.showRate,o=t.showRatio,i=t.renderCustomCenter,c=this.getPrimaryColor(this.props),s=l?(0,u.default)({},C.default.standard,!0):o?(e={},(0,u.default)(e,C.default.mid,r>99||n>99),(0,u.default)(e,C.default.mini,r>999||n>999),e):{},f=l?"".concat(this.getRate(0),"%"):o?p.default.createElement("p",null,p.default.createElement("strong",null,r),p.default.createElement("span",null,"/"),n):null;return p.default.createElement("div",{className:(0,h.default)(C.default.center,C.default[c],s,(0,u.default)({},C.default.white,"dark"===a))},i?i({value:r,total:n}):f)}},{key:"renderLegend",value:function(){var e=this.props,a=e.legend,r=e.areaColors;return p.default.createElement(b.default,{wrapperStyle:{bottom:0,zIndex:100},content:function(e){var n=e.payload,u=(0,l.default)(n);return(0,y.default)(u)||(u[u.length-1].value=a[a.length-1],u[u.length-1].color=r[u.length-1]||"#fff"),p.default.createElement("div",{className:C.default.legend},u.map((function(e){var a=(0,v.default)(e,"payload.fill");return p.default.createElement("div",{key:e.dataKey,"data-key":e.dataKey,className:C.default.item},p.default.createElement("i",{style:{backgroundColor:a}}),t(e.value))})))}})}},{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,r=e.showCenter,n=e.innerRadius,l=void 0===n?"70%":n,u=this.getData();return p.default.createElement("div",{className:C.default.chart,style:{width:t,height:a}},r&&this.renderCenter(),p.default.createElement(k.default,{width:"100%",height:"100%",debounce:1},p.default.createElement(S.default,null,p.default.createElement(O.default,(0,o.default)({data:u,dataKey:"value",activeIndex:0,activeShape:this.renderActiveShape,innerRadius:l,outerRadius:"100%",stroke:"transparent"},this.state.totalFill)),p.default.createElement(E.default,{wrapperStyle:{zIndex:100},content:this.renderTooltip}))))}},{key:"value",get:function(){var e=parseFloat(this.props.value||0);return e>0?e:0}},{key:"total",get:function(){return parseFloat(this.props.total||0)}},{key:"remain",get:function(){var e=this.total-this.value;return 0===this.total?1:e}}]),r}(p.default.Component);a.default=D,D.propTypes={theme:m.default.oneOf(["light","dark"]),width:m.default.oneOfType([m.default.string,m.default.number]),height:m.default.oneOfType([m.default.string,m.default.number]),title:m.default.string,legend:m.default.array,value:m.default.oneOfType([m.default.number,m.default.string]),total:m.default.oneOfType([m.default.number,m.default.string]),unit:m.default.string,areaColors:m.default.array,showCenter:m.default.bool,showRate:m.default.bool,showRatio:m.default.bool,active:m.default.bool},D.defaultProps={theme:"light",width:100,height:100,title:"",legend:["USED","TOTAL"],value:0,total:0,unit:"",areaColors:["green"],showCenter:!0,showRate:!1,showRatio:!0,active:!1}},function(e,t,a){e.exports={chart:"_3xORGioagELncq_b0QqUXh",center:"_1Fpm4EsVyd6rEqOU-TLFy4",fadeIn:"l534UI3MtCEqz4eGGY2TT",standard:"_2NHy2ySjaBP3iE_V33_T5s",mid:"_2_sR4rrGvd5Nbsd1lzOhmK",mini:"_2x1qX36v29kVnJ-mDXpniw",white:"_1HaIvuK2oSITwqGtPezmdk",yellow:"_bd_3V5QJCH9JEWCPD3q5",red:"_3zV4Hy8k1ujHADMao04tU1",tooltip:"_3j83qVypNfpK_iV4Spm6bt",label:"_1oAbCyvxESz8SMJcvczmya",item:"NrpjP1sw1yw9v33VrS1Qn",legend:"_2RMVikNBMbfj9iyRPZcc2V"}},,,,,,,,,function(e,t,a){e.exports={option:"_2RJZuw24vICxxAeHtSpL1s",tip:"_3YqfznJ7DNGlviKP_Gsezw"}},,,function(e,t,a){e.exports={tags:"_2KC8WkC9bqH1qrWvM039Pm"}},,function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(136)),o=r(a(0)),i=a(25),c=n(a(1211));function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=function(e){var t=e.component,a=e.index,r=e.value,n=e.arrayValue,l=e.onChange,s=e.onDelete,d=(0,o.useState)(""),p=(0,u.default)(d,2),m=p[0],h=p[1],v=o.default.cloneElement(t,f(f({},t.props),{},{index:a,value:r,arrayValue:n,onChange:l,handleKeyError:function(e){var t,a=null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"";h(a)}}));return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:c.default.item},v,o.default.createElement(i.Button,{type:"flat",icon:"trash",className:c.default.delete,onClick:s})),""!==m&&o.default.createElement("div",{className:c.default.errorText},m))};t.default=d},function(e,t,a){e.exports={wrapper:"_1w8ePIkY1x3KCnbo42anXD",item:"_1-AS8QgEx-PsQqXbvDNtiP"}},function(e,t,a){e.exports={input:"_1Bhe_3taYyM-lEe3IZ05DJ",autocomplete:"_3QRaoaUW25RFeUX7cDKtt4"}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(109)),o=n(a(12)),i=n(a(13)),c=n(a(19)),s=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(1)),m=n(a(3)),h=a(25),v=n(a(745));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(a,e);var t=b(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={values:e.props.value||[]},e.handleOptionChange=function(t,a){var r=e.props.onChange,n=e.state.values,l=[];l=t?[].concat((0,u.default)(n),[a]):n.filter((function(e){return e!==a})),e.setState({values:l},(function(){return r(l)}))},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.name,n=t.direction,l=t.options,u=t.children,o=this.state.values;if(u&&u.length>0){var i=d.default.Children.map(u,(function(t){return d.default.cloneElement(t,g(g({},t.props),{},{name:r,checked:o.includes(t.props.value),onChange:e.handleOptionChange}))}));return d.default.createElement("div",{"data-direction":n,className:(0,m.default)("checkbox-group",a)},i)}return d.default.createElement("div",{"data-direction":n,className:(0,m.default)("checkbox-group",a)},l.map((function(t){return d.default.createElement(h.Checkbox,{key:t.value,name:r,value:t.value,checked:o.includes(t.value),onChange:e.handleOptionChange},t.label)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(0,v.default)(e.value,t.values)?null:{values:e.value}}}]),a}(d.Component);t.default=E,E.propTypes={options:p.default.arrayOf(p.default.oneOfType([p.default.string,p.default.shape({value:p.default.any,label:p.default.string,disabled:p.default.bool})])),value:p.default.array,onChange:p.default.func,direction:p.default.oneOf(["row","column"]),className:p.default.string,disabled:p.default.bool,children:p.default.node},E.defaultProps={direction:"row",options:[],value:[],onChange:function(){}}},function(e,t,a){e.exports={group:"_1apuDq7M0zdRfWCPastdWU"}},,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(25),m=n(r(774)),h=n(r(1212));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t){var a=e.props,r=a.index;(0,a.onChange)(r,t)},e.handleDelete=function(){var t=e.props,a=t.index;(0,t.onDelete)(a)},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.readOnly,r=(e.onDelete,e.onChange,e.keyProps),n=void 0===r?{}:r,o=e.valueProps,i=void 0===o?{}:o,c=(0,u.default)(e,["readOnly","onDelete","onChange","keyProps","valueProps"]),s=n.component,f=void 0===s?p.Input:s,v=(0,u.default)(n,["component"]),y=i.component,g=void 0===y?p.Input:y,b=(0,u.default)(i,["component"]);return d.default.createElement("div",{className:h.default.item},d.default.createElement(m.default,(0,l.default)({},c,{onChange:this.handleChange}),d.default.createElement(f,(0,l.default)({name:"key",placeholder:t("KEY"),readOnly:a},v)),d.default.createElement(g,(0,l.default)({name:"value",placeholder:t("VALUE"),readOnly:a},b))),!a&&d.default.createElement(p.Button,{type:"flat",icon:"trash",className:h.default.delete,onClick:this.handleDelete}))}}]),r}(d.default.Component);a.default=y},,,,function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=r(25),p=l(r(1681));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,i.default)(r,e);var a=m(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.steps,r=e.current;return f.default.createElement("div",{className:p.default.wrapper},a.map((function(e,a){return f.default.createElement("div",{key:e.title},r>=a?f.default.createElement(d.Icon,{name:"success",type:"coloured",size:14}):f.default.createElement(d.Icon,{name:"dot",type:"light",size:14}),f.default.createElement("span",null,t(e.title)))})))}}]),r}(f.Component);a.default=h},function(e,t,a){e.exports={wrapper:"_3iSN2t3fxpa-6qCq-vAc0D"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(16)),f=n(r(73)),d=n(r(650)),p=n(r(0)),m=r(1),h=r(25),v=r(58),y=r(37),g=n(r(1683));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,o.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,namespace:e.props.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e.handleNameChange=(0,d.default)((function(t){(0,f.default)(e.formTemplate,'metadata.labels["app.kubernetes.io/name"]',t),(0,f.default)(e.fedFormTemplate,'metadata.labels["app.kubernetes.io/name"]',t),(0,f.default)(e.fedFormTemplate,'spec.selector.matchLabels["app.kubernetes.io/name"]',t),e.props.onLabelsChange((0,s.default)(e.fedFormTemplate,"spec.selector.matchLabels")),(0,f.default)(e.props.formData,"ingress.metadata.name","".concat(t,"-ingress-").concat((0,y.generateId)())),e.props.isFederated&&(0,y.updateFederatedAnnotations)(e.formTemplate)}),200),e.handleVersionChange=(0,d.default)((function(t){(0,f.default)(e.fedFormTemplate,'spec.selector.matchLabels["app.kubernetes.io/version"]',t),e.props.onLabelsChange((0,s.default)(e.fedFormTemplate,"spec.selector.matchLabels"))}),200),e.handleGovernanceChange=function(t){e.props.onGovernanceChange(t),e.props.isFederated&&(0,y.updateFederatedAnnotations)(e.formTemplate)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.serviceMeshEnable;return p.default.createElement("div",{className:g.default.wrapper},p.default.createElement("div",{className:g.default.step},p.default.createElement("div",null,t("BASIC_INFORMATION")),p.default.createElement("p",null,t("APP_BASIC_INFORMATION_DESC"))),p.default.createElement(h.Form,{data:this.formTemplate,ref:a},p.default.createElement(h.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:v.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},p.default.createElement(h.Input,{name:"metadata.name",onChange:this.handleNameChange,maxLength:63})),p.default.createElement(h.Form.Item,{label:t("VERSION"),desc:t("VERSION_DESC"),rules:[{pattern:v.PATTERN_SERVICE_VERSION,message:t("VERSION_DESC")}]},p.default.createElement(h.Input,{name:"metadata.labels['app.kubernetes.io/version']",onChange:this.handleVersionChange,maxLength:16})),p.default.createElement(h.Form.Item,{label:t("APPLICATION_GOVERNANCE"),desc:t("APPLICATION_GOVERNANCE_DESC")},p.default.createElement(h.Select,{name:"metadata.annotations['servicemesh.kubesphere.io/enabled']",placeholder:" ",options:this.governances,onChange:this.handleGovernanceChange,disabled:!r})),p.default.createElement(h.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(h.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))))}},{key:"formTemplate",get:function(){return this.props.formData.application}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,s.default)(this.formTemplate,"spec.template"):this.formTemplate}},{key:"governances",get:function(){return[{label:t("ON"),value:"true"},{label:t("OFF"),value:"false"}]}}]),r}(p.default.Component);a.default=E,E.propTypes={onLabelsChange:m.PropTypes.func},E.defaultProps={onLabelsChange:function(){}}},function(e,t,a){e.exports={wrapper:"_1OmNzRv8XpPCnBDZlgpDsE",step:"_2WIIJrqcO7AptVgzcP5Yxq",upload:"_3c_2fy2IQ-R39woLxq5KZA"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(73)),p=n(r(190)),m=n(r(0)),h=r(37),v=n(r(748)),y=n(r(1214)),g=n(r(1803)),b=n(r(1815));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).serviceStore=new v.default,e.state={components:(0,p.default)(e.props.formData,["application","ingress"])||{},editData:{},showAdd:!1},e.showAdd=function(t){e.setState({showAdd:!0,editData:e.getEditData(e.state.components[t])})},e.hideAdd=function(){e.setState({showAdd:!1,editData:{}})},e.getEditData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.values(e).forEach((function(e){var a=e.kind.replace("Federated","");t[a]=e})),t},e.updateComponentKind=function(){var t=e.props.formData.application;(0,d.default)(t,"".concat(e.fedPrefix,"spec.componentKinds"),[{group:"",kind:"Service"},{group:"apps",kind:"Deployment"},{group:"apps",kind:"StatefulSet"},{group:"networking.k8s.io",kind:"Ingress"},{group:"servicemesh.kubesphere.io",kind:"Strategy"},{group:"servicemesh.kubesphere.io",kind:"ServicePolicy"}])},e.handleAdd=function(t){t.workload=t.Deployment||t.StatefulSet,t.service=t.Service,e.updateAppLabels(t),e.updateGovernance(t);var a=(0,f.default)(t,"service.metadata.name"),r=(0,f.default)(e.state.editData,"Service.metadata.name");e.setState((function(e){var n=e.components;return r&&n[r]&&delete n[r],{components:_(_({},n),{},(0,l.default)({},a,t)),editData:{}}}),(function(){r&&delete e.props.formData[r],e.props.formData[a]=t,e.updateComponentKind(),e.hideAdd()}))},e.handleDelete=function(t){e.setState((function(e){var a=e.components;return delete a[t],{components:_({},a)}}),(function(){delete e.props.formData[t],e.updateComponentKind()}))},e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.formData;t!==e.formData&&this.setState({components:(0,p.default)(t,["application","ingress"])||{}})}},{key:"validate",value:function(e){e&&e()}},{key:"updateAppLabels",value:function(e){var t=(0,f.default)(this.props.formData,"application.".concat(this.fedPrefix,"spec.selector.matchLabels"),[]);(0,h.mergeLabels)(e.workload,t),(0,h.mergeLabels)(e.service,t)}},{key:"updateGovernance",value:function(e){var t=this.props,a=t.isGovernance,r=t.isFederated;(0,d.default)(e.workload,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',String(a)),(0,d.default)(e.service,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',String(a)),(0,d.default)(e.workload,"spec.template.".concat(this.fedPrefix,'metadata.annotations["sidecar.istio.io/inject"]'),String(a)),r&&((0,h.updateFederatedAnnotations)(e.workload),(0,h.updateFederatedAnnotations)(e.service))}},{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.isFederated,l=e.projectDetail,u=this.state,o=u.components,i=u.showAdd,c=u.editData;return m.default.createElement("div",{className:b.default.wrapper},m.default.createElement("div",{className:b.default.step},m.default.createElement("div",null,t("SERVICE_PL")),m.default.createElement("p",null,t("APPLICATION_SERVICE_DESC"))),m.default.createElement("div",{className:b.default.components},m.default.createElement(g.default,{data:o,clusters:l.clusters,onAdd:this.showAdd,onDelete:this.handleDelete})),m.default.createElement(y.default,{cluster:a,namespace:r,detail:c,store:this.serviceStore,module:"services",visible:i,onCancel:this.hideAdd,onOk:this.handleAdd,isFederated:n,projectDetail:l}))}},{key:"fedPrefix",get:function(){return this.props.isFederated?"spec.template.":""}}]),r}(m.default.Component);a.default=S},function(e,t,a){e.exports={cluster:"WepWXI1aSdsP2mN7tQD4h",title:"-FR9pSqY9v4vM0_IHSUJb",selected:"_10Jl3vuRvh7yJv5FXgkQV3"}},function(e,t,a){e.exports={wrapper:"_1MKeNDQmYI8pkIxXHU03ir",selected:"_3OBd22JrAfh3uBO-tVAK5U"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(71)),i=n(r(21)),c=n(r(136)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=l(r(0)),v=n(r(16)),y=n(r(190)),g=n(r(936)),b=n(r(68)),E=r(5),_=r(70),O=n(r(853)),S=r(37),k=r(280),C=n(r(773)),R=n(r(811)),w=n(r(937)),P=n(r(902)),D=n(r(1067));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var A=(0,_.observer)(u=function(e){(0,d.default)(r,e);var a=I(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={quota:{},limitRange:{},imageRegistries:[],availableQuota:{}},e.quotaStore=new R.default,e.workspaceQuotaStore=new O.default,e.limitRangeStore=new w.default,e.imageRegistryStore=new C.default,e.handleSubmit=function(t){var a=e.props,r=a.index,n=a.containerType;(0,a.onEdit)({index:r,containerType:n,data:(0,y.default)(t,"type")})},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.fetchQuota()}},{key:"fetchData",value:function(){var e=this,t=this.props,a=t.cluster,r=t.namespace;Promise.all([this.quotaStore.fetch({cluster:a,namespace:r}),this.limitRangeStore.fetchListByK8s({cluster:a,namespace:r}),this.imageRegistryStore.fetchListByK8s({cluster:a,namespace:r,fieldSelector:"type=kubernetes.io/dockerconfigjson"})]).then((function(t){var a=(0,c.default)(t,3),r=a[0],n=a[1],l=a[2];e.setState({quota:r,limitRange:(0,v.default)(n,"[0].limit"),imageRegistries:l})}))}},{key:"fetchQuota",value:function(){var e=this,t=this.props,a=t.cluster,r=t.workspace,n=t.namespace;r&&n&&Promise.all([this.quotaStore.fetch({cluster:a,namespace:n}),this.workspaceQuotaStore.fetchDetail({name:r,workspace:r,cluster:a})]).then((function(){var t=(0,E.toJS)(e.quotaStore.data.hard),a=(0,k.getLeftQuota)((0,v.default)(e.workspaceQuotaStore.detail,"status.total"),e.quotaStore.data),r=a.namespace,n=a.workspace;e.setState({availableQuota:{workspace:n,namespace:N(N({},r),(0,y.default)(t,S.resourceLimitKey))}})}))}},{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.formData,l=e.containerType,u=e.supportGpuSelect,i=this.state,c=i.quota,s=i.limitRanges,f=i.imageRegistries;return h.default.createElement(P.default,(0,o.default)({},this.props,{title:h.default.createElement("span",null,"".concat(t("IMAGE"),": ").concat(n.image)),onOk:this.handleSubmit}),h.default.createElement(D.default,{data:n,cluster:a,namespace:r,quota:c,limitRanges:s,imageRegistries:f,defaultContainerType:l,supportGpuSelect:u,workspaceQuota:this.workspaceQuota}))}},{key:"workspaceQuota",get:function(){var e=(0,v.default)(this.state.availableQuota,"namespace",{}),t=(0,v.default)(this.state.availableQuota,"workspace",{});return(0,g.default)(e,t,(function(e,t){if(e||t)return(0,b.default)(e)?t:e<t?e:t}))}}]),r}(h.Component))||u;a.default=A},function(e,t,a){e.exports={form:"_2ENUkZ-YXse5KNuYyQc3CC",formContent:"_2OLXHWU4Ff8lmPE1AGEvUG",modify:"hTQMwOyZjUCxBsnBstgoS",confirm:"_22Uvyer_96QdSJme2whyut"}},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=r(a(651)),d=r(a(820)),p=a(25),m=r(a(1216));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var v=function(e){(0,u.default)(a,e);var t=h(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).triggerChange=(0,d.default)((function(e){var t=e.left,a=e.right,n=r.props,l=n.marks,u=n.onChange,o=[r.getValueFromPercent(l,t),r.getValueFromPercent(l,a)];(0,f.default)(r.throttleState,o)||(r.throttleState=o,u(o))}),100),r.handleResize=function(){r.rect=r.ref.current.getBoundingClientRect()},r.handleMouseDown=function(e){document.addEventListener("mouseup",r.handleMouseUp);var t=r.state,a=t.left,n=t.right;if("slider"===e.target.getAttribute("role"))document.addEventListener("mousemove",r.handleMouseMove),r.type=e.target.dataset.type;else if(r.ref.current.contains(e.target)){var l=(e.x-r.rect.x)/r.rect.width*100;l>r.endPercent&&(l=100);var u=a+n/2;r.triggerChange(l<u?{left:l,right:n}:{left:a,right:l})}},r.handleMouseMove=function(e){var t=r.state,a=t.left,n=t.right,l=100*(e.x-r.rect.x)/r.rect.width;return l>r.endPercent&&(l=100),l<0&&(l=0),"left"===r.type?l>=n?(r.type="right",r.triggerChange({left:n,right:l})):r.triggerChange({left:l,right:n}):l<=a?(r.type="left",r.triggerChange({left:l,right:a})):r.triggerChange({left:a,right:l})},r.handleMouseUp=function(){document.removeEventListener("mousemove",r.handleMouseMove)},r.totalWeight=e.marks.reduce((function(e,t){return e+(t.weight||1)}),0)-1,r.endPercent=100*r.totalWeight/(r.totalWeight+1),r.state=r.getStateFromProps(e),r.ref=c.default.createRef(),r.throttleState=[],r}return(0,l.default)(a,[{key:"getValuePercent",value:function(e,t){for(var a=0,r=0;r<e.length-1;r++){var n=e[r].weight||1;if(t>=e[r+1].value)a+=n/this.totalWeight;else if(t>=e[r].value&&t<e[r+1].value){a+=n*((t-e[r].value)/(e[r+1].value-e[r].value))/this.totalWeight}}return a}},{key:"getValueFromPercent",value:function(e,t){for(var a=this.props.valueFormatter,r=this.totalWeight*t/100,n=0,l=0,u=0;u<e.length-1;u++){var o=e[u].weight||1;if((l+=o)>=r&&l<o+r){var i=(r+o-l)/o;n=(e[u+1].value-e[u].value)*i+e[u].value}}return Number(a?a(n):n.toFixed(2))}},{key:"getStateFromProps",value:function(e){var t=e.marks,a=e.value;return{left:100*this.getValuePercent(t,a[0]),right:100*this.getValuePercent(t,a[1])}}},{key:"componentDidUpdate",value:function(e){if(!(0,f.default)(e.value,this.props.value)){var t=this.getStateFromProps(this.props),a=t.left,r=t.right;a<=r&&this.setState({left:a,right:r})}}},{key:"componentDidMount",value:function(){this.ref&&this.ref.current&&(this.ref.current.addEventListener("mousedown",this.handleMouseDown),this.rect=this.ref.current.getBoundingClientRect(),window.addEventListener("resize",this.handleResize))}},{key:"componentWillUnmount",value:function(){this.ref&&this.ref.current&&(this.ref.current.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("resize",this.handleResize))}},{key:"render",value:function(){var e=this,t=this.state,a=t.left,r=t.right,n=this.props,l=n.value,u=n.unit,o=n.marks,i=0;return c.default.createElement("div",{className:m.default.slider,ref:this.ref},c.default.createElement("div",{className:m.default.rail}),c.default.createElement("div",{className:m.default.track,role:"track",style:{left:"".concat(a,"%"),width:"".concat(r-a,"%")}}),c.default.createElement(p.Tooltip,{content:"".concat(l[0]," ").concat(u)},c.default.createElement("div",{className:m.default.handler,role:"slider","data-type":"left",style:{left:"calc(".concat(a,"% - 10px)")}})),c.default.createElement(p.Tooltip,{content:"".concat(l[1]," ").concat(u)},c.default.createElement("div",{className:m.default.handler,role:"slider","data-type":"right",style:{left:"calc(".concat(r,"% - 10px)")}})),c.default.createElement("div",{className:m.default.mark},o.map((function(t){var a=t.weight||1,r=100*((i+=a)-a)/e.totalWeight;return c.default.createElement("span",{key:t.value,style:{left:"".concat(r,"%")}},t.label)}))))}}]),a}(c.default.Component);t.default=v,v.propTypes={marks:s.default.array,value:s.default.array,defaultValue:s.default.array,unit:s.default.string,onChange:s.default.func,valueFormatter:s.default.func},v.defaultProps={marks:[],value:[0,0],unit:"",onChange:function(){}}},function(e,t,a){e.exports={toggle:"_1sOiELnsYL6wUAGXlA2m0H",children:"_3aYqrLN40fjDBINs477myp"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(71)),o=l(r(49)),i=l(r(56)),c=l(r(50)),s=l(r(21)),f=l(r(12)),d=l(r(13)),p=l(r(19)),m=l(r(20)),h=l(r(18)),v=n(r(0)),y=l(r(1)),g=l(r(16)),b=l(r(73)),E=l(r(820)),_=l(r(24)),O=l(r(32)),S=l(r(3)),k=l(r(137)),C=r(25),R=r(37),w=r(58),P=l(r(992)),D=l(r(1693)),T=l(r(1217));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var x=function(e){(0,p.default)(r,e);var a=A(r);function r(e){var n;return(0,f.default)(this,r),(n=a.call(this,e)).handleEnter=function(e){if(globals.config.enableImageSearch){var t=e||{},a=t.logo,r=void 0===a?"":a,l=t.short_description,u=void 0===l?"":l,o=n.props.formTemplate,i=(0,g.default)(o,"pullSecret"),c=(0,g.default)(o,"image","");n.image&&c===n.image?n.image=void 0:(n.ImageDetail={image:c,secret:i,logo:r,short_description:u},n.getImageDetail(n.ImageDetail))}},n.getImageDetailNoCert=function(){n.getImageDetail(I(I({},n.ImageDetail),{},{insecure:!0}))},n.getImageDetail=function(){var e=(0,c.default)(o.default.mark((function e(t){var a,r,l,u,c,s,f,d,p,m,h;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.image,r=t.secret,l=t.insecure,u=(0,i.default)(t,["image","secret","insecure"]),c=n.props,s=c.namespace,f=c.imageRegistries,a&&!n.isUnMounted){e.next=4;break}return e.abrupt("return");case 4:return n.image=a,n.setState({isLoading:!0}),d=f.find((function(e){return e.value===r})),p=(0,g.default)(d,"cluster"),e.next=10,n.store.getImageDetail({cluster:p,namespace:s,image:a,secret:r,insecure:l});case 10:m=e.sent,h=I(I(I({},m),u),{},{image:a}),(0,b.default)(globals,"cache[".concat(a,"]"),h),(0,O.default)(h.exposedPorts)||n.setState({showPortsTips:!0}),n.setState({isLoading:!1});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleFillPorts=function(){var e=n.selectedImage.exposedPorts.map((function(e){var t=e.split("/")[1],a=Number(e.split("/")[0]);return{name:"".concat(t,"-").concat(a),protocol:t.toUpperCase(),containerPort:a,servicePort:a}}));(0,O.default)(e)||((0,b.default)(n.props.formTemplate,"ports",e),n.context.forceUpdate&&n.context.forceUpdate())},n.renderWaringText=function(){return v.default.createElement("p",null,t("IGNORE_CERT_WARN_DESC"))},n.renderSelectedContent=function(){if(n.state.isLoading)return v.default.createElement(C.Loading,null,v.default.createElement("div",{className:T.default.selectedContent}));if((0,_.default)(n.selectedImage)){var e=n.selectedImage,a=e.message;if("failed"===e.status)return a&&a.includes("x509")?v.default.createElement("div",{className:(0,S.default)(T.default.selectedContent,T.default.emptyContent)},v.default.createElement(C.Icon,{name:"docker",className:T.default.icon}),v.default.createElement("p",{className:T.default.desc},t("CERT_ERROR"),v.default.createElement(C.Tooltip,{content:n.renderWaringText},v.default.createElement("span",{className:T.default.textConfirm,onClick:n.getImageDetailNoCert},t("IGNORE_AND_RETRY"))))):v.default.createElement("div",{className:(0,S.default)(T.default.selectedContent,T.default.emptyContent)},v.default.createElement("div",null,v.default.createElement(C.Icon,{name:"docker",className:T.default.icon}),v.default.createElement("p",{className:T.default.desc},t("NO_IMAGE_FOUND"))));var r=n.selectedImage,l=r.image,u=r.createTime,o=r.exposedPorts,i=void 0===o?[]:o,c=r.logo,s=r.short_description,f=l.indexOf("/")>-1?l.split("/")[0]:"docker.io",d=i.join("; "),p=a||s;return v.default.createElement("div",{className:T.default.selectedContent},v.default.createElement("div",{className:T.default.selectedInfo},v.default.createElement("img",{className:T.default.logo,src:c||"/assets/no_img.svg",alt:l}),v.default.createElement("div",{className:T.default.imageInfo},v.default.createElement("p",{className:T.default.title},l),v.default.createElement("p",{className:T.default.desc},t("IMAGE_TIME_SIZE_LAYER",{time:(0,k.default)(u).fromNow()}))),n.state.showPortsTips?v.default.createElement(C.Button,{className:T.default.defaultPortButtons,onClick:n.handleFillPorts},"👉 ",t("USE_DEFAULT_PORTS")):null),p?v.default.createElement("div",{className:T.default.message},p):null,v.default.createElement("div",{className:T.default.config},v.default.createElement("div",{className:T.default.selectedInfo},v.default.createElement(C.Icon,{name:"tag",className:T.default.icon}),v.default.createElement("div",{className:T.default.imageInfo},v.default.createElement("p",null,n.tag),v.default.createElement("p",null,t("TAG")))),v.default.createElement("div",{className:T.default.selectedInfo},v.default.createElement(C.Icon,{name:"port",className:T.default.icon}),v.default.createElement("div",{className:T.default.imageInfo},v.default.createElement("p",null,d||t("NO_DEFAULT_PORT")),v.default.createElement("p",null,t("PORT")))),v.default.createElement("div",{className:T.default.selectedInfo},v.default.createElement(C.Icon,{name:"docker",className:T.default.icon}),v.default.createElement("div",{className:T.default.imageInfo},v.default.createElement("p",null,f),v.default.createElement("p",null,t("REGISTRY"))))))}return v.default.createElement("div",{className:(0,S.default)(T.default.selectedContent,T.default.emptyContent)},v.default.createElement("div",null,v.default.createElement(C.Icon,{name:"docker",className:T.default.icon}),v.default.createElement("p",{className:T.default.desc},t("SET_IMAGE_DESC"))))},n.store=new P.default,n.getImageDetail=(0,E.default)(n.getImageDetail,1e3),n.state={isLoading:!1,showPortsTips:!1},n}return(0,d.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.formTemplate,t=(0,g.default)(e,"image","");if(!this.selectedImage&&t){var a=(0,g.default)(e,"pullSecret");this.getImageDetail({image:t,secret:a})}}},{key:"componentWillUnmount",value:function(){this.isUnMounted=!0}},{key:"render",value:function(){return v.default.createElement(v.default.Fragment,null,v.default.createElement(C.Form.Item,{label:t("IMAGE"),desc:t.html("IMAGE_DESC",{link:(0,R.getDocsUrl)("imageregistry")}),rules:[{required:!0,message:t("IMAGE_EMPTY")},{pattern:w.PATTERN_IMAGE,message:t("INVALID_IMAGE")}]},v.default.createElement(D.default,(0,u.default)({},this.props,{store:this.store,onEnter:this.handleEnter,name:"image",onLoading:this.handleLoadingChange}))),globals.config.enableImageSearch&&this.renderSelectedContent())}},{key:"selectedImage",get:function(){var e=this.props.formTemplate,t=(0,g.default)(e,"image","");return(0,g.default)(globals.cache,"[".concat(t,"]"))}},{key:"tag",get:function(){var e=(0,g.default)(this.props.formTemplate,"image",""),t=w.PATTERN_IMAGE_TAG.exec(e);return(0,g.default)(t,"[".concat(t.length-1,"]"),":latest").slice(1)}}]),r}(v.Component);a.default=x,x.defaultProps={className:"",type:"add"},x.contextTypes={forceUpdate:y.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(21)),o=n(r(49)),i=n(r(50)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(16)),v=n(r(73)),y=n(r(32)),g=n(r(3)),b=r(25),E=n(r(1694)),_=n(r(1696)),O=n(r(1217));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=function(e){(0,f.default)(r,e);var a=S(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).handleDOMClick=function(e){n.dropContentRef&&n.dropContentRef.current&&!n.dropContentRef.current.contains(e.target)&&n.hideContent()},n.showContent=function(){n.setState({visible:!0},(function(){document.addEventListener("click",n.handleDOMClick),"dockerHub"!==n.hubType&&n.fetchHarborList("",n.state.harborData)}))},n.hideContent=function(){"dockerHub"!==n.hubType&&n.setState({harborList:[]}),n.setState({visible:!1},(function(){document.removeEventListener("click",n.handleDOMClick)}))},n.handleDetailRedirect=function(e){var t=e.currentTarget.dataset.image;window.open("https://hub.docker.com/_/".concat(t))},n.handleSecretChange=function(e){if(e){var t=n.props.imageRegistries.filter((function(t){return t.value===e}))[0];n.setState({harborData:t})}var a=n.props.formTemplate;(0,v.default)(a,"pullSecret",e),n.props.onChange(n.registryUrl)},n.handleInputChange=function(e,t){var a=t;n.registryUrl&&(a="".concat(n.registryUrl,"/").concat(t).replace(/\/+/g,"/")),a=a.replace(/\s+/g,""),n.props.onChange(a)},n.handleKeyUp=function(e){13===e.keyCode&&n.handleConfirm()},n.handleConfirm=function(){n.imageName&&n.props.onEnter()},n.handleDockerImageSelected=function(){var e=(0,i.default)(o.default.mark((function e(t){var a,r,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.currentTarget.dataset,r=a.image,l=a.logo,u=a.short_description,n.props.onChange(r),n.hideContent(),n.props.onEnter({logo:l,short_description:u});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleHarborImageSelected=function(){var e=(0,i.default)(o.default.mark((function e(t){var a,r,l,u,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.harborData,r=t.project_name,l=t.repository_name.replace("".concat(r,"/"),""),e.next=5,n.fetchHarborImageTag(a,r,l);case 5:u=e.sent,i="".concat(t.repository_name,":").concat(u),"","",n.props.onChange("".concat(n.registryUrl,"/").concat(i)),n.hideContent(),n.props.onEnter({logo:"",short_description:""});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSearchDockerHub=function(e){n.fetchDockerList(e)},n.handleSearchHarbor=function(e){n.fetchHarborList(e,n.state.harborData)},n.fetchDockerList=function(){var e=(0,i.default)(o.default.mark((function e(t){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),e.next=3,n.store.getDockerImagesLists({q:t||"",image_filter:t?void 0:"official",page_size:50,type:"image"}).finally((function(){!n.isUnMounted&&n.setState({isLoading:!1})}));case 3:a=e.sent,!n.isUnMounted&&n.setState({dockerList:(0,h.default)(a,"summaries",[])});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.fetchHarborList=function(){var e=(0,i.default)(o.default.mark((function e(t,a){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,h.default)(a,"url")&&!(0,y.default)(a)){e.next=3;break}return e.abrupt("return");case 3:return n.setState({isLoading:!0}),e.next=6,n.store.getHarborImagesLists({harborData:a,params:{q:t||""}}).finally((function(){!n.isUnMounted&&n.setState({isLoading:!1})}));case 6:r=e.sent,!n.isUnMounted&&n.setState({harborList:(0,h.default)(r,"repository",[])});case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.fetchHarborImageTag=function(){var e=(0,i.default)(o.default.mark((function e(t,a,r){var l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.store.getHarborImageTag(t,a,r,{with_tag:!0,with_scan_overview:!0,with_label:!0,page_size:15,page:1});case 2:if(!((l=e.sent)&&l.length>0&&l[0].tags.length>0)){e.next=5;break}return e.abrupt("return",l[0].tags[0].name);case 5:return e.abrupt("return","");case 6:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),n.renderContent=function(){return n.state.visible?m.default.createElement("div",{className:(0,g.default)(O.default.dropContent,(0,u.default)({},O.default.dropContent_hide,!n.state.visible)),ref:n.dropContentRef},m.default.createElement("div",{className:O.default.header},m.default.createElement(b.InputSearch,{className:O.default.search,onSearch:"dockerHub"===n.hubType?n.handleSearchDockerHub:n.handleSearchHarbor,placeholder:t("SEARCH")}),n.state.isLoading&&m.default.createElement(b.Loading,{className:"float-left",size:28})),"dockerHub"===n.hubType?n.renderDockerList():n.renderHarborList()):null},n.state={dockerList:[],harborList:[],hubData:{},visible:!1,isLoading:!1},n.store=e.store,n.dropContentRef=m.default.createRef(),n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchDockerList()}},{key:"componentWillUnmount",value:function(){this.isUnMounted=!0,document.removeEventListener("click",this.handleDOMClick)}},{key:"renderDockerList",value:function(){var e=this;return(0,y.default)(this.state.dockerList)?m.default.createElement("ul",{className:O.default.listContent},m.default.createElement("div",{className:(0,g.default)(O.default.selectedContent,O.default.emptyContent)},m.default.createElement("div",null,m.default.createElement(b.Icon,{name:"docker",className:O.default.icon}),m.default.createElement("p",{className:O.default.desc},t("NO_IMAGE_FOUND"))))):m.default.createElement("ul",{className:O.default.listContent},this.state.dockerList.map((function(t){return m.default.createElement("li",{className:O.default.ImageItem,key:t.name},m.default.createElement("img",{src:(0,h.default)(t,"logo_url.large")||"/assets/no_img.svg",alt:t.name}),m.default.createElement("div",{className:O.default.info},m.default.createElement("p",{onClick:e.handleDockerImageSelected,className:O.default.clickable,"data-image":t.slug,"data-logo":(0,h.default)(t,"logo_url.large",""),"data-short_description":t.short_description},t.name),m.default.createElement("p",null,t.short_description)),m.default.createElement("div",{className:O.default.starContainer},m.default.createElement(b.Icon,{className:O.default.star,name:"star"}),t.star_count),m.default.createElement("div",{className:O.default.actions},m.default.createElement("span",{className:O.default.clickable,onClick:e.handleDetailRedirect,"data-image":t.slug},m.default.createElement(b.Icon,{name:"paper",size:16,changeable:!0})),m.default.createElement("span",{className:O.default.clickable,onClick:e.handleDockerImageSelected,"data-image":t.slug,"data-logo":(0,h.default)(t,"logo_url.large",""),"data-short_description":t.short_description},m.default.createElement(b.Icon,{name:"check",size:16,changeable:!0}))))})))}},{key:"renderHarborList",value:function(){var e=this;return(0,y.default)(this.state.harborList)?m.default.createElement("ul",{className:O.default.listContent},m.default.createElement("div",{className:(0,g.default)(O.default.selectedContent,O.default.emptyContent)},m.default.createElement("div",null,m.default.createElement(b.Icon,{name:"docker",className:O.default.icon}),m.default.createElement("p",{className:O.default.desc},t("NO_IMAGE_FOUND"))))):m.default.createElement("ul",{className:O.default.listContent},this.state.harborList.map((function(t){return m.default.createElement("li",{className:O.default.ImageItem,key:t.repository_name},m.default.createElement("img",{src:"/assets/no_img.svg",alt:t.repository_name}),m.default.createElement("div",{className:O.default.info},m.default.createElement("p",{onClick:function(a){return e.handleHarborImageSelected(t,a)},className:O.default.clickable},t.repository_name)),m.default.createElement("div",{className:O.default.actions},m.default.createElement("span",{className:O.default.clickable,onClick:function(a){return e.handleHarborImageSelected(t,a)}},m.default.createElement(b.Icon,{name:"check",size:16,changeable:!0}))))})))}},{key:"render",value:function(){return m.default.createElement(m.default.Fragment,null,m.default.createElement(_.default,{className:O.default.imageInput,onChange:this.handleInputChange,value:this.imageName,autoComplete:"off",placeholder:this.secretValue?"nginx:latest":t("IMAGE_PLACEHOLDER"),onBlur:this.handleConfirm,onKeyUp:this.handleKeyUp},m.default.createElement(E.default,{value:this.secretValue,className:O.default.secretSelect,options:this.secretsOptions,onChange:this.handleSecretChange,disabled:this.secretsOptions.length<=1})),"others"===this.hubType||globals.config.enableImageSearch?m.default.createElement(b.Icon,{name:"templet",changeable:!0,className:O.default.dropDownIcon,onClick:this.showContent}):null,this.renderContent())}},{key:"secretValue",get:function(){var e=this.props.formTemplate;return(0,h.default)(e,"pullSecret","")}},{key:"hubType",get:function(){switch(this.secretValue){case"":return"dockerHub";case"harbor":return"harbor";default:return"others"}}},{key:"registryUrl",get:function(){var e=this,t=this.props.imageRegistries;if(!(0,y.default)(t)&&this.secretValue){var a=t.find((function(t){return t.value===e.secretValue})),r=(0,h.default)(a,"url","");if(r)return r=r.replace(/^(http(s)?:\/\/)?(.*)$/,"$3")}return""}},{key:"imageName",get:function(){var e=this.props.value;if(e.startsWith(this.registryUrl)){var t=new RegExp("".concat(this.registryUrl,"(/)?"));return e.replace(t,"")}return e}},{key:"secretsOptions",get:function(){var e=this.props.imageRegistries.map((function(e){return{label:"".concat(e.url," (").concat(e.value,")"),value:e.value,url:e.url}}));return[{label:"Docker Hub",value:"",url:""}].concat((0,l.default)(e))}}]),r}(m.default.Component);a.default=k,k.defaultProps={imageRegistries:[],className:"",value:"",onChange:function(){}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=r(a(1)),d=r(a(650)),p=r(a(32)),m=r(a(68)),h=r(a(651)),v=r(a(3)),y=a(25),g=r(a(1695));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,o.default)(a,e);var t=b(a);function a(e){var r;return(0,l.default)(this,a),(r=t.call(this,e)).triggerChange=(0,d.default)((function(){(0,r.props.onChange)(r.state.value)})),r.handleClick=function(e){r.setState({value:e,showOptions:!1},(function(){r.triggerChange()}))},r.toggleShowOptions=function(){r.setState({showOptions:!r.state.showOptions})},r.handleShowOptions=function(){r.setState({showOptions:!0})},r.handleHideOptions=function(){r.setState({showOptions:!1})},r.state={value:(0,m.default)(e.value)?e.defaultValue:e.value,showOptions:!1},r.optionsRef=s.default.createRef(),r}return(0,u.default)(a,[{key:"renderOption",value:function(e,t){var a=this;return s.default.createElement("div",{key:e.uid||e.value,onClick:function(){return a.handleClick(e.value)},className:(0,v.default)(g.default.option,(0,n.default)({},g.default.selected,t))},e.label)}},{key:"renderOptions",value:function(){var e=this,t=this.props,a=t.options,r=t.disabled,n=this.state.value;if(r||(0,p.default)(a))return null;var l=a.find((function(e){return(0,h.default)(e.value,n)}));return s.default.createElement("div",{className:g.default.options},l&&this.renderOption(l,!0),a.filter((function(e){return!(0,h.default)(e.value,n)})).map((function(t){return e.renderOption(t)})))}},{key:"renderControl",value:function(){var e=this.props,t=e.value,a=e.defaultValue,r=e.placeholder,l=e.options,u=e.disabled,o=t||a,i=l.find((function(e){return(0,h.default)(e.value,o)}))||r||{};return s.default.createElement("div",{className:g.default.control},s.default.createElement("span",{className:g.default.label},i.label),!u&&s.default.createElement(y.Icon,{className:(0,v.default)(g.default.rightIcon,(0,n.default)({},g.default.rightIcon_toggle,this.state.showOptions)),name:"chevron-down",size:20}))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.disabled;return s.default.createElement("div",{className:(0,v.default)(g.default.wrapper,(0,n.default)({},g.default.disabled,a),t),onClick:this.toggleShowOptions},s.default.createElement(y.Dropdown,{closeAfterClick:!1,visible:this.state.showOptions,onOpen:this.handleShowOptions,onClose:this.handleHideOptions,content:this.renderOptions()},this.renderControl()))}}]),a}(s.default.Component);t.default=E,E.propTypes={className:f.default.string,value:f.default.any,defaultValue:f.default.any,options:f.default.array.isRequired,onChange:f.default.func},E.defaultProps={className:"",defaultValue:"",options:[],onChange:function(){}}},function(e,t,a){e.exports={wrapper:"S_heeB_hWWpcU9iQV27vw",disabled:"_1aEV1eGRRlcxgiiUgzDi4t",control:"_3VHbJcAvcKO3wpbr1S6Nax",options:"_3xbjYC08sAusjBLLYYmR10",label:"_1O8-tjKxx-KQjGqUDhfVTm",rightIcon:"_2KGD9mmPPR7LoALKbTXcqH",rightIcon_toggle:"_300TNQVWjbgMrbsLWW7bIU",selected:"_1pwHXZgl5FXdbBPslY8RjQ",option:"_13sntOU00zu8UIQHzr2jVu"}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(71)),u=n(a(21)),o=n(a(56)),i=n(a(12)),c=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=r(a(0)),m=n(a(1)),h=n(a(3)),v=n(a(93)),y=n(a(190)),g=n(a(298)),b=n(a(1697));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=function(e){(0,s.default)(a,e);var t=E(a);function a(e){var r;return(0,i.default)(this,a),(r=t.call(this,e)).focus=function(){r.node.focus()},r.blur=function(){r.node.blur()},r.handleChange=function(e){var t=e.target.value,a=r.props,n=a.value,l=a.onChange,u=n||t;r.setState({value:u}),l!==g.default&&l(e,t)},r.handleKeyDown=function(e){var t=r.props,a=t.onPressEnter,n=t.onKeyDown;13===e.keyCode&&a&&a(e),n&&n(e)},r.state={value:String(e.value||e.defaultValue),isFocus:!1},r}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.size,n=t.disabled,i=t.children,c=(0,o.default)(t,["className","size","disabled","children"]),s=this.state.value;return p.default.createElement("span",{className:(0,h.default)(b.default.input,a,(0,u.default)({},"is-".concat(r),r))},i,p.default.createElement("input",(0,l.default)({},(0,y.default)(c,"schemas","onKeyDown","onPressEnter","onChange","value","defaultValue","validateStatus","validateHelp","validateIcon","validateOnChange","validateOnBlur"),{disabled:(0,v.default)(n)?n():n,onKeyDown:this.handleKeyDown,onChange:this.handleChange,value:s,ref:function(t){e.node=t},"data-test":"imageSearch"})),p.default.createElement("span",{className:(0,h.default)(b.default.border,"input")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"value"in e&&e.value!==t.value?{value:e.value}:null}}]),a}(p.PureComponent);_.propTypes={name:m.default.string,type:m.default.string,className:m.default.string,size:m.default.oneOf(["small","default","large"]),value:m.default.oneOfType([m.default.string,m.default.number]),defaultValue:m.default.oneOfType([m.default.string,m.default.number]),disabled:m.default.oneOfType([m.default.bool,m.default.func]),onChange:m.default.func,onPressEnter:m.default.func,onKeyDown:m.default.func},_.defaultProps={type:"text",size:"default",disabled:!1,onChange:g.default,onPressEnter:g.default,onKeyDown:g.default,defaultValue:""};var O=_;t.default=O},function(e,t,a){e.exports={input:"_3vEQEMHbKh8LmE9d-auvSs",border:"_1UKB-z9KeXbZ9cQ3YQrnb2","is-small":"TnU7NSMR7wf7uCvk9WTBN",icon:"-ImUGeX33ECFh2FmuR9Z4","is-default":"_1o8YS1PIPm0_aFGs2NPwvr","is-large":"_3R2fJgdHmL4vLxJtTakF_B"}},function(e,t,a){e.exports={message:"_3obsx3JGHNcPFHM89AsInE",imageSearch:"_1OhvKXsP4kv0J873sFRM-g",columns:"aQZPHiJZpM_2WxHh0UHol",type:"_2LIGHzmFbBVhNOoFy_Ed-j"}},function(e,t,a){e.exports={wrapper:"_7te1l8EfVM6tZhqTao6Sf",text:"_3nzWDPF5TiOskojQKzJuIk"}},function(e,t,a){e.exports={wrapper:"_1nzmymJQjcRsMrjYGneDt5",tip:"_2NjdkVatk0DK13ijU1TUaM"}},function(e,t,a){e.exports={wrapper:"_2jnaJ_tJNRHuS4hoQljy_3"}},function(e,t,a){e.exports={port:"_3JduxMQOXq1WaUbypn2mu3"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(21)),o=l(r(12)),i=l(r(13)),c=l(r(19)),s=l(r(20)),f=l(r(18)),d=n(r(0)),p=r(25),m=l(r(185)),h=l(r(3)),v=l(r(1704));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={tab:"configMaps",chooseAll:!1,name:"",list:[]},e.settingKeys=function(){var t=e.props,a=t.configMaps,r=t.secrets,n=e.state,l=n.tab,u=n.name,o=[];if(""!==u){var i="configMaps"===l?a.find((function(e){return e.name===u})):r.find((function(e){return e.name===u}));o=Object.keys(i.data||{}).map((function(e){return{label:e,value:e,checked:!1}}))}e.setState({list:o})},e.handleRadioChange=function(t){e.setState({tab:t,name:"",list:[]})},e.handleAllChoose=function(){var t=e.state,a=t.list,r=t.allChoose,n=(0,m.default)(a);e.setState({allChoose:!r,list:n.map((function(e){return g(g({},e),{},{checked:!r})}))})},e.handleTypeChange=function(t){e.setState({name:t,list:[]},(function(){e.settingKeys()}))},e.handleKeyChecked=function(t){var a=e.state.list,r=(0,m.default)(a);r[t].checked=!r[t].checked,e.setState({list:r})},e.handleCancel=function(){var t=e.props.onCancel;e.setState({name:"",list:[]},(function(){t()}))},e.handleOk=function(){var t=e.props.onOK,a=e.state,r=a.tab,n=a.name,l=a.list,o="configMaps"===r?"configMapKeyRef":"secretKeyRef";t(l.filter((function(e){return e.checked})).map((function(e){return{name:e.value,valueFrom:(0,u.default)({},o,{name:n,key:e.value})}})))},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this,a=this.props.className,r=this.state,n=r.tab,l=r.allChoose,o=r.name,i=r.list;return d.default.createElement("div",{className:(0,h.default)(a,v.default.contentBox),style:this.style},d.default.createElement("div",{className:v.default.content},d.default.createElement("span",{className:v.default.title},t("BATCH_REFERENCE")),d.default.createElement(p.Alert,{className:v.default.tip,message:t("BATCH_REFERENCE_DESC")}),d.default.createElement(p.RadioGroup,{defaultValue:n,buttonWidth:120,wrapClassName:v.default.tabs,onChange:this.handleRadioChange},this.tabs.map((function(e){return d.default.createElement(p.RadioButton,{key:e.value,value:e.value},e.label)}))),d.default.createElement("div",{className:v.default.subTitle},d.default.createElement("span",null,"configMaps"===n?t("CONFIGMAP"):t("SECRET"))),d.default.createElement(p.Select,{className:v.default.select,prefixIcon:d.default.createElement(p.Icon,{name:"configMaps"===n?"hammer":"key"}),options:this.options,onChange:this.handleTypeChange,value:o}),d.default.createElement("div",{className:v.default.subTitle},d.default.createElement("span",null,t("KEY_PL")),i.length>0&&d.default.createElement("span",{className:v.default.allChoose,onClick:this.handleAllChoose},l?t("DESELECT_ALL"):t("SELECT_ALL"))),d.default.createElement("div",{className:v.default.table},d.default.createElement("div",{className:(0,h.default)(v.default.innerBox,(0,u.default)({},v.default.scroll,i.length>4))},i.map((function(t,a){return d.default.createElement(p.Checkbox,{className:(0,h.default)(v.default.tableItem,(0,u.default)({},v.default.checked,t.checked)),checked:t.checked,onChange:function(){return e.handleKeyChecked(a)}},t.label)}))))),d.default.createElement("div",{className:v.default.options},d.default.createElement(p.Button,{onClick:this.handleCancel},t("CANCEL")),d.default.createElement(p.Button,{type:"control",onClick:this.handleOk},t("OK"))))}},{key:"tabs",get:function(){return[{label:t("CONFIGMAP_PL"),value:"configMaps"},{label:t("SECRET_PL"),value:"secrets"}]}},{key:"options",get:function(){var e=this.props,t=e.configMaps,a=e.secrets;return"configMaps"===this.state.tab?t.map((function(e){return{label:e.name,value:e.name}})):a.map((function(e){return{label:e.name,value:e.name}}))}},{key:"style",get:function(){var e=this.props,t=e.showModal,a=(0,e.getParentPosition)();return t?{top:a.y,left:"calc(".concat(a.x,"px - 12px)")}:{}}}]),r}(d.Component);a.default=E},function(e,t,a){e.exports={contentBox:"_3fu0cXTS6-8QAQs_DJTlw3",content:"_16xE4DVV_sWZ9H7S_Es45D",title:"_1aEnOXwYPEjPFMpZIZCIH4",tip:"_2zo3TJ4xDa-xQGLmdmJAZX",tabs:"_1uI7sdLkFlHd6bb1y0rgyj",subTitle:"DiD89TxExP31ZkyD20Jnm",allChoose:"Fg_gHEB2_RjJA7n2xThUV",select:"_1ibpdeUpiDUA7lh3JDj7SU",table:"_17sbwrk45iiciLmuuauJNz",innerBox:"_2Jw8cKyp5nGmQps7akPnIC",tableItem:"_2UF616YDFSnZNrttSww9aW",checked:"_1ktEr8__1sxlaBM9jyC2zQ",options:"_1Wjti9og2mC72XU2APvskI",scroll:"DHVShHP-NwtOgMhDs3KIG"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(291)),p=n(r(32)),m=n(r(73)),h=n(r(650)),v=n(r(0)),y=n(r(1)),g=r(37),b=r(58),E=n(r(3)),_=r(25),O=n(r(1223)),S=n(r(774));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var w=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).state={keyError:!1,envType:"customization"},e.handleResourceValueForm=function(t){var a,r=e.props,n=r.configMaps,l=r.secrets,u={};return"configMapKeyRef"===e.envType?a=n.find((function(e){return e.name===t})):"secretKeyRef"===e.envType&&(a=l.find((function(e){return e.name===t}))),u[e.envType]={name:a?a.name:"",key:""},{valueFrom:u,resourceType:e.envType}},e.handleChange=function(t){var a=e.props.onChange,r={name:"",valueFrom:{}};if(t.resource){var n=e.handleResourceValueForm(t.resource),l=n.valueFrom,u=n.resourceType;r.valueFrom=C({},l),t.resourceKey&&(r.valueFrom[u].key=t.resourceKey)}r.name=t.name,a(r)},e.handleKeyData=function(t){var a=C({},e.props.value),r=Object.keys(a.valueFrom);r&&(0,m.default)(a,"valueFrom.".concat(r,".key"),t),a.name||(a.name=t),e.validEnvKey(a.name,a),e.props.onChange(a)},e.updateCheckStatus=function(){var a=e.props,r=a.repeatKeyArr,n=void 0===r?[]:r,l=a.index;if(n.length>0){var u=n.includes("".concat(l));u&&e.setState({keyError:u},(function(){var a=t("DUPLICATE_KEYS");e.handleError({message:a})}))}},e.handleCfOrScChange=function(t){var a={name:e.props.value.name||"",valueFrom:(0,l.default)({},e.envType,{name:t||"",key:""})};e.validEnvKey(a.name,a),e.props.onChange(a)},e.handleError=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.props,r=a.handleKeyError,n=a.handleInputError;r(t),n(t)},e.checkNameRepeat=function(t){var a=e.props,r=a.arrayValue,n=a.index;return r.length>1&&r.filter((function(e,a){return e.name===t&&a!==n})).length>0},e.validEnvKey=(0,h.default)((function(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!b.PATTERN_ENV_NAME.test(a),l=e.checkNameRepeat(a),u=(0,d.default)(r,"valueFrom")?(0,p.default)(r.valueFrom):""===r.value;if(""===a&&u)e.handleError(),e.setState({keyError:!1});else{if(l){var o=t("DUPLICATE_KEYS");e.handleError({message:o})}else if(n){var i=""!==a?t("ENVIRONMENT_INVALID_TIP"):t("ENVIRONMENT_CANNOT_BE_EMPTY");e.handleError({message:i})}else e.handleError();e.setState({keyError:n||l})}}),300),e.handleValueChange=(0,h.default)((function(t){var a=t.name,r=t.value;""===a&&""===r?(e.props.handleKeyError(),e.props.handleInputError(),e.setState({keyError:!1})):e.validEnvKey(a,{value:r})}),300),e.handleTypeChange=function(t){var a=e.props,r=a.value,n=a.onChange;e.setState({envType:t,keyError:""},(function(){n("customization"!==t?{name:r.name||"",valueFrom:(0,l.default)({},t,{name:"",key:""})}:{name:r.name||"",value:""}),""===r.name&&e.handleError()}))},e.renderConfigOrSecret=function(){var a=e.props.value,r=void 0===a?{}:a,n=e.state.keyError,u=e.parseValue(r.valueFrom),o=u.resourceType,i=u.resourceName,c=u.resourceKey,s={name:r.name,resource:i,resourceKey:c};return v.default.createElement(S.default,{value:s,onChange:e.handleChange},v.default.createElement("div",{className:O.default.typeBox},v.default.createElement(_.Select,{options:e.resourceOptions,onChange:e.handleTypeChange,value:e.envType})),v.default.createElement(_.Input,{name:"name",placeholder:t("KEY"),className:(0,E.default)((0,l.default)({},O.default.formError,n)),onChange:function(t){return e.validEnvKey(t,r)}}),v.default.createElement(_.Select,{name:"resource",placeholder:t("RESOURCE"),prefixIcon:v.default.createElement(_.Icon,{name:"configMapKeyRef"===e.envType?"hammer":"key"}),options:e.getConfigOrSecretOptions,onChange:e.handleCfOrScChange}),v.default.createElement(_.Select,{name:"resourceKey",placeholder:t("KEY_IN_RESOURCE"),options:e.getKeysOptions({resourceType:o,resourceName:i}),onChange:e.handleKeyData}))},e}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.updateCheckStatus()}},{key:"parseValue",value:function(e){var t=(0,d.default)(e,"configMapKeyRef")?"configMapKeyRef":"secretKeyRef";return{resourceType:t,resourceName:(0,f.default)(e,"".concat(t,".name"),""),resourceKey:(0,f.default)(e,"".concat(t,".key"),"")}}},{key:"getKeysOptions",value:function(e){var t,a=e.resourceType,r=e.resourceName,n=this.props,l=n.configMaps,u=n.secrets;return"configMapKeyRef"===a?t=l.find((function(e){return e.name===r})):"secretKeyRef"===a&&(t=u.find((function(e){return e.name===r}))),t?Object.keys(t.data||{}).map((function(e){return{label:e,value:e}})):[]}},{key:"render",value:function(){var e=this,a=this.props,r=a.value,n=void 0===r?{}:r,u=a.onChange,o=this.state.keyError;return n.valueFrom?this.renderConfigOrSecret():v.default.createElement(S.default,{value:n,onChange:u},v.default.createElement("div",{className:O.default.typeBox},v.default.createElement(_.Select,{options:this.resourceOptions,onChange:this.handleTypeChange,value:this.envType})),v.default.createElement(_.Input,{name:"name",placeholder:t("KEY"),className:(0,E.default)((0,l.default)({},O.default.formError,o)),onChange:function(t){return e.validEnvKey(t,n)}}),v.default.createElement(_.Input,{name:"value",placeholder:t("VALUE"),onChange:function(){return e.handleValueChange(n)}}))}},{key:"envType",get:function(){var e=this.state.envType,t=this.props.value,a=t.valueFrom&&Object.keys(t.valueFrom)[0];return a||e}},{key:"resourceOptions",get:function(){return[{label:t("CUSTOM"),value:"customization"},{label:t("FROM_CONFIGMAP"),value:"configMapKeyRef"},{label:t("FROM_SECRET"),value:"secretKeyRef"}]}},{key:"getConfigOrSecretOptions",get:function(){var e=this.props,t=e.configMaps,a=e.secrets;return"configMapKeyRef"===this.envType?t.map((function(e){return{label:(0,g.getDisplayName)(e),value:e.name}})):a.map((function(e){return{label:(0,g.getDisplayName)(e),value:e.name}}))}}]),r}(v.default.Component);a.default=w,w.propTypes={value:y.default.object,onChange:y.default.func,configMaps:y.default.array,secrets:y.default.array},w.defaultProps={name:"",value:{},onChange:function(){},configMaps:[],secrets:[]}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(56)),o=n(a(136)),i=r(a(0)),c=a(25),s=n(a(3)),f=n(a(1707));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var p=function(e){var t=e.children,a=e.className,r=e.text,n=e.dataTest,p=e.onOK,m=e.modalHeight,h=(0,i.useRef)(),v=(0,i.useState)(!1),y=(0,o.default)(v,2),g=y[0],b=y[1],E=(0,i.useState)({x:"100%",y:"100%",y1:0,height:32}),_=(0,o.default)(E,2),O=_[0],S=_[1],k=function(){b(!g)},C=t.props,R=C.className,w=(0,u.default)(C,["className"]),P=i.default.cloneElement(t,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({className:(0,s.default)(R,f.default.modal,(0,l.default)({},f.default.showModal,g)),getParentPosition:function(){return O},showModal:g,hideModal:k,onOK:function(e){k(),p(e)},onCancel:k},w));return i.default.createElement("div",{className:(0,s.default)(f.default.buttonModalBox,a),ref:h},P,i.default.createElement(c.Button,{onClick:function(){var e,t,a,r,n,l,u;g||(e=h.current.getBoundingClientRect(),t=e.x,a=e.y,r=e.height,n=window.innerHeight,l=n-m,u=n-m/2-(a+O.height/2),S({x:t,y:u>0?l-u:l-12,y1:a+7,height:r})),b(!g)},"data-test":n},r),i.default.createElement("div",{className:(0,s.default)(f.default.triangle,(0,l.default)({},f.default.showModal,g)),style:{top:O.y1,left:O.x}}))};t.default=p},function(e,t,a){e.exports={buttonModalBox:"_2_csTIElkvsBzjHdoPar-Y",modal:"_20nMOVrlzEe8lRAHGp8Ka7",triangle:"_2_7O7g-y-zVcwFvGHPcxyz",showModal:"_18GWZH_n37uqfC9dcmi96j"}},function(e,t,a){e.exports={wrapper:"_12aFZCpNAjO9ewtQoYxEL6",selected:"_2BBYo4tvNWHKB4WbqYEmi2"}},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(73)),p=n(r(0)),m=r(70),h=r(25),v=r(37),y=n(r(935)),g=r(58),b=n(r(748)),E=n(r(736)),_=n(r(737));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=(0,m.observer)(l=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).formTemplate=n.props.formTemplate.Service,n.handleNameChange=function(e){var t=n.props,a=t.isFederated,r=t.noWorkload,l=(0,f.default)(n.formTemplate,"metadata.labels",{});l.app=e.slice(0,63),(0,v.updateLabels)(a?(0,f.default)(n.formTemplate,"spec.template"):n.formTemplate,"services",l),a&&(0,d.default)(n.formTemplate,"metadata.labels.app",e.slice(0,63)),r||n.updateWorkload(e)},n.nameValidator=function(e,a,r){if(!a)return r();n.store.checkName({name:a,namespace:n.namespace,cluster:n.props.cluster}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.versionValidator=function(e,a,r){if(!a)return r();var l=(0,f.default)(n.formTemplate,"metadata.name"),u="".concat(l,"-").concat(a);n.workloadStore.checkName({name:u,namespace:n.namespace,cluster:n.props.cluster}).then((function(a){if(a.exist)return r({message:t("".concat(t(n.workloadKind)," ").concat(u," ").concat(t("exists"),", ").concat(t("version number is invalid"))),field:e.field});r()}))},n.handleVersionChange=function(e){var t=(0,f.default)(n.formTemplate,"metadata.name"),a="".concat(t,"-").concat(e),r=n.props,l=r.formTemplate,u=r.isFederated;(0,d.default)(l[n.workloadKind],"metadata.name",a),u&&(0,d.default)(l.Service,'metadata.annotations["kubesphere.io/workloadName"]',a)},n.state={showServiceMesh:!1,selectApp:{}},n.store=new b.default,n.workloadStore=new E.default(e.module),e.isFederated&&(n.store=new _.default(n.store),n.workloadStore=new _.default(n.workloadStore)),n}return(0,o.default)(r,[{key:"updateWorkload",value:function(e){var t=this.props,a=t.module,r=t.formTemplate,n=t.isFederated,l=(0,f.default)(this.formTemplate,"metadata.labels",{}),u=(0,f.default)(this.formTemplate,"metadata.namespace"),o="".concat(e,"-").concat(l.version);(0,d.default)(r[this.workloadKind],"metadata.name",o),(0,d.default)(r[this.workloadKind],"metadata.namespace",u),(0,d.default)(r[this.workloadKind],"metadata.labels.app",e),(0,v.updateLabels)(n?(0,f.default)(r[this.workloadKind],"spec.template"):r[this.workloadKind],a,l),"StatefulSet"===this.workloadKind&&(0,d.default)(r[this.workloadKind],n?"spec.template.spec.serviceName":"spec.serviceName",e),n&&((0,d.default)(r.Service,'metadata.annotations["kubesphere.io/workloadName"]',o),(0,d.default)(r.Service,'metadata.annotations["kubesphere.io/workloadModule"]',a))}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.noWorkload,n=e.cluster,l=e.namespace;return p.default.createElement(h.Form,{data:this.formTemplate,ref:a},p.default.createElement(h.Columns,null,p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("NAME"),desc:t("SERVICE_NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:g.PATTERN_SERVICE_NAME,message:t("INVALID_NAME_DESC",{message:t("SERVICE_NAME_DESC")})},{validator:this.nameValidator}]},p.default.createElement(h.Input,{name:"metadata.name",onChange:this.handleNameChange,autoFocus:!0,maxLength:63}))),p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},p.default.createElement(h.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),p.default.createElement(h.Columns,null,!l&&p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("PROJECT"),desc:t("PROJECT_DESC"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},p.default.createElement(y.default,{name:"metadata.namespace",cluster:n,defaultValue:this.namespace}))),!r&&p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("VERSION"),desc:t("VERSION_DESC"),rules:[{required:!0,message:t("VERSION_DESC")},{pattern:g.PATTERN_SERVICE_VERSION,message:t("VERSION_DESC")},{validator:this.versionValidator}]},p.default.createElement(h.Input,{name:"metadata.labels.version",defaultValue:"v1",maxLength:16,onChange:this.handleVersionChange}))),p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(h.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))))}},{key:"workloadKind",get:function(){var e=this.props,t=e.module;return e.noWorkload?"":g.MODULE_KIND_MAP[t]}},{key:"namespace",get:function(){return(0,f.default)(this.formTemplate,"metadata.namespace")}},{key:"serviceMeshOptions",get:function(){return[{label:t("Off"),value:"false"},{label:t("On"),value:"true"}]}}]),r}(p.default.Component))||l;a.default=S},,,function(e,t,a){e.exports={wrapper:"_3B75bxxzxYITarPsgzGCdF",replicas:"_1narKTilAkmGQWGzM_jNKi"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(109)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(70),v=n(r(16)),y=n(r(73)),g=n(r(782)),b=r(25),E=n(r(1)),_=n(r(1715)),O=n(r(1717)),S=n(r(1721));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,h.observer)((o=u=function(e){(0,f.default)(r,e);var a=k(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t,a){var r=(0,v.default)(e.props.template,"spec.overrides",[]),n=r.find((function(e){return e.clusterName===t}));n||(n={clusterName:t,clusterOverrides:[]},r.push(n)),n.clusterOverrides=n.clusterOverrides||[];var l=n.clusterOverrides.find((function(e){return"/spec/replicas"===e.path}));l?l.value=a:n.clusterOverrides.push({path:"/spec/replicas",value:a}),0===a&&(r=r.filter((function(e){return e.clusterName!==t}))),(0,y.default)(e.props.template,"spec.overrides",r);var u=(0,v.default)(e.props.template,"spec.placement.clusters",[]);(0,y.default)(e.props.template,"spec.placement.clusters",0===a?u.filter((function(e){return e.name!==t})):(0,g.default)([].concat((0,i.default)(u),[{name:t}]),"name")),e.props.onClusterUpdate&&e.props.onClusterUpdate()},e.getValue=function(t){if((0,v.default)(e.props.template,"spec.placement.clusters",[]).every((function(e){return e.name!==t})))return 0;var a,r=(0,v.default)(e.props.template,"spec.overrides",[]),n=(0,v.default)(e.props.template,"spec.template.spec.replicas",0);return r.forEach((function(e){e.clusterName===t&&e.clusterOverrides&&(a=e.clusterOverrides.find((function(e){return"/spec/replicas"===e.path})))})),a?a.value:n},e.switchMode=function(){var t=e.props.store;t.isScheduleDeployment?t.switchSchedule(!1):t.switchSchedule(!0)},e.getTotalReplicas=function(){return(0,v.default)(e.props.scheduleTemplate,"spec.totalReplicas","")},e}return(0,s.default)(r,[{key:"renderPlacement",value:function(e){var t=this;return m.default.createElement("div",{className:S.default.wrapper},e.map((function(e){return m.default.createElement(_.default,{key:e.name,cluster:e.name,replicas:t.getValue(e.name),onChange:t.handleChange})})))}},{key:"renderSchedule",value:function(){var e=this.props.clusters,a=this.props.store,r=b.Tabs.TabPanel;return m.default.createElement(m.default.Fragment,null,m.default.createElement(b.Tabs,{type:"button",onChange:this.switchMode},m.default.createElement(r,{label:t("SPECIFY_REPLICAS"),name:"Normal",icon:"cluster"},this.renderPlacement(e)),m.default.createElement(r,{label:t("SPECIFY_WEIGHTS"),name:"Scheduling",icon:"cluster"},m.default.createElement(O.default,{clusters:e,scheduleTemplate:a.scheduleTemplate,onError:this.props.onError}))))}},{key:"render",value:function(){var e=this.props.clusters;return(0,v.default)(this.props.store,"renderScheduleTab",!1)?this.renderSchedule():this.renderPlacement(e)}}]),r}(m.default.Component),u.propTypes={template:E.default.object,value:E.default.array},u.defaultProps={value:[]},l=o))||l;a.default=C},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(21)),o=l(r(12)),i=l(r(13)),c=l(r(19)),s=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(3)),m=l(r(650)),h=r(25),v=l(r(1716));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={replicas:e.props.replicas||0},e.triggerChange=(0,m.default)((function(){var t=e.props,a=t.cluster,r=t.onChange,n=e.state.replicas;r&&r(a,n)}),200),e.handleSubStract=function(){e.setState((function(e){var t=e.replicas;return{replicas:Math.max(t-1,1)}}),(function(){e.triggerChange()}))},e.handleAdd=function(){e.setState((function(e){return{replicas:e.replicas+1}}),(function(){e.triggerChange()}))},e.handleWrapperClick=function(){e.setState((function(e){return{replicas:e.replicas>0?0:1}}),(function(){e.triggerChange()}))},e.stopPropagation=function(e){return e.stopPropagation()},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props.cluster,a=this.state.replicas,r=!!a;return d.default.createElement("div",{className:(0,p.default)(v.default.wrapper,(0,u.default)({},v.default.checked,r)),onClick:this.handleWrapperClick},d.default.createElement(h.Checkbox,{checked:r,onClick:this.handleWrapperClick},e),d.default.createElement("div",{className:v.default.replicas,onClick:this.stopPropagation},d.default.createElement(h.Icon,{name:"substract",type:"light",size:20,clickable:!0,disabled:!r,onClick:this.handleSubStract}),d.default.createElement("span",{className:v.default.value},a,d.default.createElement("span",null," ",1===a?t("REPLICA_LOW_SI"):t("REPLICA_LOW_PL"))),d.default.createElement(h.Icon,{name:"add",type:"light",size:20,clickable:!0,disabled:!r,onClick:this.handleAdd})))}}]),r}(d.Component);a.default=g},function(e,t,a){e.exports={wrapper:"_1mKVwkCL_1ppeUigF3KAKg",checked:"_3b5rXyVfHzVbq7BXgqnsUg",replicas:"_1q8JcEqV4JG13oRb9C3HI_",value:"_1GwFMwt-s5K68TjO9mYodk"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o,i,c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=l(r(0)),h=n(r(16)),v=n(r(73)),y=r(5),g=r(70),b=r(25),E=n(r(1)),_=n(r(1718)),O=n(r(1720));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=(0,g.observer)((i=o=function(e){(0,f.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).getScheduleValue=function(t){return(0,h.default)(e.props.scheduleTemplate,"spec.clusters",{})[t].weight},e.handleClusterChange=function(t,a){var r=e.props.scheduleTemplate;(0,v.default)(r,"spec.clusters.".concat(a,".weight"),t)},e.totalChange=function(t){var a=e.props.scheduleTemplate;/^\+?[1-9][0-9]*$/.test(t)&&(0,v.default)(a,"spec.totalReplicas",Number(t))},e.totalValidator=function(e,a,r){if(!a)return r();/^\+?[1-9][0-9]*$/.test(a)?r():r({message:t("ENTER_POSITIVE_INTEGER_DESC"),field:e.field})},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props.clusters;return m.default.createElement("div",null,m.default.createElement(b.Form.Item,{label:t("TOTAL_REPLICAS"),className:O.default.InputItem,rules:[{required:!0,message:t("TOTAL_REPLICAS_EMPTY_DESC")},{validator:this.totalValidator}]},m.default.createElement(b.Input,{name:"totalReplicas",onChange:this.totalChange})),m.default.createElement("div",{className:O.default.wrapper},m.default.createElement("div",{className:O.default.clusterBox},(0,y.toJS)(a).map((function(t){return m.default.createElement(_.default,{key:t.name,cluster:t.name,weight:e.getScheduleValue(t.name),handleClusterChange:e.handleClusterChange})})))))}}]),r}(m.Component),o.propsTypes={scheduleTemplate:E.default.object,clusters:E.default.array},o.defaultProps={clusters:[],scheduleTemplate:{weight:1},seconds:5,showConfirm:!1},u=i))||u;a.default=k},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(21)),o=l(r(12)),i=l(r(13)),c=l(r(19)),s=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(3)),m=l(r(650)),h=r(25),v=l(r(1719));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={weight:e.props.weight||0,isChecked:!0},e.triggerChange=(0,m.default)((function(){var t=e.props,a=t.cluster;(0,t.handleClusterChange)(e.state.weight,a)}),200),e.handleSubStract=function(){e.setState((function(e){var t=e.weight;return{weight:Math.max(t-1,1)}}),(function(){e.triggerChange()}))},e.handleAdd=function(){e.setState((function(e){return{weight:e.weight+1}}),(function(){e.triggerChange()}))},e.handleWrapperClick=function(){e.setState((function(e){var t=e.isChecked;return{weight:t?0:1,isChecked:!t}}),(function(){e.triggerChange()}))},e.stopPropagation=function(e){return e.stopPropagation()},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props.cluster,a=this.state,r=a.weight,n=a.isChecked;return d.default.createElement("div",{className:(0,p.default)(v.default.wrapper,(0,u.default)({},v.default.checked,n)),onClick:this.handleWrapperClick},d.default.createElement(h.Checkbox,{checked:n,onClick:this.handleWrapperClick},e),d.default.createElement("div",{className:v.default.replicas,onClick:this.stopPropagation},d.default.createElement(h.Icon,{name:"substract",type:"light",size:20,clickable:!0,disabled:!n,onClick:this.handleSubStract}),d.default.createElement("span",{className:v.default.value},r,d.default.createElement("span",null," ",t("WEIGHT"))),d.default.createElement(h.Icon,{name:"add",type:"light",size:20,clickable:!0,disabled:!n,onClick:this.handleAdd})))}}]),r}(d.Component);a.default=g},function(e,t,a){e.exports={wrapper:"_1d46IfgtQxhhHKGUB6STe1",checked:"_2QejNgwkqZsFd8bj1QWlBA",replicas:"_2AaQUR9uEO6AeEYbl5HQ54",value:"_3ne_rJIW_BnCa0HjEirhKJ"}},function(e,t,a){e.exports={wrapper:"-Vnc-fGVeBp_T671_kI1_",clusterBox:"_3oDuMZyu1yBC1frXZfWszu",cluster:"IrCEsWG0TY0jJTtHURwWu",weights:"caFD-9wLt3P8nKG24Wzvc",input:"g9shnbO28OJ6DfOO0jCap",text:"_3qd0bpvzy2siF5H8PdB59H",innerInputItem:"Cr8lot-uKYUer_VMPo41O"}},function(e,t,a){e.exports={wrapper:"_3HtLBhxA8h3rGnv-OTcFg7"}},function(e,t,a){e.exports={wrapper:"_2RYq66uPjt59BxSZygHvgv",options:"_2W1a92S-uVrTDC4Q4HVyUp"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(0)),o=n(r(1)),i=n(r(16)),c=n(r(32)),s=r(25),f=n(r(652)),d=r(37),p=n(r(1072));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v=function(e){var a,r=e.type,n=void 0===r?"worker":r,l=e.container,o=e.onDelete,m=e.onEdit,v=e.readOnly,y=(0,i.default)(l,"resources.limits",{}),g=(0,i.default)(l,"resources.requests",{});if("istio-proxy"===l.name)return u.default.createElement(f.default.Item,{icon:"istio",title:l.name,description:t("IMAGE_VALUE",{value:l.image})});a=(0,c.default)(y)&&(0,c.default)(g)?u.default.createElement("div",{className:p.default.limits},u.default.createElement(s.Icon,{name:"exclamation"}),u.default.createElement("span",null," ",t("NO_RESOURCE_LIMIT"))):u.default.createElement("div",{className:p.default.limits},(y.cpu||g.cpu)&&u.default.createElement("span",{className:p.default.limit},u.default.createElement(s.Icon,{name:"cpu",size:20}),u.default.createElement("span",null,"".concat(g.cpu?(0,d.cpuFormat)(g.cpu):0," – ").concat(y.cpu?(0,d.cpuFormat)(y.cpu):"∞"))),(y.memory||g.memory)&&u.default.createElement("span",{className:p.default.limit},u.default.createElement(s.Icon,{name:"memory",size:20}),"".concat(g.memory?"".concat((0,d.memoryFormat)(g.memory)," MiB"):0," – ").concat(y.memory?"".concat((0,d.memoryFormat)(y.memory)," MiB"):"∞")));var b="init"===n?u.default.createElement("span",null,l.name,u.default.createElement(s.Tag,{className:"margin-l8",type:"warning"},t("INIT_CONTAINER"))):l.name;return u.default.createElement(f.default.Item,{icon:"docker",title:b,description:t("IMAGE_VALUE",{value:l.image}),extras:a,onDelete:!v&&function(){return o(h({type:n},l))},onEdit:!v&&function(){return m(h({type:n},l))}})};v.propTypes={container:o.default.object};var y=v;a.default=y},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=l(r(651)),p=l(r(16)),m=l(r(32)),h=l(r(68)),v=r(25),y=r(280),g=l(r(1072));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={checkResult:e.getCheckResult()},e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){(0,d.default)(e.containers,this.props.containers)&&(0,d.default)(e.initContainers,this.props.initContainers)&&(0,d.default)(e.leftQuota,this.props.leftQuota)&&(0,d.default)(e.replicas,this.props.replicas)||this.setState({checkResult:this.getCheckResult()})}},{key:"getCheckResult",value:function(){var e=this.props,t=e.containers,a=e.initContainers,r=e.leftQuota,n=e.replicas,l=(0,y.getContainersResources)(t,a,n);return(0,y.compareQuotaAndResources)(r,l)}},{key:"renderOverCostMessage",value:function(e){var a=(0,p.default)(e,'["requests.cpu"].overcost'),r=(0,p.default)(e,'["requests.memory"].overcost'),n=(0,p.default)(e,'["limits.cpu"].overcost'),l=(0,p.default)(e,'["limits.memory"].overcost');return f.default.createElement(f.default.Fragment,null,(a||r)&&f.default.createElement("div",{className:g.default.message},f.default.createElement("span",null,t("RESOURCE_REQUESTS"),":"),a&&f.default.createElement("span",null,"CPU ",t("Cost")," ",(0,p.default)(e,'["requests.cpu"].cost',t("NO_LIMIT"))," (",t("PROJECT_REMAINING_QUOTAS"),": ",(0,p.default)(e,'["requests.cpu"].namespaceQuota',t("NO_REQUEST")),", ",t("WORKSPACE_REMAINING_QUOTAS"),": ",(0,p.default)(e,'["requests.cpu"].workspaceQuota',t("NO_REQUEST")),")"),r&&f.default.createElement("span",null,t("MEMORY")," ",t("Cost")," ",(0,p.default)(e,'["requests.memory"].cost',t("NO_LIMIT"))," (",t("PROJECT_REMAINING_QUOTAS"),": ",(0,p.default)(e,'["requests.memory"].namespaceQuota',t("NO_REQUEST")),", ",t("WORKSPACE_REMAINING_QUOTAS"),": ",(0,p.default)(e,'["requests.memory"].workspaceQuota',t("NO_REQUEST")),")")),(n||l)&&f.default.createElement("div",{className:g.default.message},f.default.createElement("span",null,t("RESOURCE_LIMITS"),":"),n&&f.default.createElement("span",null,"CPU ",t("Cost")," ",(0,p.default)(e,'["limits.cpu"].cost',t("NO_LIMIT"))," (",t("PROJECT_REMAINING_QUOTAS"),": ",(0,p.default)(e,'["limits.cpu"].namespaceQuota',t("NO_LIMIT")),", ",t("WORKSPACE_REMAINING_QUOTAS"),": ",(0,p.default)(e,'["limits.cpu"].workspaceQuota',t("NO_LIMIT")),")"),l&&f.default.createElement("span",null,t("MEMORY")," ",t("Cost")," ",(0,p.default)(e,'["limits.memory"].cost',t("NO_LIMIT"))," (",t("PROJECT_REMAINING_QUOTAS"),": ",(0,p.default)(e,'["limits.memory"].namespaceQuota',t("NO_LIMIT")),", ",t("WORKSPACE_REMAINING_QUOTAS"),": ",(0,p.default)(e,'["limits.memory"].workspaceQuota',t("NO_LIMIT")),")")))}},{key:"renderQuotaMessage",value:function(e){return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:g.default.message},f.default.createElement("span",null,t("RESOURCE_REQUESTS"),": CPU (",t("PROJECT_REMAINING_QUOTAS"),":",(0,p.default)(e,'["requests.cpu"].namespaceQuota',t("NO_REQUEST")),",",t("WORKSPACE_REMAINING_QUOTAS"),":",(0,p.default)(e,'["requests.cpu"].workspaceQuota',t("NO_REQUEST")),");"),f.default.createElement("span",null,t("MEMORY")," (",t("PROJECT_REMAINING_QUOTAS"),":",(0,p.default)(e,'["requests.memory"].namespaceQuota',t("NO_REQUEST")),";",t("WORKSPACE_REMAINING_QUOTAS"),":",(0,p.default)(e,'["requests.memory"].workspaceQuota',t("NO_REQUEST")),").")),f.default.createElement("div",{className:g.default.message},f.default.createElement("span",null,t("RESOURCE_LIMITS"),": CPU (",t("PROJECT_REMAINING_QUOTAS"),":",(0,p.default)(e,'["limits.cpu"].namespaceQuota',t("NO_LIMIT")),",",t("WORKSPACE_REMAINING_QUOTAS"),":",(0,p.default)(e,'["limits.cpu"].workspaceQuota',t("NO_LIMIT")),");"),f.default.createElement("span",null,t("MEMORY")," (",t("PROJECT_REMAINING_QUOTAS"),":",(0,p.default)(e,'["limits.memory"].namespaceQuota',t("NO_LIMIT")),";",t("WORKSPACE_REMAINING_QUOTAS"),":",(0,p.default)(e,'["limits.memory"].workspaceQuota',t("NO_LIMIT")),").")))}},{key:"render",value:function(){var e=this.props,a=e.containers,r=e.initContainers,n=this.state.checkResult;if((0,m.default)(a)&&(0,m.default)(r))return null;var l=Object.values(n).some((function(e){return(e.namespaceQuota||e.workspaceQuota)&&"unset"===e.overcost})),u=Object.values(n).some((function(e){return!0===e.overcost})),o=(u||l)&&this.hasLimitQuota?"error":"info",i=u&&this.hasLimitQuota?t("QUOTA_OVERCOST_TIP"):l&&this.hasLimitQuota?t("QUOTA_UNSET_TIP"):t("Remaining Quota"),c=(u||l)&&this.hasLimitQuota?this.renderOverCostMessage(n):this.renderQuotaMessage(n);return f.default.createElement(v.Alert,{className:"margin-b12",type:o,title:i,message:c})}},{key:"hasLimitQuota",get:function(){var e=this.props.leftQuota,t=!1;return Object.keys(e).forEach((function(a){t=Object.values(e[a]).some((function(e){return!(0,h.default)(e)}))})),t}}]),r}(f.Component);a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(32)),f=n(r(185)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=r(801),v=r(25),y=n(r(993)),g=n(r(1229)),b=n(r(1068)),E=n(r(1230)),_=n(r(1231)),O=n(r(1067)),S=n(r(1732)),k=n(r(1740)),C=n(r(1742)),R=n(r(1744));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var P=function(e){(0,o.default)(r,e);var a=w(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).registerForm=function(){var e=t.context.registerSubRoute,a=t.props.onCancel;e&&e(t.handleSubmit,a)},t.handleGoBack=function(){var e=t.context.resetSubRoute;e&&e(),t.props.onCancel()},t.handleSubmit=function(e){var a=t.props,r=a.onSave,n=a.withService,l=t.formRef.current;l&&l.validate((function(){var t=l.getData();t.args&&(t.args=t.args.filter((function(e){return!(0,s.default)(e)}))),t.command&&(t.command=t.command.filter((function(e){return!(0,s.default)(e)}))),t.env&&(t.env=t.env.filter((function(e){var t=e.name;return!(0,s.default)(t)}))),t.ports&&(t.ports=t.ports.filter((function(e){return e.name&&e.containerPort}))),(0,s.default)(t.lifecycle)&&delete t.lifecycle,(0,s.default)(t.livenessProbe)&&delete t.livenessProbe,(0,s.default)(t.startupProbe)&&delete t.startupProbe,(0,s.default)(t.readinessProbe)&&delete t.readinessProbe,!n&&t.ports&&t.ports.forEach((function(e){void 0!==e.servicePort&&delete e.servicePort})),r(t),e&&e()}))},t.handleContainerTypeChange=function(e){t.setState({containerType:e})},t.formRef=d.default.createRef(),t.state={containerType:e.data.type||"worker",formData:(0,f.default)(e.data)},t}return(0,u.default)(r,[{key:"getChildContext",value:function(){var e=this;return{forceUpdate:function(){e.forceUpdate()}}}}]),(0,u.default)(r,[{key:"componentDidMount",value:function(){this.registerForm()}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.isFederated,r=e.cluster,n=e.limitRange,l=e.imageRegistries,u=e.namespace,o=e.withService,i=e.supportGpuSelect,c=e.projectDetail,s=this.state,f=s.containerType,p=s.formData;return d.default.createElement("div",{className:(0,m.default)(R.default.wrapper,t)},d.default.createElement("div",{className:"h5"},d.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},d.default.createElement(h.ReactComponent,null)),this.title),d.default.createElement(v.Form,{ref:this.formRef,data:p},d.default.createElement(O.default,{data:p,namespace:u,limitRange:n,imageRegistries:l,defaultContainerType:f,onContainerTypeChange:this.handleContainerTypeChange,workspaceQuota:this.props.workspaceQuota,supportGpuSelect:i}),d.default.createElement(y.default,{withService:"init"!==f&&o}),d.default.createElement(E.default,null),"init"!==f&&d.default.createElement(_.default,null),d.default.createElement(C.default,null),d.default.createElement(g.default,null),d.default.createElement(b.default,{namespace:u,isFederated:a,cluster:r,projectDetail:c}),d.default.createElement(S.default,null),d.default.createElement(k.default,{data:p})))}},{key:"title",get:function(){var e=this.props,a=e.type,r=e.titlePrefix,n=t("".concat(a.toUpperCase(),"_CONTAINER"));return"".concat(r).concat(n)}}]),r}(d.default.Component);a.default=P,P.propTypes={className:p.default.string,type:p.default.string,titlePrefix:p.default.string,namespace:p.default.string,module:p.default.string,data:p.default.object,onSave:p.default.func,onCancel:p.default.func,configMaps:p.default.array,secrets:p.default.array},P.defaultProps={className:"",type:"Add",titlePrefix:"",namespace:"",module:"",data:{},onSave:function(){},onCancel:function(){},configMaps:[],secrets:[]},P.childContextTypes={forceUpdate:p.default.func},P.contextTypes={registerSubRoute:p.default.func,resetSubRoute:p.default.func}},function(e,t,a){e.exports={input:"_9VIeOg56YL5EUVGKERJsI"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(21)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(70),v=n(r(1)),y=n(r(3)),g=n(r(185)),b=r(25),E=n(r(799)),_=n(r(1728)),O=n(r(1233)),S=n(r(1729));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R=[{value:"http",desc:"HTTP_REQUEST"},{value:"command",desc:"COMMAND"},{value:"tcp",desc:"TCP_PORT"}],w=(0,h.observer)((o=u=function(e){(0,f.default)(r,e);var a=C(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).filterData=function(e){var a=t.state.checkerType,r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e);switch(a){default:case"http":delete r.tcpSocket,delete r.exec;break;case"command":delete r.httpGet,delete r.tcpSocket;break;case"tcp":delete r.httpGet,delete r.exec}return r},t.handleTypeChange=function(e){t.setState({checkerType:e})},t.handleSubmit=function(){var e=t.props.onSave,a=t.formRef.current;a&&a.validate((function(){e(t.filterData(a.getData()))}))},t.state={formData:(0,g.default)(e.data),checkerType:t.checkerType},t.formRef=m.default.createRef(),t}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.probType,n=e.onCancel,l=e.componentType,u=void 0===l?"heal":l,o=this.state,i=o.formData,c=o.checkerType;return m.default.createElement("div",{className:(0,y.default)(O.default.wrapper,a)},m.default.createElement("div",{className:(0,y.default)(O.default.radioGroup,"probe-radio-group")},m.default.createElement(b.RadioGroup,{mode:"button",buttonWidth:150,value:c,onChange:this.handleTypeChange,size:"small"},R.map((function(e){return m.default.createElement(b.RadioButton,{value:e.value},t(e.desc))})))),m.default.createElement(b.Form,{ref:this.formRef,type:"inner",data:i},m.default.createElement("div",{className:"margin-b12"},m.default.createElement(S.default,{checkerType:c})),"life"===u?null:m.default.createElement(_.default,{probType:r})),m.default.createElement(E.default,{className:O.default.confirm,onOk:this.handleSubmit,onCancel:n}))}},{key:"checkerType",get:function(){var e=this.props.data;return"exec"in e?"command":"tcpSocket"in e?"tcp":"http"}}]),r}(m.default.Component),u.propTypes={className:v.default.string,componentType:v.default.string,data:v.default.object,onSave:v.default.func,onCancel:v.default.func},u.defaultProps={data:{},onSave:function(){},onCancel:function(){},componentType:"heal"},l=o))||l;a.default=w},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(0)),o=r(25),i=n(r(740)),c=(0,u.memo)((function(e){var a=e.probType;return u.default.createElement(u.default.Fragment,null,u.default.createElement(o.Columns,null,u.default.createElement(o.Column,null,u.default.createElement(o.Form.Item,{label:t("INITIAL_DELAY_S"),desc:t("INITIAL_DELAY_DESC")},u.default.createElement(i.default,{name:"initialDelaySeconds",defaultValue:0,min:0,integer:!0}))),u.default.createElement(o.Column,null,u.default.createElement(o.Form.Item,{label:t("TIMEOUT_PERIOD_S"),desc:t("TIMEOUT_PERIOD_DESC")},u.default.createElement(i.default,{name:"timeoutSeconds",defaultValue:1,min:1,integer:!0})))),u.default.createElement(o.Columns,null,u.default.createElement(o.Column,null,u.default.createElement(o.Form.Item,{label:t("CHECK_INTERVAL_S"),desc:t("CHECK_INTERVAL_DESC")},u.default.createElement(i.default,{name:"periodSeconds",defaultValue:10,min:1,integer:!0}))),u.default.createElement(o.Column,null,u.default.createElement(o.Form.Item,{label:t("SUCCESS_THRESHOLD"),desc:t("SUCCESS_THRESHOLD_DESC")},u.default.createElement(i.default,{name:"successThreshold",defaultValue:1,min:1,readOnly:["livenessProbe","startupProbe"].includes(a),integer:!0})))),u.default.createElement(o.Columns,null,u.default.createElement(o.Column,null,u.default.createElement(o.Form.Item,{label:t("FAILURE_THRESHOLD"),desc:t("FAILURE_THRESHOLD_DESC")},u.default.createElement(i.default,{name:"failureThreshold",defaultValue:3,min:1,integer:!0}))),u.default.createElement(o.Column,null)))}));a.default=c},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(0)),o=n(r(740)),i=n(r(1073)),c=n(r(774)),s=r(25),f=n(r(1233)),d=(0,u.memo)((function(e){var a=e.checkerType;switch(a){case"command":return u.default.createElement(s.Form.Item,{key:a,label:t("COMMANDS"),desc:t("PROBE_COMMAND_DESC"),rules:[{required:!0,message:t("PROBE_COMMAND_EMPTY")}]},u.default.createElement(i.default,{className:"max-width-full",name:"exec.command"}));case"tcp":return u.default.createElement(s.Form.Item,{label:t("PORT"),rules:[{required:!0,message:t("PORT_NUMBER_EMPTY")}]},u.default.createElement(o.default,{name:"tcpSocket.port",defaultValue:80,min:0,max:65535,integer:!0}));default:return u.default.createElement(s.Form.Item,{key:a,label:t("PATH"),rules:[{required:!0,message:t("HTTP_PATH_EMPTY")}]},u.default.createElement(c.default,{name:"httpGet",className:f.default.object,defaultValue:{scheme:"HTTP",path:"/",port:80}},u.default.createElement(s.Select,{name:"scheme",options:[{label:"HTTP",value:"HTTP"},{label:"HTTPS",value:"HTTPS"}]}),u.default.createElement(s.Input,{name:"path"}),u.default.createElement(o.default,{name:"port",min:0,max:65535,integer:!0})))}}));a.default=d},function(e,t,a){e.exports={probe:"_3aWvLSLxk3Xmtb2eigtyU3",content:"_2F5LmZnF2fwnYWdvT-Yx_o",empty:"bvVfdnF_McvY1K6lp2E6B",form:"_2DcqGfdqyrtZO-fn0h0Kk9"}},function(e,t,a){e.exports={item:"_1A0EK8vnlJQwecnjWIYMil"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1733)),p=n(r(1235)),m=n(r(1236)),h=n(r(1738));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement(f.Form.Group,{label:t("CONTAINER_SECURITY_CONTEXT"),desc:t("CONTAINER_SECURITY_CONTEXT_DESC"),checkable:!0},s.default.createElement(d.default,null),s.default.createElement(p.default,null),s.default.createElement(m.default,null),s.default.createElement(h.default,null))}}]),r}(s.default.PureComponent);a.default=y},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1234)),p=n(r(1735));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement("div",{className:"margin-b12"},s.default.createElement("div",{className:p.default.title},t("ACCESS_CONTROL")),s.default.createElement("div",{className:p.default.content},s.default.createElement(f.Form.Item,null,s.default.createElement(d.default,{name:"".concat(this.prefix,".privileged"),title:t("PRIVILEGED_MODE"),description:t("PRIVILEGED_MODE_DESC")})),s.default.createElement(f.Form.Item,null,s.default.createElement(d.default,{name:"".concat(this.prefix,".allowPrivilegeEscalation"),title:t("ALLOW_PRIVILEGE_ESCALATION"),description:t("ALLOW_PRIVILEGE_ESCALATION_DESC")})),s.default.createElement(f.Form.Item,null,s.default.createElement(d.default,{name:"".concat(this.prefix,".readOnlyRootFilesystem"),title:t("ROOT_DIRECTORY_READONLY"),description:t("ROOT_DIRECTORY_READONLY_DESC")}))))}},{key:"prefix",get:function(){return this.props.prefix||"securityContext"}}]),r}(s.default.Component);a.default=h},function(e,t,a){e.exports={wrapper:"_15WzUlcoLloZykJlZj0Apo",text:"_1FbvXHTu2eI1KD5ONd5HH0"}},function(e,t,a){e.exports={title:"xiiGbS5phbPetinkKktv5",content:"_3MKZeMiqNiY37e6ZT3uCbc"}},function(e,t,a){e.exports={title:"_93bRvqjERHRqTzbtsZ3hA",content:"ALf6y5a4svCrpH2U0yUs8"}},function(e,t,a){e.exports={title:"_3mzDzs1cbhNCB3Q4DZTkCL",content:"_2BaVtn2VyGgZ9YmDM_znzH"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(761)),p=n(r(1739));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement("div",{className:"margin-b12"},s.default.createElement("div",{className:p.default.title},t("CAPABILITIES")),s.default.createElement("div",{className:p.default.content},s.default.createElement(f.Form.Item,{label:t("ADD")},s.default.createElement(d.default,{name:"".concat(this.prefix,".capabilities.add")},s.default.createElement(f.Input,null))),s.default.createElement(f.Form.Item,{label:t("DROP")},s.default.createElement(d.default,{name:"".concat(this.prefix,".capabilities.drop")},s.default.createElement(f.Input,null)))))}},{key:"prefix",get:function(){return this.props.prefix||"securityContext"}}]),r}(s.default.Component);a.default=h},function(e,t,a){e.exports={title:"K8wgjzWlByq5WsuMlI7Tf",content:"_3X53teLvKWLW3f9mdpe3jg"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(73)),m=r(25),h=n(r(1741));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(r,e);var a=v(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={isCheck:(0,d.default)(e.props.data,"volumeMounts",[]).some((function(e){return"/etc/localtime"===e.mountPath}))},e.handleCheck=function(){e.setState((function(e){return{isCheck:!e.isCheck}}),(function(){var t=(0,d.default)(e.props.data,"volumeMounts",[]);e.state.isCheck?(0,p.default)(e.props.data,"volumeMounts",[].concat((0,l.default)(t),[{name:"host-time",mountPath:"/etc/localtime",readOnly:!0}])):(0,p.default)(e.props.data,"volumeMounts",t.filter((function(e){return"/etc/localtime"!==e.mountPath})))}))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.state.isCheck;return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement("div",{className:h.default.title},f.default.createElement(m.Checkbox,{checked:e,onChange:this.handleCheck},t("SYNC_HOST_TIMEZONE"))),f.default.createElement("div",{className:h.default.desc},t("SYNC_HOST_TIMEZONE_DESC")))}}]),r}(f.default.PureComponent);a.default=y},function(e,t,a){e.exports={wrapper:"_13HKR4gAgD0ig3Y9hsQqG1",title:"_1-3berk2PocVRYaJX2GjAv",desc:"_1TvWgxGHR42g-MP8KIg9E4"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1232)),p=n(r(1743));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement(f.Form.Group,{label:t("LIFECYCLE_MANAGEMENT"),desc:t("LIFECYCLE_MANAGEMENT_DESC"),checkable:!0},s.default.createElement(f.Form.Item,{className:p.default.item,label:t("POSTSTART_ACTION")},s.default.createElement(d.default,{name:"".concat(this.prefix,"lifecycle.postStart"),label:t("ADD_ACTION"),description:t("POSTSTART_ACTION_DESC"),componentType:"life",deleteNoObject:!0})),s.default.createElement(f.Form.Item,{className:p.default.item,label:t("PRESTOP_ACTION")},s.default.createElement(d.default,{name:"".concat(this.prefix,"lifecycle.preStop"),label:t("ADD_ACTION"),description:t("PRESTOP_ACTION_DESC"),componentType:"life",deleteNoObject:!0})))}},{key:"prefix",get:function(){var e=this.props.prefix;return e?"".concat(e,"."):""}}]),r}(s.default.Component);a.default=h,h.defaultProps={prefix:""}},function(e,t,a){e.exports={item:"_1_hNoxkPtdee023EClqoqd"}},function(e,t,a){e.exports={container:"_1ZV1zcmI3aQsf7TJa7U-ty",wrapper:"_3NA0XhEMpjb5u2sVl8Gy7-",toggle:"_3ZJu02OAXhBZt63sPr3iDG",formGroup:"_3yEl2cRdJiajJY7iBXwOvq",header:"_1LL-93h1piWYMj3GKZYXDF",info:"_3SRMw_cW2iG95HGqlzqFDw",title:"_1IrUCrX0FmacJPpuTlltMv",desc:"_20WcR7Wo7ZjqKK37wJIWBX",formArea:"INKvIY3k_DmxQo0-hQ3r_"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1235)),p=n(r(1236));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement(f.Form.Group,{label:t("POD_SECURITY_CONTEXT"),desc:t("POD_SECURITY_CONTEXT_DESC"),checkable:!0},s.default.createElement(f.Alert,{className:"margin-b12",type:"info",title:t("NOTE"),message:t("POD_SECURITY_CONTEXT_TIP")}),s.default.createElement(d.default,{prefix:this.props.prefix}),s.default.createElement(p.default,{prefix:this.props.prefix}))}}]),r}(s.default.PureComponent);a.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(786));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var m=function(e){(0,o.default)(r,e);var a=p(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).metaError="",e.handleMetaError=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.metaError=t},e.metaDataValidator=function(t,a,r){""===e.metaError&&r()},e}return(0,u.default)(r,[{key:"render",value:function(){return s.default.createElement(s.default.Fragment,null,s.default.createElement(f.Form.Item,{label:t("ANNOTATION_PL"),rules:[{validator:this.metaDataValidator}]},s.default.createElement(d.default,{name:"spec.template.metadata.annotations",addText:t("ADD"),hiddenKeys:globals.config.preservedAnnotations,onError:this.handleMetaError})))}}]),r}(s.default.Component);a.default=m},function(e,t,a){e.exports={formTip:"_19f0EVWj1un4oHSHVFkfCG",tipLabel:"_1QFTfCmmiYYArD4XUdtrk3",tipBox:"_2TmZJA7LIvFo8yQBSA3Ay3",tipTitle:"_2mM1im5fQ7ZlOrtF10n8QH"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(56)),u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(995)),v=n(r(16)),y=n(r(73)),g=n(r(32)),b=n(r(68)),E=r(25),_=n(r(652)),O=r(313),S=n(r(1749)),k=n(r(1237));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var P=function(e){(0,c.default)(r,e);var a=w(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).getFormattedVolumes=function(){var t=e.props,a=t.value,r=t.volumes,n=t.containers,l=t.logPath;return(0,g.default)(a)?[]:a.map((function(e){var t={};(0,b.default)(e.persistentVolumeClaim)||(t=r.find((function(t){return t.name===e.persistentVolumeClaim.claimName})));var a=[];return n.forEach((function(t){if(t.volumeMounts){var r=t.volumeMounts.find((function(t){return t.name===e.name}));if(r){var n=(0,v.default)(l,"containerLogConfigs.".concat(t.name,".").concat(e.name),[]).join(",");a.push(R(R({},r),{},{logPath:n,containerName:t.name}))}}})),R(R({},e),{},{volume:t,volumeMounts:a})}))},e.deleteVolumeMounts=function(t){var a=e.context.formData,r=(0,v.default)(a,"".concat(e.props.prefix,"spec.containers"),[]).map((function(e){return R(R({},e),{},{type:"worker"})})),n=(0,v.default)(a,"".concat(e.prefix,"spec.initContainers"),[]).map((function(e){return R(R({},e),{},{type:"init"})})),l=(0,h.default)(r,n);l.forEach((function(e){(0,g.default)(e.volumeMounts)||(e.volumeMounts=e.volumeMounts.filter((function(e){return e.name!==t})))}));var u=[],o=[];l.forEach((function(e){"worker"===e.type?(delete e.type,u.push(e)):(delete e.type,o.push(e))})),(0,y.default)(a,"".concat(e.props.prefix,"spec.containers"),u),(0,y.default)(a,"".concat(e.props.prefix,"spec.initContainers"),o)},e.handleAddVolume=function(){e.props.onShowVolume()},e.handleAddConfig=function(){e.props.onShowConfig()},e.handleEdit=function(t){var a=t.volume,r=t.volumeMounts,n=(0,l.default)(t,["volume","volumeMounts"]);(0,O.isNotPersistentVolume)(t)?e.props.onShowEdit(R(R({},n),{},{volumeMounts:r})):e.props.onShowEdit({volume:a,volumeMounts:r,specVolume:R({},n)})},e.handleDelete=function(t){var a=e.props,r=a.value,n=a.onChange;e.deleteVolumeMounts(t),n(r.filter((function(e){return e.name!==t})))},e}return(0,i.default)(r,[{key:"renderAddVolume",value:function(){return d.default.createElement(E.Columns,null,d.default.createElement(E.Column,null,d.default.createElement(_.default.Add,{onClick:this.handleAddVolume,title:t("MOUNT_VOLUME"),description:t("WORKLOAD_MOUNT_VOLUME_DESC")})),d.default.createElement(E.Column,null,d.default.createElement(_.default.Add,{onClick:this.handleAddConfig,title:t("MOUNT_CONFIGMAP_OR_SECRET"),description:t("MOUNT_CONFIGMAP_OR_SECRET_DESC")})))}},{key:"render",value:function(){var e=this,t=this.props.className,a=this.getFormattedVolumes();return d.default.createElement("div",{className:(0,m.default)(k.default.wrapper,t)},d.default.createElement("div",{className:k.default.content},!(0,g.default)(a)&&d.default.createElement("ul",{className:k.default.list},a.map((function(t){return d.default.createElement(S.default,{volume:t,key:t.name,onEdit:e.handleEdit,onDelete:e.handleDelete})}))),this.renderAddVolume()))}}]),r}(d.default.Component);a.default=P,P.propTypes={prefix:p.default.string,name:p.default.string,value:p.default.array,volumes:p.default.array,volumeTypes:p.default.array,containers:p.default.array,onChange:p.default.func,onShowVolume:p.default.func,onShowConfig:p.default.func,onShowEdit:p.default.func},P.defaultProps={prefix:"",name:"",value:[],volumes:[],volumeTypes:[],containers:[],onChange:function(){},onShowVolume:function(){},onShowConfig:function(){},onShowEdit:function(){}},P.contextTypes={formData:p.default.object}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(16)),o=n(r(32)),i=n(r(0)),c=n(r(1)),s=r(25),f=n(r(652)),d=n(r(1237)),p=function(e){var a=e.volume,r=e.onDelete,n=e.onEdit,c={};r&&(c.onDelete=function(){return r(a.name)}),n&&(c.onEdit=function(){return n(a)});var p,m,h="storage";a.hostPath?(p="".concat(t("TYPE"),": ").concat(t("HostPath")),m=[{title:(0,u.default)(a,"hostPath.path","-"),description:t("Host Path")}]):a.emptyDir?(p="".concat(t("TYPE"),": ").concat(t("EmptyDir")),m=[]):a.configMap?(h="hammer",p="".concat(t("TYPE"),": ").concat(t("ConfigMap")),m=[{title:(0,u.default)(a,"configMap.name","-"),description:t("ConfigMap")}]):a.secret?(h="key",p="".concat(t("TYPE"),": ").concat(t("Secret")),m=[{title:(0,u.default)(a,"secret.secretName","-"),description:t("Secret")}]):(p="".concat(t("Storage Classs"),": ").concat((0,u.default)(a,"volume.storageClassName","-")),m=[{title:(0,u.default)(a,"volume.name","-"),description:t("PERSISTENT_VOLUME_CLAIM")},{title:(0,u.default)(a,"volume.capacity","-"),description:t("CAPACITY")},{title:(0,u.default)(a,"volume.accessMode","-"),description:t("ACCESS_MODE_TCAP")}]);var v=!(0,o.default)(a.volumeMounts)&&i.default.createElement("div",{className:d.default.mount},i.default.createElement("ul",null,a.volumeMounts.map((function(e){var a=e.containerName,r=e.mountPath,n=e.subPath,l=e.logPath,u=e.readOnly;return i.default.createElement("li",{key:r},i.default.createElement("div",null,i.default.createElement(s.Icon,{name:"docker",size:20}),i.default.createElement("span",null,a)),i.default.createElement("div",null,i.default.createElement(s.Icon,{name:"mgmt-node",size:20}),i.default.createElement("span",null,r),i.default.createElement("span",{className:"text-secondary"}," (",u?t("READ_ONLY_LOW"):t("READ_AND_WRITE_LOW"),")")),n&&i.default.createElement("div",null,i.default.createElement(s.Icon,{name:"textfield",size:20})," ",i.default.createElement("span",null,n)),l&&i.default.createElement("div",null,i.default.createElement(s.Icon,{name:"log",size:20})," ",i.default.createElement("span",null,l)))}))));return i.default.createElement(f.default.Item,(0,l.default)({icon:h,title:a.name,description:p,extras:v,details:m},c))};p.propTypes={container:c.default.object};var m=p;a.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(21)),o=n(r(56)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(3)),v=n(r(32)),y=n(r(190)),g=n(r(16)),b=n(r(73)),E=r(25),_=r(801),O=n(r(186)),S=n(r(1751)),k=n(r(1755)),C=n(r(1757)),R=n(r(1759));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=function(e){(0,s.default)(r,e);var a=D(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).volumeTypeMap=function(e){return e.includes("emptyDir")?"temp":e.includes("hostPath")?"host":"exist"},t.handleGoBack=function(){var e=t.context.resetSubRoute;e&&e(),t.props.onCancel()},t.handleSubmit=function(e){var a=t.props.onSave,r=t.state,n=r.type,l=r.editVolume,u=t.formRef.current;u&&u.validate((function(){var r,i=u.getData();if("exist"===n)r=i.volume;else if("temp"===n)r={name:i.name,emptyDir:{}};else if("host"===n){var c=i.hostPath,s=void 0===c?{}:c,f=i.name;r={hostPath:s,name:f}}else if("new"===n){i.volumeMounts;var d=(0,o.default)(i,["volumeMounts"]);r=O.default.volumes(d)}var p=[];if(i.volumeMounts&&(p=i.volumeMounts.map((function(e){return P(P({},e),{},{volume:r})}))),!(0,v.default)(l)){if("temp"===n){var m=t.updateVolume(r,p,"hostPath"),h=m.newVolume,y=m.newMounts;r=h,p=y}if("host"===n){var g=t.updateVolume(r,p,"emptyDir"),b=g.newVolume,E=g.newMounts;r=b,p=E}}a(r,p,t.state.editVolume),e&&e()}))},t.updateVolume=function(e,a,r){var n=t.state.editVolume,u=(0,y.default)(e,r),o=a.filter((function(e){return e.name!==n.name})),i=a.filter((function(e){return e.name===n.name}));return i.length>0&&(i[0].volume=(0,y.default)(i[0].volume,r)),{newVolume:u,newMounts:[].concat((0,l.default)(o),(0,l.default)(i))}},t.handleTypeChange=function(e){t.setState({type:e})},t.formRef=p.default.createRef(),t.state={type:t.checkVolumeType(e.volume)||"exist",editVolume:{}},t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.onCancel,t=this.context.registerSubRoute;t&&t(this.handleSubmit,e),this.saveEditVolume()}},{key:"saveEditVolume",value:function(){var e=this.props.volume;if(!(0,v.default)(e)){var t=this.volumeTypeMap(Object.keys((0,y.default)(e,["name","volumeMounts"])));"exist"!==t?this.setState({editVolume:{name:e.name,type:t}}):this.setState({editVolume:{name:(0,g.default)(e,"specVolume.name",""),type:t}})}}},{key:"checkVolumeType",value:function(e){var t="exist";return(0,v.default)(e)||(e.emptyDir?t="temp":e.hostPath&&(t="host")),t}},{key:"renderContent",value:function(){var e,t=this.props,a=t.volume,r=t.volumes,n=t.containers,l=t.checkVolumeNameExist,u=t.collectSavedLog,o=a.name,i=(0,g.default)(a,"volumeMounts",[]);if("exist"===this.state.type){var c=(0,g.default)(a,"specVolume.name",!1);c&&(a.name=c)}else{var s=(0,g.default)(a,"name",!1);s&&(a.name=s,(0,b.default)(a,"specVolume.name",s))}switch(i.length>0&&a.volumeMounts.forEach((function(e){return(0,b.default)(e,"name",a.name)})),this.state.type){case"temp":e=p.default.createElement(k.default,{formRef:this.formRef,formData:a,currentName:o,containers:n,checkVolumeNameExist:l,collectSavedLog:u});break;case"host":e=p.default.createElement(C.default,{formRef:this.formRef,formData:a,currentName:o,containers:n,checkVolumeNameExist:l});break;default:case"exist":e=p.default.createElement(S.default,{formRef:this.formRef,formData:a,currentName:o,volumes:r,containers:n,collectSavedLog:u})}return e}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.contentClassName;return p.default.createElement("div",{className:(0,h.default)(R.default.wrapper,a)},p.default.createElement("div",{className:"h6"},p.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},p.default.createElement(_.ReactComponent,null)),t("Volumes")),p.default.createElement("div",{className:(0,h.default)(R.default.contentWrapper,r)},p.default.createElement("div",{className:R.default.title},t("MOUNT_VOLUME")),p.default.createElement(E.RadioGroup,{mode:"button",value:this.state.type,onChange:this.handleTypeChange,size:"small"},p.default.createElement(E.RadioButton,{value:"exist"},t("PERSISTENT_VOLUME")),p.default.createElement(E.RadioButton,{value:"temp"},t("TEMPORARY_VOLUME")),p.default.createElement(E.RadioButton,{value:"host"},t("HOSTPATH_VOLUME"))),this.renderContent()))}}]),r}(p.default.Component);a.default=T,T.propTypes={className:m.default.string,containers:m.default.array,volume:m.default.object,onSave:m.default.func,onCancel:m.default.func},T.defaultProps={className:"",volume:{},containers:[],onSave:function(){},onCancel:function(){}},T.contextTypes={registerSubRoute:m.default.func,resetSubRoute:m.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(290)),f=n(r(32)),d=n(r(0)),p=n(r(3)),m=n(r(1)),h=r(25),v=n(r(636)),y=n(r(905)),g=r(37),b=n(r(1754));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,o.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).mountValidator=function(a,r,n){if((0,f.default)(r))return n();r.forEach((function(r){if(!r)return n();if("null"===r.readOnly)n();else if(r.mountPath){if(e.getMountPaths(r).includes(r.mountPath))return n({message:t("MOUNT_PATH_IN_USE"),field:a.field});n()}else n({message:t("READ_WRITE_MOUNT_EMPTY"),field:a.field})}))},e}return(0,u.default)(r,[{key:"getMountPaths",value:function(e){return this.mountPaths||(this.mountPaths=(0,s.default)(this.props.containers,"name")),(0,f.default)(this.mountPaths[e.containerName])||(0,f.default)(this.mountPaths[e.containerName].volumeMounts)?[]:this.mountPaths[e.containerName].volumeMounts.filter((function(t){return t.name!==e.name})).map((function(e){return e.mountPath}))}},{key:"render",value:function(){var e=this.props,a=e.containers,r=e.formRef,n=e.formData,l=e.className,u=e.collectSavedLog,o={icon:"storage",label:t("SELECT_PERSISITENT_VOLUME_CLAIM"),description:t("SELECT_PERSISITENT_VOLUME_CLAIM_DESC")};return d.default.createElement("div",{className:(0,p.default)(b.default.wrapper,l)},d.default.createElement(h.Form,{data:n,ref:r},d.default.createElement(h.Form.Item,{rules:[{required:!0,message:t("PVC_NOT_SELECT")}]},d.default.createElement(v.default,{name:"volume",options:this.volumes,placeholder:o})),d.default.createElement(h.Form.Item,{rules:[{validator:this.mountValidator}]},d.default.createElement(y.default,{name:"volumeMounts",containers:a,collectSavedLog:u}))))}},{key:"volumes",get:function(){return this.props.volumes.map((function(e){return{uid:e.name,icon:"storage",label:d.default.createElement("span",null,(0,g.getDisplayName)(e)," ",d.default.createElement(h.Tag,null,e.inUse?t("IN_USER"):t("AVAILABLE"))),description:e.storageClassName,value:e,details:[{label:e.capacity,description:t("CAPACITY")},{label:e.accessMode,description:t("ACCESS_MODE_SCAP")}]}}))}}]),r}(d.default.Component);a.default=_,_.propTypes={formRef:m.default.object,formData:m.default.object,className:m.default.string,containers:m.default.array,volumes:m.default.array},_.defaultProps={className:"",volumes:[],formData:{},containers:[]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=r(25),m=n(r(32)),h=n(r(1753));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=[{label:"READ_AND_WRITE",value:"false"},{label:"READ_ONLY",value:"true"},{label:"NOT_MOUNT",value:"null"}],E=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1,subPath:e.props.value.subPath,defaultSubPath:e.props.value.subPath},e.handleSelectChange=function(t){var a=e.props,r=a.value,n=a.container;(0,a.onChange)(y(y({},r),{},{readOnly:t,containerName:n,mountPath:"null"===t?"":r.mountPath}))},e.handleMountPathChange=function(t){var a=e.props,r=a.value,n=a.container;(0,a.onChange)(y(y({},r),{},{mountPath:t.target.value,containerName:n}))},e.handleSubPathChange=function(t){e.setState({subPath:t.target.value})},e.handleSubPathSave=function(){var t=e.props,a=t.value,r=t.container,n=t.onChange,l=e.state.subPath;n(y(y({},a),{},{subPath:l,containerName:r})),e.setState({visible:!1})},e.handleLogPathChange=function(t){var a=e.props,r=a.value,n=a.container;(0,a.onChange)(y(y({},r),{},{logPath:t.target.value,containerName:n}))},e.showSubPathForm=function(){e.setState({visible:!0})},e.hideSubPathForm=function(){e.setState({subPath:e.props.value.subPath,visible:!1})},e}return(0,o.default)(r,[{key:"getMountOptions",value:function(){var e=this.props.supportedAccessModes;return b.filter((function(t){return(0,m.default)(e)||e.includes(t.label)})).map((function(e){return{label:t(e.label),value:e.value}}))}},{key:"renderLogPathTip",value:function(){return f.default.createElement("div",null,f.default.createElement("p",null,t.html("CONTAINER_LOG_PATH_TIP")))}},{key:"renderSubPathForm",value:function(){return f.default.createElement("div",{className:h.default.subForm},f.default.createElement("div",{className:h.default.formTitle},f.default.createElement("div",null,t("SPECIFY_SUBPATH")),f.default.createElement("p",null,t.html("SPECIFY_SUBPATH_TIP"))),f.default.createElement("div",{className:h.default.formContent},f.default.createElement("div",{className:h.default.subPath},f.default.createElement("div",{className:"control has-icons-left has-icons-right"},f.default.createElement(p.Icon,{className:"is-left",name:"textfield",size:20}),f.default.createElement(p.Input,{name:"subPath",defaultValue:this.state.subPath,placeholder:t("SUBPATH"),onChange:this.handleSubPathChange})))),f.default.createElement("div",{className:h.default.formFooter},f.default.createElement(p.Button,{onClick:this.hideSubPathForm},t("CANCEL")),f.default.createElement(p.Button,{type:"control",onClick:this.handleSubPathSave},t("OK"))))}},{key:"renderSubPathTip",value:function(){return f.default.createElement("div",null,f.default.createElement("div",{className:"tooltip-title"},t("SPECIFY_SUBPATH")),f.default.createElement("p",null,t.html("SPECIFY_SUBPATH_TIP")))}},{key:"renderSubPath",value:function(){var e=this.props.value,t=this.state.visible;return e&&e.mountPath?t?f.default.createElement(p.Popper,{className:h.default.popper,trigger:"click",visible:t,placement:"bottom",closeAfterClick:!1,content:this.renderSubPathForm(),onClose:this.hideSubPathForm},e.subPath?f.default.createElement("div",{className:h.default.subPathText},e.subPath):f.default.createElement(p.Icon,{className:"is-right",name:"textfield",size:20,clickable:!0})):f.default.createElement(p.Tooltip,{content:this.renderSubPathTip()},e.subPath?f.default.createElement("div",{className:h.default.subPathText,onClick:this.showSubPathForm},e.subPath):f.default.createElement(p.Icon,{className:"is-right",name:"textfield",size:20,clickable:!0,onClick:this.showSubPathForm})):null}},{key:"render",value:function(){var e=this.props,a=e.value,r=e.container,n=e.collectSavedLog;return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement("div",{className:h.default.title},f.default.createElement(p.Icon,{name:"docker",size:20}),r),f.default.createElement(p.Select,{name:"readOnly",className:h.default.readOnly,value:a.readOnly,options:this.getMountOptions(),onChange:this.handleSelectChange}),f.default.createElement("div",{className:"control has-icons-left has-icons-right ".concat(h.default.mountPath)},f.default.createElement(p.Icon,{className:"is-left",name:"mgmt-node",size:20}),f.default.createElement(p.Input,{name:"mountPath",defaultValue:a.mountPath,disabled:"null"===a.readOnly,placeholder:t("MOUNT_PATH"),onChange:this.handleMountPathChange}),this.renderSubPath()),"true"===n&&"false"===a.readOnly&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"control has-icons-left has-icons-right ".concat(h.default.logPath)},f.default.createElement(p.Icon,{className:"is-left",name:"log",size:20}),f.default.createElement(p.Input,{name:"logPath",defaultValue:a.logPath,disabled:"null"===a.readOnly,placeholder:t("CONTAINER_LOG_PATH"),onChange:this.handleLogPathChange})),f.default.createElement(p.Tooltip,{content:this.renderLogPathTip()},f.default.createElement(p.Icon,{className:h.default.icon,name:"question",size:20}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value.subPath!==t.defaultSubPath?{subPath:e.value.subPath,defaultSubPath:e.value.subPath}:null}}]),r}(f.default.Component);a.default=E,E.propTypes={name:d.default.string,container:d.default.string,value:d.default.object,onChange:d.default.func},E.defaultProps={name:"",value:{},supportedAccessModes:[],onChange:function(){}}},function(e,t,a){e.exports={wrapper:"_2U-7rSCyL8mi6yd1sD6ciw",title:"siYMdWXODwbKO6wks51uA",readOnly:"k-ti4HRbmygKyuba2QkaR",mountPath:"_23Vv314qVdDz60a3ZWdKYN",logPath:"xseszvPqaoLcp9Wmk6GkA",icon:"_1b9AMCY-jtC68i14C0iNAH",popper:"fprqTPtvMiJRLsbsjzX4",subForm:"PtGbJc6u5or38cbPQaSKc",formTitle:"_34f0Owj7xLgeXdxEmdS4yr",subPath:"I-uscUjujxiyJynxC5lN-",subPathText:"_3wUAFrfJozPZja8HVf4yBQ",formFooter:"_2XuHt3saPJvdmY9u0nmZvl"}},function(e,t,a){e.exports={wrapper:"qrglnQXitUXvMRnsVxWY7"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(290)),f=n(r(32)),d=n(r(0)),p=n(r(3)),m=n(r(1)),h=r(25),v=r(58),y=n(r(905)),g=n(r(1756));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,o.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).mountValidator=function(a,r,n){if((0,f.default)(r))return n({message:t("CONTAINER_NOT_SELECTED"),field:a.field});r.forEach((function(r){if(!r)return n();if("null"===r.readOnly)n();else if(r.mountPath){var l=e.getMountPaths(r);if(r.subPath){if(l.some((function(e){return e.mountPath===r.mountPath&&e.subPath===r.subPath})))return n({message:t("MOUNT_PATH_IN_USE"),field:a.field})}else if(l.some((function(e){return e.mountPath===r.mountPath})))return n({message:t("MOUNT_PATH_IN_USE"),field:a.field});n()}else n({message:t("READ_WRITE_MOUNT_EMPTY"),field:a.field})}))},e.nameValidator=function(a,r,n){if(!r)return n();var l=e.props,u=l.currentName;(0,l.checkVolumeNameExist)(r)&&u!==r?n({message:t("VOLUME_NAME_EXIST"),field:a.field}):n()},e}return(0,u.default)(r,[{key:"getMountPaths",value:function(e){return this.mountPaths||(this.mountPaths=(0,s.default)(this.props.containers,"name")),(0,f.default)(this.mountPaths[e.containerName])||(0,f.default)(this.mountPaths[e.containerName].volumeMounts)?[]:this.mountPaths[e.containerName].volumeMounts.filter((function(t){return t.name!==e.name}))}},{key:"render",value:function(){var e=this.props,a=e.containers,r=e.formData,n=e.formRef,l=e.className,u=e.collectSavedLog;return d.default.createElement("div",{className:(0,p.default)(g.default.wrapper,l)},d.default.createElement(h.Form,{data:r,ref:n},d.default.createElement(h.Form.Item,{label:t("VOLUME_NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("VOLUME_NAME_EMPTY")},{pattern:v.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},d.default.createElement(h.Input,{name:"name",autoFocus:!0,maxLength:63})),d.default.createElement(h.Form.Item,{rules:[{required:t("MOUNT_PATH_EMPTY"),validator:this.mountValidator}]},d.default.createElement(y.default,{name:"volumeMounts",containers:a,collectSavedLog:u}))))}}]),r}(d.default.Component);a.default=E,E.propTypes={formRef:m.default.object,formData:m.default.object,className:m.default.string,containers:m.default.array,checkVolumeNameExist:m.default.func},E.defaultProps={className:"",formData:{},containers:[]}},function(e,t,a){e.exports={wrapper:"tsynsemTJYuvNWUS6TC_Z",alert:"_183z7Q-nKFOp95joP8dq5f"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(290)),f=n(r(32)),d=n(r(0)),p=n(r(1)),m=r(25),h=r(58),v=n(r(905)),y=n(r(1758));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,o.default)(r,e);var a=g(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).mountValidator=function(a,r,n){if((0,f.default)(r))return n();r.forEach((function(r){if(!r)return n();if("null"===r.readOnly)n();else if(r.mountPath){if(e.getMountPaths(r).includes(r.mountPath))return n({message:t("MOUNT_PATH_IN_USE"),field:a.field});n()}else n({message:t(""),field:a.field})}))},e.nameValidator=function(a,r,n){if(!r)return n();var l=e.props,u=l.currentName;(0,l.checkVolumeNameExist)(r)&&u!==r?n({message:t("VOLUME_NAME_EXIST"),field:a.field}):n()},e}return(0,u.default)(r,[{key:"getMountPaths",value:function(e){return this.mountPaths||(this.mountPaths=(0,s.default)(this.props.containers,"name")),(0,f.default)(this.mountPaths[e.containerName])||(0,f.default)(this.mountPaths[e.containerName].volumeMounts)?[]:this.mountPaths[e.containerName].volumeMounts.filter((function(t){return t.name!==e.name})).map((function(e){return e.mountPath}))}},{key:"render",value:function(){var e=this.props,a=e.containers,r=e.formData,n=e.formRef,l=e.collectSavedLog;return d.default.createElement("div",{className:y.default.wrapper},d.default.createElement(m.Alert,{className:"margin-b12",type:"info",message:t("HOSTPATH_TIP")}),d.default.createElement(m.Form,{data:r,ref:n},d.default.createElement(m.Form.Item,{label:t("VOLUME_NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("VOLUME_NAME_EMPTY")},{pattern:h.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},d.default.createElement(m.Input,{name:"name",autoFocus:!0,maxLength:63})),d.default.createElement(m.Form.Item,{label:t("HOST_PATH"),rules:[{required:!0,message:t("HOST_PATH_EMPTY")}]},d.default.createElement(m.Input,{name:"hostPath.path"})),d.default.createElement(m.Form.Item,{rules:[{validator:this.mountValidator}]},d.default.createElement(v.default,{name:"volumeMounts",containers:a,collectSavedLog:l}))))}}]),r}(d.default.Component);a.default=b,b.propTypes={formRef:p.default.object,formData:p.default.object,containers:p.default.array,checkVolumeNameExist:p.default.func},b.defaultProps={formData:{},containers:[]}},function(e,t,a){e.exports={wrapper:"_31vvlzay1MAiMrX6G9lj7B"}},function(e,t,a){e.exports={wrapper:"_2nvRVt6iy6k_SVrooYkMKG",contentWrapper:"_1OWIG8nyOZJNyw5JeHA2KG",title:"u7mUnzKWCRa-RMCN75bQu"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(136)),u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(16)),p=n(r(73)),m=n(r(290)),h=n(r(32)),v=n(r(0)),y=n(r(1)),g=r(25),b=n(r(636)),E=n(r(761)),_=n(r(774)),O=n(r(905)),S=r(801),k=r(37),C=n(r(904)),R=n(r(773)),w=n(r(737)),P=n(r(1761));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var I=function(e){(0,c.default)(r,e);var a=N(r);function r(e){var n;if((0,o.default)(this,r),(n=a.call(this,e)).handleGoBack=function(){var e=n.context.resetSubRoute;e&&e(),n.props.onCancel()},n.handleSelectChange=function(e){var t=n.state,a=t.configMaps,r=t.secrets,l={};l="configmap"===t.type?a.find((function(t){return t.name===e})):r.find((function(t){return t.name===e})),n.setState({resource:l})},n.handleTypeChange=function(e){var t=n.state.formData,a=n.formRef.current;n.setState({type:e,formData:(0,p.default)(t,"name",void 0)},(function(){a.validate()}))},n.handleSubmit=function(e){var t=n.props.onSave,a=n.state.resource,r=n.formRef.current;r&&r.validate((function(){var l=r.getData(),u=l.volumeMounts,o=l.name,i=l.items,c={name:(0,d.default)(n.props,"volume.name","volume-".concat((0,k.generateId)()))};"secrets"===a.module?c.secret={secretName:o,items:i}:c.configMap={name:o,items:i};var s=[];u&&(s=u.map((function(e){return T(T({},e),{},{volume:c})}))),t(c,s),e&&e()}))},n.mountValidator=function(e,a,r){if((0,h.default)(a))return r();a.forEach((function(a){if(!a)return r();if("null"===a.readOnly)r();else if(a.mountPath){if(n.getMountPaths(a).includes(a.mountPath))return r({message:t("MOUNT_PATH_IN_USE"),field:e.field});r()}else r({message:t("READ_WRITE_MOUNT_EMPTY"),field:e.field})}))},n.nameValidator=function(e,a,r){var l=n.state,u=l.formData,o=l.type,i=(0,d.default)(u,"volumeMounts"),c=function(e){return!(0,h.default)(e)&&"null"!==(0,d.default)(e,"[0].readOnly")};return c(i)&&!a?r("configmap"===o?{message:t("CONFIGMAP_NOT_SELECT")}:{message:t("SECRET_NOT_SELECT")}):!c(i)||a?r():void 0},n.relativePathValidator=function(e,a,r){return a?a.some((function(e){return/^\//.test(e.path)}))?r({message:t("PLEASE_USE_RELATIVE_PATH")}):a.some((function(e){return/^(\.)\1{1,}/.test(e.path)}))?r({message:t("RELATIVE_PATH_NOT_SUPPORT")}):a.some((function(e){return/(\/)\1{1,}|(\.)\2{1,}/.test(e.path)}))?r({message:t("MOUNT_PATH_INCORRECT")}):r():r()},n.formRef=v.default.createRef(),(0,h.default)(e.volume))n.state={formData:{},configMaps:[],secrets:[],resource:{},type:"configmap"};else{var l=e.volume.configMap||e.volume.secret||{};n.state={formData:{name:l.name||l.secretName,items:l.items,volumeMounts:e.volume.volumeMounts},configMaps:[],secrets:[],resource:{},type:e.volume.configMap?"configmap":"secret"}}return n.configMapStore=new C.default,n.secretStore=new R.default,e.isFederated&&(n.configMapStore=new w.default({module:n.configMapStore.module}),n.secretStore=new w.default({module:n.secretStore.module})),n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.onCancel,t=this.context.registerSubRoute;t&&t(this.handleSubmit,e),this.fetchData()}},{key:"fetchData",value:function(){var e=this,t=this.props,a=t.cluster,r={namespace:t.namespace,cluster:a};Promise.all([this.configMapStore.fetchListByK8s(r),this.secretStore.fetchListByK8s(r)]).then((function(t){var a=(0,l.default)(t,2),r=a[0],n=a[1];e.setState({configMaps:r,secrets:n},(function(){e.state.formData.name&&e.handleSelectChange(e.state.formData.name)}))}))}},{key:"getMountPaths",value:function(e){return this.mountPaths||(this.mountPaths=(0,m.default)(this.props.containers,"name")),(0,h.default)(this.mountPaths[e.containerName])||(0,h.default)(this.mountPaths[e.containerName].volumeMounts)?[]:this.mountPaths[e.containerName].volumeMounts.filter((function(t){return t.name!==e.name})).map((function(e){return e.mountPath}))}},{key:"getResourceOptions",value:function(){var e=this.state,a=e.type,r=e.configMaps,n=e.secrets;return"configmap"!==a||(0,h.default)(r)?"secret"!==a||(0,h.default)(n)?[]:n.map((function(e){return{label:(0,k.getDisplayName)(e),description:t("Secret"),value:e.name,icon:"key"}})):r.map((function(e){return{label:(0,k.getDisplayName)(e),description:t("CONFIGMAP"),value:e.name,icon:"hammer"}}))}},{key:"getKeysOptions",value:function(){var e=this.state.resource;return Object.keys(e.data||{}).map((function(e){return{label:e,value:e}}))}},{key:"renderContent",value:function(){var e=this.props,a=e.containers,r=e.collectSavedLog,n=this.state,l=n.type,u=n.formData,o=this.getResourceOptions(),i={label:(0,h.default)(o)?t("NO_AVAILABLE_RESOURCE"):t("SELECT_TYPE",{type:t(l.toUpperCase())}),description:t("SELECT_".concat(l.toUpperCase(),"_DESC"))};return v.default.createElement(g.Form,{data:u,ref:this.formRef},v.default.createElement("div",{className:P.default.card},v.default.createElement(g.Form.Item,{rules:[{validator:this.nameValidator}]},v.default.createElement(b.default,{name:"name",options:o,placeholder:i,onChange:this.handleSelectChange})),v.default.createElement(g.Form.Item,{rules:[{validator:this.mountValidator}]},v.default.createElement(O.default,{name:"volumeMounts",supportedAccessModes:["READ_ONLY","NOT_MOUNT"],containers:a,collectSavedLog:r}))),v.default.createElement(g.Form.Group,{label:t("SELECT_SPECIFIC_KEYS"),desc:t("SELECT_SPECIFIC_KEYS_DESC"),checkable:!0,keepDataWhenUncheck:!0},v.default.createElement(g.Form.Item,{rules:[{validator:this.relativePathValidator}]},v.default.createElement(E.default,{name:"items",itemType:"object",addText:t("ADD")},v.default.createElement(_.default,null,v.default.createElement(g.Select,{name:"key",placeholder:t("KEY"),options:this.getKeysOptions()}),v.default.createElement(g.Input,{name:"path",placeholder:t("PATH")}))))))}},{key:"render",value:function(){var e=this.state.type;return v.default.createElement("div",{className:P.default.wrapper},v.default.createElement("div",{className:"h6"},v.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},v.default.createElement(S.ReactComponent,null)),t("STORAGE_SETTINGS")),v.default.createElement("div",{className:P.default.contentWrapper},v.default.createElement("div",{className:P.default.title},t("MOUNT_CONFIGMAP_OR_SECRET")),v.default.createElement(g.RadioGroup,{mode:"button",value:e,onChange:this.handleTypeChange,size:"small"},v.default.createElement(g.RadioButton,{value:"configmap"},t("CONFIGMAP")),v.default.createElement(g.RadioButton,{value:"secret"},t("SECRET"))),this.renderContent()))}}]),r}(v.default.Component);a.default=I,I.propTypes={containers:y.default.array,volume:y.default.object,namespace:y.default.string,onSave:y.default.func,onCancel:y.default.func},I.defaultProps={volume:{},containers:[],onSave:function(){},onCancel:function(){}},I.contextTypes={registerSubRoute:y.default.func,resetSubRoute:y.default.func}},function(e,t,a){e.exports={wrapper:"_3pnsBqwivoQqBMD1jPCOFL",contentWrapper:"_1wqGCv-mvy92zPY5s3GKBv",title:"_3oPV7UJiVZfEBJMYrTt2mK",card:"_2ShsDemFbJ8NIreLAccIOt"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(995)),h=n(r(16)),v=n(r(73)),y=n(r(32)),g=n(r(652)),b=n(r(1763)),E=n(r(1238));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var k=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).getFormattedVolumes=function(){var t=e.props,a=t.value,r=t.containers;return(0,y.default)(a)||(0,y.default)(r)?[]:a.map((function(e){var t=[];return r.forEach((function(a){if((0,h.default)(a,"volumeMounts",!1)){var r=a.volumeMounts.find((function(t){return t.name===e.metadata.name}));r&&t.push(O(O({},r),{},{containerName:a.name}))}})),O(O({},e),{},{volumeMounts:t})}))},e.deleteVolumeMounts=function(t){var a=e.context.formData,r=(0,h.default)(a,"".concat(e.props.prefix,"spec.containers"),[]).map((function(e){return O(O({},e),{},{type:"worker"})})),n=(0,h.default)(a,"".concat(e.prefix,"spec.initContainers"),[]).map((function(e){return O(O({},e),{},{type:"init"})})),l=(0,m.default)(r,n);l.forEach((function(e){(0,y.default)(e.volumeMounts)||(e.volumeMounts=e.volumeMounts.filter((function(e){return e.name!==t})))}));var u=[],o=[];l.forEach((function(e){"worker"===e.type?(delete e.type,u.push(e)):(delete e.type,o.push(e))})),(0,v.default)(a,"".concat(e.props.prefix,"spec.containers"),u),(0,v.default)(a,"".concat(e.props.prefix,"spec.initContainers"),o)},e.handleAddVolume=function(){e.props.onShowAddVolume()},e.handleEdit=function(t){e.props.onShowEdit(t)},e.handleDelete=function(t){var a=e.props,r=a.value,n=a.onChange;e.deleteVolumeMounts(t),n(r.filter((function(e){return e.metadata.name!==t})))},e}return(0,o.default)(r,[{key:"renderAddVolume",value:function(){return f.default.createElement(g.default.Add,{onClick:this.handleAddVolume,title:t("ADD_PERSISTENT_VOLUME_CLAIM_TEMPLATE"),description:t("ADD_PERSISTENT_VOLUME_CLAIM_TEMPLATE_DESC")})}},{key:"render",value:function(){var e=this,t=this.props.className,a=this.getFormattedVolumes();return f.default.createElement("div",{className:(0,p.default)(E.default.wrapper,t)},f.default.createElement("div",{className:E.default.content},!(0,y.default)(a)&&f.default.createElement("ul",{className:E.default.list},a.map((function(t){return f.default.createElement(b.default,{volume:t,key:(0,h.default)(t,"metadata.name"),onEdit:e.handleEdit,onDelete:e.handleDelete})}))),this.renderAddVolume()))}}]),r}(f.default.Component);a.default=k,k.propTypes={prefix:d.default.string,name:d.default.string,value:d.default.array,containers:d.default.array,onChange:d.default.func,onShowAddVolume:d.default.func,onShowEdit:d.default.func},k.defaultProps={prefix:"",name:"",value:[],containers:[],onChange:function(){},onShowAddVolume:function(){},onShowEdit:function(){}},k.contextTypes={formData:d.default.object}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(16)),u=n(r(0)),o=n(r(1)),i=r(25),c=n(r(652)),s=n(r(1238)),f=function(e){var a=e.volume,r=e.onDelete,n=e.onEdit,o=[{title:(0,l.default)(a,"spec.resources.requests.storage","-"),description:t("CAPACITY")},{title:(0,l.default)(a,"spec.accessModes[0]","-"),description:t("ACCESS_MODE_TCAP")}],f=u.default.createElement("div",{className:s.default.mount},u.default.createElement("ul",null,a.volumeMounts&&a.volumeMounts.map((function(e){var a=e.containerName,r=e.mountPath,n=e.subPath,l=e.readOnly;return u.default.createElement("li",{key:r},u.default.createElement("div",null,u.default.createElement(i.Icon,{name:"docker",size:20}),u.default.createElement("span",null,a)),u.default.createElement("div",null,u.default.createElement(i.Icon,{name:"mgmt-node",size:20})," ",u.default.createElement("span",null,r),u.default.createElement("span",{className:"text-secondary"}," (",l?t("READ_ONLY_LOW"):t("READ_AND_WRITE_LOW"),")")),n&&u.default.createElement("div",null,u.default.createElement(i.Icon,{name:"textfield",size:20})," ",u.default.createElement("span",null,n)))}))));return u.default.createElement(c.default.Item,{icon:"storage",title:(0,l.default)(a,"metadata.name","-"),description:"".concat(t("Storage Classs"),": ").concat((0,l.default)(a,"spec.storageClassName","-")),extras:f,details:o,onDelete:function(){return r(a.metadata.name)},onEdit:function(){return n(a)}})};f.propTypes={container:o.default.object};var d=f;a.default=d},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(21)),c=n(r(56)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(290)),v=n(r(32)),y=n(r(0)),g=n(r(1)),b=n(r(3)),E=r(70),_=r(25),O=n(r(905)),S=r(58),k=r(801),C=n(r(938)),R=n(r(763)),w=n(r(1765));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var N=(0,E.observer)((o=u=function(e){(0,d.default)(r,e);var a=T(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).handleGoBack=function(){var e=n.context.resetSubRoute;e&&e(),n.props.onCancel()},n.handleSubmit=function(e){var t=n.props.onSave,a=n.formRef.current;a&&a.validate((function(){var r=a.getData(),n=r.volumeMounts,l=void 0===n?[]:n,u=(0,c.default)(r,["volumeMounts"]);t(u,l.map((function(e){return D(D({},e),{},{name:u.metadata.name})}))),e&&e()}))},n.mountValidator=function(e,a,r){if((0,v.default)(a))return r();a.forEach((function(a){if(!a)return r();if("null"===a.readOnly)r();else if(a.mountPath){if(n.getMountPaths(a).includes(a.mountPath))return r({message:t("MOUNT_PATH_IN_USE"),field:e.field});r()}else r({message:t("READ_WRITE_MOUNT_EMPTY"),field:e.field})}))},n.nameValidator=function(e,a,r){if(!a)return r();var l=n.props,u=l.volume,o=l.cluster,i=l.namespace;(0,l.checkVolumeNameExist)(a)&&u.metadata.name!==a?r({message:t("PVC_NAME_PREFIX_EXIST"),field:e.field}):n.volumeStore.checkName({name:a,cluster:o,namespace:i}).then((function(a){if(a.exist)return r({message:t("PVC_NAME_PREFIX_EXIST"),field:e.field});r()}))},n.formRef=y.default.createRef(),n.volumeStore=new R.default,n.state={formData:e.volume},n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.onCancel,t=this.context.registerSubRoute;t&&t(this.handleSubmit,e)}},{key:"getMountPaths",value:function(e){return this.mountPaths||(this.mountPaths=(0,h.default)(this.props.containers,"name")),(0,v.default)(this.mountPaths[e.containerName])||(0,v.default)(this.mountPaths[e.containerName].volumeMounts)?[]:this.mountPaths[e.containerName].volumeMounts.filter((function(t){return t.name!==e.name})).map((function(e){return e.mountPath}))}},{key:"render",value:function(){var e=this.props,a=e.containers,r=e.className,n=e.contentClassName,l=e.collectSavedLog,u=e.cluster,o=e.namespace,i=this.state.formData;return y.default.createElement("div",{className:(0,b.default)(w.default.wrapper,r)},y.default.createElement("div",{className:"h6"},y.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},y.default.createElement(k.ReactComponent,null)),t("STORAGE_SETTINGS")),y.default.createElement("div",{className:(0,b.default)(w.default.contentWrapper,n)},y.default.createElement("div",{className:w.default.card},y.default.createElement(_.Form,{data:i,ref:this.formRef},y.default.createElement(_.Form.Item,{className:w.default.name,label:t("PVC_NAME_PREFIX"),desc:t("PVC_NAME_PREFIX_DESC"),rules:[{required:!0,message:t("PVC_NAME_PREFIX_EMPTY")},{pattern:S.PATTERN_NAME,message:t("INVALID_PVC_NAME_PREFIX")},{validator:this.nameValidator}]},y.default.createElement(_.Input,{name:"metadata.name",autoFocus:!0,maxLength:253})),y.default.createElement(C.default,{cluster:u,namespace:o}),y.default.createElement(_.Form.Item,{label:t("MOUNT_PATH_TCAP"),rules:[{validator:this.mountValidator}]},y.default.createElement(O.default,{name:"volumeMounts",containers:a,collectSavedLog:l}))))))}}]),r}(y.default.Component),u.propTypes={containers:g.default.array,volume:g.default.object,cluster:g.default.string,namespace:g.default.string,onSave:g.default.func,onCancel:g.default.func,checkVolumeNameExist:g.default.func},u.defaultProps={volume:{},containers:[],cluster:"",namespace:"",onSave:function(){},onCancel:function(){}},u.contextTypes={registerSubRoute:g.default.func,resetSubRoute:g.default.func},l=o))||l;a.default=N},function(e,t,a){e.exports={wrapper:"_2sHTAo3GFHxoeVf77YOEjo",contentWrapper:"xUWl22UQS1nWaOZ6Vy3Pk",card:"_2LsjIj1BkvMm_tQz5ZVVB1",title:"_3ud0Iv5RoPlYu6nF2BbTgZ"}},function(e,t,a){e.exports={toggle:"_2BhdZ8zjSjZNYV7QYpsyT2"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(16)),d=n(r(73)),p=n(r(190)),m=n(r(738)),h=r(58),v=r(25),y=n(r(740)),g=n(r(1239)),b=n(r(1768)),E=n(r(1769)),_=n(r(1778));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,o.default)(r,e);var a=O(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleLabelsChange=function(t){var a=e.props,r=a.formTemplate;a.noWorkload||((0,d.default)(r,"Service.".concat(e.fedPrefix,"spec.selector"),(0,p.default)(t,"version")),(0,d.default)(r,"Service.".concat(e.fedPrefix,"metadata.labels"),t),(0,d.default)(r,"Service.metadata.labels",t))},e.handleSessionAffinityChange=function(t){var a=e.props.formTemplate;(0,d.default)(a,"Service.".concat(e.fedPrefix,"spec.sessionAffinity"),t?"ClientIP":"None"),t?(0,d.default)(a,"Service.".concat(e.fedPrefix,"spec.sessionAffinityConfig.clientIP.timeoutSeconds"),10800):(0,m.default)(a,"Service.".concat(e.fedPrefix,"spec.sessionAffinityConfig"))},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=e.cluster,l=e.module,u=e.store,o=e.noWorkload,i=e.isFederated;return s.default.createElement(v.Form,{data:r,ref:a},!o&&!i&&globals.app.hasClusterModule(n,"network.ippool")&&s.default.createElement(g.default,{cluster:n,namespace:this.namespace,prefix:"".concat(this.kind,".").concat(this.fedPrefix,"spec.template.")}),(o||"statefulsets"!==l)&&s.default.createElement(v.Form.Group,{label:t("EXTERNAL_ACCESS"),desc:t("SERVICE_EXTERNAL_ACCESS_DESC"),checkable:!0},s.default.createElement(_.default,{formTemplate:r,isFederated:i})),s.default.createElement(v.Form.Group,{label:t("SESSION_PERSISTENCE"),desc:t("SESSION_PERSISTENCE_DESC"),onChange:this.handleSessionAffinityChange,checkable:!0},s.default.createElement(v.Form.Item,{label:t("MAXIMUM_STICKINESS_DURATION"),desc:t("MAXIMUM_STICKINESS_DURATION_DESC")},s.default.createElement(y.default,{name:"Service.".concat(this.fedPrefix,"spec.sessionAffinityConfig.clientIP.timeoutSeconds"),min:0,max:86400}))),!o&&s.default.createElement(v.Form.Group,{label:t("SELECT_NODES"),desc:t("SELECT_NODES_DESC"),checkable:!0},s.default.createElement(E.default,{kind:this.kind,cluster:n,namespace:this.namespace,formTemplate:r,isFederated:i})),s.default.createElement(v.Form.Group,{label:t("ADD_METADATA"),desc:t("SERVICE_ADD_METADATA_DESC"),keepDataWhenUnCheck:!0,checkable:!0},s.default.createElement(b.default,{store:u,module:l,kind:this.kind,namespace:this.namespace,cluster:n,formTemplate:r,onLabelsChange:this.handleLabelsChange,isFederated:i,noWorkload:o})))}},{key:"namespace",get:function(){return(0,f.default)(this.props.formTemplate,"Service.metadata.namespace")}},{key:"fedPrefix",get:function(){return this.props.isFederated?"spec.template.":""}},{key:"kind",get:function(){var e=this.props.module;return h.MODULE_KIND_MAP[e]}}]),r}(s.default.Component);a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(16)),f=n(r(650)),d=n(r(32)),p=n(r(68)),m=n(r(73)),h=n(r(0)),v=r(25),y=n(r(786)),g=r(37);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,o.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).handleLabelsChange=(0,f.default)((function(t){var a=e.props,r=a.module,n=a.kind,l=a.isFederated,u=a.formTemplate,o=a.onLabelsChange,i=l?(0,s.default)(u[n],"spec.template"):u[n];(0,g.updateLabels)(i,r,t),l&&(0,m.default)(u[n],"metadata.labels",t),o&&o(t)}),200),e.labelsValidator=function(a,r,n){return(0,p.default)(r)?n():(0,d.default)(r)?n({message:t("EMPTY_LABEL_DESC")}):(0,g.isValidLabel)(r)?void e.props.store.checkLabels({labels:r,namespace:e.props.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("DUPLICATE_LABELS"),field:a.field});n()})):n({message:t("LABEL_FORMAT_DESC")})},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.kind,r=e.noWorkload;return h.default.createElement(h.default.Fragment,null,h.default.createElement(v.Form.Item,{label:t("LABEL_PL"),rules:[{required:!0,message:t("EMPTY_LABEL_DESC")},{validator:this.labelsValidator}]},h.default.createElement(y.default,{name:"".concat(a,".").concat(this.fedPrefix,"metadata.labels"),addText:t("ADD"),onChange:this.handleLabelsChange})),!r&&h.default.createElement(v.Form.Item,{label:t("WORKLOAD_ANNOTATIONS")},h.default.createElement(y.default,{name:"".concat(a,".metadata.annotations"),addText:t("ADD"),hiddenKeys:globals.config.preservedAnnotations})))}},{key:"fedPrefix",get:function(){return this.props.isFederated?"spec.template.":""}}]),r}(h.default.Component);a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(25),p=n(r(1770));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,i.default)(r,e);var a=m(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){return f.default.createElement(d.Form.Item,null,f.default.createElement(p.default,(0,l.default)({name:"".concat(this.prefix,"nodeSelector"),addText:t("ADD_NODE_SELECTOR")},this.props)))}},{key:"prefix",get:function(){return this.props.isFederated?"".concat(this.props.kind,".spec.template.spec.template.spec."):"".concat(this.props.kind,".spec.template.spec.")}}]),r}(f.default.Component);a.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(25),p=n(r(786)),m=n(r(1771)),h=n(r(1777));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(r,e);var a=v(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1},e.handleNodeSelect=function(t){var a=e.props.onChange;a&&a(t)},e.handleCancel=function(){e.setState({visible:!1})},e}return(0,o.default)(r,[{key:"renderNodeSelectForm",value:function(){var e=this.props,t=e.cluster,a=e.namespace;return f.default.createElement(m.default,{cluster:t,namespace:a,onSelect:this.handleNodeSelect,onCancel:this.handleCancel,visible:this.state.visible})}},{key:"render",value:function(){var e=this.state.visible;return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement(p.default,(0,l.default)({},this.props,{controlled:!0})),f.default.createElement(d.Popper,{className:h.default.popper,visible:e,placement:"right",content:this.renderNodeSelectForm(),closeAfterClick:!1,trigger:"click"},f.default.createElement(d.Button,{className:h.default.node},t("SPECIFY_NODE"))))}}]),r}(f.default.Component);a.default=y},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(56)),i=n(r(49)),c=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(5),y=r(70),g=n(r(16)),b=n(r(32)),E=r(25),_=n(r(826)),O=n(r(837)),S=n(r(1075)),k=n(r(877)),C=n(r(1774)),R=n(r(1240));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var T={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",pod_used:"node_pod_running_count",pod_total:"node_pod_quota"},N=(0,y.observer)(l=function(e){(0,d.default)(n,e);var a,r=D(n);function n(e){var a;(0,s.default)(this,n),(a=r.call(this,e)).handleTypeChange=function(){var e=(0,c.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchData({type:t});case 2:a.setState({type:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.fetchData=function(){var e=(0,c.default)(i.default.mark((function e(t){var r,n,l,u,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.type,n=(0,o.default)(t,["type"]),l=a.props,u=l.cluster,c=l.namespace,e.next=4,a.store[r].fetchList(P({cluster:u,type:r,namespace:c},n));case 4:return e.next=6,a.monitoringStore.fetchMetrics({resources:a.store[r].list.data.map((function(e){return e.name})),metrics:Object.values(T),last:!0});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSelect=function(e){a.setState({selectItem:e})},a.handleCancel=function(){a.setState({selectItem:{}},(function(){a.props.onCancel()}))},a.handleOK=function(){var e=a.props.onSelect,t=a.state.selectItem;e({"kubernetes.io/hostname":(0,g.default)(t,'labels["kubernetes.io/hostname"]')})},a.renderRadio=function(){var e=a.state.type;return a.edgeDisabled?h.default.createElement(E.RadioGroup,{mode:"button",buttonWidth:120,value:e,onChange:a.handleTypeChange,size:"small"},h.default.createElement(E.RadioButton,{value:"node"},t("Cluster Nodes")),h.default.createElement(E.RadioButton,{value:"edgenode"},t("EDGE_NODE_PL"))):null},a.state={type:"node",selectItem:{}};var l=a.props.cluster;return a.nodeStore=new O.default,a.edgeNodeStore=new S.default,a.monitoringStore=new k.default({cluster:l}),a.store={node:a.nodeStore,edgenode:a.edgeNodeStore},a}return(0,f.default)(n,[{key:"componentDidMount",value:(a=(0,c.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData({type:this.state.type});case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this,a=this.state,r=a.type,n=a.selectItem,l=(0,v.toJS)(this.store[r].list),u=l.data,o=l.total,i=l.page,c=l.isLoading,s=(0,v.toJS)(this.monitoringStore).data;return(0,b.default)(s)?null:h.default.createElement("div",{className:R.default.container},h.default.createElement("div",{className:R.default.body},h.default.createElement(E.Alert,{className:"margin-b8",message:t("SPECIFY_NODE_DESC"),hideIcon:!0}),this.renderRadio(),h.default.createElement("div",{className:R.default.nodes},h.default.createElement(_.default,{data:u,total:o,page:i,loading:c,onFetch:function(t){return e.fetchData(P({type:r},t))}},u.map((function(t,a){return h.default.createElement(C.default,{key:"".concat(t.uid).concat(a),module:r,detail:t,metricsData:s,onClick:e.handleSelect,selected:n.uid===t.uid})}))))),h.default.createElement("div",{className:R.default.footer},h.default.createElement(E.Button,{onClick:this.handleCancel},t("CANCEL")),h.default.createElement(E.Button,{type:"control",onClick:this.handleOK},t("OK"))))}},{key:"edgeDisabled",get:function(){var e=this.props.cluster;return globals.app.hasClusterModule(e,"kubeedge")}}]),n}(h.default.PureComponent))||l;a.default=N},function(e,t,a){e.exports={wrapper:"Fxc1J8GJ2h6_Qd-n9BxZg",content:"_3DotkGf2uSTDa1JBsYdIsb"}},function(e,t,a){e.exports={wrapper:"_1HH_wApq9OB2Afiw8FUQG5",main:"_3Z6raG0G-fxugjFdD2je6J",content:"_2yXgC1SbTsHsrlUb6aUTxo",loadMore:"_33OcD9PenJa0VjGHcOD-aD",empty:"_2sZpot3ZfCOM9QHB7RXOkx"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(3)),p=r(25),m=r(58),h=n(r(16)),v=n(r(32)),y=r(296),g=n(r(727)),b=n(r(729)),E=n(r(275)),_=r(725),O=n(r(1240));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var k={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",pod_used:"node_pod_running_count",pod_total:"node_pod_quota"},C=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).handleClick=function(){var t=e.props;(0,t.onClick)(t.detail)},e.renderStatus=function(a){var r=(0,y.getNodeStatus)(a),n=a.taints;return f.default.createElement(E.default,{title:f.default.createElement(f.default.Fragment,null,f.default.createElement(b.default,{type:r,name:t("NODE_STATUS_".concat(r.toUpperCase()))}),!(0,v.default)(n)&&"success"===a.importStatus&&f.default.createElement(p.Tooltip,{content:e.renderTaintsTip(n)},f.default.createElement("span",{className:O.default.taints},n.length))),description:t("STATUS")})},e.renderTaintsTip=function(e){return f.default.createElement("div",null,f.default.createElement("div",null,t("TAINTS"),":"),f.default.createElement("div",null,e.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return f.default.createElement("div",{key:t},t)}))))},e.getLastValue=function(t,a,r){var n=e.props.metricsData,l=((0,h.default)(n[a],"data.result")||[]).find((function(e){return(0,h.default)(e,"metric.node")===t.name}));return(0,_.getValueByUnit)((0,h.default)(l,"value[1]",0),r)},e.getRecordMetrics=function(t,a){var r={};return a.forEach((function(a){r[a.type]=parseFloat(e.getLastValue(t,k[a.type],a.unit))})),r},e.renderCPU=function(a){var r=e.getRecordMetrics(a,[{type:"cpu_used",unit:"Core"},{type:"cpu_total",unit:"Core"},{type:"cpu_utilisation"}]);return f.default.createElement(E.default,{title:f.default.createElement("div",{className:O.default.resource},f.default.createElement("span",null,"".concat(Math.round(100*r.cpu_utilisation),"%")),r.cpu_utilisation>=.9&&f.default.createElement(p.Icon,{name:"exclamation"})),description:t("CPU")})},e.renderMemory=function(a){var r=e.getRecordMetrics(a,[{type:"memory_used",unit:"Gi"},{type:"memory_total",unit:"Gi"},{type:"memory_utilisation"}]);return f.default.createElement(E.default,{title:f.default.createElement("div",{className:O.default.resource},f.default.createElement("span",null,"".concat(Math.round(100*r.memory_utilisation),"%")),r.memory_utilisation>=.9&&f.default.createElement(p.Icon,{name:"exclamation"})),description:t("MEMORY")})},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.selected;return f.default.createElement("div",{className:(0,d.default)(O.default.item,(0,l.default)({},O.default.selected,r)),onClick:this.handleClick},f.default.createElement(p.Icon,{name:m.ICON_TYPES.nodes,size:20}),f.default.createElement("div",{className:O.default.ring}),f.default.createElement("div",{className:O.default.name},f.default.createElement(g.default,{icon:null,to:null,title:a.name,desc:a.ip})),this.renderStatus(a),f.default.createElement("div",null,f.default.createElement(E.default,{title:f.default.createElement(f.default.Fragment,null,a.role.join(",")),description:t("Role")})),f.default.createElement("div",null,this.renderCPU(a)),f.default.createElement("div",null,this.renderMemory(a)))}}]),r}(f.default.Component);a.default=C},function(e,t,a){e.exports={wrapper:"_2ABKueEhFD_fLDY6TON2qh",image:"_1mmQUkTeKXZTVXgFXKgoCs",icon:"a8sH1IiHZlq-JMxPrhL9j",indicator:"OwzOkeA57mPFVgLlkrBZJ",text:"hREka2j-_x28omZp792PI",title:"_1fIgblnihVl-f4bVynbi-Q",description:"xuSos0JIlya1jTOEqVI7Q",link:"_5VQCDsQldfebGA3uz_SO3"}},function(e,t,a){e.exports={status:"_1RJNTAi2gZll1lMoWME40i",indicator:"_2MMr1KtzTZnVoLtaDgs1lx"}},function(e,t,a){e.exports={wrapper:"e5Jf5_q8FscHgID58CD7H",alert:"_2AIc5Vz5VWAUWlhxAD9FCG",node:"_1NNyPvCXso2s-hSebtqNpd",popper:"_3lit3qZEFq4FaHoohTz1rG"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(73)),p=n(r(738)),m=n(r(0)),h=r(25),v=n(r(786)),y=r(37),g=n(r(1779));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var O=function(e){(0,i.default)(r,e);var a=_(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).handleAccessModeChange=function(e){if("LoadBalancer"===e){var a=(0,f.default)(t.formTemplate,"metadata.annotations",{});a=E(E({},globals.config.loadBalancerDefaultAnnotations),a),(0,d.default)(t.formTemplate,"metadata.annotations",a)}else Object.keys(globals.config.loadBalancerDefaultAnnotations).forEach((function(e){(0,p.default)(t.formTemplate,'metadata.annotations["'.concat(e,'"]'))}));t.props.isFederated&&(0,y.updateFederatedAnnotations)(t.formTemplate),t.setState({mode:e})},t.handleAnnotationsChange=function(){t.props.isFederated&&(0,y.updateFederatedAnnotations)(t.formTemplate)},t.optionRenderer=function(e){return m.default.createElement("div",{className:g.default.option},m.default.createElement("div",null,e.label),m.default.createElement("p",null,e.desc))},t.state={mode:(0,f.default)(t.formTemplate,"spec.type","ClusterIP")},t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.state.mode;return m.default.createElement(m.default.Fragment,null,m.default.createElement(h.Form.Item,{label:t("ACCESS_MODE")},m.default.createElement(h.Select,{name:"Service.".concat(this.fedPreifx,"spec.type"),options:this.accessModes,onChange:this.handleAccessModeChange,optionRenderer:this.optionRenderer,placeholder:" "})),"LoadBalancer"===e&&m.default.createElement(h.Form.Item,{label:t("ANNOTATION_PL")},m.default.createElement(v.default,{name:"Service.metadata.annotations",hiddenKeys:globals.config.preservedAnnotations,onChange:this.handleAnnotationsChange,addText:t("ADD")})))}},{key:"fedPreifx",get:function(){return this.props.isFederated?"spec.template.":""}},{key:"formTemplate",get:function(){return this.props.formTemplate.Service}},{key:"accessModes",get:function(){return[{label:"NodePort",desc:t("ACCESS_NODEPORT_TIP"),value:"NodePort"},{label:"LoadBalancer",desc:t("ACCESS_LOADBALANCER_TIP"),value:"LoadBalancer"}]}}]),r}(m.default.Component);a.default=O},function(e,t,a){e.exports={wrapper:"_2pH3aKpsJmfSUG9AkU_3sQ",title:"_2_hRpdznpkWKgwNsNJab8l",contentWrapper:"_2Qz_qVWoU8keAi35n2vEV7",option:"_2rHThCKcKgiOycy9JMoz8D"}},function(e,t,a){e.exports={wrapper:"_3AXbBgab3cgu3MkpHMsT2n"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=n(r(16)),v=r(25),y=n(r(826)),g=n(r(736)),b=n(r(1782)),E=n(r(1242));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=S(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).handleTypeChange=function(e){t.setState({type:e},(function(){t.store.setModule(t.state.type),t.fetchData()}))},t.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.props,r=a.cluster,n=a.namespace;t.store.fetchList(O({cluster:r,namespace:n},e))},t.handleSelect=function(e){t.setState({selectItem:e})},t.handleCancel=function(){t.setState({selectItem:{}},(function(){t.props.onCancel()}))},t.handleOK=function(){var e=t.props.onSelect,a=t.state.selectItem;e((0,h.default)(a,"_originData.spec.template.metadata.labels",{}))},t.state={type:"deployments",selectItem:{}},t.store=new g.default(t.state.type),t}return(0,i.default)(r,[{key:"render",value:function(){var e=this,a=this.state,r=a.type,n=a.selectItem,l=(0,p.toJS)(this.store.list),u=l.data,o=l.total,i=l.page,c=l.isLoading;return d.default.createElement("div",null,d.default.createElement("div",{className:E.default.body},d.default.createElement(v.Alert,{className:"margin-b8",message:t("SELECT_WORKLOAD_DESC"),hideIcon:!0}),d.default.createElement(v.RadioGroup,{mode:"button",buttonWidth:120,value:r,onChange:this.handleTypeChange,size:"small"},d.default.createElement(v.RadioButton,{value:"deployments"},t("DEPLOYMENT_PL")),d.default.createElement(v.RadioButton,{value:"statefulsets"},t("STATEFULSET_PL")),d.default.createElement(v.RadioButton,{value:"daemonsets"},t("DAEMONSET_PL"))),d.default.createElement("div",{className:E.default.workloads},d.default.createElement(y.default,{data:u,total:o,page:i,loading:c,onFetch:this.fetchData},u.map((function(t,a){return d.default.createElement(b.default,{key:"".concat(t.uid).concat(a),module:r,detail:t,onClick:e.handleSelect,selected:n.uid===t.uid})}))))),d.default.createElement("div",{className:E.default.footer},d.default.createElement(v.Button,{onClick:this.handleCancel},t("CANCEL")),d.default.createElement(v.Button,{type:"control",onClick:this.handleOK},t("OK"))))}}]),r}(d.default.Component))||l;a.default=k},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=r(a(3)),d=a(25),p=a(58),m=r(a(1242));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(a,e);var t=h(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).handleClick=function(){var t=e.props;(0,t.onClick)(t.detail)},e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.module,a=e.detail,r=e.selected;return s.default.createElement("div",{className:(0,f.default)(m.default.item,(0,n.default)({},m.default.selected,r)),onClick:this.handleClick},s.default.createElement(d.Icon,{name:p.ICON_TYPES[t],size:16}),s.default.createElement("div",{className:m.default.ring}),s.default.createElement("span",{className:m.default.name},a.name))}}]),a}(s.default.Component);t.default=v},function(e,t,a){e.exports={wrapper:"_3SwR0SuHuSsPuA0jJpOBPl",alert:"_3OIbx3jb-Xcw2_zGwbSVTa",workload:"iNzx3A8fToix-mv6jI8bV",popper:"_3bnXtp2btwuygkkNrJPwJ"}},function(e,t,a){e.exports={wrapper:"_34R_lgrNP8LcNIcdanbUVA",contentWrapper:"_3EQRY2giqeAOxojq9y5tM9",card:"_3es2K3jnKmjaz4Xv7sEGT2",tabs:"_15Rw2mm_X1tCeewUi8bp0K",label:"_3ZBGR0gdNzYoJ4aZ_OGn5H"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(16)),p=n(r(73)),m=r(25),h=n(r(636)),v=r(37),y=n(r(733)),g=r(58),b=n(r(1786));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,o.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).getValue=function(){var t=e.props.formTemplate;return(0,d.default)(t,"StatefulSet")?"stateful":"stateless"},e.handleChange=function(t){e.setTemplate(t),e.forceUpdate()},e.setTemplate=function(t){var a=e.props.formTemplate;if(t!==(a.Deployment?"stateless":"stateful")){var r="stateless"===t?"deployments":"statefulsets",n="stateless"===t?"statefulsets":"deployments",l=g.MODULE_KIND_MAP[r],u=g.MODULE_KIND_MAP[n];e.props.store.setModule(r),e.props.updateModule(r);var o=(0,d.default)(a[u],"metadata"),i=(0,d.default)(a[u],"metadata.labels");(0,p.default)(a,l,y.default[r]({namespace:e.namespace})),o&&(0,p.default)(a,"".concat(l,".metadata"),o),(0,v.updateLabels)(a,r,i),delete a[u]}},e}return(0,u.default)(r,[{key:"render",value:function(){var e=[{icon:"backup",value:"stateful",label:t("STATEFUL_SERVICE"),description:t("STATEFUL_SERVICE_DESC")},{icon:"backup",value:"stateless",label:t("STATELESS_SERVICE"),description:t("STATELESS_SERVICE_DESC")}];return s.default.createElement(m.Form.Item,{className:b.default.formItem,label:t("SERVICE_TYPE")},s.default.createElement(h.default,{value:this.getValue(),options:e,onChange:this.handleChange}))}},{key:"namespace",get:function(){var e=this.props.formTemplate;return(0,d.default)(e,"Service.metadata.namespace","")}}]),r}(s.default.Component);a.default=_,_.propTypes={formTemplate:f.default.object}},function(e,t,a){e.exports={formItem:"_21Ebxs_-5Vx30gVGleIZ3L"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(16)),f=n(r(0)),d=n(r(1)),p=r(25),m=n(r(1244)),h=n(r(774));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t){var a=e.props.options,r=(0,s.default)(t,"name"),n=a.find((function(e){return e.key===r}));e.key!==r&&(t.value=(0,s.default)(n,"defaultValue","")),e.props.onChange(t),e.key=r},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.value,r=e.options;return f.default.createElement(h.default,{value:a,onChange:this.handleChange},f.default.createElement(p.Select,{name:"name",placeholder:t("KEY"),options:r}),"boolean"===this.valueType?f.default.createElement(m.default,{name:"value",placeholder:t("VALUE")}):f.default.createElement(p.Input,{name:"value",placeholder:t("VALUE")}))}},{key:"valueType",get:function(){var e=this.props,t=e.value,a=e.options,r=(0,s.default)(t,"name",""),n=a.find((function(e){return e.key===r}));return(0,s.default)(n,"type","string")}}]),r}(f.default.Component);a.default=y,y.propTypes={value:d.default.object,onChange:d.default.func,configMaps:d.default.array,secrets:d.default.array},y.defaultProps={value:{},onChange:function(){}}},function(e,t,a){e.exports={form:"_37rWu7ume662oGX0oNnio2",leftIcon:"_1hPE6IIx1eMcOjWo-NtnN-",loading:"_1e2aJ7aME3Rpx0tC2QpB6I"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(49)),o=n(r(50)),i=n(r(21)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(25),v=n(r(878)),y=n(r(299)),g=n(r(16)),b=n(r(73)),E=n(r(3)),_=r(37),O=r(58),S=n(r(823)),k=n(r(1794));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P={"x-kubernetes-action":"post","x-kubernetes-group-version-kind":'{"group":"devops.kubesphere.io","version":"v1alpha1","kind":"S2iBinary"}'},D=function(e){(0,f.default)(r,e);var a=w(r);function r(e){var n;(0,c.default)(this,r),(n=a.call(this,e)).formatFileName=function(e){return n.binaryName=e.toLowerCase().replace(/([^a-zA-Z0-9])/g,"-")+Math.random().toString(36).slice(-4),n.binaryName},n.setFileStatus=function(e,t){n.setState((function(a){return{files:R(R({},a.files),{},(0,i.default)({},e,R(R({},a.files[e]),t)))}}))},n.getUploadUrl=function(){return"/kapis/devops.kubesphere.io/v1alpha2".concat(n.store.getPath({namespace:n.props.namespace,cluster:n.props.cluster}),"/s2ibinaries/").concat(n.binaryName,"/file")},n.beforeUploadHandler=function(){var e=(0,o.default)(u.default.mark((function e(a){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if([a.name.slice(a.name.lastIndexOf(".")+1),"binary",""].includes(n.filesType)){e.next=4;break}return h.Notify.error(t("WRONG_FILE_EXTENSION_NAME",{type:n.filesType})),e.abrupt("return",Promise.reject(t("WRONG_FILE_EXTENSION_NAME",{type:n.filesType})));case 4:return e.next=6,n.store.creatBinary(n.formatFileName(a.name),n.props.namespace,n.props.cluster);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.startHandler=function(e){n.setFileStatus(e.uid,{size:e.size,name:e.name,showProgress:!0,showFile:!1,percentage:0,status:"active"})},n.progressHandler=function(e,t){var a=(0,y.default)(e.percent)?Math.round(e.percent):0;n.setFileStatus(t.uid,{size:t.size,percentage:100===a?99:a,status:"active"})},n.successHandler=function(e,a){var r={name:a.name,size:a.size,showProgress:!1,showFile:!0,percentage:100,status:"active"};n.setFileStatus(a.uid,r),n.props.onChange((0,g.default)(e,"spec.downloadURL")),(0,b.default)(n.props.formTemplate,'metadata.annotations.["kubesphere.io/file"]',JSON.stringify(r)),h.Notify.success({content:t("FILE_UPLOADED_TIP")}),n.props.uploadSuccess&&n.props.uploadSuccess()},n.errorHandler=function(e,a,r){n.setFileStatus(r.uid,{size:r.size,showProgress:!0,showFile:!1,status:"exception"}),h.Notify.error({content:t("UPLOAD_FAILED")})},n.handleReUpload=function(){Object.keys(n.state.files).forEach((function(e){n.uploader.abort(e)})),n.setState({files:{}}),n.props.onChange(""),n.uploader.onClick()},n.store=new S.default;var l={};return n.filesType&&"binary"!==n.filesType&&(l={accept:".".concat(n.filesType)}),n.uploaderProps=R(R({name:"s2ibinary",method:"put",action:n.getUploadUrl,multiple:!1,headers:P},l),{},{beforeUpload:n.beforeUploadHandler,onStart:n.startHandler,onSuccess:n.successHandler,onProgress:n.progressHandler,onError:n.errorHandler}),n.state={files:n.uploadedfile?{default:JSON.parse(n.uploadedfile)}:{}},n}return(0,s.default)(r,[{key:"renderProgress",value:function(e){var a=this.state.files[e];return m.default.createElement("div",{className:k.default.uploadingContent,key:e},m.default.createElement("p",{className:k.default.fileInfo},m.default.createElement("span",{className:k.default.fileName},a.name),m.default.createElement("span",{className:k.default.uploadText},t("UPLOAD_PERCENT",{percent:a.percentage})),m.default.createElement("span",{className:k.default.uploadText},t("FILE_SIZE",{size:(0,_.formatSize)(a.size)}))),m.default.createElement(h.Progress,{status:"primary",className:k.default.progress,percent:a.percentage,strokeWidth:8,key:e,showInfo:!1}))}},{key:"renderFileItem",value:function(e){var a=this.state.files[e];return m.default.createElement("div",{className:k.default.uploadingContent,key:e},m.default.createElement("p",{className:k.default.fileInfo},m.default.createElement("span",{className:k.default.fileName},a.name),m.default.createElement("span",{className:k.default.uploadText},t("UPLOAD_FULLY")),m.default.createElement("span",{className:k.default.uploadText},t("FILE_SIZE",{size:(0,_.formatSize)(a.size)}))),m.default.createElement(h.Progress,{status:"primary",className:k.default.progress,percent:100,strokeWidth:8,showInfo:!1}))}},{key:"render",value:function(){var e=this,a=this.state.files,r=Object.keys(a).length;return m.default.createElement("div",{className:k.default.container},m.default.createElement(v.default,(0,l.default)({},this.uploaderProps,{ref:function(t){e.uploader=t}}),m.default.createElement("div",{className:(0,E.default)(k.default.selectContainer,(0,i.default)({},k.default.none,r))},m.default.createElement(h.Icon,{className:k.default.icon,size:40,name:this.filesType,type:"coloured"}),m.default.createElement("p",{className:k.default.title},t("UPLOAD_ARTIFACT_FILE")),m.default.createElement("p",{className:k.default.desc},t("".concat(this.filesType.toUpperCase()||"B2I_DEFAULT","_DESC"))))),m.default.createElement("div",{className:(0,E.default)(k.default.uploadContainer,(0,i.default)({},k.default.none,!r))},m.default.createElement(h.Icon,{className:k.default.icon,size:40,name:this.filesType,type:"coloured"}),Object.keys(a).map((function(t){return a[t]?a[t].showProgress?e.renderProgress(t):a[t].showFile?e.renderFileItem(t):null:null})),m.default.createElement(h.Icon,{changeable:!0,name:"upload",onClick:this.handleReUpload,className:k.default.uploadIcon})))}},{key:"filesType",get:function(){var e=(0,g.default)(this.props.formTemplate,"metadata.annotations.languageType");return e&&O.B2I_SUPPORTED_TYPES.includes(e)?e:""}},{key:"uploadedfile",get:function(){return(0,g.default)(this.props.formTemplate,'metadata.annotations.["kubesphere.io/file"]')}}]),r}(m.default.Component);a.default=D},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(71)),u=n(a(109)),o=n(a(12)),i=n(a(13)),c=n(a(19)),s=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(1)),m=n(a(3)),h=n(a(298)),v=n(a(1791)),y=n(a(1792)),g=n(a(1793));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=+new Date,_=0;function O(){return _+=1,"upload-".concat(E,"-").concat(_)}var S=function(e){(0,c.default)(a,e);var t=b(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).reqs={},e.files={},e.state={uid:O(),isDraging:!1},e.onChange=function(t){var a=t.target.files;e.uploadFiles(a),e.reset()},e.onClick=function(){e.fileInput&&e.fileInput.click()},e.onKeyDown=function(t){"Enter"===t.key&&e.onClick()},e.onFileDrop=function(t){var a=e.props,r=a.directory,n=a.accept;if(t.preventDefault(),"dragover"!==t.type)if("dragleave"!==t.type){if("drop"===t.type){e.setState({isDraging:!1});var l=function(e){return(0,y.default)(e,n)};if(r)(0,g.default)((0,u.default)(t.dataTransfer.items),e.uploadFiles,l);else{var o=(0,u.default)(t.dataTransfer.files).filter(l);e.uploadFiles(o)}}}else e.setState({isDraging:!1});else e.setState({isDraging:!0})},e.uploadFiles=function(t){var a=(0,u.default)(t);a.forEach((function(t){var r=Object.assign(t,{uid:O()});e.upload(r,a)}))},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.uploaderMounted=!0}},{key:"componentWillUnmount",value:function(){this.uploaderMounted=!1,this.files={},this.abort()}},{key:"upload",value:function(e,t){var a=this,r=this.props.beforeUpload;if(!r)return setTimeout((function(){return a.post(e)}),0);var n=r(e,t);return n&&n.then?n.then((function(t){var r=Object.prototype.toString.call(t);return"[object File]"===r||"[object Blob]"===r?a.post(t):a.post(e)})):!1!==n&&setTimeout((function(){return a.post(e)}),0),!0}},{key:"post",value:function(e){var t=this;if(this.uploaderMounted){var a=this.props,r=a.data,n=a.onStart,l=a.onProgress,u=a.onSuccess,o=a.onError,i=a.action,c=a.customRequest,s=a.name,f=a.headers,d=a.withCredentials,p=a.method,m=r;"function"==typeof m&&(m=m(e)),new Promise((function(t){return t("function"==typeof i?i(e):i)})).then((function(a){var r=e.uid,i=c||v.default;t.files[r]=e,t.reqs[r]=i({file:e,headers:f,withCredentials:d,action:a,method:p,filename:s,data:m,onProgress:l?function(t){l(t,e)}:null,onSuccess:function(a,n){delete t.files[r],delete t.reqs[r],u(a,e,n)},onError:function(a,n){delete t.reqs[r],o(a,n,e)}}),n(e)}))}}},{key:"reset",value:function(){this.setState({uid:O()})}},{key:"resend",value:function(e){var t,a=this.props.accept,r=this.files[e];r&&(t=r,(0,y.default)(t,a))&&this.upload(r,[r])}},{key:"abort",value:function(e){var t=this.reqs;e?t[e]&&(t[e].abort(),delete t[e]):Object.keys(t).forEach((function(e){t[e]&&t[e].abort(),delete t[e]}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.disabled,n=t.style,u=t.multiple,o=t.accept,i=t.children,c=t.directory,s=this.state,f=s.isDraging,p=s.uid,h=r?{}:{onClick:this.onClick,onKeyDown:this.onKeyDown,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,onDragLeave:this.onFileDrop};return d.default.createElement("span",(0,l.default)({},h,{className:(0,m.default)("upload",{"upload-dragover":f,"upload-disabled":r},a),role:"button",style:n}),d.default.createElement("input",{type:"file",ref:function(t){e.fileInput=t},key:p,style:{display:"none"},accept:o,directory:c?"directory":null,webkitdirectory:c?"webkitdirectory":null,multiple:u,onChange:this.onChange}),i)}}]),a}(d.Component);S.propTypes={name:p.default.string,disabled:p.default.bool,action:p.default.oneOfType([p.default.string,p.default.func]),directory:p.default.bool,onError:p.default.func,onSuccess:p.default.func,onProgress:p.default.func,onStart:p.default.func,data:p.default.oneOfType([p.default.object,p.default.func]),headers:p.default.object,accept:p.default.string,multiple:p.default.bool,beforeUpload:p.default.func,customRequest:p.default.func,children:p.default.node,withCredentials:p.default.bool,style:p.default.object,className:p.default.string,method:p.default.string},S.defaultProps={data:{},headers:{},name:"file",method:"post",onStart:h.default,onError:h.default,onSuccess:h.default,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1};var k=S;t.default=k},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new window.XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var a=new FormData;e.action=(0,r.getClusterUrl)(e.action),e.data&&Object.keys(e.data).forEach((function(t){a.append(t,e.data[t])}));a.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(function(e,t){var a="cannot post ".concat(e.action," ").concat(t.status,"'"),r=new Error(a);return r.status=t.status,r.method=e.method||"post",r.url=e.action,r}(e,t),n(t)):e.onSuccess(n(t),t)},t.open(e.method||"post",e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var l=e.headers||{};null!==l["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest");return Object.keys(l).forEach((function(e){t.setRequestHeader(e,l[e])})),t.send(a),{abort:function(){t.abort()}}};var r=a(37);function n(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(e){return t}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t){if(e&&t){var a=Array.isArray(t)?t:t.split(","),r=e.name||"",n=e.type||"",l=n.replace(/\/.*$/,"");return a.some((function(e){var t,a,u=e.trim();return"."===u.charAt(0)?(t=r.toLowerCase(),a=u.toLowerCase(),-1!==t.indexOf(a,t.length-a.length)):/\/\*$/.test(u)?l===u.replace(/\/.*$/,""):n===u}))}return!0}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,a){e.forEach((function(e){!function e(r,n){var l=n||"";if(r.isFile)r.file((function(e){a(e)&&t([e])}));else if(r.isDirectory){r.createReader().readEntries((function(t){t.forEach((function(t){e(t,"".concat(l).concat(r.name,"/"))}))}))}}(e.webkitGetAsEntry())}))};t.default=r},function(e,t,a){e.exports={container:"_3Q2I8t-_0-xbht7HGEk-XV",selectContainer:"eTpjmfqI4pQrzHIKjelWy",icon:"_3x-lrd-9n_C8p3_YgZxk04",title:"_2tmR_fZS1e-9iKHmKkZ9BW",desc:"FXOj4Cenw51ZfuXDzb5RA",uploadContainer:"q0ATRWms9DZD5uj-6rHKr",uploadingContent:"_2Zv4mZTchwg5yIRbZFnuUk",fileInfo:"_1d0Aywj3HtDhBswHErXH68",fileName:"_1WqNWs49u_4z6umTtvRyoD",uploadText:"d5T4KyK4A4x4tGvEG2QWM",progress:"_2wAlivSGhybeLkz1DP5plS",uploadIcon:"_3nkK-7bZovC1bTZgWA1TeH",none:"_3YZ9-u8gSY40oOWN1VWq3X"}},function(e,t,a){e.exports={title:"_2POj-8syDYcwsOdcu8Tsf0",columns:"_1-bH8_7Ilw88rYJSmhqNPt",column:"_1OrC_yRd897lld7gcm4k2o",columsEdit:"GINt-JbgXARWRMsCfUXND",environment_info:"_3KXoN38iUTkMJSE5NJsy6g"}},function(e,t,a){e.exports={columns:"_2SXJvUesXt7AmRC6nJNQAF",column:"_12uxUwZ2LjuzR-zwQmw9U-",columsEdit:"_3Q05knFVLBVm6ZR4eG3Lbb",margin_b_10:"_3Z3e-WQ75YXJjOF6ZzTopO",disabled:"_1ox4oZY9Lu1kfVCJi7k7_H"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(136)),l=r(a(12)),u=r(a(13)),o=r(a(135)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(16)),d=r(a(73)),p=r(a(738)),m=r(a(32)),h=r(a(301)),v=r(a(291)),y=r(a(0)),g=a(58),b=r(a(904)),E=r(a(773)),_=a(25),O=r(a(1227)),S=r(a(1071)),k=r(a(1798));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var R=function(e){(0,i.default)(a,e);var t=C(a);function a(e){var r;return(0,l.default)(this,a),(r=t.call(this,e)).validator=function(e){r.handleContainer(),e&&e()},r.getReplicas=function(){return(0,f.default)(r.formTemplate,"spec.replicas")||1},r.handleReplicaChange=function(e){r.setState({replicas:e})},r.updatePullSecrets=function(e){var t={},a="".concat(r.prefix,"spec.imagePullSecrets");(0,f.default)(e,"".concat(r.prefix,"spec.containers"),[]).forEach((function(e){e.pullSecret&&(t[e.pullSecret]="")})),(0,d.default)(e,a,(0,m.default)(t)?null:Object.keys(t).map((function(e){return{name:e}})))},r.updateService=function(e){var t=r.props,a=t.formTemplate,n=t.module,l=(0,f.default)(e,"".concat(r.prefix,"spec.containers"),[]),u=[];l.forEach((function(e){e.ports&&e.ports.forEach((function(e){e.servicePort&&u.push({name:e.name,protocol:e.protocol,port:e.servicePort,targetPort:e.containerPort})}))})),(0,d.default)(a,"Service.spec.ports",u);var o=(0,f.default)(e,"metadata.labels",{}),i=(0,f.default)(e,"".concat(r.prefix,"metadata.labels"),{});(0,d.default)(a,"Service.metadata.labels",o),(0,d.default)(a,"Service.spec.selector",i),"StatefulSet"===n?(0,d.default)(a,"Service.spec.clusterIP","None"):(0,p.default)(a,"Service.spec.clusterIP")},r.state={showContainer:!1,selectContainer:{},configMaps:[],secrets:[],replicas:r.getReplicas()},r.configMapStore=new b.default,r.secretStore=new E.default,r.handleContainer=r.handleContainer.bind((0,o.default)(r)),r}return(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.formRef;this.fetchData(),this.props.withService&&this.initService(this.formTemplate),e.current.setCustomValidator(this.validator)}},{key:"initService",value:function(){var e=(0,f.default)(this.formTemplate,"metadata.name"),t=(0,f.default)(this.props.formTemplate,"Service.metadata.name");e&&!t&&(t="".concat(e,"-service"),(0,d.default)(this.props.formTemplate,"Service.metadata.name",t),(0,d.default)(this.formTemplate,"spec.serviceName",t))}},{key:"fetchData",value:function(){var e=this,t=this.props.cluster,a=(0,f.default)(this.formTemplate,"metadata.namespace");Promise.all([this.configMapStore.fetchListByK8s({cluster:t,namespace:a}),this.secretStore.fetchListByK8s({cluster:t,namespace:a})]).then((function(t){var a=(0,n.default)(t,2),r=a[0],l=a[1];e.setState({configMaps:r,secrets:l})}))}},{key:"handleContainer",value:function(){var e=(0,f.default)(this.formTemplate,"".concat(this.prefix,"spec.containers[0]"));(0,v.default)(e,"resources.limits")&&(e.resources.limits=(0,h.default)(e.resources.limits,m.default)),this.updatePullSecrets(this.formTemplate),this.props.withService&&this.updateService(this.formTemplate)}},{key:"renderContainerForm",value:function(){var e=this.props,t=e.withService,a=e.cluster,r=e.module,n=this.state,l=n.configMaps,u=n.secrets;return y.default.createElement(k.default,{module:r,cluster:a,namespace:this.namespace,data:this.formTemplate,configMaps:l,secrets:u,withService:t})}},{key:"renderReplicasControl",value:function(){return y.default.createElement("div",{className:"margin-b12"},y.default.createElement(O.default,{template:this.formTemplate,onChange:this.handleReplicaChange}))}},{key:"renderUpdateStrategy",value:function(){var e=this.props,t=e.formRef,a=e.module,r=this.state.replicas;return y.default.createElement("div",{className:"margin-t12"},y.default.createElement(S.default,{formRef:t,module:a,data:this.formTemplate,replicas:r}))}},{key:"render",value:function(){var e=this.props.formRef;return y.default.createElement(_.Form,{data:this.formTemplate,ref:e},this.renderReplicasControl(),this.renderContainerForm(),this.renderUpdateStrategy())}},{key:"prefix",get:function(){return this.props.prefix||"spec.template."}},{key:"namespace",get:function(){return(0,f.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,g.MODULE_KIND_MAP[a],t)}}]),a}(y.default.Component);t.default=R},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=r(a(3)),d=r(a(993)),p=r(a(1229)),m=r(a(1068)),h=r(a(1230)),v=r(a(1231)),y=r(a(1799)),g=r(a(1801));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var E=function(e){(0,u.default)(a,e);var t=b(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).formRef=c.default.createRef(),r}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.data,r=e.configMaps,n=e.secrets,l=e.cluster,u=e.namespace,o=e.withService,i="spec.template.spec.containers[0]";return c.default.createElement("div",{className:(0,f.default)(g.default.wrapper,t)},c.default.createElement(y.default,{prefix:i,cluster:l,namespace:u,data:a}),c.default.createElement(d.default,{prefix:i,withService:o}),c.default.createElement(h.default,{prefix:i}),this.supportProbe&&c.default.createElement(v.default,{prefix:i}),c.default.createElement(p.default,{prefix:i}),c.default.createElement(m.default,{prefix:i,configMaps:r,secrets:n}))}},{key:"supportProbe",get:function(){return["deployments","daemonsets","statefulsets"].includes(this.props.module)}}]),a}(c.default.Component);t.default=E,E.propTypes={className:s.default.string,type:s.default.string,titlePrefix:s.default.string,namespace:s.default.string,module:s.default.string,data:s.default.object,onSave:s.default.func,onCancel:s.default.func,configMaps:s.default.array,secrets:s.default.array},E.defaultProps={className:"",namespace:"",module:"",data:{},onSave:function(){},onCancel:function(){},configMaps:[],secrets:[]},E.contextTypes={registerSubRoute:s.default.func,resetSubRoute:s.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(16)),d=n(r(32)),p=r(5),m=r(37),h=r(58),v=r(25),y=n(r(872)),g=n(r(903)),b=n(r(811)),E=n(r(753)),_=n(r(773)),O=n(r(1800));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var k=function(e){(0,o.default)(r,e);var a=S(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).state={quota:{},limitRange:{},imageRegistries:[]},t.quotaStore=new b.default,t.projectStore=new E.default,t.secretStore=new _.default,t}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this,t=this.props,a=t.cluster,r=t.namespace;Promise.all([this.quotaStore.fetch({cluster:a,namespace:r}),this.projectStore.fetchLimitRanges({cluster:a,namespace:r}),this.secretStore.fetchListByK8s({cluster:a,namespace:r,fieldSelector:"type=kubernetes.io/dockerconfigjson"})]).then((function(){e.setState({quota:e.quotaStore.data,limitRange:(0,f.default)((0,p.toJS)(e.projectStore.limitRanges),"data[0].limit"),imageRegistries:e.secretStore.list.data})}))}},{key:"renderAdvancedSettings",value:function(){var e=this.state.quota,a=(0,f.default)(e,'left["requests.cpu"]'),r=(0,f.default)(e,'left["requests.memory"]'),n=(0,f.default)(e,'left["limits.cpu"]'),l=(0,f.default)(e,'left["limits.memory"]'),u=s.default.createElement("div",{className:O.default.message},t("Remaining Quota"),":    [",t("Resource Request"),": CPU"," ",a?"".concat((0,m.cpuFormat)(a)," Core"):t("NO_LIMIT"),","," ",t("MEMORY")," ",r?"".concat((0,m.memoryFormat)(r)," Mi"):t("NO_LIMIT"),"]    [",t("Resource Limit"),": CPU"," ",n?"".concat((0,m.cpuFormat)(n)," Core"):t("NO_LIMIT"),","," ",t("MEMORY")," ",l?"".concat((0,m.memoryFormat)(l)," Mi"):t("NO_LIMIT"),"]"),o=this.defaultResourceLimit;return s.default.createElement(g.default,{defaultShow:(0,d.default)(o)},s.default.createElement(s.default.Fragment,null,s.default.createElement(v.Alert,{className:"margin-b12",type:"info",message:t("CONTAINER_RESOURCE_LIMIT_TIP")}),s.default.createElement(v.Form.Item,null,s.default.createElement(y.default,{name:"".concat(this.prefix,"resources"),defaultValue:o})),u))}},{key:"render",value:function(){return s.default.createElement(v.Form.Group,{label:t("CONTAINER_SETTINGS"),desc:t("CONTAINER_SETTINGS_DESC"),noWrapper:!0},s.default.createElement(v.Form.Item,{className:"margin-t12",label:t("CONTAINER_NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:h.PATTERN_NAME,message:t("INVALID_NAME_DESC")}]},s.default.createElement(v.Input,{name:"".concat(this.prefix,"name"),defaultValue:"container-".concat((0,m.generateId)()),maxLength:63})),this.renderAdvancedSettings())}},{key:"prefix",get:function(){var e=this.props.prefix;return e?"".concat(e,"."):""}},{key:"defaultResourceLimit",get:function(){var e=this.state.limitRange,t=void 0===e?{}:e;if(t.defaultRequest||t.default)return{requests:t.defaultRequest||{},limits:t.default||{}}}},{key:"imageRegistries",get:function(){return this.state.imageRegistries.map((function(e){var t=(0,f.default)(e,'data[".dockerconfigjson"].auths',{}),a=Object.keys(t)[0]||"";return{url:a,username:(0,f.default)(t[a],"username"),label:e.name,value:e.name}}))}}]),r}(s.default.Component);a.default=k,k.defaultProps={prefix:""}},function(e,t,a){e.exports={message:"_1maRbFP822q-RsoCeYT9qM"}},function(e,t,a){e.exports={message:"Q7T7JQ7wVTTNPELxGXy6P"}},function(e,t,a){e.exports={body:"_1522q2VQrNvheD4sjrcWfn",header:"_22roWla7-Lucy7tpJCRdGc",groups:"_7DVUxipFFkP4PyzSPBZOC",group:"_3lFfW-rrthHlt07t06220v",title:"_3FAKE6kc9jDoAitmUBoa3I"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(275)),p=n(r(1804)),m=n(r(1246));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleAdd=function(){e.props.onAdd()},e}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this.props,a=e.data,r=e.clusters,n=e.onAdd,l=e.onDelete;return s.default.createElement("div",null,Object.keys(a).map((function(e){return s.default.createElement(p.default,{key:e,data:a[e],clusters:r,propsKey:e,onEdit:n,onDelete:l})})),s.default.createElement("div",{className:m.default.add,onClick:this.handleAdd},s.default.createElement(d.default,{title:t("CREATE_SERVICE"),description:t("APP_CREATE_SERVICE_DESC")})))}},{key:"render",value:function(){var e=this.props.error;return s.default.createElement("div",{className:m.default.wrapper},this.renderContent(),e&&s.default.createElement("p",{className:m.default.error},e))}}]),r}(s.default.Component);a.default=v,v.propTypes={data:f.default.object,onAdd:f.default.func,onDelete:f.default.func},v.defaultProps={data:{},onAdd:function(){},onDelete:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(16)),f=n(r(290)),d=n(r(32)),p=n(r(990)),m=n(r(0)),h=n(r(1)),v=r(25),y=r(58),g=n(r(1805)),b=n(r(1246));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,o.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleEdit=function(){e.props.onEdit(e.props.propsKey)},e.handleDelete=function(){e.props.onDelete(e.props.propsKey)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.data,r=e.clusters,n=(0,s.default)(a,"workload.kind").replace("Federated",""),l=(0,p.default)(y.MODULE_KIND_MAP,(function(e){return e===n}))||"deployments",u=(0,f.default)(r,"name"),o=(0,s.default)(a,"workload.spec.placement.clusters",[]).map((function(e){return u[e.name]})),i=(0,s.default)(a,"workload.spec.overrides",[]);return m.default.createElement("div",{className:b.default.item},m.default.createElement("div",{className:b.default.icon},m.default.createElement(v.Icon,{name:y.ICON_TYPES[l],size:40})),m.default.createElement("div",{className:b.default.texts},m.default.createElement("div",{className:b.default.text},m.default.createElement("div",{className:b.default.title},(0,s.default)(a,"service.metadata.name","-")),m.default.createElement("div",{className:b.default.description},"deployments"===l?t("STATELESS_SERVICE"):t("STATEFUL_SERVICE")))),!(0,d.default)(o)&&m.default.createElement("div",{className:b.default.clusters},m.default.createElement("div",{className:b.default.text},m.default.createElement("div",{className:b.default.title},r.map((function(e){var r=(0,s.default)(a,"workload.spec.template.spec.replicas");return r=(((i.find((function(t){return t.clusterName===e.name}))||{}).clusterOverrides||[]).find((function(e){return"/spec/replicas"===e.path}))||{}).value||r,m.default.createElement(v.Tag,{key:e.name,type:y.CLUSTER_GROUP_TAG_TYPE[e.group]},m.default.createElement(v.Icon,{name:y.CLUSTER_PROVIDER_ICON[e.provider]||"kubernetes",size:16,type:"light"}),m.default.createElement("span",null,r," ",1===r?t("REPLICA_LOW_SI"):t("REPLICA_LOW_PL")))}))))),!(0,d.default)(i)&&m.default.createElement("div",{className:b.default.overrides},m.default.createElement(g.default,{overrides:i,clusters:r,workload:(0,s.default)(a,"workload")})),m.default.createElement("div",{className:"buttons"},m.default.createElement(v.Button,{type:"flat",icon:"trash",onClick:this.handleDelete}),m.default.createElement(v.Button,{type:"flat",icon:"pen",onClick:this.handleEdit})))}}]),r}(m.default.Component);a.default=_,_.propTypes={data:h.default.shape({workload:h.default.object,service:h.default.object}),propsKey:h.default.string,onEdit:h.default.func,onDelete:h.default.func},_.defaultProps={data:{workload:{},service:{}},propsKey:"",onEdit:function(){},onDelete:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1806)),p=n(r(1808)),m=n(r(1810)),h=n(r(1812)),v=n(r(1814));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=y(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.workload,r=e.clusters,n=e.overrides;return f.default.createElement("div",null,this.showContainerSettings&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:v.default.title},t("CONTAINER_IMAGE")),f.default.createElement(d.default,{clusters:r,overrides:n},(function(e){return f.default.createElement(p.default,(0,l.default)({formTemplate:a},e),(function(e){return f.default.createElement(m.default,e)}))}))),this.showServiceSettings&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:v.default.title},t("SERVICE_SETTINGS")),f.default.createElement(d.default,{clusters:r,overrides:n},(function(e){return f.default.createElement(p.default,(0,l.default)({formTemplate:a},e),(function(e){return f.default.createElement(h.default,e)}))}))))}},{key:"showContainerSettings",get:function(){return this.props.overrides.some((function(e){return e.clusterOverrides.some((function(e){return-1!==e.path.indexOf("image")}))}))}},{key:"showServiceSettings",get:function(){return this.props.overrides.some((function(e){return e.clusterOverrides.some((function(e){return-1!==e.path.indexOf("ports")}))}))}}]),r}(f.default.Component);a.default=g},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(12)),o=n(a(13)),i=n(a(19)),c=n(a(20)),s=n(a(18)),f=r(a(0)),d=n(a(3)),p=a(25),m=n(a(1807));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,i.default)(a,e);var t=h(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).isOverride=function(t){var a=e.props.overrides;return!!a&&a.some((function(e){return e.clusterName===t}))},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.clusters,r=t.children;return f.default.createElement("div",{className:m.default.wrapper},a.map((function(t){var a=t.name,n=e.isOverride(a);return f.default.createElement("div",{key:a,className:(0,d.default)(m.default.cluster,(0,l.default)({},m.default.selected,n))},f.default.createElement("div",{className:m.default.title},f.default.createElement(p.Icon,{name:"kubernetes",type:"light",size:20}),f.default.createElement("span",null,a)),f.default.createElement("div",null,r({cluster:a,selected:n})))})))}}]),a}(f.Component);t.default=v},function(e,t,a){e.exports={wrapper:"_1wLt46njNrKUYCA0_Kb9Ds",cluster:"_1zJWl80ccwHSc29VC-NXaV",title:"_QKPUwYLbxJ6E0sm4Vu1h",selected:"ISHnSF2s8Mm8Siwk2r3Dq"}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(12)),o=n(a(13)),i=n(a(19)),c=n(a(20)),s=n(a(18)),f=n(a(16)),d=n(a(73)),p=n(a(185)),m=n(a(32)),h=r(a(0)),v=n(a(3)),y=n(a(1809));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,i.default)(a,e);var t=E(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).renderContainer=function(t,a,r){var n=e.props,u=n.children,o=n.selected,i=e.getContainer({container:t,index:a,containerType:r});return h.default.createElement("div",{key:t.name,className:(0,v.default)(y.default.wrapper,(0,l.default)({},y.default.selected,o))},u(b(b({},e.props),{},{index:a,key:a,containerType:"worker",container:i})))},e}return(0,o.default)(a,[{key:"getContainer",value:function(e){var t=e.index,a=e.container,r=e.containerType,n=this.props,l=n.cluster,u=n.formTemplate,o=(0,f.default)(u,"spec.overrides",[]).find((function(e){return e.clusterName===l}))||{},i=(0,p.default)(a),c="/spec/template/spec/".concat("init"===r?"init_containers":"containers","/").concat(t,"/");return o&&!(0,m.default)(o.clusterOverrides)&&o.clusterOverrides.forEach((function(e){if(e.path.startsWith(c)){var t=e.path.replace(c,"").replace(/\//g,".");(0,d.default)(i,t,e.value)}})),i}},{key:"render",value:function(){var e=this,t=this.props.formTemplate,a=(0,f.default)(t,"spec.template.spec.containers",[]),r=(0,f.default)(t,"spec.template.spec.init_containers",[]);return h.default.createElement(h.default.Fragment,null,a.map((function(t,a){return e.renderContainer(t,a,"worker")})),r.map((function(t,a){return e.renderContainer(t,a,"init")})))}}]),a}(h.Component);t.default=_},function(e,t,a){e.exports={wrapper:"_3EB1IXHgnOWEOj1c9bix-b",selected:"_9BCZPwc7mp0mmKKeo5peO"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=r(25),p=l(r(1811));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,i.default)(r,e);var a=m(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.container,r=e.selected,n=e.key;return f.default.createElement("div",{key:n},f.default.createElement("span",null,t("IMAGE_VALUE",{value:a.image})),r&&f.default.createElement("span",{className:p.default.modify},f.default.createElement("span",null,t("EDIT")),f.default.createElement(d.Icon,{type:"light",size:20,name:"chevron-down"})))}}]),r}(f.Component);a.default=h},function(e,t,a){e.exports={form:"_2hy0WFJube2Ge67LayHPad",formContent:"MAzpQCErhaYc-kNK-Bws7",modify:"_23cD0-z-4ZjGijKI818LPa",confirm:"_27iz_EqTS9cLCcDuILdWHu"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=l(r(1813));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,i.default)(r,e);var a=p(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.container;return f.default.createElement("div",null,f.default.createElement("div",null,t("IMAGE_VALUE",{value:e.image})),e.ports&&e.ports.map((function(e,a){return f.default.createElement("div",{key:a,className:d.default.port},f.default.createElement("span",null,t("PROTOCOL_VALUE",{value:e.protocol})),f.default.createElement("span",null,t("NAME_VALUE",{value:e.name})),f.default.createElement("span",null,t("CONTAINER_PORT_VALUE",{value:e.containerPort})),f.default.createElement("span",null,t("SERVICE_PORT_VALUE",{value:e.servicePort})))})))}}]),r}(f.Component);a.default=m},function(e,t,a){e.exports={form:"_1OBSaQybPIvLBb8wlfoxBH",formContent:"ga_h0YjZskSThrlzJyPPD",port:"_1BtgzPQYfQhvaZVF6CWSRw",modify:"_3c_PtwIa9Q5gq-Agmce1hB",confirm:"_1f77Twkv8BROyAb7Hpyhf9"}},function(e,t,a){e.exports={title:"_3reC9Z1bvOCW5M2WmF-2rE"}},function(e,t,a){e.exports={wrapper:"_15JKm9y5qBhq__R_V0SWwg",step:"zfZQWsOAykNahSKCSdRFk",title:"_1UlvgcR-RpZuMu-F2cjMhL",components:"ihdIrbbZ7K4siwoxkBvJx"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(16)),f=n(r(73)),d=n(r(190)),p=n(r(32)),m=n(r(0)),h=r(5),v=n(r(773)),y=n(r(737)),g=r(37),b=n(r(186)),E=n(r(1817)),_=n(r(1819)),O=n(r(1820));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var k=function(e){(0,o.default)(r,e);var a=S(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).showAdd=function(e){t.setState({showAdd:!0,selectRuleIndex:e})},t.hideAdd=function(){t.setState({showAdd:!1,selectRuleIndex:-1})},t.updateName=function(){var e=t.props.formData,a=t.state.ingress,r=(0,s.default)(e,"application.metadata.name");(0,s.default)(a,"metadata.name")||(0,f.default)(a,"metadata.name","".concat(r,"-ingress-").concat((0,g.generateId)()))},t.updateAnnotations=function(){var e=t.props,a=e.formData,r=e.isFederated,n=e.isGovernance,l=t.state.ingress,u=(0,s.default)(a,"application.metadata.namespace");if(n){var o=r?(0,s.default)(l,"spec.template"):l,i=(0,s.default)(o,"spec.rules[0].http.paths[0].backend.service.name");i&&(0,f.default)(o,'metadata.annotations["nginx.ingress.kubernetes.io/upstream-vhost"]',"".concat(i,".").concat(u,".svc.cluster.local"))}},t.handleAdd=function(e){var a=t.props.isFederated,r=t.state,n=r.ingress,l=r.selectRuleIndex,u=a?(0,s.default)(n,"spec.template"):n,o=(0,s.default)(u,"spec.rules",[]);l>=0?o[l]=e:o.push(e),(0,f.default)(u,"spec.rules",o),t.updateTLS(u),t.updateAnnotations(),a&&t.updateOverrides(),t.hideAdd()},t.handleDelete=function(e){var a=t.props.isFederated,r=t.state.ingress,n=a?(0,s.default)(r,"spec.template"):r,l=(0,s.default)(n,"spec.rules",[]);l.splice(e,1),(0,f.default)(n,"spec.rules",l),t.updateTLS(n),t.updateAnnotations(),a&&t.updateOverrides(),t.hideAdd()},t.mapper=e.isFederated?b.default.federated(b.default.services):b.default.services,t.secretStore=new v.default,e.isFederated&&(t.secretStore=new y.default({module:t.secretStore.module})),t.state={ingress:(0,s.default)(t.props.formData,"ingress",{}),services:Object.values((0,d.default)(t.props.formData,["application","ingress"])||{}).map((function(e){return t.mapper(e.service)})),showAdd:!1,selectRuleIndex:-1},t}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cluster,a=e.namespace;this.secretStore.fetchList({namespace:a,cluster:t,limit:-1}),this.updateName()}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.formData!==e.formData&&(this.setState({ingress:(0,s.default)(this.props.formData,"ingress",{}),services:Object.values((0,d.default)(this.props.formData,["application","ingress"])||{}).map((function(e){return t.mapper(e.service)}))}),this.updateName())}},{key:"validate",value:function(e){e&&e()}},{key:"updateTLS",value:function(e){var t=(0,s.default)(e,"spec.rules",[]).filter((function(e){return"https"===e.protocol&&e.secretName})).reduce((function(e,t){var a=t.secretName,r=t.host,n=t.clusters,l=e.find((function(e){return e.secretName===a}));return l?(l.hosts=l.hosts||[],-1===l.hosts.indexOf(r)&&l.hosts.push(r)):e.push({hosts:[r],secretName:a,clusters:n}),e}),[]);(0,f.default)(e,"spec.tls",t)}},{key:"updateOverrides",value:function(){var e=[],t=this.props,a=t.isFederated,r=t.projectDetail,n=this.state.ingress,l=a?(0,s.default)(n,"spec.template"):n,u=(0,s.default)(l,"metadata.annotations",[]),o=(0,s.default)(l,"spec.rules",[]),i=(0,s.default)(l,"spec.tls",[]);(0,s.default)(r,"clusters",[]).forEach((function(t){var a=function(e){return e.filter((function(e){return e.clusters.includes(t.name)})).map((function(e){return(0,d.default)(e,"clusters")}))},r=[{path:"/spec/rules",value:a(o)},{path:"/spec/tls",value:a(i)}];(0,p.default)(u)||r.unshift({path:"/metadata/annotations",value:u}),e.push({clusterName:t.name,clusterOverrides:r})})),(0,f.default)(n,"spec.overrides",e)}},{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.gateway,l=e.isFederated,u=e.projectDetail,o=this.state,i=o.showAdd,c=o.ingress,f=o.services,d=o.selectRuleIndex,p=l?(0,s.default)(c,"spec.template"):c,v=(0,s.default)(p,"spec.rules[".concat(d,"]"),{}),y=(0,h.toJS)(this.secretStore.list.data);return m.default.createElement("div",{className:O.default.wrapper},m.default.createElement("div",{className:O.default.step},m.default.createElement("div",null,t("ROUTE_SETTINGS")),m.default.createElement("p",null,t("ROUTE_SETTINGS_DESC"))),m.default.createElement("div",{className:O.default.title},t("ROUTING_RULES")),m.default.createElement("div",{className:O.default.rules},m.default.createElement(E.default,{data:p,gateway:n,isFederated:l,projectDetail:u,onAdd:this.showAdd,onDelete:this.handleDelete})),m.default.createElement(_.default,{visible:i,data:v,cluster:a,namespace:r,isFederated:l,projectDetail:u,onOk:this.handleAdd,onCancel:this.hideAdd,gateway:n,services:f,secrets:y}))}}]),r}(m.default.Component);a.default=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(16)),p=n(r(275)),m=n(r(1209)),h=n(r(1818));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleAdd=function(){e.props.onAdd()},e}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this.props,a=e.data,r=e.onAdd,n=e.onDelete,l=e.projectDetail,u=(0,d.default)(a,"spec.rules",[]),o=(0,d.default)(a,"spec.tls",[]);return s.default.createElement("ul",null,u.filter((function(e){return e.host})).map((function(e,t){return s.default.createElement(m.default,{key:"".concat(e.host,"-").concat(t),rule:e,tls:o,index:t,onEdit:r,onDelete:n,projectDetail:l})})),s.default.createElement("div",{className:h.default.add,onClick:this.handleAdd},s.default.createElement(p.default,{title:t("ADD_ROUTING_RULE"),description:t("ADD_ROUTING_RULE_DESC")})))}},{key:"render",value:function(){var e=this.props.error;return s.default.createElement("div",{className:h.default.wrapper},this.renderContent(),e&&s.default.createElement("p",{className:h.default.error},e))}}]),r}(s.default.Component);a.default=y,y.propTypes={data:f.default.object,onAdd:f.default.func,onDelete:f.default.func},y.defaultProps={data:{},onAdd:function(){},onDelete:function(){}}},function(e,t,a){e.exports={item:"_1kmSC__ph67BXHwPHIgdEt",icon:"WG4jVOyftN1J-3Qx0HfRQ",texts:"_2oTQpDYJHbQK9cSrwXrn5D",text:"_1kD3DJ4-DvWshSbWqKFvAW",title:"_3RZYExlr-Pjh7uww6Y6ZEb",description:"_9GO6DcfvOoroeH4GfG06N",clusters:"_367T3thgG7QtDZw5kAaWNy",add:"_2okV3MjC6xqfPB6AWhGQ3",paths:"_3dHV84JUfbE34Iu4EQYkNU",path:"f5_6svLoP460Z6PT3paLt",error:"_7YcL-GLR8AmCzM2qQJESE"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(16)),p=n(r(32)),m=n(r(0)),h=n(r(1)),v=r(25),y=n(r(274)),g=n(r(761)),b=n(r(1063)),E=r(58),_=n(r(1064));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=function(e){(0,c.default)(r,e);var a=k(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).checkItemValid=function(e){return e.path&&e.backend&&e.backend.service.name&&e.backend.service.port},n.pathValidator=function(e,a,r){return a?a.some((function(e){return!n.checkItemValid(e)}))?r({message:t("INVALID_PATH_DESC"),field:e.field}):n.handlePathExistValidator(a)?r({message:t("PATH_EXIST"),field:e.field}):void r():r()},n.handlePathExistValidator=function(e){var t=e.map((function(e){return e.path})),a=!1;return t.forEach((function(e){for(var r=t.length,n=0,l=0;n<=r;){if(e===t[n]&&l++,l>1){a=!0;break}n++}})),a},n.handleProtocolChange=function(e){n.setState({protocol:e})},n.handleModeChange=function(e){n.setState({type:e})},n.handleSubmit=function(e){var t=n.props.onOk;if("auto"===n.state.type){var a=n.props,r=a.gateway,l=a.projectDetail,u=a.namespace,o=(0,d.default)(e,"http.paths[0].backend.service.name"),i=(0,d.default)(l,'_originData.metadata.labels["kubesphere.io/namespace"]')||u;t(S(S({},e),{},{protocol:"http",host:r.isHostName?r.defaultIngress:"".concat(o,".").concat(i,".").concat(r.defaultIngress,".nip.io")}))}else t(e)},n.state={type:"specify",service:"",protocol:(0,d.default)(e,"data.protocol","http")},n.formRef=m.default.createRef(),n}return(0,i.default)(r,[{key:"getType",value:function(e){var t=(0,d.default)(e,"host");if(!t)return"auto";var a=this.props.gateway,r=(0,d.default)(e,"http.paths[0].backend.service.name"),n=a.defaultIngress,l=a.namespace;return t==="".concat(r,".").concat(l,".").concat(n,".nip.io")?"auto":"specify"}},{key:"renderForm",value:function(){var e=this.state,a=e.type,r=e.protocol,n=this.props.services;return m.default.createElement(m.default.Fragment,null,"specify"===a&&m.default.createElement(m.default.Fragment,null,m.default.createElement(v.Form.Item,{label:t("DOMAIN_NAME_TCAP"),rules:[{required:!0,message:t("DOMAIN_NAME_EMPTY_DESC")},{pattern:E.PATTERN_HOST,message:t("INVALID_DOMAIN_DESC")}]},m.default.createElement(v.Input,{name:"host",autoFocus:!0})),m.default.createElement(v.Form.Item,{label:t("PROTOCOL")},m.default.createElement(v.Select,{name:"protocol",defaultValue:"http",onChange:this.handleProtocolChange,options:this.protocols})),"https"===r&&m.default.createElement(v.Form.Item,{label:t("SECRET")},m.default.createElement(v.Select,{name:"secretName",options:this.secrets,placeholder:" "}))),m.default.createElement(v.Form.Item,{label:t("PATH_PL"),rules:[{required:!0,message:t("PATH_EMPTY_DESC")},{validator:this.pathValidator,checkOnSubmit:!0}]},m.default.createElement(g.default,{name:"http.paths",itemType:"object",addText:t("ADD"),checkItemValid:this.checkItemValid},m.default.createElement(b.default,{services:n}))))}},{key:"render",value:function(){var e=this.props,a=e.data,r=e.isFederated,n=this.state.type;return m.default.createElement(y.default.Form,(0,l.default)({title:(0,p.default)(a)?t("ADD_ROUTING_RULE"):t("EDIT_ROUTING_RULES"),width:920},this.props,{onOk:this.handleSubmit}),r&&m.default.createElement(v.Form.Group,{label:t("CLUSTER")},m.default.createElement(v.Form.Item,null,m.default.createElement(_.default,{name:"clusters",options:this.clusters,defaultValue:this.defaultClusters}))),m.default.createElement(v.Form.Group,null,m.default.createElement(v.Alert,{className:"margin-t12 margin-b12",message:t.html("RULE_SETTING_MODE_".concat(n.toUpperCase())),type:"info"}),this.renderForm()))}},{key:"protocols",get:function(){return[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]}},{key:"secrets",get:function(){return this.props.secrets.map((function(e){return{label:e.name,value:e.name}}))}},{key:"clusters",get:function(){return(0,d.default)(this.props,"projectDetail.clusters",[]).slice()}},{key:"defaultClusters",get:function(){return(0,d.default)(this.props,"projectDetail.clusters",[]).map((function(e){return e.name}))}}]),r}(m.default.Component);a.default=C,C.propTypes={data:h.default.object,secrets:h.default.array,services:h.default.array,gateway:h.default.object},C.defaultProps={data:{},secrets:[],services:[],gateway:{}}},function(e,t,a){e.exports={wrapper:"_2hbsokbzN5hp5LxUC8iC_g",step:"aaRAmJaOKA075Il_FYhK2",title:"_24SLKDqrt12UAU6QIqBAa6",rules:"_2vD7NSXS51pA2tah6hdoeM"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(56)),f=n(r(0)),d=n(r(1)),p=r(25),m=n(r(870)),h=n(r(1822));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(r,e);var a=v(r);function r(e){var t,n,u,o,i,c;return(0,l.default)(this,r),(t=a.call(this,e)).data=(n=e.formTemplate,u=n.application,o=n.ingress,i=(0,s.default)(n,["application","ingress"]),c=[u,o],Object.keys(i).forEach((function(e){i[e].workload&&c.push(i[e].workload),i[e].service&&c.push(i[e].service)})),c),t.editor=f.default.createRef(),t}return(0,u.default)(r,[{key:"getData",value:function(){return this.editor.current.getData()}},{key:"render",value:function(){return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement("div",{className:h.default.step},f.default.createElement("div",null,t("EDIT_YAML")),f.default.createElement("p",null,t("CREATE_BY_YAML_DESC"))),f.default.createElement("div",{className:h.default.codeWrapper},f.default.createElement("div",{className:h.default.pane},f.default.createElement("div",{className:h.default.title},f.default.createElement(p.Icon,{name:"coding",size:20}),f.default.createElement("span",null,t("YAML_FILE"))),f.default.createElement(m.default,{ref:this.editor,className:h.default.editor,value:this.data}))))}}]),r}(f.default.Component);a.default=y,y.propTypes={formTemplate:d.default.object,onOk:d.default.func,isSubmitting:d.default.bool},y.defaultProps={onOk:function(){},isSubmitting:!1}},function(e,t,a){e.exports={wrapper:"_2DbNJPdfgI4dgBJisOntmF",step:"_2R0Y1Bov3UM9xHfuQx18YU",codeWrapper:"A3dbNbkmfuxiqBXaeGMFW",pane:"_3pEJUsXvQi9so5hxtsl2EC",editor:"_2dd7dYos5S09v8It9Eak_Z",title:"_3H0QVPSbai5_e60lcson19"}},function(e,t,a){e.exports={modal:"p8a6H-jXk5OnSxqkTWQn7",body:"QLzi6PtdDSAbo1ZjB_ejT",wrapper:"_1FueZNETQGMwoOrD2sbcQW",steps:"_2u31JZwaeV3OsrEiBfQM1h",header:"_1O2uhbM6HbwUYsq6yl2mBa",headerBottom:"_1b15o9UoGNxLLpM-BKvPOU",title:"_2Q1EYtOJAJrVd0Pila76Zv",content:"_2EnfwBZjZ9ExnG507HuLf0",footer:"_1Y38fHH45ZkbYyovxA_mJj"}},,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={wrapper:"_1GONzTlqHqhunspyZRL2VM",image:"Rhv9KKR-Cn8KhCMn7m6vs",title:"_15c-9OL-YdSasa499bNehh",desc:"_1jG_ngANkuGykF8bnUsxs4",actions:"W6B3HnMrZqpR2bUfcfR7L"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={reason:"_3JDYKrJKhc0_3ccKRTWjbm",condition:"_3QACUKLP4siIkBKdrDW-kH",title:"mzPe8sBOFqw47SGIKPrZW",warning:"ZLc6bv2hKoXfyrevZ2_Ny",error:"HaXzDca7Adqyw5TSX98wt"}},function(e,t,a){e.exports={wrapper:"_1zRhmhoqa7hKxIDHXtcQBl",icon:"_3zzcn1sJsd8OE2-UlVh5Dt",indicator:"_3_FKNd25UQ1SrtjwfzQsQa",title:"_2EJdDmBbkeOhXJGYqE2ODn",name:"iC7sVV_ohn78d_o-bnIsG",description:"_121vxZTmC4ekgLxeINz_qj",ellipsis:"_2D4Gh4G0EV2qp97eGpO8pA",isExpired:"cAV_fM4HAoL_7N476HQ-8",light:"aSm0o7OnDBr1lwEbEO6Qv",large:"_2oqSS3OkMT7aMTmyO3QDYQ",small:"ThqV9yofYHAOd-P_wF-3F"}},,,,function(e,t,a){e.exports={desc:"_2tdVqiHSAO-_hh2j8kmDdY",narrowItem:"_2dCR56ukrNg2YglIMXZMEw"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(3)),v=n(r(32)),y=n(r(16)),g=r(25),b=n(r(799)),E=n(r(2030)),_=n(r(1294));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=function(e){(0,s.default)(r,e);var a=k(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleSubFormSave=function(){var e=t.state.subRoute;e&&e.onSave&&e.onSave((function(){t.setState({subRoute:{}})}))},t.handleSubFormCancel=function(){var e=t.state.subRoute;e&&e.onCancel&&(e.onCancel(),t.setState({subRoute:{}}))},t.handlePrev=function(){t.setState((function(e){var t=e.subRoute;return t&&t.onCancel&&t.onCancel(),{subRoute:{}}}))},t.handleChangeTab=function(e){var a=e.target.dataset.name;a&&t.setState({activeTab:a,subRoute:{}})},t.handleSaveForm=function(e,a){t.setState((function(t){var r=t.updatedTabs;return r[e]=a,{updatedTabs:r,formData:a}}))},t.handleSubmit=function(){var e=t.state.updatedTabs;(0,v.default)(e)?t.props.onCancel():t.props.onSubmit(t.state.formData,Object.keys(e))},t.tabs=e.forms.map((function(e){return S(S({},e),{},{component:(0,E.default)(e.component)})})),t.state={formData:e.data,activeTab:(0,y.default)(t.tabs,"[0].name"),updatedTabs:{},subRoute:{}},t}return(0,c.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}}]),(0,c.default)(r,[{key:"renderTabs",value:function(){var e=this.state,a=e.activeTab,r=e.updatedTabs;return p.default.createElement("ul",{className:_.default.tabs,onClick:this.handleChangeTab},this.tabs.map((function(e){var n=e.icon,l=e.title,u=e.name,i=u===a,c=i?"light":"dark";return p.default.createElement("li",{key:l,"data-name":u,className:(0,h.default)((0,o.default)({},_.default.active,i))},p.default.createElement("div",{className:_.default.icon},p.default.createElement(g.Icon,{name:n||"appcenter",size:20,type:c})),p.default.createElement("p",null,t(l)),p.default.createElement(g.Icon,{className:(0,h.default)(_.default.updated,(0,o.default)({},_.default.active,r[u])),name:"exclamation",size:18,color:{primary:"#fff",secondary:"#f5a623"}}))})))}},{key:"renderForm",value:function(){var e=this.props,t=e.module,a=e.cluster,r=e.store,n=e.namespace,o=(0,u.default)(e,["module","cluster","store","namespace"]),i=this.state,c=i.activeTab,s=i.formData,f=this.tabs.find((function(e){return e.name===c}))||{},d=f.store||r,m=f.component;return this.formRef=p.default.createRef(),p.default.createElement("div",{className:_.default.form},p.default.createElement(m,(0,l.default)({},o,f,{formRef:this.formRef,module:t,namespace:n,store:d,formData:s,cluster:a,onSaveChange:this.handleSaveForm})),this.renderSubRouteConfirm())}},{key:"renderSubRouteConfirm",value:function(){var e=this.state.subRoute;return(0,v.default)(e)?null:p.default.createElement(b.default,{className:_.default.confirm,onOk:this.handleSubFormSave,onCancel:this.handleSubFormCancel})}},{key:"renderContent",value:function(){return p.default.createElement("div",{className:_.default.content},p.default.createElement("div",{className:_.default.container},this.renderTabs(),this.renderForm()))}},{key:"renderFooter",value:function(){var e=this.state.updatedTabs;return p.default.createElement("div",{className:_.default.footer},p.default.createElement("div",null,p.default.createElement(g.Button,{onClick:this.props.onCancel},t("CANCEL")),p.default.createElement(g.Button,{type:"control",disabled:(0,v.default)(e),loading:this.props.isSubmitting,onClick:this.handleSubmit},t("OK"))))}},{key:"render",value:function(){return p.default.createElement("div",{className:_.default.wrapper},this.renderContent(),this.renderFooter())}}]),r}(p.default.Component);a.default=C,C.propTypes={module:m.default.string,store:m.default.object,forms:m.default.array,data:m.default.object,onSubmit:m.default.func},C.defaultProps={store:{},forms:[],data:{},onSubmit:function(){}},C.childContextTypes={registerSubRoute:m.default.func,resetSubRoute:m.default.func}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),u=r(a(21)),o=r(a(12)),i=r(a(13)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=r(a(0)),p=a(5),m=r(a(3)),h=r(a(16)),v=r(a(185)),y=r(a(799)),g=r(a(1294));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=function(e){return function(t){(0,c.default)(r,t);var a=_(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).handleFormChange=function(){t.setState({showFormActions:!0})},t.handleSaveChange=function(){var e=t.props,a=e.formRef,r=e.onSaveChange,n=(0,h.default)(a,"current");n&&n.validate((function(){t.setState({showFormActions:!1},(function(){r&&r(t.name,t.state.formData),t.prevState=E(E({},t.state),{},{formData:(0,v.default)(t.state.formData)})}))}))},t.handleCancelChange=function(){var e=t.prevState||t.initialState;t.setState(E({},e),(function(){t.prevState=(0,v.default)(e)}))},t.state={showFormActions:!1,formData:(0,v.default)((0,p.toJS)(e.formData))},t.initialState=(0,v.default)(t.state),t}return(0,i.default)(r,[{key:"renderFormActions",value:function(){return d.default.createElement(y.default,{className:(0,m.default)(g.default.formActions,(0,u.default)({},g.default.active,this.state.showFormActions)),onOk:this.handleSaveChange,onCancel:this.handleCancelChange})}},{key:"render",value:function(){var t=this.props,a=t.module,r=t.formRef,u=(t.data,t.formData,t.detail,(0,l.default)(t,["module","formRef","data","formData","detail"]));return d.default.createElement("div",{className:g.default.formWrapper},d.default.createElement(e,(0,n.default)({},u,{formTemplate:this.formTemplate,formProps:this.formProps,formRef:r,module:a})),this.renderFormActions())}},{key:"name",get:function(){return this.props.name}},{key:"formTemplate",get:function(){var e=this.props.templatePrefix?"formData.".concat(this.props.templatePrefix):"formData";return(0,h.default)(this.state,e,{})}},{key:"formProps",get:function(){return{onChange:this.handleFormChange}}}]),r}(d.default.Component)};t.default=O},function(e,t,a){e.exports={body:"dybN1CLVGnb2vn26S2lo1"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){e.exports={path:"_1oepYFEVrzpZB73WDy0tg5",columns:"Hlk5VrflNofZAw8yS8P82",desc:"_1oWYev9AYgyj6hmC-6fEdQ"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(136)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(774)),m=n(r(761)),h=n(r(740)),v=r(25),y=n(r(2068));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).onChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.map((function(e){var t=e.host,a=void 0===t?"":t,r=e.port,n=void 0===r?"":r;return"".concat(a.replace(/,/g,""),":").concat(n)})).join(",");e.props.onChange(a)},e}return(0,o.default)(r,[{key:"render",value:function(){var e=(0,d.default)(this.props,"value","").split(",").map((function(e){var t=e.match(/(.*):(.*)$/)||[],a=(0,l.default)(t,3),r=a[1],n=void 0===r?"":r,u=a[2];return{port:void 0===u?"":u,host:n}}));return f.default.createElement(m.default,{addText:t("ADD_SERVICE_ADDRESS"),itemType:"object",value:e,onChange:this.onChange},f.default.createElement(p.default,{className:y.default.address},f.default.createElement(v.Input,{name:"host",className:y.default.host,placeholder:"".concat(t("EXAMPLE"),"192.168.1.10")}),f.default.createElement(h.default,{className:y.default.port,placeholder:"9092",name:"port",min:0,max:65535,integer:!0})))}}]),r}(f.default.Component);a.default=b},function(e,t,a){e.exports={address:"_2Y-pkqthIJRIsP4ExOInjH",host:"h1zpisJbm-ZoDbaSXptJj",port:"_2UTT5V7_N5_xNrvXpJIG5b"}},function(e,t,a){e.exports={path:"_2gZzkWcXonCoGhhZVWMBYW",columns:"-_X2Czvxv5vF0xOgGHXRF",desc:"_1KvBTxOju81Z_0QjuYGwgh"}},,,,,,,,function(e,t,a){e.exports={wrapper:"yZFq2sW492FUplIaCVLcA",title:"_2RF_2vkCUj5FRXMCT--OiK",panel:"_3GG4TSSEVPDykkKpRx-DTz",empty:"_2ipQUz0640DVJYOmATRKMA",loading:"_1P2YNSL2qJQiEtaDIFDfBf"}},,,function(e,t,a){e.exports={wrapper:"_3RvD5UEuKHt_T1xybRhGfS",select:"_1aQ7ChfUm20NELU7IiXMSM"}},function(e,t,a){e.exports={wrapper:"btc8Ihe1GfSKeBPW4ocRC",value:"_1xboWqu4MnvlYbNanj_e",text:"_2_YxJhzeMUvmjUAngLClSH",buttons:"_28QqiVnCn-59TULfI9fWSA"}},,,function(e,t,a){e.exports={wrapper:"_4ZwD-XBeeb89uHJUpnc9X",trigger:"_39IOrUHzeoispGPqyhIGmq",content:"_1ddoFZzzUSM-yo3jVhK8Dv",rules:"_3J0m5Rox1YBbKgpQhXuhAt",barWrapper:"_3cTk_xH00ce2_lz197ulvB",bar:"pMEaabr1XWMm3r_fW2afr",tip:"yLbagG9qc0xvXpKUX3Ltx",icon:"_1CXCvE_9U9AkVY2j9zINU2",selected:"_2_Gwnizz4eeI_iF5yIUwav"}},function(e,t,a){e.exports={wrapper:"_3SwZze98375W9bhfjiqN-o",slider:"_28M70O8IpxNUXf81fNeAAx",floatContent:"XqxDCyE_PSNWzijpRx5vU"}},,,function(e,t,a){e.exports={inputWrapper:"_9tSBTbiePy2HKcTrVKv1d",selectWrapper:"_2WoPj84oQch2LesDZL9hoL",selectInput:"_1Vpn9fp-v5Ks0tMIo4e--V",select:"_2Xe7OxIhr1KlHOE-l0UteR",title:"_1jsBAQLryz5UYT5ExZqDCp"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=l(r(1)),p=l(r(298)),m=l(r(2090)),h=r(25),v=r(58),y=l(r(1305));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={value:""},e.focus=function(){e.inputBox.focus()},e.handleChange=function(t){var a=t.target.value,r=e.props.onChange;e.setState({value:a}),r(t,a)},e.handlePressEnter=function(a){a.stopPropagation();var r=e.props,n=r.onAdd,l=r.onDelete,u=e.state.value;if("Enter"===a.key){if(""!==u.trim()){if(!v.PATTERN_TAG.test(u)||u.length>63)return void h.Notify.error({content:t("PATTERN_TAG_VALUE_INVALID_TIP")});e.setState({value:""},(function(){n(u)}))}}else"Backspace"===a.key&&l()},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this,t=this.state.value,a=this.props,r=a.style,n=a.placeholder;return f.default.createElement("div",{style:r,className:y.default.autosuggest,ref:function(t){e.autosuggest=t}},f.default.createElement(m.default,{className:y.default.autosuggestInput,type:"text",onKeyDown:this.handlePressEnter,onChange:this.handleChange,placeholder:n,ref:function(t){e.inputBox=t},value:t}))}}]),r}(f.Component);b.propTypes={onChange:d.default.func,onDelete:d.default.func,prefixCls:d.default.string,className:d.default.string,style:d.default.string,placeholder:d.default.string},b.defaultProps={prefixCls:"autosuggest",onAdd:p.default,onDelete:p.default,onChange:p.default};var E=b;a.default=E},,,,,,,,,,function(e,t,a){e.exports={card:"_1fvaJvMVa-46vr6bRwfiN",default:"_11ZbWGuLKUUwxoCi0UE_ta",selector:"_3wwNftf5lh3zwe6VvRlXHx",loading:"_3mlYHmzoC11FwkXtCcN1P",title:"C-xBi2-VU40KNZUYrr3TD",operations:"_3HvzxjlUHTsgNXS2U7nD52",empty:"_19AVBGyFYrhX1z6mTr5sg0"}},function(e,t,a){e.exports={title:"_27MAX13PiUAzOsXD-R9gw2",operations:"_24RyEmdRdSORfES3B37-Ig",split:"_3UTVVRpfTorBqaIOAvmHf",content:"_4NEZZqVQd_YQAxdWy1PTV",loading:"_39m20vEem86oLHu-jSp0RG",more:"_2sr0xxYkh1IdZYY34aaZjJ"}},,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(293)),d=r(37),p=n(r(2118));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"renderVendor",value:function(){var e=this.props.app,a=(0,d.safeParseJSON)(e.latest_app_version.maintainers,[]).map((function(e){return e.name}));return t("MAINTAINER_VALUE",{value:a[0]||"-"})}},{key:"render",value:function(){var e=this.props.app;return s.default.createElement("div",{className:p.default.wrapper},s.default.createElement("div",{className:p.default.title},s.default.createElement("span",{className:p.default.icon},s.default.createElement(f.default,{iconSize:48,src:e.icon,iconLetter:e.name,alt:""})),s.default.createElement("div",{className:p.default.text},s.default.createElement("p",null,s.default.createElement("strong",null,e.name||"-")),s.default.createElement("p",{className:p.default.desc,title:e.description||""},e.description||"-"))),s.default.createElement("div",{className:p.default.bottom},s.default.createElement("span",{className:p.default.vendor},this.renderVendor()),s.default.createElement("span",{className:p.default.version,title:e.latest_app_version.name},t("LATEST_VALUE",{value:e.latest_app_version.name||"-"}))))}}]),r}(s.default.Component);a.default=h},function(e,t,a){e.exports={wrapper:"_1zF0xPww2LpgxDFbVDQtWc",title:"_2Nq0b4RJcpqibfUTxirGBM",icon:"BqQX23omFu9bVU3UdZO12",text:"SpkoXwVuepyl5mMB85r9s",desc:"_30UPhHVa7pOp-XEWz2eRz_",bottom:"_3ZaAkU1nl0bI9b6j2pMyzm",vendor:"fQ6ZLtTi2AjCEIgH1eLeM",version:"_--5xd3q0U7oxxx1TragFp"}},function(e,t,a){e.exports={appList:"_3e_tmkJx9nmHjU2sjIk5fC",appItem:"_2shYOeim1w7KZ_ArClfUd",noApp:"_2tfdcH8dm5pbWjj8uR2TlS",loading:"_2cilLcQtThJ_7F0QvkSkCB",loadMore:"_2zMYJZr8vU75-lyWEPh98A"}},,,,,function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){e.exports={wrapper:"_3J3Pb5mAzhA4WmZl--Xw6F",toolbar:"_24SaWZxSK3fOxrM8ksaLt0",icon:"raMWjgF9-U2CVBiaV9gBr",edit:"O2SokwX79YPhMH-RqGZH7",overlayTools:"_36RuF2nWfCp60flYh41e5u",download:"_3ioPdFh5i_U-DWb-q_BJuW",preview_btn:"_2LSpfvTqAgBIXDl6uz1rlY",active:"_1t3w3ufP8XDI91cWPJpIak"}},function(e,t,a){e.exports={wrapper:"_22Uqg9uSekELpB6KOCdXpB",noReadme:"_2op9wgbzpexIMRcDqKNfeb",loading:"_2ycCMmftlBf-UDzqsr_oJG"}},function(e,t,a){e.exports={appBase:"_1I6e4FCt60BefNpkAUBRMO"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={upload:"Bbu9wMADbdQ9mqFeIlY20",hide:"_2iZl6RnTJGN_TEL754U6vW",error:"_3rvXIw3V5E4lbs_g8oLPsN",statusIcon:"_1vUzNOru1fLeCE-4h-glWC",icon:"_1RqTngoSS52S7in7rM1Bav",name:"_16kchG9RFgP5e2a5IQ9lkY",description:"_2J_neSKQiDbQdnhXtz4PQc",emoji:"_1RJDjI-uG6pzs5L3qVmumg",edit:"_2KjHx6gwr2Wb3N-GhG0fYk",packageInfo:"_3KdDA4_zX5z9q31lH_5K8u",reUpload:"_3CraBOF2TGyvPAnbMReV2Z"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(49)),o=l(r(50)),i=l(r(12)),c=l(r(13)),s=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(1)),h=l(r(295)),v=l(r(878)),y=l(r(293)),g=r(787),b=l(r(2219));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=E(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).onUploadClick=function(){n.uploadRef.onClick()},n.setShowBase64=function(e){var t=e.base64Str,a=e.base64Show;n.setState({base64Str:t,base64Show:a,error:""}),n.props.uploadIcon(t)},n.checkPackage=function(){var e=(0,o.default)(u.default.mark((function e(a){var r,l,i,c,s,f;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.fileStore,l=r.checkFile,i=r.handleFileByBase64Str,c=r.validateImageSize,!(s=l(a,"icon"))){e.next=7;break}n.setState({error:s,base64Str:"",base64Show:""}),n.props.uploadIcon(""),e.next=10;break;case 7:return f=(0,h.default)(a.name.toLocaleLowerCase().split(".")),e.next=10,i(a,function(){var e=(0,o.default)(u.default.mark((function e(a){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="data:image/".concat("svg"===f?"svg+xml":f,";base64,").concat(a),e.next=4,c(r);case 4:e.sent?n.setShowBase64({base64Str:a,base64Show:r}):(n.setState({error:t("FILE_MAX_SIZE_ICON"),base64Str:"",base64Show:""}),n.props.uploadIcon(""));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.abrupt("return",Promise.reject());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.fileStore=n.props.fileStore,n.state={error:"",base64Str:"",base64Show:""},n}return(0,c.default)(r,[{key:"renderInfo",value:function(){var e=this.props.createInfo;return p.default.createElement("div",null,p.default.createElement("dl",null,p.default.createElement("dt",null,e.name||"-"),p.default.createElement("dd",null,t("NAME"))),p.default.createElement("dl",null,p.default.createElement("dt",null,e.version_name||"-"),p.default.createElement("dd",null,t("VERSION"))),p.default.createElement("dl",null,p.default.createElement("dt",null,e.home||"-"),p.default.createElement("dd",null,t("HOMEPAGE"))),p.default.createElement("dl",null,p.default.createElement("dt",null,e.description||"-"),p.default.createElement("dd",null,t("DESCRIPTION"))))}},{key:"render",value:function(){var e=this,a=this.state,r=a.error,n=a.base64Show,l=this.props.createInfo;return p.default.createElement("div",{className:b.default.createInfo},p.default.createElement("div",{className:b.default.title},t("APP_INFORMATION")),p.default.createElement("div",{className:b.default.appContent},p.default.createElement(v.default,{ref:function(t){e.uploadRef=t},beforeUpload:this.checkPackage,accept:g.UPLOAD_FILE_TYPES.icon},p.default.createElement("div",{className:b.default.appIcon},p.default.createElement("div",{className:b.default.iconShow},p.default.createElement(y.default,{src:n||l.icon,iconSize:100,iconLetter:l.name})),p.default.createElement("label",{className:b.default.uploadIcon},t("UPLOAD_ICON")),p.default.createElement("p",{className:b.default.note},t("APP_ICON_NOTE")))),this.renderInfo()),r&&p.default.createElement("div",{className:b.default.error},t("".concat(r,"_DESC"))))}}]),r}(p.Component);a.default=_,_.propTypes={createInfo:m.default.object,fileStore:m.default.object,uploadIcon:m.default.func},_.defaultProps={createInfo:{},fileStore:{},uploadIcon:function(){}}},function(e,t,a){e.exports={createInfo:"_3CHFv8Hbf1raRS3ToqljWP",title:"xQsIhcG1VDpsHeejoI0Gk",error:"_1xTDqkex9U_eLVU-bGs9jU",appIcon:"_2yZwAyvtIdplHt3aGG_OAH",iconShow:"_1oqsGJgT-45JN1mTmj-uqy",uploadIcon:"kX8AFPvFrBObqMELjUfhK",reload:"_1H41M5dXzcPPztk1FWP-qi",note:"_1iIDCK0lnVd0AVGGMbMReE",appContent:"_33qBfH5OTpfhNnkyvgyInl"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=[{name:"Chart.yaml",description:"CHART_FILE_DESC"},{name:"LICENSE",description:"LICENSE_FILE_DESC",isOptional:!0},{name:"README.md",description:"README_FILE_DESC",isOptional:!0},{name:"requirements.yaml",description:"REQUIREMENTS_FILE_DESC",isOptional:!0},{name:"values.yaml",description:"VALUES_FILE_DESC"},{name:"charts/",description:"CHARTS_FILE_DESC",isOptional:!0,check:"none"},{name:"templates/",description:"TEMPLATES_FILE_DESC",isOptional:!0},{name:"templates/NOTES.txt",description:"NOTES_FILE_DESC",isOptional:!0}]},function(e,t,a){e.exports={body:"FbITYne0i4DbvCLnzJppV",content:"c_-hEacvn_ozn9Uye4i2x",helmIcon:"_3libFrG31cL1QWbuOHOicy",upload:"VWk6Q9wxFp2BIgR6mQcIF",canCreate:"_3qBtd7HCIIYD56ncpZKiQd",checkFiles:"_3ceKdS8qGPqbikhr-qVqjS",none:"T8cKuPI_uDgYJdvU8amv7",error:"_2s-G-ny91XsDbUPAn-ifwr",name:"_3W00VxCOPCnS8YxwvFktWQ",description:"_3GwndPl9zFAPpKfuFgi7H4",configMask:"_2WXEWWHzssFiptqw_JaUEE",note:"MJUADPCGxIFyTl-MrBJRo",appInfo:"tSrXgfCDfEVuCJXlcVVUj",title:"_35C-lGsE1y_RINzuiFKR77",appContent:"_2bZTNdz4m5smofv_MXg7Yi",appIcon:"_1VOz7vDrKq6Bbrh7P_9riz",iconShow:"_3YqF_NcnYWGqv3UwvqfG2F",reload:"_3TSt4Z-UmXm9uynK3Rfsql"}},,,,,,,,,,,function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o,i=n(r(49)),c=n(r(21)),s=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(74)),y=l(r(0)),g=r(5),b=r(70),E=n(r(16)),_=n(r(73)),O=n(r(191)),S=n(r(3)),k=r(25),C=n(r(275)),R=n(r(799)),w=n(r(940)),P=n(r(770)),D=n(r(753)),T=n(r(2233));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var x=(0,b.observer)((o=function(e){(0,p.default)(u,e);var a,r,n,l=A(u);function u(){var e;(0,f.default)(this,u);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=l.call.apply(l,[this].concat(r))).state={showForm:!1,initializing:!0,formData:e.props.formData},e.formRef=y.default.createRef(),e.workspaceStore=new P.default,e.projectStore=new D.default,e.fetchNamespaces=(0,s.default)(i.default.mark((function t(){var a,r,n,l,u=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=u.length>0&&void 0!==u[0]?u[0]:{},r=e.state.formData,n=r.workspace,l=r.cluster,!n||!l){t.next=5;break}return t.next=5,e.projectStore.fetchList(I(I({},a),{},{workspace:n,cluster:l,ascending:!0}));case 5:case"end":return t.stop()}}),t)}))),e.handleWorkspaceChange=function(){e.fetchClusters(),(0,_.default)(e.state.formData,"cluster",""),(0,_.default)(e.state.formData,"namespace","")},e.handleClusterChange=function(){e.fetchNamespaces(),(0,_.default)(e.state.formData,"namespace","")},e.handleSubmit=function(){var t=e.formRef.current;t&&t.validate((function(){Object.assign(e.props.formData,I({},e.state.formData)),e.hideForm()}))},e.showForm=function(){e.setState({showForm:!0})},e.hideForm=function(){e.setState({showForm:!1})},e.projectOptionRenderer=function(e){return y.default.createElement("span",{className:T.default.option},e.isFedManaged?y.default.createElement("img",{className:T.default.indicator,src:"/assets/cluster.svg"}):y.default.createElement(k.Icon,{name:"project"}),e.label,e.isFedManaged&&y.default.createElement(k.Tooltip,{content:t("FEDPROJECT_CANNOT_DEPLOY_APP_TIP")},y.default.createElement(k.Icon,{className:T.default.tip,name:"question"})))},e.clusterOptionRenderer=function(e){return y.default.createElement("div",null,y.default.createElement("div",null,e.value),!e.cluster.isReady&&y.default.createElement("div",null,y.default.createElement(w.default,{data:e.cluster,noTip:!0})))},e}return(0,d.default)(u,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:(n=(0,s.default)(i.default.mark((function e(){var t,a,r,n,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({initializing:!0}),t=this.state.formData,a=t.workspace,r=t.cluster,n=t.namespace,e.next=4,this.fetchWorkspaces();case 4:return a||(0,_.default)(this.state.formData,"workspace",(0,E.default)(this.workspaces,"[0].value")),e.next=7,this.fetchClusters();case 7:return r||(0,_.default)(this.state.formData,"cluster",(0,E.default)(this.clusters,"[0].value")),e.next=10,this.fetchNamespaces();case 10:n||(l=this.namespaces.find((function(e){return!e.disabled}))||{},(0,_.default)(this.state.formData,"namespace",l.value||"")),Object.assign(this.props.formData,this.state.formData),this.setState({initializing:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchWorkspaces",value:(r=(0,s.default)(i.default.mark((function e(){var t,a=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.workspaceStore.fetchList(I(I({},t),{},{limit:-1,ascending:!0}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchClusters",value:(a=(0,s.default)(i.default.mark((function e(){var t,a,r=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},!(a=this.state.formData.workspace)){e.next=5;break}return e.next=5,this.workspaceStore.fetchClusters(I(I({},t),{},{workspace:a,limit:-1,ascending:!0}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderPlacement",value:function(){var e=this.props.formData,a=e.namespace,r=e.workspace,n=e.cluster;return y.default.createElement("div",{className:T.default.placement},y.default.createElement(C.default,{title:r,description:t("WORKSPACE")}),y.default.createElement(C.default,{title:n,description:t("CLUSTER")}),y.default.createElement(C.default,{icon:"project",title:a,description:t("PROJECT")}),y.default.createElement(k.Icon,{className:T.default.icon,name:"chevron-down",size:20}))}},{key:"renderForm",value:function(){var e=this.props.workspace;return y.default.createElement("div",{className:T.default.form},y.default.createElement(k.Form,{ref:this.formRef,type:"inner",data:this.state.formData},y.default.createElement(k.Columns,null,y.default.createElement(k.Column,null,y.default.createElement(k.Form.Item,{label:t("WORKSPACE")},y.default.createElement(k.Select,{name:"workspace",placeholder:t("WORKSPACE_EMPTY_DESC"),options:this.workspaces,onChange:this.handleWorkspaceChange,prefixIcon:y.default.createElement(k.Icon,{name:"enterprise",size:16}),disabled:!!e}))),y.default.createElement(k.Column,null,y.default.createElement(k.Form.Item,{label:t("CLUSTER")},y.default.createElement(k.Select,{name:"cluster",placeholder:" ",options:this.clusters,onChange:this.handleClusterChange,optionRenderer:this.clusterOptionRenderer,prefixIcon:y.default.createElement(k.Icon,{name:"cluster",size:16})}))),y.default.createElement(k.Column,null,y.default.createElement(k.Form.Item,{label:t("PROJECT"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},y.default.createElement(k.Select,{name:"namespace",placeholder:" ",options:this.namespaces,pagination:(0,O.default)(this.projectStore.list,["page","limit","total"]),isLoading:this.projectStore.list.isLoading,onFetch:this.fetchNamespaces,valueRenderer:this.projectOptionRenderer,optionRenderer:this.projectOptionRenderer,searchable:!0,clearable:!0}))))),y.default.createElement(R.default,{className:T.default.confirm,onOk:this.handleSubmit,onCancel:this.hideForm}))}},{key:"render",value:function(){var e=this.state,a=e.showForm,r=e.formData,n=e.initializing;return a?this.renderForm():y.default.createElement("div",{className:(0,S.default)(T.default.wrapper,(0,c.default)({},T.default.expand,a)),onClick:this.showForm},r.namespace?this.renderPlacement():y.default.createElement("div",{className:T.default.placeholder},n?y.default.createElement(k.Loading,{className:"text-center"}):t("PROJECT_NOT_SELECT_DESC")))}},{key:"workspaces",get:function(){return this.workspaceStore.list.data.filter((function(e){return e.name!==globals.config.systemWorkspace})).map((function(e){return{label:e.name,value:e.name}}))}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,disabled:!e.isReady,cluster:e}}))}},{key:"namespaces",get:function(){return this.projectStore.list.data.filter((function(e){return"Terminating"!==e.status})).map((function(e){return{label:e.name,value:e.name,disabled:e.isFedManaged,isFedManaged:e.isFedManaged}}))}}]),u}(y.Component),(0,v.default)(o.prototype,"workspaces",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"workspaces"),o.prototype),(0,v.default)(o.prototype,"clusters",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"clusters"),o.prototype),(0,v.default)(o.prototype,"namespaces",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"namespaces"),o.prototype),u=o))||u;a.default=x},function(e,t,a){e.exports={wrapper:"_1-zzsgQcL6AnKOs_Sxiu20",placeholder:"_1VOZnqeyx9mHYMTD8k_Q3_",form:"_1AI73FeUImn3gHEsO9StyJ",confirm:"_3w7hJkkJRGqAW2U6H4l_3l",placement:"_2RflgzEx5EebIR0t5yYHhq",icon:"_19fvfv87icQ9tqCf2bPw6L",option:"_3GsdSpU7z-pczQtQ6zwAgG",tip:"-gsMZiJ2S2gdBb2vcv9oy"}},function(e,t,a){e.exports={title:"_33R0U9boImf8m2I9YsvtEM",placement:"_1DPArJcOi3947q7-jkb3IH",placementWrapper:"Cn8-UAsOj9IFn4AwvBErg",placementContent:"ZsCFEc87YJzsBpso9LRfs"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(109)),l=r(a(192)),u=r(a(71)),o=r(a(12)),i=r(a(13)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=r(a(0)),p=r(a(1)),m=r(a(896)),h=r(a(16)),v=r(a(73)),y=r(a(1056)),g=r(a(291)),b=r(a(650)),E=r(a(32)),_=a(25),O=r(a(275)),S=r(a(740)),k=r(a(2236));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var R=function(e){(0,c.default)(a,e);var t=C(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={value:e.props.value},e.triggerChange=(0,b.default)((function(t){e.props.onChange(t)}),300),e.generateMarks=function(e,t){for(var a=parseInt((t-e)/5,10),r={},n=0;n<5;n++){var l=e+n*a;r[l]=l}return r[t]=t,r},e.renderFormItem=function(t,a,r){var n,l=e.state.value,o={defaultValue:(0,h.default)(l,r,""),onChange:function(t){return e.handleFormChange((0,v.default)(l,r,t))}};switch(t.type){case"string":n="slider"===t.render?d.default.createElement(_.Slider,(0,u.default)({max:t.sliderMax,min:t.sliderMin,unit:t.sliderUnit,marks:e.generateMarks(t.sliderMin,t.sliderMax)},o,{withInput:!0})):"textArea"===t.render?d.default.createElement(_.TextArea,o):d.default.createElement(_.Input,o);break;case"integer":n=d.default.createElement(S.default,(0,u.default)({},o,{min:0,integer:!0}));break;case"boolean":n=d.default.createElement("div",{className:k.default.boolean},d.default.createElement(_.Toggle,(0,u.default)({},o,{defaultChecked:(0,h.default)(l,r,!1)})),d.default.createElement(O.default,{title:t.title,description:t.description}));break;case"array":n=d.default.createElement(d.default.Fragment,null,"todo");break;default:n=d.default.createElement(d.default.Fragment,null)}return d.default.createElement(_.Form.Item,{key:a,label:"boolean"===t.type?"":t.title,desc:"boolean"===t.type?"":t.description},n)},e.renderSchemaForm=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=t.type,o=t.form,i=e.state.value,c="object"===(0,l.default)(t.hidden)?(0,h.default)(i,t.hidden.value,null)===t.hidden.condition:(0,h.default)(i,t.hidden,!1);if(c)return null;if("object"===u){var s=(0,m.default)(t.properties,(function(t,a){return e.renderSchemaForm(t,a,[].concat((0,n.default)(r),[a]))}));if((0,E.default)(s)||s.every((function(e){return!e})))return null;var f=t.properties&&(0,y.default)(t.properties,(function(e){return(0,g.default)(e,"properties")}));return d.default.createElement("div",{key:a,className:f?k.default.parentGroup:k.default.group},t.title&&d.default.createElement("div",{className:k.default.title},t.title),t.description&&d.default.createElement("p",{className:k.default.description},t.description),s)}return o&&e.renderFormItem(t,a,r)},e}return(0,i.default)(a,[{key:"handleFormChange",value:function(e){this.setState({value:e}),this.triggerChange(e)}},{key:"render",value:function(){var e=this.props.schema;return this.renderSchemaForm(e)}}]),a}(d.default.Component);t.default=R,R.propTypes={schema:p.default.object,value:p.default.object,onChange:p.default.func},R.defaultProps={onChange:function(){}}},function(e,t,a){e.exports={group:"_3xTfalXI7Y64g0li2u6vG2",title:"_182KrRnt2udLzkiRSMx9JE",description:"_2839u1rW56wEbtmaeCpjpO",boolean:"_3mnMZpC4gF0oolH9K1bn2W",parentGroup:"HW1rPNOyhUpkrn584aGu-"}},function(e,t,a){e.exports={wrapper:"TLG9iSoooMsoVDmn61N6I",title:"_1eUI0tEXI3u8lHvjGDMO3f",switch:"_32tTvAbdJ_mXTYRvGpAE2n",codeWrapper:"_3uRVlVgjuj0HJpjr9wInob",schemaWrapper:"_3VOv76O-06CKHBW5mIv-lM",loading:"_2ckKN8H46Wi058LIpHKyNF"}},,,,function(e,t,a){e.exports={modalBody:"_3U3jpj3Asa2vxY5nLxnI7q",body:"_3RjNAt-ZTljs5mYHXktU1L",title:"_11Ztqzyj8R2I9NNVJQnq8L",name:"_3wXiy9rCStnLBi7axQAosL",description:"_2EX8Or-cxAn6A_6FYRt0gq",content:"_2ph5Pp1VapnUaO8xRqIlzB",footer:"_1JT049WYzUjYkaqDhL_-78"}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={desc:"_3eh_E2EhQNcWLy8V-DL0TU"}},,,,,,function(e,t,a){e.exports={container:"_28BAmUGayFPM7JPE5ubfRp",main_content:"_1nTOsD4LTy3JlMGPNyiH0J",controls:"_2iPsaoM6EKU-FKuFY19BPD",control:"_1Xce9RPORg_gvSJP9dstQ7","slider-wrapper":"VqFyTMdMnsEe-jAXhPkUB",normalSize:"_5KdmZqhOGtr0WGcmPF5R6",autoSize:"_2jsPFnKjZk2yDubgG_LTD2"}},function(e,t,a){e.exports={wrapper:"_2RXdRDDKaZIoVt_M4ZZKDH",card:"JoB_eaeo3gO3tgu15IdFJ",in:"_30Fhe_GMY_jqljFuBk6iPM",browseIn:"_27cK2SUAg9oL3KeZuQlc8I",out:"_3W6MlUSLX72EkOU9mwhqK9",browseOut:"_3_bxeu1laeJFbz1qe6hjOv",cardMain:"jApufF3_7WJgOAwNKdKLl",cardFoot:"_2MjC_tFWfTzr148xdbNYYP",title:"_3DuG8hhj8DMeFyPQ359a4Z",content:"_37wH-4L-J3wTYb3a17S4IK"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f=r(a(109)),d=r(a(91)),p=r(a(12)),m=r(a(13)),h=r(a(135)),v=r(a(19)),y=r(a(20)),g=r(a(18)),b=r(a(74)),E=(r(a(92)),r(a(0))),_=a(5),O=a(70),S=r(a(2276)),k=r(a(1332));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var R=(0,O.observer)((s=c=function(e){(0,v.default)(a,e);var t=C(a);function a(){var e;(0,p.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n)),(0,d.default)(e,"heights",u,(0,h.default)(e)),e.handleAddBranch=function(t){return function(){e.props.store.handleAddBranch(t)}},e.onInsertColumn=function(t){e.props.store.insertColumn(t)},e.handleFocus=function(t){return function(a){e.props.store.setFocus(t,a)}},(0,d.default)(e,"onAddStep",o,(0,h.default)(e)),(0,d.default)(e,"setHeight",i,(0,h.default)(e)),e}return(0,m.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.stages,r=t.isEditMode;return!a.length&&r?E.default.createElement(k.default,{onInsertColumn:this.onInsertColumn,isEditMode:r,index:-1,heights:[]}):E.default.createElement(E.default.Fragment,null,E.default.createElement(k.default,{onInsertColumn:this.onInsertColumn,isEditMode:r,index:-1,heights:this.sumHeights}),a.map((function(t,a){return E.default.createElement(E.default.Fragment,{key:"".concat(t.name).concat(a)},E.default.createElement(S.default,{onAddBranch:e.handleAddBranch(a),onAddStep:e.onAddStep,isEditMode:r,nodes:(0,_.toJS)(t),index:a,setHeight:e.setHeight(a),onFocus:e.handleFocus(a)}),E.default.createElement(k.default,{onInsertColumn:e.onInsertColumn,isEditMode:r,index:a,heights:e.sumHeights}))})))}},{key:"sumHeights",get:function(){var e=this.props.stages,t=void 0===e?[]:e;return this.heights.slice(0,t.length).map((function(e){var t=0;return e.map((function(e){return t+=e}))}))}}]),a}(E.default.Component),c.defaultProps={},l=s,u=(0,b.default)(l.prototype,"heights",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,b.default)(l.prototype,"sumHeights",[_.computed],Object.getOwnPropertyDescriptor(l.prototype,"sumHeights"),l.prototype),o=(0,b.default)(l.prototype,"onAddStep",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.store.isAddingStep=!0}}}),i=(0,b.default)(l.prototype,"setHeight",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return function(a){var r=(0,f.default)(e.heights);r[t]=a,e.heights=r}}}}),n=l))||n;t.default=R},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(5),p=r(25),m=n(r(3)),h=n(r(16)),v=n(r(2277)),y=n(r(32)),g=n(r(745)),b=n(r(185)),E=r(1331),_=n(r(1015));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S={echo:"loudspeaker",mail:"mail",shell:"terminal",sh:"terminal",container:"terminal",checkout:"network-router",git:"network-router",withCredentials:"key",kubernetesDeploy:"kubernetes",branch:"network-router",timeout:"clock",withSonarQubeEnv:"network"},k=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).handleAddStep=function(){n.props.onAddStep()},n.handleFocus=function(e){return function(t){n.props.isEditMode&&(t.stopPropagation(),n.props.onFocus(e))}},n.renderNestStages=function(e){return n.props.isEditMode?f.default.createElement("div",{className:_.default.errorTip},t("not support edit nested stage")):!(0,y.default)(e)&&(0,d.isObservableArray)(e)?f.default.createElement("div",{className:_.default.nestStage_content},f.default.createElement("div",{className:_.default.indentBorder}),f.default.createElement("div",{className:_.default.nestsStage_detail},e.map((function(e){return n.renderCardContent(e)})))):void 0},n.renderSteps=function(e,a){if(e&&e.length)return e.map((function(e,r){return f.default.createElement("div",{key:JSON.stringify(e)+r,className:_.default.pipelineCard__item},f.default.createElement("div",{className:(0,m.default)(_.default.content__title,_.default.content__title__noDetail,(0,l.default)({},_.default.content__title__error,a&&a.index===r))},f.default.createElement(p.Icon,{size:20,name:S[e.name]||"cdn"}),f.default.createElement("span",{className:_.default.content__title__text},t(e.name))),"sh"===e.name||"script"===e.name?f.default.createElement("div",{className:_.default.content__text},(0,E.renderStepArgs)((0,d.toJS)(e))):null,n.renderSteps(e.children))}))},n.domTree=[],n.heights=[],n.nodes=(0,d.toJS)(n.props.nodes),n}return(0,o.default)(r,[{key:"shouldComponentUpdate",value:function(e){var t=(0,d.toJS)(e.nodes);return!(0,g.default)(t,this.nodes)&&(this.nodes=(0,b.default)(t),!0)}},{key:"componentDidMount",value:function(){this.calculateHeight()}},{key:"componentDidUpdate",value:function(){this.calculateHeight()}},{key:"calculateHeight",value:function(){var e=(0,v.default)(this.domTree.map((function(e){return e&&e.clientHeight})),null);JSON.stringify(e)!==JSON.stringify(this.heights)&&(this.heights=e,this.props.setHeight(this.heights))}},{key:"renderAddBranchCard",value:function(){return f.default.createElement("div",{className:_.default.addBranchCard,onClick:this.props.onAddBranch},f.default.createElement(p.Icon,{size:16,name:"add"}),f.default.createElement("span",null,t("Add Parallel Stage")))}},{key:"renderConditions",value:function(e){return e.when?f.default.createElement("div",{className:_.default.conditions},f.default.createElement("p",{className:_.default.conditions__title},t("pipeline_conditions")),this.renderSteps(e.when.conditions,e.conditionError)):null}},{key:"renderCard",value:function(e,a){var r,n=this.props.isEditMode;return f.default.createElement("div",{className:(0,m.default)(_.default.pipelineCard,{"pipelineCard-edit":n}),onClick:this.handleFocus(a)},f.default.createElement("div",{className:(0,m.default)(_.default.pipelineCard__title,(0,l.default)({},_.default["pipelineCard__title-error"],e.error))},e.name||t("Unnamed")),f.default.createElement("div",{className:(0,m.default)(_.default.pipelineCard__content,(r={},(0,l.default)(r,_.default["pipelineCard-active"],e.isActive),(0,l.default)(r,_.default["pipelineCard-error"],e.error),r))},this.renderCardContent(e)))}},{key:"renderCardContent",value:function(e){var a=this.props.isEditMode,r=!!e.stages;return f.default.createElement(f.default.Fragment,null,e.error||e.conditionError?f.default.createElement("div",{className:_.default.errorTip},t((0,h.default)(e,"error.error")||(0,h.default)(e,"conditionError.error"))||t("Configuration error")):null,this.renderConditions(e,e.conditionError),e.stages?this.renderNestStages(e.stages):this.renderSteps((0,h.default)(e,"branches[0].steps"),e.error),a&&!r?f.default.createElement("div",{className:_.default.addSteps,onClick:this.handleAddStep},f.default.createElement(p.Icon,{size:16,name:"add"}),f.default.createElement("span",null,t("Add Step"))):null)}},{key:"render",value:function(){var e=this,t=this.props,a=t.nodes,r=t.isEditMode;return a.parallel?f.default.createElement("div",{className:_.default.pipeline_column,"data-card":"card"},a.parallel.map((function(t,a){return f.default.createElement("div",{key:JSON.stringify(t),ref:function(t){e.domTree[a]=t}},e.renderCard(t,a))})),r?this.renderAddBranchCard():null):f.default.createElement("div",{className:_.default.pipeline_column,"data-card":"card"},f.default.createElement("div",{ref:function(t){e.domTree=[t]}},this.renderCard(a,0)),r?this.renderAddBranchCard():null)}}]),r}(f.default.Component);a.default=k},,,function(e,t,a){e.exports={connects__column:"_2vvBGS23XmT5sAwppCC8tF",editButton:"PnGDJ8pHWNAj86cz9vAV1"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m,h=n(r(49)),v=n(r(50)),y=n(r(91)),g=n(r(12)),b=n(r(13)),E=n(r(135)),_=n(r(19)),O=n(r(20)),S=n(r(18)),k=n(r(74)),C=(n(r(92)),n(r(0))),R=r(5),w=r(70),P=n(r(73)),D=n(r(16)),T=r(25),N=n(r(1333)),I=n(r(2281)),A=n(r(1016));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,S.default)(e);if(t){var n=(0,S.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,O.default)(this,a)}}var j=[{label:"Any",value:"any"},{label:"node",value:"node"},{label:"kubernetes",value:"kubernetes"}],M=(0,w.observer)((u=function(e){(0,_.default)(r,e);var a=x(r);function r(){var e;(0,g.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return e=a.call.apply(a,[this].concat(l)),(0,y.default)(e,"stageName",o,(0,E.default)(e)),(0,y.default)(e,"formData",i,(0,E.default)(e)),(0,y.default)(e,"showYaml",c,(0,E.default)(e)),(0,y.default)(e,"loading",s,(0,E.default)(e)),(0,y.default)(e,"handleSetYaml",f,(0,E.default)(e)),(0,y.default)(e,"hideYamlEditor",d,(0,E.default)(e)),(0,y.default)(e,"showEditor",p,(0,E.default)(e)),e.handleDelete=function(){e.props.store.deleteStage()},e.handleCancel=function(){e.props.onCancel()},(0,y.default)(e,"handleAgentTypeChange",m,(0,E.default)(e)),e.handleConfirm=(0,v.default)(h.default.mark((function t(){var a;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.getAgentArguments(),e.loading=!0,t.next=4,e.props.store.convertJsonToJenkinsFile(e.props.store.params).finally((function(){e.loading=!1}));case 4:(a=t.sent)&&"success"===(0,D.default)(a,"data.result")&&e.props.onOk((0,D.default)(a,"data.jenkinsfile",""));case 6:case"end":return t.stop()}}),t)}))),e.renderAgentForms=function(){var a=(0,R.toJS)(e.labelDataList),r=(0,D.default)(a,"0.value","");switch(e.agentType){case"node":return C.default.createElement(T.Form,{data:e.formData,ref:e.formRef},C.default.createElement(T.Form.Item,{label:t("label"),desc:t("The label on which to run the Pipeline or individual stage")},C.default.createElement(T.Select,{name:"label",options:a,defaultValue:r})));case"kubernetes":return C.default.createElement(T.Form,{data:e.formData,ref:e.formRef},C.default.createElement(T.Form.Item,{label:t("label"),desc:t("")},C.default.createElement(T.Input,{name:"label"})),C.default.createElement(T.Form.Item,{label:t("yaml"),desc:C.default.createElement("span",{className:A.default.clickable,onClick:e.showEditor},t("show yaml editor"))},C.default.createElement(T.Input,{name:"yaml"})),C.default.createElement(T.Form.Item,{label:t("defaultContainer"),desc:t("")},C.default.createElement(T.Input,{name:"defaultContainer"})));default:return null}},e}return(0,b.default)(r,[{key:"componentDidMount",value:function(){var e=(0,R.toJS)((0,D.default)(this.props.store.jsonData,"json.pipeline.agent.arguments",[]));this.formData=e.reduce((function(e,t){if(Array.isArray(t.value)){var a=t.value.reduce((function(e,t){var a={};return a[t.key]=t.value.value,e.push(a),e}),[]);e[t.key]=a}else e[t.key]=t.value.value;return e}),{})}},{key:"getAgentArguments",value:function(){var e=this,t=Object.keys(this.formData).map((function(t){var a=(0,R.toJS)(e.formData[t]);return Array.isArray(a)?{key:t,value:a.map((function(e){return Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:e[t]}}}))[0]}))}:{key:t,value:{isLiteral:!0,value:a}}}));(0,P.default)(this.props.store.jsonData,"json.pipeline.agent.arguments",t)}},{key:"render",value:function(){var e=this.props.store,a=e.activeStage,r=e.jsonData.json.pipeline,n=this.props.isSubmitting;return C.default.createElement("div",{className:A.default.sider},C.default.createElement("div",{className:A.default.sheet},C.default.createElement("div",{className:A.default.title},t("Agent")),C.default.createElement(T.Form.Item,{desc:t("AGENT_TYPE_DESC"),label:t("TYPE")},C.default.createElement(T.Select,{options:j,value:r.agent.type,onChange:this.handleAgentTypeChange})),this.renderAgentForms(),C.default.createElement("div",{className:A.default.footer},C.default.createElement(T.Button,{onClick:this.handleCancel},t("CANCEL")),C.default.createElement(T.Button,{disabled:!r||!r.stages.length,loading:n||this.loading,type:"control",onClick:this.handleConfirm},t("OK")))),a?C.default.createElement("div",{className:A.default.content},C.default.createElement(I.default,{activeStage:a,store:this.props.store})):null,C.default.createElement(N.default,{value:this.formData.yaml||"",visible:this.showYaml,onCancel:this.hideYamlEditor,onOk:this.handleSetYaml}))}},{key:"agentType",get:function(){return(0,D.default)(this.props.store.jsonData,"json.pipeline.agent.type","")}},{key:"labelDataList",get:function(){return(0,D.default)(this.props.store,"labelDataList",[])}}]),r}(C.default.Component),o=(0,k.default)(u.prototype,"stageName",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=(0,k.default)(u.prototype,"formData",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=(0,k.default)(u.prototype,"showYaml",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,k.default)(u.prototype,"loading",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,k.default)(u.prototype,"handleSetYaml",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.formData.yaml=t,e.showYaml=!1}}}),d=(0,k.default)(u.prototype,"hideYamlEditor",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showYaml=!1}}}),p=(0,k.default)(u.prototype,"showEditor",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showYaml=!0}}}),(0,k.default)(u.prototype,"agentType",[R.computed],Object.getOwnPropertyDescriptor(u.prototype,"agentType"),u.prototype),(0,k.default)(u.prototype,"labelDataList",[R.computed],Object.getOwnPropertyDescriptor(u.prototype,"labelDataList"),u.prototype),m=(0,k.default)(u.prototype,"handleAgentTypeChange",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.formData={},(0,P.default)(e.props.store.jsonData,"json.pipeline.agent.type",t)}}}),l=u))||l;a.default=M},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m,h,v,y,g,b,E,_,O,S,k,C=n(r(91)),R=n(r(12)),w=n(r(13)),P=n(r(135)),D=n(r(19)),T=n(r(20)),N=n(r(18)),I=n(r(74)),A=(n(r(92)),n(r(0))),x=n(r(1)),j=r(5),M=r(70),L=n(r(16)),U=n(r(32)),F=n(r(745)),V=n(r(73)),q=r(25),B=n(r(1333)),z=n(r(1334)),G=n(r(2283)),H=n(r(1016)),Y=n(r(1015));function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,N.default)(e);if(t){var n=(0,N.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,T.default)(this,a)}}var W=[{label:"Any",value:"any"},{label:"node",value:"node"},{label:"kubernetes",value:"kubernetes"},{label:"none",value:"none"}],J=(0,M.observer)((k=S=function(e){(0,D.default)(r,e);var a=K(r);function r(){var e;(0,R.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return e=a.call.apply(a,[this].concat(l)),(0,C.default)(e,"zIndex",o,(0,P.default)(e)),(0,C.default)(e,"isEditMode",i,(0,P.default)(e)),(0,C.default)(e,"formData",c,(0,P.default)(e)),(0,C.default)(e,"showYaml",s,(0,P.default)(e)),(0,C.default)(e,"handleChangeName",f,(0,P.default)(e)),(0,C.default)(e,"handleSetYaml",d,(0,P.default)(e)),(0,C.default)(e,"hideYamlEditor",p,(0,P.default)(e)),(0,C.default)(e,"showEditor",m,(0,P.default)(e)),e.initFormData=function(){var t=(0,j.toJS)((0,L.default)(e.props.activeStage,"agent.arguments",[]));e.formData=t.reduce((function(e,t){if(Array.isArray(t.value)){var a=t.value.reduce((function(e,t){var a={};return a[t.key]=t.value.value,e.push(a),e}),[]);e[t.key]=a}else e[t.key]=t.value.value;return e}),{})},e.handleAgentTypeArg=function(){e.getAgentArguments()},e.renderAgentForms=function(){var a=(0,j.toJS)(e.labelDataList),r=(0,L.default)(a,"0.value","");switch(e.agentType){case"node":return A.default.createElement(q.Form,{data:e.formData,ref:e.formRef},A.default.createElement(q.Form.Item,{label:t("label"),desc:t("The label on which to run the Pipeline or individual stage")},A.default.createElement(q.Select,{name:"label",options:a,defaultValue:r,onChange:e.handleAgentTypeArg})));case"kubernetes":return A.default.createElement(q.Form,{data:e.formData,ref:e.formRef},A.default.createElement(q.Form.Item,{label:t("label"),desc:t("")},A.default.createElement(q.Input,{name:"label",defaultValue:"default",onChange:e.handleAgentTypeArg})),A.default.createElement(q.Form.Item,{label:t("yaml"),desc:A.default.createElement("span",{className:H.default.clickable,onClick:e.showEditor},t("show yaml editor"))},A.default.createElement(q.Input,{name:"yaml",onChange:e.handleAgentTypeArg})),A.default.createElement(q.Form.Item,{label:t("defaultContainer"),desc:t("")},A.default.createElement(q.Input,{name:"defaultContainer",onChange:e.handleAgentTypeArg})));default:return null}},(0,C.default)(e,"handleAgentTypeChange",h,(0,P.default)(e)),e.handleDelete=function(){e.props.store.deleteStage()},(0,C.default)(e,"toggleAddStep",v,(0,P.default)(e)),(0,C.default)(e,"handleEdit",y,(0,P.default)(e)),(0,C.default)(e,"handleEditCancel",g,(0,P.default)(e)),(0,C.default)(e,"handleEditStep",b,(0,P.default)(e)),(0,C.default)(e,"handleAddStep",E,(0,P.default)(e)),e.addNoInputTask=function(t){var a=e.props.activeStage;if(a.when||(0,V.default)(a,"when.conditions",[]),e.zIndex.length){var r=e.zIndex.reduce((function(e,t,a){return 0===a?"[".concat(t,"]"):"".concat(e,".children[").concat(t,"]")}),"");(0,L.default)(a.when.conditions,"".concat(r,".children")).push({name:t,children:[]})}else a.when.conditions.push({name:t,children:[]});e.props.store.isAddingStep=!1,e.handleSetValue()},(0,C.default)(e,"handleDeleteStep",_,(0,P.default)(e)),(0,C.default)(e,"handleSortSteps",O,(0,P.default)(e)),e.handleSetValue=function(){e.props.activeStage.when&&!e.props.activeStage.when.conditions.length&&delete e.props.activeStage.when,e.props.activeStage.error&&(e.props.activeStage.error=void 0),e.props.store.setValue(e.props.activeStage)},e.cancelFocus=function(){e.getAgentArguments(),e.props.store.clearFocus()},e}return(0,w.default)(r,[{key:"getChildContext",value:function(){return{toggleAddStep:this.toggleAddStep,handleEdit:this.handleEdit,handleDeleteStep:this.handleDeleteStep}}},{key:"componentDidMount",value:function(){this.initFormData()}},{key:"componentDidUpdate",value:function(e){(0,F.default)(this.props.activeStage,e.activeStage)||this.initFormData()}},{key:"getAgentArguments",value:function(){var e=this,t=(0,L.default)(this.props.activeStage,"agent.type"),a=(0,L.default)(this.props.activeStage,"agent.arguments"),r=(0,j.toJS)(this.formData);if(t||(0,V.default)(this.props.activeStage,"agent.type","none"),!(0,U.default)(r)){var n=Object.keys(this.formData).map((function(t){var a=(0,j.toJS)(e.formData[t]);return Array.isArray(a)?{key:t,value:a.map((function(e){return Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:e[t]}}}))[0]}))}:{key:t,value:{isLiteral:!0,value:a}}}));(0,V.default)(this.props.activeStage,"agent.arguments",(0,U.default)(n)?void 0:n)}(0,U.default)(r)&&!(0,U.default)((0,j.toJS)(a))&&delete this.props.activeStage.agent.arguments}},{key:"renderConditions",value:function(){var e=(0,L.default)(this.props,"activeStage.when.conditions");return e?A.default.createElement(z.default,{steps:e,zIndex:[],listType:"condition"}):null}},{key:"render",value:function(){var e=this.props.store.isAddingStep;return A.default.createElement("div",{className:H.default.sheet},A.default.createElement("div",{className:H.default.title},t("STAGE"),A.default.createElement("span",{className:H.default.delete,onClick:this.handleDelete},A.default.createElement(q.Icon,{name:"trash",clickable:!0}))),A.default.createElement("div",{className:H.default.form},A.default.createElement(q.Form.Item,{label:t("NAME")},A.default.createElement(q.Input,{className:H.default.name_input,value:this.props.activeStage.name||"",onChange:this.handleChangeName})),A.default.createElement("div",{className:H.default.title},t("Agent")),A.default.createElement(q.Form.Item,{desc:t("AGENT_TYPE_DESC"),label:t("TYPE")},A.default.createElement(q.Select,{options:W,defaultValue:"none",value:this.agentType,onChange:this.handleAgentTypeChange})),this.renderAgentForms(),A.default.createElement("div",{className:H.default.title},t("pipeline_conditions"),A.default.createElement("span",null,t("The conditions required to implement the current phase (optional)."))),A.default.createElement("div",{className:H.default.conditionList},this.renderConditions()),this.hasNestStage?null:A.default.createElement("div",{className:Y.default.addSteps,onClick:this.toggleAddStep("","condition")},A.default.createElement(q.Icon,{name:"add"}),"  ",t("Add conditions")),A.default.createElement("div",{className:H.default.title},t("Task")),A.default.createElement(z.default,{steps:this.steps,zIndex:[]}),this.hasNestStage?null:A.default.createElement("div",{className:Y.default.addSteps,onClick:this.toggleAddStep("")},A.default.createElement(q.Icon,{name:"add"}),"  ",t("Add Step"))),A.default.createElement("div",{className:H.default.footer},A.default.createElement(q.Button,{onClick:this.cancelFocus},t("OK"))),e?A.default.createElement(G.default,{onAddStep:this.handleAddStep,store:this.props.store,isEditMode:this.isEditMode,onCancel:this.handleEditCancel,onAddNoInputTask:this.addNoInputTask}):null,A.default.createElement(B.default,{value:this.formData.yaml||"",visible:this.showYaml,onCancel:this.hideYamlEditor,onOk:this.handleSetYaml}))}},{key:"steps",get:function(){return(0,L.default)(this.props.activeStage,"branches[0].steps",[])}},{key:"labelDataList",get:function(){return(0,L.default)(this.props.store,"labelDataList",[])}},{key:"hasNestStage",get:function(){return!!this.props.activeStage.stages}},{key:"agentType",get:function(){return(0,L.default)(this.props.activeStage,"agent.type","none")}}]),r}(A.default.Component),S.defaultProps={activeStage:{}},S.childContextTypes={toggleAddStep:x.default.func,handleEdit:x.default.func,handleDeleteStep:x.default.func},u=k,o=(0,I.default)(u.prototype,"zIndex",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=(0,I.default)(u.prototype,"isEditMode",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,I.default)(u.prototype,"formData",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=(0,I.default)(u.prototype,"showYaml",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,I.default)(u.prototype,"handleChangeName",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.activeStage.name=t,e.handleSetValue()}}}),d=(0,I.default)(u.prototype,"handleSetYaml",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.formData.yaml=t,e.handleAgentTypeArg(),e.showYaml=!1}}}),p=(0,I.default)(u.prototype,"hideYamlEditor",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showYaml=!1}}}),m=(0,I.default)(u.prototype,"showEditor",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showYaml=!0}}}),h=(0,I.default)(u.prototype,"handleAgentTypeChange",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a="";switch(t){case"node":a=(0,L.default)((0,j.toJS)(e.labelDataList),"0.value",""),e.formData={label:a};break;case"kubernetes":a="default",e.formData={label:a};break;default:e.formData={}}(0,V.default)(e.props.activeStage,"agent.type",t),e.handleAgentTypeArg(),e.handleSetValue()}}}),v=(0,I.default)(u.prototype,"toggleAddStep",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){return function(){e.isEditMode=!1,e.zIndex=t,e.props.store.isAddingStep=a||!0}}}}),y=(0,I.default)(u.prototype,"handleEdit",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a,r,n){return function(){e.props.store.setEdittingData({type:r.name,data:r.arguments}),e.index=a,e.zIndex=t,e.isEditMode=!0,e.props.store.isAddingStep=n||!0}}}}),g=(0,I.default)(u.prototype,"handleEditCancel",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isEditMode&&(e.isEditMode=!1,e.props.store.isAddingStep=!1,e.props.store.setEdittingData({}))}}}),b=(0,I.default)(u.prototype,"handleEditStep",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(e.zIndex.length){var a=e.zIndex.reduce((function(e,t,a){return 0===a?"[".concat(t,"]"):"".concat(e,".children[").concat(t,"]")}),""),r=(0,L.default)(e.steps,"".concat(a,".children[").concat(e.index,"].children"));r&&(t.children=r),(0,L.default)(e.steps,"".concat(a,".children")).splice(e.index,1,t)}else{var n=(0,L.default)(e.steps,"[".concat(e.index,"].children"));n&&(t.children=n),e.steps.splice(e.index,1,t)}e.props.store.isAddingStep=!1,e.isEditMode=!1,e.props.store.setEdittingData({}),e.handleSetValue()}}}),E=(0,I.default)(u.prototype,"handleAddStep",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(e.isEditMode)e.handleEditStep(t);else{var a=e.steps;if("string"==typeof e.props.store.isAddingStep&&(e.props.activeStage.when||(0,V.default)(e.props.activeStage,"when.conditions",[]),a=e.props.activeStage.when.conditions),e.zIndex.length){var r=e.zIndex.reduce((function(e,t,a){return 0===a?"[".concat(t,"]"):"".concat(e,".children[").concat(t,"]")}),"");(0,L.default)(a,"".concat(r,".children")).push(t)}else a.push(t);e.props.store.isAddingStep=!1,e.handleSetValue()}}}}),_=(0,I.default)(u.prototype,"handleDeleteStep",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a,r){return function(){var n=r?e.props.activeStage.when.conditions:e.steps;if(a.length){var l=a.reduce((function(e,t,a){return 0===a?"[".concat(t,"]"):"".concat(e,".children[").concat(t,"]")}),"");(0,L.default)(n,"".concat(l,".children")).splice(t,1)}else n.splice(t,1);e.setState({index:1}),e.handleSetValue()}}}}),O=(0,I.default)(u.prototype,"handleSortSteps",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return function(a){if(t.length){var r=t.reduce((function(e,t,a){return 0===a?"[".concat(t,"]"):"".concat(e,".children[").concat(t,"]")}),""),n=(0,L.default)(e.steps,"".concat(r,".children")),l=a.map((function(e){return n.find((function(t,a){return JSON.stringify(t)+a===e}))}));(0,V.default)(e.steps,"".concat(r,".children"),l)}else{var u=e.steps,o=a.map((function(e){return u.find((function(t,a){return JSON.stringify(t)+a===e}))}));(0,V.default)(e.props.activeStage,"branches[0].steps",o)}e.handleSetValue()}}}}),l=u))||l;a.default=J},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(3)),p=r(25),m=r(58),h=n(r(1)),v=r(5),y=n(r(185)),g=n(r(745)),b=r(1331),E=n(r(1016)),_=n(r(1015)),O=n(r(1334));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var k={withCredentials:!0,dir:!0,container:!0,timeout:!0,withSonarQubeEnv:!0,not:!0,allOf:!0,anyOf:!0},C=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).step=(0,v.toJS)(e.props.step),e.toggleAddStep=function(t,a){return function(){e.context.toggleAddStep(t,a)()}},e.handleEdit=function(t,a,r,n){return function(){e.context.handleEdit(t,a,r,n)()}},e.handleDeleteStep=function(t,a,r){return function(){e.context.handleDeleteStep(t,a,r)()}},e}return(0,o.default)(r,[{key:"shouldComponentUpdate",value:function(e){if("condition"===this.props.listType)return!0;var t=(0,v.toJS)(e.step);return!(0,g.default)(this.step,t)&&(this.step=(0,y.default)((0,v.toJS)(e.step)),!0)}},{key:"render",value:function(){var e=this.props,a=e.step,r=e.index,n=e.zIndex,u=e.listType,o=e.isLast;return f.default.createElement("div",{key:JSON.stringify(a.name)+r,className:(0,d.default)("pipelineCard__item-".concat(r),_.default.pipelineCard__item),"data-id":JSON.stringify(a)+r,style:o?{border:"none"}:null},f.default.createElement("span",{className:E.default.delete,onClick:this.handleDeleteStep(r,n,u)},f.default.createElement(p.Icon,{name:"trash",clickable:!0})),u||!function(e){return m.PIPELINE_TASKS.All.includes(e)||"sh"===e}(a.name)?null:f.default.createElement("span",{className:E.default.edit,onClick:this.handleEdit(n,r,a,u)},f.default.createElement(p.Icon,{name:"wrench",clickable:!0})),f.default.createElement("div",{style:{color:"#329dce"},className:_.default.content__title},t(a.name)),(0,b.renderStepArgs)((0,v.toJS)(a)),f.default.createElement(O.default,{steps:a.children,zIndex:[].concat((0,l.default)(n),[r]),listType:u}),a.name in k?f.default.createElement("div",{className:_.default.addSteps,onClick:this.toggleAddStep([].concat((0,l.default)(n),[r]),u)},f.default.createElement(p.Icon,{name:"add"}),"  ",u?t("Add nesting ".concat(u,"s")):t("Add nesting steps")):null)}}]),r}(f.default.Component);a.default=C,C.contextTypes={toggleAddStep:h.default.func,handleEdit:h.default.func,handleDeleteStep:h.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p=n(r(109)),m=n(r(21)),h=n(r(49)),v=n(r(50)),y=n(r(91)),g=n(r(12)),b=n(r(13)),E=n(r(135)),_=n(r(19)),O=n(r(20)),S=n(r(18)),k=n(r(74)),C=(n(r(92)),n(r(0))),R=n(r(3)),w=r(25),P=r(5),D=r(70),T=r(801),N=n(r(1084)),I=r(58),A=r(2284),x=n(r(1016)),j=n(r(2314));function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,S.default)(e);if(t){var n=(0,S.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,O.default)(this,a)}}var L={not:!0,allOf:!0,anyOf:!0},U={echo:"loudspeaker",mail:"mail",shell:"terminal",container:"terminal",checkout:"network-router",git:"network-router",cd:"rocket",withCredentials:"key",kubernetesDeploy:"kubernetes",branch:"network-router",timeout:"clock",withSonarQubeEnv:"network"},F=(0,D.observer)((u=function(e){(0,_.default)(r,e);var a=M(r);function r(e){var n;return(0,g.default)(this,r),n=a.call(this,e),(0,y.default)(n,"activeTab",o,(0,E.default)(n)),(0,y.default)(n,"handleBack",i,(0,E.default)(n)),(0,y.default)(n,"handleAddTask",c,(0,E.default)(n)),(0,y.default)(n,"handleCancel",s,(0,E.default)(n)),(0,y.default)(n,"handleChangeActiveTab",f,(0,E.default)(n)),(0,y.default)(n,"handleAddStep",d,(0,E.default)(n)),n.handleSetValue=function(){n.stage.name=n.stageName||n.stage.name,n.props.store.setValue(n.stage)},n.handleCreateCredential=function(){var e=(0,v.default)(h.default.mark((function e(t,a){var r,l,u;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.store.params,l=r.devops,u=r.cluster,e.next=3,n.props.store.createCredential(t,{devops:l,cluster:u});case 3:a(),n.hideCreateCredential();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.hideCreateCredential=(0,v.default)(h.default.mark((function e(){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.store.getCredentials();case 2:n.setState({showCredential:!1});case 3:case"end":return e.stop()}}),e)}))),n.handleShowCredential=function(){n.setState({showCredential:!0})},n.renderStepsModal=function(){var e=n.props.store.params,t=e.devops,a=e.cluster,r=n.props.store,l=r.edittingData;return"condition"===r.isAddingStep?C.default.createElement(C.default.Fragment,null,C.default.createElement(A.Branch,{visible:n.state.isShowbranch,onAddStep:n.handleAddStep("branch"),onCancel:n.handleCancel("branch"),edittingData:l}),C.default.createElement(A.Environment,{visible:n.state.isShowenvironment,onAddStep:n.handleAddStep("environment"),onCancel:n.handleCancel("environment"),edittingData:l}),C.default.createElement(A.Expression,{visible:n.state.isShowexpression,onAddStep:n.handleAddStep("expression"),onCancel:n.handleCancel("expression"),edittingData:l})):C.default.createElement(C.default.Fragment,null,C.default.createElement(A.Echo,{visible:n.state.isShowecho,onAddStep:n.handleAddStep("echo"),onCancel:n.handleCancel("echo"),edittingData:l}),C.default.createElement(A.Shell,{visible:n.state.isShowshell,onAddStep:n.handleAddStep("shell"),onCancel:n.handleCancel("shell"),edittingData:l}),C.default.createElement(A.Dir,{visible:n.state.isShowdir,onAddStep:n.handleAddStep("dir"),onCancel:n.handleCancel("dir"),edittingData:l}),C.default.createElement(A.Container,{visible:n.state.isShowcontainer,onAddStep:n.handleAddStep("container"),onCancel:n.handleCancel("container"),edittingData:l}),C.default.createElement(A.ArchiveArtifacts,{visible:n.state.isShowarchiveArtifacts,onAddStep:n.handleAddStep("archiveArtifacts"),onCancel:n.handleCancel("archiveArtifacts"),edittingData:l}),C.default.createElement(A.Git,{visible:n.state.isShowgit,showCredential:n.handleShowCredential,onAddStep:n.handleAddStep("git"),onCancel:n.handleCancel("git"),edittingData:l,store:n.props.store}),C.default.createElement(A.CD,{visible:n.state.isShowcd,showCredential:n.handleShowCredential,onAddStep:n.handleAddStep("cd"),onCancel:n.handleCancel("cd"),edittingData:l,store:n.props.store}),C.default.createElement(A.Checkout,{visible:n.state.isShowcheckout,showCredential:n.handleShowCredential,onAddStep:n.handleAddStep("checkout"),onCancel:n.handleCancel("checkout"),edittingData:l,store:n.props.store}),C.default.createElement(A.InputStep,{devops:t,cluster:a,visible:n.state.isShowinput,edittingData:l,onAddStep:n.handleAddStep("input"),onCancel:n.handleCancel("input")}),C.default.createElement(A.WithCredentials,{visible:n.state.isShowwithCredentials,onAddStep:n.handleAddStep("withCredentials"),onCancel:n.handleCancel("withCredentials"),store:n.props.store,showCredential:n.handleShowCredential,edittingData:l}),C.default.createElement(A.KubernetesDeploy,{visible:n.state.isShowkubernetesDeploy,onAddStep:n.handleAddStep("kubernetesDeploy"),onCancel:n.handleCancel("kubernetesDeploy"),store:n.props.store,showCredential:n.handleShowCredential,edittingData:l}),C.default.createElement(A.Timeout,{visible:n.state.isShowtimeout,onAddStep:n.handleAddStep("timeout"),onCancel:n.handleCancel("timeout"),edittingData:l}),C.default.createElement(N.default,{visible:n.state.showCredential,onOk:n.handleCreateCredential,onCancel:n.hideCreateCredential,devops:t,cluster:a,credentialType:n.state.isShowkubernetesDeploy?"kubeconfig":""}),C.default.createElement(A.Sonarqube,{visible:n.state.isShowwithSonarQubeEnv,onAddStep:n.handleAddStep("withSonarQubeEnv"),onCancel:n.handleCancel("withSonarQubeEnv"),edittingData:l}),C.default.createElement(A.WaitForQualityGate,{visible:n.state.isShowwaitForQualityGate,onAddStep:n.handleAddStep("waitForQualityGate"),onCancel:n.handleCancel("waitForQualityGate"),edittingData:l}),C.default.createElement(A.Script,{visible:n.state.isShowscript,onAddStep:n.handleAddStep("script"),onCancel:n.handleCancel("script"),edittingData:l}),C.default.createElement(A.Mail,{visible:n.state.isShowmail,onAddStep:n.handleAddStep("mail"),onCancel:n.handleCancel("mail"),edittingData:l}))},n.renderSider=function(){return"condition"===n.props.store.isAddingStep?C.default.createElement("div",{className:x.default.sheet},C.default.createElement("div",{className:x.default.title},C.default.createElement("span",{className:(0,R.default)("custom-icon",j.default.back),onClick:n.handleBack},C.default.createElement(T.ReactComponent,null)),t("Add conditions")),C.default.createElement("div",{className:j.default.taskList},I.PIPELINE_CONDITIONS.map((function(e){return C.default.createElement("div",{className:j.default.task,key:e,onClick:n.handleAddTask(e)},C.default.createElement("div",{className:j.default.taskIcon},C.default.createElement(w.Icon,{name:U[e]||"cdn",size:24})),C.default.createElement("div",{className:j.default.taskInfo},C.default.createElement("div",{className:j.default.taskName},e),C.default.createElement("div",{className:j.default.desc},n.taskDescs[e]||"-")))})))):C.default.createElement("div",{className:x.default.sheet},C.default.createElement("div",{className:x.default.title},C.default.createElement("span",{className:(0,R.default)("custom-icon",j.default.back),onClick:n.handleBack},C.default.createElement(T.ReactComponent,null)),t("Add Step")),C.default.createElement("div",{className:j.default.tabs},Object.keys(I.PIPELINE_TASKS).map((function(e){return C.default.createElement("div",{key:e,className:(0,R.default)(j.default.tab,(0,m.default)({},j.default.tab_active,n.activeTab===e)),onClick:n.handleChangeActiveTab(e)},t(e))}))),C.default.createElement("div",{className:j.default.taskList},I.PIPELINE_TASKS[n.activeTab].map((function(e){return C.default.createElement("div",{className:j.default.task,key:e,onClick:n.handleAddTask(e)},C.default.createElement("div",{className:j.default.taskIcon},C.default.createElement(w.Icon,{name:U[e]||"cdn",size:24})),C.default.createElement("div",{className:j.default.taskInfo},C.default.createElement("div",{className:j.default.taskName},C.default.createElement("span",null,t(e)),"kubernetesDeploy"===e&&C.default.createElement(w.Tooltip,{content:t("KUBERNETES_DEPLOY_DEPRECATED_TIP")},C.default.createElement(w.Icon,{name:"exclamation",size:16,color:{primary:"#fff",secondary:"#F5A623"}}))),C.default.createElement("div",{className:j.default.desc},n.taskDescs[e]||"-")))}))))},n.taskDescs={git:t("Pull code by Git"),shell:t("You can execute shell commands or windows batch commands in the build."),container:t("Specify a container to add nested tasks to execute inside the container"),echo:t("Send messages in the build"),mail:t("Send messages by email"),checkout:t("CHECKOUT_DESC"),dir:t("Change Current Directory"),archiveArtifacts:t("Save Artifact"),cleanWs:t("Clean Workspace"),input:t("REVIEW_DESC"),withCredentials:t("Load credentials into environment variables"),kubernetesDeploy:t("Deploy resources to the Kubernetes cluster"),timeout:t("Executes the code inside the block with a determined time out limit."),branch:t("Current branch name must match the input value"),environment:t("The environment variable entered before running the pipeline is match the current value."),expression:t("Enter an expression"),not:t("Negative prefix"),allOf:t("Internal nesting conditions must be matched"),anyOf:t("Internal nested conditions only need to satisfy one"),withSonarQubeEnv:t("withSonarQubeEnv_DESC"),waitForQualityGate:t("waitForQualityGate_DESC"),script:t("script_DESC"),cd:t("CD_STEP_DESC")},n.state=[].concat((0,p.default)(I.PIPELINE_TASKS.All),(0,p.default)(I.PIPELINE_CONDITIONS)).reduce((function(e,t){return e["isShow".concat(t)]=!1,e}),{}),n.state.showCredential=!1,n}return(0,b.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.store.edittingData.type,t="sh"===e?"shell":e;this.setState((0,m.default)({},"isShow".concat(t),!0))}},{key:"render",value:function(){return C.default.createElement(C.default.Fragment,null,this.props.isEditMode?null:this.renderSider(),this.renderStepsModal())}}]),r}(C.default.Component),o=(0,k.default)(u.prototype,"activeTab",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"All"}}),i=(0,k.default)(u.prototype,"handleBack",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.store.isAddingStep=!1}}}),c=(0,k.default)(u.prototype,"handleAddTask",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return function(){t in L?e.props.onAddNoInputTask(t):e.setState((0,m.default)({},"isShow".concat(t),!0))}}}}),s=(0,k.default)(u.prototype,"handleCancel",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return function(){e.setState((0,m.default)({},"isShow".concat(t),!1)),e.props.onCancel()}}}}),f=(0,k.default)(u.prototype,"handleChangeActiveTab",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return function(){e.activeTab=t}}}}),d=(0,k.default)(u.prototype,"handleAddStep",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return function(a){e.props.onAddStep(a),e.setState((0,m.default)({},"isShow".concat(t),!1))}}}}),l=u))||l;a.default=F},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Echo",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Shell",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Dir",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ArchiveArtifacts",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Git",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Checkout",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"InputStep",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"WithCredentials",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"KubernetesDeploy",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"Timeout",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"Branch",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Environment",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"Expression",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"Sonarqube",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"Script",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"WaitForQualityGate",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"Mail",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"CD",{enumerable:!0,get:function(){return O.default}});var n=r(a(2285)),l=r(a(2286)),u=r(a(2287)),o=r(a(2288)),i=r(a(2289)),c=r(a(2290)),s=r(a(2291)),f=r(a(2292)),d=r(a(2293)),p=r(a(2294)),m=r(a(2295)),h=r(a(2296)),v=r(a(2297)),y=r(a(2298)),g=r(a(2299)),b=r(a(2300)),E=r(a(2301)),_=r(a(2302)),O=r(a(2303))},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=n(r(274)),m=n(r(759));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.formRef.current.getData();t.formRef.current.validate((function(){var a=Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:e[t].trim()}}}));t.props.onAddStep({name:"echo",arguments:a.filter((function(e){return""!==e.value.value}))})}))},t.formRef=s.default.createRef(),t.state={formData:{}},t}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return s.default.createElement(p.default,{width:680,bodyClassName:m.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("Print message")},s.default.createElement(d.Form,{data:this.state.formData,ref:this.formRef},s.default.createElement(d.Form.Item,{label:t("message"),rules:[{required:!0,message:t("This parameter is required")}]},s.default.createElement(d.TextArea,{name:"message"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"echo"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{})}:null}}]),r}(s.default.Component);a.default=v,v.propTypes={name:f.default.string},v.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(16)),v=r(70),y=n(r(274)),g=n(r(795)),b=n(r(759));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,v.observer)((o=u=function(e){(0,s.default)(r,e);var a=E(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleChange=function(e){t.isInputed=!0,t.newValue=e},t.handleOk=function(){var e=t.state.initValue;t.props.onAddStep({name:"sh",arguments:[{key:"script",value:{isLiteral:!0,value:t.isInputed?t.newValue:e}}]})},t.state={value:""},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.state.value;return p.default.createElement(y.default,{width:680,bodyClassName:b.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("shell")},p.default.createElement(g.default,{className:b.default.CodeEditor,name:"script",mode:"yaml",value:n,onChange:this.handleChange}))}}],[{key:"getDerivedStateFromProps",value:function(e){if("sh"===e.edittingData.type){var t=(0,h.default)(e.edittingData.data,"[0].value.value","");return{value:t,initValue:t}}return null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(16)),v=r(70),y=n(r(274)),g=r(25),b=n(r(759));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,v.observer)((o=u=function(e){(0,s.default)(r,e);var a=E(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.formRef.current.getData();t.props.onAddStep({name:"dir",arguments:{isLiteral:!0,value:e.path},children:[]})},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(y.default,{width:680,bodyClassName:b.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("dir")},p.default.createElement(g.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(g.Form.Item,{label:t("PATH")},p.default.createElement(g.Input,{name:"path"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"dir"===e.edittingData.type?{formData:{path:(0,h.default)(e.edittingData,"data.value","")}}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(16)),v=r(70),y=n(r(274)),g=r(25),b=n(r(759));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,v.observer)((o=u=function(e){(0,s.default)(r,e);var a=E(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.formRef.current.getData();t.formRef.current.validate((function(){t.props.onAddStep({name:"container",arguments:{isLiteral:!0,value:e.name},children:[]})}))},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(y.default,{width:680,bodyClassName:b.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("container")},p.default.createElement(g.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(g.Form.Item,{label:t("name"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},p.default.createElement(g.Input,{name:"name"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"container"===e.edittingData.type?{formData:{name:(0,h.default)(e.edittingData,"data.value","")}}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=n(r(274)),y=r(25),g=n(r(759));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(0,h.observer)((o=u=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.formRef.current.getData(),a=Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:e[t]}}}));t.props.onAddStep({name:"archiveArtifacts",arguments:a})},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(v.default,{width:680,bodyClassName:g.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("archiveArtifacts")},p.default.createElement(y.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(y.Form.Item,{label:t("ARTIFACT_PL")},p.default.createElement(y.Input,{name:"artifacts"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"archiveArtifacts"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{})}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(109)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(1)),v=r(70),y=n(r(191)),g=r(25),b=n(r(274)),E=n(r(759));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O=(0,v.observer)((o=u=function(e){(0,f.default)(r,e);var a=_(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).handleOk=function(){var e=n.formRef.current.getData();n.formRef.current.validate((function(){var t=Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:e[t]}}}));n.props.onAddStep({name:"git",arguments:[].concat((0,i.default)(t.filter((function(e){return""!==e.value.value}))),[{key:"changelog",value:{isLiteral:!0,value:!0}},{key:"poll",value:{isLiteral:!0,value:!1}}])})}))},n.getCredentialsListData=function(e){return n.props.store.getCredentials(e)},n.getCredentialsList=function(){return(0,i.default)(n.props.store.credentialsList.data.map((function(e){return{label:e.name,value:e.name,type:e.type,disabled:!1}})))},n.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return m.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",m.default.createElement(g.Tag,{type:n?"":"warning"},"ssh"===r?"SSH":t(r)))},n.formRef=m.default.createRef(),n.state={formData:{}},n}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.props.store.credentialsList;return m.default.createElement(b.default,{width:680,bodyClassName:E.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:"Git"},m.default.createElement(g.Form,{data:this.state.formData,ref:this.formRef},m.default.createElement(g.Form.Item,{label:t("Url"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},m.default.createElement(g.Input,{name:"url"})),m.default.createElement(g.Form.Item,{label:t("CREDENTIAL_NAME"),desc:m.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),m.default.createElement("span",{className:E.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL")))},m.default.createElement(g.Select,{name:"credentialsId",options:this.getCredentialsList(),pagination:(0,y.default)(n,["page","limit","total"]),isLoading:n.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,searchable:!0,clearable:!0})),m.default.createElement(g.Form.Item,{label:t("BRANCH_SI")},m.default.createElement(g.Input,{name:"branch"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.edittingData&&"git"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{})}:null}}]),r}(m.default.Component),u.propTypes={name:h.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=O},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(109)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(1)),v=n(r(191)),y=r(70),g=r(25),b=n(r(274)),E=r(912),_=n(r(759));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var S=(0,y.observer)((o=u=function(e){(0,f.default)(r,e);var a=O(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).handleOk=function(){n.formRef.current.validate((function(){n.props.onAddStep({name:"checkout",arguments:[{key:"scm",value:{isLiteral:!1,value:"[$class: 'SubversionSCM', locations: [[cancelProcessOnExternalsFail: true,  ".concat(n.state.formData.credentialsId?"credentialsId: '".concat(n.state.formData.credentialsId,"',"):""," depthOption: 'infinity', ignoreExternalsOption: true, local: '.', remote: '").concat(n.state.formData.remote,"']], quietOperation: true, workspaceUpdater: [$class: 'UpdateUpdater']]")}},{key:"poll",value:{isLiteral:!0,value:!1}}]})}))},n.getCredentialsListData=function(e){return n.props.store.getCredentials(e)},n.getCredentialsList=function(){return(0,i.default)(n.props.store.credentialsList.data.map((function(e){return{label:e.name,value:e.name,type:e.type,disabled:!n.props.store.isPassWordCredentials(e.type)}})))},n.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return m.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",m.default.createElement(g.Tag,{type:n?"":"warning"},"ssh"===r?"SSH":t(r)))},n.formRef=m.default.createRef(),n.state={formData:{}},n}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.props.store.credentialsList;return m.default.createElement(b.default,{width:680,bodyClassName:_.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("checkout (svn)")},m.default.createElement(g.Form,{data:this.state.formData,ref:this.formRef},m.default.createElement(g.Form.Item,{label:t("CREDENTIAL_NAME"),desc:m.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),m.default.createElement("span",{className:_.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL")))},m.default.createElement(g.Select,{name:"credentialsId",options:this.getCredentialsList(),pagination:(0,v.default)(n,["page","limit","total"]),isLoading:n.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,searchable:!0,clearable:!0})),m.default.createElement(g.Form.Item,{label:t("REMOTE_REPOSITORY_URL"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},m.default.createElement(g.Input,{name:"remote"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"checkout"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){if("scm"===t.key){var a=t.value.value;a&&Object.assign(e,(0,E.groovyToJS)(a))}return e[t.key]=t.value.value,e}),{})}:null}}]),r}(m.default.Component),u.propTypes={name:h.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s=n(r(91)),f=n(r(12)),d=n(r(13)),p=n(r(135)),m=n(r(19)),h=n(r(20)),v=n(r(18)),y=n(r(74)),g=(n(r(92)),n(r(0))),b=n(r(1)),E=n(r(650)),_=n(r(281)),O=n(r(32)),S=n(r(23)),k=r(5),C=r(70),R=r(3674),w=r(25),P=n(r(274)),D=n(r(278)),T=n(r(759));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var I=(0,C.observer)((c=i=function(e){(0,m.default)(r,e);var a=N(r);function r(e){var t;(0,f.default)(this,r),(t=a.call(this,e)).handleMessageChange=function(e){t.setState({value:e.target.value})},t.handleMessageSubmitter=function(){var e=(0,_.default)((t.state.value.match(/@([\w-.]*)?/g)||[]).map((function(e){return e.slice(1)})));t.setState({submitter:e})},t.getDefaultData=function(){var e=t.props.edittingData,a="",r=[],n=(0,k.toJS)(e);return(0,O.default)(n)||(0,O.default)(n.data)||!(0,S.default)(n.data)||n.data.forEach((function(e){"message"===e.key&&(a=e.value.value),"submitter"===e.key&&(r=e.value.value.split(", "))})),{value:a,submitter:r}},(0,s.default)(t,"fetchUsers",o,(0,p.default)(t)),t.getUsers=function(){var e=t.props,a=e.devops,r=e.cluster;t.setState({loading:!0}),t.memberStore.fetchList({devops:a,cluster:r}).then((function(e){return t.setState({loading:!1}),(0,O.default)(e)?[]:e.map((function(e){return{id:e.username,display:e.username,sort:e.username.indexOf((0,k.toJS)(t.query))}})).sort((function(e,t){return e.sort>=0&&t.sort>=0?e.sort-t.sort:t.sort-e.sort}))})).then(t.callback)},t.handleOk=function(){t.props.onAddStep({name:"input",arguments:[{key:"message",value:{isLiteral:!0,value:t.state.value}},{key:"submitter",value:{isLiteral:!0,value:t.state.submitter.join(", ")}}]})},t.memberStore=new D.default;var n=t.getDefaultData(),l=n.value,u=n.submitter;return t.state={loading:!1,value:l,submitter:u},t}return(0,d.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return g.default.createElement(P.default,{width:680,bodyClassName:T.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("input")},g.default.createElement(w.Alert,{type:"info",icon:"information",className:T.default.info,message:t("INPUT_DESC")}),g.default.createElement(w.Form,{data:this.formData,ref:this.formRef},g.default.createElement(w.Form.Item,{label:t("MESSAGE"),desc:t("INPUT_MESSAGE_DESC"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},g.default.createElement(R.MentionsInput,{className:"mention-input",value:this.state.value,onChange:this.handleMessageChange,onBlur:this.handleMessageSubmitter,placeholder:t("@somebody to help review")},g.default.createElement(R.Mention,{data:this.fetchUsers,loading:this.state.loading,type:"user",appendSpaceOnAdd:!0,displayTransform:function(e){return"@".concat(e)},markup:"@__id__ "})))))}}]),r}(g.default.Component),i.propTypes={name:b.default.string},i.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},u=c,o=(0,y.default)(u.prototype,"fetchUsers",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){t&&(e.debounced||(e.debounced=(0,E.default)(e.getUsers,300)),e.query=t,e.callback=a,e.debounced())}}}),l=u))||l;a.default=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s=n(r(109)),f=n(r(91)),d=n(r(12)),p=n(r(13)),m=n(r(135)),h=n(r(19)),v=n(r(20)),y=n(r(18)),g=n(r(74)),b=(n(r(92)),n(r(0))),E=n(r(1)),_=n(r(16)),O=n(r(191)),S=r(5),k=r(70),C=r(25),R=n(r(274)),w=r(912),P=n(r(759));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var T=function(e,t){var a=Object.keys(e).reduce((function(t,a){return"".concat(t).concat(a," : '").concat(e[a],"' ,")}),"");return"${[".concat(t,"(").concat(a,")]}")},N={secret_text:"string",username_password:"usernamePassword",ssh:"sshUserPrivateKey",kubeconfig:"kubeconfigContent"},I=(0,k.observer)((c=i=function(e){(0,h.default)(r,e);var a=D(r);function r(e){var n;return(0,d.default)(this,r),(n=a.call(this,e)).initEditor=function(){var e=n.props.edittingData;if("withCredentials"===e.type){var t=(0,_.default)(e,"data.value","");if(t){var a=(0,w.groovyToJS)(t),r=function(e){var t=/\$\{\[([\w-]*)\(/,a=e.match(t)&&e.match(t)[1];return a?Object.entries(N).find((function(e){return e[1]===a}))[0]:null}(t);n.setState({formData:a,credentialType:r})}}},(0,f.default)(n,"handleCredentialChange",o,(0,m.default)(n)),n.handleOk=function(){var e=n.formRef.current.getData();n.formRef.current.validate((function(){n.props.onAddStep({name:"withCredentials",arguments:{isLiteral:!1,value:T(e,N[n.state.credentialType])},children:[]})}))},n.renderParams=function(){switch(n.state.credentialType){case"username_password":return b.default.createElement(b.default.Fragment,null,b.default.createElement(C.Form.Item,{label:t("Password Variable")},b.default.createElement(C.Input,{name:"passwordVariable"})),b.default.createElement(C.Form.Item,{label:t("Username Variable")},b.default.createElement(C.Input,{name:"usernameVariable"})));case"secret_text":return b.default.createElement(b.default.Fragment,null,b.default.createElement(C.Form.Item,{label:t("Text Variable")},b.default.createElement(C.Input,{name:"variable"})));case"ssh":return b.default.createElement(b.default.Fragment,null,b.default.createElement(C.Form.Item,{label:t("key File Variable")},b.default.createElement(C.Input,{name:"keyFileVariable"})),b.default.createElement(C.Form.Item,{label:t("passphrase Variable")},b.default.createElement(C.Input,{name:"passphraseVariable"})),b.default.createElement(C.Form.Item,{label:t("Username Variable")},b.default.createElement(C.Input,{name:"usernameVariable"})));case"kubeconfig":return b.default.createElement(C.Form.Item,{label:t("Kubeconfig Variable")},b.default.createElement(C.Input,{name:"variable"}));default:return null}},n.getCredentialsListData=function(e){return n.props.store.getCredentials(e)},n.getCredentialsList=function(){return(0,s.default)(n.props.store.credentialsList.data.map((function(e){return{label:e.name,value:e.name,type:e.type,disabled:!1}})))},n.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return b.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",b.default.createElement(C.Tag,{type:n?"":"warning"},"ssh"===r?"SSH":t(r)))},n.formRef=b.default.createRef(),n.state={formData:{},credentialType:"username_password"},n}return(0,p.default)(r,[{key:"componentDidMount",value:function(){this.props.store.getCredentials(),this.initEditor()}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.props.store.credentialsList;return b.default.createElement(R.default,{width:680,bodyClassName:P.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("withCredentials")},b.default.createElement(C.Form,{data:this.state.formData,ref:this.formRef},b.default.createElement(C.Form.Item,{label:t("CREDENTIAL_NAME"),rules:[{required:!0,message:t("PARAM_REQUIRED")}],desc:b.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),b.default.createElement("span",{className:P.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL")))},b.default.createElement(C.Select,{name:"credentialsId",options:this.getCredentialsList(),pagination:(0,O.default)(n,["page","limit","total"]),isLoading:n.isLoading,onFetch:this.getCredentialsListData,onChange:this.handleCredentialChange,optionRenderer:this.optionRender,valueRenderer:this.optionRender,searchable:!0,clearable:!0})),this.renderParams()))}}]),r}(b.default.Component),i.propTypes={name:E.default.string},i.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},u=c,o=(0,g.default)(u.prototype,"handleCredentialChange",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=e.getCredentialsList().find((function(e){return e.value===t})),r=(0,_.default)(a,"type","username_password");e.setState({credentialType:r,formData:{credentialsId:t}})}}}),l=u))||l;a.default=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m=n(r(21)),h=n(r(109)),v=n(r(136)),y=n(r(91)),g=n(r(12)),b=n(r(13)),E=n(r(135)),_=n(r(19)),O=n(r(20)),S=n(r(18)),k=n(r(74)),C=(n(r(92)),n(r(192))),R=n(r(0)),w=n(r(1)),P=n(r(32)),D=n(r(191)),T=n(r(16)),N=n(r(73)),I=n(r(68)),A=r(5),x=r(70),j=r(25),M=n(r(274)),L=n(r(759));function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){(0,m.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,S.default)(e);if(t){var n=(0,S.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,O.default)(this,a)}}var q=function(e){var t=Object.keys(e).map((function(t){if("object"===(0,C.default)(e[t])){var a=Object.keys(e[t]).map((function(a){return"".concat(a,": '").concat(e[t][a],"'")})).join(", ");return"".concat(t,": [[").concat(a,"]]")}return"".concat(t,": '").concat(e[t],"'")})).join(", ");return"[".concat(t,"]")},B=(0,x.observer)((p=d=function(e){(0,_.default)(r,e);var a=V(r);function r(){var e;(0,g.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return e=a.call.apply(a,[this].concat(l)),(0,y.default)(e,"formData",o,(0,E.default)(e)),e.formRef=R.default.createRef(),(0,y.default)(e,"dockerCredentials",i,(0,E.default)(e)),(0,y.default)(e,"isShowAdvenced",c,(0,E.default)(e)),(0,y.default)(e,"isShowDetail",s,(0,E.default)(e)),(0,y.default)(e,"handleCredentialChange",f,(0,E.default)(e)),e.handleAddDockerCredential=function(){e.dockerCredentials.push({key:"".concat(Math.random())})},e.initData=function(){var t=e.formData.dockerCredentials;if(e.dockerCredentials=[],t){var a=t.match(/\$\{(\[(.+)\])\}$/),r=(0,T.default)(a,"[2]","").match(/(\[(.+)\])+/g);if((0,P.default)(r))e.dockerCredentials=[];else{var n=r[0].split("],[").map((function(t){var a={};return t.replace("[","").replace("]","").split(",").forEach((function(t){var r=e.handleStrToArr(t),n=(0,v.default)(r,2),l=n[0],u=n[1];a.key=u,a[l]=u})),a}));e.dockerCredentials=n}}else e.dockerCredentials=[]},e.handleStrToArr=function(e){var t=e.split(":"),a=(0,v.default)(t,2),r=a[0],n=a[1];return[r=r.trim(),n=n.trim().replace(/'/g,"")]},e.showAdvencedSetting=function(){e.isShowAdvenced=!0},e.handleRemove=function(t){return function(){e.dockerCredentials=e.dockerCredentials.filter((function(e){return e.key!==t}))}},e.toggleDesc=function(){e.isShowDetail=!e.isShowDetail},e.handleOk=function(){e.formRef.current.validate((function(){var t=Object.keys(e.formData).map((function(t){return{key:t,value:{isLiteral:!0,value:e.formData[t]}}}));if(e.isShowAdvenced){var a=e.dockerCredentials.reduce((function(t,a,r){return delete a.key,r===e.dockerCredentials.length-1?"".concat(t+q(a)):"".concat(t+q(a),",")}),"");if(!(0,P.default)(a)||"[]"!==a){var r=t.find((function(e){return"dockerCredentials"===e.key}));r?((0,N.default)(r,"value.value","${[".concat(a,"]}")),(0,N.default)(r,"value.isLiteral",!1)):t.push({key:"dockerCredentials",value:{isLiteral:!1,value:"${[".concat(a,"]}")}})}}e.props.onAddStep({name:"kubernetesDeploy",arguments:t.filter((function(e){return""!==e.value.value}))})}))},e.renderDockerCredentials=function(){var a=e.props.store.credentialsList;return R.default.createElement("div",{className:L.default.dockerCredentialsContent},R.default.createElement("div",{className:L.default.dockerCredentialsContent__title},t("Kubernetes Secrets")),R.default.createElement(j.Form.Item,{label:t("Kubernetes Namespace for Secret")},R.default.createElement(j.Input,{name:"secretNamespace"})),R.default.createElement(j.Form.Item,{label:t("SECRET")},R.default.createElement(j.Input,{name:"secretName"})),R.default.createElement("div",{className:L.default.dockerCredentialsContent__title},t("Docker Container Registry Credentials")),R.default.createElement("div",null,(0,A.toJS)(e.dockerCredentials).map((function(r){return R.default.createElement("div",{key:r.key,className:L.default.dockerCredentialsContent__content},R.default.createElement(j.Icon,{name:"trash",clickable:!0,className:L.default.dockerCredentialsContent__trashicon,onClick:e.handleRemove(r.key)}),R.default.createElement(j.Form.Item,{label:t("Docker Registry URL")},R.default.createElement(j.Input,{value:r.url,onChange:e.handleCredentialChange(r.key,"url")})),R.default.createElement(j.Form.Item,{label:t("Registry Credentials")},R.default.createElement(j.Select,{value:r.credentialsId,options:e.getRepoCredentialsList(),pagination:(0,D.default)(a,["page","limit","total"]),isLoading:a.isLoading,onFetch:e.getCredentialsListData,optionRenderer:e.optionRender,valueRenderer:e.optionRender,searchable:!0,clearable:!0,onChange:function(t){return e.handleCredentialChange(r.key,"credentialsId")(t)}})))})),R.default.createElement("div",{onClick:e.handleAddDockerCredential,className:L.default.clickable},t("Add another credential"))))},e.getCredentialsListData=function(t){return e.props.store.getCredentials(t)},e.getCredentialsList=function(){return(0,h.default)(e.props.store.credentialsList.data.map((function(t){return{label:t.name,value:t.name,type:t.type,disabled:!e.props.store.isKubeconfigCredentials(t.type)}})))},e.getRepoCredentialsList=function(){return e.getCredentialsList().filter((function(t){return e.props.store.isPassWordCredentials(t.type)})).map((function(e){return F(F({},e),{},{disabled:!1})}))},e.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return R.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",R.default.createElement(j.Tag,{type:n?"default":"warning"},"ssh"===r?"SSH":t(r)))},e.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return R.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",R.default.createElement(j.Tag,{type:n?"default":"warning"},"ssh"===r?"SSH":t(r)))},e}return(0,b.default)(r,[{key:"componentDidMount",value:function(){if("kubernetesDeploy"===this.props.edittingData.type){var e=this.props.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{}),t=e.dockerCredentials,a=e.secretNamespace,r=e.secretName;this.isShowAdvenced=!!(t||a||r),this.formData=e,this.initData()}}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.props.store.credentialsList;return R.default.createElement(M.default,{width:680,bodyClassName:L.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("kubernetesDeploy")},R.default.createElement("div",{className:L.default.desc},t("KUBERNETES_DEPLOY_DESC"),this.isShowDetail?t.html("KUBERNETES_DEPLOY_DESC_MORE"):null,R.default.createElement("span",{className:L.default.clickable,onClick:this.toggleDesc},this.isShowDetail?t("Collapse"):t("More"))),R.default.createElement(j.Form,{className:L.default.KubernetesForm,data:this.formData,ref:this.formRef},R.default.createElement(j.Form.Item,{label:t("Kubeconfig"),rules:[{required:!0,message:t("PARAM_REQUIRED")}],desc:R.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),R.default.createElement("span",{className:L.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL")))},R.default.createElement(j.Select,{name:"kubeconfigId",options:this.getCredentialsList(),pagination:(0,D.default)(n,["page","limit","total"]),isLoading:n.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,searchable:!0,clearable:!0})),R.default.createElement(j.Form.Item,{label:t("Config File Path")},R.default.createElement(j.Input,{name:"configs"})),R.default.createElement(j.Columns,{className:"margin-t12"},R.default.createElement(j.Column,null,R.default.createElement(j.Form.Item,null,R.default.createElement(j.Checkbox,{name:"enableConfigSubstitution",checked:this.formData.enableConfigSubstitution},t("enableConfigSubstitution")))),R.default.createElement(j.Column,null,R.default.createElement(j.Form.Item,null,R.default.createElement(j.Checkbox,{name:"deleteResource",checked:this.formData.deleteResource},t("Delete all resources of the deployment file"))))),this.isShowAdvenced?this.renderDockerCredentials():R.default.createElement("div",{className:L.default.clickable,onClick:this.showAdvencedSetting},t("Show Advanced Settings"))))}}]),r}(R.default.Component),d.propTypes={name:w.default.string},d.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},u=p,o=(0,k.default)(u.prototype,"formData",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{enableConfigSubstitution:!0,deleteResource:!1}}}),i=(0,k.default)(u.prototype,"dockerCredentials",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{key:"default"}]}}),c=(0,k.default)(u.prototype,"isShowAdvenced",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,k.default)(u.prototype,"isShowDetail",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,k.default)(u.prototype,"handleCredentialChange",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){return function(r){e.dockerCredentials=e.dockerCredentials.map((function(e){return e.key===t&&("credentialsId"===a&&(0,I.default)(r)?delete e[a]:e[a]=r&&r.target?r.target.value:r),e}))}}}}),l=u))||l;a.default=B},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=r(25),y=n(r(274)),g=n(r(740)),b=n(r(759));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,h.observer)((o=u=function(e){(0,s.default)(r,e);var a=E(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.formRef.current.getData();t.formRef.current.validate((function(){var a=Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:"time"===t?Number.parseInt(e[t],10):e[t]}}}));t.props.onAddStep({name:"timeout",arguments:a.filter((function(e){return""!==e.value.value})),children:[]})}))},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(y.default,{width:680,bodyClassName:b.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:"timeout"},p.default.createElement(v.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(v.Form.Item,{label:t("time")},p.default.createElement(g.default,{name:"time"})),p.default.createElement(v.Form.Item,{label:t("unit")},p.default.createElement(v.Select,{name:"unit",options:[{value:"NANOSECONDS",label:t("NanoSeconds")},{value:"MICROSECONDS",label:t("MicroSeconds")},{value:"MILLISECONDS",label:t("MilliSeconds")},{value:"SECONDS",label:t("Seconds")},{value:"MINUTES",label:t("Minutes")},{value:"HOURS",label:t("Hours")},{value:"DAYS",label:t("Days")}],defaultValue:"MINUTES"})),p.default.createElement(v.Form.Item,null,p.default.createElement(v.RadioGroup,{name:"activity",defaultValue:!0,options:[{label:t("Timeout after no activity in logs for this block"),value:!0},{label:t("Absolute duration"),value:!1}]}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"timeout"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{})}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=n(r(274)),y=r(25),g=n(r(759));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(0,h.observer)((o=u=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.formRef.current.getData(),a=Object.keys(e).map((function(t){return{isLiteral:!0,value:e[t]}}));t.props.onAddStep({name:"branch",arguments:a[0]})},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(v.default,{width:680,bodyClassName:g.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("BRANCH_SI")},p.default.createElement(y.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(y.Form.Item,{label:t("BRANCH_SI")},p.default.createElement(y.Input,{name:"branch"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"branch"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{})}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=n(r(274)),y=r(25),g=n(r(759));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(0,h.observer)((o=u=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.formRef.current.getData(),a=Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:e[t]}}}));t.props.onAddStep({name:"environment",arguments:a})},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(v.default,{width:680,bodyClassName:g.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("environment")},p.default.createElement(y.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(y.Form.Item,{label:t("Environment name")},p.default.createElement(y.Input,{name:"name"})),p.default.createElement(y.Form.Item,{label:t("Value")},p.default.createElement(y.Input,{name:"value"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"environment"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{})}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=n(r(274)),y=r(25),g=n(r(759));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(0,h.observer)((o=u=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.formRef.current.getData(),a=Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:e[t]}}}));t.props.onAddStep({name:"expression",arguments:a})},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(v.default,{width:680,bodyClassName:g.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("expression")},p.default.createElement(y.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(y.Form.Item,{label:t("expression")},p.default.createElement(y.Input,{name:"scriptBlock"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"expression"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{})}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(16)),v=r(70),y=n(r(274)),g=r(25),b=n(r(759));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,v.observer)((o=u=function(e){(0,s.default)(r,e);var a=E(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=(t.formRef.current||{}).getData();t.formRef.current.validate((function(){t.props.onAddStep({name:"withSonarQubeEnv",arguments:{isLiteral:!0,value:e.name},children:[]})}))},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(y.default,{width:680,bodyClassName:b.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("withSonarQubeEnv")},p.default.createElement(g.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(g.Alert,{type:"info",className:b.default.info,message:t("Load the sonarqube configuration provided by Jenkins into the Pipeline.")}),p.default.createElement(g.Form.Item,{label:t("config name"),rules:[{required:!0,message:t("This parameter is required")}],desc:t("sonar is the default config name.")},p.default.createElement(g.Input,{name:"name",defaultValue:"sonar"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"withSonarQubeEnv"===e.edittingData.type?{formData:{name:(0,h.default)(e.edittingData,"data.value","")}}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string,edittingData:m.default.object},u.defaultProps={edittingData:{},visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(16)),v=r(70),y=n(r(274)),g=n(r(795)),b=n(r(759));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,v.observer)((o=u=function(e){(0,s.default)(r,e);var a=E(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleChange=function(e){t.isInputed=!0,t.newValue=e},t.handleOk=function(){var e=t.state.initValue;t.props.onAddStep({name:"script",arguments:[{key:"scriptBlock",value:{isLiteral:!0,value:t.isInputed?t.newValue:e}}]})},t.state={value:""},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.state.value;return p.default.createElement(y.default,{width:680,bodyClassName:b.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("script")},p.default.createElement(g.default,{className:b.default.CodeEditor,name:"script",mode:"yaml",value:n,onChange:this.handleChange}))}}],[{key:"getDerivedStateFromProps",value:function(e){if("script"===e.edittingData.type){var t=(0,h.default)(e.edittingData.data,"[0].value.value","");return{value:t,initValue:t}}return null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=r(25),y=n(r(274)),g=n(r(759));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(0,h.observer)((o=u=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=(t.formRef.current||{}).getData();t.formRef.current.validate((function(){var a=Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:e[t]}}}));t.props.onAddStep({name:"waitForQualityGate",arguments:a.filter((function(e){return""!==e.value.value}))})}))},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"options",get:function(){return[{label:t("Inspection results do not affect subsequent tasks"),value:"false"},{label:t("Start the follow-up task after the inspection"),value:"true"}]}}]),(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(y.default,{width:680,bodyClassName:g.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("waitForQualityGate")},p.default.createElement(v.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(v.Alert,{type:"info",className:g.default.info,message:t("waitForQualityGate_desc")}),p.default.createElement(v.Form.Item,{label:t("abortPipeline"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},p.default.createElement(v.Select,{name:"abortPipeline",options:this.options,defaultValue:"true"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"waitForQualityGate"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{})}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=n(r(274)),y=r(25),g=n(r(759));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(0,h.observer)((o=u=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.formRef.current.getData();t.formRef.current.validate((function(){var a=Object.keys(e).map((function(t){return{key:t,value:{isLiteral:!0,value:e[t]}}}));t.props.onAddStep({name:"mail",arguments:a.filter((function(e){return""!==e.value.value}))})}))},t.formRef=p.default.createRef(),t.state={formData:{}},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(v.default,{width:680,bodyClassName:g.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("mail")},p.default.createElement(y.Form,{data:this.state.formData,ref:this.formRef},p.default.createElement(y.Form.Item,{label:t("Recipient")},p.default.createElement(y.Input,{name:"to"})),p.default.createElement(y.Form.Item,{label:t("CC")},p.default.createElement(y.Input,{name:"cc"})),p.default.createElement(y.Form.Item,{label:t("Subject"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},p.default.createElement(y.Input,{name:"subject"})),p.default.createElement(y.Form.Item,{label:t("Body"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},p.default.createElement(y.TextArea,{name:"body"}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"mail"===e.edittingData.type?{formData:e.edittingData.data.reduce((function(e,t){return e[t.key]=t.value.value,e}),{})}:null}}]),r}(p.default.Component),u.propTypes={name:m.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(21)),c=n(r(109)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=n(r(1)),y=r(70),g=n(r(274)),b=r(25),E=r(2304),_=n(r(191)),O=n(r(759));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R=(0,y.observer)((o=u=function(e){(0,d.default)(r,e);var a=C(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).getCredentialsListData=function(e){return n.props.store.getCredentials(e)},n.getCredentialsList=function(){return(0,c.default)(n.props.store.credentialsList.data.map((function(e){return{label:e.name,value:e.name,type:e.type,disabled:"username_password"!==e.type}})))},n.getCDListData=function(e){return n.props.store.getCDListData(e)},n.getCDList=function(){return(0,c.default)(n.props.store.cdList.data.map((function(e){return{label:e.name,value:e.name}})))},n.handleOk=function(){var e=n.formRef.current.getData();n.formRef.current.validate((function(){var t=function(e){var t=e.credentialsId,a=e.appName,r=e.devops,n=e.name,l=e.newName,u=e.branch,o=e.tag;return{arguments:{isLiteral:!0,value:"base"},children:[{arguments:{isLiteral:!1,value:"${[usernamePassword(credentialsId : '".concat(t,"' ,passwordVariable : 'PASS' ,usernameVariable : 'USER')]}")},children:[{arguments:[{key:"script",value:{isLiteral:!0,value:"ks app update --app-name ".concat(a," \\\n --app-namespace ").concat(r," \\\n --name ").concat(n," \\\n --newName ").concat(l).concat(o?":".concat(o):""," \\\n --git-password $PASS --git-username=$USER \\\n --git-target-branch ").concat(u)}}],name:"sh"}],name:"withCredentials"}],name:"container"}}(k(k({},e),{},{devops:n.props.store.params.devops}));n.props.onAddStep(t)}))},n.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return h.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",h.default.createElement(b.Tag,{type:n?"default":"warning"},"ssh"===r?"SSH":t(r)))},n.formRef=h.default.createRef(),n.state={formData:{}},n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.getCDListData()}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.props.store,l=n.credentialsList,u=n.cdList;return h.default.createElement(g.default,{width:680,bodyClassName:O.default.body,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("UPDATE_CD_TITLE")},h.default.createElement(b.Form,{data:this.state.formData,ref:this.formRef},h.default.createElement("div",{className:O.default.columns},h.default.createElement(E.Columns,null,h.default.createElement(E.Column,{className:"is-8"},h.default.createElement(b.Form.Item,{label:t("CONTINUOUS_DEPLOYMENT_PL"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},h.default.createElement(b.Select,{name:"appName",options:this.getCDList(),pagination:(0,_.default)(u,["page","limit","total"]),isLoading:u.isLoading,onFetch:this.getCDListData,searchable:!0,clearable:!0}))),h.default.createElement(E.Column,{className:"is-4"},h.default.createElement(b.Form.Item,{label:t("BRANCH_SI"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},h.default.createElement(b.Input,{name:"branch"}))))),h.default.createElement(b.Form.Item,{label:t("ORIGINAL_IMAGE_ADDRESS"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},h.default.createElement(b.Input,{name:"name"})),h.default.createElement("div",{className:O.default.columns},h.default.createElement(E.Columns,null,h.default.createElement(E.Column,{className:"is-8"},h.default.createElement(b.Form.Item,{label:t("NEW_IMAGE_ADDRESS"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},h.default.createElement(b.Input,{name:"newName"}))),h.default.createElement(E.Column,{className:"is-4"},h.default.createElement(b.Form.Item,{label:t("NEW_IMAGE_TAG")},h.default.createElement(b.Input,{name:"tag"}))))),h.default.createElement(b.Form.Item,{label:t("CREDENTIAL_NAME"),desc:h.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),h.default.createElement("span",{className:O.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL"))),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},h.default.createElement(b.Select,{name:"credentialsId",options:this.getCredentialsList(),pagination:(0,_.default)(l,["page","limit","total"]),isLoading:l.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,searchable:!0,clearable:!0}))))}}]),r}(h.default.Component),u.propTypes={name:v.default.string},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},l=o))||l;a.default=R},,,,,,,,,,,function(e,t,a){e.exports={taskList:"_2loGhzv-O4GHTu099n1Cyv",task:"_3H5tvVgBDXf5LETASGtiQX",taskIcon:"asNYafbtn7uKGjr5sY-W7",taskInfo:"T1TGQgJXmgkWz6kfGHnpl",taskName:"HhpjXE4lv1c6-E-Njs0GB",desc:"_1Dc2Z_g9XfSxnUhp4sdhcW",back:"cvvjfvqaVKSa83bk1OARZ",tabs:"_2L811SJ-R9sRJovtFY5HnN",tab:"_3Maur7P1LAsNs0yts_dt3h",tab_active:"_3Xttzou4W6mEktK8OWPKbx"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m,h,v,y,g=n(r(49)),b=n(r(50)),E=n(r(21)),_=n(r(91)),O=n(r(12)),S=n(r(13)),k=n(r(135)),C=n(r(19)),R=n(r(20)),w=n(r(18)),P=(n(r(92)),n(r(74))),D=r(5),T=n(r(16)),N=n(r(73)),I=n(r(738)),A=n(r(24)),x=n(r(32)),j=n(r(23)),M=n(r(185)),L=r(25),U=n(r(941)),F=n(r(788)),V=n(r(1010)),q=r(37);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){(0,E.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,w.default)(e);if(t){var n=(0,w.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,R.default)(this,a)}}var H=function(e){if((0,T.default)(e,"pipeline.stages")){if(e.pipeline.stages=e.pipeline.stages.map((function(e){return e.parallel?(e.parallel=e.parallel.map((function(e){return(0,I.default)(e,"branches[0].id"),delete e.error,delete e.conditionError,delete e.isActive,e})),e):((0,I.default)(e,"branches[0].id"),delete e.error,delete e.conditionError,delete e.isActive,e)})),(0,A.default)(e.pipeline.parameters)&&(0,x.default)(e.pipeline.parameters))delete e.pipeline.parameters;else{var t=(0,T.default)(e,"pipeline.parameters.parameters",[]);!(0,x.default)(t)&&(0,j.default)(t)&&t.forEach((function(e){var a=(0,T.default)(e,"arguments",[]);!(0,x.default)(t)&&(0,j.default)(a)&&a.forEach((function(e){!(0,T.default)(e,"value.value")&&e.key&&(0,N.default)(e,"value.value","")}))}))}return e}},Y=(l=function(e){(0,C.default)(E,e);var a,r,n,l=G(E);function E(){var e;(0,O.default)(this,E);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=l.call.apply(l,[this].concat(a))).credentialStore=new U.default,e.cdStore=new V.default,(0,_.default)(e,"jsonData",u,(0,k.default)(e)),(0,_.default)(e,"activeLineIndex",o,(0,k.default)(e)),(0,_.default)(e,"activeColumnIndex",i,(0,k.default)(e)),(0,_.default)(e,"isAddingStep",c,(0,k.default)(e)),(0,_.default)(e,"edittingData",s,(0,k.default)(e)),(0,_.default)(e,"params",f,(0,k.default)(e)),(0,_.default)(e,"labelDataList",d,(0,k.default)(e)),(0,_.default)(e,"credentialsList",p,(0,k.default)(e)),(0,_.default)(e,"cdList",m,(0,k.default)(e)),(0,_.default)(e,"getCredentials",h,(0,k.default)(e)),(0,_.default)(e,"getCDListData",v,(0,k.default)(e)),(0,_.default)(e,"createCredential",y,(0,k.default)(e)),e}return(0,S.default)(E,[{key:"handleAddBranch",value:function(e){this.jsonData.json.pipeline.stages[e].parallel?this.jsonData.json.pipeline.stages[e].parallel.push(this.newStage):this.jsonData.json.pipeline.stages[e]={name:"default-".concat(e),parallel:[this.jsonData.json.pipeline.stages[e],this.newStage]},this.handleSetInLocalStorage()}},{key:"handleSetInLocalStorage",value:function(){var e=this.params,t=e.devops,a=e.name;this.prevData=localStorage.setItem("".concat(globals.user.username,"-").concat(t,"-").concat(a),JSON.stringify((0,D.toJS)(this.jsonData)))}},{key:"setData",value:function(e){this.jsonData=e,H(this.jsonData.json)}},{key:"insertColumn",value:function(e){this.jsonData.json.pipeline.stages.splice(e,0,this.newStage)}},{key:"setFocus",value:function(e,t){""!==this.activeLineIndex&&this.setActive(this.activeLineIndex,this.activeColumnIndex,void 0),this.activeLineIndex=e,this.activeColumnIndex=t,this.setActive(e,t,!0)}},{key:"setActive",value:function(e,t,a){this.jsonData.json.pipeline.stages[e]&&this.jsonData.json.pipeline.stages[e].parallel?this.jsonData.json.pipeline.stages[e].parallel[t]=z(z({},this.jsonData.json.pipeline.stages[e].parallel[t]),{isActive:a}):this.jsonData.json.pipeline.stages[e]=z(z({},this.jsonData.json.pipeline.stages[e]),{isActive:a})}},{key:"setEdittingData",value:function(e){this.edittingData=(0,M.default)(e)}},{key:"isPassWordCredentials",value:function(e){return"username_password"===e}},{key:"isKubeconfigCredentials",value:function(e){return"kubeconfig"===e}},{key:"clearFocus",value:function(){""!==this.activeLineIndex&&this.setActive(this.activeLineIndex,this.activeColumnIndex,void 0),this.activeLineIndex="",this.activeColumnIndex="",this.edittingData={},this.isAddingStep=!1}},{key:"deleteStage",value:function(){this.jsonData.json.pipeline.stages[this.activeLineIndex].parallel?1===this.jsonData.json.pipeline.stages[this.activeLineIndex].parallel.length?this.jsonData.json.pipeline.stages.splice(this.activeLineIndex,1):2===this.jsonData.json.pipeline.stages[this.activeLineIndex].parallel.length?(this.jsonData.json.pipeline.stages[this.activeLineIndex].parallel.splice(this.activeColumnIndex,1),this.jsonData.json.pipeline.stages[this.activeLineIndex]=this.jsonData.json.pipeline.stages[this.activeLineIndex].parallel[0]):this.jsonData.json.pipeline.stages[this.activeLineIndex].parallel.splice(this.activeColumnIndex,1):this.jsonData.json.pipeline.stages.splice(this.activeLineIndex,1),this.activeLineIndex="",this.activeColumnIndex="",this.handleSetInLocalStorage()}},{key:"setValue",value:function(e){this.jsonData.json.pipeline.stages[this.activeLineIndex].parallel?this.jsonData.json.pipeline.stages[this.activeLineIndex].parallel.splice(this.activeColumnIndex,1,e):this.jsonData.json.pipeline.stages.splice(this.activeLineIndex,1,e),this.handleSetInLocalStorage()}},{key:"convertJsonToJenkinsFile",value:(n=(0,b.default)(g.default.mark((function e(a){var r,n=this;return g.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.cluster,e.abrupt("return",request.post("".concat(this.getDevopsUrlV2({cluster:r}),"/tojenkinsfile"),{json:JSON.stringify(H((0,D.toJS)(this.jsonData.json)))},{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){if(e&&"success"===(0,T.default)(e,"data.result"))return n.jenkinsFile=e.data.jenkinsfile,e;e&&"failure"===(0,T.default)(e,"data.result")&&e.data.errors.forEach((function(e){if(e.location){var a=e.location.join(".").split(".branches"),r=(0,T.default)(n.jsonData.json,a[0]);if(r&&!(0,x.default)(r)){var l=-1!==e.location.indexOf("steps")?parseInt(e.location[e.location.indexOf("steps")+1],10):void 0;return void 0!==l?void(0,N.default)(n.jsonData.json,a[0],z(z({},(0,D.toJS)((0,T.default)(n.jsonData.json,a[0]))),{},{error:{error:e.error,index:l}})):void L.Notify.error({title:t("pipeline syntax error"),content:t(e.error),duration:6e3})}if(-1===e.location.indexOf("conditions")){var u=-1!==e.location.indexOf("steps")?parseInt(e.location[e.location.indexOf("steps")+1],10):void 0;(0,N.default)(n.jsonData.json,a[0],z(z({},(0,D.toJS)((0,T.default)(n.jsonData.json,a[0]))),{},{error:{error:e.error,index:u}}))}else{var o=e.location.join(".").split(".when"),i=-1!==e.location.indexOf("conditions")?parseInt(e.location[e.location.indexOf("conditions")+1],10):void 0;(0,N.default)(n.jsonData.json,o[0],z(z({},(0,D.toJS)((0,T.default)(n.jsonData.json,o[0]))),{},{conditionError:{error:e.error,index:i}}))}}else window.onunhandledrejection({status:"Failure",reason:t("pipeline syntax error"),message:e.error||JSON.stringify(e)})}))})));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleConfirm",value:(r=(0,b.default)(g.default.mark((function e(){return g.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertJsonToJenkinsFile();case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchLabel",value:(a=(0,b.default)(g.default.mark((function e(t){var a,r,n,l,u,o=this;return g.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.devops,r=t.cluster,n="".concat(this.getDevopsUrlV2({cluster:r,devops:a}),"jenkins/labelsdashboard/labelsData"),e.next=4,request.get(n,{},{},(function(){o.labelDataList=[]}));case 4:(l=e.sent)&&"ok"===l.status&&(0,j.default)(l.data)?(u=l.data.map((function(e){return{label:e.label,value:e.label}})),this.labelDataList=u):this.labelDataList=[];case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"newStage",get:function(){return{branches:[{id:String(Math.random()),name:"",steps:[]}],agent:{type:"none"},name:"stage-".concat((0,q.generateId)(5))}}},{key:"stages",get:function(){return(0,T.default)(this.jsonData,"json.pipeline.stages",[])}},{key:"activeStage",get:function(){return""===this.activeLineIndex?"":this.stages[this.activeLineIndex]?this.stages[this.activeLineIndex].parallel?this.stages[this.activeLineIndex].parallel[this.activeColumnIndex]:this.stages[this.activeLineIndex]:""}}]),E}(F.default),(0,P.default)(l.prototype,"stages",[D.computed],Object.getOwnPropertyDescriptor(l.prototype,"stages"),l.prototype),(0,P.default)(l.prototype,"activeStage",[D.computed],Object.getOwnPropertyDescriptor(l.prototype,"activeStage"),l.prototype),u=(0,P.default)(l.prototype,"jsonData",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,P.default)(l.prototype,"activeLineIndex",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=(0,P.default)(l.prototype,"activeColumnIndex",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=(0,P.default)(l.prototype,"isAddingStep",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,P.default)(l.prototype,"edittingData",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=(0,P.default)(l.prototype,"params",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=(0,P.default)(l.prototype,"labelDataList",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=(0,P.default)(l.prototype,"credentialsList",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[]}}}),m=(0,P.default)(l.prototype,"cdList",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[]}}}),(0,P.default)(l.prototype,"setData",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"setData"),l.prototype),(0,P.default)(l.prototype,"insertColumn",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"insertColumn"),l.prototype),(0,P.default)(l.prototype,"setFocus",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"setFocus"),l.prototype),(0,P.default)(l.prototype,"setActive",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"setActive"),l.prototype),(0,P.default)(l.prototype,"setEdittingData",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"setEdittingData"),l.prototype),(0,P.default)(l.prototype,"clearFocus",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"clearFocus"),l.prototype),(0,P.default)(l.prototype,"deleteStage",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"deleteStage"),l.prototype),(0,P.default)(l.prototype,"setValue",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"setValue"),l.prototype),(0,P.default)(l.prototype,"convertJsonToJenkinsFile",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"convertJsonToJenkinsFile"),l.prototype),h=(0,P.default)(l.prototype,"getCredentials",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,b.default)(g.default.mark((function t(a){return g.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.credentialStore.fetchList(z({devops:e.params.devops,cluster:e.params.cluster},a));case 2:e.credentialsList=e.credentialStore.list;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),v=(0,P.default)(l.prototype,"getCDListData",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,b.default)(g.default.mark((function t(a){return g.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.cdStore.fetchList(z({devops:e.params.devops,cluster:e.params.cluster},a));case 2:e.cdList=e.cdStore.list;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),y=(0,P.default)(l.prototype,"createCredential",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,b.default)(g.default.mark((function t(a,r){return g.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.credentialStore.handleCreate(a,r);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),(0,P.default)(l.prototype,"handleConfirm",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"handleConfirm"),l.prototype),(0,P.default)(l.prototype,"fetchLabel",[D.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchLabel"),l.prototype),l);a.default=Y},function(e,t,a){e.exports={pipeline_column:"nWZ33DmaBbhEDSesc0DiU",content:"_1-oRV7NPr1NxWnH05jzHGL"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Home",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Search",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Detail",{enumerable:!0,get:function(){return u.default}});var n=r(a(2411)),l=r(a(2416)),u=r(a(2488))},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(91)),c=n(r(12)),s=n(r(13)),f=n(r(135)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(74)),v=(n(r(92)),n(r(136))),y=n(r(0)),g=r(5),b=r(70),E=n(r(137)),_=n(r(3)),O=r(25),S=n(r(917)),k=n(r(2413)),C=n(r(1348)),R=n(r(884)),w=n(r(2415));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var D=(0,b.observer)((u=function(e){(0,d.default)(r,e);var a=P(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).logStatisticsStore=new k.default,e.histogramStore=new C.default({startTime:Date.now()-432e5,endTime:Date.now(),interval:"30m"}),e.supportQueryParams=[{icon:"magnifier",title:t("SEARCH_BY_KEYWORD"),tips:t("CONTAINER_LOG_KEYWORD_TIP"),key:"log_query"},{icon:"project",title:t("SEARCH_BY_PROJECT"),tips:t("CONTAINER_LOG_PROJECT_TIP"),key:"namespace_query"},{icon:"backup",title:t("SEARCH_BY_WORKLOAD"),tips:t("CONTAINER_LOG_WORKLOAD_TIP"),key:"workload_query"},{icon:"pod",title:t("SEARCH_BY_POD"),tips:t("CONTAINER_LOG_POD_TIP"),key:"pod_query"},{icon:"docker",title:t("SEARCH_BY_CONTAINER"),tips:t("CONTAINER_LOG_CONTAINER_TIP"),key:"container_query"}],(0,i.default)(e,"selectedDurationParameter",o,(0,f.default)(e)),e.selectedParameter=function(t){e.props.searchInputState.nextParamsKey=t.currentTarget.dataset.query},e.onSearchParamsChange=function(){e.props.formStepState.next()},e.onClusterChange=function(t){e.props.searchInputState.setCluster(t),e.updateStatistics()},e.clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.label})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.updateStatistics()}},{key:"updateStatistics",value:function(){var e=this.props.searchInputState.cluster;this.logStatisticsStore.fetch({cluster:e}),this.histogramStore.fetch({cluster:e})}},{key:"render",value:function(){return y.default.createElement("div",null,y.default.createElement("div",{className:w.default.pane},this.renderBanner()),y.default.createElement("div",{className:w.default.tips},y.default.createElement("div",{className:w.default.pane},this.renderSearchBar(),y.default.createElement("h3",{className:w.default.rule},t("QUERYING_RULES")),this.renderRecentLogs(),this.renderQueryItems())))}},{key:"renderBanner",value:function(){return y.default.createElement("div",{className:w.default.banner},y.default.createElement("div",{className:w.default.illustration},y.default.createElement("img",{src:"/assets/log-statistics.svg",alt:"log-statistics"})),y.default.createElement(O.Loading,{spinning:this.logStatisticsStore.isLoading},y.default.createElement("div",{className:w.default.statistics},y.default.createElement("h3",null,t.html("TOTAL_LOGS_TODAY",{containers:this.logStatisticsStore.containersCount,logs:this.logStatisticsStore.logsCount,className:w.default.count})),y.default.createElement("p",null,y.default.createElement(O.Icon,{name:"clock"}),t("START_TIME_COLON"),(0,E.default)(this.logStatisticsStore.startTime).format("".concat(t("LOG_DATE")))))))}},{key:"renderSearchBar",value:function(){var e=this.props,a=e.searchInputState,r=e.clustersOpts;return y.default.createElement("div",{className:w.default.searchBarContainer},globals.app.isMultiCluster&&y.default.createElement(O.Select,{className:w.default.clusterSelector,value:a.cluster,options:r,valueRenderer:this.clusterRenderer,onChange:this.onClusterChange}),y.default.createElement(R.default,{className:w.default.searchBar,onChange:this.onSearchParamsChange,params:a,dropDownItems:{log_query:{icon:"magnifier",text:t("KEYWORD")},namespace_query:{icon:"project",text:t("PROJECT")},workload_query:{icon:"backup",text:t("WORKLOAD")},pod_query:{icon:"pod",text:t("POD")},container_query:{icon:"docker",text:t("CONTAINER")}}}))}},{key:"renderRecentLogs",value:function(){return y.default.createElement(O.Loading,{spinning:this.histogramStore.isLoading},y.default.createElement("div",{className:(0,_.default)(w.default.card,w.default.recent)},y.default.createElement("div",{className:w.default.recentSummary},y.default.createElement("h2",{className:w.default.count},this.histogramStore.logsCount),y.default.createElement("p",null,t("CONTAINER_LOG_TRENDS_12H"))),y.default.createElement("div",{className:w.default.chart},y.default.createElement(S.default,{xKey:"time",data:(0,g.toJS)(this.histogramStore.histograms),legend:[["count",t("CONTAINER_LOG_COUNT")]],interval:this.histogramStore.interval,onBarClick:this.selectedDurationParameter}))))}},{key:"renderQueryItems",value:function(){var e=this;return this.supportQueryParams.map((function(t){return y.default.createElement("div",{className:(0,_.default)(w.default.card,w.default.category),key:t.key,"data-query":t.key,onClick:e.selectedParameter},y.default.createElement("div",{className:w.default.icon},t.iconUrl?y.default.createElement("div",null,y.default.createElement("img",{src:t.iconUrl})):y.default.createElement(O.Icon,{name:t.icon,size:40})),y.default.createElement("div",{className:w.default.desc},y.default.createElement("h4",null,t.title),y.default.createElement("p",null,t.tips)))}))}}]),r}(y.default.Component),o=(0,h.default)(u.prototype,"selectedDurationParameter",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a,r,n,l,u,o=t.time,i=void 0===o?0:o,c=e.histogramStore.interval,s=e.props.searchInputState;s.end=Math.ceil(i/1e3)+(a=c.match(/(\d+)(\w+)/),r=(0,v.default)(a,3),n=r[1],l=void 0===n?0:n,u=r[2],l*{s:1,m:60,h:3600,d:86400}[void 0===u?"s":u]),s.start=Math.ceil(i/1e3),s.step="1m",e.props.formStepState.next()}}}),l=u))||l;a.default=D},function(e,t,a){e.exports={wrapper:"q2bJ9Fc4ogjL_BgwY1Hyx"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i=r(a(49)),c=r(a(50)),s=r(a(91)),f=r(a(12)),d=r(a(13)),p=r(a(135)),m=r(a(19)),h=r(a(20)),v=r(a(18)),y=r(a(74)),g=(r(a(92)),a(5)),b=r(a(655)),E=r(a(16));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var O=(n=function(e){(0,m.default)(r,e);var t,a=_(r);function r(){var e;(0,f.default)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=a.call.apply(a,[this].concat(n)),(0,s.default)(e,"logsCount",l,(0,p.default)(e)),(0,s.default)(e,"startTime",u,(0,p.default)(e)),(0,s.default)(e,"namespaces",o,(0,p.default)(e)),e}return(0,d.default)(r,[{key:"fetch",value:(t=(0,c.default)(i.default.mark((function e(){var t,a,r,n,l,u,o,c=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=c.length>1?c[1]:void 0,r=new Date((new Date).setHours(0,0,0,0)).getTime(),n=(new Date).getTime(),l={operation:"statistics",start_time:r,end_time:n},u=(0,b.default)(l,t),e.next=9,this.request(u,"get",a);case 9:o=e.sent,this.containersCount=(0,E.default)(o,"statistics.containers",0),this.logsCount=(0,E.default)(o,"statistics.logs",0),this.startTime=r,this.namespaces=(0,E.default)(o,"statistics.namespaces",[])||[];case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleResult",value:function(e){return e}}]),r}(r(a(1124)).default),l=(0,y.default)(n.prototype,"logsCount",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=(0,y.default)(n.prototype,"startTime",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=(0,y.default)(n.prototype,"namespaces",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,y.default)(n.prototype,"fetch",[g.action],Object.getOwnPropertyDescriptor(n.prototype,"fetch"),n.prototype),n);t.default=O},function(e,t,a){e.exports={container:"_9S1O5r-gMFTAyyTvA9sMv",customRange:"_2BqYBrIOMJkPL86SU4ibiS",currentParam:"_3i9QkdJ1v3Z_RhND9_jhxB",input:"_3knlp77eQpb5h3x9_brJrc",dropdown:"_32W2hcNHwcqLHylSRb_-1d",dropdownItem:"_1zYu7D7XMgnPQj_cviMH7j",icon:"_18iZ6-QD8yhu2WuwGN6v_R",param:"_3tDB0wRE_DlH-PpkLdtKqh",removeParam:"_2XvI9g_dJmtEwGNcgmHBUn",durationDropdown:"_1DPb6P0nYZPe_y5qrx0OSD"}},function(e,t,a){e.exports={tips:"_1GT_qdXcQqMwqs4fdmzGR3",rule:"cRqPZ_AGuSTA4AXOY08lP",searchBar:"_2YhYKa3lwuBurnOP3Cjh0U",pane:"cOD4mfyo7pc1RctxOlLvj",card:"p9FBwWjFgQ1xMXHax1X3s",count:"_37LGouPZA8H7IdsZHwN2j5",banner:"_3Z5wUKjeTOL8V6zsED-TSu",illustration:"_2Vn-O2H0xzvZ1d-cX3OeAG",statistics:"_2hC4Kwsw_VHnZ2DGcDMAv5",category:"_2pdXo055DfDsFjef58FrhO",icon:"_3zX3KvzK9hvXil7z9WwH0M",desc:"_1ZgIwmJnkzKt2QVxat6c6D",recent:"_3H27V0Txnl5HUAeAEpNIdA",recentSummary:"_27IlxPyLQZxq8UFPRqaK0i",chart:"_14dkUVVhwB9DUaaWX787Fy",searchBarContainer:"fSF-k2IyFBXVBSF4fZccp",clusterSelector:"_26VjJfMUGT6XkqSnSUkqn7"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m=n(r(109)),h=n(r(49)),v=n(r(50)),y=n(r(21)),g=n(r(91)),b=n(r(12)),E=n(r(13)),_=n(r(135)),O=n(r(19)),S=n(r(20)),k=n(r(18)),C=n(r(74)),R=(n(r(92)),n(r(136))),w=n(r(0)),P=r(70),D=r(5),T=n(r(137)),N=n(r(850)),I=n(r(138)),A=n(r(139)),x=n(r(1350)),j=n(r(1013)),M=n(r(1361)),L=n(r(1348)),U=r(25),F=n(r(1021)),V=r(1363),q=n(r(917)),B=n(r(884)),z=n(r(2487));function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,k.default)(e);if(t){var n=(0,k.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,S.default)(this,a)}}var K=new j.default,W=600,J="10s",Q=["m","h","d","M","y"],X=(0,P.observer)((u=function(e){(0,O.default)(y,e);var a,r,n,l,u=Y(y);function y(){var e;(0,b.default)(this,y);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=u.call.apply(u,[this].concat(r))).queryStore=new M.default({size:50}),e.histogramStore=new L.default,e.markMemoizee=(0,x.default)(V.markAll,{normalizer:function(e){var t=(0,R.default)(e,3),a=t[0],r=t[1],n=void 0===r?[]:r,l=t[2],u=void 0===l?function(){}:l;return"".concat(a,"+").concat(n.toString(),")+").concat(u.name)},maxAge:3e3}),(0,g.default)(e,"tableCols",o,(0,_.default)(e)),(0,g.default)(e,"logs",i,(0,_.default)(e)),e.state={showHistogram:!0,polling:!1,pollingFrequency:5e3},e.tableRef=w.default.createRef(),e.frequencyOptions=[5,10,15].map((function(e){return{value:1e3*e,label:"".concat(t("TIME_S",{num:e}))}})),e.queryModeOptions=[1,0].map((function(e){return{value:e,label:e?t("EXACT_QUERY"):t("FUZZY_QUERY")}})),(0,g.default)(e,"selectedDurationParameter",c,(0,_.default)(e)),(0,g.default)(e,"onTableScrollTop",s,(0,_.default)(e)),e.onSearchParamsChange=function(){e.stopPolling(),e.fetchHistogram(),e.refreshQuery()},(0,g.default)(e,"toggleHistogram",f,(0,_.default)(e)),(0,g.default)(e,"togglePolling",d,(0,_.default)(e)),e.poll=function(){var t=e.props.searchInputState,a=W,r=J;t.end=Math.ceil(Date.now()/1e3),t.start=t.end-a,t.step=r,t.durationAlias="".concat(a/60,"m"),e.fetchHistogram(),e.refreshQuery()},(0,g.default)(e,"changeFrequency",p,(0,_.default)(e)),e.changeQueryMode=function(t){e.props.searchInputState.queryMode=t,e.onSearchParamsChange()},e.changeClusterChange=function(t){e.props.searchInputState.setCluster(t),e.onSearchParamsChange()},e.selectLog=function(t){e.props.detailState.setState(H({},t)),e.props.formStepState.next()},e.clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.label})},e}return(0,E.default)(y,[{key:"getQueryParams",value:function(){var e=this.props.searchInputState,t=e.query,a=e.queryMode,r=e.cluster;return t.filter((function(e){return e.key})).reduce((function(e,t){var r=t.key,n=t.value,l=a?r.replace(/([^(log)]+)_query/,"$1s"):r,u=e[l];return e[l]=u?"".concat(u,",").concat(n):n,e}),{cluster:r})}},{key:"componentDidMount",value:function(){this.refreshQuery(),this.fetchHistogram()}},{key:"componentWillUnmount",value:function(){this.stopPolling(),this.markMemoizee.clear()}},{key:"refreshQuery",value:(l=(0,v.default)(h.default.mark((function e(){var t,a;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.queryStore.from=0,t=this.getQueryParams(),e.next=4,this.fetchQuery(H(H({},t),this.duration));case 4:a=e.sent,this.logs=a.reverse(),this.scrollTo(this.logs.length);case 7:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"fetchQuery",value:(n=(0,v.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryStore.fetch(t);case 2:return e.abrupt("return",this.queryStore.records);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchHistogram",value:function(){var e=this.getQueryParams();this.histogramStore.interval=this.duration.interval,this.histogramStore.fetch(H(H({},e),this.duration))}},{key:"loadMoreLogs",value:(r=(0,v.default)(h.default.mark((function e(){var t,a;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.queryStore.from+this.queryStore.size,e.next=3,this.fetchQuery(H(H({},this.queryStore.preParams),{from:t}));case 3:a=e.sent,this.logs=[].concat((0,m.default)(a.reverse()),(0,m.default)(this.logs)),this.scrollTo(a.length);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getNextStepLevel",value:function(e){var t=e.match(/\d+(\w+)$/),a=(0,R.default)(t,2)[1],r=void 0===a?"m":a,n=Q.findIndex((function(e){return e===r}));return"1".concat(n<1?Q[0]:Q[n-1])}},{key:"renderHightLightMatchTd",value:function(e){var t=this,a=e.resKey,r=e.searchKey,n=e.handler,l=void 0===n?V.mark:n;return function(e){var n=e[a]||"",u=t.props.searchInputState.query.filter((function(e){var t=e.key;return e.value&&(0,A.default)(r,t)})).map((function(e){return e.value})),o=t.markMemoizee(n,u,l);return w.default.createElement("span",null,o.map((function(e,t){return(0,I.default)(e)?e:w.default.createElement("span",{key:t,className:z.default.hightLightMatch},e.hightLighted)})))}}},{key:"renderHightLightMatchLogTd",value:function(e){var t=this,a=e.resKey,r=e.searchKey,n=e.handler,l=void 0===n?V.mark:n;return function(e){var n=K.ansi_to_html(e[a]||""),u=t.props.searchInputState.query.filter((function(e){var t=e.key;return e.value&&(0,A.default)(r,t)})).map((function(e){return e.value})),o=t.markMemoizee(n,u,l);return w.default.createElement("span",{dangerouslySetInnerHTML:{__html:o.map((function(e){return(0,I.default)(e)?e:'<span class="'.concat(z.default.hightLightMatch,'">').concat(e.hightLighted,"</span>")}))}})}}},{key:"startPolling",value:function(){this.poll(),this.pollingInterval=setInterval(this.poll,this.state.pollingFrequency)}},{key:"stopPolling",value:function(){this.setState({polling:!1}),clearInterval(this.pollingInterval)}},{key:"addPollingQuery",value:(a=(0,v.default)(h.default.mark((function e(){var t,a,r,n;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getQueryParams(),r={from:0,start_time:Date.now()-this.state.pollingFrequency,end_time:Date.now()},e.next=4,this.fetchQuery(H(H({},a),r));case 4:n=e.sent,(t=this.logs).push.apply(t,(0,m.default)(n.reverse())),this.scrollTo(this.logs.length);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"scrollTo",value:function(e){this.tableRef.current.scrollToRow(e)}},{key:"render",value:function(){var e=this.state.showHistogram;return w.default.createElement("div",{className:z.default.container},this.renderSearchBar(),w.default.createElement("div",{className:z.default.searchResult},this.renderToolBar(),e&&this.renderTimeChart(),this.renderTable()))}},{key:"renderSearchBar",value:function(){return w.default.createElement("div",{className:z.default.searchBar},globals.app.isMultiCluster&&w.default.createElement(U.Select,{value:this.props.searchInputState.cluster,onChange:this.changeClusterChange,className:z.default.select,valueRenderer:this.clusterRenderer,options:this.props.clustersOpts}),w.default.createElement(B.default,{className:z.default.searchInput,onChange:this.onSearchParamsChange,params:this.props.searchInputState,dropDownItems:{log_query:{icon:"magnifier",text:t("KEYWORD")},namespace_query:{icon:"project",text:t("PROJECT")},workload_query:{icon:"backup",text:t("WORKLOAD")},pod_query:{icon:"pod",text:t("POD")},container_query:{icon:"docker",text:t("CONTAINER")}}}),w.default.createElement(U.Select,{className:z.default.select,value:this.props.searchInputState.queryMode,onChange:this.changeQueryMode,options:this.queryModeOptions}))}},{key:"renderToolBar",value:function(){var e=this.state,a=e.showHistogram,r=e.polling,n=e.pollingFrequency,l=H(H({},this.duration),this.getQueryParams());return w.default.createElement("div",{className:z.default.toolbar},w.default.createElement("div",null,t("TIME_TOPOLOGY"),w.default.createElement("span",{className:z.default.showHistogramBtn,onClick:this.toggleHistogram},a?t("DISPLAY"):t("HIDE"),w.default.createElement(U.Icon,{name:"caret-down",type:"light"}))),w.default.createElement("div",null,w.default.createElement("a",{href:this.queryStore.exportLinkFactory(l),download:!0},w.default.createElement("span",{className:z.default.exportBtn},w.default.createElement(U.Tooltip,{content:t("EXPORT")},w.default.createElement(U.Icon,{name:"export",type:"light",size:16})))),w.default.createElement("span",{className:z.default.pollingBtn,onClick:this.togglePolling},w.default.createElement(U.Tooltip,{content:r?t("STOP_REAL_TIME_CONTAINER_LOG"):t("START_REAL_TIME_CONTAINER_LOG")},w.default.createElement(U.Icon,{name:r?"stop":"start",type:"light",size:16}))),w.default.createElement("span",{className:z.default.frequencyOpts},w.default.createElement("span",null," ",t("REFRESH_RATE_COLON")),w.default.createElement(U.Select,{value:n,onChange:this.changeFrequency,className:z.default.frequencyOptions,options:this.frequencyOptions}))))}},{key:"renderTimeChart",value:function(){return w.default.createElement("div",{className:z.default.chartContainer},w.default.createElement("div",{className:z.default.recentSummary},w.default.createElement("h2",{className:z.default.count},this.histogramStore.logsCount),w.default.createElement("p",null,t("SEARCH_RESULTS"))),w.default.createElement("div",{className:z.default.chart},w.default.createElement(q.default,{xKey:"time",data:(0,D.toJS)(this.histogramStore.histograms),legend:[["count",t("CONTAINER_LOG_COUNT")]],interval:this.histogramStore.interval,onBarClick:this.selectedDurationParameter})))}},{key:"renderTable",value:function(){return w.default.createElement("div",{className:z.default.table},w.default.createElement(F.default,{onScroll:this.onTableScrollTop,onTrClick:this.selectLog,cols:this.tableCols,data:this.logs,tableRef:this.tableRef}))}},{key:"defaultDuration",get:function(){return{start_time:0,end_time:Date.now(),interval:"1d"}}},{key:"duration",get:function(){var e=(this.props||{}).searchInputState,t=Date.now(),a=e.start,r=e.end,n=e.step;return a?{start_time:(0,N.default)([1e3*a,t]),end_time:(0,N.default)([1e3*r,t]),interval:n}:this.defaultDuration}}]),y}(w.default.Component),o=(0,C.default)(u.prototype,"tableCols",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{thead:t("TIME"),key:"time",content:function(e){return"[".concat((0,T.default)(e.time).format("YYYY-MM-DD HH:mm:ss"),"]")},hidden:!1},{thead:t("PROJECT"),key:"project",content:this.renderHightLightMatchTd({resKey:"namespace",searchKey:["namespace_query"]}),hidden:!1},{thead:t("POD"),key:"pod",hidden:!1,content:this.renderHightLightMatchTd({resKey:"pod",searchKey:["pod_query","workload_query"]})},{thead:t("CONTAINER"),key:"container",hidden:!0,content:this.renderHightLightMatchTd({resKey:"container",searchKey:["container_query"]})},{thead:t("LOG"),key:"log",className:z.default.logItem,content:this.renderHightLightMatchLogTd({resKey:"log",searchKey:["log_query"],handler:V.esMark}),mustShow:!0}]}}),i=(0,C.default)(u.prototype,"logs",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,C.default)(u.prototype,"refreshQuery",[D.action],Object.getOwnPropertyDescriptor(u.prototype,"refreshQuery"),u.prototype),(0,C.default)(u.prototype,"fetchQuery",[D.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchQuery"),u.prototype),(0,C.default)(u.prototype,"fetchHistogram",[D.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchHistogram"),u.prototype),c=(0,C.default)(u.prototype,"selectedDurationParameter",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a,r,n,l,u,o=t.time,i=void 0===o?0:o,c=e.histogramStore.interval,s=e.props.searchInputState;s.end=Math.ceil(i/1e3)+(a=c.match(/(\d+)(\w+)/),r=(0,R.default)(a,3),n=r[1],l=void 0===n?0:n,u=r[2],l*{s:1,m:60,h:3600,d:86400}[void 0===u?"s":u]),s.start=Math.ceil(i/1e3),s.step=e.getNextStepLevel(c),e.fetchHistogram(),e.refreshQuery()}}}),s=(0,C.default)(u.prototype,"onTableScrollTop",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.scrollTop,r=e.queryStore,n=r.from,l=r.size,u=r.total;0===a&&u>n+l&&e.loadMoreLogs()}}}),(0,C.default)(u.prototype,"loadMoreLogs",[D.action],Object.getOwnPropertyDescriptor(u.prototype,"loadMoreLogs"),u.prototype),f=(0,C.default)(u.prototype,"toggleHistogram",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.setState((function(e){return{showHistogram:!e.showHistogram}}))}}}),d=(0,C.default)(u.prototype,"togglePolling",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.state.polling;t?e.stopPolling():e.startPolling(),e.setState({polling:!t})}}}),(0,C.default)(u.prototype,"addPollingQuery",[D.action],Object.getOwnPropertyDescriptor(u.prototype,"addPollingQuery"),u.prototype),p=(0,C.default)(u.prototype,"changeFrequency",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setState({pollingFrequency:t}),e.state.polling&&(e.stopPolling(),e.startPolling())}}}),l=u))||l;a.default=X},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={table:"_31DHxUvHF9cvrtMF8hZ1NJ",body:"_1o0OrXH49u7IWnn__jySDi",header:"_3d3ile0MQ76mzy4gKMKVGa",headerItems:"cBGvp-qF5E0-Zn-DV66BU",visibleBtn:"_1QLOXkaGohLi2bLbAWcJjT",dropdown:"_16GV2vWPgU-_LY-TSI-nEL",visibleItem:"_10IfOBGBtVJ2cWMKKLCURw",tr:"_3wpavJr72BCdw4FWfpnkOc",bodyItems:"_1Jb5Hf9bhyeHQD05-MYz5N"}},function(e,t,a){e.exports={searchBar:"_JTlDkrfohSwIxPpX97wp",searchInput:"_25v4Uq6VdGeubmXGfPRsa6",select:"_3t4uAxkZ2BFOTl4foQ1DRo",searchResult:"_3li-Ch_QP-SfD5vjzDIXgd",toolbar:"_1wFZR-2jbDGJY79Klx4L11",frequencyOpts:"_3gotqRkYjzqimbLSXvXXoe",frequencyOptions:"_2FKKxtgN7QWnOcFKcoW-yl",chartContainer:"_1TbzGgX6Ll6A-GDc4T4Ad",recentSummary:"_32mzAeyZriH5v29CxUBHw0",chart:"_39jXgnORNLHHwWrfolFLAT",table:"_1LzMkW6YYbyYTptsNE4-Xa",logItem:"_1y2_hopFflOw1UUWDuImRk",count:"_3t6_PUErus14gjlZ0dSd0d",showHistogramBtn:"_9d9RtZ1b011VOdyFhrNMY",exportBtn:"Rm5zrnKvDnZWzu8GHLjXS",pollingBtn:"_1LWeyfeCE0ECAs__57lhjh",container:"_36atrKU0dMxQaHnt0CMWwj",hightLightMatch:"_2jhV5b7tn8RPILbYxuQt7g",hightLog:"_9VNSgJg53gFYpEK1pk5Co"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f=n(r(21)),d=n(r(109)),p=n(r(49)),m=n(r(50)),h=n(r(91)),v=n(r(12)),y=n(r(13)),g=n(r(135)),b=n(r(19)),E=n(r(20)),_=n(r(18)),O=n(r(74)),S=(n(r(92)),n(r(0))),k=n(r(137)),C=n(r(3)),R=r(70),w=r(5),P=n(r(1013)),D=n(r(16)),T=r(25),N=n(r(654)),I=n(r(753)),A=n(r(1361)),x=r(801),j=n(r(2489)),M=n(r(2491));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,E.default)(this,a)}}var V=new P.default,q=(0,R.observer)((u=function(e){(0,b.default)(_,e);var a,r,n,l,u,f,E=F(_);function _(e){var a;(0,v.default)(this,_),(a=E.call(this,e)).logWindow=S.default.createRef(),a.pollingFrequencyOpts=[5,10,15].map((function(e){return{label:"".concat(t("REFRESH_RATE_COLON")).concat(t("TIME_S",{num:e})),value:1e3*e}})),(0,h.default)(a,"logs",o,(0,g.default)(a)),(0,h.default)(a,"changePod",i,(0,g.default)(a)),(0,h.default)(a,"changeContainer",c,(0,g.default)(a)),a.changeSearchLog=function(e){a.setState({query:e.target.value})},a.queryLog=function(e){13===e.keyCode&&a.refreshLogs()},a.togglePolling=function(){var e=a.state.polling;e?a.stopPolling():a.startPolling(),a.setState({polling:!e})},a.stopPolling=function(){clearInterval(a.interval)},(0,h.default)(a,"onFrequencySelect",s,(0,g.default)(a)),a.onDurationChange=function(){a.refreshLogs()},a.onLogScroll=function(e){var t=e.currentTarget,r=t.scrollHeight;if(t.scrollTop+t.clientHeight>=r){var n=a.logStore,l=n.from,u=n.size;n.total>l+u&&a.loadMoreLogs()}},a.pre=function(){a.props.formStepState.pre()},a.clearQuery=function(){a.setState({query:""},(function(){a.refreshLogs()}))};var r=a.props.detailState,n=r.pod,l=r.container,u=r.namespace,f=r.log,d=r.time,p=new Date(d).getTime();return a.logStore=new A.default({sort:"desc",pods:n,namespaces:u,containers:l,size:100,startTime:p-1e3,endTime:p+1e3}),a.podStore=new N.default,a.projectStore=new I.default,a.state={pollingFrequency:5e3,polling:!1,query:f},a}return(0,y.default)(_,[{key:"startPolling",value:(f=(0,m.default)(p.default.mark((function e(){var t,a=this;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),e.next=3,this.fetchLogs({end_time:t,start_time:t-6e4,from:0});case 3:this.logs=e.sent,this.interval=setInterval((function(){a.addPollingLogs()}),this.state.pollingFrequency);case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"addPollingLogs",value:(u=(0,m.default)(p.default.mark((function e(){var t,a,r;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),e.next=3,this.fetchLogs({end_time:a,start_time:a-this.state.pollingFrequency,from:0});case 3:r=e.sent,(t=this.logs).unshift.apply(t,(0,d.default)(r)),this.scrollToBottom();case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"scrollToBottom",value:function(){var e=this.logWindow.current;e.scrollTop=e.scrollHeight}},{key:"loadMoreLogs",value:(l=(0,m.default)(p.default.mark((function e(){var t,a,r,n,l;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.logStore,r=a.from,n=a.size,this.logStore.from=r+n,e.next=4,this.fetchLogs();case 4:l=e.sent,(t=this.logs).push.apply(t,(0,d.default)(l));case 6:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getPodContainers",value:function(e){var t=this.podStore.list.data.find((function(t){return t.name===e}))||{};return(0,D.default)(t,"containers",[])}},{key:"componentDidMount",value:function(){this.fetchPods(),this.fetchProject(),this.initialFetch()}},{key:"componentWillUnmount",value:function(){this.stopPolling()}},{key:"initialFetch",value:(n=(0,m.default)(p.default.mark((function e(){return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchLogs();case 2:this.logs=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"refreshLogs",value:(r=(0,m.default)(p.default.mark((function e(){return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logStore.from=0,this.logStore.log_query=this.state.query,this.setState({polling:!1}),this.stopPolling(),e.next=6,this.fetchLogs();case 6:this.logs=e.sent;case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchLogs",value:(a=(0,m.default)(p.default.mark((function e(){var t,a,r=arguments;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},a=this.props.searchInputState.cluster,e.next=4,this.logStore.fetch(U(U({},t),{},{cluster:a}));case 4:return e.abrupt("return",this.logStore.records);case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchProject",value:function(){var e=this.props.detailState.namespace,t=this.props.searchInputState.cluster;this.projectStore.fetchDetail({name:e,namespace:e,cluster:t},(function(){}))}},{key:"fetchPods",value:function(){var e=this.props.detailState.namespace,t=this.props.searchInputState.cluster;this.podStore.fetchList({cluster:t,namespace:e,limit:-1})}},{key:"render",value:function(){return S.default.createElement("div",{className:M.default.container},S.default.createElement("div",{className:M.default.article},this.renderSummary(),this.renderLog()))}},{key:"renderLog",value:function(){var e=this.state.polling;return S.default.createElement("div",{className:M.default.log},S.default.createElement("div",{className:(0,C.default)(M.default.toolbar,this.state.polling?M.default.pollingMode:"")},this.state.polling||this.renderDurationSelect(),this.renderSearchInput(),this.renderPollingBtn(),this.renderPollingOpts(),this.renderExportBtn()),S.default.createElement("div",{className:M.default.terminal,onScroll:e?null:this.onLogScroll,ref:this.logWindow},this.renderTerminal()))}},{key:"renderPollingOpts",value:function(){return S.default.createElement("div",{className:M.default.frequencyOpts},S.default.createElement(T.Select,{options:this.pollingFrequencyOpts,value:this.state.pollingFrequency,onChange:this.onFrequencySelect}))}},{key:"renderPollingBtn",value:function(){return S.default.createElement("div",{className:M.default.pollingBtn,onClick:this.togglePolling},S.default.createElement(T.Tooltip,{content:this.state.polling?t("STOP"):t("START")},S.default.createElement(T.Icon,{type:"light",name:this.state.polling?"stop":"start"})))}},{key:"renderExportBtn",value:function(){var e=this.logStore,a=e.pods,r=e.containers,n=e.log_query,l=e.startTime,u=e.endTime,o=e.namespaces,i=this.props.searchInputState.cluster,c=this.logStore.exportLinkFactory({cluster:i,namespaces:o,pods:a,containers:r,log_query:n,start_time:l,end_time:u});return S.default.createElement("a",{href:c,download:!0},S.default.createElement("div",{className:M.default.pollingBtn},S.default.createElement(T.Tooltip,{content:t("EXPORT")},S.default.createElement(T.Icon,{name:"export",type:"light"}))))}},{key:"renderDurationSelect",value:function(){return S.default.createElement("div",{className:M.default.duration},S.default.createElement(j.default,{duration:this.logStore,onChange:this.onDurationChange}))}},{key:"renderSearchInput",value:function(){return S.default.createElement("div",{className:M.default.input},S.default.createElement(T.Icon,{name:"magnifier",type:"light"}),S.default.createElement("input",{type:"text",onKeyUp:this.queryLog,value:this.state.query,onChange:this.changeSearchLog}),this.state.query&&S.default.createElement(T.Icon,{className:M.default.clearQuery,name:"close",type:"light",onClick:this.clearQuery}))}},{key:"renderTerminal",value:function(){var e=this;return S.default.createElement("div",{className:M.default.logWindow},this.logs.reverse().map((function(t){var a=t.time,r=t.log;return S.default.createElement("p",{key:"".concat(a).concat(r)},S.default.createElement("span",{className:M.default.logTime},(0,k.default)(a).format("YYYY-MM-DD HH:mm:ss"),":"," ",e.renderHighLightLog(r)))})))}},{key:"renderHighLightLog",value:function(e){var t=this.state.query.trim(),a=e.toUpperCase().indexOf(t.toUpperCase());return t&&-1!==a?S.default.createElement("span",{className:M.default.queryLog},S.default.createElement("span",{dangerouslySetInnerHTML:{__html:V.ansi_to_html(e.slice(0,a))}}),S.default.createElement("span",{className:M.default.hightLight,dangerouslySetInnerHTML:{__html:V.ansi_to_html(e.slice(a,a+t.length))}}),S.default.createElement("span",{dangerouslySetInnerHTML:{__html:V.ansi_to_html(e.slice(a+t.length))}})):S.default.createElement("span",{className:M.default.queryLog,dangerouslySetInnerHTML:{__html:V.ansi_to_html(e)}})}},{key:"renderLink",value:function(e,a){return e?S.default.createElement(T.Tooltip,{content:t("VIEW_DETAILS")},S.default.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},a)):a}},{key:"renderSummary",value:function(){var e=this.props.detailState;return S.default.createElement("div",{className:M.default.summery},S.default.createElement("div",{className:M.default.header},S.default.createElement("div",{className:M.default.pre,onClick:this.pre},S.default.createElement(x.ReactComponent,{width:16,height:22}),S.default.createElement("span",null,t("BACK")))),S.default.createElement("h3",null,t("CONTAINER_LOG_SOURCE")),S.default.createElement("div",{className:M.default.dataList},S.default.createElement("div",null,S.default.createElement("h4",null,t("PROJECT")),S.default.createElement("p",null,S.default.createElement("span",null,S.default.createElement(T.Icon,{name:"project"})," ",e.namespace))),S.default.createElement("div",null,S.default.createElement("h4",null,t("POD")),S.default.createElement("div",{className:M.default.selectContainer},S.default.createElement(T.Select,{prefixIcon:S.default.createElement(T.Icon,{name:"pod"}),value:this.logStore.pods,onChange:this.changePod,options:this.PodOpts}),S.default.createElement("div",{className:M.default.resourceIcon},this.renderLink(this.podLink,S.default.createElement(T.Icon,{name:"cogwheel",size:16}))))),S.default.createElement("div",null,S.default.createElement("h4",null,t("CONTAINER")),S.default.createElement("div",{className:M.default.selectContainer},S.default.createElement(T.Select,{prefixIcon:S.default.createElement(T.Icon,{name:"docker"}),value:this.logStore.containers,options:this.ContainersOpts,onChange:this.changeContainer}),S.default.createElement("div",{className:M.default.resourceIcon},this.renderLink(this.containerLink,S.default.createElement(T.Icon,{name:"cogwheel",size:16})))))))}},{key:"podLink",get:function(){var e=this.props.detailState.namespace,t=this.props.searchInputState.cluster,a=this.logStore.pods,r=this.projectStore.detail.workspace;return r?"/".concat(r,"/clusters/").concat(t,"/projects/").concat(e,"/pods/").concat(a):""}},{key:"containerLink",get:function(){var e=this.props.detailState.namespace,t=this.props.searchInputState.cluster,a=this.logStore,r=a.pods,n=a.containers,l=this.projectStore.detail.workspace;return l?"/".concat(l,"/clusters/").concat(t,"/projects/").concat(e,"/pods/").concat(r,"/containers/").concat(n):""}},{key:"PodOpts",get:function(){return this.podStore.list.data.map((function(e){return{label:e.name||t("ALL"),value:e.name||""}}))}},{key:"ContainersOpts",get:function(){var e=this.logStore.pods;return this.getPodContainers(e).map((function(e){return{label:e.name,value:e.name}}))}}]),_}(S.default.Component),o=(0,O.default)(u.prototype,"logs",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,O.default)(u.prototype,"podLink",[w.computed],Object.getOwnPropertyDescriptor(u.prototype,"podLink"),u.prototype),(0,O.default)(u.prototype,"containerLink",[w.computed],Object.getOwnPropertyDescriptor(u.prototype,"containerLink"),u.prototype),(0,O.default)(u.prototype,"PodOpts",[w.computed],Object.getOwnPropertyDescriptor(u.prototype,"PodOpts"),u.prototype),(0,O.default)(u.prototype,"ContainersOpts",[w.computed],Object.getOwnPropertyDescriptor(u.prototype,"ContainersOpts"),u.prototype),i=(0,O.default)(u.prototype,"changePod",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.logStore.pods=t||"";var a=(0,D.default)(e.getPodContainers(t),"[0].name","");e.changeContainer(a)}}}),c=(0,O.default)(u.prototype,"changeContainer",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.logStore.containers=t,e.logStore.log_query="",e.refreshLogs()}}}),(0,O.default)(u.prototype,"startPolling",[w.action],Object.getOwnPropertyDescriptor(u.prototype,"startPolling"),u.prototype),(0,O.default)(u.prototype,"addPollingLogs",[w.action],Object.getOwnPropertyDescriptor(u.prototype,"addPollingLogs"),u.prototype),s=(0,O.default)(u.prototype,"onFrequencySelect",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setState({pollingFrequency:t})}}}),(0,O.default)(u.prototype,"loadMoreLogs",[w.action],Object.getOwnPropertyDescriptor(u.prototype,"loadMoreLogs"),u.prototype),(0,O.default)(u.prototype,"initialFetch",[w.action],Object.getOwnPropertyDescriptor(u.prototype,"initialFetch"),u.prototype),(0,O.default)(u.prototype,"refreshLogs",[w.action],Object.getOwnPropertyDescriptor(u.prototype,"refreshLogs"),u.prototype),l=u))||l;a.default=q},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m=n(r(136)),h=n(r(91)),v=n(r(12)),y=n(r(13)),g=n(r(135)),b=n(r(19)),E=n(r(20)),_=n(r(18)),O=n(r(74)),S=(n(r(92)),n(r(0))),k=r(70),C=r(5),R=n(r(3)),w=n(r(137)),P=r(25),D=n(r(1126)),T=n(r(1125)),N=r(863),I=n(r(2490));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,E.default)(this,a)}}var x=(0,k.observer)((u=function(e){(0,b.default)(r,e);var a=A(r);function r(){var e;(0,v.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return e=a.call.apply(a,[this].concat(n)),(0,h.default)(e,"showDropDown",o,(0,g.default)(e)),(0,h.default)(e,"step",i,(0,g.default)(e)),(0,h.default)(e,"times",c,(0,g.default)(e)),(0,h.default)(e,"lastTime",s,(0,g.default)(e)),(0,h.default)(e,"handleTimeChange",f,(0,g.default)(e)),(0,h.default)(e,"changeLastTime",d,(0,g.default)(e)),(0,h.default)(e,"toggleDropdown",p,(0,g.default)(e)),e.hiddenDropdown=function(){e.showDropDown=!1},e}return(0,y.default)(r,[{key:"render",value:function(){return S.default.createElement("div",null,S.default.createElement("div",{className:(0,R.default)(I.default.select,this.props.className),onClick:this.toggleDropdown},S.default.createElement(P.Icon,{name:"timed-task",type:"light"}),S.default.createElement("div",{className:I.default.duration},this.duration),S.default.createElement(P.Icon,{name:"caret-down",type:"light"})),this.showDropDown&&this.renderDropdown())}},{key:"renderDropdown",value:function(){var e=this.props.duration,t=e.startTime,a=e.endTime;return S.default.createElement("div",{className:I.default.durationDropdown},S.default.createElement(T.default,{step:this.step,times:this.times,onChange:this.changeLastTime}),S.default.createElement(D.default,{start:t,end:a,showStep:!1,onSubmit:this.handleTimeChange,onCancel:this.hiddenDropdown}))}},{key:"duration",get:function(){if(this.lastTime)return"".concat(t("Last")," ").concat((0,N.getTimeLabel)(this.lastTime));var e=this.props.duration,a=e.startTime,r=e.endTime;return"".concat((0,w.default)(a).format("YYYY-MM-DD HH:mm:ss")," \n    ~ ").concat((0,w.default)(r).format("YYYY-MM-DD HH:mm:ss"))}}]),r}(S.default.Component),o=(0,O.default)(u.prototype,"showDropDown",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,O.default)(u.prototype,"step",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"1m"}}),c=(0,O.default)(u.prototype,"times",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s=(0,O.default)(u.prototype,"lastTime",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,O.default)(u.prototype,"duration",[C.computed],Object.getOwnPropertyDescriptor(u.prototype,"duration"),u.prototype),f=(0,O.default)(u.prototype,"handleTimeChange",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.end,r=t.lastTime,n=t.start,l=t.step,u=t.times;e.step=l,e.times=u,e.lastTime=r;var o=e.props.duration;o.startTime=1e3*n,o.endTime=1e3*a,e.hiddenDropdown(),e.props.onChange()}}}),d=(0,O.default)(u.prototype,"changeLastTime",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.step,r=t.times,n=t.lastTime;e.step=a,e.times=r,e.lastTime=n;var l=e.props.duration,u=Date.now();l.endTime=u;var o=a.match(/(\d+)(m)$/),i=(0,m.default)(o,2)[1],c=void 0===i?0:i;l.startTime=u-c*r*60*1e3,e.hiddenDropdown(),e.props.onChange()}}}),p=(0,O.default)(u.prototype,"toggleDropdown",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showDropDown=!e.showDropDown}}}),l=u))||l;a.default=x},function(e,t,a){e.exports={select:"_2-F0UE11GOASs9vwCvAcD3",duration:"_3VnDK5FBqXs41y-iY5mRfB",durationDropdown:"gK8I8s07_BCnvFmuEmBd-"}},function(e,t,a){e.exports={container:"_1m9keQ11jYZGSfebO3qpB9",header:"xyd8UHpFORkv0cf8P_wf0",pre:"_3g32rijfAK3WWt8VnU59T2",article:"_2PKCbXH04u2gpKtsY8yyDh",summery:"_3gJXtGvSQDAIf7EYdR5pP7",dataList:"_3m957iXyjK0atgGWBiA_sD",selectContainer:"_1O3jNe9JTI_LYz5SBHVGB4",resourceIcon:"PDOkQidT1doiKY5qavaBk",log:"_3APlUWOBR7nWoAMy3lemSN",toolbar:"k0H9ir6QM9JOMpa3VARJ",pollingMode:"_1yWitRxNIDcs41bUD_FCr3",frequencyOpts:"_43PrR8I3aTFsUJ31zLNXY",pollingBtn:"_2Rb3c4PkpyUAvzXeOcST6B",duration:"CRFZxzq5h9lLhyFhE0_gL",clearQuery:"_1h00qMNuLivBoaAKWdG6Mw",input:"_2ka1dM2WjsmppvIY164F07",terminal:"_2pClDN0tGVKg_h8jlNQYoe",logTime:"_1J2jPkQwUcFHrxoLxhh4Aq",disableLink:"xo9-nJKZg7AddOFRdMuEW",hightLight:"tN1IxAbCahLEzTnd_KqIh",queryLog:"_3PceA_GY1Sw5LnNsUZSLGJ"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Home",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Detail",{enumerable:!0,get:function(){return l.default}});var n=r(a(2493)),l=r(a(2495))},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(91)),c=n(r(12)),s=n(r(13)),f=n(r(135)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(74)),v=(n(r(92)),n(r(0))),y=r(5),g=r(70),b=n(r(137)),E=n(r(3)),_=r(25),O=n(r(884)),S=n(r(917)),k=n(r(1365)),C=r(1366),R=n(r(2494));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,g.observer)((u=function(e){(0,d.default)(r,e);var a=w(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).eventSearchStore=new k.default,(0,i.default)(e,"selectedDurationParameter",o,(0,f.default)(e)),e.selectedParameter=function(t){e.props.searchInputState.nextParamsKey=t.currentTarget.dataset.query},e.onSearchParamsChange=function(){e.props.formStepState.next()},e.onClusterChange=function(t){e.props.searchInputState.setCluster(t),e.updateStatistics()},e.clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.label})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.updateStatistics()}},{key:"updateStatistics",value:function(){var e=this.props.searchInputState.cluster;this.eventSearchStore.fetchTodayHistogram({cluster:e}),this.eventSearchStore.fetchHistogram({cluster:e}),this.eventSearchStore.fetchQuery({start_time:Math.ceil(Date.now()/1e3)-43200,endTime:Math.ceil(Date.now()/1e3),interval:"24m",cluster:e})}},{key:"render",value:function(){return v.default.createElement("div",null,v.default.createElement("div",{className:R.default.pane},this.renderBanner()),v.default.createElement("div",{className:R.default.tips},v.default.createElement("div",{className:R.default.pane},this.renderSearchBar(),v.default.createElement("h3",{className:R.default.rule},t("QUERYING_RULES")),this.renderRecentLogs(),this.renderQueryItems())))}},{key:"renderBanner",value:function(){var e=this.eventSearchStore,a=e.histogramTodayData,r=void 0===a?{}:a,n=e.isLoading;return v.default.createElement("div",{className:R.default.banner},v.default.createElement("div",{className:R.default.illustration},v.default.createElement("img",{src:"/assets/log-statistics.svg",alt:"log-statistics"})),v.default.createElement(_.Loading,{spinning:n},v.default.createElement("div",{className:R.default.statistics},v.default.createElement("h3",null,r.events?t.html("TOTAL_EVENTS_TODAY",{events:r.events,className:R.default.count}):t("NO_RESOURCE_EVENTS_TODAY")),r.events?v.default.createElement("p",null,v.default.createElement(_.Icon,{name:"clock"}),t("START_TIME_COLON"),(0,b.default)(new Date).format("".concat(t("EVENT_DATE")))):null)))}},{key:"renderSearchBar",value:function(){var e=this.props,t=e.searchInputState,a=e.clustersOpts;return v.default.createElement("div",{className:R.default.searchBarContainer},globals.app.isMultiCluster&&v.default.createElement(_.Select,{className:R.default.clusterSelector,value:t.cluster,options:a,valueRenderer:this.clusterRenderer,onChange:this.onClusterChange}),v.default.createElement(O.default,{className:R.default.searchBar,onChange:this.onSearchParamsChange,params:t,dropDownItems:C.dropDownItems}))}},{key:"renderRecentLogs",value:function(){var e=this.eventSearchStore,a=e.isLoading,r=e.histogramData,n=void 0===r?{}:r,l=e.total,u=e.interval;return v.default.createElement(_.Loading,{spinning:a},v.default.createElement("div",{className:(0,E.default)(R.default.card,R.default.recent)},v.default.createElement("div",{className:R.default.recentSummary},v.default.createElement("h2",{className:R.default.count},l||0),v.default.createElement("p",null,t("RESOURCE_EVENT_TRENDS_12H"))),v.default.createElement("div",{className:R.default.chart},v.default.createElement(S.default,{xKey:"time",data:(0,y.toJS)(n.buckets||[]),legend:[["count",t("RESOURCE_EVENT_COUNT")]],interval:u||"30m",onBarClick:this.selectedDurationParameter}))))}},{key:"renderQueryItems",value:function(){var e=this;return C.supportQueryParams.map((function(t){return v.default.createElement("div",{className:(0,E.default)(R.default.card,R.default.category),key:t.key,"data-query":t.key,onClick:e.selectedParameter},v.default.createElement("div",{className:R.default.icon},t.iconUrl?v.default.createElement("div",null,v.default.createElement("img",{src:t.iconUrl})):v.default.createElement(_.Icon,{name:t.icon,size:40})),v.default.createElement("div",{className:R.default.desc},v.default.createElement("h4",null,t.title),v.default.createElement("p",null,t.tips)))}))}}]),r}(v.default.Component),o=(0,h.default)(u.prototype,"selectedDurationParameter",[y.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.time,r=void 0===a?0:a,n=e.eventSearchStore.interval,l=e.props.searchInputState;l.end=Math.ceil(r/1e3)+(0,C.getSecond)(n),l.start=Math.ceil(r/1e3),l.step="1m",e.onSearchParamsChange()}}}),l=u))||l;a.default=P},function(e,t,a){e.exports={tips:"HUiUrGnwqXHJnUdkfkdle",rule:"_2GLSFcLXNj2pgmR9iBP9za",searchBar:"_1tOc9TdP-PfQFdXeuWfDo_",pane:"_3ZqYSqDn-TyMEAUF_B4gqT",card:"_2z3MJaUK70hQ0cvHnNouc-",count:"_4Ia9Kde5mKVKcksKOMT4Q",banner:"_18aM0r1HY81ruJr8L4tP5f",illustration:"_1uYgas67hJARUuXbMRHkap",statistics:"_38fKj8hTGtC2lnm4foJlQK",category:"_21Xjq4g0hG38R-o4leFgg4",icon:"_20b2eyqQcQj7r1GAKm57yy",desc:"sNaHeBiU1jrv3yK6-vNS",recent:"_2BxwQBarq9ek5D4LQSS8ae",recentSummary:"XZOzn84R2bHEXCMSGTsQJ",chart:"GyTiLrVB0IA5Wo2Q3i9gm",searchBarContainer:"_3sr_dy9EvZ4c7zIsZ69Wxy",clusterSelector:"_19noImIzSvBQYMb-lW4qCe"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o,i,c,s,f,d,p,m,h=n(r(136)),v=n(r(109)),y=n(r(49)),g=n(r(21)),b=n(r(50)),E=n(r(91)),_=n(r(12)),O=n(r(13)),S=n(r(135)),k=n(r(19)),C=n(r(20)),R=n(r(18)),w=n(r(74)),P=(n(r(92)),l(r(0))),D=r(25),T=n(r(850)),N=n(r(137)),I=n(r(3)),A=r(70),x=r(5),j=n(r(884)),M=n(r(1021)),L=n(r(917)),U=n(r(1365)),F=n(r(2496)),V=r(1366),q=n(r(2500));function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,R.default)(e);if(t){var n=(0,R.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,C.default)(this,a)}}var H=600,Y="10s",K=["m","h","d","M","y"],W=(0,A.observer)((o=function(e){(0,k.default)(o,e);var a,r,n,l,u=G(o);function o(e){var a;return(0,_.default)(this,o),a=u.call(this,e),(0,E.default)(a,"logs",i,(0,S.default)(a)),(0,E.default)(a,"tableCols",c,(0,S.default)(a)),(0,E.default)(a,"selectedDurationParameter",s,(0,S.default)(a)),(0,E.default)(a,"onTableScrollEnd",f,(0,S.default)(a)),a.onSearchParamsChange=function(){a.stopPolling(),a.refreshQuery(),a.fetchHistogram()},(0,E.default)(a,"toggleHistogram",d,(0,S.default)(a)),(0,E.default)(a,"togglePolling",p,(0,S.default)(a)),a.renderHightLightMatchTd=function(e){var t=e.message,r=a.props.searchInputState.query.find((function(e){return"message_search"===e.key}));if(!r)return t;var n=new RegExp(r.value,"gi"),l=t.split(n);if(1===l.length)return t;var u=t.match(n);return P.default.createElement(P.Fragment,null,l.map((function(e,t){return P.default.createElement(P.Fragment,{key:e+t},e,P.default.createElement("span",{className:q.default.hightLightMatch},u[t]))})))},a.poll=function(){var e=a.props.searchInputState,t=H,r=Y;e.end=Math.ceil(Date.now()/1e3),e.start=e.end-t,e.step=r,e.durationAlias="".concat(t/60,"m"),a.fetchHistogram(),a.refreshQuery()},(0,E.default)(a,"changeFrequency",m,(0,S.default)(a)),a.changeQueryMode=function(e){a.props.searchInputState.queryMode=e,a.onSearchParamsChange()},a.changeClusterChange=function(e){a.props.searchInputState.setCluster(e),a.onSearchParamsChange()},a.onCancel=function(){a.setState({visible:!1})},a.openDetailsModal=function(e){a.setState({detail:e,eventMetadata:(0,V.toArray)(e),visible:!0})},a.clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.label})},a.renderTable=function(){return P.default.createElement("div",{className:q.default.table},P.default.createElement(M.default,{onScroll:a.onTableScrollEnd,onTrClick:a.openDetailsModal,cols:a.tableCols,data:a.logs,body:q.default.body}))},a.state={visible:!1,detail:{},eventMetadata:[],showHistogram:!0,polling:!1,pollingFrequency:5e3},a.frequencyOptions=[5,10,15].map((function(e){return{value:1e3*e,label:"".concat(t("TIME_S",{num:e}))}})),a.store=new U.default({size:50}),a}return(0,O.default)(o,[{key:"componentDidMount",value:function(){this.refreshQuery(),this.fetchHistogram()}},{key:"componentWillUnmount",value:function(){this.stopPolling()}},{key:"refreshQuery",value:(l=(0,b.default)(y.default.mark((function e(){var t;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.from=0,t=this.getQueryParams(),e.next=4,this.fetchQuery(z(z({},t),this.duration));case 4:this.logs=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"loadMoreLogs",value:(n=(0,b.default)(y.default.mark((function e(){var t,a,r;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.store.from+this.store.size,e.next=3,this.fetchQuery(z(z({},this.store.preParams),{from:a}));case 3:r=e.sent,(t=this.logs).push.apply(t,(0,v.default)(r));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getNextStepLevel",value:function(e){var t=e.match(/\d+(\w+)$/),a=(0,h.default)(t,2)[1],r=void 0===a?"m":a,n=K.findIndex((function(e){return e===r}));return"1".concat(n<1?K[0]:K[n-1])}},{key:"fetchQuery",value:(r=(0,b.default)(y.default.mark((function e(t){var a,r;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.searchInputState.cluster,r=z(z({},t),{},{cluster:a}),e.next=4,this.store.fetchQuery(r);case 4:return e.abrupt("return",this.store.data);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchHistogram",value:function(){var e=this.getQueryParams();this.store.interval=this.duration.interval,this.store.fetchHistogram(z(z({},e),this.duration))}},{key:"getQueryParams",value:function(){var e=this.props.searchInputState,t=e.query,a=e.queryMode,r=e.cluster;return t.filter((function(e){return e.key})).reduce((function(e,t){var r=t.key,n=t.value,l=a?r:V.queryKeyMapping[r],u=e[l];return e[l]=u?"".concat(u,",").concat(n):n,e}),{cluster:r})}},{key:"startPolling",value:function(){this.poll(),this.pollingInterval=setInterval(this.poll,this.state.pollingFrequency)}},{key:"stopPolling",value:function(){this.setState({polling:!1}),clearInterval(this.pollingInterval)}},{key:"addPollingQuery",value:(a=(0,b.default)(y.default.mark((function e(){var t,a,r,n;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getQueryParams(),r={from:0,start_time:Date.now()-this.state.pollingFrequency,end_time:Date.now()},e.next=4,this.fetchQuery(z(z({},a),r));case 4:n=e.sent,(t=this.logs).push.apply(t,(0,v.default)(n)),this.scrollToBottom();case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderSearchBar",value:function(){var e=this.props,a=e.searchInputState,r=e.clustersOpts;return P.default.createElement("div",{className:q.default.searchBar},globals.app.isMultiCluster&&P.default.createElement(D.Select,{value:a.cluster,onChange:this.changeClusterChange,className:q.default.select,valueRenderer:this.clusterRenderer,options:r}),P.default.createElement(j.default,{className:q.default.searchInput,placeholder:t("SEARCH"),onChange:this.onSearchParamsChange,params:a,dropDownItems:V.dropDownItems}),P.default.createElement(D.Select,{value:a.queryMode,onChange:this.changeQueryMode,className:q.default.select,options:V.queryModeOptions}))}},{key:"renderToolBar",value:function(){var e=this.state,a=e.showHistogram,r=e.polling,n=e.pollingFrequency;return P.default.createElement("div",{className:q.default.toolbar},P.default.createElement("div",null,t("TIME_TOPOLOGY"),P.default.createElement("span",{className:q.default.showHistogramBtn,onClick:this.toggleHistogram},a?t("DISPLAY"):t("HIDE"),P.default.createElement(D.Icon,{name:"caret-down",type:"light"}))),P.default.createElement("div",null,P.default.createElement("span",{className:q.default.pollingBtn,onClick:this.togglePolling},P.default.createElement(D.Tooltip,{content:r?t("STOP_REAL_TIME_RESOURCE_EVENT"):t("START_REAL_TIME_RESOURCE_EVENT")},P.default.createElement(D.Icon,{name:r?"stop":"start",type:"light",size:16}))),P.default.createElement("span",{className:q.default.frequencyOpts},P.default.createElement("span",null," ",t("REFRESH_RATE_COLON")),P.default.createElement(D.Select,{value:n,onChange:this.changeFrequency,className:q.default.frequencyOptions,options:this.frequencyOptions}))))}},{key:"renderTimeChart",value:function(){var e=this.store,a=e.logsCount,r=e.histogramData,n=e.interval,l=((0,x.toJS)(r)||{}).buckets,u=void 0===l?[]:l;return P.default.createElement("div",{className:q.default.chartContainer},P.default.createElement("div",{className:q.default.recentSummary},P.default.createElement("h2",{className:q.default.count},a),P.default.createElement("p",null,t("SEARCH_RESULTS"))),P.default.createElement("div",{className:q.default.chart},P.default.createElement(L.default,{xKey:"time",data:u,legend:[["count",t("RESOURCE_EVENT_COUNT")]],interval:n,onBarClick:this.selectedDurationParameter})))}},{key:"render",value:function(){var e=this.state.showHistogram;return P.default.createElement("div",{className:q.default.container},this.renderSearchBar(),P.default.createElement("div",{className:q.default.searchResult},this.renderToolBar(),e&&this.renderTimeChart(),this.renderTable(),this.renderDetailModal()))}},{key:"renderDetailModal",value:function(){var e=this.state,t=e.visible,a=e.detail,r=e.eventMetadata,n=e.showHistogram;return t?P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:q.default.mask,onClick:this.onCancel}),P.default.createElement("div",{className:(0,I.default)(q.default.detail,(0,g.default)({},q.default.visibleHeight,n))},P.default.createElement(F.default,{detail:a,eventMetadata:r}))):null}},{key:"defaultDuration",get:function(){return{start_time:0,end_time:Math.ceil(Date.now()/1e3),interval:"1d"}}},{key:"duration",get:function(){var e=(this.props||{}).searchInputState,t=Math.ceil(Date.now()/1e3),a=e.start,r=e.end,n=e.step;return a?{start_time:(0,T.default)([Math.ceil(a),t]),end_time:(0,T.default)([Math.ceil(r),t]),interval:n}:this.defaultDuration}}]),o}(P.default.PureComponent),i=(0,w.default)(o.prototype,"logs",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,w.default)(o.prototype,"tableCols",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{thead:t("TIME"),key:"time",content:function(e){var t=e.lastTimestamp;return"[".concat((0,N.default)(t).format("YYYY-MM-DD HH:mm:ss"),"]")},hidden:!1,className:q.default.timecol},{thead:t("CATEGORY"),key:"type",hidden:!1,content:function(e){var t=e.type;return P.default.createElement("div",{className:(0,I.default)(q.default.category,q.default[t.toLocaleLowerCase()])},t)},className:q.default.typecol},{thead:t("PROJECT"),key:"name",hidden:!1,content:function(e){var t=e.involvedObject;return(void 0===t?{}:t).namespace},className:q.default.namecol},{thead:t("RESOURCE_NAME_AND_TYPE"),key:"kind",hidden:!1,content:function(e){var t=e.involvedObject,a=void 0===t?{}:t;return P.default.createElement(P.Fragment,null,P.default.createElement("div",{className:q.default.kind},a.kind),P.default.createElement("div",{className:q.default.name},a.name))},className:q.default.kindcol},{thead:t("REASON"),key:"reason",hidden:!1,content:function(e){return e.reason},className:q.default.reasoncol},{thead:t("MESSAGE"),key:"message",hidden:!1,content:this.renderHightLightMatchTd,mustShow:!0,className:q.default.messagecol}]}}),(0,w.default)(o.prototype,"refreshQuery",[x.action],Object.getOwnPropertyDescriptor(o.prototype,"refreshQuery"),o.prototype),s=(0,w.default)(o.prototype,"selectedDurationParameter",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.time,r=void 0===a?0:a,n=e.store.interval,l=e.props.searchInputState;l.end=Math.ceil(r/1e3)+(0,V.getSecond)(n),l.start=Math.ceil(r/1e3),l.step=e.getNextStepLevel(n),e.fetchHistogram(),e.refreshQuery()}}}),f=(0,w.default)(o.prototype,"onTableScrollEnd",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.clientHeight,r=t.scrollHeight,n=t.scrollTop;if(Math.ceil(a+n)>=r){var l=e.store,u=l.from,o=l.size;l.total>u+o&&e.loadMoreLogs()}}}}),(0,w.default)(o.prototype,"loadMoreLogs",[x.action],Object.getOwnPropertyDescriptor(o.prototype,"loadMoreLogs"),o.prototype),(0,w.default)(o.prototype,"fetchQuery",[x.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchQuery"),o.prototype),(0,w.default)(o.prototype,"fetchHistogram",[x.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchHistogram"),o.prototype),d=(0,w.default)(o.prototype,"toggleHistogram",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.setState((function(e){return{showHistogram:!e.showHistogram}}))}}}),p=(0,w.default)(o.prototype,"togglePolling",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.state.polling;t?e.stopPolling():e.startPolling(),e.setState({polling:!t})}}}),(0,w.default)(o.prototype,"addPollingQuery",[x.action],Object.getOwnPropertyDescriptor(o.prototype,"addPollingQuery"),o.prototype),m=(0,w.default)(o.prototype,"changeFrequency",[x.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setState({pollingFrequency:t}),e.state.polling&&(e.stopPolling(),e.startPolling())}}}),u=o))||u;a.default=W},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(3)),d=r(25),p=r(37),m=n(r(2497)),h=n(r(2499));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=d.Tabs.TabPanel,g=function(e){(0,o.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).renderHeader=function(e){return s.default.createElement("div",{className:h.default.title},t(e))},e.renderEventMetadata=function(){var t=e.props.eventMetadata,a=void 0===t?[]:t;return e.renderMetadata(a)},e.renderDetail=function(){var a=e.props.detail,r=void 0===a?{}:a,n=r.source,l=void 0===n?{}:n,u=r.involvedObject,o=void 0===u?{}:u,i=r.type,c=r.count,d=r.firstTimestamp,m=r.lastTimestamp;return s.default.createElement("div",{className:h.default.center},s.default.createElement("div",{className:h.default.row},s.default.createElement("div",{className:h.default.rowTitle},t("PROJECT")),s.default.createElement("div",{className:h.default.rowDesc},t(o.namespace)||"-")),s.default.createElement("div",{className:h.default.row},s.default.createElement("div",{className:h.default.rowTitle},t("RESOURCE")),s.default.createElement("div",{className:h.default.rowDesc},s.default.createElement("span",null,"[".concat(o.kind,"]")),s.default.createElement("span",{className:h.default.namespace},o.name))),s.default.createElement("div",{className:h.default.row},s.default.createElement("div",{className:h.default.rowTitle},t("CATEGORY")),s.default.createElement("div",{className:(0,f.default)(h.default.category,h.default[i&&i.toLocaleLowerCase()]),style:{marginLeft:10}},i)),s.default.createElement("div",{className:h.default.row},s.default.createElement("div",{className:h.default.rowTitle},t("COUNT")),s.default.createElement("div",{className:h.default.rowDesc},c||0)),s.default.createElement("div",{className:h.default.row},s.default.createElement("div",{className:h.default.rowTitle},t("SOURCE")),s.default.createElement("div",{className:h.default.rowDesc},t(l.component)||"-")),s.default.createElement("div",{className:h.default.row},s.default.createElement("div",{className:h.default.rowTitle},t("EARLIEST_START_TIME")),s.default.createElement("div",{className:h.default.rowDesc},(0,p.getLocalTime)(d).format("YYYY-MM-DD HH:mm:ss"))),s.default.createElement("div",{className:h.default.row},s.default.createElement("div",{className:h.default.rowTitle},t("LATEST_START_TIME")),s.default.createElement("div",{className:h.default.rowDesc},(0,p.getLocalTime)(m).format("YYYY-MM-DD HH:mm:ss"))))},e.renderFooter=function(){var a=e.props.detail,r=(a=void 0===a?{}:a).reason,n=a.message;return s.default.createElement("div",{className:h.default.bottom},s.default.createElement("div",{className:h.default.reason},t("REASON_COLON"),r),s.default.createElement("div",{className:h.default.message},t("MESSAGE_COLON"),n))},e}return(0,u.default)(r,[{key:"renderMetadata",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){var a=Object.keys(t)[0];return s.default.createElement(m.default,{key:a,data:t,renderMetadata:e.renderMetadata})}))}},{key:"render",value:function(){return s.default.createElement(d.Tabs,{direction:"vertical",className:h.default.tabs},s.default.createElement(y,{label:s.default.createElement(d.Icon,{name:"resource",size:16}),name:"resource"},s.default.createElement("div",{className:h.default.content},this.renderHeader("METADATA"),this.renderEventMetadata())),s.default.createElement(y,{label:s.default.createElement(d.Icon,{name:"cloud",size:16}),name:"cloud"},s.default.createElement("div",{className:h.default.content},this.renderHeader("DETAILS"),this.renderDetail(),this.renderFooter())))}}]),r}(s.default.Component);a.default=g},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(192)),l=r(a(21)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=a(25),p=r(a(2498));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,u.default)(this,a),(r=t.call(this,e)).state={data:e.data},r}return(0,o.default)(a,[{key:"onCollapsed",value:function(e){var t=h(h({},e),{},{collapsed:!e.collapsed});this.setState({data:t})}},{key:"render",value:function(){var e=this.state.data,t=Object.keys(e)[0];return"object"===(0,n.default)(e[t])&&null!=e[t]?f.default.createElement("div",{key:t,className:e.collapsed?p.default.close:"",style:{marginLeft:30*e.level}},f.default.createElement("div",{className:p.default.header,onClick:this.onCollapsed.bind(this,e)},f.default.createElement(d.Icon,{name:e.collapsed?"caret-right":"caret-down",size:16})," ",f.default.createElement("span",{className:p.default.title},t)," ",f.default.createElement("span",{className:p.default.count},Object.keys(e[t]).length||0," item")),this.props.renderMetadata(e[t])):f.default.createElement("div",{style:{marginLeft:e.level?30:0,display:"flex"},key:t},f.default.createElement("div",{className:p.default.text},"".concat(t,":"))," ",f.default.createElement("div",{className:p.default.value},"".concat(e[t])))}}]),a}(f.default.Component);t.default=y},function(e,t,a){e.exports={close:"_1ybq6PhKCe4sErBBt12vVg",header:"_1a2u4mWHl-XIXUCqegkkEa",title:"_1p7jwe-sSfl-gQ4MdoR5KC",count:"_3turCguC50Gkd9fwGF4zbI",text:"_1f4clHJHy6Ey5YK4e1NchO",value:"_3wYjBqjLPSSSdAgBS7i_2N"}},function(e,t,a){e.exports={tabs:"_1se9kbNqmbeKE4p5koCxJa",content:"_1139ZVmvCRHutaDUqo57Sm",title:"_1y5Gb9SU-eSKSgp0nm0T_O",center:"_2zRILf8tuqvmuqPrgLfySD",row:"_1GvSL_h1sLQmdtAqwfuF9W",rowTitle:"_3DJwy8Pl_qaJH7gPtGAILb",rowDesc:"_2GN3BlC9zmUvVclXusEqVa",bottom:"WdXl73XqPpDG3shAagx_Q",reason:"_1i02t70FQl-dTwHOf4zppC",message:"_3iHiOmuVf5KTLpKqwbEwQP",category:"Ymlku_NXsyZFYPKJUNB6L",normal:"_1vKkfcZlciv3nX2k3N3WK9",warning:"_1Lr-whxREdm5Kie-sqZiC9"}},function(e,t,a){e.exports={container:"_3gjOLxaR55_4lAD-c5QeAS",searchBar:"_25koHAGBANgQ8lDBfKCbdX",searchInput:"_3zo-xOz0XU_jMzkZsDgZS5",select:"vXXfIYWS9Igrt3UMQ69ED",searchResult:"_27ULQsi85u_C3XiRHCbNi9",toolbar:"dVDpJUjPeZtDgflPwxnr8",frequencyOpts:"_1nVWkpvesnFRWsW63VBTWJ",frequencyOptions:"FM2znfkfXuoCAgcDRMNDW",chartContainer:"_3dM9813Ygax_T5LK5pQezY",recentSummary:"aDQVgehy_qRw2nBwtLup5",chart:"_1aZVmUaijbpEDSfFaoIUUc",mask:"_14qyRF67463X-BroO7yTLb",detail:"_2BTJwh10p9YmMBwAM5PHO1",visibleHeight:"_1qPNFOmSiF41YYFYDzCE5U",table:"_26MTXUcnmnieF4FHKsEBFq",logItem:"ZctOWGJvZHvBkm2pk-nIP",timecol:"_3WIIfq1CJpihKOW_E0RF-_",typecol:"_2b3k2Vcx4BT3oZHo-lwPgN",namecol:"_3WwbzVKpYojUnY_qJElcTF",kindcol:"_3BsEi-O6J5rykxHMBYpwfx",reasoncol:"_3u0LPhavk6Tvf0LXRQY-QF",messagecol:"zY0FOlaYwDkt2a8La_xeU",body:"_23tE4nGfhQixdMKdDzLPUO",hightLightMatch:"_3-zvQSbRFtWxMCrZw2sf93",showHistogramBtn:"_19TWrDuboJwPItxLxY0cpo",exportBtn:"_2KP9BLyxOjvCuW8mE07fu",pollingBtn:"_3z240o33Bn7Ao_t5JmePzb",category:"_1WkGd7I8ASnDx7v5jtDtJK",normal:"_2eBENQgN29gCVl6OF49Id2",warning:"_3cjn-gIz6iRV1yDgf1nxxm",kind:"_2s7GAk0FxLJ2VwzmQfJC4O",name:"_11QPMYc4lwKvOjmkC12V5R"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Home",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Detail",{enumerable:!0,get:function(){return l.default}});var n=r(a(2502)),l=r(a(2504))},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(91)),c=n(r(12)),s=n(r(13)),f=n(r(135)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(74)),v=(n(r(92)),n(r(0))),y=r(5),g=r(70),b=n(r(137)),E=n(r(3)),_=r(25),O=n(r(884)),S=n(r(917)),k=n(r(1368)),C=r(1369),R=n(r(2503));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,g.observer)((u=function(e){(0,d.default)(r,e);var a=w(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).auditingStore=new k.default,(0,i.default)(e,"selectedDurationParameter",o,(0,f.default)(e)),e.selectedParameter=function(t){e.props.searchInputState.nextParamsKey=t.currentTarget.dataset.query},e.onSearchParamsChange=function(){e.props.formStepState.next()},e.onClusterChange=function(t){e.props.searchInputState.setCluster(t),e.updateStatistics()},e.clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.label})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.updateStatistics()}},{key:"updateStatistics",value:function(){var e=this.props.searchInputState.cluster;this.auditingStore.fetchTodayHistogram({cluster:e}),this.auditingStore.fetchHistogram({cluster:e}),this.auditingStore.fetchQuery({start_time:Math.ceil(Date.now()/1e3)-43200,endTime:Math.ceil(Date.now()/1e3),interval:"24m",cluster:e})}},{key:"render",value:function(){return v.default.createElement("div",null,v.default.createElement("div",{className:R.default.pane},this.renderBanner()),v.default.createElement("div",{className:R.default.tips},v.default.createElement("div",{className:R.default.pane},this.renderSearchBar(),v.default.createElement("h3",{className:R.default.rule},t("QUERYING_RULES")),this.renderRecentLogs(),this.renderQueryItems())))}},{key:"renderBanner",value:function(){var e=this.auditingStore,a=e.histogramTodayData,r=(a=void 0===a?{}:a).events,n=e.isLoading;return v.default.createElement("div",{className:R.default.banner},v.default.createElement("div",{className:R.default.illustration},v.default.createElement("img",{src:"/assets/log-statistics.svg",alt:"log-statistics"})),v.default.createElement(_.Loading,{spinning:n},v.default.createElement("div",{className:R.default.statistics},v.default.createElement("h3",null,r?t.html("TOTAL_AUDITING_TODAY",{auditing:r,className:R.default.count}):t("NO_AUDIT_LOG_TODAY")),r?v.default.createElement("p",null,v.default.createElement(_.Icon,{name:"clock"}),t("START_TIME_COLON"),(0,b.default)(new Date).format("".concat(t("EVENT_DATE")))):null,v.default.createElement("p",{className:R.default.tip},v.default.createElement(_.Icon,{name:"information",color:{primary:"#fff",secondary:"#F5A623"}}),t.html("ENABLE_AUDIT_LOG_COLLECTION_DESC",{link:"https://kubesphere.io/docs/toolbox/auditing/auditing-receive-customize/#receive-auditing-logs-from-kubernetes"})))))}},{key:"renderSearchBar",value:function(){var e=this.props,t=e.searchInputState,a=e.clustersOpts;return v.default.createElement("div",{className:R.default.searchBarContainer},globals.app.isMultiCluster&&v.default.createElement(_.Select,{className:R.default.clusterSelector,value:t.cluster,options:a,valueRenderer:this.clusterRenderer,onChange:this.onClusterChange}),v.default.createElement(O.default,{className:R.default.searchBar,onChange:this.onSearchParamsChange,params:t,dropDownItems:C.dropDownItems}))}},{key:"renderRecentLogs",value:function(){var e=this.auditingStore,a=e.isLoading,r=e.histogramData,n=void 0===r?{}:r,l=e.total,u=e.interval;return v.default.createElement(_.Loading,{spinning:a},v.default.createElement("div",{className:(0,E.default)(R.default.card,R.default.recent)},v.default.createElement("div",{className:R.default.recentSummary},v.default.createElement("h2",{className:R.default.count},l||0),v.default.createElement("p",null,t("Auditing log trends in the last 12 hours"))),v.default.createElement("div",{className:R.default.chart},v.default.createElement(S.default,{xKey:"time",data:(0,y.toJS)(n.buckets||[]),legend:[["count",t("AUDIT_LOG_COUNT")]],interval:u||"30m",onBarClick:this.selectedDurationParameter}))))}},{key:"renderQueryItems",value:function(){var e=this;return C.supportQueryParams.map((function(t){return v.default.createElement("div",{className:(0,E.default)(R.default.card,R.default.category),key:t.key,"data-query":t.key,onClick:e.selectedParameter},v.default.createElement("div",{className:R.default.icon},t.iconUrl?v.default.createElement("div",null,v.default.createElement("img",{src:t.iconUrl})):v.default.createElement(_.Icon,{name:t.icon,size:40})),v.default.createElement("div",{className:R.default.desc},v.default.createElement("h4",null,t.title),v.default.createElement("p",null,t.tips)))}))}}]),r}(v.default.Component),o=(0,h.default)(u.prototype,"selectedDurationParameter",[y.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.time,r=void 0===a?0:a,n=e.auditingStore.interval,l=e.props.searchInputState;l.end=Math.ceil(r/1e3)+(0,C.getSecond)(n),l.start=Math.ceil(r/1e3),l.step="1m",e.onSearchParamsChange()}}}),l=u))||l;a.default=P},function(e,t,a){e.exports={tips:"_1VtgWiKRd_U33dsEufRwnV",rule:"_1QdP7uSc0e-A_-4bcxFMlN",searchBar:"_2-AjNx8g4uFxprutd36N90",pane:"_2wRJs3tk_X3Jlqathd-yNg",card:"_3mkuDJ9H8N54oZ93otNPOh",count:"hBUtk8OzXjNS1s4ii8Guh",banner:"_1wojFujr9YiM_ne9OJpzCH",illustration:"_3Bnzh7zNGFEdB8sW9D1eny",statistics:"_2r0KI2FnmKH4AHVQJwJdhK",category:"mRFyTP3fWxl2C6H7l4Z78",icon:"_3tFUNiXFwgA1VYQI7-58g8",desc:"_3fLQRwf0dnfVAauFnE16OM",recent:"TvUOGqNnW_iyDKfWn69SL",recentSummary:"eWOb0aa4fIssJ6ozBxOa3",chart:"_3cBgRlz5zX8dwPNDSNTonQ",searchBarContainer:"_3ty4EH3Pnl8WV44LeUpkfi",clusterSelector:"p5RuoM3Ganr0_URyaNg5u"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o,i,c,s,f,d,p,m,h=n(r(136)),v=n(r(109)),y=n(r(49)),g=n(r(21)),b=n(r(50)),E=n(r(91)),_=n(r(12)),O=n(r(13)),S=n(r(135)),k=n(r(19)),C=n(r(20)),R=n(r(18)),w=n(r(74)),P=(n(r(92)),l(r(0))),D=r(25),T=n(r(16)),N=n(r(850)),I=n(r(137)),A=n(r(3)),x=r(70),j=r(5),M=n(r(884)),L=n(r(1021)),U=n(r(917)),F=n(r(1368)),V=n(r(2505)),q=r(1369),B=n(r(2509));function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,R.default)(e);if(t){var n=(0,R.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,C.default)(this,a)}}var Y=600,K="10s",W=["m","h","d","M","y"],J=(0,x.observer)((o=function(e){(0,k.default)(u,e);var a,r,n,l=H(u);function u(e){var a;return(0,_.default)(this,u),a=l.call(this,e),(0,E.default)(a,"logs",i,(0,S.default)(a)),(0,E.default)(a,"tableCols",c,(0,S.default)(a)),(0,E.default)(a,"selectedDurationParameter",s,(0,S.default)(a)),(0,E.default)(a,"onTableScrollEnd",f,(0,S.default)(a)),a.onSearchParamsChange=function(){a.stopPolling(),a.refreshQuery(),a.fetchHistogram()},(0,E.default)(a,"toggleHistogram",d,(0,S.default)(a)),(0,E.default)(a,"togglePolling",p,(0,S.default)(a)),a.poll=function(){var e=a.props.searchInputState,t=Y,r=K;e.end=Math.ceil(Date.now()/1e3),e.start=e.end-t,e.step=r,e.durationAlias="".concat(t/60,"m"),a.fetchHistogram(),a.refreshQuery()},(0,E.default)(a,"changeFrequency",m,(0,S.default)(a)),a.changeQueryMode=function(e){a.props.searchInputState.queryMode=e,a.onSearchParamsChange()},a.changeClusterChange=function(e){a.props.searchInputState.setCluster(e),a.onSearchParamsChange()},a.onCancel=function(){a.setState({visible:!1})},a.openDetailsModal=function(e){a.setState({detail:e,eventMetadata:(0,q.toArray)(e),visible:!0})},a.clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.label})},a.renderTable=function(){return P.default.createElement("div",{className:B.default.table},P.default.createElement(L.default,{onScroll:a.onTableScrollEnd,onTrClick:a.openDetailsModal,cols:a.tableCols,data:a.logs,body:B.default.body}))},a.state={visible:!1,detail:{},eventMetadata:[],showHistogram:!0,polling:!1,pollingFrequency:5e3},a.frequencyOptions=[5,10,15].map((function(e){return{value:1e3*e,label:"".concat(t("TIME_S",{num:e}))}})),a.store=new F.default({size:50}),a}return(0,O.default)(u,[{key:"componentDidMount",value:function(){this.refreshQuery(),this.fetchHistogram()}},{key:"componentWillUnmount",value:function(){this.stopPolling()}},{key:"refreshQuery",value:(n=(0,b.default)(y.default.mark((function e(){var t;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.from=0,t=this.getQueryParams(),e.next=4,this.fetchQuery(G(G({},t),this.duration));case 4:this.logs=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadMoreLogs",value:(r=(0,b.default)(y.default.mark((function e(){var t,a,r;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.store.from+this.store.size,e.next=3,this.fetchQuery(G(G({},this.store.preParams),{from:a}));case 3:r=e.sent,(t=this.logs).push.apply(t,(0,v.default)(r));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getNextStepLevel",value:function(e){var t=e.match(/\d+(\w+)$/),a=(0,h.default)(t,2)[1],r=void 0===a?"m":a,n=W.findIndex((function(e){return e===r}));return"1".concat(n<1?W[0]:W[n-1])}},{key:"fetchQuery",value:(a=(0,b.default)(y.default.mark((function e(t){var a,r;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.searchInputState.cluster,r=G(G({},t),{},{cluster:a}),e.next=4,this.store.fetchQuery(r);case 4:return e.abrupt("return",this.store.data);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchHistogram",value:function(){var e=this.getQueryParams();this.store.interval=this.duration.interval,this.store.fetchHistogram(G(G({},e),this.duration))}},{key:"getQueryParams",value:function(){var e=this.props.searchInputState,t=e.query,a=e.queryMode,r=e.cluster;return t.filter((function(e){return e.key})).reduce((function(e,t){var r=t.key,n=t.value,l=a?r:q.queryKeyMapping[r],u=e[l];return e[l]=u?"".concat(u,",").concat(n):n,e}),{cluster:r})}},{key:"startPolling",value:function(){this.poll(),this.pollingInterval=setInterval(this.poll,this.state.pollingFrequency)}},{key:"stopPolling",value:function(){this.setState({polling:!1}),clearInterval(this.pollingInterval)}},{key:"renderSearchBar",value:function(){var e=this.props,a=e.searchInputState,r=e.clustersOpts;return P.default.createElement("div",{className:B.default.searchBar},globals.app.isMultiCluster&&P.default.createElement(D.Select,{value:a.cluster,onChange:this.changeClusterChange,className:B.default.select,valueRenderer:this.clusterRenderer,options:r}),P.default.createElement(M.default,{className:B.default.searchInput,placeholder:t("SEARCH"),onChange:this.onSearchParamsChange,params:a,dropDownItems:q.dropDownItems}),P.default.createElement(D.Select,{value:a.queryMode,onChange:this.changeQueryMode,className:B.default.select,options:q.queryModeOptions}))}},{key:"renderToolBar",value:function(){var e=this.state,a=e.showHistogram,r=e.polling,n=e.pollingFrequency;return P.default.createElement("div",{className:B.default.toolbar},P.default.createElement("div",null,t("TIME_TOPOLOGY"),P.default.createElement("span",{className:B.default.showHistogramBtn,onClick:this.toggleHistogram},a?t("DISPLAY"):t("HIDE"),P.default.createElement(D.Icon,{name:"caret-down",type:"light"}))),P.default.createElement("div",null,P.default.createElement("span",{className:B.default.pollingBtn,onClick:this.togglePolling},P.default.createElement(D.Tooltip,{content:r?t("STOP_REAL_TIME_AUDIT_LOG"):t("START_REAL_TIME_AUDIT_LOG")},P.default.createElement(D.Icon,{name:r?"stop":"start",type:"light",size:16}))),P.default.createElement("span",{className:B.default.frequencyOpts},P.default.createElement("span",null," ",t("REFRESH_RATE_COLON")),P.default.createElement(D.Select,{value:n,onChange:this.changeFrequency,className:B.default.frequencyOptions,options:this.frequencyOptions}))))}},{key:"renderTimeChart",value:function(){var e=this.store,a=e.logsCount,r=e.histogramData,n=e.interval,l=((0,j.toJS)(r)||{}).buckets,u=void 0===l?[]:l;return P.default.createElement("div",{className:B.default.chartContainer},P.default.createElement("div",{className:B.default.recentSummary},P.default.createElement("h2",{className:B.default.count},a),P.default.createElement("p",null,t("SEARCH_RESULTS"))),P.default.createElement("div",{className:B.default.chart},P.default.createElement(U.default,{xKey:"time",data:u,legend:[["count",t("AUDIT_LOG_COUNT")]],interval:n,onBarClick:this.selectedDurationParameter})))}},{key:"render",value:function(){var e=this.state.showHistogram;return P.default.createElement("div",{className:B.default.container},this.renderSearchBar(),P.default.createElement("div",{className:B.default.searchResult},this.renderToolBar(),e&&this.renderTimeChart(),this.renderTable(),this.renderDetailModal()))}},{key:"renderDetailModal",value:function(){var e=this.state,t=e.visible,a=e.detail,r=e.eventMetadata,n=e.showHistogram;return t?P.default.createElement(P.Fragment,null,P.default.createElement("div",{className:B.default.mask,onClick:this.onCancel}),P.default.createElement("div",{className:(0,A.default)(B.default.detail,(0,g.default)({},B.default.visibleHeight,n))},P.default.createElement(V.default,{detail:a,eventMetadata:r}))):null}},{key:"defaultDuration",get:function(){return{start_time:0,end_time:Math.ceil(Date.now()/1e3),interval:"1d"}}},{key:"duration",get:function(){var e=(this.props||{}).searchInputState,t=Math.ceil(Date.now()/1e3),a=e.start,r=e.end,n=e.step;return a?{start_time:(0,N.default)([Math.ceil(a),t]),end_time:(0,N.default)([Math.ceil(r),t]),interval:n}:this.defaultDuration}}]),u}(P.default.PureComponent),i=(0,w.default)(o.prototype,"logs",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,w.default)(o.prototype,"tableCols",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{thead:t("TIME"),key:"Time",content:function(e){var t=e.RequestReceivedTimestamp;return"[".concat((0,I.default)(t).format("YYYY-MM-DD HH:mm:ss"),"]")},hidden:!1,className:B.default.timecol},{thead:t("VERB"),key:"verb",hidden:!1,content:function(e){return e.Verb},className:B.default.Verbcol},{thead:t("STATUS_CODE"),key:"Status Code",hidden:!1,content:function(e){var t=e.ResponseStatus,a=(0,T.default)(t,"code");return a?q.httpcodes[a]:""},className:B.default.statuscol},{thead:t("WORKSPACE"),key:"Workspace",hidden:!1,content:function(e){return e.Workspace},className:B.default.workspacecol},{thead:t("PROJECT"),key:"Project",hidden:!1,content:function(e){var t=e.ObjectRef;return(0,T.default)(t,"Namespace")},className:B.default.namespacecol},{thead:t("REASON"),key:"reason",hidden:!0,content:function(e){var t=e.ResponseStatus;return(0,T.default)(t,"reason")},className:B.default.reasoncol},{thead:t("RESOURCE_NAME_AND_TYPE"),key:"resources",hidden:!1,content:function(e){var t=e.ObjectRef,a=void 0===t?{}:t;return P.default.createElement(P.Fragment,null,P.default.createElement("div",{className:B.default.kind},a.Resource),P.default.createElement("div",{className:B.default.name},a.Name))},className:B.default.namecol},{thead:t("SUBRESOURCE"),key:"Subresource",hidden:!0,content:function(e){var t=e.ObjectRef;return(0,T.default)(t,"Subresource")},className:B.default.subresourcecol},{thead:t("OPERATOR"),key:"Operation Account",hidden:!1,content:function(e){var t=e.User;return(0,T.default)(t,"Username")},className:B.default.usernamecol},{thead:t("SOURCE_IP_ADDRESS"),key:"sourceIP",hidden:!0,content:function(e){return e.SourceIPs},className:B.default.messagecol}]}}),(0,w.default)(o.prototype,"refreshQuery",[j.action],Object.getOwnPropertyDescriptor(o.prototype,"refreshQuery"),o.prototype),s=(0,w.default)(o.prototype,"selectedDurationParameter",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.time,r=void 0===a?0:a,n=e.store.interval,l=e.props.searchInputState;l.end=Math.ceil(r/1e3)+(0,q.getSecond)(n),l.start=Math.ceil(r/1e3),l.step=e.getNextStepLevel(n),e.fetchHistogram(),e.refreshQuery()}}}),f=(0,w.default)(o.prototype,"onTableScrollEnd",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.clientHeight,r=t.scrollHeight,n=t.scrollTop;if(Math.ceil(a+n)>=r){var l=e.store,u=l.from,o=l.size;l.total>u+o&&e.loadMoreLogs()}}}}),(0,w.default)(o.prototype,"loadMoreLogs",[j.action],Object.getOwnPropertyDescriptor(o.prototype,"loadMoreLogs"),o.prototype),(0,w.default)(o.prototype,"fetchQuery",[j.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchQuery"),o.prototype),(0,w.default)(o.prototype,"fetchHistogram",[j.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchHistogram"),o.prototype),d=(0,w.default)(o.prototype,"toggleHistogram",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.setState((function(e){return{showHistogram:!e.showHistogram}}))}}}),p=(0,w.default)(o.prototype,"togglePolling",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.state.polling;t?e.stopPolling():e.startPolling(),e.setState({polling:!t})}}}),m=(0,w.default)(o.prototype,"changeFrequency",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setState({pollingFrequency:t}),e.state.polling&&(e.stopPolling(),e.startPolling())}}}),u=o))||u;a.default=J},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(2506)),p=n(r(2508));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=f.Tabs.TabPanel,v=function(e){(0,o.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).renderHeader=function(e){return s.default.createElement("div",{className:p.default.title},t(e))},e.renderEventMetadata=function(){var t=e.props.eventMetadata,a=void 0===t?[]:t;return e.renderMetadata(a)},e}return(0,u.default)(r,[{key:"renderMetadata",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){var a=Object.keys(t)[0];return s.default.createElement(d.default,{key:a,data:t,renderMetadata:e.renderMetadata})}))}},{key:"render",value:function(){return s.default.createElement(f.Tabs,{direction:"vertical",className:p.default.tabs},s.default.createElement(h,{label:s.default.createElement(f.Icon,{name:"resource",size:16}),name:"resource"},s.default.createElement("div",{className:p.default.content},this.renderHeader("METADATA"),this.renderEventMetadata())))}}]),r}(s.default.Component);a.default=v},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(192)),l=r(a(21)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=a(25),p=r(a(2507));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,u.default)(this,a),(r=t.call(this,e)).state={data:e.data},r}return(0,o.default)(a,[{key:"onCollapsed",value:function(e){var t=h(h({},e),{},{collapsed:!e.collapsed});this.setState({data:t})}},{key:"render",value:function(){var e=this.state.data,t=Object.keys(e)[0];return"object"===(0,n.default)(e[t])&&null!=e[t]?f.default.createElement("div",{key:t,className:e.collapsed?p.default.close:"",style:{marginLeft:30*e.level}},f.default.createElement("div",{className:p.default.header,onClick:this.onCollapsed.bind(this,e)},f.default.createElement(d.Icon,{name:e.collapsed?"caret-right":"caret-down",size:16})," ",f.default.createElement("span",{className:p.default.title},t)," ",f.default.createElement("span",{className:p.default.count},Object.keys(e[t]).length||0," item")),this.props.renderMetadata(e[t])):f.default.createElement("div",{style:{marginLeft:e.level?30:0,display:"flex"},key:t},f.default.createElement("div",{className:p.default.text},"".concat(t,":"))," ",f.default.createElement("div",{className:p.default.value},"".concat(e[t])))}}]),a}(f.default.Component);t.default=y},function(e,t,a){e.exports={close:"_1rB-UpDTVUT7Tj3ErCWLpo",header:"f7FskCVZWpbbKK9MImJc9",title:"_1kqt_W0OCu9DbxD33SlkX-",count:"_24d4RSAJ0oKwEA74aMta2y",text:"_3OaQdAKM0R7RXwkPWTxEQP",value:"k4jAzjMhZd8umcSMejvVb"}},function(e,t,a){e.exports={tabs:"KKvcEADuIO6BDp__BjIEv",content:"_2srMJMQLn3PeTDKKxhADQj",title:"_3t84StKrRx3W7zbD2MJ6Gc",category:"_3QJ0jvrznD9x7zIIwI4New",normal:"_2ybdgxuyr7NteIgPikT0B",warning:"_2New8b8tNSWOWV3ovwC1Xo"}},function(e,t,a){e.exports={container:"_1LLV-6j1suy8IikTmy-cwl",searchBar:"_1wryW4dN7_ULJ0sN1XtJm1",searchInput:"_11WCqh1QFrt19Yyf6voLkO",select:"f94_5VyFkKE0ONNXc2apR",searchResult:"_27fN00EIeu5fTJP6JunHsx",toolbar:"_1noTiX34KNFgB5X-c2G734",frequencyOpts:"_2n0mCEH3w-NnOHuBajFz-",frequencyOptions:"_2duvbZPUKy3cvyIhPQ9dyN",chartContainer:"_1WzBTOPncvRnPYHMK0hYeN",recentSummary:"_16evX7F4VGN5FqxD6ARmIH",chart:"C98Lov6shKNVDhWxHWmST",mask:"_3zMAvxEKGyNGxkYsENGaAw",detail:"AM6K7BeUuX7AosbH06Ur_",visibleHeight:"_2iEbFwF0hIjYotC6-fklQH",table:"BII9Ztp2DVyUC9wUqSSwb",logItem:"Kxj325kWlhvTXLe3FP9r1",timecol:"LV51IOdWZ_PWzQTc9Uncv",Verbcol:"_2gOOdfNcPohLKtB3nnlPLD",statuscol:"_2s7c5gZwOgb7jcTcNqv79T",reasoncol:"RlTq96EZ4CRBJTfWUEYMX",kind:"_2sJ-n9LGXQZmGRQ0THc1lX",name:"yfCEePn_v7CEs7MsCtJwi",namecol:"_2BPEDinBWaqBwHwmwqzv1Y",subresourcecol:"_1QNb-F_VeBcPRsydvWthCY",namespacecol:"na558eS2eVwf8rJ1ahyIL",workspacecol:"_2RIQ9dHrDg7qIfk1JHAvIV",usernamecol:"_1IgkoyBBq2UXduYvqr0-Yy",body:"_2gCVwaX4qKXIKTA5UEyYnm",showHistogramBtn:"_3b_x2XDPjbDISooqYGps9s",exportBtn:"iQvfLyqh_P4_NB-zdMaD",pollingBtn:"RXdqpAESZnnwa2Kn_Vl35"}},function(e,t,a){e.exports={kubectl:"m7dISkDTzCq5-2-lQxoBK",pane:"-V9lV41dPvRcbUc66hIVo",doc:"_3Od7RAg5EEtlhRRWof19XT",tipWrapper:"bE8idPBqDeB5OHMeIEO6Z",terminal:"_1R4t1nT7mYghLBRzNyklEq",download:"_3m-IzimMxgErpmjtiOYz5F"}},function(e,t,a){e.exports={billContainer:"_2-YL0dRU5iRGLNTSERcFGF",billContent:"_16hTa4a3M8Y-mx6q85wXqD",bill:"_2tzKKsjKcczEA1PqAgAfxB",empty:"_2X9XvE6oo68qmTDvsm9UJA",empty__Container:"_1mJEBLpfdT9otBJGFLU4Dd",billModalHeader:"_12hz7qgeMg2URyKnsvuIpq"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.handleSelected,r=e.cardConfigRule,n="zh"===(0,i.default)("lang"),s=function(e){var r=e.subTitle,u=e.desc,i=e.infos,s=e.type;return l.default.createElement(l.default.Fragment,null,l.default.createElement("h3",{className:c.default.subTitle},t(r)),l.default.createElement("p",{className:c.default.desc},t(u)),l.default.createElement("ul",{className:c.default.infos,style:{minHeight:n?"25%":"32%"}},i.map((function(e,a){return l.default.createElement("li",{key:a},t.html(e))}))),l.default.createElement(o.Button,{type:"control",onClick:function(){return a(s)}},t("VIEW")))};return l.default.createElement("div",{className:c.default.billHome},l.default.createElement("div",{className:c.default.billHome__container},l.default.createElement("div",{className:c.default.nav},l.default.createElement(o.Button,{icon:"chevron-left",iconType:"light"}),l.default.createElement(o.Button,{icon:"chevron-right",iconType:"light"}),l.default.createElement("span",{className:c.default.message},t("RESOURCE_CONSUMPTION_DESC"))),l.default.createElement("div",{className:c.default.container},r&&r.map((function(e){return l.default.createElement(u.default,{key:e.type,title:l.default.createElement(o.Icon,{name:e.icon,size:48})},s(e))})))))};var l=n(r(0)),u=n(r(741)),o=r(25),i=n(r(195)),c=n(r(2513))},function(e,t,a){e.exports={billHome:"_3F09NB1iD4WyLOxlg1fcnS",billHome__container:"OmwABzziZx-gqwqdIPVGH",nav:"_1WwwUAwLNenVTHCGix64ai",message:"_2Kly1WpC2XCZViU7u9NzqR",container:"XyA5oWmHV5K1bV5UgX1aV",subTitle:"_2c90eCSo5WGPn5UU26KrF2",desc:"_1cUnUQgKGxav2g1xGA5W41",infos:"_2bNZmBpaZeCXlxFdZbErOH"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=a(70),d=r(a(2515)),p=a(834);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=(0,f.observer)(n=function(e){(0,o.default)(a,e);var t=m(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.handleBack;return s.default.createElement(d.default,{level:p.LEVEL_CONFIG[t],meterType:t,handleBack:a})}}]),a}(s.default.Component))||n;t.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m,h,v,y,g,b,E,_,O,S,k,C,R,w,P,D,T,N,I,A,x,j,M,L=n(r(71)),U=n(r(56)),F=n(r(49)),V=n(r(21)),q=n(r(50)),B=n(r(91)),z=n(r(12)),G=n(r(13)),H=n(r(135)),Y=n(r(19)),K=n(r(20)),W=n(r(18)),J=n(r(74)),Q=(n(r(92)),n(r(2516))),X=n(r(0)),Z=r(70),$=n(r(3)),ee=n(r(16)),te=n(r(23)),ae=n(r(32)),re=n(r(295)),ne=n(r(185)),le=n(r(73)),ue=n(r(297)),oe=n(r(68)),ie=n(r(294)),ce=r(5),se=r(25),fe=n(r(1372)),de=n(r(2517)),pe=n(r(751)),me=r(1022),he=r(863),ve=r(58),ye=n(r(2518)),ge=r(37),be=r(834),Ee=n(r(2523)),_e=n(r(2526)),Oe=n(r(2528)),Se=n(r(2532)),ke=n(r(2534)),Ce=n(r(2536)),Re=n(r(2540)),we=n(r(2550)),Pe=n(r(2551)),De=n(r(2553));function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),!0).forEach((function(t){(0,V.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,W.default)(e);if(t){var n=(0,W.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,K.default)(this,a)}}var Ae=(0,Z.observer)((u=function(e){(0,Y.default)(r,e);var a=Ie(r);function r(){var e;(0,z.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).clusterMeterStore=new de.default,e.store=new fe.default,(0,B.default)(e,"crumbData",o,(0,H.default)(e)),(0,B.default)(e,"cacheCrumbData",i,(0,H.default)(e)),(0,B.default)(e,"tableData",c,(0,H.default)(e)),(0,B.default)(e,"active",s,(0,H.default)(e)),(0,B.default)(e,"list",f,(0,H.default)(e)),(0,B.default)(e,"timeRange",d,(0,H.default)(e)),(0,B.default)(e,"currentMeterData",p,(0,H.default)(e)),(0,B.default)(e,"parentMeterData",m,(0,H.default)(e)),(0,B.default)(e,"sideLoading",h,(0,H.default)(e)),(0,B.default)(e,"loading",v,(0,H.default)(e)),(0,B.default)(e,"chartData",y,(0,H.default)(e)),(0,B.default)(e,"priceConfig",g,(0,H.default)(e)),(0,B.default)(e,"priceConfigList",b,(0,H.default)(e)),e.childrenResourceList=[],(0,B.default)(e,"pieChartData",E,(0,H.default)(e)),(0,B.default)(e,"resourceLoading",_,(0,H.default)(e)),e.initData=(0,q.default)(F.default.mark((function t(){var a,r,n,l,u,o,i;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,e.sideLoading=!0,"workspaces"!==e.props.meterType){t.next=13;break}return t.next=5,e.clusterMeterStore.fetchList({type:"cluster"});case 5:if(e.clusterList=t.sent,globals.app.isMultiCluster?e.clusterList=e.clusterList.map((function(e){return Ne({disabled:!(0,ee.default)(e,"_origin.configz.metering")},e)})):e.clusterList=e.clusterList.map((function(e){return Ne({disabled:!globals.ksConfig.metering},e)})),!(0,ae.default)(e.clusterList)){t.next=11;break}return e.sideLoading=!1,e.loading=!1,t.abrupt("return");case 11:return t.next=13,e.getPriceConfigListByCluster(e.clusterList);case 13:return t.next=15,e.clusterMeterStore.fetchList({type:e.props.meterType});case 15:if(a=t.sent,"cluster"===e.props.meterType?globals.app.isMultiCluster?e.list=a.map((function(e){return Ne({disabled:!(0,ee.default)(e,"_origin.configz.metering")},e)})):e.list=a.map((function(e){return Ne({disabled:!globals.ksConfig.metering},e)})):e.list=e.setWSListDisabledByCluster(a),!(0,ae.default)((0,ce.toJS)(e.list))){t.next=21;break}return e.sideLoading=!1,e.loading=!1,t.abrupt("return");case 21:n=0;case 22:if(!(n<e.list.length)){t.next=29;break}if(e.list[n].disabled){t.next=26;break}return r=n,t.abrupt("break",29);case 26:n++,t.next=22;break;case 29:if(void 0!==r){t.next=34;break}return e.currentMeterData={},e.sideLoading=!1,e.loading=!1,t.abrupt("return");case 34:if(l=e.list[r],u=l.name,o=l.type,i=l.labelSelector,"cluster"!==o){t.next=39;break}return e.cluster=u,t.next=39,e.getPriceConfigListByCluster(e.list);case 39:return e.crumbData.push({type:o,name:u,list:e.list}),t.next=42,e.handleSelectResource({name:u,type:o,isCopy:!0,labelSelector:i,isTime:!0});case 42:e.sideLoading=!1,e.loading=!1;case 44:case"end":return t.stop()}}),t)}))),e.setWSListDisabledByCluster=function(t){return(0,te.default)(t)?t.map((function(t){var a=globals.app.isMultiCluster?"system-workspace"===t.name?e.clusterList:(0,ee.default)(t,"_origin.clusters",[]):e.clusterList,r=a.length,n=0;return a.forEach((function(t){var a=e.clusterList.find((function(e){return e.name===t.name}));a&&a.disabled&&n++})),t.disabled=n===r,t})):[]},(0,B.default)(e,"getPriceConfigListByCluster",O,(0,H.default)(e)),(0,B.default)(e,"getClustersList",S,(0,H.default)(e)),(0,B.default)(e,"setPriceConfig",k,(0,H.default)(e)),(0,B.default)(e,"setStartTime",C,(0,H.default)(e)),e.handleSelectResource=function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.name,n=a.type,a.isCopy,l=(0,U.default)(a,["name","type","isCopy"]),r!==e.active.name||n!==e.active.type){t.next=3;break}return t.abrupt("return");case 3:return"workspaces"===n&&(e.clusters=e.getClustersList(r),e.cluster=(0,ee.default)(e.clusters,"[0].value",""),e.setPriceConfig(e.cluster)),"cluster"===n&&e.setPriceConfig(r),t.next=7,e.getCurrentMeterData(Ne(Ne({name:r,type:n,isTime:!0},l),{},{start:e.startTime,isCopy:!0}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getSumMeterData=function(a){var r={},n={};return(0,ae.default)(a)||a.forEach((function(a){if(a.type){r[a.type]={value:(0,ee.default)(a,"sum_value",""),unit:(0,ee.default)(a,"unit","label")};var l=(0,ae.default)((0,ee.default)(a,"fee"))?0:parseFloat((0,ee.default)(a,"fee",0));n[a.type]={value:l.toFixed(2),unit:{label:"CNY"===e.priceConfig.currency?t("￥"):t("$")}}}})),{sumData:r,feeData:n}},(0,B.default)(e,"setCluster",R,(0,H.default)(e)),(0,B.default)(e,"setActiveCrumb",w,(0,H.default)(e)),e.getMeterParamsByCrumb=function(){var t={},a=(0,ne.default)((0,ce.toJS)(e.crumbData));return"workspaces"===a[0].type&&a.length>2&&a.shift(),a.forEach((function(e){t[e.type]=e.name})),t},(0,B.default)(e,"getCurrentMeterData",P,(0,H.default)(e)),(0,B.default)(e,"setMeterData",D,(0,H.default)(e)),e.fetchMeterData=function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u,o;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.module,n=a.meters,l=a.resources,u=(0,U.default)(a,["module","meters","resources"]),t.next=3,e.store.fetchMeter(Ne({module:r,meters:n,resources:l},u));case 3:return o=t.sent,t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(0,B.default)(e,"setTimeRange",T,(0,H.default)(e)),(0,B.default)(e,"getChildrenData",N,(0,H.default)(e)),e.getChildrenList=function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u,o,i;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.labelSelector,n=a.currentType,l=a.childParam,u=e.getChildrenTypeByLevel(n),(o=Ne(Ne({},e.getChildrenParamsByCrumb()),l)).cluster||(o.cluster=e.cluster),r&&(o.labelSelector=(0,ce.toJS)(r)),i=[],!["namespaces","services","openpitrixs"].includes(n)){t.next=14;break}if("namespaces"!==n||e.clusterMeterStore.levelMeterData[o.namespaces]){t.next=10;break}return t.next=10,e.clusterMeterStore.fetchLevelMeter(Ne({},o));case 10:return t.next=12,e.getTypesListData(n,o);case 12:return i=t.sent,t.abrupt("return",i);case 14:if(!u.children){t.next=19;break}return t.next=17,e.clusterMeterStore.fetchList(Ne({type:u.children[0]},o));case 17:return i=t.sent,t.abrupt("return",i);case 19:return t.abrupt("return",i);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getClusterMeterChartData=function(){var t=(0,q.default)(F.default.mark((function t(a,r){var n,l,u,o,i,c,s,f,d,p,m;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getMeterParamsByCrumb(),l=[],u=e.childrenResourceList.map((function(e){return{name:e.name,type:e.type,labelSelector:(0,ee.default)(e,"labelSelector")}})),be.RESOURCES_TYPE.forEach((function(e){var t=[];u.forEach((function(a){a.type===e&&t.push(a)})),(0,ae.default)(t)||l.push(t)})),o=[],i=!0,c=!1,t.prev=7,f=F.default.mark((function t(){var l,u,i,c,s,f,d;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=(l=m)[0].type,i=[],c=l.map((function(e){return e.name})),s=(0,ne.default)(n),r||(s[u]=l[0].name),t.next=8,e.setMeterData({module:u,meters:[a],resources:c,params:s});case 8:f=t.sent,(0,ae.default)(f)||l.forEach((function(e){var t=f.find((function(t){return(0,ee.default)(t,"metric.".concat(t.module))===e.name}));if(t){var a=(0,ee.default)(t,"sum_value"),r=(0,ee.default)(t,"metric.".concat(t.module)),n=(0,ee.default)(t,"unit.label");i.push({name:r,value:a||0,unit:n,type:u})}})),d=(0,ie.default)(i,(function(e){return e.value})).reverse(),o.push(d);case 12:case"end":return t.stop()}}),t)})),d=(0,Q.default)(l);case 10:return t.next=12,d.next();case 12:return p=t.sent,i=p.done,t.next=16,p.value;case 16:if(m=t.sent,i){t.next=22;break}return t.delegateYield(f(),"t0",19);case 19:i=!0,t.next=10;break;case 22:t.next=28;break;case 24:t.prev=24,t.t1=t.catch(7),c=!0,s=t.t1;case 28:if(t.prev=28,t.prev=29,i||null==d.return){t.next=33;break}return t.next=33,d.return();case 33:if(t.prev=33,!c){t.next=36;break}throw s;case 36:return t.finish(33);case 37:return t.finish(28);case 38:e.pieChartData=(0,ue.default)(o);case 39:case"end":return t.stop()}}),t,null,[[7,24,28,38],[29,,33,37]])})));return function(e,a){return t.apply(this,arguments)}}(),e.getWorkspacesMeterChartData=function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u,o,i,c,s,f,d,p,m,h,v,y,g,b,E;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("workspaces"!==(r=e.active.type)){t.next=6;break}return t.next=4,e.getClusterMeterChartData(a,!0);case 4:t.next=51;break;case 6:n=e.getMeterParamsByCrumb(),l=[],u=[],o=e.childrenResourceList.map((function(e){return{name:e.name,type:e.type,labelSelector:(0,ee.default)(e,"labelSelector")}})),be.RESOURCES_TYPE.forEach((function(e){var t=[];o.forEach((function(a){a.type===e&&t.push(a)})),(0,ae.default)(t)||u.push(t)})),i=Ne(Ne({},n),{},(0,V.default)({cluster:e.cluster},r,e.active.name)),c=e.clusterMeterStore.levelMeterData,s=e.getChildrenTypeByLevel(r),f=s.children,d=!0,p=!1,t.prev=17,h=(0,Q.default)(f);case 19:return t.next=21,h.next();case 21:return v=t.sent,d=v.done,t.next=25,v.value;case 25:if(y=t.sent,d){t.next=34;break}g=y,b=(0,me.handleWSChartData)({levelMeterData:(0,ce.toJS)(c),meters:a,type:g,params:i}),E=(0,ie.default)(b,(function(e){return e.value})).reverse(),l.push(E);case 31:d=!0,t.next=19;break;case 34:t.next=40;break;case 36:t.prev=36,t.t0=t.catch(17),p=!0,m=t.t0;case 40:if(t.prev=40,t.prev=41,d||null==h.return){t.next=45;break}return t.next=45,h.return();case 45:if(t.prev=45,!p){t.next=48;break}throw m;case 48:return t.finish(45);case 49:return t.finish(40);case 50:e.pieChartData=(0,ue.default)(l);case 51:case"end":return t.stop()}}),t,null,[[17,36,40,50],[41,,45,49]])})));return function(e){return t.apply(this,arguments)}}(),(0,B.default)(e,"getResourceMeterData",I,(0,H.default)(e)),e.getChildrenParamsByCrumb=function(){var t={};return(0,ne.default)((0,ce.toJS)(e.crumbData)).forEach((function(e){t[e.type]=e.name})),t},e.getTypesListData=function(){var t=(0,q.default)(F.default.mark((function t(a,r){var n,l,u,o;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getChildrenTypeByLevel(a),l=[],n.children.forEach((function(t){l.push(e.clusterMeterStore.fetchList(Ne({type:t},r)))})),t.next=5,Promise.all(l);case 5:return u=t.sent,o=(0,ue.default)(u),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.getChildrenTypeByLevel=function(t){return e.props.level.find((function(e){return(0,te.default)(e.type)?e.type.indexOf(t)>-1:e.type===t}))},e.setLineChartColor=function(e){return(0,ae.default)(e)?[]:(e.map((function(e,t){return e.key=e.type,e.color=ve.COLORS_MAP[be.AREA_COLORS[t]]||be.AREA_COLORS[t],e})),e)},e.renderParentMeterCard=function(){if(!e.active.type||"cluster"===e.active.type||"workspaces"===e.active.type||(0,ae.default)((0,ce.toJS)(e.priceConfig)))return null;var a=e.crumbData.length,r=e.crumbData[a-2],n="namespaces"===e.active.type&&2===a&&e.cluster?"".concat(r.name," (").concat(e.cluster,")"):r.name;return X.default.createElement("div",{className:De.default.usageCard},X.default.createElement(Se.default,(0,L.default)({className:De.default.meterCard,isParent:!0,priceConfig:e.priceConfig,title:X.default.createElement(X.default.Fragment,null,X.default.createElement("span",null,t(be.RESOURCE_TITLE[(0,ee.default)(r,"type","-")])),X.default.createElement("strong",null,n))},e.parentMeterData)))},(0,B.default)(e,"handleChartData",A,(0,H.default)(e)),(0,B.default)(e,"getTimeRange",x,(0,H.default)(e)),(0,B.default)(e,"getCurrentTimeMeterData",j,(0,H.default)(e)),(0,B.default)(e,"handleCrumbOperation",M,(0,H.default)(e)),e.renderSubResource=function(){var a=(0,ce.toJS)(e.pieChartData);return"pods"===e.active.type||"openpitrix"===e.props.meterType||(0,oe.default)(e.currentMeterData.sumData)||(0,ae.default)(a)?null:X.default.createElement(X.default.Fragment,null,X.default.createElement("div",{className:De.default.subTitle},t("CURRENT_RESOURCE_CONSUMPTION"),X.default.createElement(se.Tooltip,{content:t("METER_RESOURCE_DESC"),placement:"top"},X.default.createElement(se.Icon,{name:"question",size:20}))),X.default.createElement("div",{className:De.default.childrenResourceContainer},X.default.createElement(se.Loading,{spinning:e.resourceLoading},X.default.createElement("div",{className:De.default.childrenlistContainer},X.default.createElement(we.default,{selectOptions:(0,ce.toJS)(e.currentMeterData.sumData),getResourceMeterData:e.getResourceMeterData,activeName:e.active.name})),X.default.createElement("div",{className:De.default.constomChartContainer},X.default.createElement(Pe.default,{data:a})))))},e.renderEmpty=function(){return X.default.createElement("div",{className:De.default.empty},X.default.createElement(pe.default,{className:De.default.emptyCard,icon:ve.ICON_TYPES[e.active.type],title:t("NO_DATA_DESC"),desc:t("NO_METER_DATA")}))},e}return(0,G.default)(r,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this.active,a=e.type,r=e.name,n=e.createTime,l=(0,ge.getWebsiteUrl)().url,u=Object.values((0,ce.toJS)(this.currentMeterData)).every((function(e){return(0,ae.default)(e)}));return(0,ae.default)(this.list)?X.default.createElement("div",{className:De.default.empty},X.default.createElement(se.Loading,{spinning:this.sideLoading||this.loading},X.default.createElement(pe.default,{className:De.default.emptyCard,icon:"cluster",title:t("NO_AVAILABLE_CLUSTER"),desc:t.html("METERING_NOT_ENABLED_DESC",{docUrl:l}),actions:X.default.createElement(ye.default,{onClick:this.props.handleBack},"返回")}))):X.default.createElement("div",{className:De.default.billDetail},X.default.createElement("div",{className:(0,$.default)(De.default.leftContent,(0,V.default)({},De.default.paddingBottom0,this.crumbData.length<2||(0,ae.default)((0,ce.toJS)(this.priceConfig))))},X.default.createElement(Ee.default,{crumbData:(0,ce.toJS)(this.crumbData),handleCrumbOperation:this.handleCrumbOperation,loading:this.loading||this.sideLoading,cluster:this.cluster}),X.default.createElement(Oe.default,{list:this.list,active:(0,ce.toJS)(this.active),handleSelectResource:this.handleSelectResource,getChildrenData:this.getChildrenData,loading:this.sideLoading||this.loading,fetchMeterData:this.fetchMeterData,crumbData:this.crumbData,timeRange:(0,ce.toJS)(this.timeRange),getMeterParamsByCrumb:this.getMeterParamsByCrumb,priceConfig:this.priceConfig,cluster:this.cluster,clusterList:this.clusterList,priceConfigList:this.priceConfigList}),this.renderParentMeterCard()),X.default.createElement("div",{className:De.default.rightContent},X.default.createElement(se.Loading,{spinning:this.loading},X.default.createElement(X.default.Fragment,null,X.default.createElement(_e.default,{type:a,cluster:this.cluster,clusters:this.clusters,setCluster:this.setCluster}),u?this.renderEmpty():X.default.createElement("div",{className:De.default.content},X.default.createElement(Se.default,(0,L.default)({className:De.default.toothbg,title:X.default.createElement(X.default.Fragment,null,X.default.createElement("span",null,t(be.RESOURCE_TITLE[a].toUpperCase().replace(/\s+/g,"_"))),X.default.createElement("strong",null,r)),priceConfig:this.priceConfig},this.currentMeterData)),X.default.createElement("div",{className:De.default.subTitle},t("CONSUMPTION_HISTORY")),X.default.createElement("div",{className:De.default.info},(0,ae.default)((0,ce.toJS)(this.timeRange))?null:X.default.createElement(ke.default,{createTime:n,getTime:this.getTimeRange,timeRange:this.timeRange})),X.default.createElement(Ce.default,{chartData:(0,ce.toJS)(this.chartData),priceConfig:this.priceConfig}),X.default.createElement(Re.default,{data:(0,ce.toJS)(this.tableData),priceConfig:this.priceConfig}),this.renderSubResource())))))}}]),r}(X.default.Component),o=(0,J.default)(u.prototype,"crumbData",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,J.default)(u.prototype,"cacheCrumbData",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,J.default)(u.prototype,"tableData",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,J.default)(u.prototype,"active",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=(0,J.default)(u.prototype,"list",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=(0,J.default)(u.prototype,"timeRange",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=(0,J.default)(u.prototype,"currentMeterData",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=(0,J.default)(u.prototype,"parentMeterData",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=(0,J.default)(u.prototype,"sideLoading",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=(0,J.default)(u.prototype,"loading",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=(0,J.default)(u.prototype,"chartData",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=(0,J.default)(u.prototype,"priceConfig",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),b=(0,J.default)(u.prototype,"priceConfigList",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=(0,J.default)(u.prototype,"pieChartData",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=(0,J.default)(u.prototype,"resourceLoading",[ce.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=(0,J.default)(u.prototype,"getPriceConfigListByCluster",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],a.forEach((function(t){t.disabled||r.push(e.store.fetchPrice({cluster:t.name}))})),globals.app.isMultiCluster&&r.push(e.store.fetchPrice({cluster:""})),t.next=5,Promise.all(r);case 5:n=t.sent,e.priceConfigList=n;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),S=(0,J.default)(u.prototype,"getClustersList",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=e.crumbData[0].list.find((function(e){return e.name===t})),r="system-workspace"===t?e.clusterList:(0,ee.default)(a,"_origin.clusters",[]);if((0,ae.default)(r))return[];var n=r.map((function(t){var a=e.clusterList.find((function(e){return e.name===t.name}));return(0,ae.default)(a)?null:{label:a.name,value:a.name,type:a._origin.isHost?"host":"member",disabled:a.disabled,sortValue:Number(a.disabled)}})).filter((function(e){return!(0,ae.default)(e)}));return n.every((function(e){return e.disabled}))?[]:(0,ie.default)(n,(function(e){return e.sortValue}))}}}),k=(0,J.default)(u.prototype,"setPriceConfig",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t||(0,ee.default)(ve.DEFAULT_CLUSTER,"metadata.name"),r=e.priceConfigList.find((function(e){return e.cluster&&e.cluster===a})),n=(0,ne.default)(r);delete n.cluster,e.priceConfig=(0,ae.default)(n)?{}:r,e.setStartTime()}}}),C=(0,J.default)(u.prototype,"setStartTime",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.startTime=(0,me.getRetentionDay)((0,ee.default)(e.priceConfig,"retention_day","7d"))}}}),R=(0,J.default)(u.prototype,"setCluster",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.cluster=a,e.loading=!0,r=e.active,n=r.name,l=r.type,u=e.list.find((function(e){return e.name===n})),e.setPriceConfig(a),t.next=7,e.getCurrentMeterData({name:n,type:l,isCopy:!0,isTime:!0,start:e.startTime,labelSelector:(0,ee.default)(u,"labelSelector","")});case 7:e.loading=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),w=(0,J.default)(u.prototype,"setActiveCrumb",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.name,r=t.type,n=t.isCopy,l=t.start,u=(0,re.default)(e.crumbData);u.type=r,u.name=a,u.start=l,n&&(e.cacheCrumbData=(0,ne.default)((0,ce.toJS)(e.crumbData)))}}}),P=(0,J.default)(u.prototype,"getCurrentMeterData",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u,o,i,c,s,f;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.name,n=a.type,l=a.isCopy,u=a.labelSelector,o=a.isTime,i=a.start,e.active={name:r,type:n,start:i},e.tableData=[],e.pieChartData=[],e.timeRange={},e.setActiveCrumb({name:r,type:n,isCopy:!!l,start:i}),c=e.getMeterParamsByCrumb(),e.loading=!0,t.next=10,e.setMeterData({module:n,meters:"all",resources:[r],start:i,isTime:o,params:c});case 10:return s=t.sent,t.next=13,e.getCurrentTimeMeterData({valueKey:"currentMeterData",module:n,resources:[r],start:i,params:c});case 13:if(e.tableData=e.setLineChartColor(s),e.setTimeRange({isTime:o,start:i}),e.chartData=s,"pods"===n){t.next=35;break}if(!["workspaces","cluster","nodes"].includes(n)){t.next=24;break}return t.next=20,e.getChildrenList({labelSelector:u,currentType:n});case 20:f=t.sent,e.childrenResourceList=f,t.next=31;break;case 24:if(e.clusterMeterStore.levelMeterData[c.namespaces]){t.next=30;break}return c.cluster||(c.cluster=e.cluster),t.next=28,e.clusterMeterStore.fetchLevelMeter(Ne({},c));case 28:t.next=31;break;case 30:e.childrenResourceList=[];case 31:return t.next=33,e.getResourceMeterData((0,ee.default)(e.tableData,"[0].type","cpu"));case 33:t.next=36;break;case 35:e.childrenResourceList=[];case 36:e.loading=!1;case 37:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),D=(0,J.default)(u.prototype,"setMeterData",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u,o,i,c,s,f,d;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.params,n=a.module,l=a.meters,u=a.resources,o=a.list,i=a.start,c=a.end,s=a.isTime,r.cluster&&"cluster"===e.props.meterType&&(e.cluster=r.cluster),r.cluster=e.cluster,"applications"!==n||(0,ae.default)(u)||(f=o||e.list,u=u.map((function(e){var t=f.find((function(t){return t.name===e})),a=(0,ee.default)(t,"_origin.version.name","")||(0,ee.default)(t,"_origin.version","");return"".concat(e).concat(a?":".concat(a):"")}))),"openpitrixs"===n&&globals.app.isMultiCluster&&"host"!==(0,ee.default)(e.clusters.find((function(e){return e.value===r.cluster})),"type")&&delete r.cluster,t.next=7,e.fetchMeterData(Ne({module:n,meters:l,resources:u,isTime:s,start:i,end:c},r));case 7:return d=t.sent,t.abrupt("return",d);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),T=(0,J.default)(u.prototype,"setTimeRange",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.isTime,r=(0,U.default)(t,["isTime"]),n=(0,me.getTimeParams)(Ne({isTime:a},r)),l=n.step,u=n.start,o=n.end;e.timeRange=u>=o?{}:{step:(0,he.getTimeStr)(l),start:1e3*u,end:1e3*o}}}}),N=(0,J.default)(u.prototype,"getChildrenData",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u,o,i,c,s;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.name,n=a.type,l=a.labelSelector,u=(0,re.default)(e.crumbData),e.loading=!0,e.sideLoading=!0,"workspaces"===n&&r!==u.name&&(e.clusters=e.getClustersList(r),e.cluster=(0,ee.default)(e.clusters,"[0].value",""),e.setPriceConfig(e.cluster)),"cluster"===n&&r!==u.name&&e.setPriceConfig(r),e.setActiveCrumb({name:r,type:n,isCopy:!0,start:e.startTime}),t.next=9,e.getChildrenList({labelSelector:l,currentType:n});case 9:if(o=t.sent,(0,ae.default)(o)||!(0,te.default)(o)){t.next=20;break}return i=o[0].type,c=(0,re.default)(e.crumbData),s=e.getMeterParamsByCrumb(),t.next=16,e.getCurrentTimeMeterData({valueKey:"parentMeterData",params:s,module:c.type,start:c.start,resources:[c.name]});case 16:return e.crumbData.push({type:i,name:o[0].name,list:o,start:e.startTime}),t.next=19,e.getCurrentMeterData({name:o[0].name,type:i,isCopy:!0,isTime:!0,start:e.startTime,labelSelector:(0,ee.default)(o,"[0].labelSelector")});case 19:e.list=o;case 20:e.loading=!1,e.sideLoading=!1;case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),I=(0,J.default)(u.prototype,"getResourceMeterData",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,q.default)(F.default.mark((function t(a){var r;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.level,e.resourceLoading=!0,"workspaces"!==r[0].type){t.next=7;break}return t.next=5,e.getWorkspacesMeterChartData(a);case 5:t.next=9;break;case 7:return t.next=9,e.getClusterMeterChartData(a);case 9:e.resourceLoading=!1;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),A=(0,J.default)(u.prototype,"handleChartData",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.meters,n=(0,U.default)(a,["meters"]),l=e.active.name,e.tableData=[],t.next=5,e.setMeterData({module:e.active.type,resources:[l],meters:r,isTime:!0,params:n});case 5:u=t.sent,e.tableData=e.setLineChartColor(u),e.chartData=u;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),x=(0,J.default)(u.prototype,"getTimeRange",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.type,r=t.value;if("close"===t.methord){var n=e.getMeterParamsByCrumb();(0,le.default)(e.timeRange,"".concat(a),r),e.handleChartData(Ne(Ne({meters:"all"},n),(0,ce.toJS)(e.timeRange)))}(0,le.default)(e.timeRange,"".concat(a),r)}}}),j=(0,J.default)(u.prototype,"getCurrentTimeMeterData",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u,o,i,c,s,f;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.valueKey,n=a.params,l=a.module,u=a.start,o=a.resources,t.next=3,e.setMeterData({params:n,meters:"all",module:l,start:u,end:new Date,resources:o,valueKey:"parentMeterData",isTime:!0});case 3:i=t.sent,c=e.getSumMeterData(i),s=c.sumData,f=c.feeData,e[r]={sumData:s,feeData:f};case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),M=(0,J.default)(u.prototype,"handleCrumbOperation",[ce.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,q.default)(F.default.mark((function t(a){var r,n,l,u,o,i,c;return F.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.crumbData.length-1,e.sideLoading=!0,"back"!==a){t.next=11;break}if(!(r<=0)){t.next=7;break}return e.props.handleBack(),e.sideLoading=!1,t.abrupt("return");case 7:e.crumbData.pop(),r-=1,t.next=18;break;case 11:if(!((n=e.cacheCrumbData.length-1)<=0||n===r)){t.next=15;break}return e.sideLoading=!1,t.abrupt("return");case 15:l=e.cacheCrumbData[r+1],e.crumbData.push(l),r+=1;case 18:if(u=(0,re.default)(e.crumbData),!(r>0)){t.next=25;break}return o=e.crumbData[r-1],i=e.getMeterParamsByCrumb(),"workspaces"===o.type?(i.workspaces=o.name,e.clusters=e.getClustersList(o.name),Object.keys(i).forEach((function(e){"workspaces"!==e&&(i[e]=void 0)}))):i[u.type]=void 0,t.next=25,e.getCurrentTimeMeterData({params:i,valueKey:"parentMeterData",module:o.type,start:o.start,resources:[o.name]});case 25:return c=u.list.find((function(e){return e.name===u.name})),t.next=28,e.getCurrentMeterData({name:u.name,type:u.type,start:e.startTime,labelSelector:(0,ee.default)(c,"labelSelector",""),isTime:!0});case 28:e.list=u.list,e.sideLoading=!1;case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),l=u))||l;a.default=Ae},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,u,o,i,c,s,f,d,p,m=r(a(49)),h=r(a(21)),v=r(a(56)),y=r(a(50)),g=r(a(91)),b=r(a(12)),E=r(a(13)),_=r(a(135)),O=r(a(19)),S=r(a(20)),k=r(a(18)),C=r(a(74)),R=(r(a(92)),a(5)),w=r(a(23)),P=r(a(32)),D=r(a(68)),T=r(a(637)),N=r(a(837)),I=r(a(770)),A=r(a(753)),x=r(a(865)),j=r(a(960)),M=r(a(748)),L=r(a(736)),U=r(a(654)),F=a(58),V=a(1022);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){(0,h.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,k.default)(e);if(t){var n=(0,k.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,S.default)(this,a)}}var G=(n=function(e){(0,O.default)(a,e);var t=z(a);function a(){var e;(0,b.default)(this,a);for(var r=arguments.length,n=new Array(r),m=0;m<r;m++)n[m]=arguments[m];return e=t.call.apply(t,[this].concat(n)),(0,g.default)(e,"list",l,(0,_.default)(e)),(0,g.default)(e,"clustersConfig",u,(0,_.default)(e)),(0,g.default)(e,"cacheList",o,(0,_.default)(e)),(0,g.default)(e,"levelMeterData",i,(0,_.default)(e)),(0,g.default)(e,"cacheLevelData",c,(0,_.default)(e)),(0,g.default)(e,"isLoading",s,(0,_.default)(e)),e.clusterStore=new T.default,e.nodeStore=new N.default,e.workspaceStore=new I.default,e.namespaceStore=new A.default,e.applicationCrdStore=new x.default,e.serviceStore=new M.default,e.deploymetStore=new L.default("deployments"),e.statefulsetStore=new L.default("statefulsets"),e.daemonsetStore=new L.default("daemonsets"),e.opStore=new j.default,e.podStore=new U.default,e.handleNameByType=function(e,t){return"applications"===e?"".concat(t.name,":").concat(t.selector["app.kubernetes.io/version"]):"openpitrixs"===e?t.cluster_id:t.name},e.handleIconByType=function(e,t){return"cluster"===e&&t?F.CLUSTER_PROVIDER_ICON[t]||"kubernetes":F.ICON_TYPES[e]},e.handleStatusByWorkload=function(e,t,a){return e?e("deployments"===t||"statefulsets"===t?{hasS2i:a.hasS2i,spec:a.spec,status:a.status,annotations:a.annotations}:a):void 0},e.store={cluster:e.clusterStore,nodes:e.nodeStore,workspaces:e.workspaceStore,namespaces:e.namespaceStore,applications:e.applicationCrdStore,services:e.serviceStore,deployments:e.deploymetStore,statefulsets:e.statefulsetStore,daemonsets:e.daemonsetStore,openpitrixs:e.opStore,pods:e.podStore},e.getStore=function(t){return e.store[t]},(0,g.default)(e,"fetchList",f,(0,_.default)(e)),(0,g.default)(e,"fetchLevelMeter",d,(0,_.default)(e)),(0,g.default)(e,"setLevelMeterData",p,(0,_.default)(e)),e}return(0,E.default)(a,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespaces,r=e.workspaces,n=e.deployments,l=e.statefulsets,u=e.daemonsets,o=e.services,i=e.pods,c="";return t&&(c+="/klusters/".concat(t)),a&&(c+="/namespaces/".concat(a)),r&&(c+="/workspaces/".concat(r)),o&&(c+="/services/".concat(o)),n&&(c+="/deployments/".concat(n)),l&&(c+="/statefulsets/".concat(l)),u&&(c+="/daemonsets/".concat(u)),i&&(c+="/pods/".concat(i)),c}},{key:"isMultiCluster",get:function(){return!globals.app.isMultiCluster}}]),a}(r(a(1372)).default),l=(0,C.default)(n.prototype,"list",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,C.default)(n.prototype,"clustersConfig",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,C.default)(n.prototype,"cacheList",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,C.default)(n.prototype,"levelMeterData",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=(0,C.default)(n.prototype,"cacheLevelData",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=(0,C.default)(n.prototype,"isLoading",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,C.default)(n.prototype,"fetchList",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,y.default)(m.default.mark((function t(a){var r,n,l,u,o,i,c,s,f;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.type,n=(0,v.default)(a,["type"]),l=e.getStore(r),u=(0,V.getFetchParams)(B({isMultiCluster:e.isMultiCluster,type:r},n)),o=(0,V.getListConfig)({isMultiCluster:e.isMultiCluster,type:r}),i=[],u.forEach((function(e){"[object Array]"===Object.prototype.toString.call(l)?l.forEach((function(t){i.push(t.fetchList(B({},e)))})):i.push(l.fetchList(B({},e)))})),t.next=8,Promise.all(i).catch((function(){return[]}));case 8:if(c=t.sent,s=[],!(0,P.default)(c)&&(0,w.default)(c)&&c.forEach((function(t,a){t.forEach((function(t){if(!(0,V.hasNameSpacesType)(r)||(0,V.hasNameSpacesType)(r)&&(0,V.filterListByType)(B({type:r},n))(t)){var l=o[a],u=l.status,i=l.desc,c=e.handleStatusByWorkload(u,r,t),f=e.handleNameByType(r,t),d=e.handleIconByType(r,t.provider);s.push({icon:d,name:f,status:c,desc:i,labelSelector:t.selector,type:r,_origin:B({},t)})}}))})),"pods"===r&&(s=s.filter((function(e){return"Completed"!==e.status&&"Error"!==e.status}))),!n.node){t.next=15;break}return e.list=s,t.abrupt("return",s);case 15:return t.next=17,(0,V.filterResourceLevel)(B({levelMeterData:e.levelMeterData,type:r,data:s},n));case 17:return f=t.sent,e.list=f,t.abrupt("return",f);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),d=(0,C.default)(n.prototype,"fetchLevelMeter",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,y.default)(m.default.mark((function t(a){var r,n,l,u,o,i;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.namespaces,l=a.workspaces,r&&(e.cluster=r),u="".concat(e.tenantUrl({cluster:r}),"/namespaces/").concat(n,"/metering/hierarchy").concat(l?"?workspace=".concat(l):""),t.next=5,request.get(u,{},{},(function(){return{}}));case 5:return o=t.sent,i=(0,D.default)(o)||(0,P.default)(o)?{}:(0,h.default)({},n,o),e.levelMeterData=i,t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),p=(0,C.default)(n.prototype,"setLevelMeterData",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.levelMeterData=t}}}),n);t.default=G},,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=a(25),d=a(58),p=r(a(2524)),m=r(a(1131));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var v=function(e){(0,u.default)(a,e);var t=h(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).renderCrumbContainer=function(){var t=[],a=e.crumbData.length;return e.crumbData.forEach((function(r,n){t.push(c.default.createElement("div",{key:"".concat(r.name,"-").concat(r.type),title:r.name},c.default.createElement(m.default,{icon:d.ICON_TYPES[r.type],type:r.type,name:r.name,crumb:!0}),c.default.createElement("span",{className:p.default.crumbTitle},0===n&&"cluster"!==r.type&&e.props.cluster?"".concat(r.name," (").concat(e.props.cluster,")"):r.name),n!==a-1?c.default.createElement(f.Icon,{name:"caret-right"}):null))})),t},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.handleCrumbOperation,a=e.loading;return c.default.createElement("div",{className:p.default.crumbContainer},c.default.createElement(f.Button,{icon:"chevron-left",iconType:"light",disabled:a,onClick:function(){return t("back")}}),c.default.createElement(f.Button,{icon:"chevron-right",iconType:"light",disabled:a,onClick:function(){return t("front")}}),c.default.createElement("div",{className:p.default.crumb},this.renderCrumbContainer()))}},{key:"crumbData",get:function(){return this.props.crumbData}}]),a}(c.default.Component);t.default=v,v.propTypes={crumbData:s.default.array,handleCrumbOperation:s.default.func,loading:s.default.bool,cluster:s.default.string}},function(e,t,a){e.exports={crumbContainer:"_20YU2LRS6DMwNcWgKvOqsq",crumb:"_3wBkwzGvzZRet9nL3dir4a",crumbTitle:"_3khJFmAsqVqSBq0oSrn6x4"}},function(e,t,a){e.exports={img:"_37chHCv0MYcY31RW8CLNTj"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(0)),u=r(25),o=n(r(2527)),i=function(e){var a=e.type,r=e.cluster,n=e.clusters,i=e.setCluster;return l.default.createElement("div",{className:o.default.title},l.default.createElement("h2",null,t("RESOURCE_CONSUMPTION_STATISTICS")),"workspaces"===a&&globals.app.isMultiCluster&&n.length>0?l.default.createElement(u.Select,{className:o.default.clusterSelect,options:n,optionRenderer:function(e){var t=e.label,a=e.disabled;return l.default.createElement("span",{style:{display:"flex",alignItem:"center"}},t,l.default.createElement("span",{style:{marginLeft:"10px"}},a?l.default.createElement(u.Icon,{name:"update",color:{primary:"#ffc781",secondary:"#f5a623"}}):null))},value:r,onChange:function(e){i(e)}}):null)};a.default=i},function(e,t,a){e.exports={title:"_2aGXmcx7mFZbhToSS1A-OM",clusterSelect:"_5ayuJN6svE2FJ4y0dsmAQ"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f=n(r(49)),d=n(r(21)),p=n(r(50)),m=n(r(91)),h=n(r(12)),v=n(r(13)),y=n(r(135)),g=n(r(19)),b=n(r(20)),E=n(r(18)),_=n(r(74)),O=(n(r(92)),n(r(0))),S=r(70),k=r(5),C=r(25),R=r(821),w=n(r(1111)),P=n(r(32)),D=n(r(68)),T=n(r(295)),N=n(r(16)),I=r(1022),A=n(r(2529)),x=n(r(2531));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,b.default)(this,a)}}var U=(0,S.observer)((u=function(e){(0,g.default)(r,e);var a=L(r);function r(){var e;(0,h.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return e=a.call.apply(a,[this].concat(l)),(0,m.default)(e,"billReportList",o,(0,y.default)(e)),(0,m.default)(e,"getBillReportList",i,(0,y.default)(e)),e.handleExportBillReport=(0,p.default)(f.default.mark((function t(){var a,r,n,l,u,o,i,c,s,d,p,m,h;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.getMeterParamsByCrumb,n=a.crumbData,l=a.fetchMeterData,u=a.cluster,o=a.timeRange,i=a.priceConfigList,!(0,P.default)(e.billReportList)){t.next=3;break}return t.abrupt("return");case 3:return c=r(),s=(0,T.default)(n),d=s.type,p=s.start,m=s.name,"cluster"!==d&&(c.cluster=u),"applications"!==d&&"openpitrixs"!==d||delete c[d],h=[],e.billReportList.forEach((function(e){var t=(0,w.default)(c);t[e.type]=e.name;var a={start:p};if("cluster"===e.type){var r=i.find((function(t){return t.cluster===e.name}));a={start:(0,I.getRetentionDay)((0,N.default)(r,"retention_day","7d"))}}e.name===m&&d===e.type&&(a=M({},o)),h.push(l(M(M({module:e.type,meters:"all",resources:[e.name],isTime:!0,operation:"export"},t),a)))})),t.next=11,Promise.all(h);case 11:t.sent.forEach((function(t,a){var r=new Blob([t],{type:"text/plain;charset=utf-8"});(0,R.saveAs)(r,"".concat(e.billReportList[a].name,".csv"))})),e.billReportList=[];case 14:case"end":return t.stop()}}),t)}))),(0,m.default)(e,"getChildrenData",c,(0,y.default)(e)),(0,m.default)(e,"cancelExportBillReport",s,(0,y.default)(e)),e.renderBillReportConform=function(){var a=e.props,r=a.active,n=a.priceConfig,l="cluster"===r.type||"workspaces"===r.type||(0,P.default)(n);return(0,P.default)((0,k.toJS)(e.billReportList))?null:O.default.createElement("div",{className:x.default.exportContainer,style:{bottom:l?"10px":"70px"}},O.default.createElement("div",{className:x.default.text},t("EXPORT_BILL")),O.default.createElement("div",{className:x.default.button,onClick:e.cancelExportBillReport,"data-test":"confirm-cancel"},O.default.createElement(C.Icon,{name:"close",type:"light"})),O.default.createElement("div",{className:x.default.button,onClick:e.handleExportBillReport,"data-test":"confirm-ok"},O.default.createElement(C.Icon,{name:"check",type:"light"})))},e.renderSideCardItem=function(){var t=e.props,a=t.list,r=t.active,n=t.handleSelectResource,l=t.loading,u=t.clusterList,o=void 0===u?[]:u;return a.map((function(t){return O.default.createElement(A.default,{key:"".concat(t.name,"-").concat(t.type),data:t,active:r,clusterList:o,getCurrentMeterData:n,getChildrenData:e.getChildrenData,getCheckData:e.getBillReportList,loading:l,isCheck:!(0,D.default)(e.billReportList.find((function(e){return e.name===t.name})))})}))},e}return(0,v.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.active.name!==e.active.name&&this.cancelExportBillReport()}},{key:"render",value:function(){var e=this.props.loading;return O.default.createElement("div",{className:x.default.side},O.default.createElement(C.Loading,{spinning:e},this.renderSideCardItem()),this.renderBillReportConform())}}]),r}(O.default.Component),o=(0,_.default)(u.prototype,"billReportList",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,_.default)(u.prototype,"getBillReportList",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.name,r=t.type;!(0,D.default)(e.billReportList.find((function(e){return e.name===a})))?e.billReportList=e.billReportList.filter((function(e){return e.name!==a})):e.billReportList.push({name:a,type:r})}}}),c=(0,_.default)(u.prototype,"getChildrenData",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.billReportList=[],e.props.getChildrenData(t)}}}),s=(0,_.default)(u.prototype,"cancelExportBillReport",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.billReportList=[]}}}),l=u))||l;a.default=U},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a,r=e.data,n=e.active,v=e.getCurrentMeterData,y=e.getChildrenData,g=e.getCheckData,b=e.noIcon,E=e.style,_=e.loading,O=e.isCheck,S=e.clusterList,k=r.icon,C=r.status,R=r.desc,w=r.name,P=r.type,D=r.labelSelector,T=r.disabled,N=void 0!==T&&T,I=!(0,d.default)(n)&&(n.name===w&&n.type===P),A="pods"===P;return u.default.createElement("div",{className:(0,i.default)(m.default.billCard,(a={},(0,l.default)(a,m.default.selected,I),(0,l.default)(a,m.default.noHover,b),(0,l.default)(a,m.default.disabled,N),a)),style:E,onClick:N?null:function(){!0!==b&&v({name:w,type:P,labelSelector:D})}},b?null:u.default.createElement("div",{className:m.default.checkContainer,onClick:function(e){return e.stopPropagation()}},u.default.createElement(o.Checkbox,{checked:O,onClick:function(){return g({name:w,type:P})}})),u.default.createElement("div",{className:m.default.info},u.default.createElement("div",{className:m.default.title},u.default.createElement(s.default,{type:C,className:m.default.indicator}),u.default.createElement(h.default,{name:w,isActive:I,icon:k,type:P})),u.default.createElement("div",{className:m.default.desc},u.default.createElement(c.default,{title:w,description:t("".concat(R.toUpperCase().replace(/\s+/g,"_"),"_SCAP"))})),function(e){if("workspaces"!==P||S.length<1)return null;var t=(globals.app.isMultiCluster&&"system-workspace"===e?S:(0,f.default)(r,"_origin.clusters",[])).map((function(e){return S.find((function(t){return t.name===e.name}))||null})).filter((function(e){return!!e}));return t.length<1?null:u.default.createElement("div",{className:m.default.tagContainer},t.map((function(e){return u.default.createElement(o.Tag,{key:e.name,type:p.CLUSTER_GROUP_TAG_TYPE[e._origin.group]},u.default.createElement(o.Icon,{name:e.icon||"kubernetes",size:16,type:"light"}),e.name)})))}(w)),N?u.default.createElement("div",{className:m.default.unMeter},u.default.createElement(o.Tooltip,{content:t("CLUSTER_UPGRADE_REQUIRED",{version:" v3.1.0"}),placement:"topRight"},u.default.createElement(o.Icon,{name:"update",color:{primary:"#ffc781",secondary:"#f5a623"}}))):A||b?null:u.default.createElement("div",{className:m.default.symbol,onClick:function(e){return function(e,t){e.stopPropagation(),(!0!==b||_)&&y(t)}(e,{name:w,type:P,labelSelector:D})}},u.default.createElement(o.Icon,{name:"chevron-right",type:I?"light":"dark",size:20})))};var l=n(r(21)),u=n(r(0)),o=r(25),i=n(r(3)),c=n(r(275)),s=n(r(653)),f=n(r(16)),d=n(r(32)),p=r(58),m=n(r(2530)),h=n(r(1131))},function(e,t,a){e.exports={billCard:"_3VcrQFaYwgH_zmHOK-sbmT",checkContainer:"O8O_8ztaLkDeDmGjeuNRm",info:"_2N0FctWndmhAOKoLoj3vwb",title:"J8KItdmaltY3QnVlXZaeh",indicator:"dM1d5F7L74t7QoCa0X0Kn",desc:"_1IWudqQfOh0przutQZb2uJ",tagContainer:"_3V4tFihbHhvzf1w0yjTA3D",symbol:"_3cXdTeoTyRugkhusejnJ0I",selected:"_2bYCK7kPnS-Ua1syUPbwe3",noHover:"_2-lw7hkJ6ywf9OZdLurWvo",disabled:"eINvyK_cYM50TDrWYd5EO",unMeter:"_68gw3JH4QWIXOKHZZJnm"}},function(e,t,a){e.exports={side:"IIBTFkBhQSJH0gIABxKmI",exportContainer:"_1KUDHc3loa60l9mDqg_Pyc",text:"_2kv2buhPDiUCu1PDK4rMIl",button:"_3MqOEJfiOlNg0P8qzzp1K_",usageCard:"_1qKO-KpSQ54Q5SBkHSGBHp",meterCard:"_24DtRGrN1CCayPSOoC59NE"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(56)),u=n(r(0)),o=n(r(3)),i=n(r(16)),c=n(r(32)),s=n(r(68)),f=n(r(2533)),d=r(834),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.className,r=e.title,n=e.isParent,p=e.priceConfig,m=(0,l.default)(e,["className","title","isParent","priceConfig"]),h=(0,c.default)(p)||"CNY"!==p.currency?t("$"):t("￥"),v=function(){var e=m.feeData,t=0;return(0,s.default)(e)||(0,c.default)(e)||(t=Object.keys(e).map((function(t){return 100*parseFloat((0,i.default)(e[t],"value",0))})).reduce((function(e,t){return e+t}))/100),t.toFixed(2)},y=function(e){var t=g(e);return"-"!==t?t.toFixed(3):t},g=function(e){return(0,s.default)(e)?"-":e<0?0:e},b=function(e,a){return(0,c.default)(e)?null:"price"===a&&(0,c.default)(p)?u.default.createElement("ul",{className:f.default.noPriceTip},u.default.createElement("li",null,t("PRICE_CONFIG_DESC"))):u.default.createElement("ul",null,Object.keys(e).map((function(r){var n=(0,i.default)(e[r],"value"),l="meter"===a?y(n):g(n);return e[r]?u.default.createElement("li",{key:r},u.default.createElement("div",null,l),u.default.createElement("p",null,u.default.createElement("span",null,t(d.METER_RESOURCE_TITLE[r].toUpperCase().replace(/\s+/g,"_"))),u.default.createElement("span",null,"(",(0,i.default)(e[r],"unit.label","-"),")"))):null})))},E=function(e){var a=v();return u.default.createElement("div",null,u.default.createElement("h3",null,e," ",t("Total Consumption By Creation")),(0,c.default)(p)?null:u.default.createElement("div",{className:f.default.totalPrice},u.default.createElement("h4",null,a),u.default.createElement("p",null,t("TOTAL_COST",{unit:h}))))},_=function(e){var a=v();return u.default.createElement("div",{className:f.default.parentCostContainer},u.default.createElement("div",null,u.default.createElement("h3",null,e),u.default.createElement("span",null," ",t("Total Consumption By Creation"))),u.default.createElement("p",null,u.default.createElement("span",null,h),a))},O=m.sumData,S=void 0===O?{}:O,k=m.feeData,C=void 0===k?{}:k;return n?u.default.createElement("div",{className:(0,o.default)(f.default.billTotal,a)},_(r)):u.default.createElement("div",{className:(0,o.default)(f.default.billTotal,a)},E(r),u.default.createElement("div",{className:f.default.consumContainer},(0,c.default)(S)&&(0,c.default)(C)?null:u.default.createElement(u.default.Fragment,null,b(S,"meter"),u.default.createElement("div",{className:f.default.line}),b(C,"price"))))};a.default=p},function(e,t,a){e.exports={billTotal:"_2yAhIbTXhLB8AgqHVlMiY",parentCostContainer:"_2Q8zNmDqt_oiHw6Gea24im",totalPrice:"_1UrXZ5SCxDX8Afu2MVimjJ",consumContainer:"_1TAVSr4ki5JW2eC-92JCkR",noPriceTip:"_17jZhcUtJrSh3-xDgz5rNX",line:"rQmHupJi6faIkggp0AD-m"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=r(863),p=n(r(195)),m=n(r(137)),h=n(r(2535));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=["1h","2h","4h","8h","1d"],g="zh"===(0,p.default)("lang")?"Y年Md日 H:i":"M d, Y H:i",b=function(e){(0,o.default)(r,e);var a=v(r);function r(e){var n;(0,l.default)(this,r),(n=a.call(this,e)).getTimeRange=function(e){var t=e.type,a=e.methord;return function(e){var r=n.props,l=r.getTime,u=r.timeRange,o=u.end,i=u.start,c=new Date(e[0]).getTime();"start"===t&&c>=o||"end"===t&&c<=i||l({type:t,value:c,methord:a})}},n.handleStepChange=function(e){var a=e.type,r=e.methord;return function(e){var l=e,u=n.props,o=u.getTime,i=u.timeRange,c=i.end,s=i.start;Math.floor((c-s)/3600/24/1e3)>=30&&"1d"!==l?f.Notify.error({content:t("TIMERANGE_MORE_30DAY_MSG")}):o({type:a,value:l,methord:r})}},n.handleTimeRangeChange=function(e){return function(a){var r=n.props,l=r.getTime,u=r.timeRange,o=u.end,i=u.start,c=u.step,s=new Date(a[0]).getTime();if("start"===e&&s>=o||"end"===e&&s<=i)f.Notify.error({content:t("TIMERANGE_SELECTOR_MSG")});else{if("start"===e)Math.floor((o-s)/3600/24/1e3)>=30&&"1d"!==c&&l({type:"step",value:"1d",methord:"change"});if("end"===e)Math.floor((s-i)/3600/24/1e3)>=30&&"1d"!==c&&l({type:"step",value:"1d",methord:"change"});l({type:e,value:s,methord:"change"})}}};var u=n.props.timeRange,o=u.end||new Date;return n.endMaxDate=new Date(o),n.maxDate=new Date((0,m.default)(o).subtract(1,"minutes")),n.minDate=new Date(u.start),n}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.timeRange,a=e.step,r=e.start,n=e.end;return s.default.createElement("ul",{className:h.default.datepicker},s.default.createElement("li",null,s.default.createElement("div",null,t("BILLING_CYCLE"))),s.default.createElement("li",null,s.default.createElement(f.DatePicker,{defaultValue:r,value:r,showClearBtn:!1,dateFormat:g,minDate:this.minDate,maxDate:this.maxDate,onClose:this.getTimeRange({type:"start",methord:"close"}),onChange:this.handleTimeRangeChange("start")}),s.default.createElement("p",null,t("START_TIME"))),s.default.createElement("li",null,s.default.createElement(f.DatePicker,{defaultValue:n,value:n,showClearBtn:!1,dateFormat:g,minDate:this.minDate,maxDate:this.endMaxDate,onClose:this.getTimeRange({type:"end",methord:"close"}),onChange:this.handleTimeRangeChange("end")}),s.default.createElement("p",null,t("END_TIME"))),s.default.createElement("li",null,s.default.createElement("div",null,s.default.createElement(f.Select,{value:a,options:(0,d.getTimeOptions)(y),onChange:this.handleStepChange({type:"step",methord:"close"})})),s.default.createElement("p",null,t("SAMPLING_INTERVAL"))))}}]),r}(s.default.Component);a.default=b},function(e,t,a){e.exports={datepicker:"_27tdhObpPbURPjQ15hD9_p"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(73)),m=n(r(32)),h=n(r(745)),v=n(r(23)),y=r(25),g=r(735),b=r(725),E=n(r(751)),_=n(r(2537)),O=r(834),S=n(r(2539));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var C=function(e){(0,i.default)(r,e);var a=k(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={chartData:e.props.chartData,loading:!1},e.setNoPriceChartData=function(t){t.forEach((function(e){e.title=O.METER_RESOURCE_TITLE[e.type]})),e.setState({chartData:t})},e.setAreaChartData=function(a){e.setState({loading:!0},(function(){if((0,m.default)(a))e.setState({loading:!1,chartData:[]});else{if((0,m.default)(e.priceConfig))e.setNoPriceChartData(a);else{a.forEach((function(t){t.values=t.values.map((function(a){var r=(0,d.default)(a,[1]),n=("-1"===r?null:(0,b.getValueByUnit)(r,t.unit.value))*e.priceConfig[t.type];return(0,p.default)(a,[1],n),a})),t.type=O.METER_RESOURCE_TITLE[t.type]}));var r=a.map((function(e){return(0,d.default)(e,"type")})),n={title:t("CONSUMER_TRENDS"),unit:"CNY"===e.priceConfig.currency?t("￥"):t("$"),data:a,legend:r},l=(0,b.getAreaChartOps)(n);l.data.shift(),e.setState({chartData:l})}e.setState({loading:!1})}}))},e.renderNoPriceChart=function(){var a=e.state.chartData;if((0,m.default)(a)||!(0,v.default)(a))return null;var r={CPU:"cpu",Memory:"memory",Volumes:"storage","Net Received":"network","Net Transmitted":"network"},n=a.map((function(e){return{key:e.title,icon:r[e.title],unit:e.unit.value,legend:[e.title],title:t(O.METER_RESOURCE_USAGE_TITLE[e.type].toUpperCase().replace(/\s+/g,"_")),data:[e],yAxis:!0,titleValue:e.sum_value,dot:3}}));return f.default.createElement(_.default,{tabs:n})},e}return(0,o.default)(r,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.loading!==t.loading||!(0,h.default)(this.props.chartData,e.chartData)}},{key:"componentDidUpdate",value:function(e){(0,h.default)(this.props.chartData,e.chartData)||this.setAreaChartData(this.props.chartData)}},{key:"render",value:function(){return f.default.createElement("div",{className:S.default.chartContainer},f.default.createElement(y.Loading,{spinning:this.state.loading},(0,m.default)(this.state.chartData)?f.default.createElement(E.default,{className:"no-shadow",icon:"exclamation",title:t("NO_DATA"),desc:t("NO_RESOURCE_FOUND")}):(0,m.default)(this.priceConfig)?this.renderNoPriceChart():f.default.createElement(g.SimpleArea,(0,l.default)({width:"100%",height:245},this.state.chartData))))}},{key:"priceConfig",get:function(){return this.props.priceConfig}}]),r}(f.default.Component);a.default=C},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(21)),u=r(a(12)),o=r(a(13)),i=r(a(135)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=r(a(0)),p=r(a(1)),m=r(a(3)),h=r(a(16)),v=r(a(32)),y=r(a(68)),g=a(725),b=r(a(275)),E=a(735),_=r(a(2538));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(a,e);var t=O(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={activeTab:(0,h.default)((0,i.default)(e),"props.tabs[0].key","")},e.handleTabClick=function(t){return e.setState({activeTab:t.currentTarget.dataset.key})},e}return(0,o.default)(a,[{key:"renderTabList",value:function(){var e=this,t=this.props.tabs,a=this.state.activeTab;return(0,v.default)(t)?null:d.default.createElement("div",{className:_.default.tabHeader},t.map((function(t){return d.default.createElement("div",{key:t.key,className:(0,m.default)(_.default.tabHeaderItem,(0,l.default)({},_.default.active,t.key===a)),"data-key":t.key,onClick:e.handleTabClick},d.default.createElement(b.default,{icon:t.icon,title:!t.data||(0,y.default)(t.titleValue)?"-":"".concat(t.titleValue," ").concat(t.unit),description:t.title}))})))}},{key:"renderTabContent",value:function(){var e=this.props.tabs,t=this.state.activeTab,a=e.find((function(e){return e.key===t}));if(!a||!a.data)return null;var r=(0,g.getAreaChartOps)(a);return d.default.createElement("div",{className:_.default.tabContent},d.default.createElement(E.SimpleArea,(0,n.default)({width:"100%",height:200,yAxis:{hide:!0,domain:[0,100]}},r)))}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},this.renderTabList(),this.renderTabContent())}}]),a}(d.default.Component);t.default=S,S.propTypes={tabs:p.default.array},S.defaultProps={tabs:[]}},function(e,t,a){e.exports={wrapper:"_3wCugVeHTEmF8n8lH7qcKp",tabHeader:"Y0Qt-5VxGU31Ln_Yc0reG",tabHeaderItem:"_3OIhu4Xw4qkiUspV-o9YBd",active:"_3kDDrYzoR79fDiisexp9PH",tabContent:"Z8rVFty_pre5Qd2vERl_j",chartWrapper:"_2Fqg-xgQI4umN7Y_UvCDiB"}},function(e,t,a){e.exports={chartContainer:"mZL0FE8AngY_voJLWMBrz"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(835)),p=n(r(32)),m=n(r(16)),h=r(25),v=r(834),y=n(r(2549));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).renderTooltipContent=function(){return f.default.createElement("div",{className:y.default.tooltipContent},f.default.createElement("h3",null,t("TOTAL_CONSUMPTION_Q")),f.default.createElement("p",null,t("TOTAL_CONSUMPTION_A")))},e.getColumns=function(){return[{title:t("RESOURCE_TYPE"),dataIndex:"type",render:function(e,a){return f.default.createElement(f.default.Fragment,null,f.default.createElement("span",{style:{background:a.color}}),t(v.METER_RESOURCE_TITLE[e].toUpperCase().replace(/\s+/g,"_")))}},{title:t("MAXIMUM_USAGE"),dataIndex:"max_value",render:function(e,t){return f.default.createElement(f.default.Fragment,null,e," ",(0,m.default)(t,"unit.label","-"))}},{title:t("MINIMUM_USAGE"),dataIndex:"min_value",render:function(e,t){return f.default.createElement(f.default.Fragment,null,e," ",(0,m.default)(t,"unit.label","-"))}},{title:t("AVERAGE_USAGE"),dataIndex:"avg_value",render:function(e,t){return f.default.createElement(f.default.Fragment,null,e," ",(0,m.default)(t,"unit.label","-"))}},{title:f.default.createElement("div",{className:y.default.question},t("TOTAL_CONSUMPTION"),f.default.createElement(h.Tooltip,{content:e.renderTooltipContent(),placement:"top"},f.default.createElement(h.Icon,{name:"question",size:16}))),dataIndex:"sum_value",render:function(e,t){return f.default.createElement(f.default.Fragment,null,e," ",(0,m.default)(t,"unit.label","-"))}}].concat((0,l.default)((0,p.default)(e.props.priceConfig)?[]:[{title:"".concat(t("Price")),dataIndex:"fee",render:function(a){var r="CNY"===e.props.priceConfig.currency?t("￥"):t("$");return"".concat(r," ").concat(parseFloat(a).toFixed(2))}}]))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.data;return f.default.createElement("div",{className:y.default.tableContainer},f.default.createElement(d.default,{hideHeader:!0,hideFooter:!0,rowKey:"type",data:e,loading:(0,p.default)(e),columns:this.getColumns()}))}}]),r}(f.default.Component);a.default=b},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(109)),u=n(a(12)),o=n(a(13)),i=n(a(19)),c=n(a(20)),s=n(a(18)),f=r(a(0)),d=n(a(3)),p=n(a(1)),m=a(25),h=n(a(139)),v=n(a(851)),y=n(a(16)),g=n(a(68)),b=n(a(32)),E=n(a(2542));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var O=function(e){(0,i.default)(a,e);var t=_(a);function a(e){var r;return(0,u.default)(this,a),(r=t.call(this,e)).handleOptionClick=function(e){var t=(0,y.default)(e,"currentTarget.dataset.value"),a=r.props,n=a.value,u=a.onChange,o=(0,l.default)(n);(0,h.default)(o,t)?(0,v.default)(o,(function(e){return e===t})):o.push(t),u(o)},r.hideableColumns=e.columns.filter((function(e){return e.isHideable})).map((function(e){return{label:e.title,value:e.dataIndex||e.key}})),r}return(0,o.default)(a,[{key:"isVisibleOption",value:function(e){var t=e.value,a=this.props.value;return!(0,h.default)(a,t)}},{key:"renderContent",value:function(){var e=this.props.className;return f.default.createElement("div",{className:(0,d.default)(E.default.wrapper,e)},this.renderHeader(),this.renderOptions())}},{key:"renderHeader",value:function(){var e=this.props.title;return(0,g.default)(e)?null:f.default.createElement("header",null,e)}},{key:"renderOptions",value:function(){return f.default.createElement("ul",null,this.hideableColumns.map(this.renderOption,this))}},{key:"renderOption",value:function(e){var t=this.isVisibleOption(e),a=e.value,r=e.label,n=t?"eye":"eye-closed";return f.default.createElement("li",{"data-value":a,key:a,onClick:this.handleOptionClick},f.default.createElement(m.Icon,{name:n}),r)}},{key:"render",value:function(){return(0,b.default)(this.hideableColumns)?null:f.default.createElement(m.Dropdown,{content:this.renderContent(),placement:"bottomRight"},f.default.createElement(m.Button,{type:"flat",icon:"cogwheel","data-test":"table-columns"}))}}]),a}(f.Component);O.propTypes={value:p.default.array,onChange:p.default.func.isRequired,className:p.default.string,title:p.default.node,columns:p.default.array.isRequired},O.defaultProps={value:[],columns:[]};var S=O;t.default=S},function(e,t,a){e.exports={wrapper:"_1ySvVWPft88PiZ2MO7sDtU"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(192)),o=l(r(21)),i=l(r(12)),c=l(r(13)),s=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(3)),h=l(r(651)),v=l(r(302)),y=l(r(32)),g=l(r(879)),b=l(r(190)),E=r(25),_=r(638),O=l(r(2544));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=function(e){(0,s.default)(r,e);var a=C(r);function r(e){var t;(0,i.default)(this,r),(t=a.call(this,e)).handleFoucs=function(){t.filterInput&&t.filterInput.current&&((0,_.hasClass)(t.filterInput.current,O.default.focus)||(0,_.addClass)(t.filterInput.current,O.default.focus))},t.handleBlur=function(){t.filterInput&&t.filterInput.current&&(0,_.hasClass)(t.filterInput.current,O.default.focus)&&(0,_.removeClass)(t.filterInput.current,O.default.focus)},t.handleChange=function(e){var a=e.target.value;t.setState({value:a},(function(){(0,y.default)(a)&&t.setState({activeSuggestion:null})}))},t.handleClear=function(e){e.nativeEvent.stopImmediatePropagation(),t.setState({value:"",activeSuggestion:null},(function(){t.props.onChange({})}))},t.handleKeyUp=function(e){if(13===e.keyCode){var a=t.state,r=a.value,n=a.suggestions,l=a.activeSuggestion;if(!(0,y.default)(r)){var u=t.props,i=u.onChange,c=u.filters,s=l||n[0];i(k(k({},c),{},(0,o.default)({},s.key,(0,g.default)(r.replace("".concat(s.label,":"),"")))))}}},t.handleTagDelete=function(e){var a=t.props,r=a.onChange,n=a.filters;r((0,b.default)(n,e.filter))},t.handleMenuClick=function(e,a,r){t.setState({activeSuggestion:r,value:"".concat(r.label,":"),optionVisible:!!r.options},(function(){t.input.current.focus()}))},t.handleSuggestionMenuClick=function(e,a,r){var n=t.state.activeSuggestion,l=t.props,u=n;(0,l.onChange)(k(k({},l.filters),{},(0,o.default)({},u.key,(0,g.default)(r))))};var n=t.getSuggestions(e.columns),l=t.getTags(n,e.filters);return t.state={suggestions:n,activeSuggestion:null,optionVisible:!1,tags:l},t.input=p.default.createRef(),t.filterInput=p.default.createRef(),t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.state.suggestions;this.props.columns!==e.columns&&(t=this.getSuggestions(this.props.columns),this.setState({suggestions:t})),(0,h.default)(this.props.filters,e.filters)||this.setState({value:"",activeSuggestion:null,optionVisible:!1,tags:this.getTags(t,this.props.filters)})}},{key:"getSuggestions",value:function(e){return e.filter((function(e){return e.search&&e.dataIndex})).map((function(e){return{label:e.title,key:e.dataIndex,options:e.filters&&e.filters.map((function(e){return{label:e.text,key:e.value}}))}}))}},{key:"getTags",value:function(e,t){return"object"!==(0,u.default)(t)?[]:Object.keys(t).map((function(a){var r=(0,v.default)(e,{key:a})||{},n=r.options&&(0,v.default)(r.options,{key:t[a]})||{};return{filter:a,filterLabel:"label"in r?r.label:"",value:t[a],valueLabel:"label"in n?n.label:t[a]}}))}},{key:"renderMenu",value:function(){var e=this.state,t=e.suggestions,a=e.tags,r=t.filter((function(e){return!a.some((function(t){return t.filter===e.key}))}));return r.length<1?null:p.default.createElement(E.Menu,{onClick:this.handleMenuClick},r.map((function(e){return p.default.createElement(E.Menu.MenuItem,{key:e.key,value:e},e.label)})))}},{key:"renderSuggestionOptions",value:function(){var e=this.state.activeSuggestion;return p.default.createElement(E.Menu,{onClick:this.handleSuggestionMenuClick},e.options.map((function(e){return p.default.createElement(E.Menu.MenuItem,{key:e.key,value:e.key},e.label)})))}},{key:"renderTags",value:function(){var e=this;return this.state.tags.map((function(t){return p.default.createElement(E.Tag,{key:t.filter},p.default.createElement("span",null,t.filterLabel,":",t.valueLabel),p.default.createElement(E.Icon,{name:"close",type:"light",clickable:!0,onClick:function(){return e.handleTagDelete(t)}}))}))}},{key:"renderInput",value:function(){var e,a=this.state,r=a.activeSuggestion,n=a.optionVisible,l=a.value,u=p.default.createElement(E.Input,{type:"text",innerRef:this.input,placeholder:t("SEARCH"),onChange:this.handleChange,onKeyUp:this.handleKeyUp,value:l||"",onFocus:this.handleFoucs,onBlur:this.handleBlur});return r?r.options&&(e=this.renderSuggestionOptions()):e=this.renderMenu(),e?p.default.createElement(E.Dropdown,{theme:"dark",content:e,visible:n,closeAfterClick:!1},u):u}},{key:"render",value:function(){var e=this.props.className,t=this.state,a=t.value,r=t.tags,n=!(0,y.default)(a)||!(0,y.default)(r);return p.default.createElement("div",{className:(0,m.default)(O.default.wrapper,(0,o.default)({},O.default.hasValue,n),e),ref:this.filterInput},p.default.createElement(E.Icon,{className:"is-left",name:"magnifier"}),p.default.createElement("div",{className:O.default.content},this.renderTags(),this.renderInput()),n&&p.default.createElement(E.Icon,{className:"is-right",name:"close",clickable:!0,onClick:this.handleClear}))}}]),r}(p.Component);a.default=R},function(e,t,a){e.exports={wrapper:"_2_GPxm1qgdmHWxZVasJGXH",hasValue:"Hvknl4Yw6gX4pzPFi0fDo",focus:"_3RGGM5D0XRGhQxEtJDMNF2",content:"_2-6sGmjUtALBlMz6W1Ibd8"}},function(e,t,a){e.exports={wrapper:"_3VzEds9njzcdy3eWDd8AdI",image:"_2XrS1I3VwYabAXblHxuv_E",title:"_1523awfqHFp_3cu11gY-Zf",desc:"rwrfKJA7fqcY8qziN8VmQ",actions:"jLcnDjp3MH8F7QUxDRXAH"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(21)),o=l(r(12)),i=l(r(13)),c=l(r(19)),s=l(r(20)),f=l(r(18)),d=n(r(0)),p=r(25),m=l(r(3)),h=r(58),v=l(r(2547));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=a.call.apply(a,[this].concat(l))).state={pagesize:10},e.handlePrev=function(){var t=e.props,a=t.page,r=t.onChange,n=t.limit;r&&r({page:Math.max(a-1,1),limit:n})},e.handleNext=function(){var t=e.props,a=t.page,r=t.onChange,n=t.limit;r&&r({page:Math.min(a+1,e.totalPage),limit:n})},e.renderPagesize=function(){var a=e.state.pagesize,r=e.props.total;return d.default.createElement("div",{className:v.default.pageSizeBox},d.default.createElement(p.Dropdown,{placement:"bottomLeft",trigger:"hover",content:d.default.createElement(p.Menu,{className:v.default.pageSizeMenu,onClick:e.handlePageSizeClick},h.PAGESIZE_OPTION.map((function(e){return d.default.createElement(p.Menu.MenuItem,{className:(0,m.default)(v.default.pageSizeMenuitem),key:e},d.default.createElement("span",null,e," ",t("TABLE_UNIT")))})))},d.default.createElement("div",{className:v.default.pagesize},d.default.createElement("span",{className:v.default.text},a," ",t("TABLE_UNIT")),d.default.createElement(p.Icon,{name:"caret-down",size:16}))),d.default.createElement("div",{className:v.default.gap}),d.default.createElement("span",null,t("TOTAL_ITEMS",{num:r})))},e.handlePageSizeClick=function(t,a){var r=e.props.onChange;e.setState({pagesize:a},(function(){r({page:1,limit:a})}))},e.renderPageDropDown=function(){var t=e.props.page;if(e.totalPage>0){for(var a=[],r=0;r<e.totalPage;r++)a.push(d.default.createElement(p.Menu.MenuItem,{className:(0,m.default)(v.default.menuitem,(0,u.default)({},v.default.menuActive,t===r+1)),key:r+1},r+1));return d.default.createElement(p.Menu,{className:(0,m.default)(v.default.menu,(0,u.default)({},v.default.scrollY,e.totalPage>5)),onClick:e.handlePageMenuClick},a)}return null},e.handlePageMenuClick=function(t,a){var r=e.props,n=r.onChange,l=r.limit;n&&n({page:Math.min(a,e.totalPage),limit:l})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props.page;return d.default.createElement(p.Level,null,d.default.createElement(p.LevelLeft,null,this.renderPagesize()),d.default.createElement(p.LevelRight,null,d.default.createElement(p.LevelItem,{className:v.default.pagination},d.default.createElement(p.Button,{className:v.default.button,type:"flat",icon:"previous",iconSize:16,disabled:e<=1,onClick:this.handlePrev}),d.default.createElement(p.Dropdown,{placement:"bottom",trigger:"hover",content:this.renderPageDropDown()},d.default.createElement("div",{className:v.default.pages},d.default.createElement("span",null,e," / ",this.totalPage))),d.default.createElement(p.Button,{className:v.default.button,type:"flat",icon:"next",iconSize:16,disabled:e>=this.totalPage,onClick:this.handleNext}))))}},{key:"totalPage",get:function(){var e=this.props,t=e.total,a=e.limit,r=t%a;return 0===r?Math.max(t/a,1):(t-r)/a+1}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.limit!==t.pagesize?{pagesize:e.limit}:null}}]),r}(d.Component);a.default=g},function(e,t,a){e.exports={pagination:"_1dSx1ELI9mKV_XKzeg5oqc",button:"_3T5SpcpWZ3a2B9vESdIlx2",pages:"_37mXWoWCMEygBpf0jL9oim",menu:"xjUsDCou069P97IBLEbVa",scrollY:"_6brIpsm1N4E8PoU2OExJ",menuitem:"_1EALVDOWXL69dfaxP7_T6s",pageSizeBox:"_1Z61FoSfcwE_TZx9ggFlUb",pagesize:"J3XnwDwpeAseL4wVB8kmI",text:"_1bYIlSqp9ICySDLPuHuyny",gap:"pDIlk68srR8bscn1A87Gj",pageSizeMenu:"QCzvHMKtZSmGIXHnJt2Qp",pageSizeMenuitem:"_3vsljrR9NNQJa-Y7PINEvi",menuActive:"_3TPb0D6AKWU2mNEIdEg1xu"}},function(e,t,a){e.exports={table:"_3QrYCxd-JO78EY_P2B7APM",button:"_3WnAgzVNXCApGYbj66jim4",cancelSelect:"_3CpNTPZ4yNBrffXzlrL34-",create:"_2NKXA5HKUkb5pUWyECbrCa",disableSearch:"_3RDWadryl-6GkNfMnpnEpo",search:"_1s0Z5vq4JGtkP-IFCCOLPu",emptyText:"_2Fw7QFUo5WHLz7yCkIrHes",emptyTipIcon:"_1uDSLXNU6ZGcC-5EnzwRU8",action:"_3iUetKGL0yVLn9emSwH8Nc",columnMenu:"_1Z_pOPEZ615RXT_s1mZLvJ"}},function(e,t,a){e.exports={tableContainer:"_1qt6DxeA0PoekXMLfft7Li",tooltipContent:"OaizemFg4cw-uSv0anfeC",question:"_3GZFLRZtys7rulSsltSb8K"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=r(25),p=l(r(32)),m=l(r(16)),h=l(r(745)),v=r(834);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=y(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={value:"cpu"},e.getOptions=function(){var a=e.props.selectOptions;return(0,p.default)(a)?[]:Object.keys(a).map((function(e){return{label:t(v.METER_RESOURCE_TITLE[e].toUpperCase().replace(/\s+/g,"_")),value:e}}))},e.handleSelect=function(t){e.setState({value:t}),e.props.getResourceMeterData(t)},e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){if(this.props.activeName!==e.activeName||!(0,h.default)(this.props.selectOptions,e.selectOptions)){var t=this.getOptions();this.setState({value:(0,m.default)(t,"[0].value")})}}},{key:"render",value:function(){var e=this.state.value;return f.default.createElement("div",null,f.default.createElement(d.Select,{onChange:this.handleSelect,options:this.getOptions(),width:"100%",style:{marginBottom:"20px",width:"100%"},value:e}))}}]),r}(f.Component);a.default=g},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(136)),o=n(r(0));r(1061);var i=l(r(985)),c=l(r(784)),s=l(r(839)),f=l(r(934)),d=l(r(987)),p=l(r(1059)),m=l(r(32)),h=l(r(275)),v=r(58),y=l(r(2552)),g=r(834),b=l(r(1131)),E=function(e){var t=Math.PI/180,a=e.cx,r=e.cy,n=e.midAngle,l=e.innerRadius,u=e.outerRadius,c=e.startAngle,s=e.endAngle,f=e.fill,d=e.payload,p=e.percent,m=e.value,h=Math.sin(-t*n),v=Math.cos(-t*n),y=a+(u+10)*v,g=r+(u+10)*h,b=a+(u+30)*v,E=r+(u+30)*h,_=b+22*(v>=0?1:-1),O=E,S=v>=0?"start":"end";return o.default.createElement("g",null,o.default.createElement("text",{x:a,y:r,dy:8,textAnchor:"middle",fill:f,className:"chart__center__text"},d.name),o.default.createElement(i.default,{cx:a,cy:r,innerRadius:l,outerRadius:u,startAngle:c,endAngle:s,fill:f}),o.default.createElement(i.default,{cx:a,cy:r,startAngle:c,endAngle:s,innerRadius:u+6,outerRadius:u+10,fill:f}),o.default.createElement("path",{d:"M".concat(y,",").concat(g,"L").concat(b,",").concat(E,"L").concat(_,",").concat(O),stroke:f,fill:"none"}),o.default.createElement("circle",{cx:_,cy:O,r:2,fill:f,stroke:"none"}),o.default.createElement("text",{x:_+12*(v>=0?1:-1),y:O,textAnchor:S,fill:"#333"},"".concat(m," ").concat(d.unit)),o.default.createElement("text",{x:_+12*(v>=0?1:-1),y:O,dy:18,textAnchor:S,fill:"#999"},"(".concat((100*p).toFixed(2),"%)")))},_=function(e){var a=e.data,r=e.dataKey,n=void 0===r?"value":r,l=(0,o.useState)(0),i=(0,u.default)(l,2),_=i[0],O=i[1];return(0,m.default)(a)?null:o.default.createElement(c.default,{width:"100%",height:"100%"},o.default.createElement(p.default,{width:250,height:250},o.default.createElement(s.default,{vertical:!0,content:function(e){var a=e.payload;return o.default.createElement("div",{className:y.default.resourceList},o.default.createElement("ul",null,a.map((function(e,a){var r=e.payload,n=r.name,l=r.value,u=r.type,i=r.unit;return o.default.createElement("li",{key:"item-".concat(a)},o.default.createElement("i",{style:{background:e.color}}),o.default.createElement(b.default,{icon:v.ICON_TYPES[u],type:u,name:n}),o.default.createElement(h.default,{className:y.default.info,title:"".concat(n),description:t(g.RESOURCE_TITLE[u])}),o.default.createElement("span",null," ".concat(l," ").concat(i)))}))))},verticalAlign:"top"}),o.default.createElement(d.default,{cx:"70%",data:a,dataKey:n,innerRadius:"60%",outerRadius:"75%",activeShape:E,activeIndex:_,onMouseEnter:function(e,t){O(t)}},a.map((function(e,t){return o.default.createElement(f.default,{key:"cell-".concat(e.name),fill:g.PIE_COLORS[t%g.PIE_COLORS.length],strokeWidth:1})})))))};a.default=_},function(e,t,a){e.exports={resourceList:"_31MsHfl5iWHdowDFRcP_c_",info:"_1x0CTr7Gdd16AxoTqHsNYT"}},function(e,t,a){e.exports={empty:"_17Mqxb1Mgn-uRdDZOJ1Qry",emptyCard:"_3Je_SSJ5BVw3PS1lYiaF4a",billDetail:"_34UPSURIT6CqbdKJPw0R7F",paddingBottom0:"Pwj-ykGPltZo5v5_plDlH",leftContent:"_3s_-nS9c5xnUUgNEPJ8KBe",usageCard:"_21O2m-U6tWGv0Y9s4Y4Ajh",meterCard:"_2gAbgzqWqzvuq_xZzCJQ1f",rightContent:"_3Aa1yND_BGYLN9nw7XneCp",content:"_3g0_NpYdRmw2VOPc2T6ywW",toothbg:"_1Rh1CvWKS3lQeuSjvWt3Y0",subTitle:"_3jfzvzWfyayS9TsDXqD6lC",info:"_2oNPFCeABRFS8ryVIKhich",childrenResourceContainer:"_1OGurl1hQb7F7WnATfB1QY",childrenlistContainer:"_2pzMlSUqyzZuZDlITePlsG",constomChartContainer:"_1yVmPte_v552Dq8WqeShqg"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={label:"_2Ci7cqZ4O7DRBCRuzvUd-F",name:"_3c-epdF2Xgo9q-18cg54xx"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=r(25),m=n(r(3)),h=n(r(1024));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(r,e);var a=v(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClose=function(){var t=e.props;(0,t.onClose)(t.title)},e.handleToggle=function(){var t=e.props;(0,t.onToggle)(t.title)},e.stopPropagation=function(e){e.stopPropagation()},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=e.description,u=e.operation,o=e.more,i=e.closable,c=e.open;return f.default.createElement("div",{className:(0,m.default)(h.default.tip,(0,l.default)({},h.default.open,c),a),onClick:this.handleToggle},f.default.createElement("div",{className:h.default.tipIcon},f.default.createElement(p.Icon,{name:c?"chevron-down":"chevron-right",size:20})),f.default.createElement("div",{className:h.default.tipContent},f.default.createElement("div",null,r),c&&f.default.createElement("p",{className:"text-second"},n)),f.default.createElement("div",{className:h.default.operations,onClick:this.stopPropagation},u,o&&f.default.createElement("a",{href:o,target:"_blank",rel:"noreferrer noopener"},f.default.createElement(p.Button,null,t("LEARN_MORE"))),i&&f.default.createElement(p.Icon,{name:"close",size:20,clickable:!0,onClick:this.handleClose})))}}]),r}(f.default.Component);a.default=y,y.propTypes={className:d.default.string,title:d.default.string,description:d.default.oneOfType([d.default.string,d.default.element]),closable:d.default.bool,operation:d.default.node,onClose:d.default.func},y.defaultProps={closable:!0,onClose:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(34),p=n(r(1385)),m=n(r(1024));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=(0,d.withRouter)(l=function(e){(0,i.default)(r,e);var a=h(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.routes,r=e.match,n=e.history,l=a.filter((function(e){return!!e.name})).map((function(e){return{label:t(e.title),value:e.name,count:e.count}})),u=l.find((function(e){return location.pathname.startsWith("".concat(r.url,"/").concat(e.value))}))||{};return f.default.createElement("div",{className:m.default.tabsWrapper},f.default.createElement(p.default,{value:u.value,onChange:function(e){return n.push("".concat(r.url,"/").concat(e))},options:l}))}}]),r}(f.default.Component))||l;a.default=v},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.tabs;return n.default.createElement("div",{className:u.default.tabsWrapper},n.default.createElement(l.default,t))};var n=r(a(0)),l=r(a(1385)),u=r(a(1024))},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={item:"_38IET-_Z40mlRDDt2dc9oo",pie:"_2Z0HAgrVH_0VYI2TXLkevV"}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={reason:"_2dAqW00YgMOSGORjuFVBGs",condition:"_3AeobLZKN_rHf4jlnsiMQk",title:"_3TkAdRLw937iktrSAezDu7",warning:"ALCcOSqNlYNtz2BKsiq8d",error:"_28enlxYAYUjvqkyLqd5qPC"}},,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(135)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(16)),v=n(r(32)),y=n(r(23)),g=n(r(297)),b=r(725),E=r(25),_=n(r(741)),O=n(r(891)),S=n(r(2734));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var w=function(e){(0,c.default)(r,e);var a=R(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).initParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e||{},r=a.times,n=a.step,l=a.createTime,u={times:r,step:n};if(l){var o=new Date(l).valueOf()/1e3,i=Date.now()/1e3,c=i-o;switch(!0){case c<=1800:u.times=30,u.step="1m";break;case c<=3600:u.times=60,u.step="1m";break;case c<=18e3:u.times=60,u.step="5m"}}t.params=u},t.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state.cluster,r=C(C({},t.params),e);a&&(r.cluster=a),t.props.onFetch(r)},t.handleChange=function(e){t.params=e;var a=!e.start&&!e.end&&t.props.enableAutoRefresh;t.setState({enableAutoRefresh:a,autoRefresh:!1},(function(){(0,b.stopAutoRefresh)((0,i.default)(t)),t.fetchData()}))},t.handleClusterChange=function(e){t.setState({cluster:e},(function(){t.fetchData()}))},t.handleRefresh=function(){t.fetchData()},t.handleAutoRefresh=function(){t.setState({autoRefresh:!t.state.autoRefresh},(function(){t.state.autoRefresh?(0,b.startAutoRefresh)((0,i.default)(t)):(0,b.stopAutoRefresh)((0,i.default)(t))}))},t.handleToggle=function(e){t.setState({active:e})},t.state={active:!1,enableAutoRefresh:e.enableAutoRefresh,autoRefresh:!1,cluster:(0,h.default)(e,"clusters[0].name","")},t.init(),t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){e.step===this.props.step&&e.times===this.props.times&&e.createTime===this.props.createTime||(this.initParams(this.props),this.fetchData())}},{key:"componentWillUnmount",value:function(){(0,b.stopAutoRefresh)(this)}},{key:"init",value:function(){this.initParams(this.props),this.fetchData()}},{key:"renderAutoRefresh",value:function(){var e=this.state,t=e.enableAutoRefresh,a=e.autoRefresh;return t?d.default.createElement(E.Button,{className:S.default.button,type:"control",icon:a?"pause":"start",iconType:"light",onClick:this.handleAutoRefresh}):null}},{key:"renderCustomActions",value:function(){return this.props.customAction||null}},{key:"renderOperations",value:function(){var e=this.state.active,t=this.params,a=t.step,r=t.times;return d.default.createElement("div",{className:(0,m.default)(S.default.operations,(0,l.default)({},S.default.active,e))},this.props.isFederated&&d.default.createElement(E.Select,{prefixIcon:d.default.createElement(E.Icon,{name:"cluster"}),className:S.default.clusters,value:this.state.cluster,options:this.clusters,onChange:this.handleClusterChange}),d.default.createElement(O.default,{step:a,times:r,onChange:this.handleChange,onToggle:this.handleToggle}),this.renderAutoRefresh(),d.default.createElement(E.Button,{className:S.default.button,type:"control",icon:"refresh",iconType:"light",onClick:this.handleRefresh}),this.renderCustomActions())}},{key:"renderTitle",value:function(){var e=this.props.title||t("MONITORING");return d.default.createElement("div",{className:S.default.title},d.default.createElement("span",null,e),this.renderOperations())}},{key:"renderContent",value:function(){var e=this.props.children;return(0,v.default)(e)||(0,y.default)(e)&&(0,v.default)((0,g.default)(e).filter((function(e){return e})))?null:e}},{key:"render",value:function(){var e=this.props.loading,a=this.state.active;return d.default.createElement(E.Loading,{spinning:e},d.default.createElement(_.default,{className:(0,m.default)(S.default.card,(0,l.default)({},S.default.showDropDown,a)),title:this.renderTitle(),empty:t("NO_MONITORING_DATA"),isEmpty:this.props.isEmpty},d.default.createElement("div",{className:S.default.content},this.renderContent())))}},{key:"clusters",get:function(){return this.props.clusters.map((function(e){return{label:e.name||e,value:e.name||e}}))}}]),r}(d.default.Component);a.default=w,w.propTypes={title:p.default.string,step:p.default.string,times:p.default.number,createTime:p.default.string,onFetch:p.default.func,loading:p.default.bool,refreshing:p.default.bool,isEmpty:p.default.bool,enableAutoRefresh:p.default.bool,customAction:p.default.oneOfType([p.default.node,p.default.element])},w.defaultProps={step:"10m",times:50,createTime:"",onFetch:function(){},loading:!1,refreshing:!1,isEmpty:!1,enableAutoRefresh:!0,customAction:""}},function(e,t,a){e.exports={selector:"_3jdnDfk2o9GZ977aTA-xpY",active:"_1VVAknMMhYtwjCCzJ26w8D",arrow:"_3fVUYCC4XLdULuzPPLryH6",dropdown:"_4VJDQbixxjDltdv9t2c1h",button:"B4m3CNQgLzi7Xqxf0JBO_",mask:"_2LZHnUZdP2-tzMlT4rOCY9",content:"_8RPB91ZzJIARHcetuuCun"}},function(e,t,a){e.exports={card:"HkMSwByVKb_DH9GlZNpYS",title:"_1oinAKfdPYwC75teupWmDr",operations:"D3Ewo-uPBdaiIlaz7nbG1",button:"_2lV2YHNnzVWYZbgRLPezn6",content:"_39DKIQh7O8MogkRM7IB5wu",showDropDown:"_3wdK0lJ1xKmVaSH1oQH9iA",clusters:"_2NdSlr3w6Oy3jYXDPydnMT"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(16)),h=r(735),v=n(r(2736));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=y(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props.onClick;t&&t()},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.theme,r=e.className,n=e.name,u=e.legend,o=e.used,i=e.total,c=e.unit,s=e.showRate,d=e.onClick,y=t(n),g=t((0,m.default)(u,"[0]","")),b=t((0,m.default)(u,"[1]",""));return f.default.createElement("div",{className:(0,p.default)(v.default.card,r,v.default[a],(0,l.default)({},v.default.cursor,!!d)),onClick:this.handleClick},f.default.createElement("img",{className:v.default.cardImg,src:"/assets/banner-icon-1.svg"}),f.default.createElement("div",{className:v.default.chart},f.default.createElement(h.SimpleCircle,{theme:a,width:"100%",height:"100%",title:y,legend:u,value:parseFloat(o),total:parseFloat(i),unit:c,showRate:s})),f.default.createElement("div",{className:v.default.status},f.default.createElement("div",{className:v.default.title},y),f.default.createElement("div",{className:v.default.detail},f.default.createElement("p",null,f.default.createElement("label",null,g,":")," ",o," ",c),f.default.createElement("p",null,f.default.createElement("label",null,b,":")," ",i," ",c))))}},{key:"usageRate",get:function(){var e=this.props,t=e.used,a=e.total;return a?parseInt(parseFloat(t)/parseFloat(a)*100,10):0}}]),r}(f.default.Component);a.default=g,g.propTypes={theme:d.default.string,className:d.default.string,name:d.default.string,legend:d.default.array,used:d.default.oneOfType([d.default.string,d.default.number]),total:d.default.oneOfType([d.default.string,d.default.number]),unit:d.default.string,showRate:d.default.bool,onClick:d.default.func},g.defaultProps={theme:"dark",name:"Status",legend:["Used","Total"],used:0,total:0,unit:"",showRate:!1}},function(e,t,a){e.exports={card:"ys1gr8DrCKFsc9EamK-Jw",cursor:"_3usZJpuk62n-HuMxSsHVZx",cardImg:"_2CRnyRZyAdh5kqk8n-fGCn",dark:"_2Xvbxm7MPLqVJY1nf5sCEB",status:"_3UJij7OY_rzeAeIIvjEEjW",title:"_1hjbImhuSjYDO3dQJyFLur",detail:"_34HFhvKBamjXf9djSGRJ2a",scale:"_3siV0Zg05idS6hJqGYBJ-i",control:"hZhz1_vK5xIjbq88ZdEnq",chart:"T-RcaS4YifEwfwXUwPUo7"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(135)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(3)),m=r(a(32)),h=r(a(93)),v=a(37),y=a(725),g=a(25),b=r(a(741)),E=r(a(802)),_=r(a(2738));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var C=function(e){(0,i.default)(a,e);var t=k(a);function a(e){var r;return(0,l.default)(this,a),(r=t.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.props.onFetch(e)},r.handleTabClick=function(e){return(0,v.cacheFunc)("_tab_".concat(e),(function(){r.setState({activeIndex:Number(e)})}),(0,o.default)(r))},r.state={activeIndex:0},r.fetchData(),r}return(0,u.default)(a,[{key:"componentDidMount",value:function(){(0,y.startAutoRefresh)(this,{interval:1e4,leading:!1})}},{key:"componentWillUnmount",value:function(){(0,y.stopAutoRefresh)(this)}},{key:"renderTabList",value:function(){var e=this,t=this.props.tabOptions,a=this.state.activeIndex;return(0,m.default)(t)?null:f.default.createElement("div",{className:_.default.tabList},t.map((function(t,r){var l=r===a,u=t.component,o=t.render,i=S(S({},t.props),{},{active:l});return f.default.createElement("div",{key:r,className:(0,p.default)(_.default.tab,(0,n.default)({},_.default.active,l)),onClick:e.handleTabClick(r)},f.default.createElement("i",{className:_.default.img}),f.default.createElement("div",{className:_.default.inner},(0,h.default)(o)?o(i):f.default.createElement(u,i)))})))}},{key:"renderTabContent",value:function(){var e=this.props.contentOptions,t=e[this.state.activeIndex]||{},a=t.component,r=t.render,n=S({},t.props);return f.default.createElement("div",{className:_.default.tabContent},f.default.createElement("div",{className:_.default.inner},(0,m.default)(e)?f.default.createElement(E.default,null):(0,h.default)(r)?r(n):f.default.createElement(a,n)))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.title,r=e.loading;return f.default.createElement(b.default,{className:(0,p.default)(_.default.card,t),title:a},f.default.createElement(g.Loading,{spinning:r},f.default.createElement("div",{className:_.default.content},this.renderTabList(),this.renderTabContent())))}}]),a}(f.default.Component);t.default=C,C.propTypes={title:d.default.string,tabOptions:d.default.array,contentOptions:d.default.array,loading:d.default.bool,refreshing:d.default.bool,onFetch:d.default.func},C.defaultProps={title:"",tabOptions:[],contentOptions:[],loading:!0,refreshing:!1,onFetch:function(){}}},function(e,t,a){e.exports={content:"_2Xa5otudrXKkSBP4ZXj_25",tabList:"aUXLJpvLU0FB8AeOm_82I",tab:"_3ZiPd90tJiVMCa-tFKc6nM",active:"_1tGP7Q2XasoaNQb4W3sxtn",img:"_1C8h77HY1Vvimz27VInPzs",inner:"DjQwqZQmUhjM9VR9YmkZ",tabContent:"_2yiUNLbPZ7wkxc_wDsSjcI"}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={table:"_1i60_Zk2GuZ0BSBW7unRbV",table_rank:"_2Mr7mDygEQ35XwS2BpvdbG",table_no_border:"_35xeFOcthetSVxVd7jbhy8",rankCol:"K5KlP-RunT4IdakA3VSci",table_transparent:"_1kEZxv3qugETuqEDftrkMQ"}},,,,,,function(e,t,a){e.exports={body:"_2nw82TdZqbyjr0bm40Sih4",header:"_1M41jikM7ePDXhFT1WDbIS",title:"_3ywwov218ZZPCFgHYl7T5E",button:"_6fNsilTYZ0OIAuj8bKcuM",content:"_26InltOTHFXzw6qW-no6YV"}},function(e,t,a){e.exports={content:"mI2LtgMFaq0E-mDZTwhJ1",form:"_33uYjplMUXxS2dtpxqyk0Y",chart:"_1UHGGr7yokFO9-MAG-bp9b",table:"_1fZ9ZeVdoF2LVtsjPgXf3e",box:"_30iU9X8YZtOpSyIPS3fDT0",title:"qsGGqGaCVg1q10yzj6eml",empty:"_2Ar2Yi5B35znFPy-ETKrkw",option:"_3WZM55TzrzwmmDd3kO13dM",tip:"_2Kqo0ZWDW1WX-ofCLGtM1w"}},function(e,t,a){e.exports={content:"_1flyCDLTNgroopAvztgY0S",item:"_1zl1DvMLX2YtTTQuvirldX",cursor:"_2VKG6VdQYqW_Jfgf_sdPTq"}},function(e,t,a){e.exports={content:"_22oShqErzb7Zg62dSiR6cY",wrapper:"RRB2IIfXIPCzlpPCDoj-S",item:"Nd0Z8L7XQ1dllBxOFf5cb",cursor:"_3HIXxDWa4EOcHJnJEhIv6L"}},,,,,,,,,,function(e,t,a){e.exports={manage:"_8-pJZ-X-Am3wrKf0_vsf7",button:"_247XpOiP7kljdn3SIa-SyA"}},,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(56)),o=n(r(136)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(32)),v=n(r(138)),y=r(276),g=r(25),b=n(r(2801)),E=n(r(2803)),_=n(r(1411)),O=n(r(2807));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=function(e){(0,s.default)(r,e);var a=S(r);function r(){return(0,i.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"renderNav",value:function(){var e=this.props.breadcrumbs;if((0,h.default)(e))return null;var t=e[0];return p.default.createElement(y.Link,{to:t.url,className:O.default.breadcrumbs},p.default.createElement(g.Icon,{name:"chevron-left",size:20}),t.label)}},{key:"renderName",value:function(){var e=this.props,t=e.icon,a=e.name;return p.default.createElement("div",{className:O.default.name,title:a,"data-test":"detail-title"},(0,v.default)(t)?p.default.createElement(g.Icon,{name:t,size:28}):t,a)}},{key:"renderDesc",value:function(){var e=this.props.desc;return p.default.createElement("div",{className:O.default.desc,"data-test":"detail-desc"},e)}},{key:"renderBtnGroup",value:function(){var e=this.props.operations;return(0,h.default)(e)?null:p.default.createElement(b.default,{options:e,limit:2})}},{key:"renderLabels",value:function(){var e=this.props.labels;return(0,h.default)(e)?null:p.default.createElement("div",{className:O.default.labels,"data-test":"detail-labels"},p.default.createElement("div",{className:"h6"},t("LABEL_PL")),p.default.createElement("div",{className:O.default.labelList},Object.entries(e).map((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return p.default.createElement(E.default,{key:a,name:a,value:r})}))))}},{key:"renderAttributes",value:function(){var e=this.props.attrs;return(0,h.default)(e)?null:p.default.createElement("div",{className:O.default.attrs,"data-test":"detail-attrs"},p.default.createElement("div",{className:"h6"},t("DETAILS")),p.default.createElement(_.default,null,e.map((function(e){var t=e.name,a=e.value,r=e.show,n=void 0===r||r,o=(0,u.default)(e,["name","value","show"]);return n?p.default.createElement(_.default.Item,(0,l.default)({key:t,name:t,value:null==a?"-":a},o)):null}))))}},{key:"render",value:function(){return p.default.createElement("div",{className:O.default.card},p.default.createElement("div",{className:O.default.base},this.renderNav(),this.renderName(),this.renderDesc(),this.renderBtnGroup()),p.default.createElement("div",{className:O.default.extra},this.renderLabels(),this.renderAttributes()))}}]),r}(p.default.Component);k.propTypes={icon:m.default.oneOfType([m.default.string,m.default.element]),name:m.default.string,desc:m.default.string,operations:m.default.array,labels:m.default.object,attrs:m.default.array},k.defaultProps={icon:"appcenter",name:"",desc:""};var C=k;a.default=C},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(71)),o=l(r(56)),i=l(r(12)),c=l(r(13)),s=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(1)),h=l(r(3)),v=l(r(32)),y=l(r(93)),g=r(25),b=l(r(2802));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=E(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleMoreClick=function(t,a){var r=e.props.options.find((function(e){return e.key===a})).onClick;r&&r()},e.renderBtn=function(e){var t=e.text,a=e.show,r=void 0===a||a,n=(e.icon,(0,o.default)(e,["text","show","icon"]));return r?p.default.createElement(g.Button,(0,u.default)({className:b.default.button},n,{"data-test":"detail-".concat(n.key)}),t):null},e}return(0,c.default)(r,[{key:"renderBtns",value:function(){var e=this.props,a=e.options,r=e.limit;if((0,v.default)(a))return null;if(a.length<=r)return a.map(this.renderBtn);var n=this.renderMoreOptions();return p.default.createElement("div",null,this.renderBtn(a[0]),n&&p.default.createElement(g.Dropdown,{theme:"dark",content:n},p.default.createElement(g.Button,{className:b.default.more,"data-test":"detail-more"},t("MORE")," ",p.default.createElement(g.Icon,{name:"caret-down"})," ")))}},{key:"renderMoreOptions",value:function(){var e=this.props,t=e.options,a=e.limit,r=t.slice(a-1).map((function(e){var t=e.icon,a=e.text,r=e.show,n=void 0===r||r,l=(0,o.default)(e,["icon","text","show"]);return n?p.default.createElement(g.Menu.MenuItem,l,t&&((0,y.default)(t)?t():p.default.createElement(g.Icon,{name:t,type:"light"}))," ",p.default.createElement("span",{"data-test":"detail-".concat(l.key)},a)):null}));return r.every((function(e){return null===e}))?null:p.default.createElement(g.Menu,{onClick:this.handleMoreClick},r)}},{key:"render",value:function(){var e=this.props,t=e.className,a=(e.limit,e.options,(0,o.default)(e,["className","limit","options"]));return p.default.createElement("div",(0,u.default)({className:(0,h.default)(b.default.group,t)},a),this.renderBtns())}}]),r}(p.Component);a.default=_,_.propTypes={className:m.default.string,options:m.default.array,limit:m.default.number},_.defaultProps={options:[],limit:2}},function(e,t,a){e.exports={group:"_2B2ilC281XtItceiKdIZQj",more:"c0l4EkNJdSiWan6p7uE3g"}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(71)),u=n(a(56)),o=n(a(12)),i=n(a(13)),c=n(a(19)),s=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(1)),m=n(a(3)),h=n(a(2804));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(a,e);var t=v(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.name,r=e.value,n=(0,u.default)(e,["className","name","value"]);return d.default.createElement("div",(0,l.default)({className:(0,m.default)(h.default.label,t)},n),d.default.createElement("span",{className:h.default.name},a),r)}}]),a}(d.PureComponent);t.default=y,y.propTypes={className:p.default.string,name:p.default.string,value:p.default.string},y.defaultProps={name:"",value:""}},function(e,t,a){e.exports={label:"_1FK1T3OOl_aDE4o8L7xI4n",name:"_1sBV1gZIWc-GThrdvboLBn"}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),u=n(a(13)),o=n(a(19)),i=n(a(20)),c=n(a(18)),s=r(a(0)),f=n(a(1)),d=n(a(3)),p=n(a(1412));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(a,e);var t=m(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){return s.default.createElement("ul",{className:(0,d.default)(p.default.attributes,this.props.className)},this.props.children)}}]),a}(s.PureComponent);t.default=h,h.propTypes={children:f.default.any}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),u=n(a(13)),o=n(a(19)),i=n(a(20)),c=n(a(18)),s=r(a(0)),f=n(a(1)),d=n(a(3)),p=a(25),m=n(a(1412));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(a,e);var t=h(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.value,r=e.tooltips,n=e.className;return s.default.createElement("li",{className:(0,d.default)(m.default.item,n)},s.default.createElement("div",{className:m.default.name},s.default.createElement("span",null,t,": "),""!==r&&s.default.createElement(p.Tooltip,{content:r,placement:"topLeft"},s.default.createElement(p.Icon,{name:"question",size:20}))),s.default.createElement("div",{className:m.default.value},a))}}]),a}(s.PureComponent);t.default=v,v.propTypes={name:f.default.string.isRequired,value:f.default.oneOfType([f.default.string,f.default.node]),tooltips:f.default.string},v.defaultProps={value:"-",tooltips:""}},function(e,t,a){e.exports={card:"_1TtnFCnGc1ski6hOEXlxnI",base:"_2GxieNANkPXdm0408D_3oP",extra:"_3hCfKuvN_Ef6cY4it19YCJ",name:"_1dZCRi0HdFWhiJB75pMFKm",desc:"_3gLtui_zDMdO7LxAems9qu",labels:"_1z7olIqtdxE3g0jW2yVplo",labelList:"VB73KdZLLoNu9vvylgoRF",attrs:"_2GtNgbAdUZIIBJe_HcsOdm",breadcrumbs:"_2uI_y-UgK5LRubkb8yvpBG"}},function(e,t,a){e.exports={sider:"_3zLayqjXtFnFimHKDhJSyN",content:"_2aBaejeAt8Yn44fpEW8EJ-",nav:"_2odKMxXdzwIeYT7ZwaPwW4",navItem:"_2SWDZqkY4ZzdzKpcjSkJio",active:"_2wmp-lQI4i6jOfSemwExp2"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(919)),o=r(a(765)),i=r(a(964)),c=r(a(1146)),s=r(a(1147));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:i.default,exact:!0},{path:"".concat(e,"/revision-control"),title:"REVISION_RECORDS",component:c.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:s.default,exact:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},,function(e,t,a){e.exports={table:"r5nMO6HKdxJH3nQm89So4"}},function(e,t,a){e.exports={main:"_1_HBA1zezSrtOSNSKGveb5",content:"dQEya2WnRQnmgJm2EjWM",expanded:"_1uirIjdcLa0OfeUJULOBQA",arrow:"_35J1WNXmHLjfTCHjihFPgW",title:"rDH2F0h1bZKVtuR8hbJih",variables:"_1FEVckMj_O1JOeKEaw5ll",name:"_1HhGTblfQUtMPyPwPKBrDa"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(136)),o=l(r(12)),i=l(r(13)),c=l(r(19)),s=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(723)),m=l(r(1023)),h=l(r(32));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props.labels;return(0,h.default)(e)?null:d.default.createElement(p.default,{title:t("LABEL_PL")},d.default.createElement("div",null,Object.entries(e).map((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1];return d.default.createElement(m.default,{key:a,name:a,value:r})}))))}}]),r}(d.Component);a.default=y},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(136)),o=l(r(12)),i=l(r(13)),c=l(r(19)),s=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(723)),m=l(r(32)),h=l(r(2815));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props.annotations;return(0,m.default)(e)?null:d.default.createElement(p.default,{title:t("ANNOTATION_PL")},d.default.createElement("ul",{className:h.default.values},Object.entries(e).map((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1];return d.default.createElement("li",{key:a},d.default.createElement("span",{className:h.default.title},a),d.default.createElement("span",null,String(r)))}))))}}]),r}(d.Component);a.default=y},function(e,t,a){e.exports={values:"lfsILErONxAoalZHtWYT-",title:"_3cnUpyspiN-9rx40Bpk6vm"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(21)),o=n(r(71)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(276),h=n(r(1)),v=n(r(3)),y=n(r(32)),g=n(r(16)),b=r(37),E=r(725),_=r(25),O=n(r(653)),S=r(735),k=n(r(1144)),C=n(r(755)),R=n(r(1416));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=function(e){(0,s.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).getContainerStatus=function(){var t=(0,g.default)(e.props.detail,"status.containerStatuses")||[],a=0;return t.forEach((function(e){e.ready&&(a+=1)})),{readyCount:a,total:t.length}},e.getUpdateStatus=function(){if(!e.isRunning){var a=e.status,r=a.name,n=a.type;return p.default.createElement(C.default,{status:n,reason:r,data:e.props.detail,type:"pod"})}return p.default.createElement("p",null,t("CREATED_TIME",{diff:(0,b.getLocalTime)(e.props.detail.createTime).format("YYYY-MM-DD HH:mm:ss")}))},e.getLink=function(){var t=e.props.detail;return"".concat(e.props.prefix,"/projects/").concat(t.namespace,"/pods/").concat(t.name)},e.getMonitoringCfgs=function(e){return[{type:"cpu",title:"CPU",unitType:"cpu",legend:["USED"],data:[e.cpu],bgColor:"transparent"},{type:"memory",title:"MEMORY",unitType:"memory",legend:["USED"],data:[e.memory],bgColor:"transparent"}]},e.getNodeContent=function(){var a=e.props.detail,r=a.cluster,n=a.node,l=a.nodeIp,u=globals.app.hasPermission({cluster:r,module:"nodes",action:"view"});if(!n)return"-";var o=t("NODE_IP",{node:n,ip:l});return u?p.default.createElement(m.Link,{to:"/clusters/".concat(r,"/nodes/").concat(n)},o):o},e.handleExpandExtra=function(){var t=e.props,a=t.detail;(0,t.onExpand)(a.uid)},e.handleLinkClick=function(){localStorage.setItem("pod-detail-referrer",location.pathname)},e.renderPodIPContent=function(e){return p.default.createElement("div",{className:R.default.ipTip},p.default.createElement("div",null,t("POD_IP_ADDRESS")),p.default.createElement("ul",null,e.map((function(e){return p.default.createElement("li",{key:e},p.default.createElement(_.Icon,{name:"ip",size:20,type:"light"}),p.default.createElement("span",null,e))}))))},e}return(0,c.default)(r,[{key:"renderStatusTip",value:function(){var e=this.props.detail.name,a=this.status,r=a.type,n=a.name,l=this.getContainerStatus(),u=l.readyCount,o=l.total;return p.default.createElement(_.Tooltip,{content:p.default.createElement("div",{className:R.default.statusTip},p.default.createElement("strong",null,e),p.default.createElement("p",null,t("READY_VALUE",{readyCount:u,total:o})),p.default.createElement("p",null,t("STATUS_VALUE",{value:t(n)})))},p.default.createElement(O.default,{className:R.default.indicator,type:r,flicker:!0}))}},{key:"renderMonitorings",value:function(){var e=this.props,a=e.metrics,r=void 0===a?{}:a,n=e.isExpand;if(e.loading)return p.default.createElement("div",{className:R.default.monitors},t("LOADING"));if((0,y.default)(r.cpu)&&(0,y.default)(r.memory))return p.default.createElement("div",{className:R.default.monitors},t("NO_MONITORING_DATA"));var l=this.getMonitoringCfgs(r);return p.default.createElement("div",{className:R.default.monitors},p.default.createElement("div",{className:R.default.charts},l.map((function(e){var t=(0,E.getAreaChartOps)(e);return p.default.createElement(S.TinyArea,(0,o.default)({key:e.type,width:"50%",height:40},t,{darkMode:n}))}))))}},{key:"renderContent",value:function(){var e=this.props,a=e.prefix,r=e.detail,n=r.name,l=r.podIp,u=e.isExpand;return p.default.createElement("div",{className:R.default.content},p.default.createElement("div",{className:R.default.text},p.default.createElement("div",null,a?p.default.createElement(m.Link,{to:this.getLink()},p.default.createElement("span",{onClick:this.handleLinkClick},n)):n),this.getUpdateStatus()),!(-1!==location.pathname.indexOf("/nodes"))&&p.default.createElement("div",{className:R.default.text},p.default.createElement("div",null,this.getNodeContent()),p.default.createElement("p",null,t("NODE"))),p.default.createElement("div",{className:R.default.text},p.default.createElement("div",null,p.default.createElement("span",null,l||"-"),!(0,y.default)(this.networkIPs)&&this.networkIPs.length>1&&p.default.createElement(_.Tooltip,{content:this.renderPodIPContent(this.networkIPs)},p.default.createElement("div",{className:R.default.podip},this.networkIPs.length))),p.default.createElement("p",null,t("POD_IP_ADDRESS_SCAP"))),this.renderMonitorings(),p.default.createElement("div",{className:R.default.arrow},p.default.createElement(_.Icon,{name:"chevron-down",type:u?"light":"",size:20})))}},{key:"renderExtraContent",value:function(){var e=this,a=this.props.prefix,r=this.props.detail,n=r.cluster,l=r.containers,u=void 0===l?[]:l,o=r.initContainers,i=void 0===o?[]:o,c=r.name;return(0,y.default)(u)?null:p.default.createElement("div",{className:R.default.itemExtra},p.default.createElement("div",{className:"margin-b8"},p.default.createElement("strong",null,t("CONTAINER_PL"))),p.default.createElement("div",{className:R.default.containers},u.map((function(t){return p.default.createElement(k.default,{key:t.name,prefix:a&&e.getLink(),podName:c,detail:t,cluster:n,onContainerClick:e.handleLinkClick,isCreating:e.isCreating})})),i.map((function(t){return p.default.createElement(k.default,{key:t.name,prefix:a&&e.getLink(),podName:c,detail:t,cluster:n,onContainerClick:e.handleLinkClick,isCreating:e.isCreating,isInit:!0})}))))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.isExpand;return p.default.createElement("div",{className:(0,v.default)(R.default.item,t,(0,u.default)({},R.default.expanded,a))},p.default.createElement("div",{className:R.default.itemMain,onClick:this.handleExpandExtra},p.default.createElement("div",{className:R.default.icon},p.default.createElement(_.Icon,{name:"pod",size:40,type:a?"light":"dark"}),this.renderStatusTip()),this.renderContent()),this.renderExtraContent())}},{key:"status",get:function(){var e=this.props.detail.podStatus,t=e.status;return{type:e.type.toLowerCase(),name:t}}},{key:"isCreating",get:function(){return"warning"===this.status.type&&"ContainerCreating"===this.status.name}},{key:"isRunning",get:function(){return"running"===this.status.type||"completed"===this.status.type}},{key:"networkIPs",get:function(){return this.props.detail.networksStatus.reduce((function(e,t){return t.ips?[].concat((0,l.default)(e),(0,l.default)(t.ips)):(0,l.default)(e)}),[])}}]),r}(p.default.PureComponent);a.default=P,P.propTypes={className:h.default.string,prefix:h.default.string,detail:h.default.object,metrics:h.default.object,loading:h.default.bool,isExpand:h.default.bool,onExpand:h.default.func},P.defaultProps={prefix:"",detail:{},isExpand:!1,onExpand:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(16)),d=n(r(274)),p=n(r(741)),m=n(r(802)),h=n(r(1110)),v=r(1),y=n(r(2818));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,o.default)(r,e);var a=g(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this.props.container,t=e.namespace,a=e.name,r=this.props.podName,n=this.context,l=n.gatewayName,u=n.gatewayNs,o=n.cluster||this.props.cluster;return(0,f.default)(this.props,"container.containerID")?s.default.createElement(h.default,{className:y.default.containerLog,contentClassName:y.default.containerLogContent,namespace:t,podName:r,cluster:o,containerName:a,gatewayName:l,gatewayNamespace:u}):s.default.createElement(p.default,null,s.default.createElement(m.default,{desc:"CONTAINER_LOGS_NOT_SUPPORTED"}))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return s.default.createElement(d.default,{bodyClassName:y.default.body,title:t("CONTAINER_LOGS"),visible:a,onCancel:r,fullScreen:!0,hideFooter:!0},this.renderContent())}}]),r}(s.default.Component);a.default=b,b.contextTypes={gatewayName:v.PropTypes.string,gatewayNs:v.PropTypes.string,cluster:v.PropTypes.string}},function(e,t,a){e.exports={body:"_2xIpWv0eUy2KqNf-tYtdAs",containerLog:"-vLGgh65xBp9j5muKQxTD",containerLogContent:"dnH0_IiFyYfpYfmg1hgpq"}},function(e,t,a){e.exports={content:"_39OJSr_1I0ySWE5IDXTgPS",table:"_2siFIGV4OlLNAn6cC6ip6o"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(71)),c=n(r(56)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(70),y=n(r(1)),g=n(r(3)),b=n(r(68)),E=n(r(926)),_=r(25),O=n(r(741)),S=r(725),k=n(r(2821));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R=(0,v.observer)((o=u=function(e){(0,d.default)(r,e);var a=C(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).getValue=function(e,t){var a=(0,S.getSuitableUnit)(e,t),r=(0,S.getValueByUnit)(e,a);return a?"".concat(r," ").concat(a):r},n.getHPAData=function(){var e=n.props.detail,a=e.minReplicas,r=void 0===a?0:a,l=e.maxReplicas,u=void 0===l?0:l,o=e.cpuCurrentUtilization,i=void 0===o?0:o,c=e.cpuTargetUtilization,s=e.memoryCurrentValue,f=void 0===s?0:s,d=e.memoryTargetValue;return[{icon:"chevron-down",name:t("MINIMUM_REPLICAS"),value:r},{icon:"chevron-up",name:t("MAXIMUM_REPLICAS"),value:u},{icon:"cpu",name:t("TARGET_CPU_USAGE"),value:(0,b.default)(c)||""===c?t("NONE"):"".concat(c,"%"),current:"".concat(i,"%")},{icon:"memory",name:t("TARGET_MEMORY_USAGE"),value:(0,b.default)(d)||""===d?t("NONE"):d,current:n.getValue(String(f).endsWith("m")?parseInt(f,10)/1e3:f,"memory")}]},n.getOperations=function(){return[{key:"cancel",icon:"close",text:t("CANCEL"),onClick:n.handleCancel}]},n.handleMoreClick=function(e,t){var a=n.getOperations().find((function(e){return e.key===t})).onClick;a&&a()},n.handleCancel=function(){var e=n.props,a=e.detail,r=e.onDeleted;n.store.delete(a).then((function(){_.Notify.success({content:"".concat(t("Canceled Successfully"))}),r()}))},n.renderCard=function(e){var a=e.icon,r=e.name,n=e.value,l=e.current;return h.default.createElement("div",{key:a,className:k.default.box},h.default.createElement("div",{className:k.default.card},h.default.createElement(_.Icon,{name:a,size:40}),h.default.createElement("div",null,h.default.createElement("div",{className:k.default.name,title:r},r),h.default.createElement("p",{className:k.default.value},l?t("TARGET_CURRENT",{target:n,current:l}):n))))},n.store=e.store||new E.default,n}return(0,f.default)(r,[{key:"renderOperations",value:function(){var e=this.getOperations(),t=h.default.createElement(_.Menu,{onClick:this.handleMoreClick},e.map((function(e){var t=e.icon,a=e.text,r=e.show,n=void 0===r||r,l=(0,c.default)(e,["icon","text","show"]);return n?h.default.createElement(_.Menu.MenuItem,(0,i.default)({key:a},l),t&&h.default.createElement(_.Icon,{name:t,type:"light"})," ",a):null})));return h.default.createElement(_.Dropdown,{theme:"dark",content:t},h.default.createElement(_.Button,{type:"ghost",icon:"more"}))}},{key:"renderContent",value:function(){if(!this.props.detail.name)return null;var e=this.getHPAData();return h.default.createElement("div",{className:k.default.wrapper},e.map(this.renderCard))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.loading,n=this.props.title||t("AUTOSCALING");return h.default.createElement(O.default,{className:(0,g.default)(k.default.main,a),title:n,operations:this.renderOperations(),empty:t("NOT_ENABLE",{resource:t("AUTOSCALING")}),loading:r},this.renderContent())}}]),r}(h.default.Component),u.propTypes={className:y.default.string,title:y.default.string,store:y.default.object,detail:y.default.object,loading:y.default.bool,onDeleted:y.default.func},u.defaultProps={detail:{},loading:!0,onDelete:function(){}},l=o))||l;a.default=R},function(e,t,a){e.exports={wrapper:"_3JO8ALufHH6Th6RsLTg6EB",box:"fJxyscdhUqQ5IqvqrNnv8",card:"_2VT5I0TDMsCwcJ_SuhMM6s",name:"_2QZjb0CkVrOEBHJUBPFnwI",value:"_1d4Yqo0p0_Y6uq8-vShyXl"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(3)),p=n(r(1014)),m=r(735),h=n(r(2823)),v=n(r(1418));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){return Number(e||0)},b=function(e){(0,o.default)(r,e);var a=y(r);function r(e){var t;(0,l.default)(this,r),(t=a.call(this,e)).showConfirm=function(){t.setState({showConfirm:!0},(function(){t.startTimer()}))},t.hideConfirm=function(){t.setState({showConfirm:!1},(function(){t.stopTimer()}))},t.handleCancel=function(){t.setState({desire:t.props.desire},(function(){t.hideConfirm()}))},t.handleConfirm=function(){t.props.onScale(t.state.desire),t.hideConfirm()},t.handleScale=function(e){e>=0&&t.setState({desire:e,seconds:5},(function(){t.showConfirm()}))},t.updateTime=function(){var e=t.state.seconds;t.timer=setTimeout((function(){e>0?t.setState({seconds:e-1},(function(){t.updateTime()})):(t.handleConfirm(),t.handleCancel())}),1e3)},t.startTimer=function(){t.timer&&t.stopTimer(),t.updateTime()},t.stopTimer=function(){clearTimeout(t.timer),t.timer=null};var n=g(e.desire);return t.state={prevPropDesire:n,desire:n,seconds:5,showConfirm:!1},t}return(0,u.default)(r,[{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"renderScaleOperation",value:function(){if(!this.props.onScale)return null;var e=this.state.desire;return s.default.createElement("div",{className:v.default.scale},s.default.createElement(h.default,{value:e,onChange:this.handleScale}))}},{key:"render",value:function(){var e=this.props,a=e.theme,r=e.className,n=e.name,l=e.current,u=this.state,o=u.showConfirm,i=u.seconds,c=u.desire,f=t(n),h=t("REPLICAS_CURRENT"),y=t("REPLICAS_DESIRED");return s.default.createElement("div",{className:(0,d.default)(v.default.card,r,v.default[a])},s.default.createElement("img",{className:v.default.cardImg,src:"/assets/banner-icon-1.svg"}),s.default.createElement("div",{className:v.default.chart},s.default.createElement(m.SimpleCircle,{theme:a,title:f,legend:[h,y],value:l,total:c})),s.default.createElement("div",{className:v.default.status},s.default.createElement("div",{className:v.default.title},f),s.default.createElement("div",{className:v.default.detail},s.default.createElement("p",null,s.default.createElement("label",null,y,":")," ",c),s.default.createElement("p",null,s.default.createElement("label",null,h,":")," ",l))),this.renderScaleOperation(),s.default.createElement(p.default,{visible:o,width:400,title:t("ADJUST_REPLICAS"),content:t.html("REPLICAS_SCALE_NOTIFY_CONTENT",{num:c}),cancelText:t("REPLICAS_SCALE_NOTIFY_CANCEL"),confirmText:t("REPLICAS_SCALE_NOTIFY_CONFIRM",{seconds:i}),onCancel:this.handleCancel,onConfirm:this.handleConfirm}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.desire!==t.prevPropDesire){var a=g(e.desire);return{prevPropDesire:a,desire:a}}return null}}]),r}(s.default.Component);a.default=b,b.propTypes={theme:f.default.string,className:f.default.string,name:f.default.string,current:f.default.number,desire:f.default.number,onScale:f.default.func},b.defaultProps={theme:"dark",name:"REPLICA_PL",current:0,desire:0,onScale:null}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),u=n(a(13)),o=n(a(19)),i=n(a(20)),c=n(a(18)),s=r(a(0)),f=n(a(1)),d=n(a(3)),p=a(58),m=a(25),h=n(a(1418));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(a,e);var t=v(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).handlePlusOne=function(){var t=e.props,a=t.value,r=t.onChange;r&&r(a+1)},e.handleMinusOne=function(){var t=e.props,a=t.value,r=t.onChange;r&&r(a-1)},e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props.className,t={primary:p.COLORS_MAP.white,secondary:p.COLORS_MAP.white};return s.default.createElement("div",{className:(0,d.default)(h.default.control,e)},s.default.createElement(m.Icon,{className:h.default.add,name:"add",size:24,color:t,onClick:this.handlePlusOne,clickable:!0}),s.default.createElement(m.Icon,{className:h.default.substract,name:"substract",size:24,color:t,onClick:this.handleMinusOne,clickable:!0}))}}]),a}(s.PureComponent);y.propTypes={className:f.default.string,value:f.default.number,onChange:f.default.func};var g=y;t.default=g},function(e,t,a){e.exports={replica:"_3G_IICHXPaEZnKviLHJ0yb",replicaCount:"_9_JUYIFMisim9_h_gSVcF"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),u=n(r(50)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(16)),m=r(25),h=n(r(723)),v=n(r(823)),y=n(r(927)),g=n(r(186)),b=n(r(2826)),E=n(r(2828)),_=n(r(2830)),O=n(r(1419));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=function(e){(0,c.default)(r,e);var a=S(r);function r(e){var n;(0,o.default)(this,r),(n=a.call(this,e)).showRerun=function(){n.setState({showRerun:!0})},n.hideRerun=function(){n.setState({showRerun:!1})},n.handleCurrentBuilderChange=function(e){n.setState({currentBuilderName:e,builderDetail:{},runDetail:{}}),n.fetchData(e)},n.fetchData=function(){var e=(0,u.default)(l.default.mark((function e(t){var a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getBuilderDetail(t);case 2:a=e.sent,(r=(0,p.default)(a,"status.lastRunName"))&&n.getRunDetail(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getBuilderDetail=function(){var e=(0,u.default)(l.default.mark((function e(t){var a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.namespace,e.next=3,n.builderStore.fetchDetail({cluster:n.cluster,name:t,namespace:a});case 3:if(r=e.sent,"NotFound"!==(0,p.default)(r,"_originData.reason","")){e.next=7;break}return n.setState({notFound:!0}),e.abrupt("return");case 7:return n.setState({builderDetail:r}),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getRunDetail=function(){var e=(0,u.default)(l.default.mark((function e(t){var a,r,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.namespace,n.setState({getRunDetailLoading:!0}),clearTimeout(n.refreshTimer),r=(0,p.default)(n.state.builderDetail,"status.lastRunName"),e.next=6,n.runStore.fetchRunDetail({namespace:a,runName:t||r});case 6:u=e.sent,"running"===(0,p.default)(u,"status","")&&(n.refreshTimer=setTimeout(n.getRunDetail,4e3)),n.setState({runDetail:u,getRunDetailLoading:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleRerun=function(){var e=(0,u.default)(l.default.mark((function e(t){var a,r,u,o,i;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.newTag,r=t.isUpdateWorkload,u=n.props.namespace,o=n.state.currentBuilderName,clearTimeout(n.refreshTimer),e.next=6,n.builderStore.rerun({cluster:n.cluster,newTag:a,name:o,namespace:u,isUpdateWorkload:r});case 6:i=e.sent,n.setState({runDetail:g.default.s2iruns(i),getRunDetailLoading:!1,showRerun:!1}),setTimeout((function(){n.fetchData(o)}),1e3);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderBuilderSelect=function(){var e=n.props.builderNames;if(1===e.length)return null;var t=e.map((function(e){return{label:e,value:e}}));return d.default.createElement(m.Select,{className:O.default.builderSelector,onChange:n.handleCurrentBuilderChange,options:t,defaultValue:t[0]})},n.renderLog=function(){var e=n.state.runDetail,a=e.logURL,r=e.status;return!a&&"Running"===r?d.default.createElement("div",{className:O.default.title},d.default.createElement(m.Loading,{size:"16"}),d.default.createElement("p",null,t("Task"),d.default.createElement("span",{className:O.default.taskName},n.state.currentBuilderName),t("is Building"))):a?d.default.createElement(_.default,{onRerun:n.showRerun,runDetail:n.state.runDetail,builderName:n.state.currentBuilderName}):null};var i=e.builderNames;return n.state={builderDetail:{},runDetail:{},getRunDetailLoading:!0,currentBuilderName:i[0],showRerun:!1,notFound:!1},n.refreshTimer=null,n.builderStore=new v.default,n.runStore=new y.default,n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.builderNames;this.fetchData(e[0])}},{key:"componentWillUnmount",value:function(){clearTimeout(this.refreshTimer)}},{key:"render",value:function(){var e=this.props.className,a=(0,p.default)(this.state.builderDetail,"spec.config");return this.state.notFound?null:d.default.createElement(h.default,{title:t("Building Image"),operations:this.renderBuilderSelect()},d.default.createElement(b.default,{config:a,className:e}),this.renderLog(),d.default.createElement(E.default,{detail:this.state.builderDetail,visible:this.state.showRerun,onOk:this.handleRerun,onCancel:this.hideRerun}))}},{key:"cluster",get:function(){return this.props.cluster}}]),r}(d.default.Component);a.default=k,k.defaultProps={builderNames:[]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(3)),d=r(25),p=r(37),m=n(r(2827));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.className,a=this.props.config,r=a.sourceUrl,n=a.builderImage;return s.default.createElement("ul",{className:(0,f.default)(m.default.builderContent,e)},s.default.createElement("li",null,s.default.createElement("span",{className:m.default.icon},s.default.createElement(d.Icon,{name:"resource",size:24})),s.default.createElement("div",{className:m.default.info},s.default.createElement("p",{className:m.default.value},r),s.default.createElement("p",{className:m.default.name},t("sourceUrl")))),s.default.createElement("li",null,s.default.createElement("span",{className:m.default.icon,style:{backgroundImage:"url('/assets/".concat((0,p.getLanguageName)(n),".png')")}}),s.default.createElement("div",{className:m.default.info},s.default.createElement("p",{className:m.default.value},n),s.default.createElement("p",{className:m.default.name},t("builderImage")))))}}]),r}(s.default.Component);a.default=v,v.defaultProps={config:{sourceUrl:"-",builderImage:"-"}}},function(e,t,a){e.exports={builderContent:"_3DpW67GJGs2Gb6D-93UKPo",icon:"_3LFug2tzzY1kHA_1173DAt",info:"_2jSdddSOMXZckY3OS8O85m",value:"_2x4ZpbzfKuDD9aaVb2Wotd",name:"_20yCefRh6x4aKwgFIRqr-i"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=n(r(274)),m=n(r(2829));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).handleOk=function(){var e=n.props.onOk;n.form&&e((n.form.current||{}).getData())},n.renderEnableUpdate=function(){return s.default.createElement("div",{className:m.default.checkboxCard},s.default.createElement("label",null,s.default.createElement(d.Form.Item,null,s.default.createElement(d.Checkbox,{name:"isUpdateWorkload",defaultValue:!0},s.default.createElement("span",{name:!0,className:m.default.title},t("S2I_UPDATE_WORKLOAD"))))),s.default.createElement("p",{className:m.default.desc},t("S2I_UPDATA_WORKLOAD_DESC")))},n.form=s.default.createRef(),n}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.detail;return s.default.createElement(p.default.Form,{formRef:this.form,width:691,title:t("RERUN"),icon:"cdn",onOk:this.handleOk,okText:t("RERUN"),onCancel:n,visible:a,isSubmitting:r},s.default.createElement(d.Form.Item,{label:t("Repo Url")},s.default.createElement(d.Input,{name:"url",defaultValue:l.sourceUrl,readOnly:!0})),s.default.createElement(d.Form.Item,{label:t("New Tag")},s.default.createElement(d.Input,{name:"newTag",placeholder:t("NEW_TAG_DESC")})),this.renderEnableUpdate())}}]),r}(s.default.Component);a.default=v,v.propTypes={visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},v.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1,url:""}},function(e,t,a){e.exports={checkboxCard:"_3wxm3DEIOEe4v6xdFReBye",title:"_26pG1CikYNMzdp9U94PFLW",desc:"_2Sc0rL4k31BwYdF62NJ-VX"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(49)),c=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(70),y=n(r(93)),g=n(r(3)),b=r(25),E=n(r(802)),_=n(r(927)),O=n(r(1419));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var k=(0,v.observer)((o=u=function(e){(0,d.default)(r,e);var a=S(r);function r(){var e;return(0,s.default)(this,r),(e=a.call(this)).toggleLog=function(){e.state.showLog?e.setState({showLog:!1}):e.setState({showLog:!0})},e.getLog=(0,c.default)(i.default.mark((function t(){var a,r,n,l,u,o;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.runDetail,r=a.logURL,n=a.status,l=a.cluster,u=e.store.logData,o="Building"===n||"Unknown"===n,clearTimeout(e.refreshTimer),r){t.next=7;break}return e.refreshTimer=setTimeout(e.getLog,4e3),t.abrupt("return");case 7:return t.next=9,e.store.getLog(r,l);case 9:if(e.handleScrollToBottom(),!u.hasMore){t.next=13;break}return e.getLog(),t.abrupt("return");case 13:o&&(e.refreshTimer=setTimeout(e.getLog,4e3));case 14:case"end":return t.stop()}}),t)}))),e.handleScrollToBottom=function(){var t=e.LogContent.current;t&&(t.scrollTop=t.scrollHeight)},e.handleRerun=function(){(0,e.props.onRerun)()},e.renderTitle=function(){var a=e.props.runDetail.status,r=e.props,n=r.builderName,l=r.onRerun;return"Successful"===a?h.default.createElement(h.default.Fragment,null,h.default.createElement("span",{className:(0,g.default)(O.default.icon,O.default.successful)}),h.default.createElement("p",null,h.default.createElement("span",{className:O.default.taskName},n),t("building logs"))):"Building"===a?h.default.createElement(h.default.Fragment,null,h.default.createElement("span",{className:(0,g.default)(O.default.icon,O.default.running)}),h.default.createElement("p",null,t("Task"),h.default.createElement("span",{className:O.default.taskName},n),t("is Building"))):"Failed"===a?h.default.createElement(h.default.Fragment,null,h.default.createElement("span",{className:(0,g.default)(O.default.icon,O.default.failed)}),h.default.createElement("p",null,t("Task"),h.default.createElement("span",{className:O.default.taskName},n),t("is Failed"),(0,y.default)(l)?h.default.createElement(b.Tooltip,{content:t("Rebuild Image")},h.default.createElement(b.Icon,{name:"refresh",onClick:e.handleRerun})):null)):h.default.createElement(h.default.Fragment,null,h.default.createElement("span",{className:(0,g.default)(O.default.icon,O.default.unknow)}),h.default.createElement("p",null,h.default.createElement("span",{className:O.default.taskName},n),t("building logs")))},e.state={showLog:!0,isContainerPending:!1,noModuleMsg:null},e.store=new _.default,e.refreshTimer=null,e.LogContent=h.default.createRef(),e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){globals.app.hasKSModule("logging")?this.getLog():(this.store.logData.isLoading=!1,this.setState({noModuleMsg:t("The logging module is not installed.")}))}},{key:"componentWillUnmount",value:function(){this.setState({noModuleMsg:null}),clearTimeout(this.refreshTimer)}},{key:"renderLog",value:function(){var e=this.store.logData.log,a=this.props.runState,r=this.state.noModuleMsg;return e?h.default.createElement("pre",{ref:this.LogContent},r||e||t("LOADING_DOTS")):"Running"===a||"Unknown"===a?h.default.createElement(b.Loading,null,h.default.createElement("p",{className:O.default.noneLogDesc})):h.default.createElement("p",{className:O.default.noneLogDesc},t("No log records"))}},{key:"render",value:function(){return this.state.isContainerPending?h.default.createElement("div",{className:O.default.logContainer},h.default.createElement(E.default,{desc:"CONTAINER_LOGS_NOT_SUPPORTED"})):h.default.createElement("div",{className:O.default.logContainer},h.default.createElement("div",{className:O.default.title,onClick:this.toggleLog},this.renderTitle(),h.default.createElement(b.Icon,{name:this.state.showLog?"chevron-up":"chevron-down",size:20})),this.state.showLog?this.renderLog():null)}}]),r}(h.default.Component),u.defaultProps={logURL:"",runState:""},l=o))||l;a.default=k},function(e,t,a){e.exports={clusters:"xF_24T-co1tk69vfD8NlA",cluster:"OOBjMvCwafQ2eHDRLYHJR"}},function(e,t,a){e.exports={deployment_codeResource:"W_sDs3V-kZQxe0O-hub-Z"}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),u=n(a(136)),o=n(a(12)),i=n(a(13)),c=n(a(19)),s=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(1)),m=n(a(651)),h=a(25),v=a(1420),y=a(3676);a(2836);var g=n(a(2837));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=function(e){(0,c.default)(a,e);var t=_(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={mode:"line-by-line",diffHtml:e.getDiffHtml(e.props.datas)},e.handleModeChange=function(t){return function(){return e.setState({mode:t,diffHtml:e.getDiffHtml(e.props.datas,{outputFormat:t})})}},e}return(0,i.default)(a,[{key:"getDiffHtml",value:function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(0,v.createPatch)("yaml",a,r,"","",{context:-1}),o=(0,y.parse)(l);return(0,y.html)(o,E({drawFileList:!1},n))}},{key:"componentDidUpdate",value:function(e){(0,m.default)(e.datas,this.props.datas)||this.setState({diffHtml:this.getDiffHtml(this.props.datas,{outputFormat:this.state.mode})})}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.description;return d.default.createElement("div",null,d.default.createElement("div",{className:g.default.header},d.default.createElement(h.Icon,{name:"terminal",size:20}),d.default.createElement("span",null,t),d.default.createElement(h.Icon,{name:"chevron-down",clickable:!0,size:20,onClick:this.handleModeChange("line-by-line")}),d.default.createElement(h.Icon,{name:"chevron-right",clickable:!0,size:20,onClick:this.handleModeChange("side-by-side")}),d.default.createElement("span",{className:"float-right"},a)),d.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.diffHtml}}))}}]),a}(d.Component);t.default=O,O.propTypes={title:p.default.string,datas:p.default.arrayOf(p.default.string)},O.defaultProps={datas:["",""]}},,,function(e,t,a){},function(e,t,a){e.exports={header:"_21by05Ap1WqFl6ETG7MnQY"}},function(e,t,a){e.exports={header:"_1O9lrtOWxJdpIuBxJLt2lX",diffWrapper:"rJcIkfzIkKyVB8RM7xFBo"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(109)),o=n(r(12)),i=n(r(13)),c=n(r(135)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(3)),v=n(r(32)),y=n(r(16)),g=n(r(851)),b=n(r(820)),E=r(37),_=r(58),O=r(725),S=r(25),k=n(r(802)),C=n(r(1148));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var w=function(e){(0,s.default)(r,e);var a=R(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).getItemName=function(e){return(0,y.default)(e,"metric.pod","-")},n.getCurrentValue=function(e){var t=n.props.config,a=t.type,r=t.unitType;return(0,O.getSuitableValue)((0,y.default)(e,"value[1]"),r||a)},n.handleScroll=function(e){var t=e.target,a=t.clientHeight,r=t.scrollHeight,l=a+t.scrollTop===r,u=n.props,o=u.data,i=u.page,c=u.total,s=u.onFetch;!n.scrolling&&c!==o.length&&l&&(n.scrolling=!0,s({more:!0,page:i+1}).then((function(){n.scrolling=!1})))},n.toggleChecked=function(e){n.setState({showChecked:e})},n.handleCheck=function(e){var a=n.getItemName(e);return(0,E.cacheFunc)("_resource_".concat(a),(function(){var e=n.props.maxChecked,r=(0,u.default)(n.props.checked);r.includes(a)?(0,g.default)(r,(function(e){return e===a})):r.length>=e?S.Notify.info({content:t("MONITORING_SELECT_LIMIT_MSG")}):r.push(a),n.props.onChange(r)}),(0,c.default)(n))},n.renderResourceItem=function(e){var a=n.props.checked,r=n.getItemName(e),l=n.getCurrentValue(e);return p.default.createElement("div",{key:r,className:C.default.item,onClick:n.handleCheck(e)},p.default.createElement(S.Checkbox,{className:C.default.itemCheck,checked:a.includes(r)}),p.default.createElement(S.Icon,{name:n.icon,size:16}),p.default.createElement("div",{className:C.default.itemInfo},p.default.createElement("strong",{title:r},r),p.default.createElement("p",null,t("CURRENT_VALUE",{value:l}))))},n.renderResourceList=function(e){return(0,v.default)(e)?p.default.createElement(k.default,null):e.map(n.renderResourceItem)},n.state={showChecked:!1},n.listRef=p.default.createRef(),n.throttleScroll=(0,b.default)(n.handleScroll,100),n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.listNode=this.listRef.current,this.listNode&&this.listNode.addEventListener("scroll",this.throttleScroll)}},{key:"componentWillUnmount",value:function(){this.listNode&&this.listNode.removeEventListener("scroll",this.throttleScroll)}},{key:"render",value:function(){var e=this.props,a=e.loading,r=e.name,n=this.state.showChecked,u=n?this.checkedData:this.props.data;return p.default.createElement("div",{className:C.default.resources},p.default.createElement("div",{className:C.default.title},p.default.createElement("strong",null,t(r.toUpperCase())),p.default.createElement(S.Checkbox,{checked:n,onChange:this.toggleChecked},t("SHOW_SELECTED_ONLY"))),p.default.createElement("div",{className:C.default.content},p.default.createElement(S.Loading,{spinning:a},p.default.createElement("div",{className:C.default.list},p.default.createElement("div",{className:(0,h.default)((0,l.default)({},C.default.hide,!n))},this.renderResourceList(u)),p.default.createElement("div",{className:(0,h.default)((0,l.default)({},C.default.hide,n)),ref:this.listRef},this.renderResourceList(u))))))}},{key:"icon",get:function(){return _.ICON_TYPES[this.props.name.toLowerCase()]||"appcenter"}},{key:"checkedData",get:function(){var e=this,t=this.props,a=t.checked;return t.data.filter((function(t){return a.includes(e.getItemName(t))}))}}]),r}(p.default.Component);a.default=w,w.propTypes={loading:m.default.bool,config:m.default.object,name:m.default.string,maxChecked:m.default.number,page:m.default.number,total:m.default.number,checked:m.default.array,data:m.default.array,onFetch:m.default.func,onChange:m.default.func},w.defaultProps={loading:!1,config:{},name:"Resources",maxChecked:10,page:1,total:0,checked:[],data:[],onFetch:function(){},onChange:function(){}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(21)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(16)),m=r(a(32)),h=a(725),v=a(25),y=r(a(802)),g=a(735),b=r(a(1148));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=function(e){(0,i.default)(a,e);var t=O(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getItemName=function(e){return(0,p.default)(e,"metric.pod","-")},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,r=t.config,l=t.data;return f.default.createElement("div",{className:b.default.charts},f.default.createElement(v.Loading,{spinning:a},f.default.createElement("div",{className:b.default.list},(0,m.default)(l)?f.default.createElement(y.default,null):l.map((function(t){var a=e.getItemName(t),l=(0,h.getAreaChartOps)(_(_({},r),{},{legend:[r.legend||"-"],data:[t]}));return(0,m.default)(l.data)?null:f.default.createElement("div",{key:a,className:b.default.item},f.default.createElement("div",{className:b.default.title},a),f.default.createElement(g.SimpleArea,(0,n.default)({width:"100%"},l)))})))))}}]),a}(f.default.Component);t.default=S,S.propTypes={loading:d.default.bool,config:d.default.object,data:d.default.array},S.defaultTypes={loading:!1,config:{},data:[]}},function(e,t,a){e.exports={item:"_3ZoGRWv7aLT1samH8rijDQ",more:"_2fsnc5eZsgjIapsZmS6S2F"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(919)),o=r(a(765)),i=r(a(1146)),c=r(a(1147)),s=r(a(2843));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:s.default,exact:!0},{path:"".concat(e,"/revision-control"),title:"REVISION_RECORDS",component:i.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:c.default,exact:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(49)),u=r(a(50)),o=r(a(12)),i=r(a(13)),c=r(a(19)),s=r(a(20)),f=r(a(18)),d=r(a(0)),p=a(70),m=r(a(16)),h=a(964),v=r(a(1149)),y=r(a(2844));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=(0,p.inject)("detailStore")(n=(0,p.observer)(n=function(e){(0,c.default)(a,e);var t=g(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).resourceStore=new v.default,e.fetchData=(0,u.default)(l.default.mark((function t(){var a,r,n,u;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.store.detail,r=a.cluster,n=a.namespace,u={name:e.serviceName,cluster:r,namespace:n},t.next=4,e.resourceStore.checkService(u);case 4:if(!e.resourceStore.isExistService){t.next=7;break}return t.next=7,e.resourceStore.fetchService(u);case 7:case"end":return t.stop()}}),t)}))),e}return(0,i.default)(a,[{key:"renderServices",value:function(){var e=this.resourceStore,t=e.service,a=e.isLoading;return t.name?d.default.createElement(y.default,{prefix:this.prefix,service:t,loading:a}):null}},{key:"renderContent",value:function(){return d.default.createElement("div",null,this.renderPlacement(),this.renderReplicaInfo(),this.renderServices(),this.renderContainerPorts(),this.renderPods())}},{key:"serviceName",get:function(){return(0,m.default)(this.store.detail,"spec.serviceName","")}}]),a}(h.Component))||n)||n;t.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(276),d=n(r(1)),p=n(r(3)),m=n(r(32)),h=n(r(16)),v=r(58),y=r(25),g=n(r(723)),b=n(r(2845));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,o.default)(r,e);var a=E(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this.props,a=e.service,r=e.prefix;if((0,m.default)(a))return null;var n=a.name,l=a.type;return s.default.createElement("div",{className:b.default.item},s.default.createElement(y.Icon,{className:b.default.icon,name:v.ICON_TYPES.services,size:40}),s.default.createElement("div",{className:b.default.info},s.default.createElement("div",{className:b.default.base},s.default.createElement("strong",null,s.default.createElement(f.Link,{to:"".concat(r,"/services/").concat(n)},n)),s.default.createElement("p",null,t(l))),s.default.createElement("div",{className:b.default.ports},s.default.createElement("div",{className:b.default.record},s.default.createElement("label",null,t("PORT_PL"),":"),s.default.createElement("div",{className:b.default.text},this.ports.map((function(e,t){return s.default.createElement("p",{key:t},e)})))))))}},{key:"render",value:function(){var e=this.props.className,a=this.props.title||t("SERVICE_PL");return s.default.createElement(g.default,{className:(0,p.default)(b.default.main,e),title:a},this.renderContent())}},{key:"ports",get:function(){return(0,h.default)(this.props.service,"ports",[]).map((function(e){var t=e.targetPort?":".concat(e.targetPort):"";return"".concat(e.port).concat(t,"/").concat(e.protocol)}))}}]),r}(s.default.Component);a.default=_,_.propTypes={className:d.default.string,title:d.default.string,service:d.default.object,loading:d.default.bool},_.defaultProps={service:{},loading:!0}},function(e,t,a){e.exports={item:"_1_STng2AHGqr76kfe5Nfqk",info:"_2yhfTW1jRq7uEbHqYgl0ed",record:"_1EGxE8KTBoHxD-DpxTiZce",text:"_2_sgXd991Ng0yD4yFsnetb",base:"_3m_C0ckKcQBa3N2VBMfHdL"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(919)),o=r(a(765)),i=r(a(1147)),c=r(a(1146)),s=r(a(2847));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:s.default,exact:!0},{path:"".concat(e,"/revision-control"),title:"REVISION_RECORDS",component:c.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:i.default,exact:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=a(70),f=a(964);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var p=(0,s.inject)("detailStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=d(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"enableScaleReplica",get:function(){return null}}]),a}(f.Component))||n)||n;t.default=p},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(919)),o=r(a(765)),i=r(a(2849)),c=r(a(2850));t.default=function(e){return[{path:"".concat(e,"/records"),title:"RUN_RECORDS",component:c.default,exact:!0},{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:i.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/records"),exact:!0})]}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=a(70),d=a(964);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var m=(0,f.inject)("detailStore")(n=(0,f.observer)(n=function(e){(0,o.default)(a,e);var t=p(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"renderContent",value:function(){return s.default.createElement("div",null,this.renderContainerPorts(),this.renderPods())}}]),a}(d.Component))||n)||n;t.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=r(37),v=r(25),y=n(r(741)),g=n(r(729)),b=n(r(2851));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,m.inject)("rootStore","detailStore","recordStore")(l=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=O(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).fetchData=function(e){n.recordStore&&n.recordStore.fetchExcuteRecords(_(_({},e),n.props.match.params))},n.getColumns=function(){return[{title:t("SN_NO"),dataIndex:"id",width:"7%"},{title:t("STATUS"),dataIndex:"status",width:"19%",render:function(e,a){return d.default.createElement(g.default,{type:e,name:t("JOB_".concat(e.toUpperCase())),ready:a.succeed,total:a.desire})}},{title:t("MESSAGE"),dataIndex:"messages[0]",render:function(e){return e||"-"}},{title:t("START_TIME"),dataIndex:"start-time",render:function(e){return(0,h.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}},{title:t("END_TIME"),dataIndex:"completion-time",render:function(e){return!e||/^0001-01-01/.test(e)?"-":(0,h.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.handleSearch=function(e){n.fetchData(e)},n.handlePagination=function(e){n.fetchData({page:e})},n.handleRefresh=function(){n.fetchData()},n.renderTableTitle=function(){return d.default.createElement("div",{className:b.default.nav},d.default.createElement(v.Columns,null,d.default.createElement(v.Column,null,d.default.createElement(v.InputSearch,{name:"search",placeholder:t("SEARCH"),onSearch:n.handleSearch}))))},n.renderTableFooter=function(){var e=n.excute,a=e.total,r=e.page,l=e.limit;return d.default.createElement(v.Level,null,d.default.createElement(v.LevelLeft,null,t("TOTAL_ITEMS",{num:a})),d.default.createElement(v.LevelRight,null,d.default.createElement(v.Pagination,{page:r,total:a,limit:l,onChange:n.handlePagination})))},n.fetchData(),n.disposer=(0,p.reaction)((function(){return n.store.detail}),(function(){return n.fetchData()})),n}return(0,i.default)(r,[{key:"store",get:function(){return this.props.detailStore}},{key:"recordStore",get:function(){return this.props.recordStore}},{key:"excute",get:function(){return(0,p.toJS)(this.recordStore.excute)}}]),(0,i.default)(r,[{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer()}},{key:"renderTable",value:function(){var e=this.excute,t=e.data,a=e.isLoading;return d.default.createElement(v.Table,{rowKey:"uid",className:b.default.table,dataSource:t,columns:this.getColumns(),loading:a})}},{key:"render",value:function(){return d.default.createElement(y.default,{className:b.default.main,title:t("RUN_RECORDS"),operations:d.default.createElement(v.Button,{icon:"refresh",type:"flat",onClick:this.handleRefresh})},d.default.createElement("div",{className:b.default.content},this.renderTable()))}}]),r}(d.default.Component))||l)||l;a.default=S},function(e,t,a){e.exports={table:"_10PRl4Sm2Wh5lsfpvZW5mF",content:"_1EReFhCHZwd2laCX8SNkzJ"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(765)),o=r(a(2853));t.default=function(e){return[{path:"".concat(e,"/records"),title:"RUN_RECORDS",component:o.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/records"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=r(276),v=n(r(16)),y=r(37),g=r(289),b=n(r(1426)),E=n(r(736)),_=r(25),O=n(r(741)),S=n(r(729)),k=n(r(2854));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var P=(0,m.inject)("rootStore","detailStore")(l=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=w(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).fetchData=function(e){var t=(0,p.toJS)(n.store.detail),a=t.cluster,r=t.namespace,l=(0,v.default)(t,"spec.jobTemplate.metadata.labels",{});n.recordStore.fetchListByK8s(R(R({},e),{},{cluster:a,namespace:r,selector:l}))},n.getColumns=function(){return[{title:t("JOB"),dataIndex:"name",width:"19%",render:function(e){return d.default.createElement(h.Link,{className:"item-name",to:"".concat(n.prefix,"/jobs/").concat(e)},e)}},{title:t("STATUS"),dataIndex:"status",width:"19%",render:function(e,a){var r=(0,g.getJobStatus)(a);return d.default.createElement(S.default,{type:r,name:t(r)})}},{title:t("START_TIME"),dataIndex:"status.startTime",render:function(e){return(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}},{title:t("END_TIME"),dataIndex:"status.completionTime",render:function(e,t){var a=(0,v.default)(t,"status.conditions[0].lastProbeTime");return e?(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):a?(0,y.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss"):"-"}},{render:function(e){return d.default.createElement(_.Button,{icon:"refresh",type:"flat",onClick:n.handleRerun(e)})}}]},n.handleRerun=function(e){return function(){n.imitateJobsStore.rerun(e).then((function(){n.fetchData()}))}},n.recordStore=e.recordStore||new b.default,n.imitateJobsStore=new E.default("jobs"),n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderTable",value:function(){var e=this.recordStore.list,t=e.data,a=e.isLoading;return d.default.createElement(_.Table,{className:k.default.table,dataSource:(0,p.toJS)(t),columns:this.getColumns(),loading:a})}},{key:"render",value:function(){return d.default.createElement(O.default,{className:k.default.main,title:t("RUN_RECORDS")},d.default.createElement("div",{className:k.default.content},this.renderTable()))}},{key:"store",get:function(){return this.props.detailStore}},{key:"params",get:function(){return this.props.match.params}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return"".concat(a?"/".concat(a):"","/clusters/").concat(t,"/projects/").concat(r)}}]),r}(d.default.Component))||l)||l;a.default=P},function(e,t,a){e.exports={content:"_2mJmtwYaCtphVvYo8z-SzP",table:"_2sJ-1skolGuF8fcoosL8X3"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(765)),o=r(a(2856));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(5),p=r(70),m=n(r(32)),h=n(r(723)),v=n(r(275)),y=n(r(806)),g=n(r(1150)),b=n(r(2858)),E=n(r(892)),_=n(r(2860)),O=n(r(2862));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var k=(0,p.inject)("detailStore","serviceMonitorStore")(l=(0,p.observer)(l=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=e.props.detailStore,e}return(0,o.default)(r,[{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer()}},{key:"renderPods",value:function(){var e=this.store.detail.selector;return(0,m.default)(e)?null:f.default.createElement(y.default,{prefix:this.prefix,detail:this.store.detail})}},{key:"renderExternal",value:function(){var e=(0,d.toJS)(this.store.detail);return f.default.createElement(h.default,{title:t("EXTERNAL_SERVICE")},f.default.createElement(v.default,{title:e.externalName,description:t("EXTERNALNAME")}))}},{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?f.default.createElement(E.default,{module:this.store.module,name:t,namespace:a}):null}},{key:"renderPorts",value:function(){var e=(0,d.toJS)(this.store.detail);return f.default.createElement(h.default,{title:t("PORT_PL")},f.default.createElement(_.default,{detail:e}))}},{key:"renderWorkloads",value:function(){var e=this.store.detail,t=e.cluster,a=e.namespace,r=e.selector,n=e.workloadType;return(0,m.default)(r)?null:f.default.createElement(g.default,{selector:r,cluster:t,namespace:a,prefix:"".concat(this.prefix,"/projects/").concat(a),module:"".concat(n.toLowerCase(),"s")})}},{key:"renderServiceMonitors",value:function(){var e=this.props.serviceMonitorStore,t=this.store.detail,a=t.cluster,r=t.namespace,n=t.selector,l=t.labels;return(0,m.default)(n)?null:f.default.createElement(b.default,{cluster:a,namespace:r,labels:l,store:e})}},{key:"renderContent",value:function(){return"ExternalName"===this.store.detail.specType?this.renderExternal():f.default.createElement("div",null,this.renderPlacement(),this.renderPorts(),this.renderServiceMonitors(),this.renderWorkloads(),this.renderPods())}},{key:"render",value:function(){return f.default.createElement("div",{className:O.default.main},this.renderContent())}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster;return"".concat(t?"/".concat(t):"","/clusters/").concat(a)}}]),r}(f.default.Component))||l)||l;a.default=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(16)),f=n(r(0)),d=r(276),p=n(r(1)),m=n(r(275)),h=n(r(755)),v=n(r(890)),y=r(37),g=r(58),b=r(289),E=n(r(1429));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=function(e){(0,o.default)(r,e);var a=_(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"getDescription",value:function(e){var a=(0,b.getWorkloadStatus)(e,e.module),r=a.status,n=a.reason;if(n)return f.default.createElement(h.default,{status:r,reason:t(n),data:e});var l=e.updateTime,u=e.createTime;return l?t("UPDATED_TIME",{value:(0,y.getLocalTime)(l).format("YYYY-MM-DD HH:mm:ss")}):t("CREATED_TIME",{diff:(0,y.getLocalTime)(u).format("YYYY-MM-DD HH:mm:ss")})}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.prefix;if(!a)return null;var n=(0,s.default)(a,'annotations["deployment.kubernetes.io/revision"]'),l=(0,s.default)(a,"module");return f.default.createElement("div",{className:E.default.item},f.default.createElement(m.default,{icon:g.ICON_TYPES[a.module],title:f.default.createElement(d.Link,{to:"".concat(r,"/").concat(a.module,"/").concat(a.name)},(0,y.getDisplayName)(a)),description:this.getDescription(a)}),f.default.createElement(m.default,{title:l?t("".concat(l)):"-",description:t("TYPE")}),f.default.createElement(m.default,{title:f.default.createElement(v.default,{data:a,module:a.module}),description:t("STATUS")}),f.default.createElement(m.default,{title:n?"#".concat(n):"-",description:t("REVISION_RECORD")}))}}]),r}(f.default.Component);a.default=O,O.propTypes={className:p.default.string,prefix:p.default.string,detail:p.default.object},O.defaultProps={prefix:"",detail:{}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(21)),c=n(r(109)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=n(r(1)),y=r(70),g=n(r(32)),b=n(r(723)),E=n(r(998)),_=r(37),O=n(r(2859)),S=n(r(1430));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var w=(0,y.observer)((o=u=function(e){(0,d.default)(r,e);var a=R(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).getData=function(){var e=t.props,a=e.cluster,r=e.namespace,n=e.labels;(0,g.default)(n)||t.store.fetchListByK8s({cluster:a,namespace:r,labelSelector:(0,_.joinSelector)(n)})},e.store?t.store=e.store:t.store=new E.default,t}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"renderContent",value:function(){var e=this.store.list.data;if((0,g.default)(e))return null;var t=e.reduce((function(e,t){return[].concat((0,c.default)(e),(0,c.default)(t.endpoints.map((function(e){return C(C({},e),{},{name:t.name})}))))}),[]);return h.default.createElement("div",{className:S.default.content},t.map((function(e){return h.default.createElement(O.default,{key:e.name,detail:e})})))}},{key:"render",value:function(){var e=this.props.className,a=this.renderContent();return a?h.default.createElement(b.default,{className:e,title:"".concat(t("SERVICE_MONITORING_EXPORTER")," (").concat(t("EXPORTER_SERVICE_PORTS"),")")},a):null}}]),r}(h.default.Component),u.propTypes={className:v.default.string,selector:v.default.object},l=o))||l;a.default=w},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(275)),p=n(r(1430));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.detail;return e?s.default.createElement("div",{className:p.default.item},s.default.createElement(d.default,{icon:"monitor",title:e.name,description:t("MONITORING_EXPORTER")}),s.default.createElement(d.default,{title:e.port,description:t("PORT")}),s.default.createElement(d.default,{title:e.path,description:t("PATH")}),s.default.createElement(d.default,{title:e.interval,description:t("SCRAPE_INTERVAL_MIN")}),s.default.createElement(d.default,{title:e.scrapeTimeout,description:t("TIMEOUT_PERIOD_S")})):null}}]),r}(s.default.Component);a.default=h,h.propTypes={detail:f.default.object},h.defaultProps={detail:{}}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=r(25),p=l(r(32)),m=l(r(2861));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,i.default)(r,e);var a=h(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.detail;return(0,p.default)(e.ports)?null:f.default.createElement("div",{className:m.default.portsWrapper},e.ports.map((function(e,a){return f.default.createElement("div",{key:a,className:m.default.ports},f.default.createElement(d.Icon,{name:"pod",size:40}),f.default.createElement("div",{className:m.default.port},f.default.createElement("p",null,f.default.createElement("strong",null,e.targetPort)),f.default.createElement("p",null,t("CONTAINER_PORT_SCAP"))),f.default.createElement("div",{className:m.default.protocol},"→ ",e.protocol," → "),f.default.createElement(d.Icon,{name:"network-router",size:40}),f.default.createElement("div",{className:m.default.port},f.default.createElement("p",null,f.default.createElement("strong",null,e.port)),f.default.createElement("p",null,t("SERVICE_PORT_SCAP"))),e.nodePort&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:m.default.protocol},"→ ",e.protocol," → "),f.default.createElement(d.Icon,{name:"nodes",size:40}),f.default.createElement("div",{className:m.default.port},f.default.createElement("p",null,f.default.createElement("strong",null,e.nodePort)),f.default.createElement("div",null,t("NodePort"),f.default.createElement(d.Tooltip,{content:t("SERVICE_NODE_PORT_DESC"),trigger:"hover"},f.default.createElement(d.Icon,{name:"information"}))))))})))}}]),r}(f.Component);a.default=v},function(e,t,a){e.exports={portsWrapper:"_2We24b3_VgRd3MJKCkjq3X",ports:"_1wbVrnHLkSuMYsCbT53qFJ",port:"Knp1RLKjkSKasue9XKw-c",protocol:"_3DlE7XnkUnJCBWry_MTszr",access:"_1AD1Y5Wwpod9JC13akkKmR"}},function(e,t,a){e.exports={access:"_2N2s5v42S6JXCkBfuCNf0r"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(765)),o=r(a(2864));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(49)),o=n(r(50)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(32)),m=n(r(0)),h=r(5),v=r(70),y=n(r(723)),g=n(r(892)),b=n(r(767)),E=n(r(893)),_=n(r(2866)),O=n(r(1432));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=(0,v.inject)("detailStore")(l=(0,v.observer)(l=function(e){(0,s.default)(r,e);var a=S(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).getProjectGateway=function(e){return t.gatewayStore.getGatewayByProject({namespace:e.namespace,cluster:e.cluster})},t.getInitGateway=function(){var e=(0,o.default)(u.default.mark((function e(a){var r,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getProjectGateway(a);case 2:r=e.sent,n=r[1]||r[0],t.setState({gateway:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={gateway:{}},t.store=e.detailStore,t.gatewayStore=new b.default,t.module=t.store.module,t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=(0,h.toJS)(this.store.detail);this.getInitGateway(e)}},{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?m.default.createElement(g.default,{module:this.module,name:t,namespace:a}):null}},{key:"renderRules",value:function(){var e=this,a=(0,h.toJS)(this.store.detail),r=a.tls||[];if((0,p.default)(a.rules))return m.default.createElement(E.default,{desc:t("NO_DATA")});var n=this.props.match.params,l=n.workspace,u=n.cluster,o=n.namespace;return m.default.createElement(y.default,{title:t("RULES")},a.rules.map((function(t,a){return m.default.createElement(_.default,{key:"".concat(t.host,"-").concat(a),tls:r,rule:t,gateway:e.state.gateway,prefix:"".concat(l?"/".concat(l):"","/clusters/").concat(u,"/projects/").concat(o)})})))}},{key:"renderContent",value:function(){return m.default.createElement("div",null,this.renderPlacement(),this.renderRules())}},{key:"render",value:function(){return m.default.createElement("div",{className:O.default.main},this.renderContent())}}]),r}(m.default.Component))||l)||l;a.default=k},function(e,t,a){e.exports={wrapper:"_2vhNiBbAdrhhXpqgv1RN5G",desc:"MS4yiZzOJzi4SfeMrAyZ2"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(0)),u=n(r(1)),o=r(276),i=r(25),c=n(r(1432)),s=function(e){var a=e.gateway,r=e.rule,n=e.tls,u=void 0===n?[]:n,s=e.prefix,f=u.find((function(e){return e.hosts&&e.hosts.includes(r.host)})),d=f?"https":"http",p=r.host;if(a&&a.ports&&"NodePort"===a.type){var m=a.ports.find((function(e){return e.name===d}));m&&("http"===d&&80!==m.nodePort||"https"===d&&443!==m.nodePort)&&(p="".concat(p,":").concat(m.nodePort))}return l.default.createElement("div",{className:c.default.card},l.default.createElement("div",{className:c.default.content},l.default.createElement(i.Icon,{name:"earth",size:40}),l.default.createElement("div",{className:c.default.title},p,l.default.createElement("div",null,l.default.createElement("span",null,t("PROTOCOL_VALUE",{value:d.toUpperCase()})),"https"===d&&l.default.createElement("span",null,t("CERTIFICATE_VALUE",{value:f.secretName})),l.default.createElement("span",{className:c.default.tip},t("UNABLE_TO_ACCESS"),"  ",l.default.createElement(i.Tooltip,{content:t.html("UNABLE_TO_ACCESS_TIP")},l.default.createElement(i.Icon,{name:"question"})))))),r.http.paths.map((function(e,a){return l.default.createElement("div",{key:"".concat(e.path,"-").concat(a),className:c.default.path},l.default.createElement(i.Columns,null,l.default.createElement(i.Column,null,l.default.createElement("span",null,t.html("ROUTE_PATH_VALUE",{value:e.path}))),l.default.createElement(i.Column,null,l.default.createElement("span",null,t("SERVICE_COLON"),l.default.createElement("strong",null,l.default.createElement(o.Link,{to:"".concat(s,"/services/").concat(e.backend.service.name)},e.backend.service.name)))),l.default.createElement(i.Column,null,l.default.createElement("span",null,t.html("ROUTE_PORT_VALUE",{value:e.backend.service.port.number}))),l.default.createElement(i.Column,null,l.default.createElement("a",{href:"".concat(d,"://").concat(p).concat(e.path),target:"_blank",rel:"noreferrer noopener"},l.default.createElement(i.Button,{className:c.default.access},t("ACCESS_SERVICE"))))))})))};s.propTypes={rule:u.default.object};var f=s;a.default=f},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(2868));t.default=function(e){return[{path:"".concat(e,"/detail"),title:"DATA",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/detail"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(136)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(70),m=r(25),h=n(r(741)),v=n(r(892)),y=r(292),g=n(r(2869));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=(0,p.inject)("detailStore")(l=(0,p.observer)(l=function(e){(0,c.default)(r,e);var a=b(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).convert=function(e){return t.state.showSecret?e:(0,y.safeBtoa)(e)},t.changeSecretState=function(){t.setState((function(e){return{showSecret:!e.showSecret}}))},t.store=e.detailStore,t.module=e.module,t.state={showSecret:!1},t}return(0,i.default)(r,[{key:"renderTLS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:g.default.tlsWrapper},d.default.createElement("div",{className:g.default.tlsItem},d.default.createElement("div",{className:"h6"},t("CREDENTIAL_SI")),d.default.createElement("pre",null,this.convert(e["tls.crt"]))),d.default.createElement("div",{className:g.default.tlsItem},d.default.createElement("div",{className:"h6"},t("PRIVATE_KEY_TCAP")),d.default.createElement("pre",null,this.convert(e["tls.key"]))))}},{key:"renderImageRepositorySecret",value:function(e){var a=this,r=e[".dockerconfigjson"];return r&&r.auths?d.default.createElement("div",{className:g.default.imageWrapper},d.default.createElement("ul",null,Object.entries(r.auths).map((function(e){var r=(0,u.default)(e,2),n=r[0],l=r[1];return d.default.createElement("li",{key:n},d.default.createElement("div",{className:"h6"},d.default.createElement(m.Icon,{name:"earth"}),n),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement("span",null,t("USERNAME"),":"),d.default.createElement("span",null,a.convert(l.username))),d.default.createElement("li",null,d.default.createElement("span",null,t("PASSWORD"),":"),d.default.createElement("span",null,a.convert(l.password))),l.email&&d.default.createElement("li",null,d.default.createElement("span",null,t("EMAIL"),":"),d.default.createElement("span",null,a.convert(l.email)))))})))):null}},{key:"renderDefault",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:g.default.defaultWrapper},d.default.createElement("ul",null,Object.entries(t).map((function(t){var a=(0,u.default)(t,2),r=a[0],n=a[1];return d.default.createElement("li",{key:r},d.default.createElement("span",null,r,":"),d.default.createElement("span",null,d.default.createElement("pre",null,e.convert(n))))}))))}},{key:"renderBasicAuth",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:g.default.defaultWrapper},d.default.createElement("ul",null,Object.entries(a).map((function(a){var r=(0,u.default)(a,2),n=r[0],l=r[1];return d.default.createElement("li",{key:n},d.default.createElement("span",null,t(n.toUpperCase()),":"),d.default.createElement("span",null,d.default.createElement("pre",null,e.convert(l))))}))))}},{key:"renderContent",value:function(e){if(!e.type)return null;var t=null;switch(e.type){case"kubernetes.io/tls":t=this.renderTLS(e.data);break;case"kubernetes.io/dockerconfigjson":t=this.renderImageRepositorySecret(e.data);break;case"kubernetes.io/basic-auth":t=this.renderBasicAuth(e.data);break;default:t=this.renderDefault(e.data)}return t}},{key:"renderOperations",value:function(){var e=this.state.showSecret;return d.default.createElement(m.Button,{type:"flat",icon:e?"eye":"eye-closed",onClick:this.changeSecretState})}},{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?d.default.createElement(v.default,{module:this.store.module,name:t,namespace:a}):null}},{key:"render",value:function(){var e=this.store.detail;return d.default.createElement("div",null,this.renderPlacement(),d.default.createElement(h.default,{title:t("DATA"),operations:this.renderOperations()},this.renderContent(e)))}}]),r}(d.default.Component))||l)||l;a.default=E},function(e,t,a){e.exports={defaultWrapper:"_2peh6PErdPDCJ6M9zNnRHF",tlsWrapper:"_2tLwXnfNxiZk4X_bSM9kmR",tlsItem:"_2r-rapgWLiquMqgE3_cZwf",imageWrapper:"_2zQdawm6yFVe8N0JA-zICj"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(2871));t.default=function(e){return[{path:"".concat(e,"/detail"),title:"DATA",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/detail"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(136)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(70),m=n(r(741)),h=n(r(892)),v=n(r(2872));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=(0,p.inject)("detailStore")(l=(0,p.observer)(l=function(e){(0,c.default)(r,e);var a=y(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).store=e.detailStore,t.module=e.module,t}return(0,i.default)(r,[{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:v.default.wrapper},d.default.createElement("ul",null,Object.entries(e).map((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1];return d.default.createElement("li",{key:a},d.default.createElement("div",{className:"h6"},a),d.default.createElement("pre",{className:v.default.value},r))}))))}},{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?d.default.createElement(h.default,{module:this.store.module,name:t,namespace:a}):null}},{key:"render",value:function(){var e=this.store,a=e.detail,r=e.isLoading;return d.default.createElement("div",null,this.renderPlacement(),d.default.createElement(m.default,{title:t("DATA"),loading:r},this.renderContent(a.data)))}}]),r}(d.default.Component))||l)||l;a.default=g},function(e,t,a){e.exports={wrapper:"objLg3fuCuqy66XEKBptC",value:"SkXJa0qm0W5rZn0Q51xi5"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(2874));t.default=function(e){return[{path:"".concat(e,"/detail"),title:"DATA",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/detail"),exact:!0})]}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(71)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=a(70),p=r(a(16)),m=r(a(2875)),h=r(a(1436));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,u.default)(this,a),(r=t.call(this,e)).store=e.detailStore,r.module=e.module,r}return(0,o.default)(a,[{key:"render",value:function(){var e=this,t=this.store.detail,a=(0,p.default)(t,"secrets"),r=(0,p.default)(t,"name");return f.default.createElement("div",null,f.default.createElement("div",{className:h.default.secretWrapper},a.map((function(t){var a=t.name;return f.default.createElement(m.default,(0,l.default)({secret:a,serviceAccountName:r,key:a},e.props))}))))}}]),a}(f.default.Component))||n)||n;t.default=y},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o=n(r(136)),i=n(r(21)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(74)),h=n(r(0)),v=r(70),y=r(5),g=r(25),b=r(821),E=n(r(723)),_=n(r(795)),O=r(979),S=r(638),k=r(292),C=n(r(773)),R=n(r(1436));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=(0,v.observer)((u=function(e){(0,f.default)(r,e);var a=D(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).fetchData=function(){n.store.fetchDetail(P(P({},n.props.match.params),{},{name:n.secret}))},n.convert=function(e){return n.state.showSecret?e:(0,k.safeBtoa)(e)},n.changeSecretState=function(e){e.preventDefault(),e.stopPropagation(),n.setState((function(e){return{showSecret:!e.showSecret}}))},n.handleCopy=function(){(0,S.copyToClipboard)((0,O.getValue)(n.kubeconfig)),g.Notify.success({content:t("COPY_SUCCESSFUL")})},n.handleDownload=function(){var e=new Blob([(0,O.getValue)(n.kubeconfig)],{type:"text/plain;charset=utf-8"});(0,b.saveAs)(e,"kubeconfig.yaml")},n.secret=e.secret,n.serviceAccountName=e.serviceAccountName,n.store=new C.default,n.state={showSecret:!1},n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderSecretContent",value:function(){var e=this,a=(0,y.toJS)(this.store).detail.data,r=void 0===a?{}:a;return h.default.createElement("div",{className:R.default.secretWrapper},h.default.createElement("div",{className:R.default.title},h.default.createElement("div",{className:"h6"},t("DATA_SETTINGS")),this.renderOperations()),h.default.createElement("div",{className:R.default.defaultWrapper},h.default.createElement("ul",null,Object.entries(r).map((function(t){var a=(0,o.default)(t,2),r=a[0],n=a[1];return h.default.createElement("li",{key:r},h.default.createElement("span",null,r,":"),h.default.createElement("span",null,h.default.createElement("pre",null,e.convert(n))))})))))}},{key:"renderOperations",value:function(){var e=this.state.showSecret;return h.default.createElement(g.Button,{type:"flat",icon:e?"eye-closed":"eye",onClick:this.changeSecretState})}},{key:"renderConfigContent",value:function(){return h.default.createElement("div",{className:R.default.configWrapper},h.default.createElement("div",{className:R.default.title},h.default.createElement("div",{className:"h6"},t("KUBECONFIG_SETTINGS")),h.default.createElement("p",{className:"text-desc"},t.html("SERVICEACCOUNT_KUBECONFIG_DESC"))),h.default.createElement("div",{className:R.default.codeEditor},h.default.createElement("div",{className:R.default.ops},h.default.createElement(g.Icon,{name:"copy",size:20,clickable:!0,color:{primary:"#fff",secondary:"#fff"},onClick:this.handleCopy}),h.default.createElement("span",{className:R.default.split},"|"),h.default.createElement(g.Icon,{name:"download",size:20,clickable:!0,color:{primary:"#fff",secondary:"#fff"},onClick:this.handleDownload})),h.default.createElement(_.default,{value:(0,O.getValue)(this.kubeconfig),options:{readOnly:!0}})))}},{key:"render",value:function(){return h.default.createElement(E.default,{title:t("SECRET_VALUE",{value:this.secret})},this.renderSecretContent(),this.renderConfigContent())}},{key:"kubeconfig",get:function(){var e=(0,y.toJS)(this.store).detail,t=e.data,a=void 0===t?{}:t,r=e.namespace;return{apiVersion:"v1",kind:"Config",clusters:[{name:"".concat(this.serviceAccountName,"@local"),cluster:{server:"https://kubernetes.default.svc:443","certificate-authority-data":(0,k.safeBtoa)(a["ca.crt"])}}],users:[{name:this.serviceAccountName,user:{token:a.token}}],contexts:[{name:"".concat(this.serviceAccountName,"@local"),context:{user:this.serviceAccountName,cluster:"".concat(this.serviceAccountName,"@local"),namespace:r}}],"current-context":"".concat(this.serviceAccountName,"@local")}}}]),r}(h.default.Component),(0,m.default)(u.prototype,"kubeconfig",[y.computed],Object.getOwnPropertyDescriptor(u.prototype,"kubeconfig"),u.prototype),l=u))||l;a.default=T},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(919)),o=r(a(765)),i=r(a(2877)),c=r(a(2880)),s=r(a(1441));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:i.default,exact:!0},{path:"".concat(e,"/schedule"),title:"SCHEDULING_INFORMATION",component:c.default},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:s.default,exact:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(5),p=r(70),m=n(r(32)),h=n(r(2878)),v=n(r(1438));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=(0,p.inject)("detailStore")(l=(0,p.observer)(l=function(e){(0,i.default)(r,e);var a=y(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderContainers",value:function(){var e=(0,d.toJS)(this.store.detail),a=e.name,r=e.cluster,n=e.containers,l=e.initContainers;return f.default.createElement(h.default,{prefix:this.prefix,cluster:r,title:t("CONTAINER_PL"),containers:n,initContainers:l,podName:a})}},{key:"renderVolumes",value:function(){var e=(0,d.toJS)(this.store.detail),t=e.volumes,a=e.containers;return(0,m.default)(t)?null:f.default.createElement(v.default,{volumes:t,containers:a,loading:this.store.isLoading,match:this.props.match})}},{key:"renderContent",value:function(){return f.default.createElement("div",null,this.renderContainers(),this.renderVolumes())}},{key:"render",value:function(){return f.default.createElement("div",null,this.renderContent())}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"prefix",get:function(){return this.props.match.url.split("/").slice(0,-1).join("/")}}]),r}(f.default.Component))||l)||l;a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(723)),p=n(r(1144)),m=n(r(1415));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.prefix,n=e.cluster,l=e.containers,u=e.initContainers,o=e.podName,i=this.props.title||t("Container Config");return s.default.createElement(d.default,{className:a,title:i},s.default.createElement("div",{className:m.default.wrapper},l.map((function(e,t){return s.default.createElement(p.default,{key:t,prefix:r,cluster:n,detail:e,podName:o})})),u.map((function(e,t){return s.default.createElement(p.default,{key:t,prefix:r,cluster:n,detail:e,podName:o,isInit:!0})}))))}}]),r}(s.default.Component);a.default=v,v.propTypes={className:f.default.string,prefix:f.default.string,title:f.default.string,containers:f.default.array,initContainers:f.default.array},v.defaultProps={prefix:"",containers:[],initContainers:[]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(16)),u=n(r(32)),o=n(r(0)),i=n(r(1)),c=r(276),s=r(25),f=n(r(652)),d=n(r(1439)),p=function(e){var a,r,n=e.volume,i=e.match,p=e.isMultiProject,m=i.params,h=m.workspace,v=m.cluster,y=m.namespace,g="".concat(h?"/".concat(h):"","/clusters/").concat(v,"/projects/").concat(y),b="storage";if(n.hostPath)a=t("TYPE_HOSTPATH"),r=[{title:(0,l.default)(n,"hostPath.path","-"),description:t("HostPath")}];else if(n.emptyDir)a=t("TYPE_EMPTYDIR"),r=[];else if(n.configMap){b="hammer",a=t("TYPE_CONFIGMAP");var E=(0,l.default)(n,"configMap.name","-");r=[{title:p?E:o.default.createElement(c.Link,{to:"".concat(g,"/configmaps/").concat(E)},E),description:t("CONFIGMAP")}]}else if(n.secret){b="key",a=t("TYPE_SECRET");var _=(0,l.default)(n,"secret.secretName","-");r=[{title:p?_:o.default.createElement(c.Link,{to:"".concat(g,"/secrets/").concat(_)},_),description:t("SECRET")}]}else{a=t("STORAGE_CLASS_VALUE",{value:(0,l.default)(n,"storageClassName","-")});var O=(0,l.default)(n,"persistentVolumeClaim.claimName","-");r=[{title:p?O:o.default.createElement(c.Link,{to:"".concat(g,"/volumes/").concat(O)},O),description:t("PERSISTENT_VOLUME_CLAIM")},{title:(0,l.default)(n,"capacity","-"),description:t("CAPACITY")},{title:(0,l.default)(n,"accessMode","-"),description:t("ACCESS_MODE_SCAP")}]}var S=!(0,u.default)(n.volumeMounts)&&o.default.createElement("div",{className:d.default.mount},o.default.createElement("ul",null,n.volumeMounts.map((function(e){var a=e.containerName,r=e.mountPath,n=e.subPath,l=e.logPath,u=e.readOnly;return o.default.createElement("li",{key:"".concat(a,"-").concat(r)},o.default.createElement("div",null,o.default.createElement(s.Icon,{name:"docker",size:20}),o.default.createElement("span",null,a)),o.default.createElement("div",null,o.default.createElement(s.Icon,{name:"mgmt-node",size:20}),o.default.createElement("span",null,r),o.default.createElement("span",{className:"text-secondary"}," (",u?t("READ_ONLY_LOW"):t("READ_AND_WRITE_LOW"),")")),n&&o.default.createElement("div",null,o.default.createElement(s.Icon,{name:"textfield",size:20})," ",o.default.createElement("span",null,n)),l&&o.default.createElement("div",null,o.default.createElement(s.Icon,{name:"log",size:20})," ",o.default.createElement("span",null,l)))})))),k=(0,l.default)(n,"mountName",n.name);return o.default.createElement(f.default.Item,{icon:b,title:k,titleClass:d.default.title,description:a,extras:S,details:r})};p.propTypes={container:i.default.object};var m=p;a.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(5),p=r(70),m=n(r(16)),h=r(25),v=r(37),y=n(r(723)),g=n(r(275)),b=n(r(837)),E=n(r(2881)),_=n(r(1440));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S={PodScheduled:"stretch",Initialized:"container",ContainersReady:"docker",Ready:"success"},k=function(e){var t=e.status,a=e.tip,r=f.default.createElement(h.Icon,{className:_.default.status,name:"success"===t?"success":"error",color:{primary:"#fff",secondary:"success"===t?"#55bc8a":"#ca2621"}});return a?f.default.createElement(h.Tooltip,{content:a},r):r},C=(0,p.inject)("detailStore")(l=(0,p.observer)(l=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).nodeStore=new b.default,t.fetchNodeDetail=function(){var e=t.props.detailStore.detail;e.requests=e.containers.reduce((function(e,t){var a=(0,m.default)(t,"resources.requests",{cpu:"0",memory:"0"}),r=a.cpu,n=a.memory;return r=Number((0,v.cpuFormat)(r)),n=Number((0,v.memoryFormat)(n)),{cpu:e.cpu+r,memory:e.memory+n}}),{cpu:0,memory:0})},t.getSeriesData=function(e){var a=t.nodeStore.detail,r=t.store.detail.requests[e],n="cpu"===e?v.cpuFormat:v.memoryFormat,l=Number(n((0,m.default)(a,"status.allocatable[".concat(e,"]")))),u=Number(n((0,m.default)(a,"status.capacity[".concat(e,"]"))));return[{name:"podRequests",itemStyle:{fill:"#f5a623"},value:r},{name:"used",itemStyle:{fill:"#404e68"},value:Number((u-l-r).toFixed(3))},{name:"allocatable",itemStyle:{fill:"#0d6c2c12"},value:l}]},t.disposer=(0,d.when)((function(){return t.store.detail.node}),t.fetchNodeDetail),t}return(0,o.default)(r,[{key:"renderNodeScheduleTip",value:function(){return f.default.createElement("div",null,f.default.createElement("div",{className:"tooltip-title"},t("POD_SCHEDULING_METHOD")),f.default.createElement("p",{className:"tooltip-desc"},t("POD_ASSIGNED_DESC")))}},{key:"renderNode",value:function(){return f.default.createElement("div",{className:_.default.nodes},f.default.createElement(E.default,{metrics:this.getSeriesData("cpu"),icon:"cpu",unit:"Core"}),f.default.createElement(E.default,{metrics:this.getSeriesData("memory"),icon:"memory",unit:"Mi"}))}},{key:"renderNodeSchedule",value:function(){var e=this.store.detail,a=(0,m.default)(e,"status.conditions",[]).find((function(e){return"PodScheduled"===e.type}))||{};return f.default.createElement(y.default,{title:t("SCHEDULING_RESULT")},f.default.createElement("div",{className:_.default.wrapper},f.default.createElement("div",null,f.default.createElement(g.default,{className:_.default.info,icon:"nodes",title:f.default.createElement("div",null,e.node?t("SCHEDULED_TO_NODE",{value:e.node}):t("SCHEDULING_NOT_SUCCESSFUL"),f.default.createElement(h.Tooltip,{content:this.renderNodeScheduleTip()},f.default.createElement(h.Icon,{className:"margin-l8",name:"question",size:20}))),description:(0,v.getLocalTime)(a.lastTransitionTime).format("YYYY-MM-DD HH:mm:ss"),extra:f.default.createElement(k,{status:"True"===a.status?"success":"warning"})}))))}},{key:"renderConditionTip",value:function(e){return f.default.createElement("div",null,f.default.createElement("div",{className:"tooltip-title"},t("POD_CONDITION_".concat(e.type.toUpperCase()))),f.default.createElement("div",{className:"tooltip-desc"},f.default.createElement("p",null,t("STATUS_VALUE",{value:"True"===e.status?t("SUCCESSFUL"):t("NOT_SUCCESSFUL")})),e.reason&&f.default.createElement("p",null,t("REASON_VALUE",{value:t(e.reason)})),e.message&&f.default.createElement("p",null,t("MESSAGE_VALUE",{value:e.message})),f.default.createElement("p",null,t("UPDATED_AT_VALUE",{value:(0,v.getLocalTime)(e.lastTransitionTime).format("YYYY-MM-DD HH:mm:ss")}))))}},{key:"renderPodStatus",value:function(){var e=this,a=this.store.detail,r=(0,m.default)(a,"status.conditions",[]),n=(0,m.default)(a,"status.phase","");return f.default.createElement(y.default,{title:t("STATUS_INFORMATION")},f.default.createElement("div",{className:_.default.header},f.default.createElement(g.default,{className:_.default.info,icon:"pod",title:t(n),description:t("CURRENT_STATUS"),extra:f.default.createElement(k,{status:"Running"===n?"success":"warning"})})),f.default.createElement("div",{className:_.default.content},Object.keys(S).map((function(a){var n=r.find((function(e){return e.type===a}));return n?f.default.createElement(g.default,{key:n.type,className:_.default.condition,icon:S[n.type],title:t("POD_CONDITION_".concat(n.type.toUpperCase())),description:t("POD_CONDITION_".concat(n.type.toUpperCase(),"_DESC")),extra:f.default.createElement(k,{status:"True"===n.status?"success":"warning",tip:e.renderConditionTip(n)})}):null}))))}},{key:"render",value:function(){return f.default.createElement("div",null,this.renderNodeSchedule(),this.renderPodStatus())}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}}]),r}(f.default.Component))||l)||l;a.default=C},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(1206)),p=n(r(1440));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.metrics,r=void 0===a?[]:a,n=e.icon,l=e.unit,u=r.find((function(e){return"podRequests"===e.name}))||{},o=r.find((function(e){return"used"===e.name}))||{};return s.default.createElement("div",{className:p.default.chart},s.default.createElement(f.Icon,{name:n,size:32}),s.default.createElement("div",{className:p.default.chartWrapper},s.default.createElement(d.default,{width:92,height:92,data:r})),s.default.createElement("div",{className:p.default.text},s.default.createElement("div",null,s.default.createElement("span",null,o.value," ",l),s.default.createElement("span",{className:p.default.podRequests},"+ ",u.value)),s.default.createElement("p",null,t("节点已用请求"))))}}]),r}(s.default.Component);a.default=h},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(919)),u=r(a(2883)),o=r(a(2888)),i=r(a(2889));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:u.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:o.default,exact:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:l.default,exact:!0},{path:"".concat(e,"/logs"),title:"CONTAINER_LOGS",component:i.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(5),p=r(70),m=n(r(1438)),h=n(r(2884)),v=n(r(2886));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=(0,p.inject)("detailStore")(l=(0,p.observer)(l=function(e){(0,i.default)(r,e);var a=y(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderVolumes",value:function(){var e=[(0,d.toJS)(this.store.detail)],a=(0,d.toJS)(this.store.volumes);return f.default.createElement(m.default,{title:t("VOLUME_PL"),volumes:a,containers:e,loading:this.store.isLoading,match:this.props.match})}},{key:"renderProb",value:function(){var e=(0,d.toJS)(this.store.detail),t=e.livenessProbe,a=e.readinessProbe;return t||a?f.default.createElement(h.default,{detail:this.store.detail}):null}},{key:"renderLife",value:function(){return(0,d.toJS)(this.store.detail).lifecycle?f.default.createElement(v.default,{detail:this.store.detail}):null}},{key:"render",value:function(){return f.default.createElement("div",null,this.renderProb(),this.renderLife(),this.renderVolumes())}},{key:"store",get:function(){return this.props.detailStore}}]),r}(f.default.Component))||l)||l;a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(652)),p=n(r(723)),m=n(r(2885));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"renderProbe",value:function(){var e=this.props.detail,a=e.livenessProbe,r=e.readinessProbe,n=e.startupProbe;return a||r||n?s.default.createElement("div",{className:m.default.probe},this.renderProbeRecord({probe:r,title:t("READINESS_PROBE"),tagType:"primary"}),this.renderProbeRecord({probe:a,title:t("LIVENESS_PROBE"),tagType:"warning"}),this.renderProbeRecord({probe:n,title:t("STARTUP_PROBE"),tagType:"info"})):null}},{key:"renderProbeRecord",value:function(e){var a=e.probe,r=e.title,n=e.tagType;if(!a)return null;var l,u=a.initialDelaySeconds||0,o=a.timeoutSeconds||0,i=[];if("httpGet"in a){var c=a.httpGet,p=c.path,h=c.port;l="HTTP_REQUEST",i=[{title:c.scheme,description:t("Request Type")},{title:p,description:t("PATH")},{title:h,description:t("PORT")}]}else if("tcpSocket"in a)l="TCP_PORT",i=[{title:a.tcpSocket.port,description:t("PORT")}];else{var v=a.exec.command;l="COMMAND",i=[{title:(void 0===v?[]:v).join(" "),description:t("COMMANDS")}]}var y=s.default.createElement(s.default.Fragment,null,s.default.createElement(f.Tag,{type:n},r),s.default.createElement("span",{className:m.default.probeType},t(l))),g=s.default.createElement("span",null,t("INITIAL_DELAY_TIMEOUT_VALUE",{delay:u,timeout:o}));return s.default.createElement(d.default.Item,{icon:"monitor",title:y,description:g,details:i})}},{key:"render",value:function(){return s.default.createElement(p.default,{title:t("HEALTH_CHECK")},s.default.createElement("div",{className:m.default.wrapper},this.renderProbe()))}}]),r}(s.default.Component);a.default=v},function(e,t,a){e.exports={wrapper:"_2I7-qCIdee2EjdeQ33QJaM",probeItem:"_2_CyXFUSO6FXDtGHiFrRto",probeType:"_15cg_VQqrvTsdzKilwYM54"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(652)),p=n(r(723)),m=n(r(2887));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,o.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"renderProbe",value:function(){var e=this.props.detail.lifecycle;if(!e)return null;var a=e.postStart,r=e.preStop;return s.default.createElement("div",{className:m.default.probe},this.renderProbeRecord({probe:a,title:t("PostStart"),tagType:"primary"}),this.renderProbeRecord({probe:r,title:t("PreStop"),tagType:"warning"}))}},{key:"renderProbeRecord",value:function(e){var a=e.probe,r=e.title,n=e.tagType;if(!a)return null;var l,u=[];if("httpGet"in a){var o=a.httpGet,i=o.path,c=o.port;l="HTTP_REQUEST",u=[{title:o.scheme,description:t("Request Type")},{title:i,description:t("PATH")},{title:c,description:t("PORT")}]}else if("tcpSocket"in a)l="TCP_PORT",u=[{title:a.tcpSocket.port,description:t("PORT")}];else{var p=a.exec.command;l="COMMAND",u=[{title:(void 0===p?[]:p).join(" "),description:t("COMMANDS")}]}var h=s.default.createElement(s.default.Fragment,null,s.default.createElement(f.Tag,{type:n},r),s.default.createElement("span",{className:m.default.probeType},t(l)));return s.default.createElement(d.default.Item,{titleClass:m.default.title,icon:"monitor",title:h,details:u})}},{key:"render",value:function(){return s.default.createElement(p.default,{title:t("LIFECYCLE_MANAGEMENT")},s.default.createElement("div",{className:m.default.wrapper},this.renderProbe()))}}]),r}(s.default.Component);a.default=v},function(e,t,a){e.exports={wrapper:"_3rXQbX2TudAlSlv1mlZBYd",probeItem:"_3YyTzHVbBkWTY3bJh_vpI-",title:"big7Hepxd6aOlKJIGnmvP",probeType:"_3fuPVq7RHnB-o15ElGKMKT"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=a(70),f=r(a(16)),d=r(a(1443)),p=a(1441);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v={cpu_usage:"container_cpu_usage",memory_usage:"container_memory_usage_wo_cache"},y=function(e){(0,o.default)(a,e);var t=h(a);function a(e){var r;return(0,l.default)(this,a),(r=t.call(this,e)).fetchData=function(e){var t=r.store.detail,a=t.cluster,l=t.namespace,u=t.name;r.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({cluster:a,namespace:l,container:u,podName:r.podName,metrics:Object.values(v)},e))},r.getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU_USAGE",unitType:"cpu",legend:["USAGE"],data:(0,f.default)(r.metrics,"".concat(v.cpu_usage,".data.result"))},{type:"memory",title:"MEMORY_USAGE",unitType:"memory",legend:["USAGE"],data:(0,f.default)(r.metrics,"".concat(v.memory_usage,".data.result"))}]},r.monitorStore=new d.default,r}return(0,u.default)(a,[{key:"podName",get:function(){return(0,f.default)(this.props.match,"params.podName","")}}]),a}(p.Component),g=(0,s.inject)("rootStore","detailStore")((0,s.observer)(y));t.default=g;var b=y;t.Component=b},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=a(70),d=r(a(16)),p=r(a(741)),m=r(a(802)),h=r(a(1110));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,f.inject)("detailStore")(n=(0,f.observer)(n=function(e){(0,o.default)(a,e);var t=v(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){return(0,d.default)(this.store,"detail.containerID")?s.default.createElement(h.default,this.props.match.params):s.default.createElement(p.default,null,s.default.createElement(m.default,{desc:"CONTAINER_LOGS_NOT_SUPPORTED"}))}},{key:"store",get:function(){return this.props.detailStore}}]),a}(s.default.Component))||n)||n;t.default=y},,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(765)),o=r(a(2899)),i=r(a(2904));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",exact:!0,component:o.default},{path:"".concat(e,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",exact:!0,component:l.default},{path:"".concat(e,"/snapshot"),title:"SNAPSHOT_PL",exact:!0,component:i.default},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(70),m=n(r(16)),h=n(r(806)),v=n(r(892)),y=n(r(1445)),g=n(r(2900)),b=n(r(2903));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,p.inject)("detailStore")(l=(0,p.observer)(l=function(e){(0,c.default)(r,e);var a=O(r);function r(e){var t;(0,o.default)(this,r);var n=(t=a.call(this,e)).props.match.params,l=n.cluster,u=n.namespace,i=n.name;return t.monitor=new y.default({cluster:l,namespace:u,pvc:i}),t}return(0,i.default)(r,[{key:"store",get:function(){return this.props.detailStore}},{key:"module",get:function(){return this.props.module}},{key:"canViewPods",get:function(){return globals.app.hasPermission(_(_({},this.props.match.params),{},{module:"pods",action:"view"}))}},{key:"prefix",get:function(){if(!this.canViewPods)return null;var e=this.props.match.params,t=e.workspace,a=e.cluster;return"".concat(t?"/".concat(t):"","/clusters/").concat(a)}}]),(0,i.default)(r,[{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?d.default.createElement(v.default,{module:this.store.module,name:t,namespace:a}):null}},{key:"render",value:function(){var e=_({kind:"PVC"},(0,m.default)(this.props.match,"params"));return d.default.createElement("div",{className:b.default.main},d.default.createElement(g.default,{title:t("PERSISTENT_VOLUME"),store:this.monitor}),d.default.createElement(h.default,{title:t("MOUNTED_PODS"),detail:e,prefix:this.prefix}))}}]),r}(d.default.Component))||l)||l;a.default=S},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o,i,c=n(r(71)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=l(r(0)),v=n(r(1)),y=r(70),g=n(r(16)),b=r(725),E=n(r(1446)),_=n(r(785)),O=r(25),S=n(r(723)),k=r(735),C=n(r(2902));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var w={inodeUsage:"pvc_inodes_used",inodeTotal:"pvc_inodes_total",inodeUtilisation:"pvc_inodes_utilisation",capacityAvailable:"pvc_bytes_available",capacityTotal:"pvc_bytes_total",capacityUtilisation:"pvc_bytes_utilisation"},P=(0,y.observer)((i=o=function(e){(0,d.default)(r,e);var a=R(r);function r(){return(0,s.default)(this,r),a.apply(this,arguments)}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.timer=this.props.store.monitoringMetrics({step:"1m",times:60,metrics:Object.values(w)},{interval:6e4})}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"parseMetrics",value:function(e,t){var a=(0,b.getSuitableUnit)(e,t);return{unit:a,count:(0,b.getValueByUnit)(e,a)}}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.store,n=r.isLoading,l=r.isRefreshing;return h.default.createElement(S.default,{title:a},h.default.createElement(O.Loading,{spinning:n},h.default.createElement("div",{"data-refreshing":l},h.default.createElement(O.Alert,{type:"warning",className:"margin-b12",message:t.html("VOLUME_MONITORING_TIP")}),this.renderStatus(),this.renderMonitor())))}},{key:"renderStatus",value:function(){var e=this.props.store.data,a=(0,b.getLastMonitoringData)(e),r=(0,g.default)(a,"".concat(w.capacityAvailable,".value[1]"),0),n=(0,g.default)(a,"".concat(w.capacityTotal,".value[1]"),0),l=this.parseMetrics(r,"memory"),u=this.parseMetrics(n,"memory"),o=(0,g.default)(a,"".concat(w.capacityUtilisation,".value[1]"),0);return h.default.createElement("header",{className:C.default.header},h.default.createElement("div",{className:C.default.card},h.default.createElement(E.default,{rate:Number(o)})),h.default.createElement("div",{className:C.default.description},h.default.createElement("h3",null,l.count,h.default.createElement("small",null,l.unit)),h.default.createElement("p",null,t("AVAILABLE_CAPACITY"))),h.default.createElement("div",{className:C.default.description},h.default.createElement("h3",null,u.count,h.default.createElement("small",null,u.unit)),h.default.createElement("p",null,t("TOTAL_CAPACITY"))))}},{key:"renderMonitor",value:function(){var e=this.props.store.data,a=(0,g.default)(e,"".concat(w.inodeUtilisation,".data.result")),r=(0,g.default)(e,"".concat(w.inodeUsage,".data.result[0].values"),[]),n=(0,g.default)(e,"".concat(w.inodeTotal,".data.result[0].values"),[]),l=(0,b.getAreaChartOps)({title:t("INODE_USAGE"),unit:"%",legend:["USAGE"],data:a,renderTooltip:function(){var e=(0,b.getChartData)({unit:"",legend:["USAGE"],valuesData:[r]}),t=(0,b.getChartData)({unit:"",legend:["USAGE"],valuesData:[n]});return h.default.createElement(_.default,{usageData:e,totalData:t})}});return h.default.createElement(k.SimpleArea,(0,c.default)({width:"100%",theme:"dark"},l))}}]),r}(h.Component),o.propTypes={store:v.default.object,title:v.default.string},u=i))||u;a.default=P},function(e,t,a){e.exports={container:"_13Z7b3cjvhmpLe0KUbzqAt",foreground:"_3TfL5X9Mc8g67rVdS6xtnn",wave:"_1OUAyYJMCh_EFT7YqHPLcf",waveSvgAnim:"_2vCms5c2ENi0UHNXsn-Nq4",wave2:"tYraC1HrZ_ID_VK0NlShQ"}},function(e,t,a){e.exports={header:"_3Pl_R0wcwQevRKY7P8oG54",description:"_1PYL2e7XhkOXbMcByemY9u",card:"aKD2-VusiajGBBaV1KzL1"}},function(e,t,a){e.exports={ports:"_1dOJrC7ekQ1gXKM6_33D4S",card:"_1MzbqX43XhSd1UqAid__GI",content:"_jOZLR3Pnu_csBUoP3OxW",title:"_1iycdliRJ-zJtukw4fUxny",path:"_2Zmt7QXSDillM8wluwUbRt",access:"_3-ibjkTF_atqUgmGz49-fq"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(21)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=l(r(0)),m=n(r(741)),h=r(70),v=r(25),y=n(r(854)),g=r(276),b=n(r(137)),E=n(r(2905));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=(0,h.inject)("detailStore")(u=(0,h.observer)(u=function(e){(0,s.default)(r,e);var a=S(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=new y.default,e.fetchData=function(t){var a=e.props.detailStore.detail,r=a.cluster,n=a.namespace,l=a.name;e.store.fetchList(O({cluster:r,namespace:n,persistentVolumeClaimName:l},t))},e.handlePagination=function(t){e.fetchData({page:t})},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderSnapshot",value:function(e){var a=e.name,r=e.snapshotClassName,n=e.backupStatus,l=e.createTime,u=e.restoreSize,o=e.uid,i=e.namespace,c=t("CREATE_STATUS_".concat(n.toUpperCase())),s=this.props.detailStore,f=this.props.match.params.workspace,d=s.detail.cluster;return p.default.createElement("div",{className:E.default.item,key:o},p.default.createElement(v.Icon,{name:"snapshot",size:40}),p.default.createElement("div",{className:E.default.itemAttrs},p.default.createElement("h3",null,p.default.createElement(g.Link,{to:"".concat(f?"/".concat(f):"","/clusters/").concat(d,"/projects/").concat(i,"/volume-snapshots/").concat(a)},a)),p.default.createElement("p",null,r)),p.default.createElement("div",{className:E.default.itemAttrs},p.default.createElement("h3",null,c),p.default.createElement("p",null,t("STATUS"))),p.default.createElement("div",{className:E.default.itemAttrs},p.default.createElement("h3",null,u||"-"),p.default.createElement("p",null,t("CAPACITY"))),p.default.createElement("div",{className:E.default.itemAttrs},p.default.createElement("h3",null,(0,b.default)(l).format("YYYY-MM-DD HH:mm:ss")),p.default.createElement("p",null,t("CREATION_TIME_TCAP"))))}},{key:"render",value:function(){var e=this.store.list,a=e.total,r=e.page,n=e.limit,l=e.data;return p.default.createElement(m.default,{title:t("SNAPSHOT_PL")},p.default.createElement("div",{className:E.default.snapshotList},0===a?p.default.createElement("div",null,t("EMPTY_WRAPPER",{resource:t("VOLUME_SNAPSHOT")})):l.map(this.renderSnapshot,this)),a>n&&p.default.createElement(v.Level,{className:"margin-t12"},p.default.createElement(v.LevelLeft,null),p.default.createElement(v.LevelRight,null,p.default.createElement(v.Pagination,{page:r,total:a,limit:n,onChange:this.handlePagination}))))}}]),r}(p.Component))||u)||u;a.default=k},function(e,t,a){e.exports={snapshotList:"_2jCAEezl6R73XTOPiBn4te",item:"_11TgBCQ5wlEqrjSG8UCKv2",itemAttrs:"_3nM2SyRZUFZ4MvrSPfSnxB"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(762)),u=r(a(2907));t.default=function(e){return[{name:"source",path:"".concat(e,"/source"),title:"DATA_SOURCE",component:u.default},{name:"event",path:"".concat(e,"/event"),title:"EVENT_PL",component:l.default},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/source"),exact:!0}),(0,n.getIndexRoute)({path:"*",to:"/404",exact:!0})]}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=l(r(0)),p=r(70),m=r(25),h=n(r(723)),v=n(r(763)),y=r(37),g=r(5),b=n(r(32)),E=n(r(93)),_=n(r(2908));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=d.default.createElement("div",null,d.default.createElement("div",null,t("ACCESS_MODE_TCAP"),":"),d.default.createElement("div",null,"RWO (ReadWriteOnce): ",t("ACCESS_MODE_RWO")),d.default.createElement("div",null,"ROX (ReadOnlyMany): ",t("ACCESS_MODE_ROX")),d.default.createElement("div",null,"RWX (ReadWriteMany): ",t("ACCESS_MODE_RWX"))),k=(0,p.inject)("detailStore")(u=(0,p.observer)(u=function(e){(0,c.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).store=new v.default,e.renderItem=function(){var a=e.store.detail;return d.default.createElement("div",null,d.default.createElement("div",{className:_.default.ItemBox},d.default.createElement("div",{className:_.default.leftBox},d.default.createElement(m.Icon,{name:"storage",size:"40"}),d.default.createElement("div",{className:_.default.rightBox},d.default.createElement("span",{className:_.default.title},a.name),d.default.createElement("span",{className:_.default.des},t("STORAGE_CLASS_VALUE",{value:a.storageClassName})))),d.default.createElement("div",{className:_.default.titleBox},d.default.createElement("span",{className:_.default.title},(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")),d.default.createElement("span",{className:_.default.des},t("CREATION_TIME_TCAP")))),d.default.createElement("div",{className:_.default.IconLine},d.default.createElement(C,{icon:"bm",size:"30",title:"PROVISIONER",value:a.storageProvisioner}),d.default.createElement(C,{icon:function(){return d.default.createElement("img",{src:"/assets/Accessmodes.svg",size:48})},size:"48",title:function(){return e.renderAccessTitle()},value:function(){return e.mapperAccessMode((0,g.toJS)(a.accessModes))}}),d.default.createElement(C,{icon:"database",size:"30",title:"capacity",value:a.capacity})))},e.renderAccessTitle=function(){return d.default.createElement("div",{className:_.default.mode_title},t("ACCESS_MODE_TCAP"),d.default.createElement(m.Tooltip,{content:S},d.default.createElement(m.Icon,{name:"question",size:16,className:_.default.toolTip})))},e.mapperAccessMode=function(e){var t=(0,y.map_accessModes)(e);return d.default.createElement(d.default.Fragment,null,d.default.createElement("span",null,t.join(",")))},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.detailStore.detail,t=e.snapshotSourceName,a=e.namespace,r=e.backupStatus,n=e.cluster;"success"!==r?this.store.isLoading=!1:this.store.fetchDetail({cluster:n,name:t,namespace:a})}},{key:"render",value:function(){var e=this.store,a=e.detail,r=e.isLoading;return d.default.createElement(h.default,{title:t("PERSISTENT_VOLUME_CLAIM_PL")},!(0,b.default)(a)&&d.default.createElement(m.Loading,{spinning:r},this.renderItem()))}}]),r}(d.Component))||u)||u;function C(e){var a=e.icon,r=e.size,n=e.title,l=e.value;return d.default.createElement("div",{className:_.default.cardBox},(0,E.default)(a)?a():d.default.createElement(m.Icon,{name:a,size:r}),d.default.createElement("div",{className:_.default.text},d.default.createElement("span",{className:_.default.title},(0,E.default)(l)?l():l),d.default.createElement("span",{className:_.default.des},(0,E.default)(n)?n():t("".concat(n)))))}a.default=k},function(e,t,a){e.exports={ItemBox:"_2rhwnfvpstjxQQx-iPInoe",leftBox:"_1YI-oyP6dTh94ZwcbpxigX",rightBox:"eJH7iJaKPZKLFgDXmqK08",title:"_2JbKuVJygb48gCWLbqXpIK",toolTip:"_32bpTlOnzUmmjeLbBME2Yl",des:"_33og7e1ezVDJDLj4gWwdjr",mode_title:"ukd-30TUaATt7LCSZ7ssW",titleBox:"_3kfdVM7hcbDi01c3-6NdvL",IconLine:"_1WWpIMx2R6CDi6wzg7j5SO",cardBox:"_3tTt3g-BTthy5G5lzEfIlj",text:"_12NoRLLyx-wWyqKhnShYqg"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=l(r(16)),p=r(25),m=l(r(729));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,i.default)(r,e);var a=h(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.detail.health,a=(0,d.default)(this.props.detail,"lastError.description");return f.default.createElement("div",null,f.default.createElement(m.default,{type:e,name:t("ALERT_RULE_HEALTH_".concat(e.toUpperCase()))}),"err"===e&&a&&f.default.createElement(p.Tooltip,{content:a},f.default.createElement(p.Icon,{name:"question"})))}}]),r}(f.Component);a.default=v},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(2911)),u=r(a(2916));t.default=function(e){return[{path:"".concat(e,"/rules"),title:"ALERTING_RULE",component:l.default,exact:!0},{path:"".concat(e,"/messages"),title:"ALERTING_MESSAGE_PL",component:u.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/rules"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(5),p=r(70),m=n(r(16)),h=n(r(32)),v=n(r(723)),y=n(r(2912)),g=n(r(2913)),b=n(r(2914)),E=n(r(2915));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var O=(0,p.inject)("detailStore")(l=(0,p.observer)(l=function(e){(0,i.default)(r,e);var a=_(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.store.detail,a=(0,m.default)(e,"annotations.summary"),r=(0,m.default)(e,"annotations.message"),n=(0,m.default)(e,"annotations.kind"),l=(0,d.toJS)(e.resources);return f.default.createElement(f.default.Fragment,null,!(0,h.default)(e.rules)&&f.default.createElement(v.default,{title:t("ALERTING_RULE")},e.rules.map((function(e,t){return f.default.createElement(b.default,{key:t,data:e,resources:l,kind:n||"Node"})}))),e.query&&f.default.createElement(v.default,{title:t("RULE_EXPRESSION")},f.default.createElement(E.default,{query:e.query})),f.default.createElement(v.default,{title:t("METRIC_MONITORING")},f.default.createElement(g.default,{detail:e,store:this.store})),f.default.createElement(v.default,{title:t("ALERTING_MESSAGE")},f.default.createElement(y.default,{summary:a,message:r})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"module",get:function(){return this.store.module}},{key:"params",get:function(){return this.props.match.params}}]),r}(f.default.Component))||l)||l;a.default=O},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=l(r(1027));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,i.default)(r,e);var a=p(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.summary,r=e.message;return f.default.createElement("div",{className:d.default.notify},f.default.createElement("div",{className:d.default.title},t("NOTIFICATION_SUMMARY_COLON"),a),f.default.createElement("div",{className:d.default.content},t("DETAILS_COLON"),r))}}]),r}(f.Component);a.default=m},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(49)),o=l(r(21)),i=l(r(50)),c=l(r(12)),s=l(r(13)),f=l(r(19)),d=l(r(20)),p=l(r(18)),m=n(r(0)),h=l(r(190)),v=r(25),y=r(735),g=r(725),b=l(r(891)),E=r(768),_=l(r(1027));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=function(e){(0,f.default)(r,e);var a=k(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={metrics:[],step:"30s",times:60,isLoading:!0},e.fetchMetrics=function(){var t=(0,i.default)(u.default.mark((function t(a){var r,n,l,o,i,c,s,f,d,p,m;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.step,l=r.times,e.setState({isLoading:!0}),o=e.props.detail||{},i=o.query,c=o.cluster,s=o.namespace,f=(0,E.getTimeRange)({step:n,times:l}),d=f.start,p=f.end,t.next=6,e.props.store.fetchMetric(S({expr:i,end:p,start:d,step:n,cluster:c,namespace:s},a));case 6:m=t.sent,e.setState({metrics:m,times:l,step:n,isLoading:!1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.step,r=t.times;e.setState({step:(0,E.getMinuteValue)(a),times:r},(function(){e.fetchMetrics()}))},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchMetrics()}},{key:"render",value:function(){var e=this.state.metrics,a=this.state,r=a.times,n=a.step,l=a.isLoading,u=(0,g.getAreaChartOps)({height:500,title:t("ALERT_MONITORING"),data:e,legend:e.map((function(e){return e.metric?JSON.stringify((0,h.default)(e.metric,"__name__")):""}))});return m.default.createElement("div",{className:_.default.monitoring},m.default.createElement("div",{className:_.default.bar},m.default.createElement(b.default,{step:n,times:r,onChange:this.handleChange}),m.default.createElement(v.Button,{type:"control",icon:"refresh",iconType:"light",onClick:this.fetchMetrics})),m.default.createElement(v.Loading,{spinning:l},m.default.createElement(y.MultiArea,u)))}}]),r}(m.Component);a.default=C},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(16)),p=r(981),m=r(25),h=n(r(275)),v=n(r(1027));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=y(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.kind,r=e.data,n=void 0===r?{}:r,l=e.resources,u=void 0===l?[]:l,o=n.condition_type,i=n.thresholds,c=n.unit,f=n._metricType,y="".concat(t(a),": ").concat(u.join(", ")),g=(0,d.default)(p.ALL_METRICS_CONFIG,f)||{},b=" ".concat(o," ").concat(i).concat(c);return s.default.createElement("div",{className:v.default.item},s.default.createElement(h.default,{title:y,description:t("MONITORING_TARGETS_SCAP")}),s.default.createElement(h.default,{title:s.default.createElement("span",null,s.default.createElement(m.Icon,{name:g.prefixIcon||"appcenter",size:20}),t(g.label||"Unknown"),b),description:t("ACTIVATION_CONDITION_SCAP")}))}}]),r}(s.default.Component);a.default=g,g.propTypes={data:f.default.object,resources:f.default.array},g.defaultProps={data:{},resources:[]}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),u=n(a(13)),o=n(a(19)),i=n(a(20)),c=n(a(18)),s=r(a(0)),f=a(1189),d=n(a(1027));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var m=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).state={html:(0,f.highlightPromql)(e.props.query)},e}return(0,u.default)(a,[{key:"componentDidUpdate",value:function(e){e.query!==this.props.query&&this.setState({html:(0,f.highlightPromql)(this.props.query)})}},{key:"render",value:function(){return s.default.createElement("div",{className:d.default.query,dangerouslySetInnerHTML:{__html:this.state.html}})}}]),a}(s.Component);t.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(70),m=n(r(16)),h=n(r(303)),v=n(r(32)),y=r(276),g=r(25),b=r(37),E=r(58),_=r(980),O=n(r(1386)),S=n(r(723)),k=n(r(275)),C=n(r(835)),R=r(836),w=n(r(2917));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var N=(0,p.observer)(l=function(e){(0,c.default)(r,e);var a=T(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).fetchData=function(e){var t=n.props.match.params,a=t.cluster,r=t.namespace,l=t.name,u=D(D({},e),{},{cluster:a,namespace:r,ruleName:l,type:n.type});n.store.fetchList(u)},n.getResourceType=function(e){var a=(0,h.default)(e);return t("ALERT_TYPE",{type:t(a)})},n.getColumns=function(){return[{title:t("MESSAGE"),dataIndex:"value",render:function(e,t){return d.default.createElement(k.default,{icon:"loudspeaker",title:(0,m.default)(t,"annotations.summary"),description:(0,m.default)(t,"annotations.message")||(0,m.default)(t,"annotations.description","-")})}},{title:t("SEVERITY"),dataIndex:"labels.severity",width:"15%",render:function(e){var a=R.SEVERITY_LEVEL.find((function(t){return t.value===e}));return a?d.default.createElement(g.Tag,{type:a.type},t(a.label)):d.default.createElement(g.Tag,null,e)}},{title:t("MONITORING_TARGET"),dataIndex:"labels",isHideable:!0,width:"20%",render:function(e){var a=(0,_.getAlertingResource)(e),r=a.module,l=a.name,u=a.namespace;return r?"hpas"===r?d.default.createElement("span",null,t(E.MODULE_KIND_MAP[r]),": ",l):d.default.createElement(y.Link,{to:"".concat(n.getPrefix({namespace:u}),"/").concat(r,"/").concat(l)},t(E.MODULE_KIND_MAP[r]),": ",l):"-"}},{title:t("ACTIVATION_TIME"),dataIndex:"activeAt",isHideable:!0,width:200,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.store=new O.default,n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getPrefix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=this.props.match.params,n=r.cluster,l=r.namespace,u=r.workspace;return t=t||n,a=a||l,"".concat(u?"/".concat(u):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"")}},{key:"render",value:function(){var e=this.store.list,a=e.data,r=e.isLoading,n=e.filters;return d.default.createElement(S.default,{title:t("ALERTING_MESSAGE_PL"),loading:r},(0,v.default)(a)?d.default.createElement("div",null,t("NO_DATA_DESC")):d.default.createElement(C.default,{className:w.default.table,filters:n,data:a,name:"Alerting Message",rowKey:"value",columns:this.getColumns(),selectedRowKeys:[],selectActions:[],hideHeader:!0,hideFooter:!0}))}},{key:"type",get:function(){return this.props.match.url.indexOf("alert-rules/builtin")>0?"builtin":""}}]),r}(d.default.Component))||l;a.default=N},function(e,t,a){e.exports={table:"_1S6EGnQYhf4I_C9HYIeYHi"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(71)),c=n(r(21)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(70),y=n(r(1)),g=n(r(3)),b=n(r(93)),E=r(25),_=r(725),O=n(r(2957)),S=n(r(2958));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(0,v.inject)("rootStore")(l=(0,v.observer)((o=u=function(e){(0,d.default)(r,e);var a=k(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props,a=t.onClick,r=t.name,n=t.routeName,l=t.workspace,u=t.namespace,o=t.cluster;(0,b.default)(a)?a(r):n&&e.routing.push(l?"/".concat(l,"/clusters/").concat(o,"/projects/").concat(u,"/").concat(n):"/clusters/".concat(o,"/").concat(n,"?namespace=").concat(u))},e.handleWarnClick=function(t){t.stopPropagation();var a=e.props,r=a.routeName,n=a.onClick,l=a.name,u=a.workspace,o=a.namespace,i=a.cluster,c="volumes"===r?"pending":"updating";(0,b.default)(n)?n(l,c):r&&e.routing.push(u?"/".concat(u,"/clusters/").concat(i,"/projects/").concat(o,"/").concat(r,"?status=").concat(c):"/clusters/".concat(i,"/").concat(r,"?status=").concat(c))},e}return(0,f.default)(r,[{key:"renderWarn",value:function(){var e=this.props,a=e.warnNum,r=e.name,n=a>99?h.default.createElement("div",{className:S.default.skip},"..."):a;return a>0?h.default.createElement("div",{className:S.default.warn},h.default.createElement(E.Tooltip,{className:S.default.tips,content:t("RESOURCE_WARNING_TIPS",{warnNum:a,tipName:t("".concat(r,"_PL"))})},h.default.createElement("div",{onClick:this.handleWarnClick},n))):null}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.icon,n=e.iconSize,l=e.name,u=e.routeName,o=e.num,s=e.metrics,f=e.onClick,d=(0,_.getAreaChartOps)({title:"",unit:"",legend:["COUNT"],data:s});return h.default.createElement("div",{"data-name":l,className:(0,g.default)(S.default.card,a)},h.default.createElement("div",{className:S.default.icon},h.default.createElement(E.Icon,{name:r,size:n}),this.renderWarn()),h.default.createElement("div",{className:(0,g.default)(S.default.info,(0,c.default)({},S.default.cursor,u||f)),onClick:this.handleClick},h.default.createElement("strong",null,o),h.default.createElement("span",null,"1"===o?t(l):t("".concat(l,"_PL")))),h.default.createElement(O.default,(0,i.default)({width:330,height:44,bgColor:"transparent"},d)))}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(h.default.Component),u.propTypes={className:y.default.string,icon:y.default.string,iconSize:y.default.number,name:y.default.string,namespace:y.default.string,routeName:y.default.string,num:y.default.oneOfType([y.default.number,y.default.string]),warnNum:y.default.number,onClick:y.default.func},u.defaultProps={icon:"appcenter",iconSize:40,name:"deployment",namespace:"default",routeName:"",num:0,warnNum:0},l=o))||l)||l;a.default=C},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=a(58),d=r(a(800)),p=r(a(783)),m=r(a(772)),h=r(a(840)),v=r(a(825)),y=r(a(784)),g=r(a(785));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var E=function(e){(0,u.default)(a,e);var t=b(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"getVeticalPoints",value:function(){var e=this.props.width,t=(e-10)/10;return Array(10).fill("").map((function(e,a){return 5+t*a}))}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,a=e.areaColors,r={stroke:"#55bc8a",strokeWidth:1,fill:"#fff",fillOpacity:1};return this.series.map((function(e,n){var l=f.COLORS_MAP[a[n]];return c.default.createElement(d.default,{key:e,dataKey:e,stroke:l,fillOpacity:"0.1",fill:l,unit:t,dot:r})}))}},{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,r=e.xKey,n=e.data;return c.default.createElement(y.default,{width:t,height:a,debounce:1},c.default.createElement(h.default,{data:n},c.default.createElement(m.default,{dataKey:r,hide:!0}),c.default.createElement(p.default,{wrapperStyle:{zIndex:1e3},content:c.default.createElement(g.default,null)}),c.default.createElement(v.default,{strokeDasharray:"3 6",horizontal:!1,verticalPoints:this.getVeticalPoints()}),this.renderArea()))}},{key:"series",get:function(){var e=this.props,t=e.xKey,a=e.data;return Object.keys(a[0]||{}).filter((function(e){return e!==t}))}}]),a}(c.default.Component);t.default=E,E.propTypes={width:s.default.oneOfType([s.default.string,s.default.number]),height:s.default.oneOfType([s.default.string,s.default.number]),xKey:s.default.string,unit:s.default.string,data:s.default.array,bgColor:s.default.string,areaColors:s.default.array},E.defaultProps={width:180,height:56,xKey:"time",unit:"",bgColor:f.COLORS_MAP.lightest,areaColors:["green","blue","yellow","red"],data:[]}},function(e,t,a){e.exports={card:"_2EqCYVjXVpgt08cuRczGSh",icon:"_36HfcePtCXEzvj8yzTS4vF",warn:"_1ntTH3ZrzLLbchIomuwlhQ",tips:"-w63JOV5KksV8TOcQl-U3",skip:"_2kxI8l5XqQlDPtMvynz3RZ",info:"_1u4G7Fwu2z6_yIx2xKMV71",cursor:"_1gP2nTFiH8FENSNxmyr2hr"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(1)),f=a(58),d=r(a(800)),p=r(a(783)),m=r(a(810)),h=r(a(772)),v=r(a(840)),y=r(a(825)),g=r(a(784)),b=r(a(785));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var _=function(e){(0,u.default)(a,e);var t=E(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.x,a=e.y,r=e.payload;return c.default.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},c.default.createElement("text",{x:0,y:0,dy:12,fill:"#79879c",textAnchor:"middle"},r.value))}}]),a}(c.default.PureComponent),O=function(e){(0,u.default)(a,e);var t=E(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"getHorizontalPoints",value:function(){var e=this.props.height,t=(e-30-6)/4;return Array(4).fill("").map((function(e,a){return 30+t*a}))}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,a=e.areaColors;return this.series.map((function(e,r){var n=f.COLORS_MAP[a[r]];return c.default.createElement(d.default,{key:e,dataKey:e,stroke:n,fillOpacity:"1",fill:"url(#colorPv)",unit:t})}))}},{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,r=e.xKey,n=e.data;return c.default.createElement(g.default,{width:t,height:a,debounce:1},c.default.createElement(v.default,{data:n,margin:{top:32,left:16,right:16,bottom:0}},c.default.createElement("defs",null,c.default.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},c.default.createElement("stop",{offset:"5%",stopColor:"#55bc8a",stopOpacity:.2}),c.default.createElement("stop",{offset:"95%",stopColor:"#55bc8a",stopOpacity:0}))),c.default.createElement(y.default,{vertical:!1,stroke:"#36435c",strokeDasharray:"2 2",horizontalPoints:this.getHorizontalPoints()}),c.default.createElement(h.default,{dataKey:r,axisLine:!1,tickLine:!1,height:30,interval:"preserveStart",tick:c.default.createElement(_,null),minTickGap:20}),c.default.createElement(m.default,{hide:!0,type:"number",domain:[function(e){return 0-Math.abs(e)},function(e){return 1.6*e}]}),c.default.createElement(p.default,{wrapperStyle:{zIndex:1e3},content:c.default.createElement(b.default,null)}),this.renderArea()))}},{key:"series",get:function(){var e=this.props,t=e.xKey,a=e.data;return Object.keys(a[0]||{}).filter((function(e){return e!==t}))}}]),a}(c.default.Component);t.default=O,O.propTypes={width:s.default.oneOfType([s.default.string,s.default.number]),height:s.default.oneOfType([s.default.string,s.default.number]),xKey:s.default.string,unit:s.default.string,data:s.default.array,bgColor:s.default.string,areaColors:s.default.array},O.defaultProps={width:180,height:56,xKey:"time",unit:"",bgColor:f.COLORS_MAP.lightest,areaColors:["green","blue","yellow","red"],data:[]}},function(e,t,a){e.exports={wrapper:"_235Ydzrxtn47mC5KVnUqMN",chartWrapper:"_1Ih0Px-Zxe5AwW8uJkqt8N",chart:"_3awmU2UAJvmujW7qMl0RAz",title:"_2jhkSzEfNoOh15_4kzbLaw"}},function(e,t,a){e.exports={wrapper:"_29aBx9QNbrjLovrOIFCqJl",header:"_3S-YBwfAwlBHzJQi5UvabR",timeSelect:"_3zET3ukjC_TJNnZ6Dw5ePh"}},,,,function(e,t,a){"use strict";a.r(t),a.d(t,"ReactComponent",(function(){return i}));var r=a(71),n=a.n(r),l=a(0),u=a.n(l),o=u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.4 25L8.733 23.75V0L20.4 25zm-20 0l6.667-1.25V10L.4 25zm0 1.667h20L7.9 30 .4 26.667z",fill:"#36435C"}),i=function(e){return u.a.createElement("svg",n()({viewBox:"0 0 21 30",fill:"none",width:"1em",height:"1em"},e),o)};t.default="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjEgMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNCAyNUw4LjczMzM2IDIzLjc1VjBMMjAuNCAyNVpNMC40MDAwMjQgMjVMNy4wNjY2OSAyMy43NVYxMEwwLjQwMDAyNCAyNVpNMC40MDAwMjQgMjYuNjY2N0gyMC40TDcuOTAwMDIgMzBMMC40MDAwMjQgMjYuNjY2N1oiIGZpbGw9IiMzNjQzNUMiLz4KPC9zdmc+Cg=="},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(0)),u=r(25),o=n(r(303)),i=n(r(16)),c=n(r(723)),s=r(37),f=n(r(2967)),d=function(e){var a=e.component,r=e.type,n=e.handleCreateGateway,d=e.cluster,p=e.canEdit,m=a||r,h=globals.app.isMultiCluster?(0,i.default)(globals,"clusterConfig.".concat(d,".ksVersion")):(0,i.default)(globals,"ksConfig.ksVersion"),v=(0,s.compareVersion)(h,"v3.2.0")<0;return l.default.createElement(c.default,{className:"margin-t12 margin-b12"},l.default.createElement("div",{className:f.default.empty},l.default.createElement("div",{className:f.default.icon},l.default.createElement(u.Icon,{name:"loadbalancer",size:48})),l.default.createElement("div",{className:f.default.text},l.default.createElement("div",null,t("".concat((0,o.default)(m).toUpperCase(),"_GATEWAY_NOT_ENABLED"))),v?l.default.createElement("p",null,t("CLUSTER_UPGRADE_REQUIRED",{version:"3.2"}),l.default.createElement(u.Icon,{name:"update",color:{primary:"#f5a623 ",secondary:"#ffe1be"}})):l.default.createElement("p",null,t("".concat(m.toUpperCase(),"_ENABLE_GATEWAY_DESC")))),("cluster"===a||r)&&!p&&l.default.createElement(u.Button,{type:"control",onClick:n,disabled:v},t("ENABLE_GATEWAY"))))};a.default=d},function(e,t,a){e.exports={empty:"_3HZVm8i6IadwtxGrnqMR7_",icon:"_3dvfboot-4SALZ8vO56p0x",text:"j_JN-6JOnqtEGFgydFH_n"}},function(e,t,a){e.exports={container:"_1AlzVbABmp4ycHK1g3cNFC",item:"fuZrziso64X_zghKUPExW",header:"ac3mq3s0q-DhY3pP_adTF",customIcon:"_2GiBTBxd59F0dPeU4ph9TM",annotations:"_1gd_UYaGne3VIj0ATRJXFu",bgWhite:"zc0N-dc0ltthVJfwxG9iv",federatedContainer:"kA_HUVOWcFM1p5KHYjL3P"}},,,function(e,t,a){e.exports={item:"_3AKgHrYF7Fu8kENV1qw1Xg",content:"_7hMYwDpNDo4VWwNVsinXF",contentItem:"_8Zz1AYqtLjXcwA84SIji2"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(136)),u=n(r(0)),o=n(r(16)),i=n(r(68)),c=r(25),s=n(r(1151)),f=r(37),d=r(58),p=n(r(2974)),m=["limits.cpu","limits.memory","pods"],h={Ti:Math.pow(1024,4),Gi:Math.pow(1024,3),Mi:Math.pow(1024,2),Ki:1024,TB:Math.pow(1e3,4),GB:Math.pow(1e3,3),MB:Math.pow(1e3,2),KB:1e3,T:Math.pow(1e3,4),G:Math.pow(1e3,3),M:Math.pow(1e3,2),K:1e3,Bytes:1,B:1},v=function(e){var a=e.name,r=e.total,n=e.used;if(!r&&!Number(n)&&-1===m.indexOf(a))return null;var v=0,y="",g="",b=function(e){return function(e,t){return e?[e,parseFloat(t)*(d.ICON_TYPES[a]||!h[e]?1:h[e])]:["",parseFloat(t)]}(function(e){var t=Object.keys(h),a=(0,o.default)(e.match(/[0-9]+([a-zA-Z]+)/),"1","");return t.forEach((function(e){if(a.indexOf(e)>-1)return a=e,!1})),a}(e),e)};if("limits.cpu"===a||"requests.cpu"===a)r&&(v=Number((0,f.cpuFormat)(n))/Number((0,f.cpuFormat)(r)),n="".concat((0,f.cpuFormat)(n)," Core"),r="".concat((0,f.cpuFormat)(r)," Core"));else if("limits.memory"===a||"requests.memory"===a)r&&(v=Number((0,f.memoryFormat)(n))/Number((0,f.memoryFormat)(r)),n="".concat((0,f.memoryFormat)(n,"Gi")," Gi"),r="".concat((0,f.memoryFormat)(r,"Gi")," Gi"));else if(r){var E=b(n),_=(0,l.default)(E,2),O=_[0],S=_[1],k=b(r),C=(0,l.default)(k,2),R=C[0],w=C[1];y=O,g=R,v=S/w}v=Math.min(Math.max(v,0),1);var P=a.indexOf("gpu")>-1?"gpu":a,D="gpu"===P?"".concat(P,".limit"):P;return u.default.createElement("div",{className:p.default.quota},u.default.createElement(c.Icon,{name:d.ICON_TYPES[P]||"resource",size:40}),u.default.createElement("div",{className:p.default.item},u.default.createElement("div",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d.ICON_TYPES[P]?t(e.replace(/[. ]/g,"_").toUpperCase()):e}(D)),u.default.createElement("p",null,t("RESOURCE_TYPE_SCAP"))),u.default.createElement("div",{className:p.default.item},u.default.createElement("div",null,function(e){if(g&&!y){var t=d.ICON_TYPES[a]||!h[g]?1:h[g];return"".concat(e/t).concat(e>0?g:"")}return e}(n)),u.default.createElement("p",null,t("USED"))),u.default.createElement("div",{className:p.default.item},u.default.createElement("div",null,(0,i.default)(r)?t("NO_LIMIT_TCAP"):r),u.default.createElement("p",null,t("QUOTA"))),u.default.createElement("div",{className:p.default.item,style:{flex:3}},u.default.createElement("div",null,t("USAGE")),u.default.createElement(s.default,{value:Math.min(v,1),className:p.default.bar,rightText:r?"":t("NO_LIMIT"),text:t("USED_PERCENT",{percent:Number((100*v).toFixed(2))})})))};a.default=v},function(e,t,a){e.exports={wrapper:"Q_yoqMyHYRLhqO4OmHVAR",bar:"_2RqAFCRnJGhdGcLjgYVZoV",warning:"ffPTDheSR8s0ufnGnLXfI",danger:"_2bR-6dSmJhc9TQoMtApSPK",text:"zE3eZ0tTxqO2Wq9o0c8Rs",rightText:"_2mWgH7ErUIeBuy6hQRCAvY"}},function(e,t,a){e.exports={quota:"_3_ChjGbxbGEOsl-bn45v6",item:"_39hSvb0gytLzXkJepmuZYY",bar:"_3C2DyYLkZ1uZmTpxOaCjMD"}},function(e,t,a){e.exports={wrapper:"_2SomAa9Qr3FAZCUu_vfPVg",header:"_3IWXKjfTi9VrsxbWViUQan",item:"tXNdZn2Wks84tQIm0_DB",content:"_1slhrCDV-prgABOLHi36ms",contentItem:"nMyfCUkpNIE-XvgWGaFJd"}},,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(2992));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var p=function(e){(0,o.default)(r,e);var a=d(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.templates;return s.default.createElement("ul",{className:f.default.wrapper,"data-test":"rule-list"},Object.keys(e).map((function(a){return s.default.createElement("li",{key:a},s.default.createElement("div",{className:f.default.name},t("PERMIGROUP_".concat(a.toUpperCase().replace(/[^A-Z]+/g,"_")))),s.default.createElement("div",null,e[a].map((function(e){return t("PERMISSION_".concat(e.aliasName.toUpperCase().replace(/[^A-Z]+/g,"_")))})).join("  |  ")))})))}}]),r}(s.default.Component);a.default=p},function(e,t,a){e.exports={wrapper:"z2WyR5A5wRu0YtfOojEJ8",name:"_2Qe_QRdB_yNsSo5jz4l2m"}},function(e,t,a){e.exports={table:"_2rTR6NVDPyorYXDf3Og1lV"}},,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),l=r(a(3005)),u=r(a(3006)),o=r(a(3014)),i=r(a(3018)),c=r(a(3019));t.default=function(e){return[{path:"".concat(e,"/monitors"),title:"MONITORING",component:u.default,exact:!0},{path:"".concat(e,"/gateway-configs"),title:"CONFIGURATION_OPTIONS",component:i.default,exact:!0},{path:"".concat(e,"/logs"),title:"GATEWAY_LOGS",component:c.default,exact:!0},{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/monitors"),exact:!0})]}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,o=n(r(136)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=l(r(0)),m=n(r(723)),h=n(r(32)),v=r(70),y=n(r(1455));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=(0,v.inject)("detailStore")(u=(0,v.observer)(u=function(e){(0,s.default)(r,e);var a=g(r);function r(){return(0,i.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.detail.annotations;return p.default.createElement(m.default,{title:t("ANNOTATION_PL")},p.default.createElement("div",{className:y.default.container},p.default.createElement("ul",null,(0,h.default)(e)?p.default.createElement("li",null,t("NO_DATA")):Object.entries(e).map((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return p.default.createElement("li",{key:a},p.default.createElement("span",{className:y.default.key},a),p.default.createElement("span",null,r))})))))}},{key:"store",get:function(){return this.props.detailStore}},{key:"detail",get:function(){return this.store.gateway.data||{}}}]),r}(p.Component))||u)||u;a.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(71)),o=n(r(49)),i=n(r(21)),c=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(70),y=n(r(16)),g=n(r(32)),b=r(725),E=n(r(1153)),_=r(25),O=r(779),S=r(735),k=n(r(3007));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P={ingress_request_count:"ingress_request_count",ingress_request_5xx_count:"ingress_request_5xx_count",ingress_request_4xx_count:"ingress_request_4xx_count",ingress_active_connections:"ingress_active_connections",ingress_success_rate:"ingress_success_rate",ingress_request_duration_average:"ingress_request_duration_average",ingress_request_duration_50percentage:"ingress_request_duration_50percentage",ingress_request_duration_95percentage:"ingress_request_duration_95percentage",ingress_request_duration_99percentage:"ingress_request_duration_99percentage",ingress_request_volume:"ingress_request_volume",ingress_request_volume_by_ingress:"ingress_request_volume_by_ingress",ingress_request_network_sent:"ingress_request_network_sent",ingress_request_network_received:"ingress_request_network_received"},D=(0,v.inject)("detailStore")(l=(0,v.observer)(l=function(e){(0,d.default)(r,e);var a=w(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).monitorStore=new E.default({cluster:e.cluster}),e.state={options:[],podsName:""},e.fetchData=function(){var t=(0,c.default)(o.default.mark((function t(a){var r,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.detail.name,t.next=3,e.getGatewayPods();case 3:n=t.sent,e.monitorStore.fetchMetrics(R({resources:[],metrics:Object.values(P),job:"".concat(r,"-metrics"),namespace:e.namespace,pod:n,fillZero:!0},a)),e.setState({timeParams:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlePodName=function(t){var a=e.detail.name,r=e.state.timeParams;e.monitorStore.fetchMetrics(R({resources:[],metrics:Object.values(P),job:"".concat(a,"-metrics"),namespace:e.namespace,pod:t},r)),e.setState({podsName:t})},e.getGatewayPods=(0,c.default)(o.default.mark((function t(){var a,r,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.getGatewayPods(R(R({},e.props.match.params),{},{cluster:e.cluster}));case 2:return a=t.sent,"",n=(0,g.default)(a)?[]:a.map((function(e){return{label:e.name,value:e.name}})),r=(0,g.default)(n)?"":n[0].value,e.setState({options:n,podsName:r}),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)}))),e.getMonitoringCfgs=function(){var a=(0,y.default)(e.metrics,"".concat(P.ingress_request_volume_by_ingress,".data.result"),[]);return[{title:"REQUEST_COUNT",unit:"",legend:a.map((function(e){return(0,y.default)(e,"metric.ingress","")})),data:a},{title:"CONNECTION_COUNT",unit:"",legend:["CONNECTION_COUNT"],data:(0,y.default)(e.metrics,"".concat(P.ingress_active_connections,".data.result"),{})},{title:"REQUEST_LATENCY_MS",legend:[t("P_FIFTY_LATENCY"),t("P_NINETY_FIVE_LATENCY"),t("P_NINETY_NINE_LATENCY"),t("AVERAGE_LATENCY")],data:[(0,y.default)(e.metrics,"".concat(P.ingress_request_duration_50percentage,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_duration_95percentage,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_duration_99percentage,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_duration_average,".data.result[0]"),{})],dot:4},{title:"FAILED_REQUEST_COUNT",unit:"",legend:[t("FOUR_XX_REQUEST_COUNT"),t("FIVE_XX_REQUEST_COUNT")],data:[(0,y.default)(e.metrics,"".concat(P.ingress_request_4xx_count,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_5xx_count,".data.result[0]"),{})]},{title:"NETWORK_TRAFFIC",unit:"",unitType:"traffic",legend:[t("INBOUND_TRAFFIC"),t("INBOUND_TRAFFIC")],data:[(0,y.default)(e.metrics,"".concat(P.ingress_request_network_received,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_network_sent,".data.result[0]"),{})]}]},e}return(0,f.default)(r,[{key:"render",value:function(){var e=(0,y.default)(this.store.detail,"createTime"),t=this.monitorStore,a=t.isLoading,r=t.isRefreshing,n=this.state,l=n.podsName,o=n.options,i=this.getMonitoringCfgs();return h.default.createElement("div",null,h.default.createElement(k.default,this.props),h.default.createElement(O.Controller,{createTime:e,onFetch:this.fetchData,loading:a,refreshing:r,title:h.default.createElement(_.Select,{value:l,options:o,onChange:this.handlePodName}),isEmpty:(0,g.default)(this.metrics)},i.map((function(e){var t=(0,b.getAreaChartOps)(e);return(0,g.default)(t.data)?null:h.default.createElement(S.SimpleArea,(0,u.default)({key:t.title,width:"100%"},t))}))))}},{key:"store",get:function(){return this.props.detailStore}},{key:"detail",get:function(){return this.store.gateway.data||{}}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.location.pathname.indexOf("federatedprojects")>-1?localStorage.getItem("federated-cluster"):e}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"metrics",get:function(){return this.monitorStore.data}}]),r}(h.default.Component))||l)||l;a.default=D},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),u=n(r(21)),o=n(r(50)),i=n(r(12)),c=n(r(13)),s=n(r(135)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(25),v=r(735),y=n(r(3)),g=r(3008),b=n(r(1153)),E=n(r(32)),_=n(r(16)),O=r(725),S=n(r(3009)),k=n(r(3013));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P={ingress_request_count:"ingress_request_count",ingress_request_5xx_count:"ingress_request_5xx_count",ingress_request_4xx_count:"ingress_request_4xx_count",ingress_active_connections:"ingress_active_connections",ingress_success_rate:"ingress_success_rate",ingress_request_duration_average:"ingress_request_duration_average",ingress_request_duration_50percentage:"ingress_request_duration_50percentage",ingress_request_duration_95percentage:"ingress_request_duration_95percentage",ingress_request_duration_99percentage:"ingress_request_duration_99percentage"},D=function(e){(0,f.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,c=new Array(n),f=0;f<n;f++)c[f]=arguments[f];return(e=a.call.apply(a,[this].concat(c))).state={enableAutoRefresh:!0,autoRefresh:!1,duration:"10m",metrics:{},errorType:"ingress_request_4xx_count"},e.monitorStore=new b.default({cluster:e.cluster}),e.handleChange=function(t){e.setState({duration:t},(function(){e.fetchData()}))},e.handleRequestError=function(t){e.setState({errorType:t})},e.fetchData=function(){var t=(0,o.default)(l.default.mark((function t(a){var r,n,u,o,i,c,s;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.duration,e.setState({isLoading:!0}),n=e.detail||{},u=n.cluster,o=n.name,i=o.split("kubesphere-router-")[1],t.next=6,e.monitorStore.fetchGatewayMetrics(R({duration:r,cluster:u,namespace:i,metrics:Object.values(P),job:"".concat(o,"-metrics")},a));case 6:c=t.sent,s=e.handleMetricsData(c),e.setState({metrics:R({},s),duration:r,isLoading:!1});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleMetricsData=function(e){if(!(0,E.default)(e)){var t={};return Object.values(P).map((function(t){return e[t]})).forEach((function(e){var a=(0,_.default)(e,"data.result[0].value[1]",0),r="string"==typeof a&&a.indexOf(".")>-1?Number(a).toFixed(4):isNaN(Number(a))?0:a;t[e.metric_name]=r})),t}},e.handleAutoRefresh=function(){e.setState({autoRefresh:!e.state.autoRefresh},(function(){e.state.autoRefresh?(0,O.startAutoRefresh)((0,s.default)(e)):(0,O.stopAutoRefresh)((0,s.default)(e))}))},e.handleRefresh=function(){e.fetchData()},e.renderAutoRefresh=function(){var t=e.state,a=t.enableAutoRefresh,r=t.autoRefresh;return a?m.default.createElement(h.Button,{className:k.default.button,type:"control",icon:r?"pause":"start",iconType:"light",onClick:e.handleAutoRefresh}):null},e.getMetricsData=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,_.default)(e.state.metrics,"".concat(t),a)},e.renderCustomLegend=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(e.className,e.payload),r=e.activeSeries,n=void 0===r?[]:r,l=e.showAll,o=void 0!==l&&l,i=a||[];if(i.length<2&&!o)return m.default.createElement("div",{className:k.default.legend});var c=function(t){var a=e.onClick;a&&a(t,(0,_.default)(t.target,"dataset.key"))};return m.default.createElement("div",{className:k.default.legend,onClick:c},i.map((function(e){var a=!n.includes(e.value),r=(0,_.default)(e,"payload.stroke");return m.default.createElement("div",{key:e.dataKey,"data-key":e.dataKey,className:(0,y.default)(k.default.item,(0,u.default)({},k.default.inactive,a))},m.default.createElement("i",{style:{backgroundColor:r}}),t(e.value))})))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(this.props.match.params)}},{key:"render",value:function(){var e=this.state,a=e.duration,r=e.errorType;return m.default.createElement("div",{className:k.default.overview},m.default.createElement("div",{className:k.default.header},m.default.createElement("p",{className:k.default.title},t("Overview")),m.default.createElement("div",{className:k.default.operations},m.default.createElement(S.default,{duration:a,onChange:this.handleChange}),this.renderAutoRefresh(),m.default.createElement(h.Button,{className:k.default.button,type:"control",icon:"refresh",iconType:"light",onClick:this.handleRefresh}))),m.default.createElement("div",{className:k.default.body},m.default.createElement("div",{className:k.default.left},m.default.createElement("div",{className:k.default.item},m.default.createElement(h.Icon,{name:"gateway",size:56}),m.default.createElement("div",null,m.default.createElement("p",null,t("TOTAL_REQUESTS")),m.default.createElement("span",null,this.getMetricsData("ingress_request_count")))),m.default.createElement("div",{className:k.default.item},m.default.createElement(h.Icon,{name:"error",size:56}),m.default.createElement("div",null,m.default.createElement(h.Select,{width:30,value:r,options:[{label:t("FOUR_XX_REQUEST_COUNT"),value:"ingress_request_4xx_count"},{label:t("FIVE_XX_REQUEST_COUNT"),value:"ingress_request_5xx_count"}],onChange:this.handleRequestError}),m.default.createElement("span",null,this.getMetricsData(r))))),m.default.createElement("div",{className:k.default.middle},m.default.createElement(v.SimpleCircle,{theme:"light",width:200,height:200,title:"",value:"".concat((100*this.getMetricsData("ingress_success_rate")).toFixed(2)),total:100,unit:"%",innerRadius:"80%",legend:["SUCCESSFUL_REQUESTS","TOTAL"],showCenter:!0,showRate:!1,areaColors:["#55BC8A","#E3E9EF"],renderCustomCenter:function(e){var a=e.value;return m.default.createElement("div",{className:k.default.simpleContent},m.default.createElement("p",null,t("SUCCESSFUL_REQUESTS")),m.default.createElement("span",null,a,"%"))}})),m.default.createElement("div",{className:k.default.right},m.default.createElement("div",{className:k.default.item},m.default.createElement("span",{className:k.default.customIcon},m.default.createElement(g.ReactComponent,null)),m.default.createElement("div",null,m.default.createElement("p",null,t("AVERAGE_LATENCY")),m.default.createElement("span",null,"".concat(this.getMetricsData("ingress_request_duration_average")," ms")))),m.default.createElement("div",{className:k.default.itemSmall},m.default.createElement("span",null,t("P_FIFTY_LATENCY")),m.default.createElement("span",null,"".concat(this.getMetricsData("ingress_request_duration_50percentage")," ms"))),m.default.createElement("div",{className:k.default.itemSmall},m.default.createElement("span",null,t("P_NINETY_FIVE_LATENCY")),m.default.createElement("span",null,"".concat(this.getMetricsData("ingress_request_duration_95percentage")," ms"))),m.default.createElement("div",{className:k.default.itemSmall},m.default.createElement("span",null,t("P_NINETY_NINE_LATENCY")),m.default.createElement("span",null,"".concat(this.getMetricsData("ingress_request_duration_99percentage")," ms"))))))}},{key:"detail",get:function(){return this.props.detailStore.gateway.data}}]),r}(m.default.Component);a.default=D},function(e,t,a){"use strict";a.r(t),a.d(t,"ReactComponent",(function(){return c}));var r=a(71),n=a.n(r),l=a(0),u=a.n(l),o=u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.514 45.2c10.235 0 18.515-8.28 18.515-18.514 0-9.515-7.2-17.383-16.458-18.412v-2.16h3.086V2H17.371v4.114h3.086v2.16C11.2 9.303 4 17.12 4 26.686 4 36.92 12.28 45.2 22.514 45.2zm0-32.514c7.7 0 14 6.3 14 14s-6.3 14-14 14-14-6.3-14-14 6.3-14 14-14zM32.8 8.994l2.983-2.983c2.88 1.852 5.4 4.32 7.251 7.252l-2.983 2.983A20.41 20.41 0 0032.8 8.994z",fill:"#36435C"}),i=u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.514 37.486c5.981 0 10.8-4.819 10.8-10.8 0-5.982-4.819-10.8-10.8-10.8v10.8h-10.8c0 5.981 4.818 10.8 10.8 10.8z",fill:"#CCD3DB"}),c=function(e){return u.a.createElement("svg",n()({viewBox:"0 0 48 48",fill:"none",width:"1em",height:"1em"},e),o,i)};t.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMi41MTQzIDQ1LjJDMzIuNzQ4NiA0NS4yIDQxLjAyODYgMzYuOTIgNDEuMDI4NiAyNi42ODU3QzQxLjAyODYgMTcuMTcxNCAzMy44Mjg2IDkuMzAyODYgMjQuNTcxNCA4LjI3NDI5VjYuMTE0MjlIMjcuNjU3MVYySDE3LjM3MTRWNi4xMTQyOUgyMC40NTcxVjguMjc0MjlDMTEuMiA5LjMwMjg2IDQgMTcuMTIgNCAyNi42ODU3QzQgMzYuOTIgMTIuMjggNDUuMiAyMi41MTQzIDQ1LjJaTTIyLjUxNDMgMTIuNjg1N0MzMC4yMTQzIDEyLjY4NTcgMzYuNTE0MyAxOC45ODU3IDM2LjUxNDMgMjYuNjg1N0MzNi41MTQzIDM0LjM4NTcgMzAuMjE0MyA0MC42ODU3IDIyLjUxNDMgNDAuNjg1N0MxNC44MTQzIDQwLjY4NTcgOC41MTQyOSAzNC4zODU3IDguNTE0MjkgMjYuNjg1N0M4LjUxNDI5IDE4Ljk4NTcgMTQuODE0MyAxMi42ODU3IDIyLjUxNDMgMTIuNjg1N1pNMzIuOCA4Ljk5NDMxTDM1Ljc4MjkgNi4wMTE0NUMzOC42NjI5IDcuODYyODggNDEuMTgyOSAxMC4zMzE1IDQzLjAzNDMgMTMuMjYyOUw0MC4wNTE0IDE2LjI0NTdDMzguMzAyOSAxMy4yNjI5IDM1Ljc4MjkgMTAuNzQyOSAzMi44IDguOTk0MzFaIiBmaWxsPSIjMzY0MzVDIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjIuNTEzOSAzNy40ODU3QzI4LjQ5NTQgMzcuNDg1NyAzMy4zMTM5IDMyLjY2NzMgMzMuMzEzOSAyNi42ODU3QzMzLjMxMzkgMjAuNzA0MiAyOC40OTU0IDE1Ljg4NTcgMjIuNTEzOSAxNS44ODU3VjI2LjY4NTdIMTEuNzEzOUMxMS43MTM5IDMyLjY2NzMgMTYuNTMyMyAzNy40ODU3IDIyLjUxMzkgMzcuNDg1N1oiIGZpbGw9IiNDQ0QzREIiLz4KPC9zdmc+Cg=="},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=r(25),h=n(r(3010)),v=r(1456),y=n(r(3012));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=g(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e)).handleToggle=function(){t.setState({visible:!t.state.visible},(function(){t.props.onToggle(t.state.visible)}))},t.hideSelector=function(){t.setState({visible:!1},(function(){t.props.onToggle(!1)}))},t.handleTimeChange=function(e){var a=e.duration;t.setState({visible:!1,duration:a},(function(){t.props.onChange(a)}))};var n=e.duration;return t.state={visible:!1,preDuration:"",duration:n||"10m"},t}return(0,o.default)(r,[{key:"renderButtonText",value:function(){var e=this.state.duration,a=(0,v.getTimeLabel)(e);return"".concat(t("Last")," ").concat(a)}},{key:"renderContent",value:function(){var e=this.state.duration;return f.default.createElement("div",{className:y.default.content},f.default.createElement(h.default,{duration:e,onChange:this.handleTimeChange}))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.dark,r=e.arrowIcon;return f.default.createElement("div",{className:(0,p.default)(y.default.selector,t,(0,l.default)({},y.default.active,this.state.visible))},f.default.createElement("div",{className:(0,p.default)(y.default.mask,(0,l.default)({},y.default.active,this.state.visible)),onClick:this.hideSelector}),f.default.createElement(m.Button,{className:y.default.button,onClick:this.handleToggle},f.default.createElement(m.Icon,{type:a?"dark":"light",name:"timed-task",size:20}),f.default.createElement("p",null,this.renderButtonText()),f.default.createElement(m.Icon,{className:y.default.arrow,type:a?"dark":"light",name:r||"caret-down"})),f.default.createElement("div",{className:y.default.dropdown},this.renderContent()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.duration!==t.preDuration){var a=e.duration;return{prevPropStep:a,duration:a}}return null}}]),r}(f.default.PureComponent);a.default=b,b.propTypes={duration:d.default.string,onChange:d.default.func,onToggle:d.default.func},b.defaultProps={duration:"10m",onChange:function(){},onToggle:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=r(1456),h=n(r(3011));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=["1m","5m","10m","30m","1h","3h","6h","12h"],g=function(e){(0,i.default)(r,e);var a=v(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(t){var a=t.target.dataset.value;a&&e.props.onChange({duration:a})},e}return(0,o.default)(r,[{key:"render",value:function(){var e=(0,m.getTimeOptions)(y),a=this.props.duration;return f.default.createElement("div",{className:h.default.default},f.default.createElement("div",{className:h.default.title},t("SELECT_TIME_RANGE")),f.default.createElement("ul",{onClick:this.handleClick},e.map((function(e){var r=e.label,n=e.value;return f.default.createElement("li",{key:r,"data-value":n,className:(0,p.default)((0,l.default)({},h.default.cur,n===a))},t("LAST_TIME",{value:r}))}))))}}]),r}(f.default.Component);a.default=g,g.propTypes={duration:d.default.string,onChange:d.default.func},g.defaultProps={duration:"10m",onChange:function(){}}},function(e,t,a){e.exports={title:"e1y2fKT7YHaV6XfOOCrDv",default:"_327WDiVGD2urDadhIu1iDe",cur:"NU2Zf3sYiQCtz54m5aL1r",custom:"_1Lh-8JMUsuFdxn6OGugBV8",selectBox:"_13RX0xuFZFmo9QoCb6fUmO",actions:"_3h517gEQXsCsA58FetxHUY"}},function(e,t,a){e.exports={selector:"_1mOaVvA0z35PUDIJdGjK88",active:"_2t8WRCCQ4ggASoXOF8nAg1",arrow:"CFTzeejAkGAa_XLLeaiFT",dropdown:"_27PLp7Zzzab6bCyYx70ghK",button:"_1F3ae8ohH9JmxETLtsSxfM",mask:"_3bICmHVgKLnTdQTDx5eA3k",content:"_18IN8qgb-HsUFSYjIfSXb-"}},function(e,t,a){e.exports={overview:"_2hTrM133qfL0uUr_S1fadQ",header:"_1jy9VGHvOaVVfm8dvL8bMo",operations:"_1wYlom_Bo7NychRu74C8bD",button:"_1GnNLBwPJ8nr0MiBe-Tv3f",body:"dTsXWt-KM-Ikk_oi6nBQ8",left:"_7bKfzcnOgKm3npFE4FWgI",item:"_2UpgVSNsQRLd8DZ0nKv2Lr",middle:"_1RNen7PdwnS9Uj_2bbOGwj",right:"_2_Cl8scx9VJLhtxD2WgQKI",customIcon:"_2tmKWz-gU6N2A-XexZ12O_",itemSmall:"Qx9S4CJkobficre0PCNO8",simpleContent:"_3A0WQEo815SRiGxnMLdcXx"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0;var l=n(r(21)),u=n(r(49)),o=n(r(50)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(5),h=r(70),v=n(r(32)),y=r(25),g=n(r(1145)),b=n(r(1417)),E=n(r(892)),_=n(r(3015)),O=n(r(1)),S=n(r(767)),k=n(r(3017));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=function(e){(0,s.default)(r,e);var a=w(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).gateway=new S.default,n.fetchData=(0,o.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.store.getGatewayPods(n.props.match.params);case 2:t=e.sent,n.setState({pods:t.length});case 4:case"end":return e.stop()}}),e)}))),n.checkGatewayLatest=(0,o.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.namespace,e.next=3,n.gateway.getGateway({cluster:n.cluster,namespace:t});case 3:case"end":return e.stop()}}),e)}))),n.handleScale=function(){var e=(0,o.default)(u.default.mark((function e(a){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.match.params.namespace,e.next=3,n.checkGatewayLatest();case 3:if(n.gateway.detail.resourceVersion!==n.store.detail.resourceVersion){e.next=8;break}return e.next=6,n.store.scale({cluster:n.cluster,namespace:r},a);case 6:e.next=9;break;case 8:y.Notify.info({content:t("GATEWAY_UPDATING_TIP")});case 9:n.getGatewayDetail(),n.fetchData();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={pods:0},n}return(0,c.default)(r,[{key:"getChildContext",value:function(){return{gatewayName:this.detail.name,gatewayNs:this.props.match.params.namespace,cluster:this.cluster}}},{key:"getGatewayDetail",value:function(){var e=this.props.match.params.namespace;this.props.detailStore.getGateway({cluster:this.cluster,namespace:e})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?p.default.createElement(E.default,{module:this.store.module,name:t,namespace:a}):null}},{key:"renderReplicaInfo",value:function(){var e=(0,m.toJS)(this.detail);return p.default.createElement(b.default,{module:this.module,detail:e,onScale:this.handleScale,enableScale:this.enableScaleReplica})}},{key:"renderContainerPorts",value:function(){var e=this.detail.ports,t=this.store.gateway.isLoading;if((0,v.default)(e))return null;var a=e.map((function(e){return e.containerPort=e.nodePort,e}));return p.default.createElement(g.default,{ports:a,loading:t})}},{key:"renderPods",value:function(){var e=R(R({},this.props.match.params),{},{cluster:this.cluster});return p.default.createElement(_.default,{prefix:this.prefix,detail:this.detail,store:this.store,params:e})}},{key:"renderContent",value:function(){return p.default.createElement("div",null,this.renderPlacement(),this.renderReplicaInfo(),this.renderContainerPorts(),this.renderPods())}},{key:"render",value:function(){return p.default.createElement("div",{className:k.default.main},this.renderContent())}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"detail",get:function(){return this.store.gateway.data||{}}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.location.pathname.indexOf("federatedprojects")>-1?localStorage.getItem("federated-cluster"):e}},{key:"prefix",get:function(){return"/clusters/".concat(this.cluster)}},{key:"enabledActions",get:function(){return globals.app.getActions(R(R({module:this.module},this.props.match.params),{},{project:this.props.match.params.namespace}))}},{key:"volumesTitle",get:function(){return t("STORAGE_DEVICES")}},{key:"enableScaleReplica",get:function(){return this.enabledActions.includes("edit")&&!this.detail.isFedManaged}}]),r}(p.default.Component);P.childContextTypes={gatewayName:O.default.string,gatewayNs:O.default.string,cluster:O.default.string};var D=(0,h.inject)("detailStore")((0,h.observer)(P));a.default=D;var T=P;a.Component=T},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(71)),c=n(r(136)),s=n(r(49)),f=n(r(21)),d=n(r(56)),p=n(r(50)),m=n(r(12)),h=n(r(13)),v=n(r(19)),y=n(r(20)),g=n(r(18)),b=n(r(0)),E=r(70),_=n(r(1)),O=n(r(3)),S=n(r(32)),k=n(r(16)),C=r(25),R=r(725),w=n(r(1153)),P=n(r(723)),D=n(r(3016)),T=n(r(1457));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var x={cpu:"ingress_request_cpu_usage",memory:"ingress_request_memory_bytes"},j=(0,E.observer)((o=u=function(e){(0,v.default)(r,e);var a=A(r);function r(e){var n;(0,m.default)(this,r),(n=a.call(this,e)).fetchData=(0,p.default)(s.default.mark((function e(){var t,a,r,l,u,o=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},a=t.noMetrics,r=t.silent,l=(0,d.default)(t,["noMetrics","silent"]),!(0,S.default)(n.state.params)){e.next=4;break}return n.store.podList.isLoading=!1,e.abrupt("return");case 4:return u=n.props.limit,r&&(n.store.podList.silent=!0),e.next=8,n.store.getGatewayPodsList(I(I({limit:u},n.state.params),l));case 8:n.store.podList.silent=!1,a||n.fetchMetrics();case 10:case"end":return e.stop()}}),e)}))),n.fetchMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.store.podList,a=t.data,r=t.isLoading;if((0,S.default)(a)||r||(0,S.default)(n.state.params))return!1;n.monitorStore.fetchMetrics(I(I({step:"1m",times:30,resources:a.map((function(e){return e.name})),metrics:Object.values(x)},n.state.params),e))},n.getPagination=function(){var e=n.store.podList;return{page:e.page,limit:e.limit,total:e.total}},n.getPodMetrics=function(){var e=n.monitorStore.data,t={};return Object.entries(x).forEach((function(a){var r=(0,c.default)(a,2),n=r[0],l=r[1],u=(0,k.default)(e,"".concat(l,".data.result"))||[];t[n]=u[0]})),t},n.handleSearch=function(e){n.searchValue=e,n.fetchData({search:e})},n.handleRefresh=function(){var e=n.searchValue?{search:n.searchValue}:{};n.fetchData(e)},n.handlePage=function(e){n.fetchData({page:e}).then((function(){n.props.onPage(e)}))},n.handleExpand=function(e){n.setState((function(t){return{expandItem:t.expandItem===e?"":e}}))},n.getClustersOptions=function(){return n.props.clusters.map((function(e){return{label:e,value:e}}))},n.handleClusterChange=function(e){n.setState({selectCluster:e,params:n.getParams(e)},(function(){n.fetchData()}))},n.renderHeader=function(){return b.default.createElement("div",{className:T.default.header},b.default.createElement(C.InputSearch,{className:T.default.search,name:"search",placeholder:t("Filter by keyword"),onSearch:n.handleSearch}),b.default.createElement("div",{className:T.default.actions},b.default.createElement(C.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh})))},n.renderFooter=function(){var e=n.getPagination(),a=e.total;return b.default.createElement(C.Level,{className:T.default.footer},b.default.createElement(C.LevelLeft,null,t("TOTAL_ITEMS",{num:a})),b.default.createElement(C.LevelRight,null,b.default.createElement(C.Pagination,(0,i.default)({},e,{onChange:n.handlePage}))))},n.store=e.store,n.monitorStore=new w.default;var l=e.detail.cluster||e.params;return n.state={expandItem:"",params:l},n}return(0,h.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this,a=this.props,r=a.detail,n=a.params;if(r!==e.detail){var l=r.cluster||n;this.setState({expandItem:"",selectCluster:l||"",params:this.getParams(l)},(function(){t.fetchData()}))}}},{key:"componentDidMount",value:function(){this.fetchData(),(0,R.startAutoRefresh)(this,{method:"fetchMetrics",leading:!1})}},{key:"componentWillUnmount",value:function(){(0,R.stopAutoRefresh)(this),this.disposer&&this.disposer()}},{key:"renderContent",value:function(){var e=this,a=this.props.prefix,r=this.store.podList,n=r.data,l=r.isLoading,u=r.silent,o=b.default.createElement("div",{className:T.default.body},(0,S.default)(n)?b.default.createElement("div",{className:T.default.empty},t("NO_RESOURCE_FOUND")):n.map((function(t){return b.default.createElement(D.default,{key:t.uid,prefix:a,detail:t,metrics:e.getPodMetrics(t),loading:e.monitorStore.isLoading,refreshing:e.monitorStore.isRefreshing,isExpand:e.state.expandItem===t.uid,onExpand:e.handleExpand})})));return u?o:b.default.createElement(C.Loading,{spinning:l},o)}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=e.hideHeader,l=e.hideFooter,u=e.noWrapper,o=this.store.podList.data;return u?this.renderContent():b.default.createElement(P.default,{className:(0,O.default)(T.default.main,a),title:t(r),empty:t("NO_AVAILABLE_RESOURCE_VALUE",{resource:t("Pod")}),isEmpty:(0,S.default)(o)},!n&&this.renderHeader(),this.renderContent(),!l&&this.renderFooter())}}]),r}(b.default.Component),u.propTypes={prefix:_.default.string,title:_.default.string,detail:_.default.object,details:_.default.object,hideHeader:_.default.bool,hideFooter:_.default.bool,onPage:_.default.func,limit:_.default.number},u.defaultProps={title:"Pods",detail:{},details:{},hideHeader:!1,hideFooter:!1,onPage:function(){}},l=o))||l;a.default=j},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),u=n(r(21)),o=n(r(71)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(276),h=n(r(1)),v=n(r(3)),y=n(r(32)),g=n(r(16)),b=r(37),E=r(725),_=r(25),O=n(r(653)),S=r(735),k=n(r(1144)),C=n(r(755)),R=n(r(1457));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=function(e){(0,s.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).getContainerStatus=function(){var t=(0,g.default)(e.props.detail,"status.containerStatuses")||[],a=0;return t.forEach((function(e){e.ready&&(a+=1)})),{readyCount:a,total:t.length}},e.getUpdateStatus=function(){if(!e.isRunning){var a=e.status,r=a.name,n=a.type;return p.default.createElement(C.default,{status:n,reason:r,data:e.props.detail,type:"pod"})}return p.default.createElement("p",null,t("CREATED_TIME",{diff:(0,b.getLocalTime)(e.props.detail.createTime).format("YYYY-MM-DD HH:mm:ss")}))},e.getLink=function(){var t=e.props.detail;return"".concat(e.props.prefix,"/projects/").concat(t.namespace,"/pods/").concat(t.name)},e.getMonitoringCfgs=function(e){return[{type:"cpu",title:"CPU",unitType:"cpu",legend:["Used"],data:[e.cpu],bgColor:"transparent"},{type:"memory",title:"Memory",unitType:"memory",legend:["Used"],data:[e.memory],bgColor:"transparent"}]},e.getNodeContent=function(){var a=e.props.detail,r=a.cluster,n=a.node,l=a.nodeIp,u=globals.app.hasPermission({cluster:r,module:"nodes",action:"view"});if(!n)return"-";var o=t("NODE_IP",{node:n,ip:l});return u?p.default.createElement(m.Link,{to:"/clusters/".concat(r,"/nodes/").concat(n)},o):o},e.handleExpandExtra=function(){var t=e.props,a=t.detail;(0,t.onExpand)(a.uid)},e.handleLinkClick=function(){localStorage.setItem("pod-detail-referrer",location.pathname)},e.renderPodIPContent=function(e){return p.default.createElement("div",{className:R.default.ipTip},p.default.createElement("div",null,t("POD_IP_ADDRESS")),p.default.createElement("ul",null,e.map((function(e){return p.default.createElement("li",{key:e},p.default.createElement(_.Icon,{name:"ip",size:20,type:"light"}),p.default.createElement("span",null,e))}))))},e}return(0,c.default)(r,[{key:"renderStatusTip",value:function(){var e=this.props.detail.name,a=this.status,r=a.type,n=a.name,l=this.getContainerStatus(),u=l.readyCount,o=l.total;return p.default.createElement(_.Tooltip,{content:p.default.createElement("div",{className:R.default.statusTip},p.default.createElement("strong",null,e),p.default.createElement("p",null,t("Ready"),": ",u,"/",o),p.default.createElement("p",null,t("STATUS"),": ",t(n)))},p.default.createElement(O.default,{className:R.default.indicator,type:r,flicker:!0}))}},{key:"renderMonitorings",value:function(){var e=this.props,a=e.metrics,r=void 0===a?{}:a,n=e.isExpand;if(e.loading)return p.default.createElement("div",{className:R.default.monitors},t("LOADING"));if((0,y.default)(r.cpu)&&(0,y.default)(r.memory))return p.default.createElement("div",{className:R.default.monitors},t("NO_MONITORING_DATA"));var l=this.getMonitoringCfgs(r);return p.default.createElement("div",{className:R.default.monitors},p.default.createElement("div",{className:R.default.charts},l.map((function(e){var t=(0,E.getAreaChartOps)(e);return p.default.createElement(S.TinyArea,(0,o.default)({key:e.type,width:"50%",height:40},t,{darkMode:n}))}))))}},{key:"renderContent",value:function(){var e=this.props,a=e.detail,r=a.name,n=a.podIp,l=e.isExpand;return p.default.createElement("div",{className:R.default.content},p.default.createElement("div",{className:R.default.text},p.default.createElement("div",null,p.default.createElement("span",{onClick:this.handleLinkClick},r)),this.getUpdateStatus()),!(-1!==location.pathname.indexOf("/nodes"))&&p.default.createElement("div",{className:R.default.text},p.default.createElement("div",null,this.getNodeContent()),p.default.createElement("p",null,t("Node"))),p.default.createElement("div",{className:R.default.text},p.default.createElement("div",null,p.default.createElement("span",null,n||"-"),!(0,y.default)(this.networkIPs)&&this.networkIPs.length>1&&p.default.createElement(_.Tooltip,{content:this.renderPodIPContent(this.networkIPs)},p.default.createElement("div",{className:R.default.podip},this.networkIPs.length))),p.default.createElement("p",null,t("POD_IP_ADDRESS_SCAP"))),this.renderMonitorings(),p.default.createElement("div",{className:R.default.arrow},p.default.createElement(_.Icon,{name:"chevron-down",type:l?"light":"",size:20})))}},{key:"renderExtraContent",value:function(){var e=this,a=this.props.prefix,r=this.props.detail,n=r.cluster,l=r.containers,u=void 0===l?[]:l,o=r.initContainers,i=void 0===o?[]:o,c=r.name;if((0,y.default)(u))return null;var s=globals.app.hasPermission({module:"clusters",action:"view"})&&a?this.getLink():"";return p.default.createElement("div",{className:R.default.itemExtra},p.default.createElement("div",{className:"margin-b8"},p.default.createElement("strong",null,t("CONTAINER_PL"))),p.default.createElement("div",{className:R.default.containers},u.map((function(t){return p.default.createElement(k.default,{key:t.name,prefix:s,podName:c,detail:t,cluster:n,onContainerClick:e.handleLinkClick,isCreating:e.isCreating,hideterminal:!0})})),i.map((function(t){return p.default.createElement(k.default,{key:t.name,prefix:s,podName:c,detail:t,cluster:n,onContainerClick:e.handleLinkClick,isCreating:e.isCreating,isInit:!0,hideterminal:!0})}))))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.isExpand;return p.default.createElement("div",{className:(0,v.default)(R.default.item,t,(0,u.default)({},R.default.expanded,a))},p.default.createElement("div",{className:R.default.itemMain,onClick:this.handleExpandExtra},p.default.createElement("div",{className:R.default.icon},p.default.createElement(_.Icon,{name:"pod",size:40,type:a?"light":"dark"}),this.renderStatusTip()),this.renderContent()),this.renderExtraContent())}},{key:"status",get:function(){var e=this.props.detail.podStatus,t=e.status;return{type:e.type.toLowerCase(),name:t}}},{key:"isCreating",get:function(){return"warning"===this.status.type&&"ContainerCreating"===this.status.name}},{key:"isRunning",get:function(){return"running"===this.status.type||"completed"===this.status.type}},{key:"networkIPs",get:function(){return this.props.detail.networksStatus.reduce((function(e,t){return[].concat((0,l.default)(e),(0,l.default)(t.ips))}),[])}}]),r}(p.default.PureComponent);a.default=P,P.propTypes={className:h.default.string,prefix:h.default.string,detail:h.default.object,metrics:h.default.object,loading:h.default.bool,isExpand:h.default.bool,onExpand:h.default.func},P.defaultProps={prefix:"",detail:{},isExpand:!1,onExpand:function(){}}},function(e,t,a){e.exports={deployment_codeResource:"_2sxIgN7h_UoStkDUN8ngoB"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(136)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(723)),m=r(70),h=n(r(32)),v=n(r(16)),y=n(r(1455));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=(0,m.inject)("detailStore")(l=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=g(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){var e=this.detail.config;return d.default.createElement(p.default,{title:t("CONFIGURATION_OPTIONS")},d.default.createElement("div",{className:y.default.container},d.default.createElement("ul",null,(0,h.default)(e)?d.default.createElement("li",null,t("NO_DATA")):Object.entries(this.detail.config).map((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1];return d.default.createElement("li",{key:a},d.default.createElement("span",{className:y.default.key},a),d.default.createElement("span",null,r))})))))}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"detail",get:function(){return(0,v.default)(this.store.gateway,"data",{})}}]),r}(d.default.Component))||l)||l;a.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i,c,s,f,d,p,m=n(r(109)),h=n(r(49)),v=n(r(21)),y=n(r(50)),g=n(r(136)),b=n(r(91)),E=n(r(12)),_=n(r(13)),O=n(r(135)),S=n(r(19)),k=n(r(20)),C=n(r(18)),R=n(r(74)),w=(n(r(92)),n(r(0))),P=r(70),D=n(r(751)),T=n(r(884)),N=r(5),I=r(25),A=n(r(3)),x=r(3671),j=n(r(137)),M=n(r(1021)),L=n(r(1350)),U=r(1363),F=n(r(1013)),V=n(r(3020));function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,C.default)(e);if(t){var n=(0,C.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,k.default)(this,a)}}var G=new F.default,H=600,Y=(0,P.inject)("detailStore")(l=(0,P.observer)((u=function(e){(0,S.default)(u,e);var a,r,n,l=z(u);function u(){var e;(0,E.default)(this,u);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return e=l.call.apply(l,[this].concat(r)),(0,b.default)(e,"searchInputState",o,(0,O.default)(e)),e.tableRef=w.default.createRef(),e.state={polling:!1},(0,b.default)(e,"pollingFrequency",i,(0,O.default)(e)),(0,b.default)(e,"logs",c,(0,O.default)(e)),(0,b.default)(e,"tableCols",s,(0,O.default)(e)),e.markMemoizee=(0,L.default)(U.markAll,{normalizer:function(e){var t=(0,g.default)(e,3),a=t[0],r=t[1],n=void 0===r?[]:r,l=t[2],u=void 0===l?function(){}:l;return"".concat(a,"+").concat(n.toString(),")+").concat(u.name)},maxAge:3e3}),e.renderHightLightMatchTd=function(t){var a=t.resKey,r=t.searchKey,n=t.handler,l=void 0===n?U.mark:n;return function(t){var n=t[a]||"",u=e.searchInputState.query.filter((function(e){var t=e.key;return e.value&&(0,x.includes)(r,t)})).map((function(e){return e.value})),o=e.markMemoizee(n,u,l);return w.default.createElement("span",null,o.map((function(e,t){return(0,x.isString)(e)?e:w.default.createElement("span",{key:t,className:V.default.hightLightMatch},e.hightLighted)})))}},e.renderHightLightMatchLogTd=function(t){var a=t.resKey,r=t.searchKey,n=t.handler,l=void 0===n?U.mark:n;return function(t){var n=G.ansi_to_html(t[a]||""),u=e.searchInputState.query.filter((function(e){var t=e.key;return e.value&&(0,x.includes)(r,t)})).map((function(e){return e.value})),o=e.markMemoizee(n,u,l).map((function(e){return(0,x.isString)(e)?e:'<span class="'.concat(V.default.hightLightMatch,'">').concat(e.hightLighted,"</span>")}));return w.default.createElement("span",{dangerouslySetInnerHTML:{__html:o.join("")}})}},e.scrollTo=function(t){try{e.tableRef.current.scrollToRow(t)}catch(e){}},(0,b.default)(e,"onTableScrollTop",f,(0,O.default)(e)),e.initQuery=function(){e.searchInputState={query:[],start:"",end:"",durationAlias:"",nextParamsKey:""}},e.togglePolling=function(){e.state.polling?e.stopPolling():e.startPolling()},(0,b.default)(e,"changeFrequency",d,(0,O.default)(e)),(0,b.default)(e,"pollingFunc",p,(0,O.default)(e)),e.onSearchParamsChange=function(){e.stopPolling(),e.refreshQuery()},e.handleRefresh=function(){e.refreshQuery()},e.clearFilter=function(){e.initQuery(),e.refreshQuery()},e.renderEmpty=function(){return w.default.createElement("div",{className:V.default.emptyText},w.default.createElement("span",{className:V.default.emptyTipIcon},w.default.createElement(I.Icon,{name:"exclamation",size:48})),w.default.createElement("div",null,t("NO_MATCHING_RESULT_FOUND")),w.default.createElement("p",null,t("You can try to"),w.default.createElement("span",{className:V.default.action,onClick:e.handleRefresh,"data-test":"table-empty-refresh"},t("refresh data")),t("or"),w.default.createElement("span",{className:V.default.action,onClick:e.clearFilter,"data-test":"table-empty-clear-filter"},t("clear search conditions"))))},e}return(0,_.default)(u,[{key:"componentDidMount",value:function(){this.refreshQuery()}},{key:"componentWillUnmount",value:function(){clearInterval(this.pollingInterval)}},{key:"getQueryParams",value:function(){return this.searchInputState.query.filter((function(e){return e.key})).reduce((function(e,t){var a=t.key,r=t.value,n=a,l=e[n];return e[n]=l?"".concat(l,",").concat(r):r,e}),{})}},{key:"refreshQuery",value:(n=(0,y.default)(h.default.mark((function e(){var t,a;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getQueryParams(),e.next=3,this.fetchLog(B(B({},t),{},{from:0,size:50},this.duration));case 3:a=e.sent,this.logs=a.reverse(),this.scrollTo(this.logs.length);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchLog",value:(r=(0,y.default)(h.default.mark((function e(t){var a,r,n,l;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params,r=a.cluster,n=a.namespace,l=a.gatewayName,e.next=3,this.store.getGatewayLogs(B({cluster:r,namespace:n,gatewayName:l},t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"loadMoreLogs",value:(a=(0,y.default)(h.default.mark((function e(){var t,a,r;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.store.logs.from+this.store.logs.size,a=this.getQueryParams(),e.next=4,this.fetchLog(B(B(B({},a),this.duration),{},{from:t,size:50}));case 4:r=e.sent,this.logs=[].concat((0,m.default)(r.reverse()),(0,m.default)(this.logs)),this.scrollTo(r.length);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"stopPolling",value:function(){clearTimeout(this.pollingInterval),this.setState({polling:!1})}},{key:"startPolling",value:function(){this.setState({polling:!0}),this.pollingFunc(),this.pollingInterval&&clearTimeout(this.pollingInterval),this.pollingInterval=setInterval(this.pollingFunc,this.pollingFrequency)}},{key:"renderOperation",value:function(){var e=[5,10,20].map((function(e){return{label:t("REFRESH_INTERVAL_VALUE",{value:e}),value:1e3*e}})),a=B(B({},this.duration),this.getQueryParams());return w.default.createElement("div",{className:V.default.filter},w.default.createElement("div",{className:(0,A.default)(V.default.filterButton,V.default.pollingBtn),onClick:this.togglePolling},w.default.createElement(I.Icon,{name:this.state.polling?"stop":"start",type:"light"})),w.default.createElement(I.Select,{prefixIcon:w.default.createElement(I.Icon,{type:"light",name:"timed-task",size:20}),className:(0,A.default)(V.default.filterButton,V.default.frequencyOpts),defaultValue:5e3,options:e,onChange:this.changeFrequency}),w.default.createElement("a",{href:this.store.exportLinkFactory(a),download:!0},w.default.createElement("span",{className:(0,A.default)(V.default.filterButton,V.default.exportBtn)},w.default.createElement(I.Tooltip,{content:t("EXPORT_LOGS")},w.default.createElement(I.Icon,{name:"export",type:"light"})))))}},{key:"render",value:function(){return globals.app.hasKSModule("logging")?w.default.createElement("div",null,w.default.createElement("div",{className:V.default.title},w.default.createElement("div",{className:(0,A.default)(V.default.search,(0,v.default)({},V.default.focus,this.hasValue))},w.default.createElement(I.Icon,{className:V.default.isLeft,name:"magnifier",size:20}),w.default.createElement(T.default,{className:V.default.searchInput,onChange:this.onSearchParamsChange,params:this.searchInputState,dropdownClass:V.default.dropdownClass,iconThem:"light",enableClear:!0,dropDownItems:this.dropDownContent,showStep:!1}),w.default.createElement(I.Icon,{className:(0,A.default)(V.default.clearIcon,(0,v.default)({},V.default.hideIcon,!this.hasValue)),name:"close",onClick:this.initQuery})),this.renderOperation()),w.default.createElement("div",{className:V.default.body},(0,x.isEmpty)((0,N.toJS)(this.logs))?this.renderEmpty():w.default.createElement(M.default,{onScroll:this.onTableScrollTop,cols:this.tableCols,data:(0,N.toJS)(this.logs),tableRef:this.tableRef,trCLassName:V.default.trCLassName,body:V.default.bodyClassName,header:V.default.headerClassName}))):w.default.createElement(D.default,{className:"no-shadow",icon:"cluster",title:t("LOGGING_DISABLED")})}},{key:"hasValue",get:function(){return Object.values((0,N.toJS)(this.searchInputState)).some((function(e){return(0,x.isArray)(e)?e.some((function(e){return!(0,x.isEmpty)((0,N.toJS)(e))})):!(0,x.isEmpty)(e)}))}},{key:"defaultDuration",get:function(){return{start_time:0,end_time:Date.now()}}},{key:"duration",get:function(){var e=Date.now(),t=this.searchInputState,a=t.start,r=t.end;return a?{start_time:(0,x.min)([1e3*a,e]),end_time:(0,x.min)([1e3*r,e])}:this.defaultDuration}},{key:"dropDownContent",get:function(){return{log_query:{icon:"magnifier",text:t("KEYWORD")},pod_query:{icon:"pod",text:t("POD")}}}},{key:"store",get:function(){return this.props.detailStore}}]),u}(w.default.Component),o=(0,R.default)(u.prototype,"searchInputState",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{query:[],start:"",end:"",durationAlias:"",nextParamsKey:""}}}),i=(0,R.default)(u.prototype,"pollingFrequency",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5e3}}),c=(0,R.default)(u.prototype,"logs",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,R.default)(u.prototype,"hasValue",[N.computed],Object.getOwnPropertyDescriptor(u.prototype,"hasValue"),u.prototype),s=(0,R.default)(u.prototype,"tableCols",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{thead:t("TIME"),key:"time",dataIndex:"time",mustShow:!0,content:function(e){return"[".concat((0,j.default)(e.time).format("YYYY-MM-DD HH:mm:ss"),"]")}},{thead:t("POD"),key:"pod",dataIndex:"pod",mustShow:!0,content:this.renderHightLightMatchTd({resKey:"pod",searchKey:["pod_query"]})},{thead:t("MESSAGE"),key:"log",dataIndex:"log",className:V.default.logItem,content:this.renderHightLightMatchLogTd({resKey:"log",searchKey:["log_query"],handler:U.esMark}),mustShow:!0}]}}),(0,R.default)(u.prototype,"refreshQuery",[N.action],Object.getOwnPropertyDescriptor(u.prototype,"refreshQuery"),u.prototype),(0,R.default)(u.prototype,"fetchLog",[N.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchLog"),u.prototype),(0,R.default)(u.prototype,"loadMoreLogs",[N.action],Object.getOwnPropertyDescriptor(u.prototype,"loadMoreLogs"),u.prototype),f=(0,R.default)(u.prototype,"onTableScrollTop",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.scrollTop,r=e.store.logs,n=r.from,l=r.size,u=r.total;0===a&&u>n+l&&e.loadMoreLogs()}}}),d=(0,R.default)(u.prototype,"changeFrequency",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.pollingFrequency=t,e.state.polling&&(clearTimeout(e.pollingInterval),e.startPolling())}}}),p=(0,R.default)(u.prototype,"pollingFunc",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=H;e.searchInputState.end=Math.ceil(Date.now()/1e3),e.searchInputState.start=e.searchInputState.end-t,e.searchInputState.durationAlias="".concat(t/60,"m"),e.refreshQuery()}}}),l=u))||l)||l;a.default=Y},function(e,t,a){e.exports={title:"h3EGYxJHcXzNAZU64Ys-7",focus:"_1TYZVVQtrXwaAaa2nwD6NE",search:"_2QSFqdrB9aMZjIVh3QK0R2",clearIcon:"_3qDug15F8wtzhqs8WjeLBW",hideIcon:"_2CnN8q86DPsSM48wJnL6Nv",searchInput:"_2432rvdXjewrevIwLoYaSt",filter:"_2fb4uH-e_iaRbWSOMvDMPn",filterButton:"_7ASJ4CE_FCBt8fhgHM3Nz",exportBtn:"_2JJ6SH_-_MTCF7OPFW7kys",pollingBtn:"rOD92XzSZBE4irFyl6UkB",frequencyOpts:"_39g5yqbm9RZmh3S9viq599",searchBar:"_2PXN-WMqrT8hDBu-4PGTte",icon:"_1Mf8725MJ88eggNRQj49ku",input:"_2ApsehJ2Zoyl1l3Er5b7Ki",dropdownClass:"e7mNbUyHuqgvvXQ3KQ-ip",body:"_2zscwenqDTZYN32pr5Ds5-",logItem:"_3OcRCVG8GQmCwWPLwTW978",bodyClassName:"_2RyfnALWpJKi2fQDgJ-5qc",headerClassName:"_1ClFBNqMO40nDrGs0NH27N",trCLassName:"_1JuCS0O3IJiNnkzG1zCHzs",emptyText:"_2p2Dbxritd_IaivnVdRvZ1",emptyTipIcon:"_1dM3MOctITqHWlne46RoCc",action:"_3ihxA24eqCRlJprACXfqZc",hightLightMatch:"_3f66pKDSXrWjGp0u0360VP"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={select:"_3C0SbiQqjs3fZQjiw1yHWo"}},,,,function(e,t,a){e.exports={wrapper:"_3ZtD5eAqH6AUKiDsz0pcAL",image:"Z7KWsw8fF2407V0aEX6SL",title:"_1KAJCl-kZirxlIa0q1yvdz",icon:"nGJu81QzoLuEo79G9vRpL",desc:"_1cgFUO3Bn5CsfWNgdOnzXf",canClick:"_34eEiZ0jC_waLj3cMn-bvD",isIcon:"_1yS8-xmglVH3M6Rb93PRbY",avatarIcon:"-giQOuJDvs9ioohUF1exA",letter:"_1X9WSgZJV4No7YWrHu0-6F"}},,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=r(25),h=n(r(293)),v=n(r(3127));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=y(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).handleClickImage=function(e){var a=e.currentTarget.dataset.idx;t.stopAnimation(),t.setState({showOverlay:!0,currentIdx:parseInt(a,10)||0})},t.closeOverlay=function(){t.setState({showOverlay:!1})},t.getPrevNextIdx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next",a=t.state.currentIdx,r=t.props.images.length;return"next"===e?a+1>=r?0:a+1:a-1<0?r-1:a-1},t.showNextPic=function(){t.setState({currentIdx:t.getPrevNextIdx()})},t.handleClickPrev=function(){t.goToIdx(t.getPrevNextIdx("prev"))},t.handleClickNext=function(){t.goToIdx(t.getPrevNextIdx())},t.handleClickIndicator=function(e){t.goToIdx(e)},t.goToIdx=function(e){t.stopAnimation(),t.setState({currentIdx:e})},t.state={showOverlay:!1,currentIdx:e.defaultIdx||0},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.currentIdx;a!==t.currentIdx&&this.props.onChangeImage(this.props.images[a])}},{key:"componentWillUnmount",value:function(){this.stopAnimation()}},{key:"stopAnimation",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"renderOverlay",value:function(){var e=this.state,t=e.showOverlay,a=e.currentIdx,r=this.props.images[a];return t?f.default.createElement("div",{className:v.default.overlay},f.default.createElement("div",{className:v.default.closeOverlay,onClick:this.closeOverlay},f.default.createElement(m.Icon,{name:"close",size:24,type:"dark"})),f.default.createElement("div",{className:v.default.viewCont},f.default.createElement("label",{className:v.default.pre,onClick:this.handleClickPrev},f.default.createElement(m.Icon,{name:"chevron-left",size:24,type:"dark"})),f.default.createElement("label",{className:v.default.next,onClick:this.handleClickNext},f.default.createElement(m.Icon,{name:"chevron-right",size:24,type:"dark"})),f.default.createElement("div",{className:v.default.overlayPic},f.default.createElement(h.default,{src:r})))):null}},{key:"render",value:function(){var e=this,a=this.props,r=a.images,n=a.className,u=this.state.currentIdx,o=210*r.length,i=210*u;return r.length?f.default.createElement("div",{className:(0,p.default)(v.default.slider,n)},f.default.createElement("label",{className:v.default.pre,onClick:this.handleClickPrev},f.default.createElement(m.Icon,{name:"chevron-left",size:24,type:"dark"})),f.default.createElement("label",{className:v.default.next,onClick:this.handleClickNext},f.default.createElement(m.Icon,{name:"chevron-right",size:24,type:"dark"})),r.length>2&&f.default.createElement("div",{className:v.default.dotList},r.map((function(t,a){return f.default.createElement("label",{key:"".concat(t,"-").concat(a),className:v.default.dot,onClick:function(){return e.handleClickIndicator(a)}},f.default.createElement("span",{className:(0,p.default)((0,l.default)({},v.default.active,u===a))}))}))),f.default.createElement("div",{className:v.default.listOuter},f.default.createElement("ul",{className:v.default.pictureList,style:{width:"".concat(o,"px"),left:"-".concat(i,"px")}},r.map((function(t,a){return f.default.createElement("li",{className:v.default.pictureOuter,key:a},f.default.createElement("div",{className:v.default.picture,"data-idx":a,onClick:e.handleClickImage},f.default.createElement(h.default,{src:t})))})))),this.renderOverlay()):f.default.createElement("div",{className:v.default.slider},t("NONE"))}}]),r}(f.default.PureComponent);a.default=g,g.propTypes={images:d.default.array.isRequired,onChangeImage:d.default.func,defaultIdx:d.default.number},g.defaultProps={images:[],onChangeImage:function(){},defaultIdx:0}},function(e,t,a){e.exports={slider:"m_31JSg6nUGhFZ5iAQUjU",pre:"P-w7KNnKvWDxXSrhHQxtZ",next:"vOIr4lPa5nsQ56p4JEDGu",disabled:"_2_nv3-wXNbTm1BHHlvUTy4",dotList:"_1TLzD0vpvRi3GaoYbX8pdk",dot:"_1Rem-XXjxrvGjbZZyM7Dqh",active:"_37ns6MNNforGPal8rdECz7",listOuter:"csullZjO0y8IcXlc9LirY",pictureList:"LSi2b_Lkrdk8wVRxlhwhQ",pictureOuter:"_2oFhbjePYqBFsvRHbpFwgG",picture:"_1m-TiVY9Dxxxc1YDUiDhF1",overlay:"_7a8Ix3gbvxd6JTh4tz75n",viewCont:"Hj97dEjPT3P_BYypqENEP",overlayPic:"_3ssVJsi-xownM8NUxZXV5e",fadeIn:"_2uybTeXUle2_galUE-2PT8",closeOverlay:"_3BFnq_4zFEzfnOD7IqbdJN"}},function(e,t,a){e.exports={appInfo:"_3AilH8qFkHx_4avHhZDK_4",title:"_12ML492fWTSMsK4vhUQt4U",versions:"_16JKvu0z7Y-Y4tB-Qsj0Ym",name:"_1mGDyZCPCDchoHaPc_BfFV",date:"_1j85iHLJPDExOlvmRKaqYF",desc:"_1BNX8-yI6Ox7Laya_AeDlG"}},function(e,t,a){e.exports={status:"A5rVBP55qeIAO91DaF9Yv",icon:"_1oXA-t3U_cCctqjXsQnXv7",draft:"_14HEzQmww9_9HawfVhm7CE",review:"_2OGhlK9n82bUF5ehbn7lm8",passed:"_1morbl3ceK_aX-QMXaNMya",suspended:"_1IMQRXNvIYz50xJYrs2BTg",substract:"_2B7Wxt5CSW2JbBvP2gqqUH",deleted:"_1uXd24XYFfycfU5NlCnJYG"}},function(e,t,a){e.exports={wrapper:"MVdLzzHokdMzDHMJ9cEh8",title:"_2HWYuhPBoqwON9OjfDPkrb"}},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(21)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(5),v=n(r(1)),y=n(r(3)),g=r(70),b=r(25),E=n(r(760)),_=n(r(1326)),O=n(r(1156)),S=n(r(3133)),k=n(r(3135)),C=n(r(1157)),R=n(r(3138)),w=r(37),P=r(635),D=r(914),T=r(787),N=n(r(1476));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var j=b.Tabs.TabPanel,M=(0,g.inject)("rootStore")(l=(0,P.trigger)((o=u=function(e){(0,f.default)(r,e);var a=x(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).handleTabChange=function(e){n.setState({tab:e})},n.handleExpandExtra=function(){var e=n.props.detail;n.props.handleExpandExtra(e.version_id)},n.showDeploy=function(){n.trigger("openpitrix.template.deploy",A(A({},n.props.params),{},{store:n.props.appStore,app:n.props.appDetail,versionId:n.props.detail.version_id}))},n.showDeleteModel=function(){n.setState({deleteShow:!0,handleType:"delete"})},n.showHandleModel=function(e){return function(){if("view"===e){var t=n.props.detail.app_id;n.props.rootStore.routing.push("/apps/".concat(t))}else"submit"===e?n.setState({submitShow:!0,handleType:"submit"}):n.setState({confirmShow:!0,handleType:e})}},n.hideHandleModal=function(){n.setState({deleteShow:!1,confirmShow:!1,submitShow:!1,appDeploy:!1})},n.deleteVersion=function(){var e=n.props.detail,a=e.version_id,r=e.app_id;n.store.delete({app_id:r,version_id:a}).then((function(){n.hideHandleModal(),b.Notify.success({content:t("DELETE_SUCCESSFUL")}),n.store.fetchList({app_id:r})}))},n.handleVersion=function(){var e=n.props,a=e.detail,r=e.isAdmin,l=a.version_id,u=a.app_id,o=n.state.handleType,i={app_id:u,version_id:l,action:o};n.store.handle(i).then((function(){var e=D.HANDLE_TYPE_TO_SHOW[o]||o;n.hideHandleModal(),b.Notify.success({content:"".concat(t("".concat(e.toUpperCase(),"_SUCCESSFUL")))});var a=r?T.STORE_QUERY_STATUS:n.store.defaultStatus;D.APP_STORE_ACTIONS.includes(o)?n.props.appStore.fetchDetail({app_id:u}):n.store.fetchList({app_id:u,status:a})}))},n.handleSubmit=function(e){n.store.update(e).then((function(){n.handleVersion()}))},n.store=n.props.store,n.state={tab:"configFile",handleType:""},n}return(0,s.default)(r,[{key:"renderContent",value:function(){var e=this.props.detail;return m.default.createElement("div",{className:N.default.content},m.default.createElement("dl",null,m.default.createElement("dt",null,m.default.createElement(O.default,{type:e.status,noIcon:!0})),m.default.createElement("dd",null,t("STATUS"))),m.default.createElement("dl",null,m.default.createElement("dt",null,e.name),m.default.createElement("dd",null,t("VERSION"))),m.default.createElement("dl",null,m.default.createElement("dt",null,e.owner),m.default.createElement("dd",null,t("DEVELOPER"))),m.default.createElement("dl",null,m.default.createElement("dt",null,(0,w.getLocalTime)(e.update_time||e.status_time).format("YYYY-MM-DD HH:mm:ss")),m.default.createElement("dd",null,t("UPDATE_TIME_SCAP"))),m.default.createElement("dl",{className:N.default.more},m.default.createElement(b.Icon,{name:"chevron-down",size:20})))}},{key:"renderVersionActions",value:function(){var e=this.props,a=e.isAdmin,r=e.enabledActions,n=this.props.detail.status,l=a?D.STATUS_TO_ACTION_ADMIN[n]:D.STATUS_TO_ACTION[n];return r.includes("manage")?m.default.createElement("div",{className:N.default.actions},D.CAN_DELETE_STATUS.includes(n)&&!a&&m.default.createElement(b.Button,{onClick:this.showDeleteModel,type:"danger"},t("DELETE")),!a&&m.default.createElement(b.Button,{onClick:this.showDeploy,type:"default"},t("INSTALL")),l&&m.default.createElement(b.Button,{onClick:this.showHandleModel(l),type:"control"},t(D.ACTION_TO_NAME[l]))):null}},{key:"renderExtraContent",value:function(){var e=this.props,a=e.detail,r=e.appDetail,n=e.clusters,l=this.state.tab;return m.default.createElement("div",{className:N.default.itemExtra},m.default.createElement(b.Tabs,{type:"button",activeName:l,onChange:this.handleTabChange},m.default.createElement(j,{label:t("CHART_FILES"),name:"configFile"},m.default.createElement(S.default,{appId:a.app_id,versionId:a.version_id,appName:r.name})),m.default.createElement(j,{label:t("APP_REVIEW"),name:"auditRecord"},m.default.createElement(k.default,{appId:a.app_id,versionId:a.version_id})),m.default.createElement(j,{label:t("APP_INSTANCES"),name:"deployInstances"},m.default.createElement(C.default,{title:t("APP_INSTANCES"),className:N.default.instances,appId:r.app_id,versionId:a.version_id,workspace:r.workspace,clusters:n}))),this.renderVersionActions())}},{key:"renderModals",value:function(){var e=this.props.detail,a=this.state.handleType;return m.default.createElement("div",null,m.default.createElement(_.default,{content:t.html("VERSION_".concat(a.toUpperCase(),"_TIP"),{name:e.name}),visible:this.state.confirmShow,onOk:this.handleVersion,onCancel:this.hideHandleModal,isSubmitting:this.store.isSubmitting}),m.default.createElement(E.default,{detail:e,desc:t.html("VERSION_".concat(a.toUpperCase(),"_TIP"),{name:e.name}),visible:this.state.deleteShow,onOk:this.deleteVersion,onCancel:this.hideHandleModal,isSubmitting:this.store.isSubmitting}),m.default.createElement(R.default,{visible:this.state.submitShow,onOk:this.handleSubmit,onCancel:this.hideHandleModal,isSubmitting:this.store.isSubmitting,detail:(0,h.toJS)(e)}))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.detail;return m.default.createElement("div",{className:(0,y.default)(N.default.item,t,(0,i.default)({},N.default.expanded,a.isExpand))},m.default.createElement("div",{className:N.default.itemMain,onClick:this.handleExpandExtra},m.default.createElement("div",{className:N.default.icon},m.default.createElement(b.Icon,{name:"cloud",size:40}),m.default.createElement(O.default,{className:N.default.status,type:a.status,noName:!0})),this.renderContent()),a.isExpand&&this.renderExtraContent(),this.renderModals())}}]),r}(m.default.PureComponent),u.propTypes={className:v.default.string,isAdmin:v.default.bool,appDetail:v.default.object,detail:v.default.object,params:v.default.object,store:v.default.object,appStore:v.default.object,handleExpandExtra:v.default.func,enabledActions:v.default.array},u.defaultProps={isAdmin:!1,appDetail:{},detail:{},params:{},store:{},appStore:{},enabledActions:[],handleExpandExtra:function(){}},l=o))||l)||l;a.default=M},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(49)),c=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(70),y=n(r(1)),g=r(25),b=n(r(1118)),E=n(r(814)),_=n(r(832)),O=r(914),S=n(r(3134));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(0,v.observer)((o=u=function(e){(0,d.default)(r,e);var a=k(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).fetchData=function(){var e=n.props,t=e.appId,a=e.versionId;t&&a&&n.store.fetchDetail({app_id:t,version_id:a})},n.getPackageName=function(){var e=n.props.appName,t=n.store.detail,a=t.package_name,r=t.name,l=void 0===r?"":r;return!a||a.startsWith("att-")?"".concat(e,"-").concat(l):a},n.modifyPackage=function(){var e=(0,c.default)(i.default.mark((function e(a){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.store.update(a);case 2:return g.Notify.success({content:"".concat(t("MODIFY_SUCCESSFUL"))}),e.next=5,n.fetchData();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.store=new E.default,n.fileStore=new _.default,n}return(0,f.default)(r,[{key:"hasPermission",get:function(){return globals.app.hasPermission({module:"app-templates",actions:["manage","edit"]})}}]),(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){e.versionId!==this.props.versionId&&this.fetchData()}},{key:"renderUpdate",value:function(){var e=this.store.detail;return e.description?h.default.createElement("div",{className:S.default.updateInfo},h.default.createElement("div",{className:S.default.title},t("VERSION_INFO")),h.default.createElement("pre",null,e.description)):h.default.createElement("div",{className:S.default.updateInfo},h.default.createElement("pre",null,t("NO_VERSION_INFO_DESC")))}},{key:"render",value:function(){var e=this.store.detail;return h.default.createElement("div",{className:S.default.main},h.default.createElement(b.default,{fileStore:this.fileStore,onOk:this.modifyPackage,packageName:this.getPackageName(),updateTime:e.update_time||e.status_time,type:"MODIFY_VERSION",appId:e.app_id,versionId:e.version_id,canEdit:this.hasPermission&&O.CAN_EDIT_STATUS.includes(e.status),className:S.default.uploadInfo,hasPackage:!0}),this.renderUpdate())}}]),r}(h.default.Component),u.propTypes={appId:y.default.string,versionId:y.default.string,appName:y.default.string},u.defaultProps={appId:"",versionId:"",appName:""},l=o))||l;a.default=C},function(e,t,a){e.exports={uploadInfo:"_2TBkOA6EPgHJSKY_LJ1A79",updateInfo:"_3lTlGecpAmXPFFP2lgjUc_",title:"_8_Kx8et880iMQA4lWLngM"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(1)),v=n(r(3)),y=n(r(32)),g=r(25),b=n(r(1156)),E=n(r(1473)),_=r(37),O=n(r(3136));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=(0,m.observer)((o=u=function(e){(0,s.default)(r,e);var a=S(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).store=new E.default,t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.appId,a=e.versionId;this.store.fetchList({app_id:t,version_id:a,noLimit:!0})}},{key:"renderItem",value:function(e,t){return p.default.createElement("ul",{key:"".concat(t,"-").concat(e.status_time)},p.default.createElement("li",null,p.default.createElement(b.default,{type:e.status,name:e.status})),p.default.createElement("li",null,e.operator),p.default.createElement("li",null,e.message||e.review_id||"-"),p.default.createElement("li",{className:O.default.time},(0,_.getLocalTime)(e.status_time).format("YYYY-MM-DD HH:mm:ss")))}},{key:"renderContent",value:function(){var e=this,a=this.store.list.data;return p.default.createElement("div",{className:O.default.itemMain},(0,y.default)(a)?p.default.createElement("div",{className:O.default.empty},t("NO_RESOURCE_FOUND")):a.map((function(t,a){return e.renderItem(t,a)})))}},{key:"render",value:function(){var e=this.props.className,t=this.store.list.isLoading;return p.default.createElement("div",{className:(0,v.default)(O.default.main,e)},t?p.default.createElement(g.Loading,{className:O.default.loading}):this.renderContent())}}]),r}(p.default.Component),u.propTypes={className:h.default.string,appId:h.default.string,versionId:h.default.string},u.defaultProps={appId:"",versionId:""},l=o))||l;a.default=k},function(e,t,a){e.exports={main:"_38GTvlHNujNM1_aRIaIdJr",loading:"_86asWtZtb30MvWhILM9Ck",empty:"_2KqIYb9NCFfVzz6bj_gi6n",itemMain:"QQf-9K3jDaguGtq6kQ9Cd",time:"_2BsPSz4AdSNwEmjoj0PRAY"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(3)),p=n(r(729)),m=r(37),h=n(r(1475));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this.props,a=e.detail,r=e.showVersion,n=a.version;return s.default.createElement("div",{className:h.default.content},s.default.createElement("dl",null,s.default.createElement("dt",null,a.name),s.default.createElement("dd",null,t("NAME"))),s.default.createElement("dl",null,s.default.createElement("dt",null,s.default.createElement(p.default,{className:h.default.status,type:a.status,name:t(a.status)})),s.default.createElement("dd",null,t("STATUS"))),r&&s.default.createElement("dl",null,s.default.createElement("dt",null,n.name),s.default.createElement("dd",null,t("VERSION"))),s.default.createElement("dl",null,s.default.createElement("dt",null,a.zone),s.default.createElement("dd",null,t("PROJECT"))),s.default.createElement("dl",null,s.default.createElement("dt",null,a.cluster||a.runtime_id),s.default.createElement("dd",null,t("CLUSTER"))),s.default.createElement("dl",null,s.default.createElement("dt",null,(0,m.getLocalTime)(a.upgrade_time||a.create_time).format("YYYY-MM-DD HH:mm:ss")),s.default.createElement("dd",null,t("CREATION_TIME"))))}},{key:"render",value:function(){var e=this.props.className;return s.default.createElement("div",{className:(0,d.default)(h.default.item,e)},s.default.createElement("div",{className:h.default.itemMain},this.renderContent()))}}]),r}(s.default.PureComponent);a.default=y,y.propTypes={className:f.default.string,detail:f.default.object,showVersion:f.default.bool},y.defaultProps={detail:{},showVersion:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),u=n(r(50)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(73)),h=n(r(650)),v=n(r(191)),y=r(25),g=n(r(274)),b=n(r(1184)),E=n(r(3139)),_=n(r(3144));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=O(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).versionChange=(0,h.default)((function(e,a){(0,m.default)(t.props.detail,a,e)}),200),t.handleOk=(0,u.default)(l.default.mark((function e(){var a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.formRef.current,r=(0,v.default)(t.props.detail,["name","description","app_id","version_id"]),a&&a.validate((function(){return t.props.onOk(r)}));case 3:case"end":return e.stop()}}),e)}))),t.handleNext=function(){var e=E.default.length;t.setState((function(t){var a=t.currentStep;return{currentStep:Math.min(a+1,e-1)}}))},t.handlePrev=function(){t.setState((function(e){var t=e.currentStep,a=e.subRoute;return{currentStep:Math.max(t-1,0),subRoute:a}}))},t.formRef=d.default.createRef(),t.state={currentStep:0,formTemplate:e.formTemplate},t}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.formTemplate;a&&a!==e.visible&&this.setState({currentStep:0,formTemplate:r})}},{key:"renderTabs",value:function(){var e=this.state.currentStep;return E.default.length<2?null:d.default.createElement("div",{className:_.default.tabs},d.default.createElement(b.default,{steps:E.default,current:e}))}},{key:"renderContent",value:function(){var e=this.state.currentStep,t=E.default[e].component;return t?"updateLog"===E.default[e].value?d.default.createElement("div",{className:_.default.content},d.default.createElement(t,{versionChange:this.versionChange,formData:this.props.detail,formRef:this.formRef})):d.default.createElement("div",{className:_.default.content},d.default.createElement(t,null)):null}},{key:"renderFooter",value:function(){var e=this.props.isSubmitting,a=this.state.currentStep,r=E.default||[],n=r.every((function(e,t){return!e.required||a>=t})),l=a<r.length-1;return d.default.createElement("div",{className:_.default.footer},a?d.default.createElement(y.Button,{type:"default",onClick:this.handlePrev},t("PREVIOUS")):null,l&&d.default.createElement(y.Button,{type:"control",onClick:this.handleNext},t("NEXT")),n&&d.default.createElement(y.Button,{type:"control",loading:e,disabled:e,onClick:this.handleOk},t("OK")))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return d.default.createElement(g.default,{width:960,title:t("SUBMIT_FOR_REVIEW"),description:t("SUBMIT_REVIEW_DESC"),icon:"templet",bodyClassName:_.default.body,onCancel:r,visible:a,hideFooter:!0},d.default.createElement("div",null,this.renderTabs(),this.renderContent(),this.renderFooter()))}}]),r}(d.default.Component);a.default=S,S.propTypes={formTemplate:p.default.object,detail:p.default.object,visible:p.default.bool,isSubmitting:p.default.bool,onOk:p.default.func,onCancel:p.default.func},S.defaultProps={formTemplate:{},detail:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(3140)),l=r(a(3142)),u=[{title:"Test Steps",icon:"cdn",component:n.default,value:"testSteps",required:!0},{title:"UPDATE_LOG",icon:"update",component:l.default,value:"updateLog",required:!0}];t.default=u},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(1)),v=n(r(814)),y=n(r(832)),g=r(37),b=n(r(3141));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,m.observer)((o=u=function(e){(0,s.default)(r,e);var a=E(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).state={},t.store=new v.default,t.fileStore=new y.default,t}return(0,c.default)(r,[{key:"render",value:function(){var e=(0,g.getWebsiteUrl)().url;return p.default.createElement("div",{className:b.default.main},p.default.createElement("p",{className:b.default.note},t("VERSION_SUBMIT_NOTE")),p.default.createElement("div",{className:b.default.steps},t.html("VERSION_SUBMIT_TEST_STEPS")),p.default.createElement("p",null,t.html("APP_LEARN_MORE",{docUrl:e})))}}]),r}(p.default.Component),u.propTypes={detail:h.default.object,appId:h.default.string,appName:h.default.string},u.defaultProps={detail:{},appId:"",appName:""},l=o))||l;a.default=_},function(e,t,a){e.exports={main:"hFWh-mSL02iKI7WKdR_5l",note:"_2rSD6cuK5KVFAbsMqd0GqL",steps:"_2n7zO2w6NOvjkpI2oX-qrw"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(1)),v=r(25),y=r(58),g=n(r(3143));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var E=(0,m.observer)((o=u=function(e){(0,s.default)(r,e);var a=b(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t,a){e.props.handleChange(t,a)},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.formData,n=a.formRef;return p.default.createElement(v.Form,{data:r,ref:n,className:g.default.editForm},p.default.createElement(v.Form.Item,{label:t("VERSION_NUMBER"),rules:[{required:!0,message:t("ENTER_VERSION_NUMBER_TIP")},{pattern:y.PATTERN_APPTEMPLATE_VERSION,message:t("INVALID_VERSION_TIP")}]},p.default.createElement(v.Input,{name:"name",autoFocus:!0,maxLength:30,onChange:function(t){return e.handleChange(t,"name")}})),p.default.createElement(v.Form.Item,{label:t("UPDATE_LOG"),desc:t("UPDATE_LOG_DESC")},p.default.createElement(v.TextArea,{name:"description",onChange:function(t){return e.handleChange(t,"description")}})))}}]),r}(p.default.Component),u.propTypes={formData:h.default.object,handleChange:h.default.func},u.defaultProps={formData:{},handleChange:function(){}},l=o))||l;a.default=E},function(e,t,a){e.exports={editForm:"_3TQUkGWZsmTCWNtSyWo28f"}},function(e,t,a){e.exports={body:"_1yBJEkjOyZax6iUKNs2ZjR",content:"_2wAy1hhb5zvoo1HyEOReik",footer:"_1gu2-SPZVczenZTAKg50A1",typeWrapper:"_10Telf9vCj8lRctNBxf3kE",type:"_2l6XbaMnVqIsUKpw-rt3f-",text:"_19XzP_QXK5InywFsshTNwB",bottomImage:"ZltLk9szDTBzU-0Jlm4vq"}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(16)),p=n(r(0)),m=n(r(3)),h=r(5),v=r(70),y=r(25),g=n(r(274)),b=n(r(826)),E=n(r(770)),_=n(r(753)),O=n(r(1469)),S=n(r(788)),k=n(r(3170)),C=n(r(3172)),R=n(r(3174));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var D=(0,v.inject)("rootStore")(l=(0,v.observer)(l=function(e){(0,c.default)(r,e);var a=P(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).fetchData=function(e){var t=n.props.workspace,a=n.state,r=a.cluster,l=a.search,o=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({workspace:t},e);"federatedprojects"===n.state.type?o.labelSelector="kubesphere.io/workspace=".concat(t):(o.cluster=r,o.labelSelector="kubefed.io/managed!=true, kubesphere.io/kubefed-host-namespace!=true"),l&&(o.name=l),n.stores[n.state.type].fetchList(o)},n.handleSearch=function(e){n.setState({search:e},n.fetchData)},n.handleRefresh=function(){return n.fetchData()},n.handleTypeChange=function(e){n.state.type!==e&&n.setState({type:e,search:""},n.fetchData)},n.handleClusterChange=function(e){n.setState({cluster:e,search:""},n.fetchData)},n.handleEnterWorkspace=function(){var e=n.props,t=e.workspace;return(0,e.onChange)("/workspaces/".concat(t))},n.handleOnEnter=function(e){var t=n.props,a=t.workspace,r=t.onChange,l=n.state.cluster;"projects"===n.state.type?r("/".concat(a,"/clusters/").concat(l,"/projects/").concat(e.name)):"federatedprojects"===n.state.type?r("/".concat(a,"/federatedprojects/").concat(e.name)):e.namespace&&l&&r("/".concat(a,"/clusters/").concat(l,"/devops/").concat(e.namespace))},n.clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.label})},n.showCreate=function(){var e=n.props,t=e.workspace,a=e.rootStore,r=n.state.cluster;"projects"===n.state.type?a.triggerAction("project.create",{store:n.projectStore,workspace:t,success:function(){return n.fetchData()}}):"federatedprojects"===n.state.type?a.triggerAction("federated.project.create",{store:n.projectStore,workspace:t,clusters:n.store.clusters.data.slice(),success:function(){return n.fetchData()}}):a.triggerAction("devops.create",{store:n.devopsStore,cluster:r,workspace:t,success:function(){return n.fetchData()}})},n.store=new E.default,n.projectStore=new _.default,n.fedProjectStore=new O.default({module:"namespaces"}),n.devopsStore=new S.default,n.stores={devops:n.devopsStore,federatedprojects:n.fedProjectStore,projects:n.projectStore},n.state={type:e.defaultType||"projects",cluster:e.cluster||"",search:""},n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.store.fetchDetail({workspace:this.props.workspace}),this.store.fetchClusters({workspace:this.props.workspace}).then((function(){e.state.cluster||e.setState({cluster:(0,d.default)(e.store.clusters,"data[0].name","")})}))}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.workspace,l=a.onCancel,o=this.state,i=o.type,c=o.cluster,s=this.store.detail,f=this.stores[i].list,v=(0,h.toJS)(f),E=v.data,_=v.total,O=v.page,S=v.isLoading,w=globals.app.isMultiCluster&&"federatedprojects"!==i;return p.default.createElement(g.default,{bodyClassName:R.default.body,visible:r,onCancel:l,width:960,icon:"enterprise",title:p.default.createElement("a",{onClick:this.handleEnterWorkspace},n),description:(0,d.default)(s,"description")||t("WORKSPACE"),hideFooter:!0},p.default.createElement("div",{className:R.default.bar},p.default.createElement(y.Columns,{className:"is-variable is-1"},p.default.createElement(y.Column,{className:"is-narrow"},p.default.createElement(y.RadioGroup,{mode:"button",value:i,options:this.types,onChange:this.handleTypeChange})),p.default.createElement(y.Column,null,p.default.createElement("div",{className:R.default.searchWrapper},w&&p.default.createElement(C.default,{className:R.default.cluster,options:this.clusters,value:c,onChange:this.handleClusterChange}),p.default.createElement(y.InputSearch,{className:(0,m.default)(R.default.search,(0,u.default)({},R.default.withSelect,w)),value:this.state.search,placeholder:t("SEARCH_BY_NAME"),onSearch:this.handleSearch}))),p.default.createElement(y.Column,{className:"is-narrow"},p.default.createElement("div",null,p.default.createElement(y.Button,{icon:"refresh",type:"flat",onClick:this.handleRefresh}),this.canCreate&&p.default.createElement(y.Button,{type:"control",onClick:this.showCreate},t("CREATE_PROJECT")))))),p.default.createElement("div",{className:R.default.list},p.default.createElement(b.default,{wrapperClassName:R.default.listWrapper,data:E,total:_,page:O,loading:S,onFetch:this.fetchData},E.map((function(t){return p.default.createElement(k.default,{key:t.uid||t.devops,data:t,type:i,onEnter:e.handleOnEnter})})))))}},{key:"clusters",get:function(){return this.store.clusters.data.map((function(e){return{label:e.name,value:e.name,cluster:e,disabled:!e.isReady}}))}},{key:"enabledActions",get:function(){var e=this.props.workspace;return{projects:globals.app.getActions({workspace:e,module:"projects"}),federatedprojects:globals.app.getActions({workspace:e,module:"federatedprojects"}),devops:globals.app.getActions({workspace:e,module:"devops"})}}},{key:"types",get:function(){var e=[{label:t("PROJECT_PL"),value:"projects"}];return globals.app.isMultiCluster&&e.push({label:t("MULTI_CLUSTER_PROJECT_PL"),value:"federatedprojects"}),globals.app.hasKSModule("devops")&&e.push({label:t("DevOps Projects"),value:"devops"}),e}},{key:"canCreate",get:function(){return this.enabledActions[this.state.type].includes("create")}}]),r}(p.default.Component))||l)||l;a.default=D},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(3)),p=n(r(652)),m=r(37),h=n(r(3171));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(r,e);var a=v(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props,a=t.onEnter,r=t.data;"Terminating"!==r.status&&a&&a(r)},e}return(0,o.default)(r,[{key:"render",value:function(){var e,a,r,n,u,o=this.props,i=o.type,c=o.data;"devops"===i?(e=c.name,a=c.description||"-",n=c.creator,u=c.create_time||c.createTime,r="strategy-group"):(e=(0,m.getDisplayName)(c),a=c.description||"-",n=c.creator,u=c.createTime,r="project");var s="Terminating"===c.status||"Pending"===c.status;e=f.default.createElement("div",{className:h.default.name},s?e:f.default.createElement("a",null,e)),a=s?t(c.status):a;var v=[{title:n||"-",description:t("CREATOR")},{title:(0,m.getLocalTime)(u).format("YYYY-MM-DD HH:mm:ss"),description:t("CREATION_TIME")}];return f.default.createElement(p.default.Item,{className:(0,d.default)(h.default.wrapper,(0,l.default)({},h.default.disabled,s)),icon:r,title:e,description:a,details:v,onClick:this.handleClick})}}]),r}(f.default.Component);a.default=y},function(e,t,a){e.exports={wrapper:"_1o-dLqKI-OH4t32JiuQvJY",name:"_1fvTeU1MWd8KC6683FmppW",disabled:"_39NvLo_HIDH6IBoxJleggI"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(r(12)),o=l(r(13)),i=l(r(19)),c=l(r(20)),s=l(r(18)),f=n(r(0)),d=l(r(3)),p=r(25),m=l(r(3173));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,i.default)(r,e);var a=h(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleOptionsClick=function(t,a){e.props.onChange(a)},e}return(0,o.default)(r,[{key:"renderOptions",value:function(){var e=this.props.options;return f.default.createElement(p.Menu,{className:m.default.options,onClick:this.handleOptionsClick},e.map((function(e){return f.default.createElement(p.Menu.MenuItem,{key:e.value},e.label)})))}},{key:"renderControl",value:function(){var e=this.props,a=e.className,r=e.value;return f.default.createElement("div",{className:(0,d.default)(m.default.value,a)},f.default.createElement("span",{className:m.default.label},t("CLUSTER_VALUE",{value:r})),f.default.createElement(p.Icon,{className:m.default.rightIcon,name:"chevron-down",type:"light"}))}},{key:"render",value:function(){return f.default.createElement(p.Dropdown,{theme:"dark",content:this.renderOptions()},this.renderControl())}}]),r}(f.Component);a.default=v},function(e,t,a){e.exports={value:"iBgrlTIhhAdr3v61tBxdM",label:"_1z-9CsuPcDy1VL0YsaYR-s",options:"_2vXhJuxyjWA4U134IsKQTP",rightIcon:"_2_PtISrc4aj41nwe98JFV3"}},function(e,t,a){e.exports={body:"_2AWoITZgzreiyZ84HirO03",bar:"_2_dobDyawM5i7WFX4Pup8j",list:"_1ya--9RrTtuKNNEfHLgcU_",listWrapper:"o59euknBKGaDOtAOhABOi",card:"_2VdFH0ObA_bD1RiXzhvXgx",icon:"_3k9RIViku44Wpl-tcRCZbE",searchWrapper:"_1465G-ETjO63lwyecrWvsT",cluster:"_1j-z5K_z6AgrvVu5HInadf",search:"_3W-5EzkFumEt2ngSqWa8WF",withSelect:"_3jQhkjoq19tUDivCgH4nzH"}},function(e,t,a){e.exports={titleWrapper:"_1NfEC1exUIceM5clopym0J",icon:"_3rLxoKal79OdPz1zBQBf9S",text:"wM2M-arc1xW7_ACwyslzX",tag:"xoa4DtjhuMe0YrY54vNG8"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.processEdges=t.processData=void 0;var n=r(a(21)),l=r(a(16)),u=r(a(73)),o=r(a(32)),i=r(a(849)),c=r(a(290)),s=r(a(1481));function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={rankdir:"LR",nodesep:"60",ranksep:"240"};t.processData=function(e,t){return e&&e.edges&&(e.edges=m(e.edges)),function(e){var t=new s.default.graphlib.Graph({multigraph:!0,compound:!0});t.setGraph(p),t.setDefaultEdgeLabel((function(){return{}})),t.setDefaultNodeLabel((function(){return{}}));var a=(0,c.default)(e,"name"),r={};e.forEach((function(a){var n=a.nodes.filter((function(e){return e.data.workload})),l=203*n.length+12*(n.length-1)+56,u=-1!==a.name.indexOf("kubesphere")||"unknown"===a.name;u&&(l=52),n.length>0&&t.setNode(a.name,{name:a.name,width:226,height:l,workloadNum:n.length,isGateway:u}),a.workloads=n,a.edges.out.forEach((function(n){var l=e.find((function(e){return e.ids.includes(n.data.target)}));l&&l.name&&(t.setEdge(a.name,l.name,{id:n.data.id,out:a.edges.out,name:a.name,targetName:l.name}),r[n.data.id]=n)}))})),s.default.layout(t);var n=[],l=[];return t.nodes().forEach((function(e){var r=t.node(e);r.workloadNum>1&&(r.y-=110*(r.workloadNum-1)),n.push(d(d({},a[e]),{},{position:r}))})),t.edges().forEach((function(e){var n=t.edge(e),u=t.node(n.name),o=t.node(n.targetName),i=r[n.id],c=n.out.filter((function(e){return e.data.target===i.data.target})),s=n.points.length;if(s>0)if(3===s&&(n.points=[n.points[0],n.points[s-1]],s=n.points.length),u.isGateway)l.push(d(d({},i),{},{position:{points:[{x:u.x+u.width+-20,y:u.y+u.height/2+36},{x:o.x,y:o.y+o.height/2+36}]}}));else{var f=a[n.name].workloads.map((function(e){return e.data.id}));c.forEach((function(e){var t=f.indexOf(e.data.source),a={points:[{x:u.x+u.width,y:u.y+220*(t+.5)+36},{x:o.x,y:o.y+o.height/2+30*(t+1)}]};l.push(d(d({},e),{},{position:a}))}))}})),{nodes:n,edges:l}}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nodes,a=void 0===t?[]:t,r=e.edges,n=void 0===r?[]:r,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,o.default)(a))return[];for(var u=[],c={},s=0;s<a.length;s++)a[s].data.isRoot&&u.push(a[s]),c[a[s].data.id]=a[s];var f=[],d=(0,i.default)(a,"data.app");return Object.keys(d).forEach((function(e){for(var t=d[e],a=t.map((function(e){return e.data.id})),r=[],u=[],o=[],i=0;i<n.length;i++){var c=n[i],s=c.data,p=s.source,m=s.target;a.includes(p)&&a.includes(m)?o.push(c):!a.includes(p)&&a.includes(m)?r.push(c):a.includes(p)&&!a.includes(m)&&u.push(c)}f.push({name:e,ids:a,nodes:t,health:l[e]||{},edges:{in:r,out:u,inner:o}})})),f}(e,t))};var m=function(e){if((0,o.default)(e))return[];var t={};return e.forEach((function(e){if(t[e.data.id]){var a=(0,l.default)(t[e.data.id],"data.traffic",{}),r=(0,l.default)(e,"data.traffic",{});if("tcp"===a.protocol||"tcp"===r.protocol){var n=Number((0,l.default)(a,"rates.tcp",0)),o=Number((0,l.default)(r,"rates.tcp",0));(0,u.default)(a,"rates.tcp",(n+o).toFixed(2))}}else t[e.data.id]=e})),Object.values(t)};t.processEdges=m},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(136)),u=r(a(12)),o=r(a(13)),i=r(a(19)),c=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(3)),p=r(a(16)),m=r(a(68)),h=r(a(3353));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,u.default)(this,a),(r=t.call(this,e)).handleMouseover=function(){var e=r.props.data;document.getElementById(e.data.id).classList.add(h.default.selected)},r.handleMouseout=function(){var e=r.props.data;document.getElementById(e.data.id).classList.remove(h.default.selected)},r.getStatus=function(){var e=r.props.data,t=(0,p.default)(e,"data.traffic");if(!t||!t.rates)return"nodata";if(t.rates.tcp>0)return"tcpActive";var a=0,n=0;return t.rates.http>0?(a=Number(t.rates.http),n=t.rates.httpPercentErr>0?Number(t.rates.httpPercentErr):0):t.rates.grpc>0&&(a=Number(t.rates.grpc),n=t.rates.grpcPercentErr>0?Number(t.rates.grpcPercentErr):0),0===a?"nodata":n>20?"error":n>.1?"degrade":"active"},r.getPath=function(){var e,t=r.props.data;if(t.position.points.length<=2){var a=(0,l.default)(t.position.points,2),n=a[0],u=a[1],o=(n.x+u.x)/2,i=(u.y-n.y)/4;e="M".concat(n.x,",").concat(n.y," C").concat(o,",").concat(n.y+i," ").concat(o,",").concat(u.y-i," ").concat(u.x,",").concat(u.y)}else e=t.position.points.reduce((function(e,t){return""===e?"M".concat(t.x,",").concat(t.y):-1!==e.indexOf("C")?"".concat(e,", ").concat(t.x," ").concat(t.y):"".concat(e," C").concat(t.x," ").concat(t.y)}),"");return e},r.hoverRef=f.default.createRef(),r}return(0,o.default)(a,[{key:"componentDidMount",value:function(){this.hoverRef.current&&(this.hoverRef.current.addEventListener("mouseover",this.handleMouseover),this.hoverRef.current.addEventListener("mouseout",this.handleMouseout))}},{key:"componentWillUnmount",value:function(){this.hoverRef.current&&(this.hoverRef.current.removeEventListener("mouseover",this.handleMouseover),this.hoverRef.current.removeEventListener("mouseout",this.handleMouseout))}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.selected,r=this.getPath(),l=this.getStatus(),u=(0,d.default)(h.default.path,h.default[l],(0,n.default)({},h.default.selected,a)),o=(0,d.default)(h.default.marker,h.default[l]);return f.default.createElement("g",null,f.default.createElement("defs",null,f.default.createElement("marker",{id:"triangle-".concat(l),viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse"},f.default.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",className:o})),f.default.createElement("marker",{id:"dot-".concat(l),viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"5",markerHeight:"5"},f.default.createElement("circle",{cx:"5",cy:"5",r:"5",className:o}))),f.default.createElement("path",{className:u,id:t.data.id,d:r,markerStart:"url(#dot-".concat(l,")"),markerEnd:"url(#triangle-".concat(l,")")}),f.default.createElement("path",{ref:this.hoverRef,d:r,fill:"none",stroke:"transparent",strokeWidth:"30"}),["active","tcpActive"].includes(l)&&f.default.createElement("circle",{r:"6",className:o},f.default.createElement("animateMotion",{dur:"6s",repeatCount:"indefinite"},f.default.createElement("mpath",{xlinkHref:"#".concat(t.data.id)}))),f.default.createElement("text",{width:"500",className:o,transform:"translate(0 -20)"},f.default.createElement("textPath",{xlinkHref:"#".concat(t.data.id),startOffset:"50%",textAnchor:"middle"},this.traffic)))}},{key:"traffic",get:function(){var e=this.props.data,t=(0,p.default)(e,"data.traffic"),a=(0,p.default)(t,"rates.tcp");if(!(0,m.default)(a))return"".concat(a," B/s");var r=(0,p.default)(t,"rates.http",0);return"".concat(r," RPS")}}]),a}(f.default.Component);t.default=y},function(e,t,a){e.exports={path:"f-qkOuFPRte0_-Z7QO_at",error:"C5K1TNQ2EeQCuscsvuVBr",active:"q8TR7qYUjNW5At4k1uzji",tcpActive:"_3s88I6Eoh7DqzdiCvZUuG9",selected:"_3Y5xaV3Vvhnr7rlXGL7l8q",marker:"_3q-X0_f1j8nrDn4cbDKE9b"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(16)),m=n(r(290)),h=n(r(849)),v=n(r(3)),y=n(r(3355)),g=n(r(3357));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props.data;(0,e.context.onSelectApp)(t,"app")},e}return(0,o.default)(r,[{key:"render",value:function(){var e,a=this.props,r=a.data,n=a.store,u=this.context,o=u.selectedData,i=u.selectedType;if(!r.nodes)return null;var c=(0,h.default)(r.nodes,(function(e){return"unknown"===e.data.nodeType?"app":e.data.nodeType})),s=(0,p.default)(c,"service.length")>0,d=(0,p.default)(r,"health.workloadStatuses",[]).reduce((function(e,t){return e+(t.replicas||t.availableReplicas||0)}),0),b=(0,p.default)(r,"health.workloads",{}),E=(0,m.default)((0,p.default)(r,"edges.inner",[]),"data.target");return f.default.createElement("div",{className:"ks-app-component",onClick:s?this.handleClick:null,"data-component":r.name,style:{position:"absolute",top:r.position.y,left:r.position.x,zIndex:2}},s&&f.default.createElement("p",{className:g.default.title},r.name),f.default.createElement("div",{className:(0,v.default)((e={},(0,l.default)(e,g.default.group,s),(0,l.default)(e,g.default.selected,"app"===i&&o.name===r.name),(0,l.default)(e,g.default.error,(0,p.default)(r,"health.requests.errorRatio")>0||(0,p.default)(r,"health.service.requests.errorRatio")>0),e))},s&&f.default.createElement("p",{className:g.default.pods},f.default.createElement("img",{src:"/assets/health.svg",alt:""}),t("Pods"),": ",d),c.service&&c.service.map((function(e){return f.default.createElement("div",{key:e.data.id,"data-service":e.data.service,"data-service-id":e.data.id})})),c.app&&c.app.map((function(e){return f.default.createElement(y.default,{className:g.default.app,key:e.data.id,data:e.data,edge:E[e.data.id],health:b[e.data.workload],inGroup:s,store:n})}))))}}]),r}(f.default.Component);a.default=E,E.propTypes={data:d.default.object},E.contextTypes={selectedData:d.default.object,selectedType:d.default.string,onSelectApp:d.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=r(25),v=n(r(3356));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=y(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderHTTPMetrics",value:function(){var e=this.props,a=e.health,r=e.edge,n=(0,f.default)(a,"requests.errorRatio"),l=(0,f.default)(r,"data.traffic.rates.http",0),u=-1===n?NaN:(100-n).toFixed(2),o=(0,f.default)(r,"data.responseTime",NaN);return d.default.createElement("div",{className:v.default.detail},d.default.createElement("p",null,d.default.createElement(h.Icon,{name:"changing-over",size:16})," ","".concat(l," RPS")),d.default.createElement("p",null,d.default.createElement(h.Icon,{name:"check",size:16})," ",isNaN(u)?t("NO_DATA_SCAP"):"".concat(u,"%")),d.default.createElement("p",null,d.default.createElement(h.Icon,{name:"timed-task",size:16})," ",isNaN(o)||"0"===o?t("NO_DATA_SCAP"):"".concat(o," ms")),d.default.createElement("p",null,d.default.createElement(h.Icon,{name:"pod",size:16})," ",(0,f.default)(a,"workloadStatus.available")||(0,f.default)(a,"workloadStatus.availableReplicas")," ","/"," ",(0,f.default)(a,"workloadStatus.replicas")||(0,f.default)(a,"workloadStatus.desiredReplicas")))}},{key:"renderTCPMetrics",value:function(){var e=this.props,a=e.data,r=e.health,n=(0,f.default)(a,"traffic[0].rates.tcpIn"),l=(0,f.default)(a,"traffic[0].rates.tcpOut");return d.default.createElement("div",{className:v.default.detail},d.default.createElement("p",null,d.default.createElement(h.Icon,{name:"next",size:16})," ",isNaN(n)?t("NO_DATA_SCAP"):"".concat(n," B/s")),d.default.createElement("p",null,d.default.createElement(h.Icon,{name:"previous",size:16})," ",isNaN(l)?t("NO_DATA_SCAP"):"".concat(l," B/s")),d.default.createElement("p",null,d.default.createElement(h.Icon,{name:"pod",size:16})," ",(0,f.default)(r,"workloadStatus.availableReplicas")," /"," ",(0,f.default)(r,"workloadStatus.desiredReplicas")))}},{key:"renderDetail",value:function(){var e=this.props.edge;return"http"===((0,f.default)(e,"data.traffic.protocol")||"http")?this.renderHTTPMetrics():this.renderTCPMetrics()}},{key:"render",value:function(){var e=this.props,a=e.data,r=e.health,n=e.className,u=e.inGroup;if(-1!==a.app.indexOf("kubesphere")||"unknown"===a.app)return d.default.createElement("div",{className:(0,m.default)(v.default.card,n),"data-workload":a.workload,"data-workload-id":a.id,"data-group":u},d.default.createElement("div",{className:v.default.type},t("TRAFFIC_ENTRY")),d.default.createElement("div",{className:v.default.wrapper},d.default.createElement("div",{className:v.default.gatewayName},d.default.createElement(h.Icon,{name:"project",size:16}),a.targetNamespace)));var o=(0,f.default)(r,"requests.errorRatio");return d.default.createElement("div",{className:(0,m.default)(v.default.card,n,(0,l.default)({},v.default.error,o>0)),"data-workload":a.workload,"data-workload-id":a.id,"data-group":u},d.default.createElement("div",{className:v.default.type},a.hasCB&&d.default.createElement(h.Icon,{name:"thunder",type:"light"}),t("DEPLOYMENT")),d.default.createElement("div",{className:v.default.wrapper},this.renderDetail(),d.default.createElement("div",{className:v.default.workload},d.default.createElement("span",null,t("DEPLOYMENT")),d.default.createElement("span",null,a.workload))))}}]),r}(d.default.PureComponent);a.default=g,g.propTypes={data:p.default.object,health:p.default.object,edge:p.default.object},g.defaultProps={data:{},health:{},edge:{}}},function(e,t,a){e.exports={card:"_3UtyX1TwsMA4J5_I9azhk4",error:"_1f5z3cAVlVjSxozltEiLWa",type:"_3ig_hBH8qoAHkvUzs_7XPE",wrapper:"_2-NCjQfg1O19iTRk90LKv",detail:"_3Rb35sVDvzSTfvK_EvU8E6",gatewayName:"-s8vbKJS6TAxA3e75lQyx",workload:"_3hKVcpsaMemXWCdKAFDatc"}},function(e,t,a){e.exports={title:"vt11zKMrFCOLash0CtDuq",app:"_2VIFmapZqEet3i4h8IcfoT",group:"GBv7IxeMCUzEwP37i9ruG",selected:"_3hAJJY6cz3ePuX_85HtNfJ",error:"_3cHhj9ZjDA2V1eTNhECHpo",pods:"_2g9MF0hWsSUsXH7jreOBwD"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=r(25),v=n(r(3359)),y=n(r(3364)),g=n(r(3368)),b=n(r(3370));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=h.Collapse.CollapseItem,O=function(e){(0,i.default)(r,e);var a=E(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={name:(0,f.default)(e.props,"data.name"),activeKey:["monitor"]},e.handleCollapseChange=function(t){e.setState({activeKey:t})},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.data,r=e.fullScreen;if(!a.nodes)return null;var n=a.nodes.find((function(e){return"service"===e.data.nodeType}));if(!n)return null;var u=(0,f.default)(n,"data.traffic[0].protocol");return d.default.createElement("div",{className:(0,m.default)(b.default.detail,"ks-service-detail")},d.default.createElement("div",{className:(0,m.default)(b.default.wrapper,(0,l.default)({},b.default.fullscreen,r))},d.default.createElement("div",{className:b.default.title},d.default.createElement(h.Icon,{name:"network-router",size:32}),d.default.createElement("div",null,d.default.createElement("div",{className:"h5"},a.name),d.default.createElement("p",null,t("SERVICE")))),d.default.createElement(h.Collapse,{activeKey:this.state.activeKey,onChange:this.handleCollapseChange,accordion:!0},d.default.createElement(_,{label:t("TRAFFIC_MONITORING"),key:"monitor"},d.default.createElement(v.default,{detail:a,store:this.props.store,protocol:u})),d.default.createElement(_,{label:t("TRAFFIC_MANAGEMENT"),key:"form"},d.default.createElement(y.default,{detail:a,store:this.props.store,protocol:u})),d.default.createElement(_,{label:t("POD_PL"),key:"pods"},d.default.createElement(g.default,{detail:a,store:this.props.store})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,f.default)(e,"data.name");return t.name!==a?{activeKey:["monitor"],name:a}:null}}]),r}(d.default.Component);a.default=O,O.propTypes={type:p.default.string,data:p.default.object}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(25),d=n(r(3360)),p=n(r(3361));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleTypeChange=function(e){t.setState({type:e})},t.state={type:"service"},t}return(0,u.default)(r,[{key:"render",value:function(){var e=this.state.type;return s.default.createElement("div",null,s.default.createElement(f.RadioGroup,{mode:"button",buttonWidth:50,value:this.state.type,onChange:this.handleTypeChange,options:this.types}),"service"===e?s.default.createElement(d.default,this.props):s.default.createElement(p.default,this.props))}},{key:"types",get:function(){return[{label:t("SERVICE_PL"),value:"service"},{label:t("WORKLOAD_PL"),value:"workload"}]}}]),r}(s.default.Component);a.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(12)),o=n(r(13)),i=n(r(19)),c=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(0)),p=n(r(1)),m=n(r(651)),h=r(725),v=r(305),y=r(735),g=n(r(1501)),b=n(r(1168));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,i.default)(r,e);var a=E(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).state={metrics:{},outMetrics:{}},t.getData(),t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){(0,m.default)(e.detail,this.props.detail)||this.getData()}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.getData()}),1e4)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"getData",value:function(){var e=this,t=this.props,a=t.detail,r=t.store,n=this.store.fetchServiceMetrics.bind(this.store);a&&a.name&&(n({name:a.name,namespace:r.detail.namespace,cluster:r.detail.cluster},{duration:1800}).then((function(t){e.setState({metrics:t})})),n({name:a.name,namespace:r.detail.namespace,cluster:r.detail.cluster},{duration:1800,direction:"outbound",reporter:"destination"}).then((function(t){e.setState({outMetrics:t})})))}},{key:"render",value:function(){return"tcp"===this.props.protocol?d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:b.default.title},t("TCP_INBOUND_TRAFFIC")),d.default.createElement(y.SimpleArea,(0,l.default)({},this.tcpInMetrics,{height:150}))):d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:b.default.title},t("TRAFFIC_RPS")),d.default.createElement(g.default,{metrics:this.trafficInMetrics}),d.default.createElement("div",{className:"margin-b8"}),d.default.createElement(y.SimpleArea,(0,l.default)({},this.requestInMetrics,{height:150})))}},{key:"store",get:function(){return this.props.store}},{key:"requestInMetrics",get:function(){if(!this.props.detail)return[];var e=this.state.metrics,t=(0,f.default)(e,"request_count[0].datapoints",[]),a=(0,f.default)(e,"request_error_count[0].datapoints",[]),r=t.map((function(e,t){return(0,v.getSuccessCount)(e,a[t])}));return(0,h.getAreaChartOps)({title:"TRAFFIC",legend:["SUCCESSFUL","ALL"],areaColors:["#329dce","#d8dee5"],data:[{values:r},{values:t}],unit:"RPS"})}},{key:"tcpInMetrics",get:function(){if(!this.props.detail)return[];var e=this.state.metrics,t=(0,f.default)(e,"tcp_received[0].datapoints",[]),a=(0,f.default)(e,"tcp_sent[0].datapoints",[]);return 0===t.length&&0===a.length?{}:(0,h.getAreaChartOps)({title:"BANDWIDTH",legend:["SENT","RECEIVED"],data:[{values:a},{values:t}],unit:"B/s"})}},{key:"trafficInMetrics",get:function(){if(!this.props.detail)return[];var e=this.state.metrics,t=(0,v.getMetricData)((0,f.default)(e,"request_count[0].datapoints",[]),NaN),a=(0,v.getMetricData)((0,f.default)(e,"request_error_count[0].datapoints",[]),0),r=t>0?100*(t-a)/t:NaN,n=(0,v.getMetricData)((0,f.default)(e,"request_duration_millis[0].datapoints",[]),NaN);return[{title:"TRAFFIC",data:t.toFixed(2),unit:"RPS",icon:"changing-over"},{title:"SUCCESS_RATE",data:r.toFixed(2),icon:"check",unit:"%"},{title:"DURATION",data:n.toFixed(2),icon:"timed-task",unit:"ms"}]}}]),r}(d.default.Component);a.default=_,_.propTypes={detail:p.default.object,store:p.default.object}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),u=n(r(49)),o=n(r(50)),i=n(r(12)),c=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(16)),m=n(r(0)),h=n(r(1)),v=n(r(651)),y=r(725),g=r(305),b=r(735),E=n(r(1501)),_=n(r(3362)),O=n(r(1168));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=function(e){(0,s.default)(n,e);var a,r=S(n);function n(e){var t;return(0,i.default)(this,n),(t=r.call(this,e)).handleWorkloadChange=function(e){t.setState({workload:e},(function(){return t.getData()}))},t.state={workload:(0,p.default)(e.detail,"workloads[0].data.workload"),metrics:{},outMetrics:{}},t.getData(),t}return(0,c.default)(n,[{key:"componentDidUpdate",value:function(e){var t=this;(0,v.default)(e.detail,this.props.detail)||this.setState({workload:(0,p.default)(this.props.detail,"workloads[0].data.workload")},(function(){t.getData()}))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.getData()}),1e4)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"getData",value:(a=(0,o.default)(u.default.mark((function e(){var t,a,r=this;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.workload,a=this.props.store,t&&(this.store.fetchWorkloadMetrics({name:t,namespace:a.detail.namespace,cluster:a.detail.cluster},{duration:1800}).then((function(e){r.setState({metrics:e})})),this.store.fetchWorkloadMetrics({name:t,namespace:a.detail.namespace,cluster:a.detail.cluster},{duration:1800,direction:"outbound",reporter:"destination"}).then((function(e){r.setState({outMetrics:e})})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderWorkloadSelect",value:function(){return m.default.createElement(_.default,{className:O.default.workloads,value:this.state.workload,options:this.workloads,onChange:this.handleWorkloadChange})}},{key:"render",value:function(){return"tcp"===this.props.protocol?m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:O.default.title},t("TCP_INBOUND_TRAFFIC")," ",this.renderWorkloadSelect()),m.default.createElement(b.SimpleArea,(0,l.default)({},this.tcpInMetrics,{height:150})),m.default.createElement("div",{className:O.default.title},t("TCP_OUTBOUND_TRAFFIC")," ",this.renderWorkloadSelect()),m.default.createElement(b.SimpleArea,(0,l.default)({},this.tcpOutMetrics,{height:150}))):m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:O.default.title},t("HTTP_INBOUND_TRAFFIC")," ",this.renderWorkloadSelect()),m.default.createElement(E.default,{metrics:this.trafficInMetrics}),m.default.createElement("div",{className:"margin-b8"}),m.default.createElement(b.SimpleArea,(0,l.default)({},this.requestInMetrics,{height:150})),m.default.createElement("div",{className:O.default.title},t("HTTP_OUTBOUND_TRAFFIC")," ",this.renderWorkloadSelect()),m.default.createElement(E.default,{metrics:this.trafficOutMetrics}),m.default.createElement("div",{className:"margin-b8"}),m.default.createElement(b.SimpleArea,(0,l.default)({},this.requestOutMetrics,{height:150})))}},{key:"store",get:function(){return this.props.store}},{key:"workloads",get:function(){return(0,p.default)(this.props.detail,"workloads",[]).map((function(e){return{label:(0,p.default)(e,"data.workload",""),value:(0,p.default)(e,"data.workload","")}}))}},{key:"requestInMetrics",get:function(){if(!this.props.detail)return[];var e=this.state.metrics,t=(0,p.default)(e,"request_count[0].datapoints",[]),a=(0,p.default)(e,"request_error_count[0].datapoints",[]),r=t.map((function(e,t){return(0,g.getSuccessCount)(e,a[t])}));return(0,y.getAreaChartOps)({title:"TRAFFIC",legend:["SUCCESSFUL","ALL"],areaColors:["#329dce","#d8dee5"],data:[{values:r},{values:t}],unit:"RPS"})}},{key:"requestOutMetrics",get:function(){if(!this.props.detail)return[];var e=this.state.outMetrics,t=(0,p.default)(e,"request_count[0].datapoints",[]),a=(0,p.default)(e,"request_error_count[0].datapoints",[]),r=t.map((function(e,t){return(0,g.getSuccessCount)(e,a[t])}));return(0,y.getAreaChartOps)({title:"TRAFFIC",legend:["SUCCESSFUL","ALL"],areaColors:["#329dce","#d8dee5"],data:[{values:r},{values:t}],unit:"RPS"})}},{key:"tcpInMetrics",get:function(){if(!this.props.detail)return[];var e=this.state.metrics,t=(0,p.default)(e,"tcp_received[0].datapoints",[]),a=(0,p.default)(e,"tcp_sent[0].datapoints",[]);return 0===t.length&&0===a.length?{}:(0,y.getAreaChartOps)({title:"BANDWIDTH",legend:["SENT","RECEIVED"],data:[{values:a},{values:t}],unit:"B/s"})}},{key:"tcpOutMetrics",get:function(){if(!this.props.detail)return{};var e=this.state.outMetrics,t=(0,p.default)(e,"metrics.tcp_received.matrix[0].values",[]),a=(0,p.default)(e,"tcp_sent[0].datapoints",[]);return 0===t.length&&0===a.length?{}:(0,y.getAreaChartOps)({title:"BANDWIDTH",legend:["SENT","RECEIVED"],data:[{values:a},{values:t}],unit:"B/s"})}},{key:"trafficInMetrics",get:function(){if(!this.props.detail)return[];var e=this.state.metrics,t=(0,g.getMetricData)((0,p.default)(e,"request_count[0].datapoints",[]),NaN),a=(0,g.getMetricData)((0,p.default)(e,"request_error_count[0].datapoints",[]),0),r=t>0?100*(t-a)/t:NaN,n=(0,g.getMetricData)((0,p.default)(e,"request_duration_millis[0].datapoints",[]),NaN);return[{title:"TRAFFIC",data:t.toFixed(2),unit:"RPS",icon:"changing-over"},{title:"SUCCESS_RATE",desc:"SUCCESS_RATE_SCAP",data:r.toFixed(2),icon:"check",unit:"%"},{title:"DURATION",data:n.toFixed(2),icon:"timed-task",unit:"ms"}]}},{key:"trafficOutMetrics",get:function(){if(!this.props.detail)return[];var e=this.state.outMetrics,t=(0,g.getMetricData)((0,p.default)(e,"request_count[0].datapoints",[]),NaN),a=(0,g.getMetricData)((0,p.default)(e,"request_error_count[0].datapoints",[]),0),r=t>0?100*(t-a)/t:NaN,n=(0,g.getMetricData)((0,p.default)(e,"request_duration_millis[0].datapoints",[]),NaN);return[{title:"TRAFFIC",data:t.toFixed(2),unit:"RPS",icon:"changing-over"},{title:"SUCCESS_RATE",desc:"SUCCESS_RATE_SCAP",data:r.toFixed(2),icon:"check",unit:"%"},{title:"DURATION",data:n.toFixed(2),icon:"timed-task",unit:"ms"}]}}]),n}(m.default.Component);a.default=k,k.propTypes={detail:h.default.object,store:h.default.object}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),u=n(a(13)),o=n(a(19)),i=n(a(20)),c=n(a(18)),s=r(a(0)),f=n(a(3)),d=a(25),p=n(a(3363));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,o.default)(a,e);var t=m(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).handleOptionsClick=function(t,a){e.props.onChange(a)},e}return(0,u.default)(a,[{key:"renderOptions",value:function(){var e=this.props.options;return s.default.createElement(d.Menu,{className:p.default.options,onClick:this.handleOptionsClick},e.map((function(e){return s.default.createElement(d.Menu.MenuItem,{key:e.value},e.label)})))}},{key:"renderControl",value:function(){var e=this.props,t=e.className,a=e.value;return s.default.createElement("div",{className:(0,f.default)(p.default.value,t)},s.default.createElement("span",{className:p.default.label},a),s.default.createElement(d.Icon,{className:p.default.rightIcon,name:"chevron-down",type:"light"}))}},{key:"render",value:function(){return s.default.createElement(d.Dropdown,{theme:"dark",content:this.renderOptions()},this.renderControl())}}]),a}(s.Component);t.default=h},function(e,t,a){e.exports={value:"_3CEWBshCQLzo8RNlclZR3J",label:"_2M9odPubyrPiecJ5IeMMOM",options:"MH6o3mirwIGZ0ZWiEaxbc",rightIcon:"_1DBoOHtlGbnr78vBqKbcEj"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u,o,i=n(r(21)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(16)),h=n(r(73)),v=n(r(738)),y=n(r(32)),g=n(r(138)),b=n(r(0)),E=n(r(1)),_=r(5),O=r(70),S=n(r(833)),k=r(25),C=n(r(740)),R=r(37),w=n(r(733)),P=n(r(3365)),D=n(r(3366)),T=n(r(3367));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var x=(0,O.observer)((o=u=function(e){(0,f.default)(r,e);var a=A(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).handleModeChange=function(e){n.setState({mode:e},(function(){"lb"===n.state.mode?(0,v.default)(n.state.formData,"spec.template.spec.trafficPolicy.loadBalancer.consistentHash"):(0,v.default)(n.state.formData,"spec.template.spec.trafficPolicy.loadBalancer.simple")}))},n.handlePoolToggle=function(e){n.setState({showPoolForm:e})},n.handleCircuitToggle=function(e){n.setState({showCircuitForm:e})},n.handleSubmit=function(e){var a=n.state,r=a.showCircuitForm,l=a.showPoolForm;r||(0,v.default)(e,"spec.template.spec.trafficPolicy.outlierDetection"),l||(0,v.default)(e,"spec.template.spec.trafficPolicy.connectionPool");var u=function(){n.getData(n.props),k.Notify.success({content:t("UPDATE_SUCCESSFUL")})};if((0,y.default)(n.detail)){var o=(0,_.toJS)(n.props.store.detail),i=o.cluster,c=o.namespace;n.store.create(e,{cluster:i,namespace:c}).then(u)}else(0,h.default)(e,"metadata.resourceVersion",n.detail.resourceVersion),n.store.update(n.detail,e).then(u)},n.sessionValidator=function(e,a,r){if((0,y.default)(a)||Object.values(a).some((function(e){return(0,g.default)(e)&&!e})))return r({message:t("PARAM_REQUIRED"),field:e.field});r()},n.state={mode:"lb",showPoolForm:!1,showCircuitForm:!1,formData:{}},n.store=new P.default,n.getData(e),n}return(0,s.default)(r,[{key:"getData",value:function(e){var t=this,a=e.detail.name,r=(0,_.toJS)(e.store.detail),n=r.cluster,l=r.namespace;this.store.fetchListByK8s({cluster:n,namespace:l,labelSelector:(0,R.joinSelector)({app:a}),limit:1}).then((function(){t.setState({showPoolForm:t.detail.connectPoolEnable,showCircuitForm:t.detail.outlierDetectionEnable,formData:t.formTemplate})}))}},{key:"componentDidUpdate",value:function(e){e.detail.name!==this.props.detail.name&&this.getData(this.props)}},{key:"getLBOptions",value:function(){return[{label:t("LB_ROUND_ROBIN"),value:"ROUND_ROBIN"},{label:t("LB_LEAST_CONN"),value:"LEAST_CONN"},{label:t("LB_RANDOM"),value:"RANDOM"}]}},{key:"renderLB",value:function(){var e=this.state.mode;return b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:T.default.title},t("TRAFFIC_POLICIES")),b.default.createElement(k.RadioGroup,{wrapClassName:"radio-group-button margin-t12",buttonWidth:165,value:e,onChange:this.handleModeChange,size:"small"},b.default.createElement(k.RadioButton,{value:"lb"},t("LOAD_BALANCING")),b.default.createElement(k.RadioButton,{value:"session"},t("SESSION_PERSISTENCE"))),"lb"===e&&this.renderLBOptions(),"session"===e&&this.renderSessionOptions())}},{key:"renderPool",value:function(){var e=this.state.showPoolForm,a=b.default.createElement("div",{className:T.default.title},t("CONNECTION_POOL"),b.default.createElement(k.Toggle,{checked:e,onChange:this.handlePoolToggle,onText:t("ON"),offText:t("OFF")})),r=b.default.createElement("div",{className:T.default.tip},t("CONNECTION_POOL_TIP"));return this.isHTTP?b.default.createElement(b.default.Fragment,null,a,e?b.default.createElement(b.default.Fragment,null,b.default.createElement(k.Form.Item,{className:"margin-t12",label:t("MAXIMUM_CONNECTIONS"),desc:t("MAXIMUM_CONNECTIONS_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.connectionPool.tcp.maxConnections",min:0})),b.default.createElement(k.Form.Item,{label:t("MAXIMUM_REQUESTS_PER_CONNECTION"),desc:t("MAXIMUM_REQUESTS_PER_CONNECTION_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.connectionPool.http.maxRequestsPerConnection",defaultValue:1,min:0})),b.default.createElement(k.Form.Item,{label:t("TRAFFIC_MONITORING_MAXIMUM_RETRIES"),desc:t("TRAFFIC_MONITORING_MAXIMUM_RETRIES_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.connectionPool.http.maxRetries",defaultValue:3,min:0})),b.default.createElement(k.Form.Item,{label:t("CONNECTION_TIMEOUT"),desc:t("CONNECTION_TIMEOUT_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.connectionPool.tcp.connectTimeout",min:0,unit:"ms",showUnit:!0})),b.default.createElement(k.Form.Item,{label:t("MAXIMUM_REQUESTS")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.connectionPool.http.http2MaxRequests",defaultValue:1024,min:0})),b.default.createElement(k.Form.Item,{label:t("MAXIMUM_PENDING_REQUESTS")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.connectionPool.http.http1MaxPendingRequests",defaultValue:1024,min:0}))):r):b.default.createElement(b.default.Fragment,null,a,e?b.default.createElement(b.default.Fragment,null,b.default.createElement(k.Form.Item,{className:"margin-t12",label:t("MAXIMUM_CONNECTIONS"),desc:t("MAXIMUM_CONNECTIONS_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.connectionPool.tcp.maxConnections",min:0})),b.default.createElement(k.Form.Item,{label:t("CONNECTION_TIMEOUT"),desc:t("CONNECTION_TIMEOUT_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.connectionPool.tcp.connectTimeout",min:0,unit:"ms",showUnit:!0}))):r)}},{key:"renderCircuit",value:function(){var e=this.state.showCircuitForm;return this.isHTTP?b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:T.default.title},t("CIRCUIT_BREAKER"),b.default.createElement(k.Toggle,{checked:e,onChange:this.handleCircuitToggle,onText:t("ON"),offText:t("OFF")})),e?b.default.createElement(b.default.Fragment,null,b.default.createElement(k.Form.Item,{className:"margin-t12",label:t("CONSECUTIVE_FIVEXX_ERRORS"),desc:t("CONSECUTIVE_FIVEXX_ERRORS_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.outlierDetection.consecutiveErrors",defaultValue:5,min:0})),b.default.createElement(k.Form.Item,{label:t("INSPECTION_INTERVAL_S"),desc:t("INSPECTION_INTERVAL_S_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.outlierDetection.interval",defaultValue:"10s",min:.001,unit:"s",showUnit:!0})),b.default.createElement(k.Form.Item,{label:t("MAXIUM_EJECTION_RATIO"),desc:t("MAXIUM_EJECTION_RATIO_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.outlierDetection.maxEjectionPercent",defaultValue:10,min:0})),b.default.createElement(k.Form.Item,{label:t("BASE_EJECTION_TIME_S"),desc:t("BASE_EJECTION_TIME_S_DESC")},b.default.createElement(C.default,{name:"spec.template.spec.trafficPolicy.outlierDetection.baseEjectionTime",defaultValue:"30s",min:0,unit:"s",showUnit:!0}))):b.default.createElement("div",{className:T.default.tip},t("CIRCUIT_BREAKER_DESC"))):null}},{key:"renderLBOptions",value:function(){return b.default.createElement("div",{className:"margin-t12"},b.default.createElement(k.Form.Item,{label:t("LOAD_BALANCING_ALGORITHM")},b.default.createElement(k.Select,{name:"spec.template.spec.trafficPolicy.loadBalancer.simple",options:this.getLBOptions(),defaultValue:"ROUND_ROBIN"})),b.default.createElement(k.Alert,{className:T.default.alert,message:t.html("LB_ALG_DESC"),type:"info"}))}},{key:"renderSessionOptions",value:function(){return b.default.createElement("div",{className:"margin-t12"},b.default.createElement(k.Form.Item,{label:t("METHOD"),rules:[{validator:this.sessionValidator}]},b.default.createElement(D.default,{name:"spec.template.spec.trafficPolicy.loadBalancer.consistentHash",protocol:this.props.protocol})))}},{key:"render",value:function(){return b.default.createElement(k.Form,{onSubmit:this.handleSubmit,data:this.state.formData},this.renderLB(),this.renderPool(),this.renderCircuit(),b.default.createElement("div",{className:"text-right margin-t12"},b.default.createElement(k.Button,{onClick:this.handleCancel},t("CANCEL")),b.default.createElement(k.Button,{type:"primary",htmlType:"submit",loading:this.store.isSubmitting,disabled:this.store.isSubmitting},t("OK"))))}},{key:"detail",get:function(){var e=(0,_.toJS)(this.store.list);return(0,m.default)(e,"data.[0]",{})}},{key:"isHTTP",get:function(){return"http"===this.props.protocol}},{key:"formTemplate",get:function(){if(this.detail._originData)return(0,S.default)(this.detail._originData);var e=this.props.detail.name,t=(0,_.toJS)(this.props.store.detail),a=t.namespace,r=t.selector;return w.default.strategyPolicy({name:e,namespace:a,selector:I(I({},r),{},{app:e})})}}]),r}(b.default.Component),u.propTypes={detail:E.default.object,store:E.default.object},u.defaultProps={detail:{}},l=o))||l;a.default=x},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var s=function(e){(0,u.default)(a,e);var t=c(a);function a(){var e;return(0,n.default)(this,a),(e=t.call(this)).module="servicepolicies",e}return(0,l.default)(a,[{key:"apiVersion",get:function(){return"apis/servicemesh.kubesphere.io/v1alpha2"}}]),a}(r(a(277)).default);t.default=s},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(136)),u=n(r(21)),o=n(r(12)),i=n(r(13)),c=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(650)),p=n(r(0)),m=n(r(1)),h=r(25);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(e){var t;(0,o.default)(this,r),(t=a.call(this,e)).triggerChange=(0,d.default)((function(e){t.props.onChange(e)}),500),t.handleTypeChange=function(e){t.setState({type:e,value:""},(function(){"useSourceIp"===e?t.triggerChange((0,u.default)({},e,!0)):t.triggerChange((0,u.default)({},e,""))}))},t.handleValueChange=function(e,a){t.setState({value:a},(function(){var e=t.state.type;if("httpCookie"===e){var r=function(e){for(var t=!0,a=e.replace(/\s+/g,"").split(";"),r={},n=0;n<a.length;n++){var l=a[n].split("=");l.length>1?r[l[0]]=l[1]:t=!1}return{result:r,status:t}}(a),n=r.parsedValue;r.status&&t.triggerChange((0,u.default)({},e,n))}else t.triggerChange((0,u.default)({},e,a))}))};var n=t.getOptions(),i=Object.keys(e.value)[0]||n[0].value,c=e.value[i];return"httpCookie"===i&&c&&(c=Object.entries(c).map((function(e){var t=(0,l.default)(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})).join("; ")),t.state={type:i,value:c,propsValue:e.value},t}return(0,i.default)(r,[{key:"getOptions",value:function(){return"http"===this.props.protocol?[{label:t("HASH_BASED_ON_HTTP_HEADER"),value:"httpHeaderName"},{label:t("HASH_BASED_ON_HTTP_COOKIE"),value:"httpCookie"},{label:t("HASH_BASED_ON_SOURCE_IP_ADDRESS"),value:"useSourceIp"}]:[{label:t("HASH_BASED_ON_SOURCE_IP_ADDRESS"),value:"useSourceIp"}]}},{key:"render",value:function(){var e=this.state,a=e.type,r=e.value;return p.default.createElement("div",null,p.default.createElement(h.Select,{value:a,options:this.getOptions(),onChange:this.handleTypeChange}),"httpHeaderName"===a&&p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"margin-t12"},t("HTTP_HEADER")),p.default.createElement(h.Input,{value:r,onChange:this.handleValueChange})),"httpCookie"===a&&p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"margin-t12"},t("HTTP_COOKIE")),p.default.createElement(h.Input,{value:r,onChange:this.handleValueChange,placeholder:"key1=value1; key2=value2"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.value!==t.propsValue){var a=Object.keys(e.value)[0],r=e.value[a];return"httpCookie"===a&&r&&(r=Object.entries(r).map((function(e){var t=(0,l.default)(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})).join("; ")),{type:a,value:r,propsValue:e.value}}return null}}]),r}(p.default.Component);a.default=y,y.propTypes={value:m.default.object,onChange:m.default.func},y.defaultProps={value:{},onChange:function(){}}},function(e,t,a){e.exports={alert:"_1vmq3lFL4s_LHc4G92GrAd",title:"UJTgRS_diNzcvnFtP8moj",tip:"IYAZYjWhc7hDQqpGq-eJy"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,u=n(r(49)),o=n(r(21)),i=n(r(50)),c=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(34),v=r(276),y=n(r(16)),g=r(5),b=r(25),E=n(r(651)),_=r(37),O=n(r(654)),S=n(r(736)),k=n(r(3369)),C=n(r(1502));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var D=(0,h.withRouter)(l=function(e){(0,f.default)(n,e);var a,r=P(n);function n(e){var t;return(0,c.default)(this,n),(t=r.call(this,e)).podStore=new O.default,t.workloadStore=new S.default("deployments"),t.state={workloads:[]},t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e){(0,E.default)(e.detail,this.props.detail)||this.getData()}},{key:"getData",value:(a=(0,i.default)(u.default.mark((function e(){var t,a,r,n,l,o,i,c,s;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.detail,r=t.store,!a||!a.name){e.next=10;break}return n=r.detail,l=n.namespace,o=n.cluster,i=a.nodes.filter((function(e){return e.data.workload})).map((function(e){return e.data.workload})),e.next=6,Promise.all([this.workloadStore.fetchList({namespace:l,cluster:o,names:i.join(",")}),this.podStore.fetchListByK8s({namespace:l,cluster:o,labelSelector:(0,_.joinSelector)(w(w({},r.detail.selector),{},{app:a.name}))})]);case 6:c=(0,g.toJS)(this.workloadStore.list.data),s=(0,g.toJS)(this.podStore.list.data),c.forEach((function(e){e.labels&&e.labels.version&&(e.pods=s.filter((function(t){return t.labels&&t.labels.version===e.labels.version&&t.labels.app===e.labels.app})))})),this.setState({workloads:c});case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this,a=this.state.workloads,r=this.props.match.params,n=r.workspace,l=r.cluster,u=r.namespace;return m.default.createElement("div",{className:C.default.wrapper},a.map((function(a){return m.default.createElement("div",{className:C.default.item,key:a.uid},m.default.createElement("div",{className:C.default.title},m.default.createElement(b.Icon,{name:"backup",size:32}),m.default.createElement("div",{className:C.default.text},m.default.createElement("p",null,m.default.createElement("strong",null,m.default.createElement(v.Link,{to:"/".concat(n,"/clusters/").concat(l,"/projects/").concat(u,"/deployments/").concat(a.name)},a.name))),m.default.createElement("div",{className:C.default.version},m.default.createElement("span",null,t("VERSION"))," ",(0,y.default)(a,"labels.version")))),a.pods&&m.default.createElement("div",{className:C.default.pods},a.pods.map((function(t){return m.default.createElement(k.default,{key:t.uid,data:t,match:e.props.match})}))))})))}}]),n}(m.default.Component))||l;a.default=D},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=n(r(3)),d=n(r(16)),p=r(25),m=r(276),h=r(37),v=n(r(1502));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=y(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleLinkClick=function(){localStorage.setItem("pod-detail-referrer",location.pathname)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.data,a=this.props.match.params,r=a.workspace,n=a.cluster,l=a.namespace,u=e.podStatus,o="running"===u.type||"completed"===u.type?"running":"updating";return s.default.createElement("div",{className:v.default.podItem},s.default.createElement("div",{className:v.default.icon},s.default.createElement(p.Icon,{name:"pod",size:32}),s.default.createElement("span",{className:(0,f.default)(v.default.status,v.default[o])})),s.default.createElement("div",{className:v.default.text},s.default.createElement(m.Link,{to:"/".concat(r,"/clusters/").concat(n,"/projects/").concat(l,"/pods/").concat(e.name)},s.default.createElement("strong",{onClick:this.handleLinkClick},e.name)),s.default.createElement("p",null,t("UPDATED_AT_VALUE_SCAP",{value:(0,h.getLocalTime)((0,d.default)(e,"status.startTime")||(0,d.default)(e,"createTime")).format("YYYY-MM-DD HH:mm:ss")}))))}}]),r}(s.default.Component);a.default=g},function(e,t,a){e.exports={detail:"_2nZLGr4tqIVCg5V__c5QtF",wrapper:"_1nI-r7opnLRDzav8uyOoMB",fullscreen:"_3tl8311-BoDScKfpXTzXFq",title:"_1JiVM4e0fJSK9p6xWMriZg"}},function(e,t,a){e.exports={graph:"_1XGvazo0r1NORQGXuaghPQ",graphContent:"_2owoCDhiTBQS0dGMnA9sC3",edgeWrapper:"cZDahLdDa3RWx9XVuQkzI",body:"qDE6K4UlY8s-QNAwxCe1K",fullScreen:"ZOIRUYm9uqbrHbC-75Yzx",loading:"_2O0O0Pw4n2v_7cu35cdot4",dragger:"_2m-ChjT4AAegWwJ_NoEqaA",mainContent:"QUutK9QVd5TABUKunFVkN"}},,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(294)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=r(37),h=r(889),v=r(25),y=n(r(1504));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){var t=e.key,a=e.value;return"error"===t&&(!0===a||"true"===a)},E=function(e){(0,o.default)(r,e);var a=g(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props;(0,t.onClick)(t.detail)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.detail;if(!r)return null;var n=r.duration,l=r.durationPercent,u=r.services,o=r.startTime,i=r.spans,c=r.traceName,d=r.serviceColorMap,g=(0,m.getLocalTime)(o/1e3),E=g.format("HH:mm:ss"),_=g.fromNow(),O=i.length,S=i.filter((function(e){return e.tags.some(b)})).length;return f.default.createElement("div",{className:(0,p.default)(y.default.item,a),onClick:this.handleClick},f.default.createElement("div",{className:y.default.header},f.default.createElement("div",{className:y.default.title},c),f.default.createElement("div",{className:y.default.duration},f.default.createElement(v.Icon,{name:"timed-task"}),"".concat(n/1e3," ms")),f.default.createElement("div",{className:y.default.durationBar,style:{width:"".concat(l,"%"),borderTopRightRadius:100===l?4:0}})),f.default.createElement("div",{className:y.default.content},f.default.createElement("div",{className:y.default.spanWrapper},f.default.createElement("div",{className:y.default.spans},1===O?t("NUM_SPAN_SI",{num:O}):t("NUM_SPAN_PL",{num:O})),S>0&&f.default.createElement("div",{className:y.default.errorSpans},1===S?t("NUM_ERROR_SI",{num:S}):t("NUM_ERROR_PL",{num:S}))),f.default.createElement("ul",{className:y.default.services},(0,s.default)(u,"name").map((function(e){return f.default.createElement("li",{key:e.name},f.default.createElement("span",{className:y.default.tag,style:{backgroundColor:d[e.name]}}),"".concat(e.name," (").concat(e.numberOfSpans,")"))}))),f.default.createElement("div",{className:y.default.startTime},f.default.createElement("p",null,(0,h.formatRelativeDate)(o/1e3),"  |  ",f.default.createElement("strong",null,E)),f.default.createElement("p",null,_))))}}]),r}(f.default.Component);a.default=E,E.propTypes={className:d.default.string,onClick:d.default.func,detail:d.default.object,durationPercent:d.default.number},E.defaultProps={onClick:function(){},durationPercent:0,detail:{}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),u=r(a(13)),o=r(a(19)),i=r(a(20)),c=r(a(18)),s=r(a(0)),f=r(a(3)),d=a(25),p=a(889),m=r(a(3378));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}function v(e){return"".concat((100*e).toFixed(1),"%")}var y=function(e){(0,o.default)(a,e);var t=h(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).handleClick=function(){var t=e.props;(0,t.onClick)(t.span)},e}return(0,u.default)(a,[{key:"render",value:function(){var e,t=this.props,a=t.span,r=t.color,l=t.getViewedBounds,u=t.selected,o=(0,p.isErrorSpan)(a),i=(0,p.formatDuration)(a.duration),c=l(a.startTime,a.startTime+a.duration);return e=c.start>1-c.end?"Left":"Right",s.default.createElement("li",{className:(0,f.default)(m.default.wrapper,(0,n.default)({},m.default.selected,u)),onClick:this.handleClick},s.default.createElement(d.Columns,{className:"is-gapless"},s.default.createElement(d.Column,{className:"is-3"},s.default.createElement("div",{className:m.default.nameWrapper},s.default.createElement("span",{className:m.default.padder,style:{paddingLeft:12*(a.depth+1)}}),s.default.createElement("a",{className:m.default.name,style:{borderColor:r}},s.default.createElement("span",{className:m.default.svc},o&&s.default.createElement(d.Icon,{name:"error",color:{primary:"#fff",secondary:"#ea4641"}}),a.process.serviceName," "),s.default.createElement("span",{className:m.default.endpoint},a.operationName)))),s.default.createElement(d.Column,{className:"margin-l12 margin-r12"},s.default.createElement("div",{className:m.default.barWrapper},s.default.createElement("div",{className:m.default.bar,style:{backgroundColor:r,left:v(c.start),width:v(c.end-c.start)}},s.default.createElement("div",{className:(0,f.default)(m.default.barLabel,m.default["barLabel".concat(e)])},i))))))}}]),a}(s.default.Component);t.default=y},function(e,t,a){e.exports={wrapper:"_3FpC5ye7GyQiA_9XNgx040",selected:"_11AetUGUuNRQbhOiVaaPrQ",nameWrapper:"cWTG60H4pfEzvUaUIBzkJ",name:"vjWzJJl5QXyvJrZh0yxG1",svc:"_1-OgJnOWAnoA9-4y_V7v6",endpoint:"_6EPxZpgSu0q2JNsNKM8dH",padder:"XpivfNFuNAu6Z00f5sn1b",barWrapper:"_2jIAbOYlOMtqtmQQ44uZ1a",bar:"_1kkSL2CR5ItZrLhBYy8cx4",barLabel:"_2jh31S8ET1p5RAOzk3mU13",barLabelLeft:"_32_b1BUKqADygs-iprfczz",barLabelRight:"_3V0eVtgfe3fOMxrkhggaoC"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(32)),f=n(r(0)),d=r(25),p=n(r(1023)),m=r(889),h=n(r(3380));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e,t){switch(e){case"bool":return String(t);case"string":case"number":return t;default:return JSON.stringify(t)}},g=function(e){var t=e.data;return f.default.createElement("ul",{className:h.default.properties},t.map((function(e){return f.default.createElement("li",{key:e.key},f.default.createElement("span",null,e.key,": "),f.default.createElement("span",null,y(e.type,e.value)))})))},b=function(e){var t=e.data,a=e.startTime;return f.default.createElement("div",null,t.map((function(e){var t=(0,m.formatDuration)(e.timestamp-a);return f.default.createElement("div",{key:e.timestamp,classNames:h.default.log},f.default.createElement("span",null,t),e.fields.map((function(e){return f.default.createElement("span",{className:"margin-l12",key:e.key},f.default.createElement("span",null,e.key,"= "),f.default.createElement("span",null,f.default.createElement("strong",null," ",y(e.type,e.value))))})))})))},E=function(e){(0,o.default)(r,e);var a=v(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleTypeChange=function(e){t.setState({type:e})},t.renderContentBody=function(){var e=t.props.span;switch(t.state.type){case"tags":return f.default.createElement(g,{data:e.tags});case"process":return f.default.createElement(g,{data:e.process.tags});case"logs":return f.default.createElement(b,{data:e.logs,startTime:e.startTime-e.relativeStartTime})}return null},t.state={type:"tags"},t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.span!==e.span&&this.setState({type:"tags"})}},{key:"render",value:function(){var e=this.props,a=e.span,r=e.onClose,n=this.state.type,l=(0,m.formatDuration)(a.relativeStartTime),u=(0,m.formatDuration)(a.duration),o=a.process.serviceName.split(".")[0];return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement("div",{className:h.default.header},f.default.createElement(d.Icon,{name:"target",size:40}),f.default.createElement("div",{className:h.default.text},f.default.createElement("div",{className:h.default.name},a.process.serviceName,f.default.createElement(p.default,{name:t("Service"),value:o}),f.default.createElement(p.default,{name:t("START_TIME"),value:l}),f.default.createElement(p.default,{name:t("Duration"),value:u})),f.default.createElement("p",null,a.operationName)),f.default.createElement("div",{className:h.default.close,onClick:r},f.default.createElement(d.Icon,{name:"minimize",size:20}))),f.default.createElement("div",{className:h.default.content},f.default.createElement("div",{className:h.default.contentHeader},f.default.createElement(d.RadioGroup,{mode:"button",buttonWidth:155,value:n,onChange:this.handleTypeChange,size:"small"},f.default.createElement(d.RadioButton,{value:"tags"},t("Tags")),f.default.createElement(d.RadioButton,{value:"process"},t("Process")),!(0,s.default)(a.logs)&&f.default.createElement(d.RadioButton,{value:"logs"},t("Log")))),f.default.createElement("div",{className:h.default.contentBody},this.renderContentBody())))}}]),r}(f.default.Component);a.default=E},function(e,t,a){e.exports={wrapper:"_2SrTH5oLaYBNtgxSsaIe1_",header:"_14VaoFxYI4xrb8vE4XX7q_",text:"_1iF8T6gN1lf2KdP5iGWCtN",name:"afCuDDLbVrc6EwA9B7J42",content:"iQqWGMwUNDUNhZckjqUKb",contentHeader:"I7j76faUqwX3zA4eEVJQG",contentBody:"_3soUTBQ4emfUy3qasSxMm1",properties:"_33lp7a1-5ZP0KxxrDJPaa-",close:"PLv31nTie7tGWOvDkQJv1",log:"Wzdc9MCTDUaK_p6l27wct"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=r(a(32)),f=r(a(3382)),d=r(a(3383)),p=r(a(1506));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var h=function(e){(0,u.default)(a,e);var t=m(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.viewRange,r=e.onRangeChange;return(0,s.default)(t)?null:c.default.createElement("div",{className:p.default.graph},c.default.createElement(f.default,{data:t}),c.default.createElement(d.default,{data:t,viewRange:a,onRangeChange:r}))}}]),a}(c.default.Component);t.default=h},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),u=r(a(19)),o=r(a(20)),i=r(a(18)),c=r(a(0)),s=a(889);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var d=function(e){(0,u.default)(a,e);var t=f(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).getColor=function(e){return r.props.data.serviceColorMap[e]},r.canvas=c.default.createRef(),r}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.drawCanvas()}},{key:"drawCanvas",value:function(){if(this.canvas&&this.canvas.current){var e=this.props.data,t=e.spans.map((function(e){return{valueOffset:e.relativeStartTime,valueWidth:e.duration,serviceName:e.process.serviceName}}));(0,s.renderIntoCanvas)(this.canvas.current,t,e.duration,this.getColor)}}},{key:"render",value:function(){return c.default.createElement("canvas",{ref:this.canvas})}}]),a}(c.default.Component);t.default=d},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),u=n(r(13)),o=n(r(19)),i=n(r(20)),c=n(r(18)),s=n(r(0)),f=r(889),d=n(r(1506));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var m=function(e){(0,o.default)(r,e);var a=p(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleMouseDown=function(e){t.originX=e.x,t.hideCursorGuide();var a=t.svgBound,r=a.left,n=a.width,l=Math.max(e.x-r,0)/n;t.setState({viewStart:l,viewEnd:l})},t.handleMouseUp=function(){t.originX=-1;var e=t.state,a=e.viewStart,r=e.viewEnd;Math.abs(a-r)>.01&&t.props.onRangeChange({viewStart:a,viewEnd:r})},t.handleMouseLeave=function(){t.hideCursorGuide()},t.handleMouseMove=function(e){if(t.originX>-1){var a=t.svgBound,r=a.left,n=a.width,l=Math.max(e.x-r,0)/n;l>t.state.viewStart?t.setState({viewEnd:l}):t.setState({viewStart:l})}else t.showCursorGuide(e)},t.handleClear=function(){t.props.onRangeChange({viewStart:0,viewEnd:1})},t.showCursorGuide=function(e){if(t.cursorGuide)for(var a=t.svgBound,r=a.left,n=a.width,l=Math.max(e.x-r,0)/n,u="".concat(100*l,"%"),o=0;o<t.cursorGuide.children.length;o++)t.cursorGuide.children[o].setAttribute("x1",u),t.cursorGuide.children[o].setAttribute("x2",u),t.cursorGuide.children[o].setAttribute("stroke-opacity",1)},t.hideCursorGuide=function(){if(t.cursorGuide)for(var e=0;e<t.cursorGuide.children.length;e++)t.cursorGuide.children[e].setAttribute("stroke-opacity",0)},t.svg=s.default.createRef(),t.originX=-1,t.state={viewStart:e.viewRange.viewStart,viewEnd:e.viewRange.viewEnd},t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.viewRange;t.viewStart!==e.viewRange.viewStart&&this.setState({viewStart:t.viewStart}),t.viewEnd!==e.viewRange.viewEnd&&this.setState({viewEnd:t.viewEnd})}},{key:"componentDidMount",value:function(){this.svg&&this.svg.current&&(this.svg.current.addEventListener("mousedown",this.handleMouseDown),this.svg.current.addEventListener("mousemove",this.handleMouseMove),this.svg.current.addEventListener("mouseup",this.handleMouseUp),this.svg.current.addEventListener("mouseleave",this.handleMouseLeave),this.svgBound=this.svg.current.getBoundingClientRect(),this.cursorGuide=this.svg.current.querySelector('[name="cursor-guide"]'))}},{key:"componentWillUnmount",value:function(){this.svg&&this.svg.current&&(this.svg.current.removeEventListener("mousedown",this.handleMouseDown),this.svg.current.removeEventListener("mousemove",this.handleMouseMove),this.svg.current.removeEventListener("mouseup",this.handleMouseUp),this.svg.current.removeEventListener("mouseleave",this.handleMouseLeave))}},{key:"getCoords",value:function(){for(var e=this.props.data.duration,t=(e/f.COORD_COUNT).toFixed(2),a=100/f.COORD_COUNT,r=[],n=0;n<f.COORD_COUNT;n++)r.push({value:n*t,percent:"".concat(n*a,"%")});return r.push({value:e,percent:"100%"}),r}},{key:"render",value:function(){var e=this.state,a=e.viewStart,r=e.viewEnd,n=a>0&&r<1,l="".concat(100*a,"%"),u="".concat(100*r,"%"),o=this.getCoords();return s.default.createElement("div",{className:d.default.range},s.default.createElement("svg",{height:"100%",width:"100%",ref:this.svg},s.default.createElement("g",{className:d.default.coord},o.map((function(e,t){return s.default.createElement("g",{key:e.value,className:d.default.coordLine},s.default.createElement("line",{y1:"0%",y2:"100%",x1:e.percent,x2:e.percent}),s.default.createElement("text",{x:e.percent,y:12,transform:t===f.COORD_COUNT?"translate(-2,0)":"translate(2,0)",textAnchor:t===f.COORD_COUNT?"end":"start"},(0,f.formatDuration)(e.value)))}))),s.default.createElement("g",{className:d.default.cursorGuide,name:"cursor-guide"},s.default.createElement("line",{y1:0,y2:58,strokeWidth:"1",stroke:"#212b36",strokeOpacity:"0",strokeDasharray:"2,2"}),s.default.createElement("line",{y1:19,y2:41,stroke:"#242e42",strokeWidth:"4",strokeOpacity:"0",strokeLinecap:"round"}),s.default.createElement("line",{y1:0,y2:58,strokeWidth:"20",stroke:"transparent"})),n&&s.default.createElement("g",{className:d.default.scrubber},s.default.createElement("line",{className:d.default.scrubberLine,y1:"0%",y2:"100%",x1:l,x2:l}),s.default.createElement("line",{className:d.default.scrubberLine,y1:"0%",y2:"100%",x1:u,x2:u}))),n&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:d.default.hoverBlock,style:{left:0,width:l}}),s.default.createElement("div",{className:d.default.hoverBlock,style:{left:u,width:"".concat(100*(1-r),"%")}}),s.default.createElement("div",{className:d.default.clearBlock,onClick:this.handleClear},t("Clear"))))}}]),r}(s.default.Component);a.default=m},function(e,t,a){e.exports={body:"_1pPFSIIbH7oLnLwkgHOLB5",header:"_2DMYdLCQ-OBk0rFii_9W5O",title:"_1Erbw_1JjBawD0kM-G52ln",name:"_3ugl6RaS7fK6PUFj7hPqwZ",close:"_2i5KJmq9o9HmC3fp0B5rPv",content:"_1lhG8ZLZp0syy6MTsAqY-_",wrapper:"_3n2YybElrtxWe2nOf7ZQUa",timelineTitle:"_3kkKn_rpepfTAFlapQ4YVK",leftPane:"pfziZWcqAxnmD-tb1Ip10",rightPane:"_36cdSAMcGZ9FJ-_068PDV_",timelineSelect:"_2mJV8zFMq6n5D4t-maCCmh",listPane:"GgsvlcpZCQVcsOdH3tQ6J",detailPane:"_4xyXvcotLTz6jMyjqWGbV",coords:"_20avL2qiM0J57r-UIzor8v"}}])]);