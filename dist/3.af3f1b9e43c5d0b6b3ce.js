(window.webpackJsonp=window.webpackJsonp||[]).push([[3],Array(712).concat([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;for(var r=a(1550),n=r.keys().filter((function(e){return"./index.js"!==e})),l={},o=0;o<n.length;o+=1)Object.assign(l,r(n[o]).default);var u=l;t.default=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(21)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(16)),m=n(r(73)),h=n(r(650)),v=r(70),E=n(r(753)),y=r(37),b=r(58),g=r(25),_=n(r(935));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var T=(0,v.observer)(l=function(e){(0,s.default)(r,e);var a=C(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).projectStore=new E.default,e.fetchProjects=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props.cluster;return e.projectStore.fetchList(O({cluster:a,labelSelector:"kubefed.io/managed=true"},t))},e.nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,namespace:e.namespace,cluster:e.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e.projectValidator=function(a,r,n){return e.getProjects().some((function(e){return e.value===r}))?n({message:t("INVALID_PROJECT")}):n()},e.handleNameChange=(0,h.default)((function(t){var a=e.props,r=a.module,n=a.isFederated,l=(0,p.default)(e.fedFormTemplate,"metadata.labels",{});b.APP_LABEL_MODULES.includes(r)&&(l.app=t.slice(0,63)),(0,y.updateLabels)(e.fedFormTemplate,r,l),n&&b.APP_LABEL_MODULES.includes(r)&&(0,m.default)(e.formTemplate,"metadata.labels.app",t.slice(0,63))}),200),e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchProjects()}},{key:"getProjects",value:function(){return this.projectStore.list.data.map((function(e){return{value:e.name}}))}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.maxNameLength,n=void 0===r?253:r,l=253===n?t("LONG_NAME_DESC"):t("NAME_DESC");return d.default.createElement(g.Form,{data:this.formTemplate,ref:a},d.default.createElement(g.Columns,null,d.default.createElement(g.Column,null,d.default.createElement(g.Form.Item,{label:t("NAME"),desc:l,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:b.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:l})},{validator:this.nameValidator}]},d.default.createElement(g.Input,{name:"metadata.name",onChange:this.handleNameChange,maxLength:n,autoFocus:!0}))),d.default.createElement(g.Column,null,d.default.createElement(g.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},d.default.createElement(g.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),d.default.createElement(g.Columns,null,!this.props.namespace&&d.default.createElement(g.Column,null,d.default.createElement(g.Form.Item,{label:t("PROJECT"),desc:t("SELECT_PROJECT_DESC"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")},{validator:this.projectValidator}]},d.default.createElement(_.default,{name:"metadata.namespace",cluster:this.props.cluster,defaultValue:this.namespace}))),d.default.createElement(g.Column,null,d.default.createElement(g.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},d.default.createElement(g.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))))}},{key:"cluster",get:function(){return this.props.cluster}},{key:"namespace",get:function(){return(0,p.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,p.default)(t,b.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,p.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(d.default.Component))||l;a.default=T},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,a=e.title,r=e.description;return n.default.createElement("div",{className:(0,l.default)(o.default.text,t)},n.default.createElement("div",null,a),n.default.createElement("p",null,r))};var n=r(a(0)),l=r(a(3)),o=r(a(1851))},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(56)),o=r(a(12)),u=r(a(13)),c=r(a(19)),s=r(a(20)),i=r(a(18)),f=r(a(0)),d=r(a(16)),p=r(a(650));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(a,e);var t=v(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={value:e.props.value},e.handleChange=function(t){var a=(0,d.default)(t,"currentTarget.value",t);e.setState({value:a}),e.change(a)},e.change=(0,p.default)((function(t){e.props.onChange(t)}),e.props.debounce),e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.children;e.value,e.onChange;return t(h(h({},(0,l.default)(e,["children","value","onChange"])),{},{value:this.state.value,onChange:this.handleChange}))}}]),a}(f.default.Component);t.default=E},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,a=e.children,r=e.label;return n.default.createElement("div",{className:(0,l.default)(o.default.wrapper,t)},n.default.createElement("header",null,r),n.default.createElement("div",null,a))};var n=r(a(0)),l=r(a(3)),o=r(a(1936))},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.label,a=e.children,r=e.tips,c=e.className;return n.default.createElement("div",{className:(0,o.default)(u.default.wrapper,c)},n.default.createElement("label",{className:u.default.label},n.default.createElement("span",null,t),r&&n.default.createElement(l.Tooltip,{content:r},n.default.createElement(l.Icon,{name:"information"}))),n.default.createElement("div",{className:u.default.content},a))};var n=r(a(0)),l=a(25),o=r(a(3)),u=r(a(1938))},,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=r(58),p=r(25),m=n(r(2601)),h=n(r(2602)),v=n(r(1239));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.store,n=e.module,l=e.cluster,o=e.prefix,u=e.isFederated;return i.default.createElement(p.Form,{data:this.fedFormTemplate,ref:a},globals.app.hasClusterModule(l,"network.ippool")&&!u&&i.default.createElement(v.default,{prefix:o,cluster:l,namespace:this.namespace}),"daemonsets"!==n&&i.default.createElement(p.Form.Group,{label:t("SELECT_NODES"),desc:t("SELECT_NODES_DESC"),checkable:!0},i.default.createElement(h.default,{prefix:o,cluster:l,namespace:this.namespace,formTemplate:this.fedFormTemplate})),i.default.createElement(p.Form.Group,{label:t("ADD_METADATA"),desc:t("ADD_METADATA_DESC"),keepDataWhenUnCheck:!0,checkable:!0},i.default.createElement(m.default,{store:r,module:n,cluster:l,namespace:this.namespace,formTemplate:this.formTemplate,isFederated:u})))}},{key:"namespace",get:function(){return(0,f.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,d.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,f.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(i.default.Component);a.default=y},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=a(25),d=r(a(786)),p=a(58),m=r(a(1677));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(a,e);var t=h(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e={keyProps:{component:f.AutoComplete,className:m.default.dropdown,options:this.props.options||p.INGRESS_ANNOTATIONS}};return i.default.createElement(d.default,(0,n.default)({},this.props,{itemProps:e}))}}]),a}(i.default.Component);t.default=v},,,,,,,,function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(71)),o=n(a(56)),u=n(a(12)),c=n(a(13)),s=n(a(19)),i=n(a(20)),f=n(a(18)),d=r(a(0)),p=a(25),m=n(a(740)),h=n(a(1866));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,s.default)(a,e);var t=v(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleSelectChange=function(t){var a=e.props,r=a.name;(0,a.onChange)(t,r)},e.handleNumberChange=function(t){var a=e.props,r=a.name;(0,a.onChange)(t,r)},e.handleInputChange=function(t){var a=e.props,r=a.name;(0,a.onChange)(t.target.value,r)},e}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.param,a=(0,o.default)(e,["param"]);if(t.options){var r=t.options.map((function(e){return{label:e,value:e}}));return d.default.createElement(p.Select,(0,l.default)({options:r},a,{onChange:this.handleSelectChange}))}return"integer"===t.type?d.default.createElement(m.default,(0,l.default)({className:h.default.number,min:t.min,unit:t.unit},a,{onChange:this.handleNumberChange,showUnit:!0})):d.default.createElement(p.Input,(0,l.default)({},a,{onChange:this.handleInputChange}))}}]),a}(d.Component);t.default=E},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.errorMessage,a=e.children;return n.default.createElement("div",{className:o.default.wrapper},t&&n.default.createElement(l.Tooltip,{content:t},n.default.createElement("div",{className:o.default.error})),a)};var n=r(a(0)),l=a(25),o=r(a(1922))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c=n(r(109)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(74)),h=l(r(0)),v=n(r(896)),E=n(r(849)),y=n(r(294)),b=r(5),g=r(70),_=n(r(3)),S=r(25),O=n(r(1580)),C=n(r(1582)),T=n(r(1590));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var D=(0,g.observer)((u=function(e){(0,f.default)(r,e);var a=R(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleMetricSelect=function(t){e.props.onChange(t)},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.name,r=e.value,n=e.onChange,l=e.labelsets,o=e.onLabelSearch,u=e.supportMetrics,c=e.supportDebugButton,s=void 0!==c&&c;return h.default.createElement("div",{className:T.default.wrapper},h.default.createElement(O.default,{options:this.groupedMetrics,onSelect:this.handleMetricSelect},h.default.createElement("span",{className:T.default.trigger},t("MONITOR_METRIC"),h.default.createElement(S.Icon,{type:"light",name:"caret-down"}))),h.default.createElement("div",{className:T.default.input},h.default.createElement(C.default,{name:a,value:r,onChange:n,metrics:u,labelsets:l,onLabelSearch:o})),s&&h.default.createElement("div",{onClick:this.props.onDebugClick,className:(0,_.default)(T.default.debug,T.default.btn)},h.default.createElement(S.Icon,{name:"terminal",type:"light"})," ",h.default.createElement("span",null,t("DEBUGB_DATA"))))}},{key:"groupedMetrics",get:function(){var e=/:\w+:/,t=(0,c.default)(this.props.supportMetrics);return t=t.filter((function(t){return!e.test(t.value)})),t=(0,E.default)(t,(function(e){return e.value.split("_")[0]})),t=(0,v.default)(t,(function(e,t){var a=1===e.length&&e[0]===t?[]:e.map((function(e){return{label:e.value,value:e.value,desc:e.desc}}));return{children:(0,y.default)(a,"label"),label:t,value:t}})),(0,y.default)(t,"label")}}]),r}(h.Component),(0,m.default)(u.prototype,"groupedMetrics",[b.computed],Object.getOwnPropertyDescriptor(u.prototype,"groupedMetrics"),u.prototype),o=u))||o;a.default=D},function(e,t,a){e.exports={wrapper:"_2GwJwev2SkXT_7T9_wM7oT",options:"_3-8ILrzsloMaSb1q8VHZGB",item:"_1Sv6m-zFhZ6z4HxHwNjTSV",isOpen:"_1RoPAe-6k6dY12KTKlPRb3",hasChildren:"_3T6HDoFJhvQq-eFIiaEu5Q"}},,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0;var l,o=n(r(49)),u=n(r(50)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(74)),m=n(r(16)),h=n(r(73)),v=n(r(32)),E=n(r(190)),y=n(r(0)),b=r(5),g=r(70),_=r(25),S=r(37),O=r(58),C=n(r(773)),T=n(r(748)),R=n(r(767)),D=n(r(737)),k=n(r(1665)),N=n(r(1667));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var I=(l=function(e){(0,i.default)(r,e);var a=P(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).showRule=function(e){n.setState({showRule:!0,selectRuleIndex:e})},n.hideRule=function(){n.setState({showRule:!1,selectRuleIndex:-1})},n.handleRule=function(e){var t=n.props.isFederated,a=n.state.selectRuleIndex,r=n.fedFormTemplate,l=(0,m.default)(r,"spec.rules",[]);a>=0?l[a]=e:l.push(e),(0,h.default)(r,"spec.rules",l),n.updateTLS(r),t&&n.updateOverrides(),n.hideRule()},n.getGateway=(0,u.default)(o.default.mark((function e(){var t,a,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.isFederated){e.next=9;break}return t=function(){return n.gatewayStore.getGatewayByProject({namespace:n.namespace,cluster:n.cluster})},n.setState({isLoading:!0}),e.next=5,t();case 5:a=e.sent,(r=a[1]||a[0]).serviceMeshEnable&&(0,h.default)(n.formTemplate,'metadata.annotations["nginx.ingress.kubernetes.io/service-upstream"]',"true"),n.setState({gateway:r,isLoading:!1});case 9:case"end":return e.stop()}}),e)}))),n.handleDelete=function(e){var t=n.props.isFederated,a=n.fedFormTemplate,r=(0,m.default)(a,"spec.rules",[]);r.splice(e,1),(0,h.default)(a,"spec.rules",r),n.updateTLS(a),t&&n.updateOverrides(),n.hideRule()},n.rulesValidator=function(e,a,r){if((0,v.default)(a))return r({message:t("ROUTING_RULE_EMPTY_DESC")});r()},n.state={showRule:!1,selectRuleIndex:-1,gateway:{},isLoading:!1},n.secretStore=new C.default,n.serviceStore=new T.default,n.gatewayStore=new R.default,e.isFederated&&(n.secretStore=new D.default({module:n.secretStore.module}),n.serviceStore=new D.default({module:n.serviceStore.module})),n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.secretStore.fetchList({namespace:this.namespace,cluster:this.cluster,limit:-1}),this.serviceStore.fetchList({namespace:this.namespace,cluster:this.cluster,limit:-1,labelSelector:(0,S.joinSelector)(this.props.selector)}),this.getGateway()}},{key:"updateTLS",value:function(e){var t=(0,m.default)(e,"spec.rules",[]).filter((function(e){return"https"===e.protocol&&e.secretName})).reduce((function(e,t){var a=t.secretName,r=t.host,n=t.clusters,l=e.find((function(e){return e.secretName===a}));return l?(l.hosts=l.hosts||[],-1===l.hosts.indexOf(r)&&l.hosts.push(r)):e.push({hosts:[r],secretName:a,clusters:n}),e}),[]);(0,h.default)(e,"spec.tls",t)}},{key:"updateOverrides",value:function(){var e=[],t=(0,m.default)(this.fedFormTemplate,"spec.rules",[]),a=(0,m.default)(this.fedFormTemplate,"spec.tls",[]);(0,m.default)(this.props.projectDetail,"clusters",[]).forEach((function(r){var n=function(e){return e.filter((function(e){return e.clusters.includes(r.name)})).map((function(e){return(0,E.default)(e,"clusters")}))};e.push({clusterName:r.name,clusterOverrides:[{path:"/spec/rules",value:n(t)},{path:"/spec/tls",value:n(a)}]})})),(0,h.default)(this.formTemplate,"spec.overrides",e)}},{key:"renderRuleForm",value:function(e){var t=this.props,a=t.isFederated,r=t.projectDetail,n=t.namespace,l=(0,b.toJS)(this.services),o=(0,b.toJS)(this.secretStore.list).data,u=(0,m.default)(this.fedFormTemplate,"spec.rules[".concat(e,"]"),{});return y.default.createElement(N.default,{data:u,gateway:this.state.gateway,secrets:o,services:l,isFederated:a,projectDetail:r,namespace:n,onSave:this.handleRule,onCancel:this.hideRule})}},{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.isFederated,r=e.projectDetail,n=this.state,l=n.showRule,o=n.selectRuleIndex,u=n.gateway,c=n.isLoading;if(l)return this.renderRuleForm(o);var s=(0,v.default)(u)&&!c;return y.default.createElement(_.Form,{data:this.fedFormTemplate,ref:t},y.default.createElement(_.Form.Item,{rules:[{validator:this.rulesValidator}]},y.default.createElement(k.default,{name:"spec.rules",onShow:this.showRule,onDelete:this.handleDelete,disabled:s,isFederated:a,projectDetail:r})))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,m.default)(t,O.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,m.default)(this.formTemplate,"spec.template"):this.formTemplate}},{key:"cluster",get:function(){return this.props.cluster}},{key:"namespace",get:function(){return(0,m.default)(this.formTemplate,"metadata.namespace")}},{key:"services",get:function(){return this.serviceStore.list.data}}]),r}(y.default.Component),(0,p.default)(l.prototype,"services",[b.computed],Object.getOwnPropertyDescriptor(l.prototype,"services"),l.prototype),l),w=(0,g.observer)(I);a.default=w;var M=I;a.Component=M},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_PLUGIN_ICONS=t.NETWORK_PLUGIN_ICONS=t.NEW_CLUSTER_SPEC=t.IMPORT_CLUSTER_SPEC=void 0;t.IMPORT_CLUSTER_SPEC={apiVersion:"cluster.kubesphere.io/v1alpha1",kind:"Cluster",spec:{provider:"",connection:{type:"direct",kubeconfig:""},joinFederation:!0}};t.NEW_CLUSTER_SPEC={apiVersion:"kubekey.kubesphere.io/v1alpha1",kind:"Cluster",metadata:{},spec:{hosts:[],roleGroups:{},controlPlaneEndpoint:{domain:"lb.kubesphere.local",address:"",port:6443},kubernetes:{clusterName:"cluster.local",maxPods:110,etcdBackupDir:"/var/backups/kube_etcd",etcdBackupPeriod:30,keepBackupNumber:5},network:{plugin:"calico",kubePodsCIDR:"10.233.64.0/18",kubeServiceCIDR:"10.233.0.0/18",ipipMode:"Always",vxlanMode:"Never",vethMTU:1440},registry:{privateRegistry:""},addons:[{},{}]}};t.NETWORK_PLUGIN_ICONS={calico:"",flannel:"",cilium:""};t.STORAGE_PLUGIN_ICONS={nfs:"vsan"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(32)),f=n(r(16)),d=n(r(0)),p=n(r(3)),m=n(r(1)),h=r(25),v=r(58),E=n(r(1252));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=y(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).onChange=function(t){e.props.onChange(t)},e.handleDeleteSource=function(){e.props.handleDeleteSource()},e.getIconName=function(e){var t="";switch(e){case"single_svn":t="svn";break;case"bitbucket_server":t="bitbucket";break;default:t=e}return t},e}return(0,o.default)(r,[{key:"renderEmpty",value:function(){var e=this.props,a=e.onClick,r=e.type;return d.default.createElement("div",{className:E.default.empty,onClick:a},d.default.createElement("p",null,"cd"===r?t("CD_SELECT_CODE_REPO_DESC"):t("SELECT_CODE_REPO_DESC")))}},{key:"render",value:function(){var e=this.props.value;if((0,i.default)(e))return this.renderEmpty();var a=(0,f.default)(e,"".concat(v.REPO_KEY_MAP[e.source_type]),{}),r=this.getIconName(e.source_type);return d.default.createElement("div",{className:E.default.wrapper},d.default.createElement("div",{className:(0,p.default)(E.default.branch,E.default.branch__show)},d.default.createElement("div",{className:E.default.icon},d.default.createElement(h.Icon,{name:r,size:48})),d.default.createElement("div",{className:E.default.info},d.default.createElement("div",{className:E.default.name},a.repo||a.url||a.remote),d.default.createElement("div",{className:E.default.desc},a.description||"-")),d.default.createElement("div",{className:E.default.action},d.default.createElement(h.Button,{onClick:this.props.onClick},t("RESELECT")),this.props.handleDeleteSource?d.default.createElement("span",{onClick:this.handleDeleteSource,className:E.default.deleteRepoBtn},d.default.createElement(h.Icon,{name:"trash"})):null)))}}]),r}(d.default.Component);a.default=b,b.propTypes={name:m.default.string,value:m.default.object,onClick:m.default.func},b.defaultProps={name:"",value:{},onClick:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s,i,f,d=n(r(49)),p=n(r(50)),m=n(r(21)),h=n(r(91)),v=n(r(12)),E=n(r(13)),y=n(r(135)),b=n(r(19)),g=n(r(20)),_=n(r(18)),S=n(r(74)),O=(n(r(92)),n(r(0))),C=n(r(1)),T=n(r(3)),R=r(5),D=r(70),k=n(r(16)),N=n(r(291)),P=n(r(32)),I=n(r(301)),w=n(r(73)),M=r(25),A=n(r(1253)),j=r(58),x=r(801),L=n(r(1084)),F=n(r(1887)),U=n(r(1254)),V=n(r(1890)),z=n(r(1892)),G=n(r(1252)),Y=n(r(1894)),B=r(37);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){(0,m.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var W=(0,D.observer)((f=i=function(e){(0,b.default)(r,e);var a=H(r);function r(e){var t;return(0,v.default)(this,r),t=a.call(this,e),(0,h.default)(t,"source_type",u,(0,y.default)(t)),(0,h.default)(t,"credentialFormData",c,(0,y.default)(t)),(0,h.default)(t,"showCredential",s,(0,y.default)(t)),t.restoreSourceData=function(){var e=t.props.sourceData,a=e.source_type;t.store.formData=(0,m.default)({},j.REPO_KEY_MAP[a],(0,I.default)(e[j.REPO_KEY_MAP[a]],(function(e,t){return t&&t.startsWith("discover")&&(0,P.default)(e)}))),(0,N.default)(e,"credentialId")&&("github"===a&&(t.store.tokenFormData={credentialId:e.credentialId}),"git"===a&&(0,w.default)(t.store.formData,"".concat(j.REPO_KEY_MAP[a],".credential_id"),e.credentialId),"gitlab"===a&&(0,w.default)(t.store.formData,"".concat(j.REPO_KEY_MAP[a]),{})),"single_svn"===a&&(t.store.formData={svn_source:K({type:"single_svn"},t.store.formData.single_svn_source)})},t.setCredentialsFormData=function(e){(0,N.default)(e,"type")&&(t.credentialFormData=K({},e))},t.showCreateCredential=function(){t.showCredential=!0},t.hideCreateCredential=(0,p.default)(d.default.mark((function e(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.showCredential=!1;case 1:case"end":return e.stop()}}),e)}))),t.handleCreateCredential=function(){var e=(0,p.default)(d.default.mark((function e(a,r){var n,l,o;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,l=n.devops,o=n.cluster,e.next=3,t.store.createCredential(a,{devops:l,cluster:o});case 3:return e.next=5,t.store.getCredentials({devops:l,cluster:o});case 5:r(),t.hideCreateCredential();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.handleGoBack=function(){var e=t.context.resetSubRoute;e&&e(),t.props.onCancel()},t.handleSubmit=function(e){var a=t.props.onSave,r=t.context.resetSubRoute,n=t.store.formData;if(["github","bitbucket_server"].includes(t.source_type)){if((0,P.default)(e))return;return a(t.source_type,e),void(r&&r())}t.formRef.current&&t.formRef.current.validate((function(){if("git"===t.source_type&&a("git",{git_source:K(K({},n.git_source),{},{discover_branches:!0})}),"gitlab"===t.source_type&&a("gitlab",{gitlab_source:K(K({},n.gitlab_source),{},{discover_branches:1,discover_pr_from_forks:{strategy:2,trust:2},discover_pr_from_origin:2,discover_tags:!0})}),["svn","single_svn"].includes(t.source_type)){var e=(0,k.default)(n,"svn_source.type","svn");a(e,(0,m.default)({},j.REPO_KEY_MAP[e],K(K({},n.svn_source),{},{remote:(0,k.default)(n,"svn_source.remote","").trim()})))}r&&r()}))},t.handleTypeChange=function(e){var a=t.props.sourceData,r=e.currentTarget.dataset.type;t.source_type=r,t.credentialFormData={type:"username_password"},t.store.resetStore(),(0,P.default)(a)||a.source_type!==r||t.restoreSourceData()},t.formRef=O.default.createRef(),t.tokenFormRef=O.default.createRef(),t.store=new A.default,t}return(0,E.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onCancel,a=e.devops,r=e.name,n=e.cluster,l=this.context.registerSubRoute,o=this.props.sourceData;l&&l(this.handleSubmit,t),this.store.getCredentials({devops:a,cluster:n}),this.store.name=r,(0,P.default)(o)||(this.source_type=o.source_type,this.restoreSourceData())}},{key:"renderTypes",value:function(){var e=this,t=this.props,a=t.enableTypeChange,r=t.cluster,n=t.noSVN,l="single_svn"===this.source_type?"svn":this.source_type,o=globals.app.isMultiCluster?(0,k.default)(globals,"clusterConfig.".concat(r,".ksVersion")):(0,k.default)(globals,"ksConfig.ksVersion"),u=(0,B.compareVersion)(o,"3.1.0");return O.default.createElement("ul",{className:G.default.repoTypes},j.REPO_TYPES.map((function(t){var r;return!(u<0&&"gitlab"===t.value)&&((!n||"svn"!==t.value)&&O.default.createElement("li",{className:(0,T.default)((r={},(0,m.default)(r,G.default.selectType,t.value===l),(0,m.default)(r,G.default.disabled,!a&&l!==t.value),r)),key:t.value,"data-type":t.value,onClick:e.handleTypeChange},O.default.createElement(M.Icon,{name:t.icon,type:t.value===l?"light":"dark",size:32}),O.default.createElement("span",null,t.name)))})))}},{key:"renderForm",value:function(){var e=this.props,t=e.devops,a=e.enableTypeChange,r=e.cluster,n=e.noJenkins,l=void 0!==n&&n;return"github"===this.source_type?O.default.createElement(U.default,{store:this.store,formRef:this.formRef,handleSubmit:this.handleSubmit,showCredential:this.showCreateCredential,setCredentialsFormData:this.setCredentialsFormData,cluster:r,devops:t}):["svn","single_svn"].includes(this.source_type)?O.default.createElement(V.default,{store:this.store,formRef:this.formRef,handleSubmit:this.handleSubmit,devops:t,showCredential:this.showCreateCredential,enableTypeChange:a,cluster:r}):"bitbucket_server"===this.source_type?O.default.createElement(z.default,{store:this.store,formRef:this.formRef,showCredential:this.showCreateCredential,handleSubmit:this.handleSubmit,cluster:r,devops:t}):"gitlab"===this.source_type?O.default.createElement(Y.default,{store:this.store,formRef:this.formRef,handleSubmit:this.handleSubmit,cluster:r,devops:t,showCredential:this.showCreateCredential}):O.default.createElement(F.default,{store:this.store,formRef:this.formRef,handleSubmit:this.handleSubmit,devops:t,cluster:r,showCredential:this.showCreateCredential,noJenkins:l})}},{key:"render",value:function(){var e=this.props,a=e.devops,r=e.cluster,n=e.type;return O.default.createElement("div",{className:G.default.formWrapper},"import"!==n?O.default.createElement("div",{className:"h4"},O.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},O.default.createElement(x.ReactComponent,null)),t("SELECT_CODE_REPOSITORY")):null,O.default.createElement("div",{className:G.default.contentWrapper},this.renderTypes(),this.renderForm()),O.default.createElement(L.default,{visible:this.showCredential,onOk:this.handleCreateCredential,onCancel:this.hideCreateCredential,devops:a,cluster:r,formTemplate:(0,R.toJS)(this.credentialFormData),sourceType:this.source_type}))}}]),r}(O.default.Component),i.propTypes={onSave:C.default.func,onCancel:C.default.func,sourceData:C.default.object,enableTypeChange:C.default.bool},i.defaultProps={onSave:function(){},onCancel:function(){},sourceData:{},enableTypeChange:!0},i.contextTypes={registerSubRoute:C.default.func,resetSubRoute:C.default.func},o=f,u=(0,S.default)(o.prototype,"source_type",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"github"}}),c=(0,S.default)(o.prototype,"credentialFormData",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{type:"username_password"}}}),s=(0,S.default)(o.prototype,"showCredential",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=o))||l;a.default=W},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.translateTimeAlias=function(e){try{var a=e.match(/^(\d+)([a-zA-Z])$/),r=(0,l.default)(a,3),n=r[1],o=r[2];return t(c[o],{count:n})}catch(e){return console.error(e),"invalid timeAlias format"}},a.tranlateTimeUnitAlias=function(e){return t(u[e])||e},a.getMsFromTimeAlias=function(e){var t=s(e),a=t.count,r=t.unit;return a*o[r]},a.splitTimeAlias=s,a.timeAlias2CompleteTimeMap=a.timeUnitAlias2CompleteTimeMap=a.timeUnitAlias2MsMap=void 0;var l=n(r(136)),o={s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5};a.timeUnitAlias2MsMap=o;var u={s:"Seconds",m:"Minutes",h:"Hours",d:"Days",w:"Weeks"};a.timeUnitAlias2CompleteTimeMap=u;var c={s:"SECOND_TIME",m:"MINUTE_TIME",h:"HOUR_TIME",d:"DAY_TIME",w:"WEEK_TIME"};function s(e){try{var t=e.match(/^(\d+)([a-zA-Z])$/),a=(0,l.default)(t,3);return{count:a[1],unit:a[2]}}catch(e){return{count:0,unit:"s"}}}a.timeAlias2CompleteTimeMap=c},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.preview,a=e.sidebar,r=e.main;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",{className:l.default.preview},t," "),n.default.createElement("div",{className:l.default.form},n.default.createElement("div",{className:l.default.sidebar},a),n.default.createElement("div",{className:l.default.resource},r)))};var n=r(a(0)),l=r(a(1928))},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GraphTextInput",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"ThemeSelector",{enumerable:!0,get:function(){return l.default}});var n=r(a(1929)),l=r(a(1931))},,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MONITOR_PANEL_TYPE=void 0;var n,l,o,u,c,s,i=r(a(49)),f=r(a(50)),d=r(a(21)),p=r(a(91)),m=r(a(12)),h=r(a(13)),v=r(a(74)),E=(r(a(92)),r(a(136))),y=r(a(56)),b=a(5),g=r(a(16)),_=r(a(138));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.MONITOR_PANEL_TYPE={TEXT:"singlestat",ROW:"row",GRAPH:"graph"};var C=(n=function(){function e(t){var a=this;(0,m.default)(this,e),this.belongTo=null,(0,p.default)(this,"errorMessage",l,this),(0,p.default)(this,"config",o,this),(0,p.default)(this,"metrics",u,this),(0,p.default)(this,"timeRange",c,this),this.monitoring=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.template;a.isObserving||(a.isObserving=!0,a.pollingController=R((function(){var t=e.getTimeRange(),r=t.from,n=t.to;a.fetchMetrics({start:r.valueOf(),end:n.valueOf()})}),{interval:e.refreshMs}),a.disposer=(0,b.reaction)((function(){return{time:e.timeRange,refresh:e.refreshMs,exprs:a.config.targets.map((function(e){return e.expr})),steps:a.config.targets.map((function(e){return e.step}))}}),(function(t){var r=t.refresh;a.metrics=a.metrics.map((function(e){return O(O({},e),{},{values:[]})})),a.pollingController&&a.pollingController.stopPolling(),a.pollingController=R((function(){var t=e.getTimeRange(),r=t.from,n=t.to;a.fetchMetrics({start:r.valueOf(),end:n.valueOf()})}),{interval:r})})))},(0,p.default)(this,"fetchMetrics",s,this),this.fetchMetric=function(){var e=(0,f.default)(i.default.mark((function e(t){var r,n,l,o,u,c,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.expr,n=t.step,l=t.start,o=t.end,u=t.cluster,c=t.namespace,r){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,request.get("".concat(a.apiVersion).concat(a.getPath({cluster:u,namespace:c}),"/targets/query"),{expr:r,step:n,start:l,end:o},null,(function(e,t){throw new Error(t.message)}));case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:return s=e.t0,e.abrupt("return",(0,g.default)(s,"data.result",[]));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopMonitoring=function(){a.isObserving=!1,a.pollingController&&a.pollingController.stopPolling(),a.disposer&&a.disposer()},this.belong=function(e){return a.belongTo=e,a},this.config=t,this.requestID=0}return(0,h.default)(e,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"apiVersion",get:function(){return"kapis/monitoring.kubesphere.io/v1alpha3"}},{key:"type",get:function(){return this.config.type}},{key:"targets",get:function(){return this.config.targets||[]}},{key:"id",get:function(){return this.config.id}}]),(0,h.default)(e,[{key:"clearMonitorMetrics",value:function(){this.metrics=[]}},{key:"clone",value:function(){return new this.constructor((0,b.toJS)(this.config))}},{key:"formattedMetrics",get:function(){return this.metrics.map((function(e){var t=e.target,a=e.metric,r=e.responseMetricID,n=(0,y.default)(e,["target","metric","responseMetricID"]),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,_.default)(e))return e.replace(/\{\{(.*?)\}\}/g,(function(e,a){return t[a]}))}(t.legendFormat,a)||r;return O(O({},n),{},{name:l})}))}}]),e}(),l=(0,v.default)(n.prototype,"errorMessage",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=(0,v.default)(n.prototype,"config",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,v.default)(n.prototype,"metrics",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,v.default)(n.prototype,"timeRange",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{start:0,end:0}}}),(0,v.default)(n.prototype,"type",[b.computed],Object.getOwnPropertyDescriptor(n.prototype,"type"),n.prototype),(0,v.default)(n.prototype,"targets",[b.computed],Object.getOwnPropertyDescriptor(n.prototype,"targets"),n.prototype),(0,v.default)(n.prototype,"clearMonitorMetrics",[b.action],Object.getOwnPropertyDescriptor(n.prototype,"clearMonitorMetrics"),n.prototype),s=(0,v.default)(n.prototype,"fetchMetrics",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,f.default)(i.default.mark((function t(a){var r,n,l,o,u,c,s,d,p;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.start,n=a.end,l=e.config,o=l.targets,u=void 0===o?[]:o,c=l.cluster,s=l.namespace,e.timeRange={start:r,end:n},d={ID:++e.requestID,errorMessage:"",metrics:[]},t.prev=4,t.next=7,Promise.all(u.map(function(){var t=(0,f.default)(i.default.mark((function t(a){var l,o,u;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=a.expr,o=a.step,t.next=3,e.fetchMetric({cluster:c,namespace:s,expr:l,step:o,start:parseInt(r/1e3,10),end:parseInt(n/1e3,10)});case 3:return u=t.sent,t.abrupt("return",{data:u,target:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 7:p=t.sent,d.metrics=p.reduce((function(e,t){var a=t.data,r=void 0===a?[]:a,n=t.target,l=void 0===n?{}:n,o=l.expr,u=l.refId,c=r.map((function(e){var t=e.values,a=void 0===t?[]:t,r=e.metric,n=void 0===r?{}:r,c=T(n)||o,s="".concat(u,".").concat(c);return{values:a,metric:n,target:l,id:s,responseMetricID:c}}));return e.concat(c)}),[]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),d.errorMessage=t.t0.message;case 14:return t.prev=14,d.ID===e.requestID&&(e.metrics=d.metrics,e.errorMessage=d.errorMessage),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[4,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()}}),(0,v.default)(n.prototype,"formattedMetrics",[b.computed],Object.getOwnPropertyDescriptor(n.prototype,"formattedMetrics"),n.prototype),n);function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.__name__,a=(0,y.default)(e,["__name__"]);if(!t)return JSON.stringify(a||{});var r=Object.entries(a||{}).map((function(e){var t=(0,E.default)(e,2),a=t[0],r=t[1];return"".concat(a,'="').concat(r,'"')})),n=r.length?"{".concat(r.join(","),"}"):"";return"".concat(t).concat(n)}function R(e,t){var a={timer:null,stopPolling:function(){clearTimeout(a.timer)}};e();return function r(){t.interval&&(a.timer=setTimeout((function(){e(),r()}),t.interval))}(),a}t.default=C},,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(23)),u=n(r(0)),c=r(25),s=r(58),i=n(r(2079)),f=function(e){var a=e.name,r=e.value;return u.default.createElement("div",{className:i.default.accessMode},u.default.createElement("p",{className:"name"},"".concat(a,"(").concat(r,")")),u.default.createElement("p",{className:"desc"},t("ACCESS_MODE_".concat(r))))},d=function(e){if(e.loading)return null;var t=Object.keys(s.ACCESS_MODES).map((function(e){return{label:u.default.createElement(f,{name:e,value:s.ACCESS_MODES[e]}),value:e}}));return(0,o.default)(e.supportedAccessModes)&&(t=t.filter((function(t){return e.supportedAccessModes.includes(t.value)}))),u.default.createElement("div",{className:i.default.accessModeWrapper},u.default.createElement(c.RadioGroup,(0,l.default)({options:t},e)))};a.default=d},,function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c=n(r(71)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(74)),h=l(r(0)),v=r(5),E=r(70),y=n(r(16)),b=r(25),g=n(r(747)),_=n(r(2087));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O=(0,E.observer)((u=function(e){(0,f.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).roleStore=new g.default,e.fetchRoles=function(){var t=e.props,a=t.cluster,r=t.namespace;return e.roleStore.fetchList({cluster:a,namespace:r,limit:-1,sortBy:"createTime"})},e.optionRenderer=function(e){return h.default.createElement("div",{className:_.default.option},h.default.createElement("div",null,e.label),h.default.createElement("p",null,e.desc))},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.props.namespace&&this.fetchRoles()}},{key:"componentDidUpdate",value:function(e){this.props.namespace!==e.namespace&&this.props.namespace&&this.fetchRoles()}},{key:"render",value:function(){var e=Object.assign({},this.props);return h.default.createElement(b.Select,(0,c.default)({options:this.roles,optionRenderer:this.optionRenderer},e))}},{key:"roles",get:function(){return this.roleStore.list.data.map((function(e){return{label:e.name,value:e.name,item:e,desc:t((0,y.default)(e,"description"))}}))}}]),r}(h.Component),(0,m.default)(u.prototype,"roles",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"roles"),u.prototype),o=u))||o;a.default=O},,,,,,,,,function(e,t,a){e.exports={body:"_1dBSaRblPfBn-mqT_KKE3S",formItem:"iH3qOy_HN_GKp2DHh14E",urlInput:"_2B1OdPUOkMfYykX5QmiCr5",label:"_2qOEiddhpXtxUvsrjH18Jw",desc:"L_NsnJWzaluWmh8TdlMsc",field:"_7hAGFIYgADWKFn3WK0tWD",fieldInput:"_2aknEdLUnkxDuraw2Zn01J",protocol:"_2tM1lMWiP_tnelAVYCnDOu",url:"_3tjuojCcgCMNlIeVz-XkLP",validated:"_1laKRGeL96H0Mm_frK-cu8",validStatus:"d9NK4MMS7VQlOHlThM-P1",access:"_3qhTvuFZpMBckEcXWQT5bi",accessItem:"_22lD7uAdTjGbgCQUZCuEzO",verifyBtn:"yAN3vK16N0HKawleIBS-g",timeInput:"xOQCUWADs79nVpq1YymkB",input:"_2gp7EWD023VrljWknkh8ML",select:"_2XaWi99BOi61P7Hqiyr7ic"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),o=n(a(56)),u=n(a(12)),c=n(a(13)),s=n(a(19)),i=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(68)),m=n(a(283));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,s.default)(a,e);var t=E(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){var a=e.props,r=a.unit;(0,a.onChange)((0,p.default)(t)?t:"".concat(t).concat(r))},e}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.unit,r=e.children,n=(0,o.default)(e,["value","unit","children"]),l=t;return a&&(l=(0,m.default)(t,a)),d.default.cloneElement(r,v(v(v({},n),r.props),{},{value:l,onChange:this.handleChange}))}}]),a}(d.Component);t.default=y},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),o=n(a(13)),u=n(a(19)),c=n(a(20)),s=n(a(18)),i=r(a(0)),f=n(a(1581)),d=n(a(1051));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={openKey:""},e.handleClick=function(t){e.setState({openKey:t})},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this,t=this.state.openKey,a=this.props,r=a.style,n=a.options,l=a.level,o=a.onSelect;return i.default.createElement("div",{className:d.default.options,style:r},n.map((function(a){return i.default.createElement(f.default,{key:a.value,data:a,level:l,isOpen:a.value===t,onClick:e.handleClick,onSelect:o})})))}}]),a}(i.Component);t.default=m,m.defaultProps={level:0,options:[],onSelect:function(){}}},,function(e,t,a){e.exports={wrapper:"_14f5Z8AW-sO-D5eOUy8VOK",group:"_3IFETh-yDAtvA1RpJm_nuS",groupTitle:"_1EI8CS41YrdnEKUGY2JhS4",item:"_1L9wOQP2fgWpJRSXX_gfSy"}},,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(852)),l=r(a(1062)),o=r(a(1674)),u=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"ROUTING_RULES",icon:"cdn",component:l.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:o.default,required:!0}];t.default=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u=n(r(21)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=l(r(0)),m=n(r(185)),h=n(r(16)),v=n(r(73)),E=r(5),y=r(70),b=r(25),g=n(r(274)),_=n(r(761)),S=n(r(740)),O=r(37),C=n(r(773)),T=n(r(1824)),R=n(r(1829));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=(0,y.observer)(o=function(e){(0,i.default)(r,e);var a=N(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=e.props.store,e.secretStore=new C.default,e.state={formTemplate:(0,m.default)(e.props.formTemplate)},e.updateFormTemplate=function(){var t=e.props.detail;if(e.store.list.data.length>0){var a=e.store.list.data.find((function(e){return e.name===t.name}))||e.store.list.data[0],r=(0,E.toJS)(a._originData),n=(0,h.default)(r,"spec.endpoints",[]);n.length>0&&(n.forEach((function(e){e.tlsConfig?e.authType="tlsConfig":e.bearerTokenSecret?e.authType="bearerTokenSecret":e.basicAuth?e.authType="basicAuth":e.authType=""})),r.spec.interval=(0,h.default)(n,"[0].interval"),r.spec.scrapeTimeout=(0,h.default)(n,"[0].scrapeTimeout")),e.setState({formTemplate:r})}},e.handleOk=function(t){var a=e.props,r=a.onOk,n=a.detail,l=(0,h.default)(t,"spec.interval"),o=(0,h.default)(t,"spec.scrapeTimeout");(0,h.default)(t,"spec.endpoints",[]).forEach((function(e){e.interval=l,e.scrapeTimeout=o})),(0,v.default)(t,"spec.selector.matchLabels",n.labels),(0,v.default)(t,"metadata.labels",k(k({},n.labels||{}),{},{"app.kubernetes.io/vendor":"kubesphere"})),r(t)},e.checkItemValid=function(e){return e.port&&e.path&&e.scheme},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.cluster,r=t.namespace,n=t.detail;this.store.fetchListByK8s({cluster:a,namespace:r,labelSelector:(0,O.joinSelector)(n.labels)}).then((function(){return e.updateFormTemplate()})),this.secretStore.fetchListByK8s({cluster:a,namespace:r})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.workspace,n=e.namespace,l=e.cluster,o=e.detail,u=e.isSubmitting,c=e.onCancel,s=this.state.formTemplate;return p.default.createElement(g.default.Form,{icon:"linechart",title:t("EDIT_MONITORING_EXPORTER"),width:960,data:s,visible:a,onOk:this.handleOk,onCancel:c,isSubmitting:u},p.default.createElement("div",{className:R.default.wrapper},p.default.createElement(b.Form.Item,{label:t("PATH_PL")},p.default.createElement(_.default,{className:R.default.endpoints,name:"spec.endpoints",defaultValue:this.defaultEndpoints,checkItemValid:this.checkItemValid,itemType:"object",addText:t("ADD")},p.default.createElement(T.default,{detail:o,secretStore:this.secretStore,cluster:l,namespace:n,workspace:r}))),p.default.createElement("div",{className:R.default.timeout},p.default.createElement(b.Columns,null,p.default.createElement(b.Column,null,p.default.createElement(b.Form.Item,{label:t("COLLECTION_INTERVAL_MIN"),desc:t("COLLECTION_INTERVAL_MIN_DESC")},p.default.createElement(S.default,{name:"spec.interval",defaultValue:"1m",min:0,unit:"m",integer:!0}))),p.default.createElement(b.Column,null,p.default.createElement(b.Form.Item,{label:t("TIMEOUT_PERIOD_S"),desc:t("COLLECTION_TIMEOUT_DESC")},p.default.createElement(S.default,{name:"spec.scrapeTimeout",defaultValue:"10s",min:0,unit:"s",integer:!0})))))))}},{key:"defaultEndpoints",get:function(){return[{scheme:"http",path:"/metrics",authType:""}]}}]),r}(p.Component))||o;a.default=P},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(25),p=r(37),m=n(r(1826));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleNameChange=function(t){(0,e.props.onChange)({name:t})},e.handleKeyChange=function(t){var a=e.props,r=a.value;(0,a.onChange)({name:r.name,key:t})},e}return(0,o.default)(r,[{key:"getResourceOptions",value:function(){return this.props.secrets.map((function(e){return{label:(0,p.getDisplayName)(e),value:e.name}}))}},{key:"getKeysOptions",value:function(){var e=this.props,t=e.value,a=e.secrets.find((function(e){return e.name===t.name}));return a?Object.keys(a.data||{}).map((function(e){return{label:e,value:e}})):[]}},{key:"render",value:function(){var e=this.props,a=e.name,r=e.value,n=void 0===r?{}:r;return i.default.createElement("div",{className:m.default.wrapper},i.default.createElement(d.Select,{name:"name",key:"".concat(a,".name"),value:n.name,prefixIcon:"".concat(t("SECRET"),": "),options:this.getResourceOptions(),onChange:this.handleNameChange,placeholder:" "}),i.default.createElement(d.Select,{name:"key",key:"".concat(a,".key"),value:n.key,prefixIcon:"".concat(t("KEY"),": "),options:this.getKeysOptions(),onChange:this.handleKeyChange,placeholder:" "}))}}]),r}(i.default.Component);a.default=v,v.propTypes={value:f.default.object,onChange:f.default.func,secrets:f.default.array},v.defaultProps={name:"",value:{},onChange:function(){},secrets:[]}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.NEW_CLUSTER=t.IMPORT_CLUSTER=void 0;var n=r(a(1850)),l=r(a(1853)),o=r(a(1859)),u=r(a(1861)),c=r(a(1870)),s=r(a(1877)),i=[{title:"BASIC_INFORMATION",component:l.default,required:!0},{title:"Cluster Settings",component:o.default,required:!0,isForm:!1}];t.IMPORT_CLUSTER=i;var f=[{title:"How to Add",component:n.default,required:!0},{title:"BASIC_INFORMATION",component:l.default,required:!0},{title:"Cluster Settings",component:u.default,required:!0},{title:"SYSTEM_COMPONENT_PL",component:c.default,required:!0},{title:"ADVANCED_SETTINGS",component:s.default,required:!0}];t.NEW_CLUSTER=f},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(12)),u=l(r(13)),c=l(r(19)),s=l(r(20)),i=l(r(18)),f=n(r(0)),d=l(r(185)),p=l(r(16)),m=l(r(3)),h=r(25),v=l(r(274)),E=l(r(740)),y=r(37),b=r(58),g=l(r(1251));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=_(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={formData:(0,d.default)(e.props.data||{}),authMode:(0,p.default)(e.props.data,"privateKey")?"secret":"password"},e.handleAuthModeChange=function(t){e.setState({authMode:t})},e}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible!==e.visible&&this.setState({formData:(0,d.default)(this.props.data||{})})}},{key:"renderAuthentication",value:function(){return"password"===this.state.authMode?f.default.createElement(f.default.Fragment,null,f.default.createElement(h.Form.Item,{label:t("USERNAME"),desc:t("NODE_USERNAME_DESC")},f.default.createElement(h.Input,{name:"user",defaultValue:"root",autoComplete:"off"})),f.default.createElement(h.Form.Item,{label:t("PASSWORD"),desc:t("NODE_PASSWORD_DESC")},f.default.createElement(h.InputPassword,{name:"password",autoComplete:"off"}))):f.default.createElement(f.default.Fragment,null,f.default.createElement(h.Form.Item,{label:t("SSH_KEY_TCAP")},f.default.createElement(h.TextArea,{name:"privateKey",autoResize:!0})))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=e.onCancel,l=e.addAfterCreate,o=this.state,u=o.authMode,c=o.formData,s=l?["worker"]:void 0;return f.default.createElement(v.default.Form,{icon:"add",title:t("ADD_NODE"),width:600,data:c,visible:a,onOk:r,onCancel:n},f.default.createElement(h.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NODE_NAME_EMPTY_DESC")}]},f.default.createElement(h.Input,{name:"name",defaultValue:"node-".concat((0,y.generateId)(4))})),f.default.createElement(h.Form.Item,{label:t("ROLE"),desc:t("NODE_ROLE_DESC"),rules:[{required:!0,message:t("NODE_ROLE_EMPTY_DESC")}]},f.default.createElement(h.Select,{name:"roles",options:this.nodeRoles,closeOnSelect:!1,defaultValue:s,multi:!0})),f.default.createElement(h.Form.Item,{label:t("INTERNAL_IP_ADDRESS"),desc:t("NODE_INTERNAL_IP_DESC"),rules:[{required:!0,message:t("NODE_INTERNAL_IP_EMPTY_DESC")},{pattern:b.PATTERN_IP,message:t("INVALID_IP_DESC")}]},f.default.createElement(h.Input,{name:"internalAddress",placeholder:"0.0.0.0",autoComplete:"off"})),f.default.createElement(h.Columns,{className:(0,m.default)("is-1",g.default.ssh)},f.default.createElement(h.Column,null,f.default.createElement(h.Form.Item,{label:t("EXTERNAL_IP"),desc:t("NODE_EXTERNAL_IP_DESC"),rules:[{required:!0,message:t("NODE_EXTERNAL_IP_EMPTY_DESC")},{pattern:b.PATTERN_IP,message:t("INVALID_IP_DESC")}]},f.default.createElement(h.Input,{name:"address",placeholder:"0.0.0.0",autoComplete:"off"}))),f.default.createElement(h.Column,{className:"is-narrow"},f.default.createElement(h.Form.Item,{className:g.default.port,label:t("PORT")},f.default.createElement(E.default,{name:"port",defaultValue:22,max:65535,min:0,integer:!0})))),f.default.createElement(h.Form.Item,{label:t("SSH_AUTH_MODE"),desc:t("SSH_AUTH_MODE_DESC")},f.default.createElement(h.Select,{value:u,options:this.authModes,onChange:this.handleAuthModeChange})),this.renderAuthentication())}},{key:"authModes",get:function(){return[{label:t("USERNAME_AND_PASSWORD"),value:"password"},{label:t("SSH_KEY_SCAP"),value:"secret"}]}},{key:"nodeRoles",get:function(){return this.props.addAfterCreate?[{label:t("WORKER"),value:"worker"}]:[{label:t("CONTROL_PLANE"),value:"master"},{label:t("WORKER"),value:"worker"}]}}]),r}(f.Component);a.default=S},function(e,t,a){e.exports={wrapper:"_2Lqd91xpnojlUPUV9ctSeb",limits:"PSykLg06vAq1JTXkFmeFG",limit:"_2Lz4hSqqVH5vHSuGLXd3d1",ssh:"_1UBN3MNiZ33uaQH0qUUoY-",port:"_1Kt3RHCGg3eTgBC56yJKrH"}},function(e,t,a){e.exports={wrapper:"_2CAwl5k2oIda9YcGXDwM47",empty:"_3C9m_Ocvi6i3FCZFQiyvBo",formWrapper:"_1jC1_JGlPNjzoMoHEuIG7b",contentWrapper:"_3JvS-OEcBUyHzzrjUgyD7y",repoTypes:"_33Emj6yHpbs8UNlQpSvS1c",selectType:"_2LA7h2xfYPhnWXS4cXQMv8",gitIcon:"_1rzx7uWPAi4m6DkTVIZE42",light:"_2PM3xrM_mfV8Y7SzcKac3z",dark:"_2Cs9GTPWGQkHlPwuBJL_zq",branch:"_2i7wzfSnXXny7hXWwWF_VU",action:"_1q1nBwyG-e01cNjPngSVyL",icon:"G4yuPTBjFVlQK_43eBXWg",info:"_1IE8Wqz9EbuS8uyK2uvvW2",name:"_2s59L_OotKhaMchVqNIcPK",desc:"_2_Av3lQmokJgJ9tWlA3Vbz",branch__show:"_1X_Zvts1SpLSCmF6cm-nQ7",deleteRepoBtn:"_1ACD7-Hng8w7KKOYn0JT7H",disabled:"_3YX-W9JYPf64LAZKgJRIYs"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s,i,f,d,p,m,h,v,E,y,b,g,_=n(r(109)),S=n(r(21)),O=n(r(56)),C=n(r(49)),T=n(r(50)),R=n(r(91)),D=n(r(12)),k=n(r(13)),N=n(r(135)),P=n(r(19)),I=n(r(20)),w=n(r(18)),M=n(r(74)),A=(n(r(92)),r(5)),j=n(r(23)),x=n(r(32)),L=n(r(16)),F=r(37),U=n(r(279)),V=n(r(788)),z=n(r(941));function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){(0,S.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,w.default)(e);if(t){var n=(0,w.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,I.default)(this,a)}}var q=(l=function(e){(0,P.default)(I,e);var a,r,n,l,S=B(I);function I(e){var a;return(0,D.default)(this,I),a=S.call(this,e),(0,R.default)(a,"isAccessTokenWrong",o,(0,N.default)(a)),(0,R.default)(a,"credentials",u,(0,N.default)(a)),(0,R.default)(a,"orgList",c,(0,N.default)(a)),(0,R.default)(a,"repoList",s,(0,N.default)(a)),(0,R.default)(a,"activeRepoIndex",i,(0,N.default)(a)),(0,R.default)(a,"formData",f,(0,N.default)(a)),(0,R.default)(a,"creatBitBucketServersError",d,(0,N.default)(a)),(0,R.default)(a,"orgParams",p,(0,N.default)(a)),a.getClusterVersion=function(e){return a.isMultiCluster?(0,L.default)(globals,"clusterConfig.".concat(e,".ksVersion")):(0,L.default)(globals,"ksConfig.ksVersion")},a.isNeedUpdate=function(e){return(0,F.compareVersion)(a.getClusterVersion(e),"3.3.0")<0},(0,R.default)(a,"getCredentials",m,(0,N.default)(a)),a.getCredentialDetail=function(){var e=(0,T.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.credentialStore.fetchDetail(t);case 2:return e.abrupt("return",a.credentialStore.detail);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.createCredential=function(){var e=(0,T.default)(C.default.mark((function e(t,r){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.credentialStore.handleCreate(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),(0,R.default)(a,"creatBitBucketServers",h,(0,N.default)(a)),(0,R.default)(a,"clearBitbucketErrors",v,(0,N.default)(a)),a.getBitbucketList=function(){var e=(0,T.default)(C.default.mark((function e(t){var r,n,l;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.cluster,e.next=3,request.get("".concat(a.getDevopsUrlV2({cluster:r}),"scms/bitbucket-server/servers"));case 3:return n=e.sent,l=[],l=!(0,x.default)(n)&&(0,j.default)(n)?n.map((function(e){return{label:e.apiUrl,value:e.apiUrl}})):[{label:"https://bitbucket.org",value:"https://bitbucket.org"}],e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,R.default)(a,"resetStore",E,(0,N.default)(a)),(0,R.default)(a,"checkCronScript",y,(0,N.default)(a)),(0,R.default)(a,"fetchGitLabServerList",b,(0,N.default)(a)),(0,R.default)(a,"fetchGitLabProjectList",g,(0,N.default)(a)),a.credentialStore=new z.default,a.verifyAccessErrorHandle={github:function(e,t){var r=t.headers?e:t;return 428===t.code?(a.isAccessTokenWrong=!0,void(a.orgList.isLoading=!1)):(window.onunhandledrejection&&window.onunhandledrejection(r),Promise.reject(r))},"bitbucket-server":function(e,r){var n=r.headers?e:r;if(428!==n.code){if(!(0,j.default)(n.errors)||(0,x.default)(n.errors))return a.creatBitBucketServersError={all:n.message},window.onunhandledrejection&&window.onunhandledrejection(n),Promise.reject(n);a.creatBitBucketServersError=n.errors.reduce((function(e,t){return e[t.field]={message:t.message},e}),{})}else a.creatBitBucketServersError={password:{message:t("INCORRECT_USERNAME_OR_PASSWORD")}}}},a}return(0,k.default)(I,[{key:"getOrganizationList",value:(l=(0,T.default)(C.default.mark((function e(t,a,r){var n,l,o,u,c,s,i,f,d,p,m;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageNumber,l=void 0===n?1:n,o=t.pageSize,u=void 0===o?100:o,c=t.more,s=void 0!==c&&c,i=t.credentialId,f=(0,O.default)(t,["pageNumber","pageSize","more","credentialId"]),this.orgList.isLoading=!0,this.scmType=a,this.orgParams=f,d="".concat(this.getDevopsUrlV3({cluster:r}),"scms/").concat(a||"github","/organizations?").concat((0,F.getQueryString)(Y({pageNumber:l,pageSize:u},f),!1)),p="".concat(this.getDevopsUrlV2({cluster:r}),"scms/").concat(a||"github","/organizations/?").concat((0,F.getQueryString)(Y(Y({},f),{},{credentialId:i}),!1)),e.next=8,request.get(this.isNeedUpdate(r)?p:d).catch((function(){return[]}));case 8:return m=e.sent,(0,j.default)(m)&&(this.orgList.data=s?[].concat((0,_.default)(this.orgList.data),(0,_.default)(m)):m),this.orgList.isLoading=!1,this.orgList.isEnd=m.length<u,this.orgList.pagination={pageSize:u,pageNumber:l},e.abrupt("return",this.orgList);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return l.apply(this,arguments)})},{key:"handleChangeActiveRepoIndex",value:function(e){this.activeRepoIndex=e}},{key:"handleChangeAccessTokenWrong",value:function(){this.isAccessTokenWrong=!1}},{key:"getRepoList",value:(n=(0,T.default)(C.default.mark((function e(t){var a,r,n,l,o,u,c,s,i,f,d,p,m,h=this;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.activeRepoIndex,n=t.pageNumber,l=void 0===n?1:n,o=t.pageSize,u=void 0===o?100:o,c=t.more,s=void 0!==c&&c,i=void 0!==r?r:""===this.activeRepoIndex?0:this.activeRepoIndex,f=this.scmType||"github",d=this.isNeedUpdate(a)&&"bitbucket-server"===f?this.orgList.data[i].key:this.orgList.data[i].name,this.repoList.isLoading=!0,p="".concat(this.isNeedUpdate(a)?this.getDevopsUrlV2({cluster:a}):this.getDevopsUrlV3({cluster:a}),"scms/").concat(f,"/organizations/").concat(d,"/repositories?").concat((0,F.getQueryString)(Y(Y({},this.orgParams),{},{pageNumber:l,pageSize:u}),!1)),e.next=8,request.get(p,{},null,(function(e,t){return h.repoList.isLoading=!1,h.repoList.data=[],window.onunhandledrejection&&window.onunhandledrejection(t),Promise.reject(t)}));case 8:return(m=e.sent).repositories&&((0,j.default)((0,A.toJS)(this.repoList.data))?(this.repoList.data=s?[].concat((0,_.default)(this.repoList.data),(0,_.default)(m.repositories.items)):(0,_.default)(m.repositories.items),this.repoList.isEnd=m.repositories.items.length<u,this.repoList.pagination={pageSize:u,pageNumber:l}):this.repoList.data=m.repositories),this.repoList.isLoading=!1,e.abrupt("return",this.repoList);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"putAccessName",value:(r=(0,T.default)(C.default.mark((function e(t){var a,r,n,l,o;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.secretName,r=t.secretNamespace,n=t.cluster,l=t.token,this.isAccessTokenWrong=!1,e.next=4,this.verifySecretForRepo({secret:a,secretNamespace:r},{scmType:"github",cluster:n,accessToken:l});case 4:if(!(o=e.sent)||!o.credentialId){e.next=8;break}return e.next=8,this.getOrganizationList({secret:a,secretNamespace:r,includeUser:!0,credentialId:o.credentialId},"github",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"verifySecretForRepo",value:(a=(0,T.default)(C.default.mark((function e(t,a){var r,n,l,o,u,c,s;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.scmType,n=a.cluster,a.devops,l=a.accessToken,o=(0,O.default)(a,["scmType","cluster","devops","accessToken"]),u=r,/https:\/\/bitbucket.org\/?/gm.test("".concat(o.apiUrl))&&(u="bitbucket_cloud"),c="".concat(this.getDevopsUrlV2({cluster:n}),"scms/").concat(u,"/verify/"),s="".concat(this.getDevopsUrlV3({cluster:n}),"scms/").concat(u,"/verify?").concat((0,F.getQueryString)(t,!1)),e.next=7,request.post(this.isNeedUpdate(n)?c:s,this.isNeedUpdate(n)?Y(Y({},o),{},{accessToken:l}):o,null,this.verifyAccessErrorHandle[r]);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"isMultiCluster",get:function(){return globals.ksConfig.multicluster}}]),I}(V.default),o=(0,M.default)(l.prototype,"isAccessTokenWrong",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=(0,M.default)(l.prototype,"credentials",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLoading:!1,data:[]}}}),c=(0,M.default)(l.prototype,"orgList",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLoading:!1,data:[],isEnd:!1,pagination:{pageNumber:1,pageSize:100}}}}),s=(0,M.default)(l.prototype,"repoList",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLoading:!1,data:[],isEnd:!1,pagination:{pageNumber:1,pageSize:100}}}}),i=(0,M.default)(l.prototype,"activeRepoIndex",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=(0,M.default)(l.prototype,"formData",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=(0,M.default)(l.prototype,"creatBitBucketServersError",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=(0,M.default)(l.prototype,"orgParams",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,M.default)(l.prototype,"getOrganizationList",[A.action],Object.getOwnPropertyDescriptor(l.prototype,"getOrganizationList"),l.prototype),(0,M.default)(l.prototype,"handleChangeActiveRepoIndex",[A.action],Object.getOwnPropertyDescriptor(l.prototype,"handleChangeActiveRepoIndex"),l.prototype),(0,M.default)(l.prototype,"handleChangeAccessTokenWrong",[A.action],Object.getOwnPropertyDescriptor(l.prototype,"handleChangeAccessTokenWrong"),l.prototype),(0,M.default)(l.prototype,"getRepoList",[A.action],Object.getOwnPropertyDescriptor(l.prototype,"getRepoList"),l.prototype),m=(0,M.default)(l.prototype,"getCredentials",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,T.default)(C.default.mark((function t(a){return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.credentials.loading=!0,t.next=3,e.credentialStore.fetchList(Y({},a));case 3:e.credentials=e.credentialStore.list,e.credentials.loading=!1;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),h=(0,M.default)(l.prototype,"creatBitBucketServers",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var a=(0,T.default)(C.default.mark((function a(r){var n,l,o,u,c,s,i,f,d;return C.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=r.apiUrl,l=r.cluster,o=r.secretName,u=r.secretNamespace,c=r.username,s=r.password,e.creatBitBucketServersError={},e.tokenFormData={username:c,password:s,apiUrl:n,credentialId:o},!(0,x.default)((0,F.parseUrl)(n))){a.next=6;break}return e.creatBitBucketServersError={apiUrl:{message:(0,x.default)(n)?t("BITBUCKET_ADDRESS_EMPTY_TIP"):t("BITBUCKET_ADDRESS_INVALID_TIP")}},a.abrupt("return");case 6:if(!e.isNeedUpdate(l)){a.next=20;break}if(i={id:(0,F.generateId)(4)},/https:\/\/bitbucket.org\/?/gm.test("".concat(n))){a.next=12;break}return a.next=11,request.post("".concat(e.getDevopsUrlV2({cluster:l}),"scms/bitbucket-server/servers"),{apiUrl:n,name:o},null,e.verifyAccessErrorHandle["bitbucket-server"]);case 11:i=a.sent;case 12:if(i&&i.id){a.next=14;break}return a.abrupt("return");case 14:return a.next=16,e.verifySecretForRepo({},{apiUrl:n,scmType:"bitbucket-server",cluster:l,userName:c,password:s});case 16:(f=a.sent)&&f.credentialId&&(e.orgList.isLoading=!1,e.getOrganizationList({credentialId:f.credentialId,apiUrl:n},f.credentialId,l)),a.next=30;break;case 20:return a.next=22,e.verifySecretForRepo({secret:o,secretNamespace:u,server:n},{scmType:"bitbucket-server",cluster:l,apiUrl:n});case 22:if(!(d=a.sent)||0!==d.code){a.next=29;break}return e.orgList.isLoading=!1,a.next=27,e.getOrganizationList({secret:o,secretNamespace:u,server:n},"bitbucket-server",l);case 27:a.next=30;break;case 29:d&&0!==d.code&&(e.creatBitBucketServersError={apiUrl:{message:d.message}});case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}),v=(0,M.default)(l.prototype,"clearBitbucketErrors",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.creatBitBucketServersError={}}}}),E=(0,M.default)(l.prototype,"resetStore",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.orgList={isLoading:!1,data:[]},e.activeRepoIndex="",e.isAccessTokenWrong=!1,e.formData={},e.tokenFormData={},e.creatBitBucketServersError={}}}}),y=(0,M.default)(l.prototype,"checkCronScript",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.devops,r=t.script,n=t.pipeline,l=t.cluster;return request.post("".concat(e.getDevopsUrlV2({cluster:l,devops:a}),"checkCron"),{cron:r,name:n})}}}),b=(0,M.default)(l.prototype,"fetchGitLabServerList",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,T.default)(C.default.mark((function t(a){var r,n,l,o,u;return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.devops,l="".concat(e.getDevopsUrlV2({cluster:r,devops:n}),"jenkins/gitlab/serverList"),t.next=4,request.post(l,{},{},(function(){return[]}));case 4:return o=t.sent,u=[],"ok"===o.status&&(0,j.default)(o.data)&&(u=o.data.map((function(e){return{label:e.name,value:e.name}}))),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),g=(0,M.default)(l.prototype,"fetchGitLabProjectList",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,T.default)(C.default.mark((function t(a){var r,n,l,o,u,c,s;return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.devops,l=a.server,o=a.owner,u="".concat(e.getDevopsUrlV2({cluster:r,devops:n}),"jenkins/gitlab/projectList"),u+="?".concat(U.default.stringify({server:l,owner:o})),t.next=5,request.post(u,{},{},(function(){return[]}));case 5:return c=t.sent,s=[],"ok"===c.status&&(0,j.default)(c.data)&&(s=c.data.map((function(e){return{label:e,value:e}}))),t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),l);a.default=q},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s,i=n(r(109)),f=n(r(49)),d=n(r(50)),p=n(r(21)),m=n(r(91)),h=n(r(12)),v=n(r(13)),E=n(r(135)),y=n(r(19)),b=n(r(20)),g=n(r(18)),_=n(r(74)),S=(n(r(92)),n(r(0))),O=n(r(3)),C=r(5),T=r(70),R=n(r(16)),D=n(r(32)),k=n(r(191)),N=n(r(826)),P=r(292),I=r(25),w=r(58),M=n(r(751)),A=n(r(1889));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,b.default)(this,a)}}var F=(0,T.observer)((o=function(e){(0,y.default)(r,e);var a=L(r);function r(){var e;(0,h.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).tokenFormRef=S.default.createRef(),e.state={isLoading:!1,searchValue:""},(0,m.default)(e,"repoListData",u,(0,E.default)(e)),e.handleFormChange=function(){e.props.store.isAccessTokenWrong&&e.props.store.handleChangeAccessTokenWrong()},(0,m.default)(e,"handleActiveOrgChange",c,(0,E.default)(e)),e.handleSubmit=function(t){var a=(0,p.default)({},w.REPO_KEY_MAP[e.scmType],{repo:(0,R.default)(e.repoListData,"".concat(t,".name")),credential_id:e.credentialId,owner:(0,R.default)((0,C.toJS)(e.orgList),"data[".concat(e.activeRepoIndex,"].name")),discover_branches:1,discover_pr_from_forks:{strategy:2,trust:2},discover_pr_from_origin:2,discover_tags:!0,description:(0,R.default)(e.repoListData,"".concat(t,".description"))});e.props.handleSubmit(a)},(0,m.default)(e,"handlePasswordConfirm",s,(0,E.default)(e)),e.getCredentialsListData=function(t){var a=e.props,r=a.devops,n=a.cluster;return e.props.store.getCredentials(x({devops:r,cluster:n},t))},e.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return S.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"",S.default.createElement(I.Tag,{type:n?"":"warning"},r&&t("CREDENTIAL_TYPE_".concat(r.toUpperCase()))))},e.handleUpdateOrgList=function(){var t=(0,d.default)(f.default.mark((function t(a){var r,n,l;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=e.orgList.pagination,t.next=3,e.props.store.getOrganizationList(x({pageNumber:null!==(r=null==a?void 0:a.page)&&void 0!==r?r:1,pageSize:l.pageSize,more:null!==(n=null==a?void 0:a.more)&&void 0!==n&&n},e.props.store.orgParams),e.scmType,e.props.cluster);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleUpdateRepoList=function(){var t=(0,d.default)(f.default.mark((function t(a){var r,n,l,o;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=e.repoList.pagination,t.next=3,e.props.store.getRepoList({activeRepoIndex:e.activeRepoIndex,cluster:e.props.cluster,pageNumber:null!==(r=null==a?void 0:a.page)&&void 0!==r?r:1,pageSize:l.pageSize,more:null!==(n=null==a?void 0:a.more)&&void 0!==n&&n});case 3:o=t.sent,e.repoListData=(0,i.default)(o.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderSearch=function(){return S.default.createElement("div",{className:A.default.search},S.default.createElement(I.InputSearch,{value:e.state.searchValue,onSearch:e.filterResource,placeholder:t("SEARCH_BY_NAME")}))},e.filterResource=function(t){(0,D.default)(t)?e.repoListData=(0,i.default)(e.repoList.data):e.repoListData=e.repoList.data.filter((function(e){return e.name.includes(t)})),e.setState({searchValue:t})},e.renderEmpty=function(a){return S.default.createElement("div",{className:A.default.tabContent},a.isLoading?S.default.createElement(I.Loading,null,S.default.createElement("div",{className:A.default.orgList})):S.default.createElement("div",{className:A.default.orgList},e.renderAccessTokenForm()),S.default.createElement("div",{className:A.default.emptyRepoList},S.default.createElement("div",{className:A.default.placeHolder},S.default.createElement("img",{src:"/assets/empty-card.svg",alt:""}),S.default.createElement("p",{className:A.default.title},t("".concat(e.scmType.toUpperCase(),"_CREDENTIAL_EMPTY"))))))},e}return(0,v.default)(r,[{key:"renderAccessTokenForm",value:function(){var e=this,a=this.props.store,r=a.tokenFormData,n=a.credentials,l=a.isAccessTokenWrong;return S.default.createElement("div",{className:A.default.card},S.default.createElement(I.Form,{data:r,onSubmit:this.handlePasswordConfirm,onChange:this.handleFormChange,ref:this.tokenFormRef},S.default.createElement(I.Form.Item,{label:t("CREDENTIAL"),rules:[{required:!0,message:t("PIPELINE_CREDENTIAL_EMPTY_TIP")}],error:l?{message:{message:t.html("INCORRECT_GITHUB_TOKEN_DESC")}}:void 0,desc:S.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),S.default.createElement("span",{className:A.default.clickable,onClick:function(){e.props.showCredential(),e.props.setCredentialsFormData({type:"username_password",data:{username:"admin"}})}},t("CREATE_CREDENTIAL")))},S.default.createElement(I.Select,{name:"credentialId",options:this.credentialsList,pagination:(0,k.default)(n,["page","limit","total"]),isLoading:n.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,placeholder:" ",searchable:!0,clearable:!0,onChange:function(t){e.props.store.tokenFormData={credentialId:t}}})),S.default.createElement(I.Button,{className:A.default.confirmButton,loading:this.state.isLoading,onClick:this.handlePasswordConfirm},t("OK"))))}},{key:"renderOrgList",value:function(){var e=this,t=this.orgList,a=t.data,r=t.isEnd,n=t.pagination,l=void 0===n?{}:n,o=t.isLoading;return S.default.createElement(N.default,{data:(0,C.toJS)(a),isEnd:r,page:l.pageNumber||1,loading:o,onFetch:this.handleUpdateOrgList,noMount:!0},!(0,D.default)(a)&&a.map((function(t,a){return S.default.createElement("div",{key:t.name,className:(0,O.default)(A.default.repo,(0,p.default)({},A.default["repo-active"],e.activeRepoIndex===a)),onClick:function(){return e.handleActiveOrgChange(a)}},S.default.createElement("div",{className:A.default.avatar},S.default.createElement("img",{src:t.avatar,alt:t.name})),S.default.createElement("div",{className:A.default.name},t.name))})))}},{key:"renderRepoList",value:function(){var e=this,a=this.repoList,r=a.isEnd,n=a.pagination,l=void 0===n?{}:n,o=a.isLoading;return(0,D.default)(this.repoListData)?S.default.createElement(I.Loading,{spinning:o},S.default.createElement(M.default,{className:A.default.empty,icon:"exclamation",title:t("NO_DATA"),desc:t("NO_REPO_FOUND_DESC")})):S.default.createElement(N.default,{data:(0,C.toJS)(this.repoListData),isEnd:r,page:l.pageNumber||1,loading:o,onFetch:this.handleUpdateRepoList,wrapperClassName:A.default.repoListBox,noMount:!0},this.repoListData.map((function(a,r){return S.default.createElement("div",{className:A.default.repo,key:"".concat(a.name,"-").concat(r)},S.default.createElement("div",{className:A.default.icon},S.default.createElement(I.Icon,{name:"bitbucket_server"===e.scmType?"bitbucket":e.scmType,size:40})),S.default.createElement("div",{className:A.default.info},S.default.createElement("div",{className:A.default.name},a.name),S.default.createElement("div",{className:A.default.desc},a.description)),S.default.createElement("div",{className:A.default.action,onClick:function(){return e.handleSubmit(r)},"data-repo-index":r},S.default.createElement(I.Button,{type:"control"},t("SELECT"))))})))}},{key:"render",value:function(){return!this.orgList.isLoading&&(0,D.default)((0,C.toJS)(this.orgList.data))?this.renderEmpty(this.orgList.data):S.default.createElement("div",{className:A.default.tabContent},S.default.createElement("div",{className:A.default.orgList},this.renderOrgList()),S.default.createElement("div",{className:A.default.repoListContainer},S.default.createElement(S.default.Fragment,null,this.renderSearch()),S.default.createElement("div",{className:A.default.repoList},this.renderRepoList())))}},{key:"orgList",get:function(){return this.props.store.orgList}},{key:"activeRepoIndex",get:function(){return this.props.store.activeRepoIndex}},{key:"repoList",get:function(){return this.props.store.repoList}},{key:"scmType",get:function(){return"github"}},{key:"credentialsList",get:function(){return(0,i.default)(this.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type,namespace:e.namespace,token:(0,R.default)(e,"_originData.data.password")}})).filter((function(e){return"username_password"===e.type})))}}]),r}(S.default.Component),u=(0,_.default)(o.prototype,"repoListData",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,_.default)(o.prototype,"handleActiveOrgChange",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,d.default)(f.default.mark((function t(a){var r;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.store.handleChangeActiveRepoIndex(parseInt(a,10)),t.next=3,e.props.store.getRepoList({activeRepoIndex:parseInt(a,10),cluster:e.props.cluster,more:!1});case 3:r=t.sent,e.repoListData=(0,i.default)(r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),s=(0,_.default)(o.prototype,"handlePasswordConfirm",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,d.default)(f.default.mark((function t(){var a,r,n,l,o,u,c,s;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.cluster,n=a.devops,l=e.tokenFormRef.current.getData(),e.credentialId=l.credentialId,e.credentialId){t.next=5;break}return t.abrupt("return",!1);case 5:if(e.setState({isLoading:!0}),o=e.credentialsList.find((function(t){return t.value===e.credentialId})),(0,D.default)(o)){t.next=15;break}return u=(0,R.default)(o,"value"),c=(0,R.default)(o,"namespace"),s=(0,P.safeAtob)((0,R.default)(o,"token")),t.next=13,e.props.store.putAccessName({secretName:u,secretNamespace:c,cluster:r,devops:n,token:s}).finally((function(){e.setState({isLoading:!1})}));case 13:t.next=16;break;case 15:e.setState({isLoading:!1});case 16:case"end":return t.stop()}}),t)})))}}),l=o))||l;a.default=F},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(73)),m=r(58),h=r(25),v=n(r(1899)),E=n(r(1901));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={state:"",selectDataKey:""},e.handleData=function(t){var a=e.state.selectDataKey,r=(0,d.default)(e.fedFormTemplate,"data",{});a&&delete r[a],(0,p.default)(e.fedFormTemplate,"data",b(b({},r),t)),e.hideDataForm()},e.showDataForm=function(){e.setState({state:"data",selectDataKey:""})},e.hideDataForm=function(){e.setState({state:"",selectDataKey:""})},e.handleDataItemEdit=function(t){e.setState({state:"data",selectDataKey:t})},e}return(0,u.default)(r,[{key:"renderDataForm",value:function(){var e=this.state.selectDataKey,t=(0,d.default)(this.fedFormTemplate,"data",{});return f.default.createElement(E.default,{detail:t,selectKey:e,onOk:this.handleData,onCancel:this.hideDataForm})}},{key:"render",value:function(){var e=this.props.formRef;return"data"===this.state.state?this.renderDataForm():f.default.createElement(h.Form,{data:this.fedFormTemplate,ref:e},f.default.createElement(h.Form.Item,{label:t("DATA")},f.default.createElement(v.default,{name:"data",onEdit:this.handleDataItemEdit,onAdd:this.showDataForm})))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,m.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,d.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(f.default.Component);a.default=_},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=a(70),d=r(a(1907)),p=r(a(1908)),m=r(a(1910)),h=r(a(1913)),v=r(a(1916)),E=r(a(1919)),y=r(a(1924)),b=r(a(1969)),g=r(a(1993)),_=r(a(1994)),S=r(a(1995)),O=r(a(1999)),C=r(a(2001));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var R=(0,f.observer)(n=function(e){(0,u.default)(a,e);var t=T(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).store=e.props.store,e.modalStore=new C.default,e.labelStore=new d.default,e.subForm=i.default.createRef(),e.handleSave=function(t){var a=e.props.onOk;e.subForm&&e.subForm.current&&e.subForm.current.handleSubmit(),a(t)},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.readOnly,a=e.onCancel,r=e.isSubmitting,n=this.modalStore.selectedMonitor,l=this.store.isEditing,o=n&&l;return i.default.createElement(f.Provider,{monitoringStore:this.store,labelStore:this.labelStore,modalStore:this.modalStore},i.default.createElement(S.default,{theme:this.modalStore.theme,onCancel:a,title:i.default.createElement(m.default,null),description:i.default.createElement(_.default,null),operations:i.default.createElement(i.default.Fragment,null,i.default.createElement(g.default,null),i.default.createElement(v.default,null),i.default.createElement(h.default,null),!t&&i.default.createElement(p.default,{onSaveClick:this.handleSave,isSubmitting:r}))},i.default.createElement(O.default,{sidebar:i.default.createElement(E.default,null),content:o?i.default.createElement(y.default,{ref:this.subForm}):i.default.createElement(b.default,null)})))}}]),a}(i.default.Component))||n;t.default=R},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.createElement(c.Button,(0,n.default)({className:(0,u.default)(s.default.wrapper,(0,l.default)({},s.default.danger,"danger"===e.type))},e))};var n=r(a(71)),l=r(a(21)),o=r(a(0)),u=r(a(3)),c=a(25),s=r(a(1909))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recentTimeRange=t.refreshInterval=void 0;t.refreshInterval=["","3s","5s","10s","30s"];t.recentTimeRange=["30m","1h","5h","12h","24h","7d"]},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(192)),o=r(a(136)),u=r(a(12)),c=r(a(13)),s=r(a(19)),i=r(a(20)),f=r(a(18)),d=r(a(21)),p=r(a(0)),m=r(a(16)),h=r(a(137)),v=r(a(3)),E=r(a(900)),y=r(a(800)),b=r(a(783)),g=r(a(810)),_=r(a(825)),S=r(a(772)),O=r(a(784)),C=r(a(1941)),T=r(a(1944));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var D=function(e){var t=e.from,a=e.to,r=e.count,n=parseInt((a-t)/(r+1),10);return Array(r).fill({}).reduce((function(e,a,r){return e.concat(t+n*(r+1))}),[])},k=(n={},(0,d.default)(n,6e4,"mm:ss"),(0,d.default)(n,36e5,"HH:mm"),(0,d.default)(n,864e5,"ddd HH:mm"),(0,d.default)(n,1296e6,"MMM Do"),(0,d.default)(n,"Infinity","MMM YYYY"),n);function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return(0,h.default)(e).format("YYYY-MM-DD HH:mm:ss")}var P=function(e){(0,s.default)(a,e);var t=R(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).ref=p.default.createRef(),e}return(0,c.default)(a,[{key:"getTickCount",value:function(){var e=(0,m.default)(this.ref,"current.offsetWidth");return e?Math.floor(e/75):5}},{key:"getXAxisExpand",value:function(){var e=this.props,t=e.data,a=e.timeRange,r=e.bar,n=t.length,l=a.end-a.start;return n>1&&r?l/(2*n-2):0}},{key:"getTicks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=this.getDomain(),a=(0,o.default)(t,2),r=a[0],n=a[1];return D({from:r,to:n,count:e})}},{key:"getDomain",value:function(){var e=this.props.timeRange,t=e.start,a=e.end,r=this.getXAxisExpand();return[t-r,a+r]}},{key:"getTickFormatter",value:function(e){var t=this.getDomain(),a=(0,o.default)(t,2),r=a[0],n=(a[1]-r)/e;for(var u in k)if(n<=Number(u)){var c=function(){var e=k[u];return{v:function(t){return(0,h.default)(t).format(e)}}}();if("object"===(0,l.default)(c))return c.v}}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,r=t.legends,n=t.line,l=t.bar,o=t.cartesianGrid,u=void 0===o||o,c=t.stacked,s=void 0!==c&&c,i=t.yAxis,f=void 0===i||i,d=t.className,m=t.valueFormatter;return p.default.createElement("div",{style:{height:"300px"},className:(0,v.default)(T.default.wrapper,d),ref:this.ref},p.default.createElement(O.default,{debounce:100},p.default.createElement(C.default,{data:a},u&&p.default.createElement(_.default,{vertical:!1}),this.renderTimeXAxis(),f&&p.default.createElement(g.default,{tickFormatter:m,tickLine:null,axisLine:null}),l&&r.map((function(t){return p.default.createElement(E.default,{isAnimationActive:!1,connectNulls:!0,key:"".concat(t.ID," - bar"),name:t.name,dataKey:t.ID,fill:t.color,stroke:t.color,stackId:s?"A":void 0,fillOpacity:t.opacity||1,barSize:e.singleBarSize})})),n&&r.map((function(e){return p.default.createElement(y.default,{isAnimationActive:!1,connectNulls:!0,key:"".concat(e.ID," - area"),name:e.name,dataKey:e.ID,fill:e.color,stroke:e.color,stackId:s?"A":void 0,fillOpacity:e.opacity||.4})})),p.default.createElement(b.default,{wrapperStyle:{zIndex:1e3},formatter:m,labelFormatter:N}))))}},{key:"renderTimeXAxis",value:function(){var e=this.props.xAxis,t=void 0===e||e,a=this.getDomain(),r=this.getTickCount(),n=this.getTicks(r),l=this.getTickFormatter(r),o=this.XAxisShouldPadding?30:0;return p.default.createElement(S.default,{hide:!t,type:"number",dataKey:"time",scale:"time",interval:0,tickLine:null,domain:a,ticks:n,tickFormatter:l,allowDataOverflow:"false",padding:{left:o,right:o}})}},{key:"singleBarSize",get:function(){var e=this.props.legends;return this.XAxisShouldPadding?Math.floor(60/e.length):void 0}},{key:"XAxisShouldPadding",get:function(){var e=this.props,t=e.data,a=e.timeRange,r="YYYY-MM-DD HH:mm:ss";if(1===t.length){var n=(0,h.default)(a.start).format(r),l=(0,h.default)(a.end).format(r),o=(0,h.default)(t[0].time).format(r);return o===n||o===l}return!1}}]),a}(p.default.PureComponent);t.default=P,P.defaultProps={valueFormatter:function(e){return e}}},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(109)),l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=a(5),d=r(a(185));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).onAdd=function(){var t=e.props,a=t.onChange,r=t.value,l=void 0===r?[]:r,o=t.defaultItemValue;a([].concat((0,n.default)(l),[o]))},e.add=function(t){var a=e.props,r=a.onChange,l=a.value;r([].concat((0,n.default)(l),[t]))},e}return(0,o.default)(a,[{key:"onDelete",value:function(e){var t=this;return function(){var a=t.props,r=a.value,n=a.onChange,l=(0,d.default)((0,f.toJS)(r));l.splice(e,1),n(l)}}},{key:"onUpClick",value:function(e){var t=this;return function(){var a=t.props,r=a.value,n=a.onChange,l=(0,d.default)((0,f.toJS)(r)),o=l[e],u=(e-1+l.length)%l.length;l[e]=l[u],l[u]=o,n(l)}}},{key:"onDownClick",value:function(e){var t=this;return function(){var a=t.props,r=a.value,n=a.onChange,l=(0,d.default)((0,f.toJS)(r)),o=l[e],u=(e+1+l.length)%l.length;l[e]=l[u],l[u]=o,n(l)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.value,r=t.header,n=t.children,l=t.name;return i.default.createElement("div",null,r&&r({onAdd:this.onAdd,value:a,add:this.add}),i.default.createElement("div",null,a.map((function(t,a){return n({index:a,value:t,formItemName:"".concat(l,"[").concat(a,"]"),onDelete:e.onDelete(a),onUpClick:e.onUpClick(a),onDownClick:e.onDownClick(a)})}))))}}]),a}(i.default.Component);t.default=m,m.defaultProps={defaultItemValue:{},value:[]}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.prefix,r=e.onUpClick,n=e.onDownClick,p=e.onDelete,m=(0,o.default)(e,["prefix","onUpClick","onDownClick","onDelete"]);return u.default.createElement("div",{className:d.default.wrapper},u.default.createElement("div",{className:d.default.sort},u.default.createElement(c.Icon,{name:"sort-ascending",onClick:r}),u.default.createElement(c.Icon,{name:"sort-descending",onClick:n})),u.default.createElement("div",{className:d.default.form},u.default.createElement("div",{className:d.default.firstLine},u.default.createElement("div",null,u.default.createElement(c.Form.Item,{className:d.default.name},u.default.createElement(s.default,{name:"".concat(a,".legendFormat"),debounce:800},(function(e){var a=e.onChange,r=e.value;return u.default.createElement("div",null,u.default.createElement(i.default,{label:t("METRIC_NAME"),tips:""},u.default.createElement(c.Input,{className:d.default.input,value:r,onChange:a})))}))),u.default.createElement(c.Form.Item,{className:d.default.interval},u.default.createElement(s.default,{name:"".concat(a,".step"),debounce:500},(function(e){var a=e.onChange,r=e.value;return u.default.createElement("div",null,u.default.createElement(i.default,{label:t("Interval"),tips:""},u.default.createElement(c.Input,{className:d.default.input,value:r,onChange:a})))})))),u.default.createElement(c.Icon,{name:"trash",onClick:p})),u.default.createElement("div",{className:d.default.exprInput},u.default.createElement(c.Form.Item,null,u.default.createElement(s.default,{name:"".concat(a,".expr"),debounce:500},(function(e){var t=e.onChange,a=e.value;return u.default.createElement(f.default,(0,l.default)({value:a,onChange:t},m))}))))))};var l=n(r(71)),o=n(r(56)),u=n(r(0)),c=r(25),s=n(r(907)),i=n(r(943)),f=n(r(1050)),d=n(r(1948))},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.left,a=e.right;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",null,t),a)};var n=r(a(0)),l=r(a(1949))},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,o,u,c,s,i,f,d,p,m=r(a(49)),h=r(a(50)),v=r(a(109)),E=r(a(2002)),y=r(a(21)),b=r(a(91)),g=r(a(12)),_=r(a(13)),S=r(a(74)),O=(r(a(92)),r(a(16))),C=r(a(73)),T=r(a(190)),R=a(5),D=r(a(137)),k=a(725),N=a(1085),P=a(58),I=n(a(1102)),w=r(a(2003)),M=r(a(2004)),A=r(a(2005));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L={from:"now-30m",to:"now"},F={graph:M.default,signlestat:w.default},U=(l=function(){function e(t){var a=t.title,r=void 0===a?"":a,n=t.cluster,l=void 0===n?"":n,m=t.namespace,h=void 0===m?"":m,v=t.datasource,E=void 0===v?"prometheus":v,y=t.description,_=void 0===y?"":y,S=t.panels,O=void 0===S?[]:S,C=t.templatings,T=void 0===C?[]:C,R=t.time,D=void 0===R?L:R,N=t.isEditing,P=void 0!==N&&N,I=t.refresh,w=void 0===I?"":I,M=t.name,j=void 0===M?"":M,x=t.formTemplate;(0,g.default)(this,e),(0,b.default)(this,"title",o,this),(0,b.default)(this,"refresh",u,this),(0,b.default)(this,"time",c,this),(0,b.default)(this,"isEditing",s,this),(0,b.default)(this,"textMonitors",i,this),this.unNameGraphRow=new A.default({config:{id:0}}),(0,b.default)(this,"graphMonitorRows",f,this),(0,b.default)(this,"targetsMetadata",d,this),(0,b.default)(this,"changeTitle",p,this),this.title=r,this.cluster=l,this.namespace=h,this.datasource=E,this.description=_,this.panels=O,this.templatings=T,this.time=D,this.refresh=w,this.name=j,this.formTemplate=x,this.isEditing=P,this.generateMonitorList(),this.uidFactory=(0,k.CreateUidFactory)(this.panels.map((function(e){return e.id})))}var t;return(0,_.default)(e,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"getTimeRange",value:function(){var e=this.time,t=e.from,a=e.to;return{from:(0,D.default)(this.parseGrafanaTime(t)),to:(0,D.default)(this.parseGrafanaTime(a))}}},{key:"refreshMs",get:function(){return this.refresh?(0,N.getMsFromTimeAlias)(this.refresh):0}},{key:"timeRange",get:function(){var e=this.time,t=e.from,a=e.to;return{from:(0,D.default)(this.parseGrafanaTime(t)),to:(0,D.default)(this.parseGrafanaTime(a))}}}]),(0,_.default)(e,[{key:"changeRefreshInterval",value:function(e){this.refresh=e}},{key:"changeTimeRange",value:function(e){var t=e.from,a=e.to;this.time.from=t,this.time.to=a}},{key:"switchEditingMode",value:function(e){this.isEditing=e}},{key:"changeModeToEditing",value:function(){return this.switchEditingMode(!0),this}},{key:"generateMonitorList",value:function(){var e=this.panels.reduce((function(e,t){return e[t.type===I.MONITOR_PANEL_TYPE.TEXT?"textPanels":"otherPanels"].push(t),e}),{textPanels:[],otherPanels:[]}),t=e.textPanels,a=e.otherPanels;this.textMonitors=this.generateTextMonitors(t);var r=this.gennerateGraphMonitorRows(a),n=r.unNameGraphRow,l=r.graphRows;this.unNameGraphRow=n,this.graphMonitorRows=l}},{key:"generateTextMonitors",value:function(e){var t=this,a=e.map((function(e){return new w.default(x(x({},e),{},{namespace:t.namespace,cluster:t.cluster}))}));return new A.default({monitors:a})}},{key:"gennerateGraphMonitorRows",value:function(e){var t=this,a=e.reduce((function(e,a){if(a.type===I.MONITOR_PANEL_TYPE.ROW)return[].concat((0,v.default)(e),[new A.default({config:a})]);var r=new(F[a.type]||I.default)(x(x({},a),{},{namespace:t.namespace,cluster:t.cluster})),n=e.pop();return n.push(r),[].concat((0,v.default)(e),[n])}),[this.unNameGraphRow]),r=(0,E.default)(a);return{unNameGraphRow:r[0],graphRows:r.slice(1)}}},{key:"addNewRow",value:function(){this.graphMonitorRows.push(new A.default({config:{id:this.uidFactory.generateUID(),title:"New Row",type:"row"}}))}},{key:"generateNewTextMonitor",value:function(){var e=new w.default({id:this.uidFactory.generateUID(),title:"",format:"none",type:"singlestat",decimals:0,namespace:this.namespace,cluster:this.cluster,valueName:"last",targets:[{expr:""}]});return e.belong(this.textMonitors),e}},{key:"generatGraphMonitor",value:function(e){var t=e.bars,a=e.lines,r=new M.default({id:this.uidFactory.generateUID(),type:"graph",title:"",lines:a,bars:t,description:"",namespace:this.namespace,cluster:this.cluster,stack:!1,targets:[{expr:"",legendFormat:"",step:"1m",refId:1}],yaxes:[{format:"none",decimals:0}],colors:P.MONITOR_GRAPH_COLORS[0].colors});return r.belong(this.unNameGraphRow),r}},{key:"generatTableMonitor",value:function(){var e=new I.default({id:this.uidFactory.generateUID(),title:"",format:"none",type:"graph",decimals:0,namespaces:this.namespace,cluster:this.cluster,targets:[{expr:""}]});return e.belong(this.unNameGraphRow),e}},{key:"parseGrafanaTime",value:function(e){if(this.isGrafanaTimeFormat(e)){var t=e.replace(/now-?/,""),a=(0,N.getMsFromTimeAlias)(t);return Date.now()-a}return new Date(e).valueOf()}},{key:"isGrafanaTimeFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.match(/^now$|^now-(\d+[smhd])$/)}},{key:"fetchMetadata",value:(t=(0,h.default)(m.default.mark((function e(){var t,a;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("kapis/monitoring.kubesphere.io/v1alpha3".concat(this.getPath({cluster:this.cluster,namespace:this.namespace}),"/targets/metadata"));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={data:[]};case 5:t=e.t0,a=t.data,this.targetsMetadata=a||[];case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toJS",value:function(){var e=this.textMonitors,t=this.unNameGraphRow,a=this.graphMonitorRows,r=[].concat((0,v.default)(t.monitors),(0,v.default)(e.monitors)).map((function(e){return(0,T.default)((0,R.toJS)(e.config),["cluster","namespace"])})),n=a.reduce((function(e,t){var a=t.monitors.map((function(e){return(0,T.default)((0,R.toJS)(e.config),["cluster","namespace"])}));return e.concat(t.config,a)}),[]);return(0,C.default)(this.formTemplate,"spec",Object.assign((0,O.default)(this.formTemplate,"spec",{}),{title:this.title,templatings:this.templatings,refresh:this.refresh,time:(0,R.toJS)(this.time),panels:[].concat((0,v.default)(r),(0,v.default)(n))})),this.formTemplate}}]),e}(),o=(0,S.default)(l.prototype,"title",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=(0,S.default)(l.prototype,"refresh",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=(0,S.default)(l.prototype,"time",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{from:"now",to:"now"}}}),(0,S.default)(l.prototype,"refreshMs",[R.computed],Object.getOwnPropertyDescriptor(l.prototype,"refreshMs"),l.prototype),(0,S.default)(l.prototype,"timeRange",[R.computed],Object.getOwnPropertyDescriptor(l.prototype,"timeRange"),l.prototype),s=(0,S.default)(l.prototype,"isEditing",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,S.default)(l.prototype,"textMonitors",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=(0,S.default)(l.prototype,"graphMonitorRows",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=(0,S.default)(l.prototype,"targetsMetadata",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=(0,S.default)(l.prototype,"changeTitle",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.title=t}}}),(0,S.default)(l.prototype,"changeRefreshInterval",[R.action],Object.getOwnPropertyDescriptor(l.prototype,"changeRefreshInterval"),l.prototype),(0,S.default)(l.prototype,"changeTimeRange",[R.action],Object.getOwnPropertyDescriptor(l.prototype,"changeTimeRange"),l.prototype),(0,S.default)(l.prototype,"switchEditingMode",[R.action],Object.getOwnPropertyDescriptor(l.prototype,"switchEditingMode"),l.prototype),(0,S.default)(l.prototype,"generateMonitorList",[R.action],Object.getOwnPropertyDescriptor(l.prototype,"generateMonitorList"),l.prototype),l);t.default=U},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),o=n(a(109)),u=n(a(12)),c=n(a(13)),s=n(a(19)),i=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(3)),m=n(a(1)),h=a(25),v=n(a(23)),E=n(a(2014));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(a,e);var t=y(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={value:e.props.value},e.handleClick=function(t){var a=t,r=e.state.value,n=e.props.onChange;(0,v.default)(r)?r.includes(a)?e.setState({value:r.filter((function(e){return e!==a}))},(function(){n(r.filter((function(e){return e!==a})))})):e.setState({value:[].concat((0,o.default)(r),[a])},(function(){n([].concat((0,o.default)(r),[a]))})):e.setState({value:a},(function(){n(a)}))},e.selectedCheck=function(t){var a=e.state.value;return(0,v.default)(a)?a.includes(t):t===a},e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.options,n=t.selectedClassName;return d.default.createElement("ul",{className:(0,p.default)(E.default.container,a)},r.map((function(t){var a=t.icon,r=void 0===a?"picture":a,o=t.image,u=t.label,c=t.value,s=t.description;return d.default.createElement("li",{key:c,"data-value":c,onClick:function(){return e.handleClick(c)},className:(0,p.default)((0,l.default)({},n,e.selectedCheck(c))),style:{paddingTop:s?"12px":"18px"}},d.default.createElement("figure",null,o?d.default.createElement("img",{src:o}):d.default.createElement(h.Icon,{name:r})),d.default.createElement("h3",null,u),s&&d.default.createElement("p",null,s))})))}}]),a}(d.Component);t.default=b,b.propTypes={options:m.default.array,value:m.default.oneOfType([m.default.array,m.default.string]),selectedClassName:m.default.string,iconSize:m.default.oneOfType([m.default.number,m.default.string])},b.defaultProps={selectedClassName:E.default.selected}},function(e,t,a){e.exports={option:"_37Sc6Br1RJMiXP59t5p3P0"}},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=a(25),d=r(a(1071));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.formTemplate,a=e.formRef,r=e.formProps,l=e.module,o=e.isFederated,u=e.isEdit;return i.default.createElement("div",{className:"margin-t12"},i.default.createElement(f.Form,(0,n.default)({data:t,ref:a},r),i.default.createElement(d.default,{module:l,data:t,isFederated:o,isEdit:u})))}}]),a}(i.default.Component);t.default=m},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(21)),o=r(a(12)),u=r(a(13)),c=r(a(135)),s=r(a(19)),i=r(a(20)),f=r(a(18)),d=r(a(0)),p=r(a(16)),m=r(a(32)),h=r(a(190)),v=a(25),E=r(a(875));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,s.default)(a,e);var t=b(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleContainer=function(t){var a=e.props.formProps;E.default.prototype.handleContainer.call((0,c.default)(e),t),a.onChange()},e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formProps,r=e.isFederated,o=e.isEdit,u=this.state,c=u.showContainer,s=u.selectContainer;if(c)return this.renderContainerForm(s);var i=r&&o?this.fedFormTemplate:this.formTemplate;return(0,p.default)(i,"spec.template.spec.containers",[]).forEach((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e),a=(0,p.default)(t,"resources.requests"),r=(0,m.default)(a)?null:(0,h.default)(a,["cpu","memory"]);if(!(0,m.default)(r)){var n=Object.keys(r)[0],o={type:n,value:r[n]};e.resources.gpu=o}})),d.default.createElement(v.Form,(0,n.default)({data:i,ref:t},a),this.renderContainerList())}},{key:"formTemplate",get:function(){return this.props.formTemplate}}]),a}(E.default);t.default=g},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(135)),o=r(a(19)),u=r(a(20)),c=r(a(18)),s=a(876);function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var f=function(e){(0,o.default)(a,e);var t=i(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).handleVolume=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];s.Component.prototype.handleVolume.apply((0,l.default)(e),a),e.props.formProps.onChange()},e.handleVolumeTemplate=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];s.Component.prototype.handleVolumeTemplate.apply((0,l.default)(e),a),e.props.formProps.onChange()},e.handleLogToggle=function(){s.Component.prototype.handleLogToggle.apply((0,l.default)(e)),e.props.formProps.onChange()},e}return a}(s.Component);t.default=f},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=a(25),d=r(a(1226));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.formTemplate,a=e.formRef,r=e.formProps,l=e.module,o=e.cluster,u=e.namespace;return i.default.createElement("div",{className:"margin-t12"},i.default.createElement(f.Form,(0,n.default)({data:t,ref:a},r),i.default.createElement(d.default,{formProps:r,data:t,module:l,cluster:o,namespace:u})))}}]),a}(i.default.Component);t.default=m},function(e,t,a){e.exports={modalBody:"_3ooh-L6FH1heTE2W25ptXy",body:"_1baKVvR8wM2DfwvvD-CQS-",title:"_3EXz6wxYbQX9UTIbuE8ZWX",content:"_2RPgGxlrT4c_RbdEQcp480",results:"_3DvL6vqwfNBXYrsp_WXO7-",footer:"_2p963RzqYeHJquBZuiurFu",item:"_3mQ04Ri3duB-7QNjJrTMpb",menu:"iskifxbBA3n3yoiQmXRq2",avatar:"_1fNpt_vmHQYqlACN4TYie8"}},function(e,t,a){e.exports={panel_p:"Yqh06RmBoRyo4EPMas8bQ",panel_s:"dcZ_PAxGuga9-dQ_R2F21",list:"_2y3_DkkZyu00IzO_2f7K0T",sheader:"_3AiwhP8qwgUhqH8LPnE7h1",sbody:"_3IhxAI3DyVi9gF9OH56ieB",cidr:"_1i1AudKOZMc9YALrUQQS_w",cidr_desc:"_2Y96COk5j42afC8WBhITrx",rulerow:"_1n385-u3bi3R_AxmEjXF5f",error:"_2Rv2uP_LWQnnpK8_zqJ6Q7",errColor:"_2hhhSXsdc04b-WXptqNUWF",addBtn:"k2fG1ygGy-TCFEvSpdn5L",title:"_3qqAkQa-lFclxQniJas3A6",disp:"_28E97ro-MMoMS8FI6jmtFg",dirCheck:"_1INyMtM5lz6S-84-U9Lo8i"}},,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(136)),l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=a(25),d=a(58),p=r(a(2086));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(a,e);var t=m(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).handleInputChange=function(t,a){var r=(a=a.toLowerCase()).match(d.SCHEME_REG)||[],l=(0,n.default)(r,4),o=l[1],u=void 0===o?e.schemeValue:o,c=l[3],s=void 0===c?"":c;e.props.onChange("".concat(u).concat(s))},e.handleSchemeChange=function(t){e.props.onChange("".concat(t).concat(e.inputValue))},e}return(0,o.default)(a,[{key:"render",value:function(){return i.default.createElement("div",{className:p.default.container},i.default.createElement(f.Select,{value:this.schemeValue,className:p.default.select,options:d.SCHEME_OPTIONS,onChange:this.handleSchemeChange}),i.default.createElement(f.Input,{className:p.default.input,onChange:this.handleInputChange,value:this.inputValue,autoComplete:"off"}))}},{key:"inputValue",get:function(){var e=this.props.value.match(d.SCHEME_REG)||[],t=(0,n.default)(e,4)[3];return void 0===t?"":t}},{key:"schemeValue",get:function(){var e=this.props.value.match(d.SCHEME_REG)||[],t=(0,n.default)(e,2)[1];return void 0===t?"https://":t}}]),a}(i.default.Component);t.default=h,h.defaultProps={className:"",value:"",onChange:function(){}}},,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(109)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(16)),v=n(r(32)),E=n(r(68)),y=n(r(281)),b=r(25),g=n(r(2105)),_=n(r(1308));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=function(e){(0,s.default)(r,e);var a=S(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).showKeyError=function(e){var t=e.index,a=e.message,r=(0,y.default)([].concat((0,o.default)(n.state.errorKeys),[t]));n.setState({errorKeys:r,errorMsg:a})},n.hideKeyError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,a=t?n.state.errorKeys.filter((function(e){return e!==t})):[];n.setState({errorKeys:a,errorMsg:""})},n.handleAdd=function(){var e=n.props,t=e.value;(0,e.onChange)([].concat((0,o.default)(t),[n.defaultValue]),n.defaultValue)},n.handleChange=function(e,a){var r=n.props,l=r.value,u=r.onChange,c=(0,h.default)(a,"currentTarget.value",a),s=l.findIndex((function(e){return(0,v.default)(e.key)}));if(-1!==s)return n.showKeyError({index:s,message:t("EMPTY_KEY")}),!1;var i=n.commonKeys.includes(c.key);if(l.reduce((function(e,t){return e.key===t.key&&(i=!0),t})),i)return n.showKeyError({index:e,message:t("DUPLICATE_KEYS")}),!1;var f=[];(0,E.default)(l[e])?(f=(0,o.default)(l))[e]=c:f=l.map((function(t,a){return a===e?c:t})),n.hideKeyError({index:e}),u(f)},n.handleSelect=function(e){var t=n.props,a=t.value;(0,t.onSelect)(a[e],e)},n.handleDelete=function(e){var t=n.props,a=t.value,r=t.onChange;n.state.errorKeys.includes(e)&&n.hideKeyError({index:e}),r(a.filter((function(t,a){return a!==e})),a[e])},n.state={errorKeys:[],errorMsg:""},n}return(0,c.default)(r,[{key:"isAddEnable",value:function(){var e=this.props,t=e.value,a=e.checkItemValid,r=this.state.errorKeys;return a?t.every(a):(0,v.default)(r)&&t.every((function(e){return!(0,v.default)(e)}))}},{key:"renderItems",value:function(){var e=this,t=this.props,a=t.value,r=t.onSelect,n=this.state,o=n.errorKeys,u=n.errorMsg;return a.map((function(t,a){return d.default.createElement("div",{key:a,className:(0,m.default)(_.default.inputItem,(0,l.default)({},_.default.errorItem,o.includes(a)))},d.default.createElement(g.default,{value:t||e.defaultValue,disabled:!e.isAddEnable(),onChange:e.handleChange.bind(e,a),onSelect:r&&e.handleSelect.bind(e,a),onDelete:e.handleDelete.bind(e,a)}),d.default.createElement("div",{className:_.default.error},u))}))}},{key:"render",value:function(){var e=this.props.className;return d.default.createElement("div",{className:(0,m.default)(_.default.wrapper,e)},this.renderItems(),d.default.createElement("div",{className:"text-right"},d.default.createElement(b.Button,{className:_.default.add,onClick:this.handleAdd,disabled:!this.isAddEnable()},t("ADD_TAINT"))))}},{key:"defaultValue",get:function(){return{}}},{key:"commonKeys",get:function(){return this.props.common.map((function(e){return e.key})).filter((function(e){return e}))}}]),r}(d.default.Component);a.default=O,O.propTypes={name:p.default.string,common:p.default.array,value:p.default.array,onChange:p.default.func,checkItemValid:p.default.func},O.defaultProps={name:"",common:[],value:[""],onChange:function(){}}},function(e,t,a){e.exports={wrapper:"_2hrn5wbxI2jsY7exfmVzFH",errorItem:"_31W58zIFRX1O9saFOI6x4I",error:"_30Sh5N4eWp_n22gaC2P3FM",inputItem:"_1yjzijgTlKOp64WGBuvfOo",item:"_3sooMgh3beAV1uQaOpmOxt",inputs:"_1JgwJ_WoRTYC6bT-3V58mE",tips:"_1F6_WzB42ymqfDdQg6zo6R",actions:"_1vi3GhIAi_AW1pstmvuD4z",add:"_26Yju3vipEPXQJKW_DGxxk"}},function(e,t,a){e.exports={body:"_3RwgPGeCeOOduMFEd44ASI",wrapper:"_1JCx9E2tplQfD8l57CrHIk",title:"_1KEovvXekDcG9tkMjMIWmy",subTitle:"_334hw3UpGJoftYa6r6Wb2g",content:"tre555QRya-kDb6XM4o21"}},,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(49)),s=n(r(50)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(16)),v=n(r(32)),E=n(r(73)),y=n(r(0)),b=r(70),g=r(25),_=n(r(740)),S=r(37),O=r(58),C=n(r(1253)),T=n(r(883)),R=n(r(2262)),D=n(r(2264)),k=n(r(2266));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,b.observer)((u=o=function(e){(0,d.default)(r,e);var a=N(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).handleChange=function(e){return function(t){var a=n.props.formTemplate;(0,E.default)(a,e,t),n.forceUpdate()}},n.removeCronError=function(){n.state.cronMessage&&n.setState({cronMessage:{}})},n.checkCronScript=function(){var e=(0,s.default)(c.default.mark((function e(a,r,l){var o,u,s,i,f,d,p,m,h;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.props,u=o.formTemplate,s=o.type,i=u.name,f=u.cluster,d=u.devops,p=r,e.next=5,n.scmStore.checkCronScript({devops:d,script:p,cluster:f,pipeline:"create"===s?void 0:i});case 5:if("error"!==(m=e.sent).result){e.next=10;break}return n.setState({cronMessage:{error:m.message}},(function(){})),l(m.message),e.abrupt("return");case 10:"ok"===m.result&&(h=t("PIPELINE_CRON_DESC",{nextTime:(0,S.getLocalTime)(m.nextTime).format("YYYY-MM-DD HH:mm:ss")}),n.setState({cronMessage:{message:h}}),l());case 11:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),n.handleScrollToBottom=function(){var e=n.props.formTemplate,t=e.devopsName,a=e.cluster,r=e.devops,l=n.pipelineStore.list,o=l.total,u=l.page;o<=l.limit*u||n.pipelineStore.fetchList({devopsName:t,cluster:a,devops:r,filter:"no-folders",page:u+1})},n.renderDisCarder=function(){var e=n.props.formTemplate,a=(0,h.default)(e,"multi_branch_pipeline");if(e.enable_discarder)return(0,v.default)(a)?y.default.createElement("div",{className:k.default.wrapper},y.default.createElement(g.Columns,null,y.default.createElement(g.Column,null,y.default.createElement(g.Form.Item,{label:t("BUILD_RECORD_RETENTION_PERIOD_DAYS"),desc:t("BUILD_RECORD_RETENTION_PERIOD_DAYS_DESC")},y.default.createElement(g.Input,{name:"".concat(n.prefix,".discarder.days_to_keep"),defaultValue:"7"}))),y.default.createElement(g.Column,null,y.default.createElement(g.Form.Item,{label:t("MAXIMUM_BUILD_RECORDS"),desc:t("MAXIMUM_BUILD_RECORDS_DESC")},y.default.createElement(g.Input,{name:"".concat(n.prefix,".discarder.num_to_keep"),defaultValue:"10"}))))):y.default.createElement("div",{className:k.default.wrapper},y.default.createElement(g.Columns,null,y.default.createElement(g.Column,null,y.default.createElement(g.Form.Item,{label:t("BRANCH_RETENTION_PERIOD_DAYS"),desc:t("BRANCH_RETENTION_PERIOD_DAYS_DESC")},y.default.createElement(g.Input,{name:"".concat(n.prefix,".discarder.days_to_keep"),defaultValue:"7"}))),y.default.createElement(g.Column,null,y.default.createElement(g.Form.Item,{label:t("MAXIMUM_BRANCHES"),desc:t("MAXIMUM_BRANCHES_DESC")},y.default.createElement(g.Input,{name:"".concat(n.prefix,".discarder.num_to_keep"),defaultValue:"5"})))))},n.scmStore=new C.default,n.pipelineStore=new T.default,n.state={cronMessage:{}},n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.formTemplate,t=e.devopsName,a=e.cluster,r=e.devops;this.pipelineStore.fetchList({devopsName:t,devops:r,cluster:a,filter:"no-folders"})}},{key:"renderTip",value:function(e){return y.default.createElement(g.Tooltip,{content:e,placement:"right"},y.default.createElement(g.Icon,{name:"question",className:"margin-l12"}))}},{key:"renderNoSource",value:function(){var e=this.props.formTemplate,a=(0,h.default)(e,"enable_timer_trigger");return y.default.createElement("div",null,y.default.createElement(g.Form.Item,{desc:t("NO_CONCURRENT_BUILD_DESC")},y.default.createElement(g.Checkbox,{name:"".concat(this.prefix,".disable_concurrent"),checked:(0,h.default)(e,"".concat(this.prefix,".disable_concurrent")),onChange:this.handleChange("".concat(this.prefix,".disable_concurrent"))},t("NO_CONCURRENT_BUILDS"))),y.default.createElement("div",{className:"h6"},y.default.createElement(y.default.Fragment,null,t("BUILD_PARAMETERS"),this.renderTip(t("BUILD_PARAMETERS_TIP")))),y.default.createElement(R.default,{name:"".concat(this.prefix,".parameters"),formTemplate:this.props.formTemplate}),y.default.createElement("div",{className:"h6"},t("BUILD_TRIGGER")),y.default.createElement(g.Form.Item,null,y.default.createElement(g.Checkbox,{name:"enable_timer_trigger",checked:a,onChange:this.handleChange("enable_timer_trigger")},t("BUILD_PERIODICALLY"),this.renderTip(t("BUILD_PERIODICALLY_TIP")))),a&&y.default.createElement("div",{className:k.default.wrapper},y.default.createElement(g.Columns,null,y.default.createElement(g.Column,null,y.default.createElement(g.Form.Item,{label:t("SCHEDULE"),desc:this.state.cronMessage.message||t.html("PIPELINE_SCHEDULE_DESC"),tip:t("tips_timer_trigger"),rules:[{validator:this.checkCronScript}]},y.default.createElement(g.Input,{name:"".concat(this.prefix,".timer_trigger.cron"),placeholder:" ",onChange:this.removeCronError}))))))}},{key:"renderGitOptions",value:function(){var e=this.props.formTemplate,a="".concat(this.scmPrefix,".git_clone_option.shallow"),r=(0,h.default)(e,a);return y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"h6"},t("CLONE_SETTINGS")),y.default.createElement(g.Form.Item,null,y.default.createElement(g.Checkbox,{checked:r,name:a,onChange:this.handleChange(a)},t("ENABLE_SHALLOW_CLONE"))),r&&y.default.createElement("div",{className:k.default.wrapper},y.default.createElement(g.Columns,null,y.default.createElement(g.Column,null,y.default.createElement(g.Form.Item,{label:t("CLONE_DEPTH")},y.default.createElement(_.default,{name:"".concat(this.scmPrefix,".git_clone_option.depth"),defaultValue:1}))),y.default.createElement(g.Column,null,y.default.createElement(g.Form.Item,{label:t("CLONE_TIMEOUT_PERIOD")},y.default.createElement(_.default,{name:"".concat(this.scmPrefix,".git_clone_option.timeout"),defaultValue:20}))))),y.default.createElement("div",{className:"h6"},"Webhook"),y.default.createElement(g.Form.Item,{label:t("WEBHOOK_PUSH_URL"),desc:t("WEBHOOK_PUSH_DESC")},y.default.createElement(g.Input,{value:this.webhookUrl,disabled:!0})))}},{key:"renderRegFilter",value:function(){var e=this.props.formTemplate.enable_regex_filter;return y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"h6"},t("FILTER_BY_REGEX")),y.default.createElement(g.Form.Item,null,y.default.createElement(g.Checkbox,{checked:e,name:"enable_regex_filter",onChange:this.handleChange("enable_regex_filter")},t("FILTER_BY_REGEX_DESC"))),e&&y.default.createElement("div",{className:k.default.wrapper},y.default.createElement(g.Form.Item,{label:t("REGEX")},y.default.createElement(g.Input,{name:"".concat(this.scmPrefix,".regex_filter"),defaultValue:".*"}))))}},{key:"renderWithSource",value:function(){var e=this.props.formTemplate,a=(0,h.default)(e,"multi_branch_pipeline.source_type",""),r=e.enable_timer_trigger,n=e.enable_multibranch_job_trigger,l=this.pipelineStore.list.isLoading,o=["git","github","bitbucket_server"].includes(a),u=["git","github","bitbucket_server","gitlab"].includes(a);return y.default.createElement("div",null,"git"!==a&&"svn"!==a?y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"h6"},t("STRATEGY_SETTINGS")),y.default.createElement("div",{className:k.default.wrapper},y.default.createElement(g.Form.Item,null,y.default.createElement(D.default,{sourceType:a,name:"multi_branch_pipeline.".concat(a,"_source")})))):null,u?this.renderRegFilter():null,y.default.createElement("div",{className:"h6"},t("SCRIPT_PATH")),y.default.createElement(g.Form.Item,{label:t("PATH"),desc:t("SCRIPT_PATH_DESC")},y.default.createElement(g.Input,{name:"".concat(this.prefix,".script_path"),defaultValue:"Jenkinsfile"})),y.default.createElement("div",{className:"h6"},t("SCAN_TRIGGER")),y.default.createElement(g.Form.Item,null,y.default.createElement(g.Checkbox,{checked:r,name:"enable_timer_trigger",onChange:this.handleChange("enable_timer_trigger")},t("SCAN_PERIODICALLY"),this.renderTip(t("TIME_TRIGGER_DESC")))),r&&y.default.createElement("div",{className:k.default.wrapper},y.default.createElement(g.Form.Item,{label:t("SCAN_INTERVAL")},y.default.createElement(g.Select,{name:"".concat(this.prefix,".timer_trigger.interval"),options:O.TIMETRIGGERINTERVALS,defaultValue:"svn"===a||"single_svn"===a?"600000":"3600000"}))),y.default.createElement("div",{className:"h6"},t("BUILD_TRIGGER")),y.default.createElement(g.Form.Item,null,y.default.createElement(g.Checkbox,{checked:n,name:"enable_multibranch_job_trigger",onChange:this.handleChange("enable_multibranch_job_trigger")},t("PIPELINE_EVENT_TRIGGER"))),n&&y.default.createElement("div",{className:k.default.wrapper},y.default.createElement(g.Columns,null,y.default.createElement(g.Column,null,y.default.createElement(g.Form.Item,{label:t("WHEN_CREATE_PIPELINE"),desc:t("WHEN_CREATE_PIPELINE_DESC")},y.default.createElement(g.Select,{name:"".concat(this.prefix,".multibranch_job_trigger.create_action_job_to_trigger"),isLoading:l,isLoadingAtBottom:!0,onMenuScrollToBottom:this.handleScrollToBottom,options:this.pipelineLists,placeholder:t("SELECT_PIPELINE_SCAP")}))),y.default.createElement(g.Column,null,y.default.createElement(g.Form.Item,{label:t("WHEN_DELETE_PIPELINE"),desc:t("WHEN_DELETE_PIPELINE_DESC")},y.default.createElement(g.Select,{name:"".concat(this.prefix,".multibranch_job_trigger.delete_action_job_to_trigger"),isLoading:l,isLoadingAtBottom:!0,onMenuScrollToBottom:this.handleScrollToBottom,options:this.pipelineLists,placeholder:t("SELECT_PIPELINE_SCAP")}))))),o?this.renderGitOptions():null)}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=(0,h.default)(r,"multi_branch_pipeline");return y.default.createElement("div",{className:k.default.advance},y.default.createElement(g.Form,{data:r,ref:a},y.default.createElement("div",{className:"h6"},(0,v.default)(n)?t("BUILD_SETTINGS"):t("BRANCH_SETTINGS")),y.default.createElement(g.Form.Item,null,y.default.createElement(g.Checkbox,{checked:r.enable_discarder,name:"enable_discarder",onChange:this.handleChange("enable_discarder")},(0,v.default)(n)?t("DELETE_OUTDATED_BUILD_RECORDS"):t("DELETE_OUTDATED_BRANCHES"),this.renderTip((0,v.default)(n)?t("DELETE_OUTDATED_BUILD_RECORDS_TIP"):t("DELETE_OUTDATED_BRANCHES_TIP")))),this.renderDisCarder(),(0,v.default)(n)?this.renderNoSource():this.renderWithSource()))}},{key:"sourceType",get:function(){var e=this.props.formTemplate;return(0,h.default)(e,"multi_branch_pipeline.source_type","")}},{key:"prefix",get:function(){return this.sourceType?"multi_branch_pipeline":"pipeline"}},{key:"scmPrefix",get:function(){return"multi_branch_pipeline.".concat(O.REPO_KEY_MAP[this.sourceType])}},{key:"webhookUrl",get:function(){var e=this.props.formTemplate,t=(0,h.default)(e,"".concat(this.scmPrefix,".url"),""),a=(0,h.default)(e,"".concat(this.scmPrefix,".api_uri"),""),r=(0,h.default)(e,"".concat(this.scmPrefix,".owner"),""),n=(0,h.default)(e,"".concat(this.scmPrefix,".repo"),""),l="".concat(a,"/scm/").concat(r,"/").concat(n,".git");switch(this.sourceType){case"bitbucket_server":return"".concat(window.location.protocol,"//").concat(window.location.host,"/devops_webhook/git/?url=").concat(l);case"github":return"".concat(window.location.protocol,"//").concat(window.location.host,"/devops_webhook/").concat(this.sourceType,"/");default:return"".concat(window.location.protocol,"//").concat(window.location.host,"/devops_webhook/git/?url=").concat(t)}}},{key:"pipelineLists",get:function(){return this.pipelineStore.list.data.map((function(e){return{label:e.name,value:e.fullName}}))}}]),r}(y.default.Component),o.defaultProps={type:"create"},l=u))||l;a.default=P},function(e,t,a){e.exports={wrapper:"_28_VGcUL3ubpH0qmzQAKfV",header:"_3-qLqDcljl_m43YCxIxJZ3",content:"_12apY-AeTVbwQd6ffG8WxD",itemWrapper:"_1LRPWkPDcmmt4VdZRlrFLS",itemTitle:"_1LBhdFwEbnrlSDmT97sxs-",delete:"_5TmTBPrXcOuz8pGbj7JH2"}},function(e,t,a){e.exports={wrapper:"_9Yk0qNR2FCG_MPOHVb5JL",header:"_2yTyFqoCxQzx3hRKBg6rRu",content:"T-SCFAAauUJ-x1ldEYntT",itemWrapper:"_1_HVr5DcfYh3ao-5xi6WZV",itemTitle:"_17CzlSkNwriw1ibCqf5Bty",delete:"_26CIQvJti4RrsEj55MYDZc"}},,,,,,function(e,t,a){e.exports={templateParams:"_3OaPsWjDseZlyvzVyh4shI",container:"VCeY3AOEqowO64dK4tCg9",params:"_1ymcUpjfqsH5vqVTE3bgK",params_container:"_6gdEyFwcAl-pF3FJDq_0C",itemWrapper:"_2lQsvf23MK44IzuZh9-U2X",content:"_1hjO3TCR42KV3THqO7IDRX",empty:"_1aRxE-OINWHNU21zvG5fJG",icon:"_2DOKE0E0jHLnIbDlIwsSrX"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.FEDERATED_PROJECT_UNSOPPORT_QUOTA=t.QUOTAS_KEY_MODULE_MAP=t.RESERVED_MODULES=void 0;var n=r(a(21)),l=a(58);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.RESERVED_MODULES=["limits.cpu","requests.cpu","limits.memory","requests.memory"];var c=Object.entries(l.QUOTAS_MAP).reduce((function(e,t){return u(u({},e),{},(0,n.default)({},t[1].name,t[0]))}),{});t.QUOTAS_KEY_MODULE_MAP=c;t.FEDERATED_PROJECT_UNSOPPORT_QUOTA=["daemonsets","jobs","cronjobs"]},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(5),p=n(r(833)),m=r(25),h=n(r(274));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=v(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,d.toJS)(o.selectedRowKeys),c=u?u.filter((function(e){return e!==l.uid})):"";r(e),u&&o.setSelectRowKeys(c)},t.state={formData:(0,p.default)((0,d.toJS)(e.detail._originData||e.detail))},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,p.default)((0,d.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=this.state.formData;return i.default.createElement(h.default.Form,{data:l,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r},i.default.createElement(m.Form.Item,{label:t("NAME")},i.default.createElement(m.Input,{name:"metadata.name",disabled:!0})),i.default.createElement(m.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},i.default.createElement(m.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),i.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(m.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}}]),r}(i.default.Component);a.default=E,E.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},E.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(68)),d=n(r(32)),p=n(r(0)),m=n(r(1)),h=r(5),v=n(r(3)),E=n(r(274)),y=n(r(870)),b=n(r(2347));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=g(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.props,a=e.onOk,r=e.onCancel,n=e.store,l=e.detail,o=t.editor.current.getData(),u=n.list,c=(0,h.toJS)(u.selectedRowKeys),s=c?c.filter((function(e){return e!==l.uid})):"";(0,f.default)(o)?r():(a(o),c&&u.setSelectRowKeys(s))},t.state={value:e.store?null:e.detail},t.editor=p.default.createRef(),t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&!e.visible&&this.init(this.props)}},{key:"componentDidMount",value:function(){this.init(this.props)}},{key:"init",value:function(e){var t=this,a=e.yaml,r=e.detail,n=e.store;if(a)return this.setState({value:a});r&&r.name&&n.fetchDetail(r).then((function(e){var a=n.deployedScheduleTemplate;(0,d.default)(a)?t.setState({value:e._originData}):t.setState({value:[e._originData,a]})}))}},{key:"render",value:function(){var e=this.props,a=e.readOnly,r=e.visible,n=e.onCancel,o=e.isSubmitting,u=a?t("VIEW_YAML"):t("EDIT_YAML"),c=a?"eye":"pen";return p.default.createElement(E.default,{icon:c,title:u,bodyClassName:(0,v.default)((0,l.default)({},b.default.readOnly,a)),onOk:this.handleOk,onCancel:n,okText:t("OK"),visible:r,closable:a,hideFooter:a,isSubmitting:o,fullScreen:!0},this.state.value&&p.default.createElement(y.default,{ref:this.editor,editorClassName:b.default.editor,value:this.state.value,readOnly:a}))}}]),r}(p.default.Component);a.default=_,_.propTypes={detail:m.default.object,yaml:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool,readOnly:m.default.bool},_.defaultProps={visible:!1,isSubmitting:!1,readOnly:!1,detail:{},onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(21)),s=n(r(109)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(16)),v=n(r(185)),E=n(r(290)),y=n(r(849)),b=n(r(294)),g=n(r(281)),_=n(r(0)),S=n(r(3)),O=r(70),C=n(r(1)),T=n(r(274)),R=n(r(275)),D=n(r(653)),k=r(2350),N=n(r(2351)),P=n(r(1340));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var A=(0,O.observer)((u=o=function(e){(0,d.default)(r,e);var a=M(r);function r(e){var t;(0,i.default)(this,r),(t=a.call(this,e)).handleOk=function(){t.props.onOk((0,g.default)([].concat((0,s.default)(t.state.roleTemplates),["role-template-view-basic"])))},t.handleTabChange=function(e){var a=e.currentTarget.dataset.module;t.setState({currentModule:a})},t.handleCheckChange=function(e){var a=t.state,r=a.currentModule,n=a.roleModules,l=a.groupedTemplates,o=n.find((function(e){return e.name===r}));o&&(o.state=l[r].some((function(t){return e.includes(t.name)}))?"ENABLED":"NOT_ENABLED"),t.setState({roleTemplates:e})};var n=(0,E.default)(t.props.roleTemplates,"name"),l=e.formTemplate.roleTemplates||[],o=(0,v.default)(k.ROLE_MODULES[e.module]).filter((function(e){return!e.hide})).map((function(e){return w(w({},e),{},{state:l.some((function(t){return(0,h.default)(n[t],'annotations["iam.kubesphere.io/module"]')===e.name}))?"ENABLED":"NOT_ENABLED"})}));return t.state={roleTemplates:l,roleModules:o,roleTemplatesMap:n,currentModule:o[0].name,groupedTemplates:(0,y.default)(t.props.roleTemplates,'annotations["iam.kubesphere.io/module"]')},t}return(0,f.default)(r,[{key:"renderTabs",value:function(){var e=this,a=this.state,r=a.roleModules,n=a.currentModule;return _.default.createElement("div",{className:P.default.tabs},_.default.createElement("div",{className:P.default.title},t("CATEGORIES")),_.default.createElement("div",{className:P.default.tabsWrapper},r.map((function(a){return _.default.createElement("div",{key:a.name,className:(0,S.default)(P.default.tab,(0,c.default)({},P.default.enabled,n===a.name)),onClick:e.handleTabChange,"data-module":a.name},_.default.createElement(R.default,{icon:a.icon,title:t("PERMIGROUP_".concat(a.name.toUpperCase().replace(/[^A-Z]+/g,"_"))),description:n===a.name?t("CURRENT"):"ENABLED"===a.state?t("AUTHORIZED"):t("UNAUTHORIZED")}),_.default.createElement(D.default,{className:P.default.indicator,type:"ENABLED"===a.state?"running":"disabled"}))}))))}},{key:"renderContent",value:function(){var e=this,a=this.state,r=a.groupedTemplates,n=a.roleTemplates,l=a.roleTemplatesMap,o=a.currentModule,u=(0,b.default)(r[o]||[],"aliasName");return _.default.createElement("div",{className:P.default.content},_.default.createElement("div",{className:P.default.title},t("PERMISSION_PL")),_.default.createElement("div",{className:P.default.contentWrapper},u.map((function(t){return _.default.createElement(N.default,{key:t.name,data:t,roleTemplates:n,roleTemplatesMap:l,onChange:e.handleCheckChange})}))))}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.onCancel,l=e.isSubmitting;return _.default.createElement(T.default,{title:a||t("EDIT_PERMISSIONS"),icon:"role",onCancel:n,onOk:this.handleOk,visible:r,isSubmitting:l,fullScreen:!0},_.default.createElement("div",{className:P.default.wrapper},this.renderTabs(),this.renderContent()))}}]),r}(_.default.Component),o.propTypes={roleTemplates:C.default.array,formTemplate:C.default.object,visible:C.default.bool,onOk:C.default.func,onCancel:C.default.func,isSubmitting:C.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=A},function(e,t,a){e.exports={wrapper:"_1zXt7JS-5wTeq2O3Yyq-JL",title:"_2R6_3gQaWfGc-54ApbjvK6",tabs:"_1sRMn6-7VQwsP-i502ZCQI",tabsWrapper:"_13UODiQ-dkFqD1c7buDIbo",tab:"_13nyoRlsA_NwzkmCiVg_cF",enabled:"_1l3zLl936dTPcn3AIOkq-x",indicator:"_1DujT8XDf3EuRJJ2LydBom",content:"_1tK-XesSh-xcD5WpN9xJnR",contentWrapper:"_29j0loE5wpYw0YS-LWiFTg",checkItem:"_3rhvJqZScieMGWwx8WyyK4",extra:"_1lZdigIdMb29HKGS7xLlDe",tag:"LujNwnnNKKpJOW-0bi7Yj"}},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(136)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(16)),p=n(r(73)),m=n(r(68)),h=n(r(0)),v=r(25),E=r(37),y=r(58),b=n(r(2363)),g=n(r(2365)),_=n(r(2367)),S=n(r(2368));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var R=["Opaque","kubernetes.io/tls","kubernetes.io/dockerconfigjson","kubernetes.io/basic-auth"],D=function(e){(0,s.default)(r,e);var a=T(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={type:(0,d.default)(e.fedFormTemplate,"type",""),state:"",selectDataKey:""},e.imageRegistryRef=h.default.createRef(),e.getTypeOptions=function(){return[{label:t("DEFAULT"),value:"Opaque"},{label:t("TLS_INFORMATION"),value:"kubernetes.io/tls"},{label:t("IMAGE_REGISTRY_INFORMATION"),value:"kubernetes.io/dockerconfigjson"},{label:t("USERNAME_PASSWORD"),value:"kubernetes.io/basic-auth"}]},e.handleTypeChange=function(t){t&&!R.includes(t)||(0,p.default)(e.fedFormTemplate,"data",{}),e.setState({type:t})},e.dataValidator=function(e,a,r){return(0,m.default)(a)?r():Object.entries(a).some((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return(0,E.hasChinese)(a)||(0,E.hasChinese)(r)}))?r({message:t("SECRET_NO_CHINESE_CODE_DESC")}):void r()},e.imageValidator=function(t,a,r){if(e.imageRegistryRef.current.validate())return r()},e.handleData=function(t){var a=e.state.selectDataKey,r=(0,d.default)(e.fedFormTemplate,"data",{});a&&delete r[a],(0,p.default)(e.fedFormTemplate,"data",C(C({},r),t)),e.hideDataForm()},e.showDataForm=function(){e.setState({state:"data",selectDataKey:""})},e.hideDataForm=function(){e.setState({state:"",selectDataKey:""})},e.handleDataItemEdit=function(t){e.setState({state:"data",selectDataKey:t})},e}return(0,c.default)(r,[{key:"renderDataForm",value:function(){var e=this.state.selectDataKey,t=(0,d.default)(this.fedFormTemplate,"data",{});return h.default.createElement(g.default,{detail:t,selectKey:e,onOk:this.handleData,onCancel:this.hideDataForm})}},{key:"renderDefault",value:function(){return h.default.createElement(v.Form.Item,{label:t("DATA"),rules:[{required:!0,message:t("ENTER_DATA_DESC")},{validator:this.dataValidator}]},h.default.createElement(b.default,{name:"data",onEdit:this.handleDataItemEdit,onAdd:this.showDataForm}))}},{key:"renderTLS",value:function(){return h.default.createElement("div",{key:"tls",className:"margin-t8"},h.default.createElement(v.Form.Item,{label:t("CERTIFICATE"),rules:[{required:!0,message:t("CREDENTIAL_NAME_EMPTY_DESC")},{validator:this.dataValidator}]},h.default.createElement(_.default,{name:"data['tls.crt']"},h.default.createElement(v.TextArea,{rows:"6",resize:!0}))),h.default.createElement(v.Form.Item,{label:t("PRIVATE_KEY_TCAP"),rules:[{required:!0,message:t("ENTER_PRIVATE_KEY_DESC")},{validator:this.dataValidator}]},h.default.createElement(_.default,{name:"data['tls.key']"},h.default.createElement(v.TextArea,{rows:"6",resize:!0}))))}},{key:"renderImage",value:function(){var e=this.props,t=e.cluster,a=e.isFederated,r=(0,d.default)(this.formTemplate,"metadata"),n=r.name,l=r.namespace;return h.default.createElement("div",{key:"image",className:"margin-t8"},h.default.createElement(v.Form.Item,{rules:[{validator:this.imageValidator}]},h.default.createElement(_.default,{name:"data['.dockerconfigjson']"},h.default.createElement(S.default,{fedFormTemplate:this.fedFormTemplate,cluster:t,namespace:l,isFederated:a,screatName:n,ref:this.imageRegistryRef}))))}},{key:"renderBasicAuth",value:function(){return h.default.createElement("div",{key:"basic",className:"margin-t8"},h.default.createElement(v.Form.Item,{label:t("USERNAME"),rules:[{required:!0,message:t("USERNAME_EMPTY_DESC")},{validator:this.dataValidator}]},h.default.createElement(_.default,{name:"data.username"},h.default.createElement(v.Input,{autoComplete:"nope"}))),h.default.createElement(v.Form.Item,{label:t("PASSWORD"),rules:[{required:!0,message:t("PASSWORD_EMPTY_DESC")},{validator:this.dataValidator}]},h.default.createElement(_.default,{name:"data.password"},h.default.createElement(v.InputPassword,{type:"password",autoComplete:"new-password"}))))}},{key:"renderContent",value:function(){var e=null;switch(this.state.type){case"Opaque":e=this.renderDefault();break;case"kubernetes.io/tls":e=this.renderTLS();break;case"kubernetes.io/dockerconfigjson":e=this.renderImage();break;case"kubernetes.io/basic-auth":e=this.renderBasicAuth();break;default:e=this.renderDefault()}return e}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.disableSelect;return"data"===this.state.state?this.renderDataForm():h.default.createElement(v.Form,{data:this.fedFormTemplate,ref:a},h.default.createElement(v.Form.Item,{label:t("TYPE"),desc:r?"":t("SECRET_TYPE_DESC")},h.default.createElement(v.Select,{name:"type",options:this.getTypeOptions(),onChange:this.handleTypeChange,placeholder:" ",disabled:r,searchable:!0})),this.renderContent())}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,y.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,d.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(h.default.Component);a.default=D},function(e,t,a){e.exports={wrapper:"_3q9ZPljm8JK-39rDuXZgdr",label:"_2PJR1P70-qnZ16hFmDUchO",control:"E8wY6oMs417J6WSOmAX2U",desc:"Ds9TCkSEvwwDt_0FrmqoE",requiredIcon:"_2Qu1AVZafJ8A1J4T7WmNMt",tip:"_2PrZvRpUWImjuzMe8HfkOE",password:"_3M7PW0eiW35GKVm_PzsTGI"}},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=r(25),p=r(58);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement("div",null,i.default.createElement(d.Form,{data:this.formTemplate,ref:e},i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:p.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})},{validator:this.nameValidator}]},i.default.createElement(d.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},i.default.createElement(d.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))))))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,p.MODULE_KIND_MAP[a],t)}}]),r}(i.default.Component);a.default=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(290)),m=r(58),h=r(25),v=n(r(1066)),E=n(r(2572));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){(0,c.default)(r,e);var a=y(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.formRef,n=a.projectDetail,o=a.editModalTitle,u=a.title,c=a.formProps,s=(0,p.default)(n.clusters,"name");return f.default.createElement(h.Form,(0,l.default)({data:this.formTemplate.spec,ref:r},c),f.default.createElement(h.Form.Group,{label:t("STORAGE_SETTINGS"),desc:t("CLUSTER_VOLUME_DIFF_DESC"),checkable:!0},f.default.createElement(v.default,{clusters:this.clusters,clustersDetail:s,namespace:this.namespace},(function(t){return f.default.createElement(E.default,(0,l.default)({},t,{formTemplate:e.formTemplate,editModalTitle:o,title:u},c))}))))}},{key:"namespace",get:function(){return(0,d.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,m.MODULE_KIND_MAP[a],t)}},{key:"clusters",get:function(){return(0,d.default)(this.formTemplate,"spec.placement.clusters",[])}}]),r}(f.default.Component);a.default=b},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c,s=n(r(49)),i=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(21)),E=l(r(0)),y=n(r(16)),b=n(r(73)),g=n(r(826)),_=r(5),S=r(70),O=n(r(1106)),C=n(r(3)),T=r(25),R=n(r(1)),D=n(r(854)),k=n(r(874)),N=n(r(763)),P=r(37),I=r(58),w=n(r(2579));function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var x=(0,S.observer)((c=u=function(e){(0,p.default)(r,e);var a=j(r);function r(){var e;(0,f.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).snapshotStore=new D.default,e.snapshotClassStore=new k.default,e.volumeStore=new N.default,e.fetchSnapshots=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:10},a=e.props,r=a.namespace,n=a.cluster;e.snapshotStore.fetchList(A(A({},t),{},{namespace:r,cluster:n,status:"ready"})).then((function(){var t=e.snapshotStore.list.data,a=(0,y.default)(t,"[0].name");a&&((0,b.default)(e.context.formData,"spec.dataSource.name",a),e.handeSnapshotChange(a))}))},e.fetchStorageClassDetail=function(){e.storageClassName&&e.storageClassName!==e.snapshotClassStore.detail.name&&e.snapshotClassStore.fetchDetail({cluster:e.props.cluster,name:e.storageClassName})},e.getSnapshotSourceVolumeInfo=function(t){var a=e.props,r=a.namespace,n=a.cluster;return e.volumeStore.fetchDetail({name:t,namespace:r,cluster:n})},e.handeSnapshotChange=function(){var t=(0,i.default)(s.default.mark((function t(a){var r,n;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.snapshotStore.list.data,n=(0,_.toJS)(r).find((function(e){return e.name===a}))||{},t.next=4,e.getSnapshotSourceVolumeInfo(n.snapshotSourceName);case 4:(0,b.default)(e.context.formData,"spec.resources.requests.storage",n.restoreSize),(0,b.default)(e.context.formData,"spec.storageClassName",e.volumeStore.detail.storageClassName),(0,b.default)(e.context.formData,"spec.dataSource.kind","VolumeSnapshot"),(0,b.default)(e.context.formData,"spec.dataSource.apiGroup","snapshot.storage.k8s.io"),e.fetchStorageClassDetail();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.storageClassName&&this.fetchStorageClassDetail()}},{key:"render",value:function(){var e=this.snapshotStore.list,a=e.data,r=e.total,n=e.page,l=e.isLoading,o=this.snapshotClassStore.isLoading,u=this.supportedAccessModes;return E.default.createElement(E.default.Fragment,null,E.default.createElement(T.Form.Item,{label:t("Volume Snapshot"),rules:[{required:!0,message:t("PARAM_REQUIRED")}],className:w.default.snapshotContainer},E.default.createElement(L,{className:w.default.snapshots,name:"spec.dataSource.name",snapshots:(0,_.toJS)(a),total:r,page:n,loading:l,onChange:this.handeSnapshotChange,onFetch:this.fetchSnapshots})),this.storageClassName&&E.default.createElement(T.Loading,{spinning:o},E.default.createElement(T.Form.Item,{className:"margin-t12",label:t("Access Mode"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},E.default.createElement(O.default,{name:"spec.accessModes[0]",defaultValue:(0,y.default)(u,"[0]")||Object.keys(I.ACCESS_MODES)[0],supportedAccessModes:u}))))}},{key:"storageClassName",get:function(){return(0,y.default)(this.context.formData,"spec.storageClassName")}},{key:"supportedAccessModes",get:function(){return(0,P.safeParseJSON)((0,y.default)(this.snapshotClassStore.detail,'annotations["storageclass.kubesphere.io/supported-access-modes"]',""))}}]),r}(E.Component),u.contextTypes={formData:R.default.object},o=c))||o;function L(e){var a=e.onChange,r=e.snapshots,n=e.total,l=e.page,o=e.loading,u=e.onFetch,c=e.value,s=e.className;return E.default.createElement(g.default,{className:s,data:r,total:n,page:l,loading:o,onFetch:u},r.map((function(e){return E.default.createElement("div",{className:(0,C.default)((0,v.default)({},w.default.selected,e.name===c),w.default.snapshot),key:e.uid,onClick:function(){return a(e.name)}},E.default.createElement(T.Icon,{name:"snapshot",type:e.name===c?"light":"dark",size:40}),E.default.createElement("div",null,E.default.createElement("h3",null,e.name),E.default.createElement("p",null,e.snapshotClassName)),E.default.createElement("div",null,E.default.createElement("h3",null,e.restoreSize||0),E.default.createElement("p",null,t("CAPACITY"))),E.default.createElement("div",null,E.default.createElement("h3",null,e.createTime),E.default.createElement("p",null,t("CREATION_TIME_TCAP"))))})))}a.default=x},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=n(r(73)),p=n(r(738)),m=r(58),h=r(25),v=n(r(636)),E=n(r(938)),y=n(r(1375));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=[{icon:"snapshot",value:!0,get label(){return t("CREATE_VOLUME_BY_SNAPSHOT")},get description(){return t("SELECT_SNAPSHOT_TO_CREATE_VOLUME")}},{icon:"database",value:!1,get label(){return t("CREATE_VOLUME_BY_STORAGE_CLASS")},get description(){return t("SELECT_STORAGE_CLASS_CREATE_VOLUME")}}],_=function(e){(0,u.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={fromSnapshot:!!(0,f.default)(e.formTemplate,"spec.dataSource.name")},e.handleChange=function(t){t!==e.state.fromSnapshot&&((0,p.default)(e.fedFormTemplate,"spec.storageClassName"),(0,d.default)(e.fedFormTemplate,"spec.accessModes",[]),(0,d.default)(e.fedFormTemplate,"spec.dataSource",{}),(0,d.default)(e.fedFormTemplate,"spec.resources.requests.storage","0Gi"),e.setState({fromSnapshot:t}))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.isFederated,n=e.cluster,l=this.state.fromSnapshot;return i.default.createElement(h.Form,{data:this.fedFormTemplate,ref:a},!r&&i.default.createElement(h.Form.Item,{label:t("CREATION_METHOD")},i.default.createElement(v.default,{value:l,options:g,onChange:this.handleChange})),l?i.default.createElement(y.default,{namespace:(0,f.default)(this.formTemplate,"metadata.namespace"),cluster:n}):i.default.createElement(E.default,{cluster:n}))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,m.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,f.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(i.default.Component);a.default=_},,function(e,t,a){e.exports={body:"_3rLLKpT8IgpcqWhzTXPWzb",footer:"_1FN6kDx_4OYTrAeMzmz6lJ",nodes:"_2K0nFAD8XjT_-g3jP0gfYz",item:"_2szAjgdbfftm9dnv4On9sC",selected:"_4IuUl9x4GeLgtthhM3Cby",ring:"_2mjDKl7noCA52Dkwojasqj",name:"sgFMlcJBkaU6RLJu0NSHo",taints:"_3VFxaVUiKAEp4AZAT4_tG5"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=r(25),p=n(r(740)),m=r(58);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement(d.Form,{data:this.formTemplate,ref:e},i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("MAXIMUM_RETRIES"),desc:t("MAXIMUM_RETRIES_DESC")},i.default.createElement(p.default,{min:0,name:"".concat(this.prefix,"backoffLimit"),integer:!0})),i.default.createElement(d.Form.Item,{label:t("PARALLEL_PODS"),desc:t("PARALLEL_PODS_DESC")},i.default.createElement(p.default,{min:0,name:"".concat(this.prefix,"parallelism"),integer:!0}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("COMPLETE_PODS"),desc:t("COMPLETE_PODS_DESC")},i.default.createElement(p.default,{min:0,name:"".concat(this.prefix,"completions"),integer:!0})),i.default.createElement(d.Form.Item,{label:t("MAXIMUM_DURATION"),desc:t("MAXIMUM_DURATION_DESC")},i.default.createElement(p.default,{min:0,name:"".concat(this.prefix,"activeDeadlineSeconds"),integer:!0})))))}},{key:"prefix",get:function(){return this.props.prefix||"spec."}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,m.MODULE_KIND_MAP[a],t)}}]),r}(i.default.Component);a.default=v},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=r(70),p=r(25),m=n(r(875));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=(0,d.observer)(l=function(e){(0,c.default)(r,e);var a=h(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"getRestartPolicyOptions",value:function(){return[{label:t("RESTART_POLICY_NEVER_DESC"),value:"Never"},{label:t("RESTART_POLICY_ONFAILURE_DESC"),value:"OnFailure"}]}},{key:"renderRestartPolicy",value:function(){return f.default.createElement(p.Form.Item,{label:t("RESTART_POLICY"),tip:t.html("RESTART_POLICY_TIP"),desc:t("RESTART_POLICY_DESC")},f.default.createElement(p.Select,{name:"".concat(this.prefix,"spec.restartPolicy"),options:this.getRestartPolicyOptions()}))}},{key:"render",value:function(){var e=this.props.formRef,t=this.state,a=t.showContainer,r=t.selectContainer;return a?this.renderContainerForm(r):f.default.createElement(p.Form,{data:this.formTemplate,ref:e},this.renderRestartPolicy(),this.renderContainerList())}}]),r}(m.default))||l;a.default=v},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var r={"./PV.js":1551,"./alerting.js":1553,"./application.js":1662,"./cd.js":1830,"./cluster.js":1843,"./codeRepo.js":1884,"./configmap.js":1897,"./custom.monitoring.js":1905,"./devops.credential.js":2017,"./devops.js":2018,"./federated.js":2025,"./gateways.js":2049,"./group.js":2055,"./imagebuilder.js":2056,"./index.js":712,"./log.collection.js":2062,"./member.js":2070,"./network.js":2075,"./node.js":2096,"./openpitrix.js":2114,"./pipeline.js":2260,"./project.js":2330,"./resource.delete.js":2343,"./resource.edit.js":2346,"./role.js":2348,"./router.js":2354,"./secret.js":2361,"./service.js":2372,"./serviceaccount.js":2385,"./storageclass.js":2390,"./toolbox.js":2409,"./user.js":2554,"./volume.js":2566,"./workload.js":2586,"./workspace.js":2612};function n(e){var t=l(e);return a(t)}function l(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=l,e.exports=n,n.id=1550},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=r(25),i=n(r(274)),f=n(r(760));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={"pv.delete":{on:function(e){var a=e.store,r=e.detail,n=(e.type,e.rowKey,e.success),l=(0,c.default)(e,["store","detail","type","rowKey","success"]),o=i.default.open(p({onOk:function(){a.delete(r).then((function(){i.default.close(o),s.Notify.success({content:t("DELETE_SUCCESSFUL")}),n&&n()}))},store:a,modal:f.default,type:"PERSISTENT_VOLUME",resource:r.name},l))}},"pv.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,d=(0,c.default)(e,["store","success","rowKey"]),m=r.list,h=m.data,v=m.selectedRowKeys,E=h.filter((function(e){return v.includes(e[u])})).map((function(e){return{name:e.name,namespace:e.namespace}})),y=E.map((function(e){return e.name})),b=i.default.open(p({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],h.forEach((function(e){E.find((function(t){return t.name===e.name&&t.namespace===e.namespace}))&&a.push(r.delete(e))})),e.next=4,Promise.all(a);case 4:i.default.close(b),s.Notify.success({content:t("DELETE_SUCCESSFUL")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:y.join(", "),type:"PERSISTENT_VOLUME",modal:f.default,store:r},d))}}};a.default=m},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(185)),i=n(r(73)),f=n(r(738)),d=r(25),p=n(r(274)),m=n(r(766)),h=r(58),v=n(r(733)),E=n(r(822)),y=r(980),b=n(r(1570));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var _={"alerting.policy.create":{on:function(e){var a,r=e.store,n=e.cluster,_=e.namespace,S=e.module,O=e.success,C=e.detail,T=(0,c.default)(e,["store","cluster","namespace","module","success","detail"]),R=h.MODULE_KIND_MAP[S],D=C?(0,s.default)(C):v.default[S]({namespace:_}),k=p.default.open(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,s,m,h,v,b;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(o=a.ruleType,u=void 0===o?"template":o,s=a.resources,m=a.rules,a.namespace,h=a.kind,v=void 0===h?"Node":h,b=(0,c.default)(a,["ruleType","resources","rules","namespace","kind"]),"template"===u?(b.query=m.map((function(e){return(0,y.getQuery)({kind:v,rule:e,resources:s})})).join(" or "),(0,i.default)(b,"annotations.kind",v),(0,i.default)(b,"annotations.resources",JSON.stringify(s)),(0,i.default)(b,"annotations.rules",JSON.stringify(m))):((0,f.default)(b,"annotations.kind"),(0,f.default)(b,"annotations.resources"),(0,f.default)(b,"annotations.rules")),!C){e.next=10;break}return e.next=7,r.update(C,b);case 7:d.Notify.success({content:t("UPDATE_SUCCESSFUL")}),e.next=13;break;case 10:return e.next=12,r.create(b,{cluster:n,namespace:_});case 12:d.Notify.success({content:t("CREATE_SUCCESSFUL")});case 13:p.default.close(k),O&&O(),E.default.delete("".concat(S,"_create_form"));case 16:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),module:S,cluster:n,namespace:_,name:R,formTemplate:D,modal:m.default,steps:b.default,noCodeEdit:!0,isEdit:!!C,okBtnText:C?t("OK"):t("Create"),store:r},T))}}};a.default=_},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1571)),l=r(a(1572)),o=r(a(1660)),u=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"RULE_SETTINGS",component:l.default,required:!0},{title:"MESSAGE_SETTINGS",component:o.default,required:!0}];t.default=u},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(16)),p=r(70),m=r(25),h=r(58),v=r(836),E=n(r(1185));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=(0,p.observer)(l=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,namespace:e.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e.timeValidator=function(e,a,r){if(!/^[0-9]*$/.test(a.slice(0,-1)))return r({message:t("INVALID_TIME_DESC")});r()},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.isEdit,r=e.formRef,n=e.formTemplate,l=a?[]:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:h.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("LONG_NAME_DESC")})},{validator:this.nameValidator}];return f.default.createElement(m.Form,{data:n,ref:r},f.default.createElement(m.Columns,null,f.default.createElement(m.Column,null,f.default.createElement(m.Form.Item,{label:t("NAME"),desc:t("LONG_NAME_DESC"),rules:l},f.default.createElement(m.Input,{name:"name",onChange:this.handleNameChange,maxLength:253,readOnly:a}))),f.default.createElement(m.Column,null,f.default.createElement(m.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},f.default.createElement(m.Input,{name:"annotations.aliasName",maxLength:63})))),f.default.createElement(m.Columns,null,f.default.createElement(m.Column,null,f.default.createElement(m.Form.Item,{label:t("THRESHOLD_DURATION_MIN"),desc:t("ALERT_DURATION"),rules:[{validator:this.timeValidator}]},f.default.createElement(E.default,{name:"duration",unit:"m"},f.default.createElement(m.Select,{options:this.durationOptions,searchable:!0,placeholder:" "})))),f.default.createElement(m.Column,null,f.default.createElement(m.Form.Item,{label:t("SEVERITY")},f.default.createElement(m.Select,{name:"labels.severity",options:this.severities})))),f.default.createElement(m.Columns,null,f.default.createElement(m.Column,null,f.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},f.default.createElement(m.TextArea,{name:"annotations.description",maxLength:256})))))}},{key:"namespace",get:function(){return(0,d.default)(this.props.formTemplate,"namespace")}},{key:"durationOptions",get:function(){return[{label:1,value:1},{label:5,value:5},{label:15,value:15},{label:30,value:30},{label:60,value:60}]}},{key:"severities",get:function(){return v.SEVERITY_LEVEL.map((function(e){return{label:t(e.label),value:e.value,level:e}}))}}]),r}(f.default.Component))||l;a.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=n(r(32)),p=r(25),m=n(r(1573)),h=n(r(1576)),v=n(r(1579)),E=n(r(1591)),y=n(r(1659));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).state={query:(0,f.default)(e.props.formTemplate,"query"),ruleType:(0,f.default)(e.props.formTemplate,"ruleType","template")},e.handleTypeChange=function(t){e.setState({ruleType:t},(function(){e.props.formTemplate.ruleType=t}))},e.handleQueryChange=function(t){e.setState({query:t})},e.ruleValidator=function(e,a,r){return a?(0,d.default)(a.thresholds)?r({message:t("SET_ACTIVATION_CONDITION_DESC"),field:e.field}):void r():r()},e}return(0,o.default)(r,[{key:"renderTemplates",value:function(){var e=this.props,a=e.cluster,r=e.formTemplate;return i.default.createElement("div",null,i.default.createElement(m.default,{namespace:this.namespace,cluster:a,formTemplate:r}),i.default.createElement(p.Form.Item,{label:t("ALERTING_RULE"),rules:[{required:!0,message:t("SET_ACTIVATION_CONDITION_DESC")},{validator:this.ruleValidator}]},i.default.createElement(h.default,{name:"rules[0]",resourceType:this.resourceType})))}},{key:"renderCustomRule",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.store,l=e.formTemplate;return i.default.createElement(i.default.Fragment,null,i.default.createElement(p.Form.Item,{label:t("RULE_EXPRESSION"),desc:t.html("ALERT_RULE_EXPRESSION_DESC"),rules:[{required:!0,message:t("ENTER_RULE_EXPRESSION")}]},i.default.createElement(v.default,{name:"query",store:n,cluster:a,namespace:r,onChange:this.handleQueryChange})),i.default.createElement("div",{className:"margin-t12"},i.default.createElement(E.default,{query:this.state.query,duration:l.duration,store:n,cluster:a,namespace:r})))}},{key:"render",value:function(){var e=this.state.ruleType,a=this.props,r=a.formRef,n=a.formTemplate;return i.default.createElement(p.Form,{data:n,ref:r},i.default.createElement(p.RadioGroup,{mode:"button",buttonWidth:155,value:e,onChange:this.handleTypeChange},i.default.createElement(p.RadioButton,{value:"template"},t("RULE_TEMPLATE")),i.default.createElement(p.RadioButton,{value:"custom"},t("CUSTOM_RULE"))),i.default.createElement("div",{className:y.default.content},i.default.createElement("div",{className:y.default.contentWrapper},"template"===e?this.renderTemplates():this.renderCustomRule())))}},{key:"namespace",get:function(){return(0,f.default)(this.props.formTemplate,"namespace")}},{key:"resourceType",get:function(){return this.namespace?"workload":"node"}}]),r}(i.default.Component);a.default=g},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),o=r(a(19)),u=r(a(20)),c=r(a(18)),s=r(a(0)),i=r(a(1574)),f=r(a(1575));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var p=function(e){(0,o.default)(a,e);var t=d(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){return this.props.namespace?s.default.createElement(i.default,this.props):s.default.createElement(f.default,this.props)}}]),a}(s.default.Component);t.default=p},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(191)),m=l(r(16)),h=l(r(73)),v=r(25),E=l(r(736));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=new E.default(e.kindModules[(0,m.default)(e.props.formTemplate,"kind","")]||"deployments"),e.state={workloads:[],isLoading:!1},e.fetchData=function(t){var a=e.props,r=a.cluster,n=a.namespace;e.setState({isLoading:!0}),e.store.fetchList(b({cluster:r,namespace:n},t)).then((function(){e.setState({workloads:e.store.list.data.map((function(e){return{label:e.name,value:e.name}})),isLoading:!1})}))},e.handleKindChange=function(t){e.kindModules[t]!==e.store.module&&(e.store.setModule(e.kindModules[t]),e.fetchData(),(0,h.default)(e.props.formTemplate,"resources",[]))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=(0,p.default)(this.store.list,["page","limit","total"]);return d.default.createElement(d.default.Fragment,null,d.default.createElement(v.Form.Item,{label:t("RESOURCE_TYPE")},d.default.createElement(v.Select,{name:"kind",defaultValue:"Deployment",options:this.kinds,onChange:this.handleKindChange})),d.default.createElement(v.Form.Item,{label:t("MONITORING_TARGETS"),rules:[{required:!0,message:t("SELECT_WORKLOAD_TIP")}]},d.default.createElement(v.Select,{name:"resources",options:this.state.workloads,pagination:e,isLoading:this.state.isLoading,onFetch:this.fetchData,searchable:!0,multi:!0,placeholder:" "})))}},{key:"kindModules",get:function(){return{Deployment:"deployments",StatefulSet:"statefulsets",DaemonSet:"daemonsets"}}},{key:"kinds",get:function(){return[{label:t("DEPLOYMENT"),value:"Deployment"},{label:t("STATEFULSET"),value:"StatefulSet"},{label:t("DAEMONSET"),value:"DaemonSet"}]}}]),r}(d.Component);a.default=_},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(191)),m=r(25),h=l(r(837));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=y(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=new h.default,e.state={node:[],isLoading:!1},e.fetchData=function(t){var a=e.props.cluster;e.setState({isLoading:!1}),e.store.fetchList(E({cluster:a},t)).then((function(){e.setState({nodes:e.store.list.data.map((function(e){return{label:e.name,value:e.name}})),isLoading:!1})}))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=(0,p.default)(this.store.list,["page","limit","total"]);return d.default.createElement(m.Form.Item,{label:t("MONITORING_TARGETS"),rules:[{required:!0,message:t("SELECT_NODE_TIP")}]},d.default.createElement(m.Select,{name:"resources",options:this.state.nodes,pagination:e,isLoading:this.state.isLoading,onFetch:this.fetchData,searchable:!0,multi:!0,placeholder:" "}))}}]),r}(d.Component);a.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(136)),o=n(r(71)),u=n(r(56)),c=n(r(21)),s=n(r(12)),i=n(r(13)),f=n(r(135)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=n(r(1)),E=n(r(3)),y=n(r(68)),b=n(r(848)),g=n(r(24)),_=n(r(16)),S=n(r(73)),O=n(r(185)),C=r(37),T=r(25),R=n(r(740)),D=r(981),k=n(r(1578));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var w=function(e){(0,d.default)(r,e);var a=I(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).getMetricType=function(e){return(0,_.default)(e,"value._metricType",(0,_.default)(n.metricConfig[0],"value"))},n.getSelectOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var a=e.prefixIcon,r=e.color,n=e.type,l=e.label,o=e.value,u=e.disabled,c={label:t(l,{value:o}),value:o};return a&&(c.label=h.default.createElement("div",{className:(0,E.default)(k.default.optionLabel,k.default[n])},h.default.createElement(T.Icon,{name:a,size:20,color:r}),c.label)),u&&(c.disabled=u),c}))},n.handleMetricTypeChange=function(e){n.setState({metricType:e},(function(){n.props.onChange({_metricType:e})}))},n.handleItemChange=function(e){return(0,C.cacheFunc)(e,(function(t,a){var r=n.props,l=r.value,o=r.onChange,u=n.state.metricType,c=(0,g.default)(a)||!a?t:a;if("thresholds"===e){var s=(0,_.default)(String(c).match(/\D+$/g),"[0]")||"";(0,S.default)(l,"unit",s),c=String(c).replace(/([a-zA-Z%/])+$/g,"")}(0,S.default)(l,e,c),o(P(P({},l),{},{_metricType:u}))}),(0,f.default)(n))},n.renderConfigItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.props.value,r=e.type,l=e.name,c=e.placeholder,s=e.value,i=e.options,f=void 0===i?[]:i,d=(e.converter,(0,u.default)(e,["type","name","placeholder","value","options","converter"]));if((0,y.default)(a[l])||(0,b.default)(a[l])){var p=(0,_.default)(f[0],"value",s||"");(0,S.default)(a,l,p)}var m={key:l,className:k.default[l],name:l,placeholder:t(c),value:a[l],onChange:n.handleItemChange(l)};switch(r){default:case"select":var v=n.getSelectOptions(f);return h.default.createElement(T.Select,(0,o.default)({options:v},m,d));case"number":return h.default.createElement(R.default,(0,o.default)({showUnit:!0},m,d));case"text":return h.default.createElement(T.Input,(0,o.default)({type:r},m,d));case"slider":return h.default.createElement(T.Slider,(0,o.default)({},m,d,{className:k.default.slider}))}},n.state={metricType:n.getMetricType(e)},n.metricOps=n.getSelectOptions(n.metricConfig),n}return(0,i.default)(r,[{key:"render",value:function(){var e=this.state.metricType,t=this.ruleConfig;return h.default.createElement("div",{className:k.default.inputs},h.default.createElement(T.Select,{className:k.default.type,name:"_metricType",options:this.metricOps,value:e,onChange:this.handleMetricTypeChange}),t.map(this.renderConfigItem))}},{key:"resourceMetricsConfig",get:function(){var e=this.props.resourceType;return(0,O.default)(D.RESOURCE_METRICS_CONFIG[e||"node"])||{}}},{key:"metricConfig",get:function(){var e=this.resourceMetricsConfig;return Object.entries(e).map((function(e){var t=(0,l.default)(e,2);return P({value:t[0]},t[1])}))}},{key:"selectMetricConfig",get:function(){var e=this.state.metricType;return this.metricConfig.find((function(t){return t.value===e}))}},{key:"ruleConfig",get:function(){return(0,_.default)(this.selectMetricConfig,"ruleConfig")||[]}}]),r}(h.default.Component);a.default=w,w.propTypes={metricConfig:v.default.array,value:v.default.object,onChange:v.default.func},w.defaultProps={metricConfig:[],value:{},onChange:function(){}}},,function(e,t,a){e.exports={inputs:"SJ7YSbmlyFL89blCD2-vH",optionLabel:"_3cpHedZRMerQwz1cDX97rs",slider:"_3KvP4zsLBWIqKeGNVWOIla"}},function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,o,u=r(a(71)),c=r(a(12)),s=r(a(13)),i=r(a(19)),f=r(a(20)),d=r(a(18)),p=r(a(74)),m=n(a(0)),h=a(70),v=a(5),E=r(a(1050));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=(0,h.observer)((o=function(e){(0,i.default)(a,e);var t=y(a);function a(){return(0,c.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cluster,a=e.namespace;this.props.store.fetchMetadata({cluster:t,namespace:a})}},{key:"render",value:function(){return m.default.createElement(E.default,(0,u.default)({},this.props,{supportMetrics:this.supportMetrics}))}},{key:"supportMetrics",get:function(){return this.props.store.targetsMetadata.map((function(e){return{value:e.metric,desc:e.help,type:e.type}}))}}]),a}(m.Component),(0,p.default)(o.prototype,"supportMetrics",[v.computed],Object.getOwnPropertyDescriptor(o.prototype,"supportMetrics"),o.prototype),l=o))||l;t.default=b},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),o=n(a(13)),u=n(a(19)),c=n(a(20)),s=n(a(18)),i=r(a(0)),f=n(a(1186)),d=n(a(1051));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={isOpen:!1},e.ref=i.default.createRef(),e.handleDOMClick=function(t){e.ref&&!e.ref.current.contains(t.target)&&e.setState({isOpen:!1})},e.handleSelect=function(t){e.props.onSelect(t),e.setState({isOpen:!1})},e.triggerOpen=function(){e.setState((function(e){return{isOpen:!e.isOpen}}))},e}return(0,o.default)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDOMClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDOMClick)}},{key:"getOptionsStyle",value:function(){var e={};if(this.ref&&this.ref.current){var t=this.ref.current.getBoundingClientRect();window.innerHeight-t.top>260+t.height?e.top=t.top+t.height+8:e.top=t.top-8-252,e.left=t.left}return e}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.options,r=this.state.isOpen;return i.default.createElement("div",{className:d.default.wrapper,ref:this.ref},i.default.createElement("div",{className:d.default.trigger,onClick:this.triggerOpen},t),r&&i.default.createElement(f.default,{style:this.getOptionsStyle(),options:a,level:0,onSelect:this.handleSelect}))}}]),a}(i.Component);t.default=m,m.defaultProps={options:[],children:"",onSelect:function(){}}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),o=n(a(12)),u=n(a(13)),c=n(a(19)),s=n(a(20)),i=n(a(18)),f=r(a(0)),d=n(a(3)),p=a(25),m=n(a(1186)),h=n(a(1051));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(a,e);var t=v(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).ref=f.default.createRef(),e.handleClick=function(){var t=e.props,a=t.data;(0,t.onClick)(a.value)},e.handleSelect=function(){var t=e.props,a=t.data;(0,t.onSelect)(a.value)},e}return(0,u.default)(a,[{key:"getOptionsStyle",value:function(){var e={};if(this.ref&&this.ref.current){var t=this.props.data;if(t.children){var a=Math.min(t.children.length,8),r=this.ref.current.getBoundingClientRect(),n=this.ref.current.parentNode.getBoundingClientRect();r.top-n.top>n.height/2?e.top=r.top-4-32*(a-1):e.top=r.top-4,e.left=r.left+r.width,window.innerHeight-e.top<252&&(e.maxHeight=window.innerHeight-e.top-8)}}return e}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.level,r=e.isOpen,n=e.onSelect;return t.children?f.default.createElement("div",{ref:this.ref},f.default.createElement("div",{className:(0,d.default)(h.default.item,h.default.hasChildren,(0,l.default)({},h.default.isOpen,r)),onClick:this.handleClick},t.label,f.default.createElement(p.Icon,{name:"chevron-right",type:"light"})),r&&f.default.createElement(m.default,{level:a+1,options:t.children,onSelect:n,style:this.getOptionsStyle()})):f.default.createElement("div",{className:h.default.item,onClick:this.handleSelect},t.label)}}]),a}(f.Component);t.default=E},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),o=n(a(13)),u=n(a(19)),c=n(a(20)),s=n(a(18)),i=r(a(0)),f=n(a(1583)),d=a(1189),p=n(a(1588)),m=n(a(1589));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(a,e);var t=h(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={value:e.props.value,visible:!1},e.editor=i.default.createRef(),e.wrapper=i.default.createRef(),e.valueHistory=new p.default,e.cursorHistory=new p.default,e.triggerChange=function(t){var a=e.props.onChange;e.valueHistory.push(t),e.cursorHistory.push(e.state.position),a(t)},e.handleValueUpdateFromProps=function(t){e.editor.current.innerHTML=(0,d.highlightPromql)(t)},e.handleInput=function(t){var a=t.target,r=(0,d.getCaretCharacterOffsetWithin)(a),n=a.innerText;if(t.data&&d.PUNCTUATION_MAP[t.data]){var l=n.substring(0,r),o=n.substring(r);n=l+d.PUNCTUATION_MAP[t.data]+o}a.innerHTML=(0,d.highlightPromql)(n),(0,d.setCaretPosition)(a,r);var u=window.getSelection().getRangeAt(0).startContainer,c=u.textContent,s=(0,d.getTokenContext)(e.editor.current,u);e.setState({value:n,focusValue:c,position:r,tokenContext:s,visible:!0},(function(){return e.triggerChange(n)}))},e.handleKeyDown=function(t){e.keydownHandler[t.keyCode]&&e.keydownHandler[t.keyCode](t),t.metaKey&&90===t.keyCode&&(t.stopPropagation(),t.preventDefault(),t.shiftKey?e.handleRedo():e.handleUndo())},e.handleKeyUp=function(t){e.keyupHandler[t.keyCode]&&e.keyupHandler[t.keyCode](t)},e.handleRedo=function(){var t=e.valueHistory.redo(),a=e.cursorHistory.redo();e.setState({position:a},(function(){e.props.onChange(t)}))},e.handleUndo=function(){var t=e.valueHistory.undo(),a=e.cursorHistory.undo();e.setState({position:a},(function(){e.props.onChange(t)}))},e.handleCursorChange=function(){var t=e.editor.current,a=(0,d.getCaretCharacterOffsetWithin)(t),r=window.getSelection().getRangeAt(0).startContainer,n=r.textContent,l=(0,d.getTokenContext)(e.editor.current,r);e.setState({focusValue:n,position:a,tokenContext:l,visible:!0})},e.handleLabelSearch=function(){var t=e.state.focusValue,a=e.props.onLabelSearch;t&&a&&a(t)},e.handleSuggestionSelect=function(t){var a=e.state,r=a.value,n=a.focusValue,l=a.position,o=0,u=n.length;if(d.OPERATORS.includes(n))o=l,u=0;else for(var c=l-1;c>=0;c--)if(d.OPERATORS.includes(r[c])||""===r[c]){o=c+1;break}var s=r.substring(0,o)+t+r.substring(o+u),i=o+t.length;e.setState({visible:!1,value:s,focusValue:t,position:i},(function(){if(e.triggerChange(s),"{"===r[i]&&e.handleLabelSearch(),e.editor.current){var t=e.editor.current;t.innerHTML=(0,d.highlightPromql)(s),(0,d.setCaretPosition)(t,i)}}))},e.handleDOMClick=function(t){e.wrapper&&e.wrapper.current&&!e.wrapper.current.contains(t.target)&&e.setState({visible:!1}),e.editor&&e.editor.current&&e.editor.current.contains(t.target)&&e.handleCursorChange()},e}return(0,o.default)(a,[{key:"componentDidMount",value:function(){if(this.editor.current){var e=this.state.value;this.editor.current.addEventListener("input",this.handleInput),this.editor.current.addEventListener("keydown",this.handleKeyDown),this.editor.current.addEventListener("keyup",this.handleKeyUp),this.handleValueUpdateFromProps(e)}document.addEventListener("click",this.handleDOMClick)}},{key:"componentDidUpdate",value:function(e,t){var a=this,r=this.props.value;t.value!==r&&this.setState({value:r},(function(){a.handleValueUpdateFromProps(r)}))}},{key:"componentWillUnmount",value:function(){this.editor.current&&(this.editor.current.removeEventListener("input",this.handleInput),this.editor.current.removeEventListener("keydown",this.handleKeyDown),this.editor.current.removeEventListener("keyup",this.handleKeyUp)),document.removeEventListener("click",this.handleDOMClick)}},{key:"render",value:function(){var e=this.state,t=e.visible,a=e.focusValue,r=e.tokenContext,n=this.props,l=n.metrics,o=n.labelsets;return i.default.createElement("div",{className:m.default.wrapper,ref:this.wrapper},i.default.createElement("pre",null,i.default.createElement("code",{className:m.default.input,ref:this.editor,spellCheck:"false",contentEditable:!0})),t&&a&&i.default.createElement(f.default,{className:m.default.suggestions,value:a,metrics:l,tokenContext:r,labelsets:o,onSelect:this.handleSuggestionSelect}))}},{key:"keydownHandler",get:function(){return{219:this.handleLabelSearch}}},{key:"keyupHandler",get:function(){return{37:this.handleCursorChange,39:this.handleCursorChange}}}]),a}(i.Component);t.default=v,v.defaultProps={value:""}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(109)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=l(r(32)),p=n(r(0)),m=l(r(3)),h=l(r(651)),v=l(r(1584)),E=r(1187),y=l(r(1585)),b=l(r(1188));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={focusIndex:0,labels:[],functions:[],metrics:[],rateRanges:[]},e.wrapper=p.default.createRef(),e.handleArrowDown=function(){e.setState((function(e){var t=e.focusIndex,a=e.labels,r=e.functions,n=e.metrics,l=e.rateRanges;return{focusIndex:t>=a.length+r.length+n.length+l.length-1?0:t+1}}),e.scrollToFocus)},e.handleArrowUp=function(){e.setState((function(e){var t=e.focusIndex,a=e.labels,r=e.functions,n=e.metrics,l=e.rateRanges,o=a.length+r.length+n.length+l.length;return{focusIndex:t<=0?o-1:t-1}}),e.scrollToFocus)},e.handleEnter=function(){var t=e.props.onSelect,a=e.state,r=a.focusIndex,n=a.functions,l=a.metrics,u=a.rateRanges,c=a.labels,s=[].concat((0,o.default)(c),(0,o.default)(n),(0,o.default)(l),(0,o.default)(u))[r];s&&t(s.value||s.label)},e.handleKeyDown=function(t){e.keydownHandler[t.keyCode]&&(t.stopPropagation(),t.preventDefault(),e.keydownHandler[t.keyCode](t))},e.scrollToFocus=function(){if(e.wrapper&&e.wrapper.current){var t=e.wrapper.current,a=t.querySelector(".is-focus");if(!a)return;var r=t.scrollTop,n=r+t.offsetHeight,l=a.offsetTop,o=l+a.offsetHeight;(r>l||n<o)&&(t.scrollTop=a.offsetTop-6)}},e.searchMetrics=function(t){return e.fuse.search(t,{limit:50}).map((function(e){return{value:e.item}}))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fuse=new v.default(this.props.metrics.map((function(e){return e.value}))),this.getSuggestions(),document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e){e.value===this.props.value&&(0,h.default)(e.tokenContext,this.props.tokenContext)&&(0,h.default)(e.labelsets,this.props.labelsets)||this.getSuggestions(),(0,h.default)(e.metrics,this.props.metrics)||(this.fuse=new v.default(this.props.metrics.map((function(e){return e.value}))),this.getSuggestions())}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"getSuggestions",value:function(){var e=this.props,t=e.value,a=e.labelsets,r=e.tokenContext,n=[],l=[],o=[],u=[];r&&r.type.indexOf("context-labels")>-1?u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=Object.keys(e);if("{"===t||","===t)return r.map((function(e){return{value:e}}));if(a.label){var n=e[a.label]||[];return"="===t?n.map((function(e){return{value:'"'.concat(e,'"')}})):'""'===t||"''"===t?n.map((function(e){return{value:e}})):n.map((function(e){return'"'.concat(e,'"')})).filter((function(e){return e.indexOf(t)>=0})).map((function(e){return{value:e}}))}return r.filter((function(e){return e.indexOf(t)>=0})).map((function(e){return{value:e}}))}(a,t,r):(n=function(e){return E.FUNCTIONS.filter((function(t){return t.label.indexOf(e)>=0}))}(t),l=this.searchMetrics(t),o=function(e){return"["===e?E.RATE_RANGES:[]}(t)),this.setState({functions:n,metrics:l,rateRanges:o,labels:u})}},{key:"renderList",value:function(e,t){var a=this.props,r=a.value,n=a.onSelect,l=this.state.focusIndex;return(0,d.default)(e)?null:p.default.createElement("div",{className:b.default.group},p.default.createElement("div",{className:b.default.groupTitle},t),p.default.createElement("div",{className:b.default.options},e.map((function(e,t){return p.default.createElement(y.default,{key:e.value||e.label,data:e.value||e.label,inputValue:r,isFocused:l===t,onSelect:n})}))))}},{key:"render",value:function(){var e=this.props.className,a=this.state,r=a.functions,n=a.metrics,l=a.rateRanges,o=a.labels;return(0,d.default)(r)&&(0,d.default)(n)&&(0,d.default)(l)&&(0,d.default)(o)?null:p.default.createElement("div",{className:(0,m.default)(b.default.wrapper,e),ref:this.wrapper},this.renderList(o,t("ALERT_LABELS")),this.renderList(r,t("ALERT_FUNCTIONS")),this.renderList(l,t("ALERT_RATE_RANGES")),this.renderList(n,t("ALERT_METRICS")))}},{key:"keydownHandler",get:function(){return{38:this.handleArrowUp,40:this.handleArrowDown,13:this.handleEnter,14:this.handleEnter}}}]),r}(p.Component);a.default=_},,function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),o=n(a(13)),u=n(a(19)),c=n(a(20)),s=n(a(18)),i=r(a(0)),f=n(a(3)),d=n(a(1188));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleClick=function(){var t=e.props,a=t.data;(0,t.onSelect)(a)},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.inputValue,r=e.isFocused,n=t.split(a)[0];return i.default.createElement("div",{className:(0,f.default)(d.default.item,{"is-focus":r}),onClick:this.handleClick},i.default.createElement("span",null,n),t.length>n.length&&i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{className:"highlight"},a),i.default.createElement("span",null,t.slice(n.length+a.length))))}}]),a}(i.Component);t.default=m},,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),o=function(){function e(t){(0,n.default)(this,e),this.data=[],this.maxLength=50,this.cursor=0,isNaN(t)||(this.maxLength=t)}return(0,l.default)(e,[{key:"push",value:function(e){this.data.length>=this.maxLength&&this.data.shift(),this.data.push(e),this.cursor=0}},{key:"undo",value:function(){return this.cursor<this.data.length-1&&(this.cursor+=1),this.data[this.data.length-1-this.cursor]}},{key:"redo",value:function(){return this.cursor>0&&(this.cursor-=1),this.data[this.data.length-1-this.cursor]}}]),e}();t.default=o},function(e,t,a){e.exports={wrapper:"_2Djs149fKvXq0cuQnoPLWv",input:"_3r2beirvrZ6qtbzzlFsRsd",suggestions:"Q7oMYSMcW984KaLwUtxe0"}},function(e,t,a){e.exports={wrapper:"_1w-rN95sN7ztXIW47qpxDr",trigger:"_3RKOgK42gRQ35DXoTa7VUE",input:"_1_1MeGWNh944JJ0DAi3osN",debug:"_3Ftx4Zx_7HgfhQ47jLEOEi"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(49)),c=l(r(21)),s=l(r(50)),i=l(r(12)),f=l(r(13)),d=l(r(19)),p=l(r(20)),m=l(r(18)),h=n(r(0)),v=l(r(190)),E=r(735),y=r(37),b=r(725);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var O=function(e){(0,d.default)(r,e);var a=S(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={metrics:[],id:""},e.fetchMetrics=function(){var t=(0,s.default)(u.default.mark((function t(a){var r,n,l,o,c,s,i,f,d;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.cluster,l=r.namespace,o=r.query,c=r.duration,s=(0,y.formatDuration)(c),i=Math.floor(Date.now()/1e3),f=i-s,t.next=6,e.props.store.fetchMetric(_({expr:o,end:i,start:f,step:"30s",cluster:n,namespace:l},a));case 6:d=t.sent,e.setState({metrics:d,id:o});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchMetrics()}},{key:"componentDidUpdate",value:function(e){e.query!==this.props.query&&this.fetchMetrics()}},{key:"render",value:function(){var e=this.state,a=e.id,r=e.metrics,n=(0,b.getAreaChartOps)({height:400,title:t("ALERT_MONITORING"),data:r,legend:r.map((function(e){return e.metric?JSON.stringify((0,v.default)(e.metric,"__name__")):""}))});return h.default.createElement(E.MultiArea,(0,o.default)({},n,{id:a}))}}]),r}(h.Component);a.default=O},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={title:"_2KqOXI1zUkTuoBtHGIK02_",content:"HvAV4hxNJWx8AkL28axAz",contentWrapper:"h7KIE6LklED4muxo0q3Vg"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=n(r(32)),p=n(r(73)),m=r(25),h=r(981),v=n(r(1661));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var n;(0,l.default)(this,r);var o=(n=a.call(this,e)).props.formTemplate,u=o.kind,c=void 0===u?"Node":u,s=o.resources,i=o.rules;if(!(0,d.default)(s)&&!(0,d.default)(i)){var m="".concat(t(c)," ").concat(s.join(", ")," ").concat(i.map((function(e){var a=e||{},r=a._metricType,n=a.condition_type,l=a.thresholds,o=a.unit,u=(0,f.default)(h.ALL_METRICS_CONFIG,r)||{};return"".concat(t(u.label)," ").concat(n," ").concat(l).concat(o)})).join(" ".concat(t("or")," ")));(0,p.default)(o,"annotations.summary",m)}return n}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return i.default.createElement(m.Form,{className:v.default.wrapper,data:r,ref:a},i.default.createElement("div",{className:v.default.title},t("ALERTING_MESSAGE")),i.default.createElement("div",{className:v.default.content},i.default.createElement("div",{className:v.default.contentWrapper},i.default.createElement(m.Form.Item,{label:t("NOTIFICATION_SUMMARY")},i.default.createElement(m.Input,{name:"annotations.summary",maxLength:253})),i.default.createElement(m.Form.Item,{label:t("NOTIFICATION_DETAILS")},i.default.createElement(m.TextArea,{name:"annotations.message",rows:8})))))}}]),r}(i.default.Component);a.default=y},function(e,t,a){e.exports={wrapper:"_1SfS1YBrBcNYKIp6qUnWEG",title:"_3xbx7sl-g5vMt44o1o_pyF",content:"_1QrX1-2wdlETkuLNwpCb8B",contentWrapper:"_204-19BOKfKNeLbWfJ6vPc"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(16)),i=n(r(73)),f=n(r(32)),d=n(r(190)),p=r(25),m=n(r(274)),h=r(37),v=n(r(733)),E=r(58),y=n(r(1208)),b=n(r(766)),g=n(r(1678)),_=n(r(1213)),S=n(r(1214)),O=n(r(1247)),C=n(r(855)),T=n(r(998));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k={"app.deploy":{on:function(e){var t=e.store,a=(0,c.default)(e,["store"]),r=m.default.open(D({onOk:function(){m.default.close(r)},modal:g.default,store:t},a))}},"crd.app.create":{on:function(e){var t=e.store,a=e.cluster,r=e.namespace,n=(e.workspace,e.success),l=(0,c.default)(e,["store","cluster","namespace","workspace","success"]),o=m.default.open(D({onOk:function(e){var l=(0,d.default)(e,["application","ingress"]);Object.keys(l).forEach((function(t){e=(0,d.default)(e,(0,E.OMIT_TOTAL_REPLICAS)(t))})),t.create(e,{cluster:a,namespace:r}).then((function(){m.default.close(o),n&&n()}))},store:t,cluster:a,namespace:r,modal:_.default},l))}},"crd.app.addservice":{on:function(e){var a,r=e.store,n=e.detail,u=e.cluster,s=e.namespace,f=e.success,d=(0,c.default)(e,["store","detail","cluster","namespace","success"]),v=m.default.open(D({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,E;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.selector,c=String(n.serviceMeshEnable),E={service:a.Service,workload:a.Deployment||a.StatefulSet},(0,h.mergeLabels)(E.service,o),(0,h.mergeLabels)(E.workload,o),(0,i.default)(E.workload,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',c),(0,i.default)(E.service,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',c),(0,i.default)(E.workload,'spec.template.metadata.annotations["sidecar.istio.io/inject"]',c),!d.isFederated){e.next=15;break}return(0,h.updateFederatedAnnotations)(E.workload),(0,h.updateFederatedAnnotations)(E.service),e.next=13,r.create(E,{namespace:s});case 13:e.next=17;break;case 15:return e.next=17,r.addComponent(E,{name:n.name,cluster:u,namespace:s});case 17:m.default.close(v),p.Notify.success({content:"".concat(t("Add Component Successfully"))}),f&&f();case 20:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,cluster:u,namespace:s,modal:S.default},d))}},"crd.app.addroute":{on:function(e){e.store;var a,r=e.detail,n=e.cluster,f=e.namespace,d=e.success,g=(0,c.default)(e,["store","detail","cluster","namespace","success"]),_=new C.default,S=_.module,O=E.MODULE_KIND_MAP[S],T=(0,u.default)({},O,v.default[S]({namespace:f})),R=m.default.open(D(D({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,c,v,E;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.selector,u=r.serviceMeshEnable,c=a.Ingress||a,(0,h.mergeLabels)(c,o),u&&(v=g.isFederated?(0,s.default)(c,"spec.template"):c,(E=(0,s.default)(v,"spec.rules[0].http.paths[0].backend.serviceName"))&&(0,i.default)(v,'metadata.annotations["nginx.ingress.kubernetes.io/upstream-vhost"]',"".concat(E,".").concat(f,".svc.cluster.local"))),g.isFederated&&(0,h.updateFederatedAnnotations)(c),e.next=8,_.create(c,{cluster:n,namespace:f});case 8:m.default.close(R),p.Notify.success({content:"".concat(t("Add Route Successfully"))}),d&&d();case 11:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:n,namespace:f,formTemplate:T,module:S,store:_,steps:y.default,modal:b.default,okBtnText:t("CREATE"),selector:r.selector},g),{},{name:"Route"}))}},"app.service.monitor":{on:function(e){var t,a=e.store,r=e.cluster,n=e.namespace,u=e.success,i=(0,c.default)(e,["store","cluster","namespace","success"]),d=new T.default,p=v.default.servicemonitors({name:"",namespace:n}),h=m.default.open(D({onOk:(t=(0,o.default)(l.default.mark((function e(t){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,s.default)(t,"metadata.name"),e.next=3,d.checkName({name:a,cluster:r,namespace:n});case 3:if(e.sent.exist){e.next=9;break}return e.next=7,d.create(t,{cluster:r,namespace:n});case 7:e.next=16;break;case 9:if(!(0,f.default)((0,s.default)(t,"spec.endpoints"))){e.next=14;break}return e.next=12,d.delete({name:a,cluster:r,namespace:n});case 12:e.next=16;break;case 14:return e.next=16,d.update({name:a,cluster:r,namespace:n},t);case 16:m.default.close(h),u&&u();case 18:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),cluster:r,namespace:n,formTemplate:p,app:a.detail,store:d,modal:O.default},i))}}};a.default=k},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(16)),f=n(r(0)),d=n(r(1)),p=n(r(275)),m=n(r(1209)),h=n(r(1210));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderContent",value:function(){var e=this.props,a=e.value,r=e.onShow,n=e.onDelete,l=e.projectDetail,o=(0,i.default)(this.context.formData,"spec.tls",[]);return f.default.createElement("ul",null,a.filter((function(e){return e&&e.host})).map((function(e,t){return f.default.createElement(m.default,{rule:e,tls:o,key:t,index:t,onEdit:r,onDelete:n,projectDetail:l})})),f.default.createElement("div",{className:h.default.add,onClick:r},f.default.createElement(p.default,{title:t("ADD_ROUTING_RULE"),description:t("ADD_ROUTING_RULE_DESC")})))}},{key:"render",value:function(){return f.default.createElement("div",{className:h.default.wrapper},this.renderContent())}}]),r}(f.default.Component);a.default=E,E.propTypes={name:d.default.string,value:d.default.array,onDelete:d.default.func,onShow:d.default.func},E.defaultProps={name:"",value:[],onDelete:function(){},onShow:function(){}},E.contextTypes={formData:d.default.object}},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(16)),f=n(r(32)),d=n(r(0)),p=n(r(3)),m=n(r(1)),h=r(25),v=n(r(761)),E=n(r(1063)),y=r(801),b=r(58),g=n(r(1064)),_=n(r(1673));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var O=function(e){(0,u.default)(r,e);var a=S(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).checkItemValid=function(e){return e.path&&e.backend&&e.backend.service&&e.backend.service.name&&e.backend.service.port},n.pathValidator=function(e,a,r){return a?a.some((function(e){return!n.checkItemValid(e)}))?r({message:t("INVALID_PATH_DESC"),field:e.field}):n.handlePathExistValidator(a)?r({message:t("PATH_EXIST"),field:e.field}):void r():r()},n.handlePathExistValidator=function(e){var t=e.map((function(e){return e.path})),a=!1;return t.forEach((function(e){for(var r=t.length,n=0,l=0;n<=r;){if(e===t[n]&&l++,l>1){a=!0;break}n++}})),a},n.handleGoBack=function(){var e=n.context.resetSubRoute;e&&e(),n.handleValidator()&&n.props.onCancel()},n.handleProtocolChange=function(e){n.setState({protocol:e})},n.handleSubmit=function(e){var t=n.props.onSave,a=n.formRef.current;a&&a.validate((function(){var r=a.getData();t(r),e&&e()}))},n.handleValidator=function(){var e=!1,t=n.formRef.current;return t&&t.validate((function(){e=!0})),e},n.state={service:"",protocol:(0,i.default)(e,"data.protocol","http")},n.formRef=d.default.createRef(),n}return(0,o.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.context.registerSubRoute,a=this.props.onCancel;t&&t(this.handleSubmit,(function(){return!!e.handleValidator()&&a}))}},{key:"getType",value:function(e){var t=(0,i.default)(e,"host");if(!t)return"auto";var a=this.props,r=a.gateway,n=a.projectDetail,l=a.namespace,o=(0,i.default)(e,"http.paths[0].backend.service.name"),u=(0,i.default)(n,'_originData.metadata.labels["kubesphere.io/namespace"]')||l;return t===(r.isHostName?r.defaultIngress:"".concat(o,".").concat(u,".").concat(r.defaultIngress,".nip.io"))?"auto":"specify"}},{key:"renderForm",value:function(){var e=this.state.protocol;return d.default.createElement(d.default.Fragment,null,d.default.createElement(h.Form.Item,{label:t("DOMAIN_NAME_TCAP"),rules:[{required:!0,message:t("DOMAIN_NAME_EMPTY_DESC")},{pattern:b.PATTERN_HOST,message:t("INVALID_DOMAIN_DESC")}]},d.default.createElement(h.Input,{name:"host",autoFocus:!0})),d.default.createElement(h.Form.Item,{label:t("PROTOCOL")},d.default.createElement(h.Select,{name:"protocol",defaultValue:"http",onChange:this.handleProtocolChange,options:this.protocols})),"https"===e&&d.default.createElement(h.Form.Item,{label:t("SECRET")},d.default.createElement(h.Select,{name:"secretName",options:this.secrets,placeholder:" "})),d.default.createElement(h.Form.Item,{label:t("PATH_PL"),rules:[{required:!0,message:t("PATH_EMPTY_DESC")},{validator:this.pathValidator,checkOnSubmit:!0}]},d.default.createElement(v.default,{name:"http.paths",itemType:"object",addText:t("ADD"),checkItemValid:this.checkItemValid},d.default.createElement(E.default,{services:this.props.services}))))}},{key:"render",value:function(){var e=this.props,a=e.data,r=e.className,n=e.isFederated;return d.default.createElement("div",{className:(0,p.default)(_.default.wrapper,r)},d.default.createElement("div",{className:"h4"},d.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},d.default.createElement(y.ReactComponent,null)),t("SET_ROUTING_RULES")),d.default.createElement("div",{className:_.default.formWrapper},d.default.createElement(h.Form,{ref:this.formRef,data:a},n&&d.default.createElement(h.Form.Group,{label:t("CLUSTER")},d.default.createElement(h.Form.Item,null,d.default.createElement(g.default,{name:"clusters",options:this.clusters,defaultValue:this.defaultClusters}))),d.default.createElement(h.Form.Group,{noWrapper:!0},d.default.createElement(h.Alert,{className:"margin-t12 margin-b12",message:t.html("RULE_SETTING_MODE_".concat("specify".toUpperCase())),type:"info"}),this.renderForm()))))}},{key:"protocols",get:function(){return[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]}},{key:"secrets",get:function(){return this.props.secrets.map((function(e){return{label:e.name,value:e.name}}))}},{key:"clusters",get:function(){return(0,i.default)(this.props,"projectDetail.clusters",[]).slice()}},{key:"defaultClusters",get:function(){return(0,i.default)(this.props,"projectDetail.clusters",[]).map((function(e){return e.name}))}},{key:"enableAutoGenerated",get:function(){var e=this.props,t=e.isFederated,a=e.gateway;return!t&&!(0,f.default)(a.defaultIngress)}}]),r}(d.default.Component);a.default=O,O.propTypes={data:m.default.object,secrets:m.default.array,services:m.default.array,gateway:m.default.object,onSave:m.default.func,onCancel:m.default.func},O.defaultProps={data:{},secrets:[],services:[],gateway:{},onSave:function(){},onCancel:function(){}},O.contextTypes={registerSubRoute:m.default.func,resetSubRoute:m.default.func}},,,,,,function(e,t,a){e.exports={wrapper:"_3--VX5nESZHibBLwCNMfSL",advance:"_2EJlmbhXorbkEHtrN5QqEi",toggle:"_2S7NwpmHoQs9jxrplqTMLA",customFormItem:"_1u5SUDiQDf_eLXCZDmMJJO",formWrapper:"_2dDLG5BZ_t68ckVmZFy-RR",form:"_2YOPmzRJE1x018vTgrvqht"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=r(58),p=r(25),m=n(r(1675));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement(p.Form,{data:this.formTemplate,ref:e},i.default.createElement(p.Form.Group,{label:t("ADD_METADATA"),desc:t("ROUTE_ADD_METADATA_DESC"),keepDataWhenUnCheck:!0,checkable:!0},i.default.createElement(m.default,null)))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,d.MODULE_KIND_MAP[a],t)}}]),r}(i.default.Component);a.default=v},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=r(25),d=n(r(991)),p=n(r(786));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Form.Item,{label:t("ANNOTATION_PL")},i.default.createElement(d.default,{name:"metadata.annotations",addText:t("ADD"),hiddenKeys:globals.config.preservedAnnotations})),i.default.createElement(f.Form.Item,{label:t("LABEL_PL")},i.default.createElement(p.default,{name:"metadata.labels",addText:t("ADD")})))}}]),r}(i.default.Component);a.default=h},,function(e,t,a){e.exports={dropdown:"_2AA0siR3svLxPwUAGPyHck"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(56)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(21)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=r(25),v=n(r(274)),E=n(r(1679));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){var t=e.icon,a=e.image,r=e.title,n=e.desc,l=e.disabled,o=e.onEnter;return d.default.createElement("div",{className:(0,m.default)(E.default.item,(0,f.default)({},E.default.disable,l)),onClick:o},a?d.default.createElement("img",{src:a,alt:""}):d.default.createElement(h.Icon,{name:t,size:40}),d.default.createElement("div",{className:E.default.text},d.default.createElement("div",null,r),d.default.createElement("p",null,n)))},S=function(e){(0,c.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleAppTemplate=function(){var t=e.props,a=t.namespace,r=t.cluster,n=t.workspace,l=t.routing;(0,t.onOk)(),l.push("/apps?workspace=".concat(n,"&cluster=").concat(r,"&namespace=").concat(a))},e.handleAppRepo=function(){var t=e.props,a=t.onOk,r=t.trigger,n=(0,l.default)(t,["onOk","trigger"]);a(),r("openpitrix.app.create",b({trigger:r},n))},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return d.default.createElement(v.default,{width:600,style:{borderRadius:"8px"},onOk:this.handleOk,onCancel:r,visible:a,bodyClassName:E.default.body,hideHeader:!0},d.default.createElement("div",{className:E.default.header},d.default.createElement("div",{className:E.default.logo},d.default.createElement("img",{src:"/assets/application.svg",alt:""})),d.default.createElement("div",{className:E.default.text},d.default.createElement("h2",null,t("CREATE_APP")),d.default.createElement("p",null,t("CREATE_APP_DESC")))),d.default.createElement("div",{className:E.default.footer},globals.app.enableAppStore&&d.default.createElement(_,{icon:"templet",title:t("FROM_APP_STORE"),desc:t("FROM_APP_STORE_DESC"),onEnter:this.handleAppTemplate}),d.default.createElement(_,{icon:"catalog",title:t("FROM_APP_TEMPLATE"),desc:t("FROM_APP_TEMPLATE_DESC"),onEnter:this.handleAppRepo})))}}]),r}(d.default.Component);a.default=S,S.propTypes={visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func},S.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"Gr8gQYgDKIMOsI5M37h3o",header:"_1yJrBlU6RwumAfyYPHmrRo",logo:"_22CAaRILPr5La-L4xixVEq",text:"h6bCnuvECDoNlWvtM5_1K",footer:"_7fnLunzyyoPWkN1GAVT7z",item:"izUJvf75kVcnxyQZVcShI",enterIcon:"_2ZrtakZD2Dd3fyBqPk6qNI",disable:"_3XkqeG1sF3XM-emDc0NiOz"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(71)),o=n(a(12)),u=n(a(13)),c=n(a(19)),s=n(a(20)),i=n(a(18)),f=r(a(0)),d=n(a(16)),p=n(a(190)),m=a(25),h=n(a(774)),v=n(a(1825)),E=n(a(1828));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){(0,c.default)(a,e);var t=y(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){return f.default.createElement(h.default,this.props,f.default.createElement(m.Select,{className:E.default.schema,name:"scheme",options:this.protocols,defaultValue:"http"}),f.default.createElement(m.Select,{prefixIcon:f.default.createElement(m.Icon,{name:"network-card"}),name:"port",options:this.ports,placeholder:" "}),f.default.createElement(m.Input,{name:"path",defaultValue:"/metrics"}),f.default.createElement(v.default,(0,l.default)({name:"authType",formData:this.props.value},(0,p.default)(this.props,["value","onChange"]))))}},{key:"protocols",get:function(){return[{label:"HTTPS",value:"https"},{label:"HTTP",value:"http"}]}},{key:"ports",get:function(){return(0,d.default)(this.props,"detail.ports",[]).map((function(e){return{label:e.name?"".concat(e.name," (").concat(e.port,")"):e.port,value:e.name||e.port}}))}}]),a}(f.Component);t.default=b},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=l(r(0)),p=r(70),m=n(r(738)),h=r(25),v=n(r(275)),E=n(r(1248)),y=n(r(1827));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,p.observer)(o=function(e){(0,s.default)(r,e);var a=b(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={showForm:!1,authType:e.props.value||""},e.formRef=d.default.createRef(),e.refreshSecrets=function(){var t=e.props,a=t.cluster,r=t.namespace;e.props.secretStore.fetchListByK8s({cluster:a,namespace:r})},e.toggleForm=function(){e.setState((function(e){return{showForm:!e.showForm}}))},e.hideForm=function(){e.setState({showForm:!1})},e.handleTypeChange=function(t){e.setState({authType:t})},e.handleSubmit=function(){var t=e.formRef.current;t&&t.validate((function(){var t=e.state.authType,a=e.props,r=a.value,n=a.formData,l=a.onChange;r&&r!==t&&(0,m.default)(n,r),l(t),e.hideForm()}))},e}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e,t){this.props.value&&this.props.value!==t.authType&&this.setState({authType:this.props.value||""})}},{key:"renderFormContent",value:function(){var e;switch(this.state.authType){case"":e=d.default.createElement(h.Alert,{type:"info",message:t("NO_AUTHENTICATION_TIP")});break;case"tlsConfig":e=d.default.createElement("div",null,d.default.createElement(h.Form.Item,{label:t("CERTIFICATE_AUTHORITY")},d.default.createElement(E.default,{name:"tlsConfig.ca.secret",secrets:this.secrets})),d.default.createElement(h.Form.Item,{label:t("CERTIFICATE")},d.default.createElement(E.default,{name:"tlsConfig.cert.secret",secrets:this.secrets})),d.default.createElement(h.Form.Item,{label:t("PRIVATE_KEY")},d.default.createElement(E.default,{name:"tlsConfig.keySecret",secrets:this.secrets})),d.default.createElement(h.Form.Item,{label:t("SERVER_NAME")},d.default.createElement(h.Input,{name:"tlsConfig.serverName"})),d.default.createElement(h.Form.Item,null,d.default.createElement(h.Checkbox,{name:"tlsConfig.insecretSkipVerify"},t("SKIP_TLS_VERFICATION"))));break;case"bearerTokenSecret":e=d.default.createElement("div",null,d.default.createElement(h.Form.Item,{label:t("TOKEN")},d.default.createElement(E.default,{name:"bearerTokenSecret",secrets:this.secrets})));break;case"basicAuth":e=d.default.createElement("div",null,d.default.createElement(h.Form.Item,{label:t("USERNAME")},d.default.createElement(E.default,{name:"basicAuth.username",secrets:this.secrets})),d.default.createElement(h.Form.Item,{label:t("PASSWORD")},d.default.createElement(E.default,{name:"basicAuth.password",secrets:this.secrets})))}return e}},{key:"renderFormFooter",value:function(){return d.default.createElement("div",{className:y.default.footer},d.default.createElement(h.Button,{onClick:this.hideForm},t("CANCEL")),d.default.createElement(h.Button,{type:"control",onClick:this.handleSubmit},t("OK")))}},{key:"renderForm",value:function(){var e=this.props.formData,a=this.state.authType;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:y.default.form},d.default.createElement(v.default,{className:"margin-b12",title:t("SELECT_AUTHENTICATION_METHOD"),description:t("SELECT_AUTHENTICATION_METHOD_DESC")}),d.default.createElement("div",{className:"margin-b12"},d.default.createElement(h.RadioGroup,{mode:"button",value:a,options:this.authTypes,onChange:this.handleTypeChange})),d.default.createElement(h.Form,{type:"inner",data:e,ref:this.formRef},a&&d.default.createElement(h.Alert,{type:"default",className:"margin-b12",message:d.default.createElement("div",{className:y.default.secrets},d.default.createElement("a",{href:this.secretLink,target:"_blank",rel:"noopener noreferrer"},t("CREATE_A_NEW_SECRET"))," ","or"," ",d.default.createElement("a",{onClick:this.refreshSecrets},t("REFRESH_SECRETS")))}),d.default.createElement("div",{className:y.default.formContent},this.renderFormContent()))),this.renderFormFooter())}},{key:"render",value:function(){var e=this.props.value,a=void 0===e?"":e,r=this.authTypes.find((function(e){return e.value===a}));return d.default.createElement("div",{className:y.default.wrapper},d.default.createElement("div",{className:y.default.value,onClick:this.toggleForm},d.default.createElement(h.Icon,{className:y.default.prefix,name:"ssh"}),d.default.createElement("div",{className:y.default.text},t(r.label))),this.state.showForm&&d.default.createElement("div",{className:y.default.dropdown},this.renderForm()))}},{key:"authTypes",get:function(){return[{label:t("NO_AUTHENTICATION_TCAP"),value:""},{label:t("TLS"),value:"tlsConfig"},{label:t("BEARER_TOKEN_TCAP"),value:"bearerTokenSecret"},{label:t("BASIC_AUTHENTICATION_TCAP"),value:"basicAuth"}]}},{key:"secrets",get:function(){return this.props.secretStore.list.data.slice()}},{key:"secretLink",get:function(){var e=this.props,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/secrets")}}]),r}(d.Component))||o;a.default=g},function(e,t,a){e.exports={wrapper:"_7-12p6hcf7X0VthZc5rST"}},function(e,t,a){e.exports={wrapper:"QFLj8UnuHwB8eUvkccuQO",value:"_1N3EbBmVGw449bdtrhZ9tA",active:"_2Nqy5ogxFN8C1LiYg5mwvj",text:"_3TeYR97weviqqH5XNXDNd0",prefix:"qk7WG_i0cGpwd6nhbE0B1",close:"_2tJdLwTubLfIfkXCaMogNv",dropdown:"_1ixGABFhWGnoUHB1rZ2edU",form:"_3DeozV-jza89lR4S6N5UMv",formContent:"_1yrx5rcOi0RSiXneA38jJl",footer:"_1IsQznBkKj9Aj3RhiKr9n",secrets:"_1_J1EL6cHSGETRmetccLEt"}},function(e,t,a){e.exports={schema:"vTyPh-gfAQzV7xLNRFuD6"}},function(e,t,a){e.exports={wrapper:"_3oru1UiNeJWJ7CnfkFN0qI",timeout:"_3aAyTK47_-9SBJRbv5ouVP",endpoints:"_3mSGWi2nNaTPXqvGwCMpCg"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(766)),i=r(1831),f=n(r(274)),d=n(r(1838)),p=r(25),m=n(r(1840)),h=n(r(733)),v=n(r(73)),E=n(r(32)),y=n(r(185)),b=r(5);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={"cd.create":{on:function(e){var a,r=e.store,n=e.cluster,d=(e.workspace,e.module),m=e.success,y=(0,c.default)(e,["store","cluster","workspace","module","success"]),b=h.default[d](),g=f.default.open(_({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,s,i,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.syncPolicy.type,c="automated"===o?(0,u.default)({},o,{prune:a.syncPolicy.prune,selfHeal:a.syncPolicy.selfHeal}):(0,u.default)({},o,{}),s=_({repoURL:a.repoURL.match(/\(([\w\W]+)\)/)[1]},a.source),i=(0,E.default)(a.syncOptions)?void 0:Object.entries(a.syncOptions).reduce((function(e,t){var a="".concat(t[0],"=").concat(t[1]);return e.push(a),e}),[]),c.syncOptions=i,d={destination:a.destination,source:s,syncPolicy:c},(0,v.default)(b,"metadata",a.metadata),(0,v.default)(b,"spec.argoApp.spec",d),e.next=10,r.create({data:b,devops:y.devops,cluster:n});case 10:p.Notify.success({content:t("CREATE_SUCCESSFUL")}),m&&m(),f.default.close(g);case 13:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,module:d,cluster:n,formTemplate:{},modal:s.default,steps:i.CD_FORM},y))}},"cd.sync":{on:function(e){var a,r=e.store,n=e.cluster,u=(e.workspace,e.module),s=e.success,i=e.formTemplate,m=e.application,h=(0,c.default)(e,["store","cluster","workspace","module","success","formTemplate","application"]),b=f.default.open(_(_({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,y.default)(a),u=(0,E.default)(o.syncOptions)?void 0:Object.entries(o.syncOptions).reduce((function(e,t){var a="".concat(t[0],"=").concat(t[1]);return e.push(a),e}),[]),(0,v.default)(o,"syncOptions",u),(0,v.default)(o,"revision",a.repoSource.targetRevision),e.next=6,r.updateSync({data:o,devops:h.devops,cluster:n,application:m});case 6:p.Notify.success({content:t("SYNC_TRIGGERED")}),s&&s(),f.default.close(b);case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r},h),{},{module:u,cluster:n,formTemplate:i,modal:d.default},h))}},"cd.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=f.default.open(_({onOk:function(){f.default.close(o),p.Notify.success({content:t("DELETE_SUCCESSFUL")}),n&&n()},store:a,modal:m.default,resource:r},l))}},"cd.batch.delete":{on:function(e){var a=e.store,r=e.success,n=e.rowKey,l=void 0===n?"name":n,o=(0,c.default)(e,["store","success","rowKey"]),u=(0,b.toJS)(a.list),s=u.data,i=u.selectedRowKeys,d=s.filter((function(e){return i.includes(e[l])}));if(!(0,E.default)(d))var h=f.default.open(_({onOk:function(){f.default.close(h),p.Notify.success({content:t("DELETE_SUCCESSFUL")}),r&&r()},modal:m.default,resource:d,store:a},o))}}};a.default=S},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.CD_FORM=void 0;var n=r(a(1832)),l=r(a(1834)),o=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"DEPLOYMENT_SETTINGS",component:l.default,required:!0,icon:"rocket"}];t.CD_FORM=o},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(21)),u=n(r(50)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1080)),h=n(r(191)),v=r(25),E=r(58),y=n(r(1833));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=function(e){(0,i.default)(r,e);var a=_(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).codeStore=new m.default,e.state={options:[]},e.getRepoList=function(){var t=(0,u.default)(l.default.mark((function t(a){var r,n,o,u;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.devops,o=r.cluster,t.next=3,e.codeStore.fetchList(g({devops:n,cluster:o},a));case 3:u=e.codeStore.list.data.map((function(e){return{label:e.name,value:"".concat(e.name,"(").concat(e.repoURL,")"),icon:"bitbucket_server"===e.provider?"bitbucket":e.provider}})),e.setState({options:u});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.repoOptionRenderer=function(e){return function(t){return p.default.createElement("span",{className:y.default.option},p.default.createElement(v.Icon,{name:e.icon,type:"value"===t?"dark":"light"}),p.default.createElement("span",null,e.value))}},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.getRepoList()}},{key:"render",value:function(){var e=this,a=this.props,r=a.formRef,n=a.formTemplate;return p.default.createElement(v.Form,{ref:r,data:n},p.default.createElement(v.Columns,null,p.default.createElement(v.Column,null,p.default.createElement(v.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:E.PATTERN_NAME,message:t("INVALID_NAME_DESC")}]},p.default.createElement(v.Input,{name:"metadata.name",maxLength:63})),p.default.createElement(v.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(v.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))),p.default.createElement(v.Column,null,p.default.createElement(v.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},p.default.createElement(v.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),p.default.createElement(v.Form.Item,{label:t("CODE_REPOSITORY"),rules:[{required:!0,message:t("REPO_EMPTY_DESC")}]},p.default.createElement(v.Select,{name:"repoURL",options:this.state.options,valueRenderer:function(t){return e.repoOptionRenderer(t)("value")},optionRenderer:function(t){return e.repoOptionRenderer(t)("option")},pagination:(0,h.default)(this.codeStore.list,["page","limit","total"]),isLoading:this.codeStore.list.isLoading,onFetch:this.getRepoList,searchable:!0,clearable:!0})))}}]),r}(p.default.Component);a.default=S},function(e,t,a){e.exports={option:"_15uAGEdI1ccU0Ut3vp8560"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=r(25),p=n(r(636)),m=r(58),h=n(r(16)),v=n(r(73)),E=n(r(1835)),y=n(r(1837));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t){var a=e.props.formTemplate;(0,v.default)(a,"syncPolicy.type",t),e.forceUpdate()},e.handleReplace=function(t){var a=e.props.formTemplate;(0,v.default)(a,"syncOptions.Replace",t),e.forceUpdate()},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return f.default.createElement(d.Form,{data:r,ref:a},f.default.createElement("div",{className:y.default.wrapper},f.default.createElement("h6",null,t("DEPLOY_LOCATION")),f.default.createElement("div",{className:y.default.wrapper_item},f.default.createElement(d.Form.Item,{rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},f.default.createElement(E.default,(0,l.default)({name:"destination",prefix:"destination",formData:r},this.props))))),f.default.createElement("div",{className:y.default.wrapper},f.default.createElement("h6",null,t("CODE_REPOSITORY_SETTINGS")),f.default.createElement("div",{className:y.default.wrapper_item},f.default.createElement(d.Columns,null,f.default.createElement(d.Column,null,f.default.createElement(d.Form.Item,{label:t("REVISION"),desc:t("REVISION_DESC")},f.default.createElement(d.Input,{name:"source.targetRevision",defaultValue:"HEAD"}))),f.default.createElement(d.Column,null,f.default.createElement(d.Form.Item,{label:t("MANIFEST_FILE_PATH"),desc:t("MANIFEST_FILE_PATH_DESC")},f.default.createElement(d.Input,{name:"source.path",defaultValue:"."})))))),f.default.createElement("div",{className:y.default.wrapper},f.default.createElement("h6",null,t("SYNC_STRATEGY_TCAP")),f.default.createElement("div",{className:y.default.wrapper_item},f.default.createElement("div",{className:y.default.wrapper_item_com},f.default.createElement(d.Form.Item,null,f.default.createElement(p.default,{name:"syncPolicy.type",defaultValue:"automated",options:this.syncOptions,onChange:this.handleChange}))),"automated"===this.syncPolicyType&&f.default.createElement("div",{className:y.default.columns},f.default.createElement("div",{className:y.default.column},f.default.createElement(d.Form.Item,null,f.default.createElement(d.Checkbox,{name:"syncPolicy.prune"},t("PRUNE_RESOURCES")))),f.default.createElement("div",{className:y.default.column},f.default.createElement(d.Form.Item,null,f.default.createElement(d.Checkbox,{name:"syncPolicy.selfHeal"},t("SELF_HEAL"))))))),f.default.createElement("div",{className:y.default.wrapper},f.default.createElement("h6",null,t("SYNC_SETTINGS")),f.default.createElement("div",{className:y.default.wrapper_item},f.default.createElement("div",{className:"".concat(y.default.columns," ").concat(y.default.wrapper_item_com)},f.default.createElement("div",{className:y.default.column},f.default.createElement(d.Form.Item,null,f.default.createElement(d.Checkbox,{name:"syncOptions.Validate"},t("SKIP_SCHEMA_VALIDATION")))),f.default.createElement("div",{className:y.default.column},f.default.createElement(d.Form.Item,null,f.default.createElement(d.Checkbox,{name:"syncOptions.CreateNamespace"},t("AUTO_CREATE_PROJECT")))),f.default.createElement("div",{className:y.default.column},f.default.createElement(d.Form.Item,null,f.default.createElement(d.Checkbox,{name:"syncOptions.PruneLast"},t("PRUNE_LAST")))),f.default.createElement("div",{className:y.default.column},f.default.createElement(d.Form.Item,null,f.default.createElement(d.Checkbox,{name:"syncOptions.ApplyOutOfSyncOnly"},t("APPLY_OUT_OF_SYNC_ONLY"))))),f.default.createElement(d.Form.Item,{label:t("PRUNE_PROPAGATION_POLICY")},f.default.createElement(d.Select,{name:"syncOptions.PrunePropagationPolicy",options:m.PRUNE_PROPAGATION_POLICY_OPTIONS})),f.default.createElement(d.Form.Item,null,f.default.createElement("div",{className:y.default.checkbox_item},f.default.createElement(d.Checkbox,{name:"syncOptions.Replace",checked:this.getReplace,onChange:this.handleReplace}),f.default.createElement("div",{className:y.default.checkbox_item_info},f.default.createElement("p",null,t("REPLACE_RESOURCE")),f.default.createElement("span",null,t("REPLACE_RESOURCE_DESC"))))))))}},{key:"syncPolicyType",get:function(){var e,t,a=this.props.formTemplate;return null!==(e=null==a||null===(t=a.syncPolicy)||void 0===t?void 0:t.type)&&void 0!==e?e:"automated"}},{key:"syncOptions",get:function(){return m.SYNC_STRATEGY.map((function(e){var a=e.label,r=e.value,n=e.description;return{label:t(a),description:t(n),icon:"timed-task",value:r}}))}},{key:"getReplace",get:function(){var e=this.props.formTemplate;return(0,h.default)(e,"syncOptions.Replace",!1)}}]),r}(f.default.Component);a.default=g},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c,s,i=n(r(49)),f=n(r(21)),d=n(r(50)),p=n(r(91)),m=n(r(12)),h=n(r(13)),v=n(r(135)),E=n(r(19)),y=n(r(20)),b=n(r(18)),g=n(r(74)),_=(n(r(92)),l(r(0))),S=r(5),O=r(70),C=n(r(16)),T=n(r(73)),R=n(r(191)),D=n(r(185)),k=n(r(3)),N=r(25),P=n(r(275)),I=n(r(799)),w=n(r(753)),M=r(37),A=n(r(1836));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var F=(0,O.observer)((u=function(e){(0,E.default)(l,e);var a,r,n=L(l);function l(){var e;(0,m.default)(this,l);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).state={showForm:!1,initializing:!0,oldFormDate:{}},(0,p.default)(e,"formData",c,(0,v.default)(e)),e.formRef=_.default.createRef(),e.cdStore=e.props.store,e.projectStore=new w.default,e.fetchNamespaces=(0,d.default)(i.default.mark((function t(){var a,r,n,l=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:{},r=(0,C.default)(e.formData,"".concat(e.prefix,".name"),""),n=(0,M.inCluster2Default)(r),t.next=5,e.projectStore.fetchList(x(x({},a),{},{cluster:n,type:"user"}));case 5:case"end":return t.stop()}}),t)}))),e.handleClusterChange=function(t){e.fetchNamespaces();var a=e.clusters.find((function(e){return e.value===t})).server;(0,T.default)(e.formData,"".concat(e.prefix,".server"),a),(0,T.default)(e.formData,"".concat(e.prefix,".namespace"),"")},e.handleSubmit=function(){var t=e.formRef.current;t&&t.validate((function(){Object.assign(e.props.formData,x({},e.formData)),e.setState({showForm:!1,oldFormDate:(0,S.toJS)(e.formData)})}))},e.showForm=function(){e.setState({showForm:!0})},(0,p.default)(e,"hideForm",s,(0,v.default)(e)),e.projectOptionRenderer=function(e){return _.default.createElement("span",{className:A.default.option},e.isFedManaged?_.default.createElement("img",{className:A.default.indicator,src:"/assets/cluster.svg"}):_.default.createElement(N.Icon,{name:"project"}),e.label,e.isFedManaged&&_.default.createElement(N.Tooltip,{content:t("FEDPROJECT_CANNOT_DEPLOY_APP_TIP")},_.default.createElement(N.Icon,{className:A.default.tip,name:"question"})))},e}return(0,h.default)(l,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:(r=(0,d.default)(i.default.mark((function e(){var t,a,r,n,l,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({initializing:!0}),t=this.formData["".concat(this.prefix)]||{},a=t.cluster,r=t.server,n=t.namespace,e.next=4,this.fetchClusters();case 4:return a?!r&&a&&(l=this.clusters.find((function(e){return e.value===a})),(0,T.default)(this.formData,"".concat(this.prefix,".name"),(0,C.default)(this.clusters,l.value)),(0,T.default)(this.formData,"".concat(this.prefix,".server"),(0,C.default)(this.clusters,l.server))):((0,T.default)(this.formData,"".concat(this.prefix,".name"),(0,C.default)(this.clusters,"[0].value")),(0,T.default)(this.formData,"".concat(this.prefix,".server"),(0,C.default)(this.clusters,"[0].server"))),e.next=7,this.fetchNamespaces();case 7:n||(o=this.namespaces.find((function(e){return!e.disabled}))||{},(0,T.default)(this.formData,"".concat(this.prefix,".namespace"),o.value||"")),Object.assign(this.props.formData,this.formData),this.setState({initializing:!1,oldFormDate:(0,D.default)((0,S.toJS)(this.formData))});case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchClusters",value:(a=(0,d.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cdStore.getClustersList();case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderPlacement",value:function(){var e=this.props.formData["".concat(this.prefix)]||{},a=(0,M.inCluster2Default)(e.name);return _.default.createElement("div",{className:A.default.placement},_.default.createElement(P.default,{icon:"cluster",title:a,description:t("CLUSTER")}),_.default.createElement(P.default,{icon:"project",title:e.namespace,description:t("PROJECT")}),_.default.createElement(N.Icon,{className:A.default.icon,name:"chevron-down",size:20}))}},{key:"renderForm",value:function(){return _.default.createElement("div",{className:A.default.form},_.default.createElement(N.Form,{ref:this.formRef,type:"inner",data:this.formData},_.default.createElement(N.Columns,null,_.default.createElement(N.Column,null,_.default.createElement(N.Form.Item,{label:t("CLUSTER")},_.default.createElement(N.Select,{name:"".concat(this.prefix,".name"),placeholder:" ",options:this.clusters,onChange:this.handleClusterChange,prefixIcon:_.default.createElement(N.Icon,{name:"cluster",size:16}),disabled:!globals.app.isMultiCluster}))),_.default.createElement(N.Column,null,_.default.createElement(N.Form.Item,{label:t("PROJECT"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},_.default.createElement(N.Select,{name:"".concat(this.prefix,".namespace"),placeholder:" ",options:this.namespaces,pagination:(0,R.default)(this.projectStore.list,["page","limit","total"]),isLoading:this.projectStore.list.isLoading,onFetch:this.fetchNamespaces,valueRenderer:this.projectOptionRenderer,optionRenderer:this.projectOptionRenderer,searchable:!0,clearable:!0}))))),_.default.createElement(I.default,{className:A.default.confirm,onOk:this.handleSubmit,onCancel:this.hideForm}))}},{key:"render",value:function(){var e=this.state,a=e.showForm,r=e.initializing;if(a)return this.renderForm();var n=(0,C.default)(this.formData,"".concat(this.prefix,".namespace"),"");return _.default.createElement("div",{className:(0,k.default)(A.default.wrapper,(0,f.default)({},A.default.expand,a)),onClick:this.showForm},n?this.renderPlacement():_.default.createElement("div",{className:A.default.placeholder},r?_.default.createElement(N.Loading,{className:"text-center"}):t("PROJECT_NOT_SELECT_DESC")))}},{key:"prefix",get:function(){return"".concat(this.props.prefix)}},{key:"clusters",get:function(){return this.cdStore.clustersList.map((function(e){return{label:e.label,value:e.name,server:e.server}}))}},{key:"namespaces",get:function(){return this.projectStore.list.data.filter((function(e){return"Terminating"!==e.status})).map((function(e){return{label:e.name,value:e.name,disabled:e.isFedManaged||e.isFedHostNamespace,isFedManaged:e.isFedManaged||e.isFedHostNamespace}}))}}]),l}(_.Component),c=(0,g.default)(u.prototype,"formData",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,g.default)(u.prototype,"clusters",[S.computed],Object.getOwnPropertyDescriptor(u.prototype,"clusters"),u.prototype),(0,g.default)(u.prototype,"namespaces",[S.computed],Object.getOwnPropertyDescriptor(u.prototype,"namespaces"),u.prototype),s=(0,g.default)(u.prototype,"hideForm",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.setState({showForm:!1},(function(){e.formData=e.state.oldFormDate,Object.assign(e.props.formData,x({},e.formData))}))}}}),o=u))||o;a.default=F},function(e,t,a){e.exports={wrapper:"_3z2Z9hMemOOjjGphBi-8sh",placeholder:"KK7SUBB92n4Wwek-F2DYR",form:"_3pVLZicpx-Rbr0egCKsLK",confirm:"DslrrnKn_QmqZZLCpJxuA",placement:"_2Q-2XDFS-FUOb9mjjlCrYc",icon:"_1HSRuvA-86V8m58eHsUJvR",option:"Dxyd1qFSZm73dPMUuSqdc",tip:"_3S0tzXh5APNgwIS8ONi0s1"}},function(e,t,a){e.exports={wrapper:"_2WM8RaHnX302GtVMQoockj",wrapper_item:"_3WHiQJESkkmkKUETUZDK7z",wrapper_item_com:"KbHgVKqkYN8OupMTkbuFy",columns:"_1yKeq_LeyKarIIzY73TOgp",column:"_1YPZVH0-nIPRRoaimprUFZ",checkbox_item:"_3WSjc9REBmpf1Sx1-QYZ5x",checkbox_item_info:"_3JHpRYGlKl_mW0VdmtimLO"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(1)),v=r(25),E=n(r(274)),y=n(r(16)),b=n(r(73)),g=r(58),_=n(r(1839));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,m.observer)((u=o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).form=p.default.createRef(),e.handleSubmit=function(){(0,e.props.onOk)(e.form.current.getData())},e.handleCheckboxChange=function(t){return function(a){var r=e.props.formTemplate;(0,b.default)(r,t,a),e.forceUpdate()}},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.onCancel,l=e.formTemplate;return p.default.createElement(E.default,{width:960,title:a||t("CREATE_ROLE"),onCancel:n,onOk:this.handleSubmit,visible:r},p.default.createElement(v.Form,{ref:this.form,data:l},p.default.createElement("div",{className:_.default.columns},p.default.createElement("div",{className:_.default.column},p.default.createElement(v.Form.Item,{label:t("CODE_REPOSITORY_URL")},p.default.createElement(v.Input,{name:"repoSource.repoURL",disabled:!0}))),p.default.createElement("div",{className:_.default.column},p.default.createElement(v.Form.Item,{label:t("REVISION"),desc:t("REVISION_DESC")},p.default.createElement(v.Input,{name:"repoSource.targetRevision"})))),p.default.createElement("div",{className:_.default.columns},p.default.createElement("div",{className:"".concat(_.default.column," ").concat(_.default.column_card)},p.default.createElement(v.Form.Item,null,p.default.createElement(v.Checkbox,{name:"prune",checked:(0,y.default)(l,"prune",!1),onChange:this.handleCheckboxChange("prune")},t("PRUNE")))),p.default.createElement("div",{className:"".concat(_.default.column," ").concat(_.default.column_card)},p.default.createElement(v.Form.Item,null,p.default.createElement(v.Checkbox,{name:"dryRun",checked:(0,y.default)(l,"dryRun",!1),onChange:this.handleCheckboxChange("dryRun")},t("DRY_RUN")))),p.default.createElement("div",{className:"".concat(_.default.column," ").concat(_.default.column_card)},p.default.createElement(v.Form.Item,null,p.default.createElement(v.Checkbox,{name:"applyOnly",checked:(0,y.default)(l,"applyOnly",!1),onChange:this.handleCheckboxChange("applyOnly")},t("APPLY_ONLY")))),p.default.createElement("div",{className:"".concat(_.default.column," ").concat(_.default.column_card)},p.default.createElement(v.Form.Item,null,p.default.createElement(v.Checkbox,{name:"syncStrategy.apply.force",checked:(0,y.default)(l,"syncStrategy.apply.force",!1),onChange:this.handleCheckboxChange("syncStrategy.apply.force")},t("FORCE"))))),p.default.createElement("div",{className:_.default.wrapper},p.default.createElement("h6",null,t("SYNC_SETTINGS")),p.default.createElement("div",{className:_.default.wrapper_item},p.default.createElement("div",{className:"".concat(_.default.columns," ").concat(_.default.wrapper_item_com)},p.default.createElement("div",{className:"".concat(_.default.column," ").concat(_.default.column_card)},p.default.createElement(v.Form.Item,null,p.default.createElement(v.Checkbox,{name:"syncOptions.Validate",checked:(0,y.default)(l,"syncOptions.Validate",!1),onChange:this.handleCheckboxChange("syncOptions.Validate")},t("SKIP_SCHEMA_VALIDATION")))),p.default.createElement("div",{className:"".concat(_.default.column," ").concat(_.default.column_card)},p.default.createElement(v.Form.Item,null,p.default.createElement(v.Checkbox,{name:"syncOptions.CreateNamespace",checked:(0,y.default)(l,"syncOptions.CreateNamespace",!1),onChange:this.handleCheckboxChange("syncOptions.CreateNamespace")},t("AUTO_CREATE_PROJECT")))),p.default.createElement("div",{className:"".concat(_.default.column," ").concat(_.default.column_card)},p.default.createElement(v.Form.Item,null,p.default.createElement(v.Checkbox,{name:"syncOptions.PruneLast",checked:(0,y.default)(l,"syncOptions.PruneLast",!1),onChange:this.handleCheckboxChange("syncOptions.PruneLast")},t("PRUNE_LAST")))),p.default.createElement("div",{className:"".concat(_.default.column," ").concat(_.default.column_card)},p.default.createElement(v.Form.Item,null,p.default.createElement(v.Checkbox,{name:"syncOptions.ApplyOutOfSyncOnly",checked:(0,y.default)(l,"syncOptions.ApplyOutOfSyncOnly",!1),onChange:this.handleCheckboxChange("syncOptions.ApplyOutOfSyncOnly")},t("APPLY_OUT_OF_SYNC_ONLY"))))),p.default.createElement(v.Form.Item,{label:t("PRUNE_PROPAGATION_POLICY")},p.default.createElement(v.Select,{name:"syncOptions.PrunePropagationPolicy",options:g.PRUNE_PROPAGATION_POLICY_OPTIONS})),p.default.createElement(v.Form.Item,null,p.default.createElement("div",{className:_.default.checkbox_item},p.default.createElement(v.Checkbox,{name:"syncOptions.Replace",checked:(0,y.default)(l,"syncOptions.Replace",!1),onChange:this.handleCheckboxChange("syncOptions.Replace")}),p.default.createElement("div",{className:_.default.checkbox_item_info},p.default.createElement("p",null,t("REPLACE_RESOURCE")),p.default.createElement("span",null,t("REPLACE_RESOURCE_DESC")))))))))}}]),r}(p.default.Component),o.propTypes={store:h.default.object,module:h.default.string,formTemplate:h.default.object,title:h.default.string,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,t,a){e.exports={wrapper:"_1JWzJvszLMHMLyb-TeoMIz",wrapper_item:"jPIV0cqgpuJN1jf3JSDcW",wrapper_item_com:"_1g3AWoSQifeaTpuwYERL_V",columns:"_16FyP4wau96WlEXWJRsJ1R",column:"_20iJTIApnqzOwXgexIuLpL",column_card:"_1uqoIVdzmWb1Y5-WFbQxE2",checkbox_item:"eZ9DmMZilf8qIV78FSsGk",checkbox_item_info:"_2ODKbWRDaRBjg1GoWej9KM"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(109)),c=n(r(49)),s=n(r(21)),i=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(0)),E=n(r(1)),y=n(r(3)),b=n(r(16)),g=n(r(23)),_=n(r(32)),S=r(25),O=r(37),C=n(r(274)),T=n(r(751)),R=n(r(1842));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var P=function(e){(0,p.default)(n,e);var a,r=N(n);function n(e){var t;return(0,f.default)(this,n),(t=r.call(this,e)).stopPropagation=function(e){return e.stopPropagation()},t.handleOk=(0,i.default)(c.default.mark((function e(){var a,r,n,l,o,u;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,r=a.onOk,n=a.store,l=a.resource,o=t.state.selectedRelatedResourceIds,!(0,g.default)(l)){e.next=10;break}return u=[],l.forEach((function(e){u.push(n.delete(k(k({},e),{},{isRelated:o.includes(e.uid)})))})),e.next=7,Promise.all(u);case 7:n.list.setSelectRowKeys([]),e.next=12;break;case 10:return e.next=12,n.delete(k(k({},l),{},{isRelated:o.includes(l.uid)}));case 12:r();case 13:case"end":return e.stop()}}),e)}))),t.handleItemClick=function(e){var a=e.currentTarget.dataset.id;t.setState((function(e){var t=e.selectedRelatedResourceIds;return{selectedRelatedResourceIds:t.includes(a)?t.filter((function(e){return e!==a})):[].concat((0,u.default)(t),[a])}}))},t.state={enableConfirm:!1,selectedRelatedResourceIds:[],relatedResources:[],timer:3},t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.visible&&(this.fetchRelatedResources(this.props.resource),this.startTimer())}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"startTimer",value:function(){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.setState((function(e){var t=e.timer;return{timer:Math.max(t-1,0),enableConfirm:t<=1}}),(function(){e.state.enableConfirm&&e.timer&&clearInterval(e.timer)}))}),1e3)}},{key:"fetchRelatedResources",value:(a=(0,i.default)(c.default.mark((function e(t){var a;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0}),a=[],(0,g.default)(t)?a=t.filter((function(e){return(0,b.default)(e,"status.operationState.syncResult.resources")})):(0,b.default)(t,"status.operationState.syncResult.resources")&&a.push(t),this.setState({relatedResources:a,isLoading:!1});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"renderContent",value:function(){var e=this,a=this.state,r=a.isLoading,n=a.relatedResources,l=void 0===n?[]:n,o=a.selectedRelatedResourceIds;return!1===r&&(0,_.default)(l)?v.default.createElement(T.default,{icon:"appcenter",className:R.default.empty,title:t("NO_RELATED_RESOURCE_FOUND"),desc:t("NO_CONTINUOUS_DEPLOYMENT_RELATED_RESOURCE_DESC")}):v.default.createElement("div",{className:R.default.resources},l.map((function(a){return v.default.createElement("div",{key:a.uid,"data-id":a.uid,className:(0,y.default)(R.default.resource,(0,s.default)({},R.default.selected,o.includes(a.uid))),onClick:e.handleItemClick},v.default.createElement(S.Checkbox,{checked:o.includes(a.uid),onClick:e.stopPropagation}),v.default.createElement("span",{className:R.default.resourceName},t("DELETE_CONTINUOUS_DEPLOYMENT_RELATE_DESC",{resourceName:(0,O.getDisplayName)(a)})))})))}},{key:"render",value:function(){var e=this.state,a=e.enableConfirm,r=e.timer,n=this.props,u=n.resource,c=(n.onOk,n.onCancel),s=n.isSubmitting,i=(0,o.default)(n,["resource","onOk","onCancel","isSubmitting"]),f=(0,g.default)(u)&&1!==u.length?t("DELETE_MULTIPLE_CONTINUOUS_DEPLOYMENT"):t("DELETE_CONTINUOUS_DEPLOYMENT"),d=(0,g.default)(u)&&1!==u.length?t.html("DELETE_CONTINUOUS_DEPLOYMENT_DESC_PL",{resource:u.map((function(e){return e.name})).join(", ")}):(0,g.default)(u)?t.html("DELETE_CONTINUOUS_DEPLOYMENT_DESC_SI",{resource:u.map((function(e){return e.name})).join(", ")}):t.html("DELETE_CONTINUOUS_DEPLOYMENT_DESC_SI",{resource:u.name});return v.default.createElement(C.default,(0,l.default)({width:520,icon:"question",title:f,description:d,closable:!1,headerClassName:R.default.modalHeader,bodyClassName:R.default.modalBody,hideFooter:!0},i),v.default.createElement("div",{className:R.default.body},this.renderContent()),v.default.createElement("div",{className:R.default.footer},v.default.createElement(S.Button,{onClick:c},t("CANCEL")),v.default.createElement(S.Button,{type:"danger",loading:s,disabled:!a||s,onClick:this.handleOk},t("OK"),!a&&"(".concat(r,"s)"))))}}]),n}(v.default.Component);a.default=P,P.propTypes={resource:E.default.any,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},P.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},,function(e,t,a){e.exports={modalHeader:"_2lUQSyRfiU4YeUhpf3zy-S",modalBody:"lqJikp16zKqK2K6UdEZRC",body:"_3fuZLbetwSCcB4MdawzMUz",resources:"_3fvP-ruxRguMGNneJS2MpF",resource:"_2CjGmdFLkb6HwhcdVWr2SY",selected:"ZkJD8LpYhq9rBgigtk_Gk",resourceName:"Z6J-Axt0vkY2P2lsm_aeD",resourceType:"_36zKd2MIRxtDYumA5aAV3C",footer:"TnEEvRuFYrOxJJQybpWrJ",empty:"_32qukyLlop_kvPys-weyK_"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(16)),i=n(r(73)),f=n(r(738)),d=n(r(185)),p=r(25),m=n(r(274)),h=n(r(1844)),v=r(1249),E=r(1081),y=n(r(1e3)),b=r(37),g=n(r(760)),_=n(r(1880));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C={"cluster.add":{on:function(e){var a=e.store,r=e.module,n=e.success,u=(0,c.default)(e,["store","module","success"]);a.kubekey=new y.default;var i,f=(0,d.default)(E.IMPORT_CLUSTER_SPEC),b=m.default.open(O({onOk:(i=(0,o.default)(l.default.mark((function e(r){var o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(o=(0,s.default)(r,'metadata.annotations["kubesphere.io/way-to-add"]'),u=(0,s.default)(r,"metadata.name"),"new"!==o){e.next=9;break}return e.next=7,R(a.kubekey,r);case 7:e.next=11;break;case 9:return e.next=11,T(a,r);case 11:m.default.close(b),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),n&&n("/clusters/".concat(u));case 14:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),module:r,formTemplate:f,title:t("ADD_CLUSTER"),steps:v.IMPORT_CLUSTER,modal:h.default,store:a},u))}},"cluster.unbind":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=m.default.open(O({onOk:function(){a.delete(r).then((function(){m.default.close(o),p.Notify.success({content:t("UNBIND_SUCCESS")}),n&&n()}))},store:a,modal:g.default,title:t("UNBIND_CLUSTER"),resource:r.name,deleteCluster:!0},l))}},"cluster.updateKubeConfig":{on:function(e){var a,r=e.store,n=e.detail,u=(e.cluster,e.success),s=(0,c.default)(e,["store","detail","cluster","success"]),f=m.default.open(O({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,d.default)(a),(0,i.default)(o,"kubeconfig",window.btoa(o.kubeconfig)),e.next=4,r.updateKubeConfig({cluster:n.name,data:o});case 4:m.default.close(f),p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:n,title:t("UPDATE_KUBECONFIG"),formTemplate:{kubeconfig:{}},modal:_.default},s))}}};a.default=C;var T=function(){var e=(0,o.default)(l.default.mark((function e(t,a){var r,n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,d.default)(a),"proxy"!==(0,s.default)(r,"spec.connection.type")){e.next=5;break}(0,f.default)(r,"spec.connection.kubeconfig"),e.next=9;break;case 5:return n=(0,s.default)(r,"spec.connection.kubeconfig",""),(0,i.default)(r,"spec.connection.kubeconfig",window.btoa(n)),e.next=9,t.validate(r);case 9:return e.next=11,t.create(r);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(e,t){var a=(0,s.default)(t,"spec.registry.privateRegistry","");a&&(a="".concat(a,"/").replace(/\/\/$/,"/"));var r=(0,b.safeParseJSON)(JSON.stringify(t).replace(/\$\{spec\.registry\.privateRegistry\}/g,a),{});return e.create(r)}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(135)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(16)),d=n(r(185)),p=n(r(93)),m=n(r(0)),h=n(r(1)),v=r(25),E=n(r(274)),y=n(r(808)),b=r(58),g=n(r(1845)),_=n(r(1847)),S=n(r(1849));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=function(e){(0,c.default)(r,e);var a=O(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).setSteps=function(e){t.setState({steps:e})},t.setCurrentStep=function(e){t.setState({currentStep:e})},t.setFormData=function(e){t.setState({formTemplate:e})},t.handleOk=function(){var e;e=t.state.isCodeMode&&(0,p.default)((0,f.default)((0,o.default)(t),"codeRef.current.getData"))?t.codeRef.current.getData():t.state.formTemplate,t.props.onOk(e)},t.handlePrev=function(){t.setState((function(e){var t=e.currentStep;return{currentStep:Math.max(0,t-1)}}))},t.handleNext=function(){var e=t.formRef.current,a=t.state.steps;e&&e.validate((function(){t.setState((function(e){var t=e.currentStep;return{currentStep:Math.min(a.length-1,t+1)}}))}))},t.handleModeChange=function(){t.setState((function(e){var a=e.isCodeMode,r=e.formTemplate;return a&&(0,p.default)((0,f.default)((0,o.default)(t),"codeRef.current.getData"))&&(r=t.codeRef.current.getData()),{isCodeMode:!a,formTemplate:r}}))},t.state={currentStep:0,steps:e.steps,formTemplate:(0,d.default)(e.formTemplate)},t.formRef=m.default.createRef(),t.codeRef=m.default.createRef(),t}return(0,u.default)(r,[{key:"getChildContext",value:function(){return{setSteps:this.setSteps,setCurrentStep:this.setCurrentStep,setFormData:this.setFormData}}}]),(0,u.default)(r,[{key:"renderForm",value:function(){var e=this.props.store,t=this.state,a=t.formTemplate,r=t.steps[t.currentStep].component,n={store:e,formTemplate:a,formRef:this.formRef};return m.default.createElement("div",{className:S.default.wrapper},m.default.createElement("div",{className:S.default.form},m.default.createElement(r,n)))}},{key:"renderCode",value:function(){var e=this.state.formTemplate;return m.default.createElement(_.default,{ref:this.codeRef,formTemplate:e})}},{key:"renderHeader",value:function(){var e=this.props,a=e.module,r=e.title,n=e.onCancel,l=this.state,o=l.steps,u=l.currentStep,c=l.isCodeMode;return m.default.createElement("div",{className:S.default.header},m.default.createElement("div",{className:S.default.title},m.default.createElement(v.Icon,{name:"close",size:20,clickable:!0,onClick:n}),m.default.createElement("span",null),m.default.createElement(v.Icon,{name:b.ICON_TYPES[a],size:20}),m.default.createElement("span",null,r)),!c&&m.default.createElement("div",{className:S.default.steps},m.default.createElement("div",null),m.default.createElement(g.default,{steps:o,current:u})),m.default.createElement(y.default,{className:S.default.switch,text:t("EDIT_YAML"),onChange:this.handleModeChange,checked:c}),m.default.createElement("div",{className:S.default.headerBottom}))}},{key:"renderFooter",value:function(){var e=this.props,a=e.onCancel,r=e.isSubmitting,n=this.state,l=n.steps,o=n.currentStep;if(n.isCodeMode)return m.default.createElement("div",{className:S.default.footer},m.default.createElement("div",{className:S.default.wrapper},m.default.createElement("div",{className:"text-right"},m.default.createElement(v.Button,{onClick:a},t("CANCEL")),m.default.createElement(v.Button,{type:"control",onClick:this.handleOk,loading:r},t("Create")))));var u=l.length-1;return m.default.createElement("div",{className:S.default.footer},m.default.createElement("div",{className:S.default.wrapper},m.default.createElement("div",{className:"text-right"},m.default.createElement(v.Button,{onClick:a},t("CANCEL")),o>0&&m.default.createElement(v.Button,{type:"control",onClick:this.handlePrev},t("PREVIOUS")),o<u?m.default.createElement(v.Button,{type:"control",onClick:this.handleNext},t("NEXT")):m.default.createElement(v.Button,{type:"control",onClick:this.handleOk,loading:r},t("Create")))))}},{key:"render",value:function(){var e=this.props.visible,t=this.state.isCodeMode;return m.default.createElement(E.default,{className:S.default.modal,bodyClassName:S.default.body,visible:e,hideHeader:!0,hideFooter:!0,fullScreen:!0},this.renderHeader(),m.default.createElement("div",{className:S.default.content},t?this.renderCode():this.renderForm()),this.renderFooter())}}]),r}(m.default.Component);a.default=C,C.propTypes={formTemplate:h.default.object,steps:h.default.array,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func},C.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},C.childContextTypes={setSteps:h.default.func,setCurrentStep:h.default.func,setFormData:h.default.func}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(12)),u=l(r(13)),c=l(r(19)),s=l(r(20)),i=l(r(18)),f=n(r(0)),d=r(25),p=l(r(1846));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=m(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.steps,r=e.current;return f.default.createElement("div",{className:p.default.wrapper},a.map((function(e,a){return f.default.createElement("div",{key:e.title},r>=a?f.default.createElement(d.Icon,{name:"success",type:"coloured",size:12}):f.default.createElement(d.Icon,{name:"dot",type:"light",size:12}),f.default.createElement("span",null,t(e.title)))})))}}]),r}(f.Component);a.default=h},function(e,t,a){e.exports={wrapper:"VcopeKzgXdwSpnCTVNt0h"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=n(r(185)),p=r(25),m=n(r(870)),h=n(r(1848));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=v(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).data=(0,d.default)(e.formTemplate),t.editor=i.default.createRef(),t}return(0,o.default)(r,[{key:"getData",value:function(){return this.editor.current.getData()}},{key:"render",value:function(){return i.default.createElement("div",{className:h.default.wrapper},i.default.createElement("div",{className:h.default.step},i.default.createElement("div",null,t("EDIT_YAML")),i.default.createElement("p",null,t("CREATE_BY_YAML_DESC"))),i.default.createElement("div",{className:h.default.codeWrapper},i.default.createElement("div",{className:h.default.pane},i.default.createElement("div",{className:h.default.title},i.default.createElement(p.Icon,{name:"coding",size:20}),i.default.createElement("span",null,t("EDIT_YAML"))),i.default.createElement(m.default,{ref:this.editor,className:h.default.editor,value:this.data}))))}}]),r}(i.default.Component);a.default=E,E.propTypes={formTemplate:f.default.object,onOk:f.default.func,isSubmitting:f.default.bool},E.defaultProps={onOk:function(){},isSubmitting:!1}},function(e,t,a){e.exports={wrapper:"_2bLRs43o7z2Z0l0OqV3S3l",step:"_3ABigQDpD_68K0K2-zPwo1",codeWrapper:"_35rMFFtZtEQsJ1XnlGrRIT",pane:"_1IXTMNwey-PU6zqsfimMcO",editor:"_2-LDXYPFV_Swq3SZk8_dTY",title:"_8xagm1IYbXzrlonLdlZLT"}},function(e,t,a){e.exports={modal:"_3udZ9JU41jkQT15SM6VQqy",body:"_3zIqgTb5iRnwYJult2OSjW",wrapper:"_1GY1dBmycuTqs5z5O4U5i1",steps:"_1j6BiFUqlNymOz_lSW28U7",header:"_1y3eAJkaBREv2CFp4dIBeY",headerBottom:"_3srgYWH6bHux51Zn3xQeOG",title:"_3sSfECiQrD_nXjhQGwbY6d",content:"_3_hijI-MOd78wmqLgMzBbx",footer:"_1nQdSbl4yf_TN2MYcxvNhu"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=n(r(185)),p=n(r(73)),m=r(25),h=r(1249),v=n(r(906)),E=r(1081),y=n(r(1852));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).STEPS={new:h.NEW_CLUSTER,import:h.IMPORT_CLUSTER},e.SPECS={new:E.NEW_CLUSTER_SPEC,import:E.IMPORT_CLUSTER_SPEC},e.handleChange=function(t){e.context.setSteps(e.STEPS[t]);var a=(0,d.default)(e.SPECS[t]);(0,p.default)(a,"metadata.annotations['kubesphere.io/way-to-add']",t),e.context.setFormData(a)},e}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.props.store.kubekey.fetchParameters()}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return i.default.createElement("div",{className:y.default.wrapper},i.default.createElement(v.default,{title:t("SELECT_ADD_CLUSTER_METHOD"),description:t("SELECT_ADD_CLUSTER_METHOD_DESC")}),i.default.createElement(m.Form,{data:r,ref:a},i.default.createElement(m.Form.Item,{className:y.default.cards},i.default.createElement(m.RadioGroup,{name:"metadata.annotations['kubesphere.io/way-to-add']",onChange:this.handleChange,defaultValue:"new"},i.default.createElement(m.Radio,{value:"new"},i.default.createElement(m.Icon,{name:"kubernetes",size:48}),i.default.createElement("span",null,t("New Cluster"))),i.default.createElement(m.Radio,{value:"import"},i.default.createElement(m.Icon,{name:"hammer",size:48}),i.default.createElement("span",null,t("Import Cluster")))))))}}]),r}(i.default.Component);a.default=g,g.contextTypes={setSteps:f.default.func,setFormData:f.default.func}},function(e,t,a){e.exports={text:"_3y0BRfqtNHZn6ztqSjBlZv"}},function(e,t,a){e.exports={wrapper:"_2rN8KkaFhFv7O2Ix_c84Ib",cards:"cBamJ--YMZwFF5HHxaU-E"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=r(25),p=r(58),m=n(r(906)),h=n(r(1854)),v=n(r(1856)),E=n(r(1858));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=y(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).groupOptionRenderer=function(e){return i.default.createElement(i.default.Fragment,null,i.default.createElement(d.Tag,{type:p.CLUSTER_GROUP_TAG_TYPE[e.value]},t("ENV_".concat(e.label.toUpperCase()))),"",e.label)},e.providerOptionRenderer=function(e){return i.default.createElement(i.default.Fragment,null,i.default.createElement(d.Icon,{className:"margin-r8",name:e.icon,type:"light",size:20}),e.label)},e.nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e.nodesValidator=function(a,r,n){if(!r)return n();var l=(0,f.default)(e.props.formTemplate,"spec.roleGroups.master.length",0),o=(0,f.default)(e.props.formTemplate,"spec.roleGroups.worker.length",0),u=[];if(1!==l&&3!==l&&u.push(t("MASTER_NODE_COUNT_TIP")),0===o&&u.push(t("WORKER_NODE_COUNT_TIP")),u.length>0)return n({message:u.join("; "),field:a.field});n()},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=this.method;return i.default.createElement("div",{className:E.default.wrapper},"new"===n?i.default.createElement(m.default,{title:t("New Cluster"),description:t("NEW_CLUSTER_DESC")}):i.default.createElement(m.default,{title:t("Import Cluster"),description:t("IMPORT_CLUSTER_DESC")}),i.default.createElement(d.Form,{data:r,ref:a},i.default.createElement(h.default,{title:t("Cluster Basic Info")}),i.default.createElement(d.Form.Item,{label:t("CLUSTER_NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("Please input cluster name")},{pattern:p.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},i.default.createElement(d.Input,{name:"metadata.name",maxLength:63})),i.default.createElement(d.Form.Item,{label:t("TAG"),desc:t("CLUSTER_TAG_DESC")},i.default.createElement(d.Select,{name:"metadata.labels['cluster.kubesphere.io/group']",options:p.CLUSTER_PRESET_GROUPS,placeholder:t("Please select or input a tag"),optionRenderer:this.groupOptionRenderer,searchable:!0})),i.default.createElement(d.Form.Item,{label:t("PROVIDER"),desc:t("CLUSTER_PROVIDER_DESC")},i.default.createElement(d.Select,{name:"spec.provider",options:p.CLUSTER_PROVIDERS,placeholder:t("Please select or input a provider"),optionRenderer:this.providerOptionRenderer,searchable:!0})),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})),"new"===n&&i.default.createElement(i.default.Fragment,null,i.default.createElement(h.default,{className:E.default.nodesTitle,title:t("Node Settings"),description:t("CLUSTER_NODE_SETTINGS_DESC")}),i.default.createElement(d.Form.Item,{rules:[{required:!0,message:t("Please add at least one cluster node")},{validator:this.nodesValidator}]},i.default.createElement(v.default,{name:"spec.hosts",formTemplate:r})))))}},{key:"method",get:function(){return(0,f.default)(this.props.formTemplate,"metadata.annotations['kubesphere.io/way-to-add']")}}]),r}(i.default.Component);a.default=b},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,a=e.title,r=e.description;return n.default.createElement("div",{className:(0,l.default)(o.default.text,t)},n.default.createElement("div",null,a),n.default.createElement("p",null,r))};var n=r(a(0)),l=r(a(3)),o=r(a(1855))},function(e,t,a){e.exports={text:"_516bLC4y2eCDP-7u4_h68"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(73)),p=n(r(16)),m=n(r(3)),h=n(r(1)),v=n(r(652)),E=n(r(1857)),y=n(r(1250)),b=n(r(1251));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={showAdd:!1,selectIndex:-1},e.showAdd=function(){e.setState({showAdd:!0,selectIndex:-1})},e.hideAdd=function(){e.setState({showAdd:!1,selectIndex:-1})},e.showEdit=function(t){e.setState({showAdd:!0,selectIndex:t})},e.handleAdd=function(t){var a=e.props,r=a.value,n=a.onChange,o=e.state.selectIndex;o>=0?(r[o]=t,n(r)):n([].concat((0,l.default)(r),[t])),e.updateRoleGroups(),e.hideAdd()},e.updateRoleGroups=function(){var t=e.props.formTemplate,a=(0,p.default)(t,"spec.hosts",[]),r={};a.forEach((function(e){e.roles&&e.roles.forEach((function(t){r[t]=r[t]||[],r[t].push(e.name)}))})),r.etcd=r.master,(0,d.default)(t,"spec.roleGroups",r)},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)(r.filter((function(e){return e.name!==t.name}))),e.updateRoleGroups()},e}return(0,u.default)(r,[{key:"renderNodes",value:function(){var e=this;return this.props.value.map((function(t,a){return f.default.createElement(E.default,{node:t,key:t.name,index:a,onEdit:e.showEdit,onDelete:e.handleDelete})}))}},{key:"renderAdd",value:function(){return f.default.createElement(v.default.Add,{icon:"add",title:t("ADD_NODE"),description:t("Add node to the cluster"),onClick:this.showAdd})}},{key:"renderModal",value:function(){var e=this.props.value,t=this.state,a=t.showAdd,r=t.selectIndex,n=r>=0?e[r]:void 0;return f.default.createElement(y.default,{visible:a,data:n,onOk:this.handleAdd,onCancel:this.hideAdd})}},{key:"render",value:function(){var e=this.props.className;return f.default.createElement("div",{className:(0,m.default)(b.default.wrapper,e)},this.renderNodes(),this.renderAdd(),this.renderModal())}}]),r}(f.default.Component);a.default=_,_.propTypes={className:h.default.string,name:h.default.string,value:h.default.array,onChange:h.default.func,onDelete:h.default.func},_.defaultProps={className:"",name:"",value:[],readOnlyList:[],specTemplate:{},onChange:function(){}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),l=r(a(1)),o=a(25),u=a(58),c=r(a(652)),s=function(e){var t=e.index,a=e.node,r=e.onDelete,l=e.onEdit,s=n.default.createElement("span",null,a.name,a.roles.map((function(e){return n.default.createElement(o.Tag,{key:e,className:"margin-l8",type:u.NODE_ROLE_TAG_TYPE[e]},e)})));return n.default.createElement(c.default.Item,{icon:"nodes",title:s,description:a.address,onDelete:function(){return r(a)},onEdit:function(){return l(t)}})};s.propTypes={node:l.default.object};var i=s;t.default=i},function(e,t,a){e.exports={wrapper:"_1NNvsOKzvpG4TQpNcfk82r",nodesTitle:"gzd5RQSNJkEmTlh20fpt_"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=r(25),d=n(r(275)),p=n(r(870)),m=n(r(16)),h=n(r(906)),v=n(r(1860));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleTypeChange=function(e){t.setState({connectType:e})},t.state={connectType:(0,m.default)(e.formTemplate,"spec.connection.type","direct")},t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=this.state.connectType;return i.default.createElement("div",null,i.default.createElement(h.default,{title:t("CLUSTER_SETTINGS"),description:t("CLUSTER_SETTINGS_DESC")}),i.default.createElement(f.Form,{data:r,ref:a},i.default.createElement(f.Form.Item,{label:t("Connection Method"),desc:t("CLUSTER_CONNECT_METHOD_DESC")},i.default.createElement(f.Select,{name:"spec.connection.type",options:this.types,onChange:this.handleTypeChange})),"direct"===n&&i.default.createElement("div",{className:v.default.tip},t.html("CLUSTER_DIRECT_IMPORT_TIP")),"direct"===n?i.default.createElement("div",{className:v.default.editorWrapper},i.default.createElement("div",{className:v.default.editor},i.default.createElement("div",{className:v.default.editorTitle},i.default.createElement(f.Icon,{name:"kubernetes",size:20}),i.default.createElement("span",null,t("INPUT_KUBECONFIG"))),i.default.createElement(f.Form.Item,{rules:[{required:!0,message:t("INPUT_KUBECONFIG")}],unControl:!0},i.default.createElement(p.default,{mode:"yaml",name:"spec.connection.kubeconfig",options:this.editOptions})))):i.default.createElement("div",{className:v.default.tip},i.default.createElement(d.default,{title:t("CLUSTER_AGENT_TITLE"),description:t("CLUSTER_AGENT_DESC")}),i.default.createElement("div",{className:"margin-t12"},t.html("CLUSTER_AGENT_IMPORT_TIP")))))}},{key:"types",get:function(){return[{label:t("CONNTECT_DIRECT"),value:"direct"},{label:t("CONNTECT_PROXY"),value:"proxy"}]}},{key:"editOptions",get:function(){return{width:"100%",height:"100%"}}}]),r}(i.default.Component);a.default=y},function(e,t,a){e.exports={editorWrapper:"_1937BjcVyseLv9DIexIJWG",editor:"_3dm-s3IiWMzYT7kJAfs0sb",editorTitle:"_2xtWVxrXO_EaM9xO19pjBb",tip:"_3wGjRllnO483bHBWlTPvVH",link:"_2oSgKyuIsZA8PujoTg5SLU"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(74)),p=n(r(0)),m=n(r(16)),h=n(r(738)),v=n(r(73)),E=n(r(32)),y=r(5),b=r(70),g=r(25),_=n(r(636)),S=r(1081),O=n(r(1862)),C=n(r(906)),T=n(r(1863)),R=n(r(1865)),D=n(r(1868));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var N=(0,b.observer)((o=function(e){(0,s.default)(r,e);var a=k(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e)).handleNetworkPluginChange=function(e){var a=t.networkPlugins.find((function(t){return t.value===e})),r=t.state.networkParams;t.setState({networkParams:(0,m.default)(a,"params",[])},(function(){var e=t.state.networkParams,a=t.props.formTemplate;r.forEach((function(e){(0,h.default)(a,"spec.network.".concat(e.name))})),e.forEach((function(e){"default"in e&&(0,v.default)(a,"spec.network.".concat(e.name),e.default)}))}))},t.handleStoragePluginChange=function(e){var a=t.storagePlugins.find((function(t){return t.value===e}));a&&(a.template=a.template||{},(0,v.default)(t.props.formTemplate,"spec.addons[0]",(0,y.toJS)(a.template)),t.setState({storageParams:(0,m.default)(a,"params",[])}))};var n=(0,m.default)(e.formTemplate,"spec.network.plugin"),l=t.networkPlugins.find((function(e){return e.value===n})),o=(0,m.default)(e.formTemplate,"spec.storagePlugin")||(0,m.default)(t.storagePlugins,"[0].value");(0,v.default)(e.formTemplate,"spec.storagePlugin",o);var c=t.storagePlugins.find((function(e){return e.value===o}));return c&&c.template&&(0,E.default)((0,m.default)(e.formTemplate,"spec.addons[0]"))&&(0,v.default)(e.formTemplate,"spec.addons[0]",(0,y.toJS)(c.template)),t.state={networkParams:(0,m.default)(l,"params",[]),storageParams:(0,m.default)(c,"params",[])},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=this.state,l=n.networkParams,o=n.storageParams;return p.default.createElement("div",{className:O.default.wrapper},p.default.createElement(C.default,{title:t("CLUSTER_SETTINGS"),description:t("K8S_CLUSTER_SETTINGS_DESC")}),p.default.createElement(g.Form,{className:O.default.form,data:r,ref:a},p.default.createElement(g.Form.Item,{label:t("KUBERNETES_VERSION")},p.default.createElement(_.default,{name:"spec.kubernetes.version",options:this.versions,defaultValue:(0,m.default)(this.versions,"0.value")})),p.default.createElement(g.Form.Item,null,p.default.createElement(T.default,{name:"spec.kubernetes"})),p.default.createElement(g.Form.Item,{label:t("Network Plugin")},p.default.createElement(_.default,{name:"spec.network.plugin",options:this.networkPlugins,onChange:this.handleNetworkPluginChange})),p.default.createElement(g.Form.Item,null,p.default.createElement(R.default,{name:"spec.network",params:l})),p.default.createElement(g.Form.Item,{label:t("Default Storage Plugin")},p.default.createElement(_.default,{name:"spec.storagePlugin",options:this.storagePlugins,onChange:this.handleStoragePluginChange})),p.default.createElement(g.Form.Item,null,p.default.createElement(D.default,{name:"spec.addons[0]",params:o}))))}},{key:"versions",get:function(){return(0,y.toJS)((0,m.default)(this.props.store.kubekey,"parameters.kubernetes.supportedVersions",[])).map((function(e){return{icon:"kubernetes",label:e,value:e,description:"-"}}))}},{key:"networkPlugins",get:function(){return(0,m.default)(this.props.store.kubekey,"parameters.kubernetes.supportedCNIs",[]).map((function(e){return{label:e.title,value:e.name,icon:S.NETWORK_PLUGIN_ICONS[e.name]||"network",description:t(e.description),params:e.parameters}}))}},{key:"storagePlugins",get:function(){return(0,m.default)(this.props.store.kubekey,"parameters.storagePlugins",[]).map((function(e){return{label:e.title,value:e.name,icon:S.STORAGE_PLUGIN_ICONS[e.name]||"network",description:t(e.description),params:e.parameters,template:e.template}}))}}]),r}(p.default.Component),(0,d.default)(o.prototype,"versions",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"versions"),o.prototype),(0,d.default)(o.prototype,"networkPlugins",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"networkPlugins"),o.prototype),(0,d.default)(o.prototype,"storagePlugins",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"storagePlugins"),o.prototype),l=o))||l;a.default=N},function(e,t,a){e.exports={wrapper:"_3IrA5oEEz7IbkJINUqCtMY",form:"_1ZT8fGgQwTzYmasVKaVuvJ"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=r(25),m=l(r(274)),h=l(r(740)),v=l(r(1864));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,s.default)(r,e);var a=b(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1},e.showEdit=function(){e.setState({visible:!0})},e.hideEdit=function(){e.setState({visible:!1})},e.handleEdit=function(t){var a=e.props,r=a.value;(0,a.onChange)(y(y({},r),t)),e.hideEdit()},e}return(0,c.default)(r,[{key:"renderPreview",value:function(){var e=this.props.value;return d.default.createElement("div",{className:v.default.preview},d.default.createElement("div",{className:v.default.item},d.default.createElement("span",null,t("Max Pods"),": "),d.default.createElement("span",null,e.maxPods)),d.default.createElement("a",{className:v.default.edit,onClick:this.showEdit},t("EDIT")))}},{key:"renderModal",value:function(){var e=this.props.value;return d.default.createElement(m.default.Form,{title:t("EDIT"),data:e,onOk:this.handleEdit,onCancel:this.hideEdit,visible:this.state.visible},d.default.createElement(p.Form.Item,{label:t("Max Pods"),desc:t("CLUSTER_MAX_PODS_DESC")},d.default.createElement(h.default,{name:"maxPods",integer:!0,min:0})))}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderPreview(),this.renderModal())}}]),r}(d.Component);a.default=g},function(e,t,a){e.exports={preview:"_2io9fuI3YWAWSQXIo4HGzq",item:"_2ZfdnOOx1JzSRKNQUCHkeX",edit:"OgJYXUwcqOpUM366Z3SCU"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=r(25),m=l(r(274)),h=l(r(999)),v=l(r(1867));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,s.default)(r,e);var a=b(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1},e.showEdit=function(){e.setState({visible:!0})},e.hideEdit=function(){e.setState({visible:!1})},e.handleEdit=function(t){var a=e.props,r=a.value;(0,a.onChange)(y(y({},r),t)),e.hideEdit()},e}return(0,c.default)(r,[{key:"renderPreview",value:function(){var e=this.props.value;return d.default.createElement("div",{className:v.default.preview},d.default.createElement("div",{className:v.default.item},d.default.createElement("span",null,t("Pods CIDR"),": "),d.default.createElement("span",null,e.kubePodsCIDR)),d.default.createElement("div",{className:v.default.item},d.default.createElement("span",null,t("Service CIDR"),": "),d.default.createElement("span",null,e.kubeServiceCIDR)),d.default.createElement("a",{className:v.default.edit,onClick:this.showEdit},t("EDIT")))}},{key:"renderModal",value:function(){var e=this.props,a=e.value,r=e.params;return d.default.createElement(m.default.Form,{title:t("EDIT"),data:a,onOk:this.handleEdit,onCancel:this.hideEdit,visible:this.state.visible},d.default.createElement(p.Form.Item,{label:t("Pods CIDR"),desc:t("KUBE_PODS_CIDR_DESC")},d.default.createElement(p.Input,{name:"kubePodsCIDR"})),d.default.createElement(p.Form.Item,{label:t("Service CIDR"),desc:t("KUBE_SERVICE_CIDR_DESC")},d.default.createElement(p.Input,{name:"kubeServiceCIDR"})),r.map((function(e){return d.default.createElement(p.Form.Item,{key:e.name,label:t(e.title),desc:t(e.description)},d.default.createElement(h.default,{name:e.name,defaultValue:e.default,param:e}))})))}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderPreview(),this.renderModal())}}]),r}(d.Component);a.default=g},function(e,t,a){e.exports={number:"_371DmavUkXjNjoWxz0hT90"}},function(e,t,a){e.exports={preview:"_1Oz0MD6qwzMKlxKwC4ffgb",item:"IFtL5Z2j_2RlCORNbeI2F",edit:"_1MVWtuYX83YbF3ui7k6txo"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(136)),c=l(r(12)),s=l(r(13)),i=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(16)),h=l(r(32)),v=l(r(73)),E=r(25),y=l(r(274)),b=r(37),g=l(r(999)),_=l(r(1869));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=function(e){(0,i.default)(r,e);var a=C(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1,value:e.getFormData()},e.showEdit=function(){e.setState({visible:!0})},e.hideEdit=function(){e.setState({visible:!1})},e.handleEdit=function(t){var a=e.props,r=a.value,n=a.onChange,l=(0,b.flattenObject)(t);e.setState({value:l,visible:!1}),(0,v.default)(r,"sources.chart.values",Object.entries(l).map((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)}))),n(O({},r))},e}return(0,s.default)(r,[{key:"getFormData",value:function(){var e=this.props.value;return(0,m.default)(e,"sources.chart.values",[]).reduce((function(e,t){var a=t.split("="),r=(0,u.default)(a,2),n=r[0],l=r[1];return O(O({},e),{},(0,o.default)({},n,l))}),{})}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.setState({value:this.getFormData()})}},{key:"renderPreview",value:function(){var e=this.props.params,a=this.state.value;return(0,h.default)(e)?null:p.default.createElement("div",{className:_.default.preview},e.map((function(e){return p.default.createElement("div",{key:e.name,className:_.default.item},p.default.createElement("span",null,e.title,": "),p.default.createElement("span",null,a[e.name]))})),p.default.createElement("a",{className:_.default.edit,onClick:this.showEdit},t("EDIT")))}},{key:"renderModal",value:function(){var e=this.state,a=e.value,r=e.visible,n=this.props.params;return p.default.createElement(y.default.Form,{title:t("EDIT"),data:a,onOk:this.handleEdit,onCancel:this.hideEdit,visible:r},n.map((function(e){return p.default.createElement(E.Form.Item,{key:e.name,label:t(e.title),desc:t(e.description)},p.default.createElement(g.default,{name:e.name,defaultValue:e.default,param:e}))})))}},{key:"render",value:function(){return p.default.createElement("div",null,this.renderPreview(),this.renderModal())}}]),r}(p.Component);a.default=T},function(e,t,a){e.exports={preview:"_2dYP91XQ9UZJxGes9Vx2Re",item:"_32Vtin5HujaEC_E3VveI4X",edit:"ugChWgWQ-Mjt46Gq2sa3n"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=n(r(73)),p=r(5),m=r(25),h=n(r(1871)),v=n(r(1876)),E=n(r(906));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=y(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).init(),t}return(0,o.default)(r,[{key:"init",value:function(){var e=this.props.formTemplate,t=(0,p.toJS)((0,f.default)(this.props.store.kubekey,"parameters.kubesphere",{})),a=t.template,r=t.components,n=void 0===r?[]:r;(0,d.default)(e,"spec.addons[1]",a);var l=(0,f.default)(e,"spec.addons[1].sources.chart.values",[]);n.forEach((function(e){e.parameters&&e.parameters.forEach((function(t){"default"in t&&l.push("".concat(e.name,".").concat(t.name,"=").concat(t.default))}))})),(0,d.default)(e,"spec.addons[1].sources.chart.values",l)}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return i.default.createElement("div",{className:v.default.wrapper},i.default.createElement(E.default,{title:t("SYSTEM_COMPONENT_PL"),description:t("CLUSTER_COMPONENTS_DESC")}),i.default.createElement(m.Form,{className:v.default.form,data:r,ref:a},i.default.createElement(m.Form.Item,null,i.default.createElement(h.default,{name:"spec.addons[1].sources.chart.values",components:(0,f.default)(this.props.store.kubekey,"parameters.kubesphere.components",[])}))))}}]),r}(i.default.Component);a.default=b},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),o=n(a(13)),u=n(a(19)),c=n(a(20)),s=n(a(18)),i=r(a(0)),f=n(a(1872));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=function(e){(0,u.default)(a,e);var t=d(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.components,r=e.onChange;return i.default.createElement("div",null,a.map((function(e){return i.default.createElement(f.default,{data:e,key:e.name,value:t,onChange:r})})))}}]),a}(i.Component);t.default=p},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(136)),c=l(r(109)),s=l(r(12)),i=l(r(13)),f=l(r(19)),d=l(r(20)),p=l(r(18)),m=n(r(0)),h=l(r(3)),v=l(r(73)),E=l(r(281)),y=l(r(32)),b=l(r(275)),g=l(r(808)),_=r(58),S=l(r(1873)),O=l(r(1875));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=function(e){(0,f.default)(r,e);var a=C(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleSwitch=function(t){var a,r=e.props,n=r.data,l=r.value,o=r.onChange;if(t){var u=n.parameters.filter((function(e){return"default"in e&&"enabled"!==e.name})).map((function(e){return"".concat(n.name,".").concat(e.name,"=").concat(e.default)}));a=(0,E.default)([].concat((0,c.default)(l),["".concat(n.name,".enabled=true")],(0,c.default)(u)))}else a=l.filter((function(e){return!e.startsWith(n.name)}));o(a)},e.handleParamsChange=function(t){var a=e.props,r=a.value,n=a.onChange,l=e.props.data.name,o=Object.keys(t).reduce((function(e,a){return[].concat((0,c.default)(e),["".concat(l,".").concat(a,"=").concat(t[a])])}),[]);n((0,E.default)([].concat((0,c.default)(r.filter((function(e){return!e.startsWith(l)}))),(0,c.default)(o))))},e}return(0,i.default)(r,[{key:"renderParams",value:function(){var e=this.props,t=e.data,a=e.value,r=t.parameters.filter((function(e){return"enabled"!==e.name}));if((0,y.default)(r))return null;var n=a.filter((function(e){return e.startsWith(t.name)})).reduce((function(e,a){var r=a.split("="),n=(0,u.default)(r,2),l=n[0],o=n[1];return(0,v.default)(e,l.replace("".concat(t.name,"."),""),o),e}),{});return m.default.createElement("div",{className:"margin-b12"},m.default.createElement(S.default,{data:r,value:n,onChange:this.handleParamsChange}))}},{key:"render",value:function(){var e=this.props,a=e.data,r=e.value;if(!(a.parameters&&a.parameters.some((function(e){return"enabled"===e.name}))))return null;var n=r.some((function(e){return e==="".concat(a.name,".enabled=true")}));return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:(0,h.default)(O.default.item,(0,o.default)({},O.default.on,n||a.always))},m.default.createElement(b.default,{icon:_.COMPONENT_ICON_MAP[a.name]||"apps",title:t(a.title),description:t(a.description)}),m.default.createElement(g.default,{className:O.default.switch,text:n?t("Enabled"):t("Disabled"),onChange:this.handleSwitch,checked:n})),n&&this.renderParams())}}]),r}(m.Component);a.default=T},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=r(25),m=l(r(274)),h=l(r(999)),v=l(r(1874));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,s.default)(r,e);var a=b(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1},e.showEdit=function(){e.setState({visible:!0})},e.hideEdit=function(){e.setState({visible:!1})},e.handleEdit=function(t){var a=e.props,r=a.value;(0,a.onChange)(y(y({},r),t)),e.hideEdit()},e}return(0,c.default)(r,[{key:"renderPreview",value:function(){var e=this.props,a=e.data,r=e.value;return d.default.createElement("div",{className:v.default.preview},a.map((function(e){return d.default.createElement("div",{key:e.name,className:v.default.item},d.default.createElement("span",null,t(e.title)||e.name,": "),d.default.createElement("span",null,r[e.name]))})),d.default.createElement("a",{className:v.default.edit,onClick:this.showEdit},t("EDIT")))}},{key:"renderModal",value:function(){var e=this.props,a=e.data,r=e.value;return d.default.createElement(m.default.Form,{title:t("EDIT"),data:r,onOk:this.handleEdit,onCancel:this.hideEdit,visible:this.state.visible},a.map((function(e){return d.default.createElement(p.Form.Item,{key:e.name,label:t(e.title||e.name),desc:t(e.description)},d.default.createElement(h.default,{name:e.name,defaultValue:e.default,param:e}))})))}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderPreview(),this.renderModal())}}]),r}(d.Component);a.default=g},function(e,t,a){e.exports={preview:"_2_vP7hbw0vWvPRoJ3CgBXR",item:"_24DFpoiC_T7CiYzwk41wlV",edit:"_1L1kquFZKnA3h2S4aYPijz"}},function(e,t,a){e.exports={item:"_1h8oTIRT-o4SN2jbQfhU6l",on:"_1kzfykTUroCIhZNvsNok7E",switch:"J049BIAtXjHOeN76eUO0S"}},function(e,t,a){e.exports={wrapper:"_35UinkaQtV5ns5CtdVPeYg",form:"_1EgJsj4-MPBd2pmWDQGAE_"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=r(25),p=n(r(740)),m=n(r(1878)),h=n(r(906)),v=n(r(1879));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.store,r=e.formRef,n=e.formTemplate;return i.default.createElement("div",{className:m.default.wrapper},i.default.createElement(h.default,{title:t("Advanced Settings"),description:t("CLUSTER_ADVANCED_SETTINGS_DESC")}),i.default.createElement(d.Form,{className:m.default.form,data:n,ref:r},i.default.createElement(d.Form.Group,{label:t("KubeSphere Settings"),desc:t("CLUSTER_KUBESPHERE_SETTINGS_DESC"),checkable:!0,keepDataWhenUnCheck:!0},i.default.createElement(d.Form.Item,null,i.default.createElement(v.default,{name:"spec.addons[1].sources.chart.values",components:(0,f.default)(a.kubekey,"parameters.kubesphere.components",[])}))),i.default.createElement(d.Form.Group,{label:t("Private Registry Configuration"),desc:t("CLUSTER_PRIVATE_REGISTRY_DESC"),checkable:!0,keepDataWhenUnCheck:!0},i.default.createElement(d.Form.Item,{label:t("Private Registry")},i.default.createElement(d.Input,{name:"spec.registry.privateRegistry"}))),i.default.createElement(d.Form.Group,{label:t("CLUSTER_CONTROLPLANE_ENDPOINT"),desc:t("CLUSTER_CONTROLPLANE_ENDPOINT_DESC"),checkable:!0,keepDataWhenUnCheck:!0},i.default.createElement(d.Form.Item,{label:t("Domain")},i.default.createElement(d.Input,{name:"spec.controlPlaneEndpoint.domain"})),i.default.createElement(d.Form.Item,{label:t("Address")},i.default.createElement(d.Input,{name:"spec.controlPlaneEndpoint.address"})),i.default.createElement(d.Form.Item,{label:t("PORT")},i.default.createElement(p.default,{name:"spec.controlPlaneEndpoint.port",integer:!0,min:0,max:65535}))),i.default.createElement(d.Form.Group,{label:t("etcd Backup"),desc:t("CLUSTER_ETCD_BACKUP_DESC"),checkable:!0,keepDataWhenUnCheck:!0},i.default.createElement(d.Form.Item,{label:t("etcd Backup Dir"),desc:t("CLUSTER_ETCD_BACKUP_DIR_DESC")},i.default.createElement(d.Input,{name:"spec.kubernetes.etcdBackupDir"})),i.default.createElement(d.Form.Item,{label:t("etcd Backup Period"),desc:t("CLUSTER_ETCD_BACKUP_PERIOD_DESC")},i.default.createElement(p.default,{name:"spec.kubernetes.etcdBackupPeriod",integer:!0,min:0})),i.default.createElement(d.Form.Item,{label:t("Keep Backup Number"),desc:t("CLUSTER_ETCD_BACKUP_NUMBER_DESC")},i.default.createElement(p.default,{name:"spec.kubernetes.keepBackupNumber",integer:!0,min:0})))))}}]),r}(i.default.Component);a.default=y},function(e,t,a){e.exports={wrapper:"_1dLQJIy0pH98ZJwhjTVk2n",form:"_10yrEpdtuvtNMsl-9L3bAY"}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(109)),o=n(a(136)),u=n(a(21)),c=n(a(12)),s=n(a(13)),i=n(a(19)),f=n(a(20)),d=n(a(18)),p=r(a(0)),m=n(a(999));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=E(a);function a(e){var r;(0,c.default)(this,a),(r=t.call(this,e)).handleInputChange=function(e,t){var a=r.props.onChange;r.setState((function(a){var r=a.value;return r[t]=e,v({},r)}),(function(){a(Object.entries(r.state.value).map((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})))}))};var n=e.components.filter((function(e){return e.parameters&&e.parameters.every((function(e){return"enabled"!==e.name}))})).reduce((function(e,t){return[].concat((0,l.default)(e),(0,l.default)(t.parameters.map((function(e){return v(v({},e),{},{name:"".concat(t.name,".").concat(e.name)})}))))}),[]),s=e.value.reduce((function(e,t){var a=t.split("="),r=(0,o.default)(a,2),n=r[0],l=r[1];return v(v({},e),{},(0,u.default)({},n,l))}),{});return r.state={params:n,value:s},r}return(0,s.default)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.params,r=t.value;return a.map((function(t){return p.default.createElement("div",{key:t.name,className:"form-item"},p.default.createElement("label",{className:"form-label",htmlFor:name},t.title),p.default.createElement("div",{className:"form-control"},p.default.createElement(m.default,{name:t.name,value:r[t.name],param:t,onChange:e.handleInputChange}),p.default.createElement("div",{className:"form-desc"},t.description)))}))}}]),a}(p.Component);t.default=y},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(71)),s=n(r(56)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(25),E=n(r(870)),y=n(r(749)),b=n(r(275)),g=n(r(274)),_=n(r(1)),S=r(70),O=n(r(32)),C=n(r(1883));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R=(0,S.observer)((u=o=function(e){(0,d.default)(r,e);var a=T(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).formRef=h.default.createRef(),e.configValidator=function(e,a,r){return a?(0,O.default)(a)?r({message:t("INPUT_KUBECONFIG"),field:e.field}):void r():r()},e.handleSubmit=function(){var t=e.formRef.current;t&&t.validate((function(){var t=e.props,a=t.formTemplate;(0,t.onOk)(a)}))},e}return(0,f.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.formTemplate,n=e.visible,l=e.store,o=(0,s.default)(e,["detail","formTemplate","visible","store"]),u=a.expiredDay,i=u&&u<0;return h.default.createElement(g.default,(0,c.default)({width:960,visible:n},o,{onOk:this.handleSubmit,okText:t("UPDATE"),isSubmitting:l.isSubmitting,store:l}),h.default.createElement(v.Columns,null,h.default.createElement(v.Column,{className:"is-6"},h.default.createElement(y.default,{cluster:a,onClick:this.handleClick,isExpired:i})),h.default.createElement(v.Column,{className:"is-6"},h.default.createElement(b.default,{title:a.provider,description:t("PROVIDER")}))),h.default.createElement(v.Form,{data:r,ref:this.formRef},h.default.createElement("div",{className:C.default.editor},h.default.createElement("div",{className:C.default.editorTitle},h.default.createElement(v.Icon,{name:"kubernetes",size:20}),h.default.createElement("span",null,t("INPUT_KUBECONFIG"))),h.default.createElement(v.Form.Item,{rules:[{required:!0,message:t("INPUT_KUBECONFIG")},{validator:this.configValidator}],unControl:!0},h.default.createElement(E.default,{mode:"yaml",name:"kubeconfig"})))))}}]),r}(h.default.Component),o.propTypes={formTemplate:_.default.object,visible:_.default.bool,onOk:_.default.func,onCancel:_.default.func},o.defaultProps={formTemplate:{},visible:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=R},,,function(e,t,a){e.exports={editorTitle:"_3DMYLlAewAg7Yk43i5Zu59",editor:"_2hVhMe5kfVPZtx-aI4_B8Z",link:"_uoUc30jYg3tddfXLhIou"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(274)),i=r(25),f=n(r(760)),d=n(r(1885)),p=n(r(733)),m=n(r(185)),h=n(r(16)),v=n(r(73));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=function(e){var t=e.data,a=e.module,r=e.devops,n=p.default[a]({namespace:r}),l=t.sources.source_type,o=(0,h.default)(t,"sources.".concat(l,"_source"),{}),u=o.repo||o.url||o.remote,c="";c="github"===l&&/^https:\/\//.test(u)?u:function(e,t){switch(e){case"github":return"https://github.com/".concat(t.owner,"/").concat(t.repo);case"gitlab":return"".concat(t.server_name,"/").concat(t.repo);case"bitbucket_server":var a=t.api_uri,r="/"===a.substr(a.length-1)?a:"".concat(a,"/");return/https:\/\/bitbucket.org\/?/gm.test(r)||(r+="scm/"),"".concat(r).concat(t.owner,"/").concat(t.repo);default:return t.repo||t.url||t.remote}}(l,o);var s={provider:t.sources.source_type,url:c,secret:{name:o.credential_id||t.sources.credentialId,namespace:r}};return(0,v.default)(n,"metadata",t.metadata),(0,v.default)(n,"spec",s),n},g={"codeRepo.create":{on:function(e){var a,r=e.store,n=e.cluster,u=e.devops,f=e.module,p=e.success,m=(0,c.default)(e,["store","cluster","devops","module","success"]),h=s.default.open(y({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=b({data:a,module:f,devops:u}),e.next=3,r.create({data:o,devops:u,cluster:n});case 3:i.Notify.success({content:t("CREATE_SUCCESSFUL")}),p&&p(),s.default.close(h);case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,module:f,cluster:n,devops:u,formTemplate:{},modal:d.default},m))}},"codeRepo.edit":{on:function(e){var a,r,n=e.store,f=e.cluster,p=e.devops,v=e.module,E=e.detail,g=e.success,_=(0,c.default)(e,["store","cluster","devops","module","detail","success"]),S=(0,m.default)(E),O=(0,h.default)(S,"_originData.metadata",{}),C="git"===S.provider?"url":"repo",T={metadata:O,sources:(a={source_type:S.provider},(0,u.default)(a,"".concat(S.provider,"_source"),(0,u.default)({},C,S.repoURL)),(0,u.default)(a,"credentialId",S.secret.name),a)},R=s.default.open(y({onOk:(r=(0,o.default)(l.default.mark((function e(a){var r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b({data:a,module:v,devops:p}),e.next=3,n.edit({data:r,devops:p,name:E.name,cluster:f});case 3:i.Notify.success({content:t("UPDATE_SUCCESSFUL")}),g&&g(),s.default.close(R);case 6:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),store:n,module:v,cluster:f,devops:p,formTemplate:T,modal:d.default,isEdit:!0},_))}},"codeRepo.delete":{on:function(e){var a,r=e.store,n=e.detail,u=e.devops,d=e.success,p=(0,c.default)(e,["store","detail","devops","success"]),m=s.default.open(y({onOk:(a=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.delete(y(y({},n),{},{devops:u}));case 2:s.default.close(m),i.Notify.success({content:t("DELETE_SUCCESSFUL")}),d&&d();case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),store:r,modal:f.default,resource:n.name},p))}}};a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(21)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(25),h=r(58),v=n(r(274)),E=n(r(799)),y=n(r(1082)),b=n(r(1083)),g=n(r(1)),_=n(r(1896));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).resetSubRoute=function(){t.setState({subRoute:{}})},t.registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.showSelectRepo=function(){t.setState({showSelectRepo:!0})},t.hideSelectRepo=function(){t.setState({showSelectRepo:!1})},t.handleSubFormSave=function(){var e=t.state.subRoute;e&&e.onSave&&e.onSave((function(){t.setState({subRoute:{}})}))},t.handleSubFormCancel=function(){var e=t.state.subRoute;e&&e.onCancel&&(e.onCancel(),t.setState({subRoute:{}}))},t.handleRepoChange=function(e,a){t.setState({showSelectRepo:!1},(function(){t.scmRef.current.onChange(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({source_type:e},a))}))},t.handleDeleteSource=function(){t.scmRef.current.onChange()},t.submit=function(){var e=t.props,a=e.formTemplate,r=e.onOk;t.formRef.current.validate((function(){r(a)}))},t.state={showSelectRepo:!1},t.scmRef=p.default.createRef(),t.formRef=p.default.createRef(),t}return(0,s.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}},{key:"renderRepoSelectForm",value:function(){var e=this.props,t=e.formTemplate,a=e.devops,r=e.cluster,n=(0,o.default)(e,["formTemplate","devops","cluster"]),u=this.state.showSelectRepo;return p.default.createElement(v.default,(0,l.default)({width:970},n,{disableSubmit:u}),p.default.createElement("div",null,p.default.createElement(b.default,{sourceData:t.sources,devops:a,name:t.name,cluster:r,onSave:this.handleRepoChange,onCancel:this.hideSelectRepo,noSVN:!0,noJenkins:!0}),p.default.createElement(E.default,{className:_.default.confirm,onOk:this.handleSubFormSave,onCancel:this.handleSubFormCancel})))}},{key:"render",value:function(){var e=this.props,a=e.formTemplate,r=e.isEdit,n=(0,o.default)(e,["formTemplate","isEdit"]);return this.state.showSelectRepo?this.renderRepoSelectForm():p.default.createElement(v.default,(0,l.default)({width:970},n,{onOk:this.submit}),p.default.createElement(m.Form,{ref:this.formRef,data:a},p.default.createElement(m.Columns,null,p.default.createElement(m.Column,null,p.default.createElement(m.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:h.PATTERN_NAME,message:t("INVALID_NAME_DESC")}]},p.default.createElement(m.Input,{name:"metadata.name",maxLength:63,disabled:r})),p.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(m.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))),p.default.createElement(m.Column,null,p.default.createElement(m.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},p.default.createElement(m.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),p.default.createElement(m.Form.Item,{label:t("CODE_REPOSITORY"),rules:[{required:!0,message:t("REPO_EMPTY_DESC")}]},p.default.createElement(y.default,{name:"sources",ref:this.scmRef,onClick:this.showSelectRepo,handleDeleteSource:this.handleDeleteSource,devops:this.props.devops,type:"cd"}))))}}]),r}(p.default.Component);a.default=C,C.childContextTypes={registerSubRoute:g.default.func,resetSubRoute:g.default.func}},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(109)),u=n(r(21)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(191)),v=r(25),E=n(r(1888));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,m.observer)(l=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).getCredentialsListData=function(t){var a=e.props,r=a.devops,n=a.cluster;return e.props.store.getCredentials(b({devops:r,cluster:n},t))},e.getCredentialsList=function(){return(0,o.default)(e.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type}})))},e.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return p.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"",p.default.createElement(v.Tag,{type:n?"":"warning"},r&&t("CREDENTIAL_TYPE_".concat(r.toUpperCase()))))},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.store,a=e.formData,r=e.credentials,n=this.props,l=n.formRef,o=n.noJenkins;return p.default.createElement("div",{className:E.default.card},p.default.createElement(v.Form,{data:a,ref:l},p.default.createElement(v.Form.Item,{label:t("CODE_REPOSITORY_ADDRESS"),desc:o?"":t("CODE_REPOSITORY_ADDRESS_DESC"),rules:[{required:!0,message:t("CODE_REPOSITORY_ADDRESS_EMPTY_TIP")}]},p.default.createElement(v.Input,{name:"git_source.url"})),p.default.createElement(v.Form.Item,{label:t("CREDENTIAL_SI"),desc:p.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),p.default.createElement("span",{className:E.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL")))},p.default.createElement(v.Select,{name:"git_source.credential_id",options:this.getCredentialsList(),pagination:(0,h.default)(r,["page","limit","total"]),isLoading:r.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,placeholder:" ",searchable:!0,clearable:!0}))))}}]),r}(p.default.Component))||l;a.default=_},function(e,t,a){e.exports={clickable:"_1gg18qWju-mAY-nQq_wdeZ",card:"Lfxi8U7_UunjUufMzWdBz"}},function(e,t,a){e.exports={repo:"_2p3YQU1s-Jm35rylroph5m",action:"_4hyWUFLHNlMCYVduuXirL",icon:"_3ExFuxeLW6lWai1lnNqxtQ",info:"_EMxlduMvguoNNIR0oevJ",name:"_6pmeCQT-XkYoRk9twIzRV",desc:"_2GvMjgDMVpyPEIYhLtLTkw",clickable:"_1VDCoIb7SHp8BlL0BnfLbk",orgList:"_3OjQ6FBtiYtMxF_WhVM8oF","repo-active":"_1aieEoEWdb7fCb6xaNNzt1",avatar:"_1rDnsFlzHVWKOZEtOF-Tz4",repoListContainer:"_3V7b_dRGTuudpdxU3LEU3-",search:"_3t0-vWM2-wlTI8801-_EkB",repoList:"_3WOIadWjprr42UyzPFB69o",repoListBox:"Xxk199TNV8RTQZcHu248B",placeHolder:"Tqy0wenhjpAlL1GshpcOJ",title:"_2JDeRQtou3Jh08bRyb9Eec",empty:"lhvh5kqnBPzEpJ0Q8tIVH",emptyRepoList:"kOa5BcMdFK_sDJw6vwaCH",tabContent:"uAwxIP0ixLgzm8ubNcemE",card:"_17o_ie-l9rkXfXzLUqIAGc",loadMore:"_2YUIaajHHx2tjO10XpPy2_",confirmButton:"uEDGotlFnf5vO86nHDgQi"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(109)),u=n(r(21)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(191)),h=r(25),v=r(70),E=n(r(1891));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var g=(0,v.observer)(l=function(e){(0,i.default)(r,e);var a=b(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).handleTypeChange=function(e){n.setState({type:e})},n.getCredentialsListData=function(e){var t=n.props,a=t.devops,r=t.cluster;return n.props.store.getCredentials(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({devops:a,cluster:r},e))},n.getCredentialsList=function(){return(0,o.default)(n.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type}})))},n.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return p.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"",p.default.createElement(h.Tag,{type:n?"":"warning"},r&&t("CREDENTIAL_TYPE_".concat(r.toUpperCase()))))},n.state={type:"svn"},n}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.store,a=e.formData,r=e.credentials,n=this.props,l=n.formRef,o=n.enableTypeChange;return p.default.createElement("div",{className:E.default.card},p.default.createElement(h.Form,{data:a,ref:l},p.default.createElement(h.Form.Item,{label:t("TYPE")},p.default.createElement(h.Select,{name:"svn_source.type",disabled:!1===o,onChange:this.handleTypeChange,options:[{label:t("SINGLE_SVN"),value:"single_svn"},{label:t("SVN"),value:"svn"}],defaultValue:"svn"})),p.default.createElement(h.Form.Item,{label:t("CODE_REPOSITORY_ADDRESS"),rules:[{required:!0,message:t("CODE_REPOSITORY_ADDRESS_EMPTY_TIP")}]},p.default.createElement(h.Input,{name:"svn_source.remote"})),p.default.createElement(h.Form.Item,{label:t("CREDENTIAL_SI"),desc:p.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),p.default.createElement("span",{className:E.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL"))),rules:[{required:!0,message:t("PIPELINE_CREDENTIAL_EMPTY_TIP")}]},p.default.createElement(h.Select,{name:"svn_source.credential_id",options:this.getCredentialsList(),pagination:(0,m.default)(r,["page","limit","total"]),isLoading:r.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,placeholder:" ",searchable:!0,clearable:!0})),"single_svn"!==this.state.type?p.default.createElement(p.default.Fragment,null,p.default.createElement(h.Form.Item,{label:t("BRANCH_INCLUDED")},p.default.createElement(h.Input,{name:"svn_source.includes",defaultValue:"trunk,branches/*,tags/*,sandbox/*"})),p.default.createElement(h.Form.Item,{label:t("BRANCH_EXCLUDED")},p.default.createElement(h.Input,{name:"svn_source.excludes"}))):null))}}]),r}(p.default.Component))||l;a.default=g},function(e,t,a){e.exports={clickable:"_3SXyP40oxP_JzSVCH3rffR",card:"_2czWZ1FvP3FEYMjudoFdDT"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(109)),s=n(r(21)),i=n(r(91)),f=n(r(49)),d=n(r(50)),p=n(r(12)),m=n(r(13)),h=n(r(135)),v=n(r(19)),E=n(r(20)),y=n(r(18)),b=n(r(74)),g=(n(r(92)),n(r(0))),_=r(5),S=r(70),O=n(r(32)),C=n(r(16)),T=n(r(191)),R=r(25),D=r(58),k=n(r(1254)),N=n(r(1893));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,E.default)(this,a)}}var M=(0,S.observer)((o=function(e){(0,v.default)(r,e);var a=w(r);function r(e){var n;return(0,p.default)(this,r),(n=a.call(this,e)).getBitbucketList=(0,d.default)(f.default.mark((function e(){var t;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.store.getBitbucketList({cluster:n.props.cluster});case 2:t=e.sent,n.setState({bitbucketList:t});case 4:case"end":return e.stop()}}),e)}))),n.handleFormChange=function(){var e=n.props.store.creatBitBucketServersError,t=void 0===e?{}:e;(0,O.default)(t)||n.props.store.clearBitbucketErrors()},(0,i.default)(n,"handlePasswordConfirm",u,(0,h.default)(n)),n.handleSubmit=function(e){var t=n.props.store.tokenFormData,a=(0,s.default)({},D.REPO_KEY_MAP[n.scmType],{repo:(0,C.default)(n.repoListData,"".concat(e,".name")),credential_id:n.credentialId,owner:(0,C.default)(n.orgList[n.activeRepoIndex],"key")||(0,C.default)((0,_.toJS)(n.orgList),"data[".concat(n.activeRepoIndex,"].name")),api_uri:(0,C.default)(t,"apiUrl"),discover_branches:1,discover_pr_from_forks:{strategy:2,trust:2},discover_pr_from_origin:2,discover_tags:!0,description:(0,C.default)(n.repoListData,"".concat(e,".description"))});n.props.handleSubmit(a)},n.renderAccessTokenForm=function(){var e=n.props.store,a=e.tokenFormData,r=e.creatBitBucketServersError,l=void 0===r?{}:r,o=e.credentials,u=(0,_.toJS)(l);return g.default.createElement("div",{className:N.default.card},g.default.createElement(R.Form,{data:a,onChange:n.handleFormChange,onSubmit:n.handlePasswordConfirm,ref:n.tokenFormRef},g.default.createElement(R.Form.Item,{label:t("BITBUCKET_SERVER_ADDRESS"),error:u.apiUrl,rules:[{required:!0,message:t("BITBUCKET_SERVER_EMPTY_TIP")}]},g.default.createElement(R.Select,{name:"apiUrl",options:n.state.bitbucketList,placeholder:" ",searchable:!0})),g.default.createElement(R.Form.Item,{label:t("CREDENTIAL_SI"),rules:[{required:!0,message:t("PIPELINE_CREDENTIAL_EMPTY_TIP")}],error:u.username||u.password,desc:g.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),g.default.createElement("span",{className:N.default.clickable,onClick:n.props.showCredential},t("CREATE_CREDENTIAL")))},g.default.createElement(R.Select,{name:"credentialId",options:n.credentialsList,pagination:(0,T.default)(o,["page","limit","total"]),isLoading:o.isLoading,onFetch:n.getCredentialsListData,optionRenderer:n.optionRender,valueRenderer:n.optionRender,placeholder:" ",searchable:!0,clearable:!0})),u.all?g.default.createElement("p",{className:N.default.error},u.all):null,g.default.createElement(R.Button,{className:N.default.confirmButton,onClick:n.handlePasswordConfirm,loading:n.state.isLoading},t("OK"))))},n.state={isLoading:!1,bitbucketList:[]},n}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.getBitbucketList()}},{key:"scmType",get:function(){return"bitbucket_server"}},{key:"credentialsList",get:function(){return(0,c.default)(this.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type,data:e.data}})))}}]),r}(k.default),u=(0,b.default)(o.prototype,"handlePasswordConfirm",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,d.default)(f.default.mark((function t(){var a,r,n,l,o;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.cluster,n=a.devops,l=e.tokenFormRef.current.getData(),e.credentialId=l.credentialId,!(0,O.default)(l)&&e.credentialId){t.next=5;break}return t.abrupt("return",!1);case 5:return e.setState({isLoading:!0}),o=e.credentialsList.find((function(t){return t.value===e.credentialId})),t.next=9,e.props.store.creatBitBucketServers(I({cluster:r,devops:n,apiUrl:l.apiUrl,secretName:e.credentialId,secretNamespace:n},o.data)).finally((function(){e.setState({isLoading:!1})}));case 9:case"end":return t.stop()}}),t)})))}}),l=o))||l;a.default=M},function(e,t,a){e.exports={confirmButton:"_3WyVYo6dsKouGyudCKTfGh",card:"_3bXiGYjf3r8UN3JsehNubP",error:"_1aFTZO1gaDC0el8Y1x6-3s",clickable:"_2qLBXrEWfUzfXuLt7CVS_S"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(109)),u=n(r(21)),c=n(r(49)),s=n(r(50)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(70),E=r(25),y=n(r(191)),b=n(r(16)),g=n(r(1895));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(0,v.observer)(l=function(e){(0,d.default)(n,e);var a,r=O(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return(e=r.call.apply(r,[this].concat(l))).state={serverList:[],projectList:[]},e.getProjectListByOwner=function(){var t=(0,s.default)(c.default.mark((function t(a){var r,n,l,o,u,s,i;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.target.value,n=e.props,l=n.devops,o=n.cluster,u=e.props.store.formData,!(s=(0,b.default)(u,"gitlab_source.server_name"))){t.next=9;break}return t.next=7,e.props.store.fetchGitLabProjectList({devops:l,cluster:o,owner:r,server:s});case 7:i=t.sent,e.setState({projectList:i});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getProjectListByServerName=function(){var t=(0,s.default)(c.default.mark((function t(a){var r,n,l,o,u,s;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.store.formData,n=e.props,l=n.devops,o=n.cluster,!(u=(0,b.default)(r,"gitlab_source.owner"))){t.next=8;break}return t.next=6,e.props.store.fetchGitLabProjectList({devops:l,cluster:o,owner:u,server:a});case 6:s=t.sent,e.setState({projectList:s});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getCredentialsListData=function(t){var a=e.props,r=a.devops,n=a.cluster;return e.props.store.getCredentials(S({devops:r,cluster:n},t))},e.getCredentialsList=function(){return(0,o.default)(e.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type}})))},e.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return h.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"",h.default.createElement(E.Tag,{type:n?"":"warning"},r&&t("CREDENTIAL_TYPE_".concat(r.toUpperCase()))))},e}return(0,f.default)(n,[{key:"componentDidMount",value:(a=(0,s.default)(c.default.mark((function e(){var t,a,r,n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.devops,r=t.cluster,e.next=3,this.props.store.fetchGitLabServerList({devops:a,cluster:r});case 3:n=e.sent,this.setState({serverList:n});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.store,a=e.formData,r=e.credentials,n=this.props.formRef,l=this.state,o=l.serverList,u=l.projectList;return h.default.createElement("div",{className:g.default.card},h.default.createElement(E.Form,{data:a,ref:n},h.default.createElement(E.Form.Item,{label:t("GITLAB_SERVER_ADDRESS"),rules:[{required:!0,message:t("GITLAB_SERVER_EMPTY_TIP")}]},h.default.createElement(E.Select,{name:"gitlab_source.server_name",options:o,onChange:this.getProjectListByServerName,placeholder:" "})),h.default.createElement(E.Form.Item,{label:t("PROJECT_GROUP_OWNER"),rules:[{required:!0,message:t("PROJECT_GROUP_OWNER_EMPTY_TIP")}]},h.default.createElement(E.Input,{name:"gitlab_source.owner",onBlur:this.getProjectListByOwner})),h.default.createElement(E.Form.Item,{label:t("CREDENTIAL_SI"),desc:h.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),h.default.createElement("span",{className:g.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL")))},h.default.createElement(E.Select,{name:"gitlab_source.credential_id",options:this.getCredentialsList(),pagination:(0,y.default)(r,["page","limit","total"]),isLoading:r.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,placeholder:" ",searchable:!0,clearable:!0})),h.default.createElement(E.Form.Item,{label:t("REPOSITORY_NAME"),rules:[{required:!0,message:t("REPOSITORY_NAME_EMPTY_TIP")}]},h.default.createElement(E.Select,{name:"gitlab_source.repo",options:u,placeholder:" ",clearable:!0}))))}}]),n}(h.default.Component))||l;a.default=C},function(e,t,a){e.exports={card:"_13oeDy1bgQEqiST5zgdTVo",clickable:"_3St1Q1uzn_3bzPUMmRXnAA"}},function(e,t,a){e.exports={confirm:"_3cJ_baJ-iZer6sWsQZ64dG"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(56)),u=n(r(16)),c=n(r(73)),s=r(25),i=n(r(274)),f=n(r(766)),d=n(r(1898)),p=r(58),m=n(r(733)),h=n(r(822)),v=n(r(1904));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={"configmap.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,c=e.module,d=e.isFederated,E=e.success,b=(0,o.default)(e,["store","cluster","namespace","module","isFederated","success"]),g=p.MODULE_KIND_MAP[c],_=(0,l.default)({},g,m.default[c]({namespace:n}));d&&Object.keys(_).forEach((function(e){_[e]=m.default.federated({data:_[e],clusters:b.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var S=i.default.open(y({onOk:function(e){var l=(0,u.default)(e,g);l&&a.create(l,{cluster:r,namespace:n||(0,u.default)(l,"metadata.namespace")}).then((function(){i.default.close(S),s.Notify.success({content:t("CREATE_SUCCESSFUL")}),E&&E(l),h.default.delete("".concat(c,"_create_form"))}))},module:c,cluster:r,namespace:n,name:g,isFederated:d,formTemplate:_,steps:v.default,modal:f.default,store:a},b))}},"configmap.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=i.default.open(y({onOk:function(e){(0,c.default)(e,"metadata.resourceVersion",r.resourceVersion),l.isFederated&&((0,c.default)(e,"apiVersion",a.version),(0,c.default)(e,"kind","FederatedConfigMap")),a.update(r,e).then((function(){i.default.close(u),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:d.default},l))}}};a.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(5),p=n(r(32)),m=n(r(274)),h=n(r(799)),v=n(r(1255)),E=n(r(1903));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=y(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleSubFormSave=function(){var e=t.state.subRoute;e&&e.onSave&&e.onSave((function(){t.setState({subRoute:{}})}))},t.handleSubFormCancel=function(){var e=t.state.subRoute;e&&e.onCancel&&(e.onCancel(),t.setState({subRoute:{}}))},t.handleOk=function(){var e=t.props,a=e.onOk,r=e.store,n=e.detail,l=r.list,o=(0,d.toJS)(l.selectedRowKeys).filter((function(e){return e!==n.uid}));a(t.state.formTemplate),l.setSelectRowKeys(o)},t.state={formTemplate:(0,d.toJS)(e.detail._originData),subRoute:{}},t}return(0,o.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}}]),(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.detail,r=t.visible;a._originData!==e.detail._originData&&this.setState({formTemplate:(0,d.toJS)(a._originData)}),r&&r!==e.visible&&this.setState({subRoute:{}})}},{key:"renderSaveBar",value:function(){var e=this.state.subRoute;return(0,p.default)(e)?null:i.default.createElement(h.default,{className:E.default.confirm,onOk:this.handleSubFormSave,onCancel:this.handleSubFormCancel})}},{key:"render",value:function(){var e=this.state,a=e.subRoute,r=e.formTemplate,n=this.props,l=n.visible,o=n.isSubmitting,u=n.onCancel,c=n.isFederated;return i.default.createElement(m.default,{width:960,title:t("EDIT_SETTINGS"),icon:"pen",bodyClassName:E.default.body,onOk:this.handleOk,okText:t("OK"),onCancel:u,visible:l,disableSubmit:!(0,p.default)(a),isSubmitting:o},i.default.createElement(v.default,{formTemplate:r,isFederated:c}),this.renderSaveBar())}}]),r}(i.default.Component);a.default=b,b.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},b.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1},b.childContextTypes={registerSubRoute:f.default.func,resetSubRoute:f.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(136)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(190)),p=n(r(652)),m=n(r(1900));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=h(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleDelete=function(t){return function(){var a=e.props,r=a.value;(0,a.onChange)((0,d.default)(r,t))}},e.handleEdit=function(t){return function(){(0,e.props.onEdit)(t)}},e}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this,a=this.props,r=a.value,n=a.onAdd;return f.default.createElement(p.default,null,Object.entries(r).map((function(t){var a=(0,l.default)(t,2),r=a[0],n=a[1];return f.default.createElement(p.default.Item,{key:r,icon:"hammer",title:r,description:n||"-",onDelete:e.handleDelete(r),onEdit:e.handleEdit(r)})})),f.default.createElement(p.default.Add,{title:t("ADD_DATA_TCAP"),description:t("ADD_DATA_DESC"),onClick:n}))}},{key:"render",value:function(){return f.default.createElement("div",{className:m.default.wrapper},this.renderContent())}}]),r}(f.default.Component);a.default=v,v.defaultProps={value:{}}},function(e,t,a){e.exports={wrapper:"aDvnSfC_PO0cjwQXPRxri"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(879)),m=r(25),h=r(801),v=n(r(1902));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).formRef=f.default.createRef(),e.state={formData:e.getFormData()},e.registerForm=function(){var t=e.context.registerSubRoute,a=e.props.onCancel;t&&t(e.handleSubmit,a)},e.handleGoBack=function(){var t=e.context.resetSubRoute;t&&t(),e.props.onCancel()},e.handleSubmit=function(t){var a=e.props.onOk,r=e.formRef&&e.formRef.current;r&&r.validate((function(){var e=r.getData(),n=e.key,o=e.value;a((0,l.default)({},(0,p.default)(n),o)),t&&t()}))},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.registerForm()}},{key:"getFormData",value:function(){var e=this.props,t=e.detail,a=e.selectKey;return{key:a||"",value:t[a]||""}}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.selectKey;return f.default.createElement("div",{className:v.default.wrapper},f.default.createElement("div",{className:"h6"},f.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},f.default.createElement(h.ReactComponent,null)),a[r]?t("EDIT_DATA_TCAP"):t("ADD_DATA_TCAP")),f.default.createElement("div",{className:v.default.formWrapper},f.default.createElement(m.Form,{data:this.state.formData,ref:this.formRef},f.default.createElement(m.Form.Item,{label:t("DATA_KEY"),description:t("CONFIG_FIELD_DESC")},f.default.createElement(m.Input,{name:"key"})),f.default.createElement(m.Form.Item,{label:t("DATA_VALUE"),description:t("ENTER_CONFIG_VALUE_DESC")},f.default.createElement(m.TextArea,{maxHeight:430,name:"value",rows:4,autoResize:!0})))))}}]),r}(f.default.Component);a.default=y,y.defaultProps={detail:{},selectKey:""},y.contextTypes={registerSubRoute:d.default.func,resetSubRoute:d.default.func}},function(e,t,a){e.exports={wrapper:"_1PdX-zg-RHkGdxETpgh8ot",formWrapper:"_3EIYglevz_Swh5nEFNZG3i",confirm:"SELJh5FgVGbyygztYusqG"}},function(e,t,a){e.exports={body:"_19MqCvqWGMl_Dtx4SLmQc",confirm:"_1LGqnJ3hh7Zg7eM0EMj72o"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(37),l=r(a(852)),o=r(a(1255)),u=[{title:"BASIC_INFORMATION",component:(0,n.withProps)(l.default,{maxNameLength:63}),required:!0},{title:"DATA_SETTINGS",component:o.default,required:!0}];t.default=u},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(56)),u=n(r(16)),c=n(r(73)),s=r(5),i=r(25),f=n(r(274)),d=n(r(733)),p=n(r(1906)),m=n(r(2006));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={"custom.monitoring.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,c=e.success,s=(0,o.default)(e,["store","cluster","namespace","module","success"]),p=d.default[l]({namespace:n}),h=f.default.open(v({onOk:function(e){e&&("grafana"===e.type?(delete e.type,a.createGrafana(e,{cluster:r,namespace:n||(0,u.default)(e,"metadata.namespace")}).then((function(){f.default.close(h),i.Notify.success({content:t("CREATE_SUCCESSFUL")}),c&&c()}))):a.create(e,{cluster:r,namespace:n||(0,u.default)(e,"metadata.namespace")}).then((function(){f.default.close(h),i.Notify.success({content:t("CREATE_SUCCESSFUL")}),c&&c()})))},module:l,cluster:r,namespace:n,modal:m.default,formTemplate:p,store:a},s))}},"custom.monitoring.edit":{on:function(e){var a=e.store,r=e.detail,n=e.cluster,l=e.namespace,u=e.success,d=(0,o.default)(e,["store","detail","cluster","namespace","success"]);f.default.open(v({onOk:function(e){(0,c.default)(e,"metadata.resourceVersion",r.resourceVersion),a.update(r,e).then((function(){i.Notify.success({content:t("UPDATE_SUCCESSFUL")}),u&&u()}))},store:a,cluster:n,namespace:l,data:(0,s.toJS)(r._originData),modal:p.default},d))}}};a.default=E},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(49)),l=r(a(50)),o=r(a(12)),u=r(a(13)),c=r(a(19)),s=r(a(20)),i=r(a(18)),f=r(a(0)),d=r(a(1256)),p=r(a(1291));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(a,e);var t=m(a);function a(e){var r;(0,o.default)(this,a),(r=t.call(this,e)).handleOk=(0,l.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.store.toJS(),e.next=3,r.props.onOk(t);case 3:r.store.switchEditingMode(!1);case 4:case"end":return e.stop()}}),e)})));var u=e.data,c=u.metadata,s=void 0===c?{}:c,i=u.spec,f=void 0===i?{}:i,d=f.title,m=f.description,h=f.refresh,v=f.panels,E=f.datasource,y=f.templatings,b=f.time,g=s.namespace,_=s.name;return r.store=new p.default({title:d,cluster:e.cluster,namespace:g,description:m,refresh:h,isEditing:!1,panels:v,datasource:E,templatings:y,time:b,name:_,formTemplate:e.data}),r}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.cluster,a=e.readOnly,r=e.isSubmitting,n=e.onCancel;return f.default.createElement(d.default,{store:this.store,cluster:t,readOnly:a,isSubmitting:r,onCancel:n,onOk:this.handleOk})}}]),a}(f.default.Component);t.default=h},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,o=r(a(49)),u=r(a(56)),c=r(a(50)),s=r(a(91)),i=r(a(12)),f=r(a(13)),d=r(a(74)),p=(r(a(92)),a(5)),m=r(a(16)),h=(n=function(){function e(){(0,i.default)(this,e),this.apiVersion="kapis/monitoring.kubesphere.io/v1alpha3",(0,s.default)(this,"labelsets",l,this)}var t;return(0,f.default)(e,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"fetchLabelSets",value:(t=(0,c.default)(o.default.mark((function e(){var t,a,r,n,l,c,s,i=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.cluster,r=t.namespace,n=(0,u.default)(t,["cluster","namespace"]),e.next=3,request.get("".concat(this.apiVersion).concat(this.getPath({cluster:a,namespace:r}),"/targets/labelsets"),n);case 3:l=e.sent,c=(0,m.default)(l,"data")||[],s={},c.forEach((function(e){Object.keys(e).forEach((function(t){s[t]=s[t]||[],s[t].includes(e[t])||s[t].push(e[t])}))})),this.labelsets=s;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),l=(0,d.default)(n.prototype,"labelsets",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,d.default)(n.prototype,"fetchLabelSets",[p.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchLabelSets"),n.prototype),n);t.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=r(70),p=n(r(1257));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=(0,d.inject)("monitoringStore")(l=(0,d.observer)(l=function(e){(0,c.default)(r,e);var a=m(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleEditClick=function(){e.props.monitoringStore.changeModeToEditing()},e}return(0,u.default)(r,[{key:"render",value:function(){return this.props.monitoringStore.isEditing?f.default.createElement(p.default,{type:"danger",icon:"pen",iconType:"light",onClick:this.props.onSaveClick,text:t("OK")},t("SAVE_TEMPLATE")):f.default.createElement(p.default,{type:"control",icon:"pen",iconType:"light",onClick:this.handleEditClick},t("EDIT_TEMPLATE"))}}]),r}(f.default.Component))||l)||l;a.default=h},function(e,t,a){e.exports={wrapper:"_3IYKAltq5See8I2g5kho1j",danger:"_3RaEr3lipfWerxmg8Kd3PZ"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=a(70),d=r(a(1911));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,f.inject)("monitoringStore","modalStore")(n=(0,f.observer)(n=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){e.props.monitoringStore.changeTitle(t.target.value)},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.monitoringStore,t=e.title,a=e.isEditing,r=this.props.modalStore.theme;return i.default.createElement(d.default,{theme:r,title:t,isEditing:a,onChange:this.handleChange})}}]),a}(i.default.Component))||n)||n;t.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.title,r=e.isEditing,n=e.onChange,i=e.theme;return o.default.createElement("div",{className:(0,c.default)(s.default.wrapper,(0,l.default)({},s.default.dark,"dark"===i))},r?o.default.createElement(u.Input,{onChange:n,value:a,placeholder:t("Dashboard Title")}):o.default.createElement("span",{className:(0,c.default)(s.default.title,(0,l.default)({},s.default.dark,"dark"===i))},a))};var l=n(r(21)),o=n(r(0)),u=r(25),c=n(r(3)),s=n(r(1912))},function(e,t,a){e.exports={wrapper:"_3S-ZzwCINqG44Ke4mWbohz",title:"_1kW70ZLZ6se_m6RgePIVMz",dark:"_2KhkpRw5HC_2c9kTOeIogn"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=r(70),p=r(1085),m=r(25),h=n(r(1914)),v=r(1258);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=(0,d.inject)("monitoringStore")(l=(0,d.observer)(l=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).handleChange=function(t){e.props.monitoringStore.changeRefreshInterval(t)},e.options=v.refreshInterval.map((function(e){return{label:e?"".concat(t("Interval")," ").concat((0,p.translateTimeAlias)(e)):t("No Refreshing"),value:e}})),e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.monitoringStore.refresh;return f.default.createElement(h.default,{prefixIcon:f.default.createElement(m.Icon,{name:"refresh",type:"light"}),onChange:this.handleChange,options:this.options,value:e})}}]),r}(f.default.Component))||l)||l;a.default=y},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.default.createElement(o.Select,(0,n.default)({className:u.default.wrapper},e))};var n=r(a(71)),l=r(a(0)),o=a(25),u=r(a(1915))},function(e,t,a){e.exports={wrapper:"_3Bc9dCYAA0wO9AGEpIOcSG"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=r(70),p=n(r(137)),m=r(1085),h=n(r(1917)),v=r(1258);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){return new Date(e).toISOString()},b=(0,d.inject)("monitoringStore")(l=(0,d.observer)(l=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).handleQuickSelect=function(t){e.props.monitoringStore.changeTimeRange(t)},e.handeCustomSelect=function(t){var a=t.startTime,r=t.endTime;e.props.monitoringStore.changeTimeRange({from:y(a),to:y(r)})},e.options=v.recentTimeRange.map((function(e){return{label:"".concat(t("Last")," ").concat((0,m.translateTimeAlias)(e)),value:{from:"now-".concat(e),to:"now"}}})),e.format=function(){var a=e.props.monitoringStore.time,r=a.to,n=a.from;return"now"===r?"".concat(t("Last")," ").concat((0,m.translateTimeAlias)(n.replace("now-",""))):"".concat((0,p.default)(n).format("YYYY-MM-DD HH:mm:ss")," ~ ").concat((0,p.default)(r).format("YYYY-MM-DD HH:mm:ss"))},e}return(0,u.default)(r,[{key:"generateTimeRange",value:function(){var e=this.props.monitoringStore.time,t=e.from,a=e.to;return"now"===a?{startTime:Date.now()-(0,m.getMsFromTimeAlias)(t.replace("now-","")),endTime:Date.now()}:{startTime:new Date(t).valueOf(),endTime:new Date(a).valueOf()}}},{key:"render",value:function(){var e=this.props.monitoringStore.time,t=e.from,a=e.to;return f.default.createElement(h.default,{key:t+a,recentOpts:this.options,timeRange:this.generateTimeRange(),onRecentSelect:this.handleQuickSelect,onCustomSubmit:this.handeCustomSelect,format:this.format})}}]),r}(f.default.Component))||l)||l;a.default=b},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(21)),c=l(r(136)),s=l(r(12)),i=l(r(13)),f=l(r(19)),d=l(r(20)),p=l(r(18)),m=l(r(16)),h=l(r(32)),v=l(r(1)),E=n(r(0)),y=l(r(3)),b=r(25),g=l(r(137)),_=l(r(1918));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O=function(e){(0,f.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={showDropdown:!1},e.toggleDropdown=function(){e.setState({showDropdown:!e.state.showDropdown})},e.hideDropdown=function(){e.setState({showDropdown:!1})},e.handleRecentClick=function(t){var a=t.currentTarget.dataset.index,r=e.props,n=r.recentOpts;(0,r.onRecentSelect)((0,m.default)(n,"[".concat(a,"].value")))},e.handleSubmit=function(a){var r=a.startTime,n=a.endTime,l=a.interval,o=(0,c.default)(r,1)[0],u=(0,c.default)(n,1)[0];o>u?b.Notify.error({content:t("TIMERANGE_SELECTOR_MSG")}):e.props.onCustomSubmit({startTime:o,endTime:u,interval:l})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.state.showDropdown,t=this.props,a=t.format,r=t.timeRange,n=a(t.recent||{},r);return E.default.createElement("div",{className:(0,y.default)(_.default.wrapper,(0,u.default)({},_.default.active,e))},E.default.createElement("div",{className:(0,y.default)(_.default.mask,(0,u.default)({},_.default.active,e)),onClick:this.hideDropdown}),E.default.createElement("div",{className:_.default.content,onClick:this.toggleDropdown},E.default.createElement(b.Icon,{name:"calendar",type:"light"}),E.default.createElement("span",null,n),E.default.createElement(b.Icon,{name:"chevron-down",type:"light"})),this.renderDropDown())}},{key:"renderDropDown",value:function(){return E.default.createElement("div",{className:_.default.dropdown},this.renderRecentOpts(),this.renderCustomOpts())}},{key:"renderRecentOpts",value:function(){var e=this,a=this.props.recentOpts;return E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{className:_.default.title},t("SELECT_TIME_RANGE")),E.default.createElement("div",{className:_.default.recentWrapper},a.map((function(t,a){var r=t.label;return E.default.createElement("span",{onClick:e.handleRecentClick,"data-index":a,key:a},r)}))))}},{key:"renderCustomOpts",value:function(){var e=this.props,a=e.timeRange,r=e.interval,n=e.intervalOpts,l=a.startTime,u=a.endTime,c={enableSeconds:!0,enableTime:!0,dateFormat:"Y-m-d H:i:S"};return E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{className:_.default.title},t("CUSTOM_TIME_RANGE")),E.default.createElement(b.Form,{data:{interval:r,startTime:[l],endTime:[u]},onSubmit:this.handleSubmit},E.default.createElement(b.Form.Item,{label:t("START_TIME")},E.default.createElement(b.DatePicker,(0,o.default)({name:"startTime"},c))),E.default.createElement(b.Form.Item,{label:t("END_TIME")},E.default.createElement(b.DatePicker,(0,o.default)({name:"endTime"},c))),E.default.createElement("div",{className:_.default.footer},(0,h.default)(n)||E.default.createElement(b.Form.Item,{label:t("SAMPLING_INTERVAL")},E.default.createElement(b.Select,{name:"interval",className:_.default.select,options:n})),E.default.createElement("div",null,E.default.createElement(b.Button,{htmlType:"submit"},t("OK"))))))}}]),r}(E.Component);O.propTypes={recent:v.default.object,timeRange:v.default.object,format:v.default.func,recentOpts:v.default.array,interval:v.default.string,intervalOpts:v.default.array,onRecentSelect:v.default.func,onCustomSubmit:v.default.func},O.defaultProps={recent:null,timeRange:{startTime:Date.now(),endTime:Date.now()},format:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.count,r=e.unit,n=arguments.length>1?arguments[1]:void 0,l=n.startTime,o=void 0===l?0:l,u=n.endTime,c=void 0===u?0:u;return a?"".concat(t("Last")," ").concat(a," ").concat(t(r)):"".concat((0,g.default)(o).format("YYYY/MM/DD HH:mm:ss")," ~ ").concat((0,g.default)(c).format("YYYY/MM/DD HH:mm:ss"))},recentOpts:[{label:"Last 5 Minutes",value:{count:5,unit:"Minutes"}}],intervalOpts:[],onRecentSelect:function(){},onCustomSummit:function(){}};var C=O;a.default=C},function(e,t,a){e.exports={wrapper:"_2kNQZvZCCOrdYLr3lW_M0M",active:"_3ze5VvZgAQIFkqqU43TECt",dropdown:"_38qK6AG6_ltW34wzqG2QjC",mask:"_1e1_OUeku7JT9XcEh-uO-Q",content:"zGUNaQOOt-GtiMetfKDgX",title:"_3YE7OaQAST3rEZTGrNXeD2",recentWrapper:"_2FjFhDG37PJi2iTV2HWjv0",footer:"_1_M2ap0yCRe5IW3k3h55YP"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,o=r(a(12)),u=r(a(13)),c=r(a(19)),s=r(a(20)),i=r(a(18)),f=r(a(74)),d=r(a(0)),p=a(70),m=a(5),h=r(a(1920));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=(0,p.inject)("monitoringStore","modalStore")(n=(0,p.observer)((l=function(e){(0,c.default)(a,e);var t=v(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleDelete=function(t){e.monitors[t].stopMonitoring(),e.textMonitorsRow.deleteTextMonitorByIndex(t)},e.handleEdit=function(t){var a=e.textMonitorsRow.monitors[t];e.props.modalStore.selectMonitor(a)},e.handleAdd=function(){var t=e.monitoringStore.generateNewTextMonitor();e.modalStore.selectMonitor(t)},e.handleSort=function(t){var a=t.map((function(e){return e.monitor}));e.textMonitorsRow.updateMonitors(a)},e}return(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.monitors.forEach((function(t){return t.monitoring(e.monitoringStore)}))}},{key:"componentWillUnmount",value:function(){this.monitors.forEach((function(e){return e.stopMonitoring()}))}},{key:"componentDidUpdate",value:function(){var e=this;this.monitors.forEach((function(t){return t.monitoring(e.monitoringStore)}))}},{key:"render",value:function(){var e=this.props.monitoringStore.isEditing,t=this.textMonitorData,a=this.monitors.map((function(e){return{monitor:e}}));return d.default.createElement(h.default,{isEditing:e,monitors:a,textPanels:t,onSort:this.handleSort,onDelete:this.handleDelete,onEdit:this.handleEdit,onAdd:this.handleAdd})}},{key:"monitoringStore",get:function(){return this.props.monitoringStore}},{key:"modalStore",get:function(){return this.props.modalStore}},{key:"textMonitorsRow",get:function(){return this.monitoringStore.textMonitors}},{key:"monitors",get:function(){return this.textMonitorsRow.monitors}},{key:"textMonitorData",get:function(){return this.monitors.map((function(e){var t=e.config||{};return{title:t.title,id:t.id,value:e.stat,errorMessage:e.errorMessage}}))}}]),a}(d.default.Component),(0,f.default)(l.prototype,"monitoringStore",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"monitoringStore"),l.prototype),(0,f.default)(l.prototype,"modalStore",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"modalStore"),l.prototype),(0,f.default)(l.prototype,"textMonitorsRow",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"textMonitorsRow"),l.prototype),(0,f.default)(l.prototype,"monitors",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"monitors"),l.prototype),(0,f.default)(l.prototype,"textMonitorData",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"textMonitorData"),l.prototype),n=l))||n)||n;t.default=E},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.textPanels,a=e.isEditing,r=e.onAdd,f=e.onDelete,d=e.onEdit,p=e.onSort,m=e.monitors;return l.default.createElement("div",null,l.default.createElement(o.ReactSortable,{list:m,setList:p,className:i.default.wrapper,disabled:!a,key:a,animation:200},t.map((function(e,t){var r=e.title,o=e.isLoading,p=e.value,m=e.id,h=e.errorMessage;return l.default.createElement("div",{key:m,className:(0,c.default)((0,n.default)({},i.default.editting,a))},l.default.createElement(s.default,{errorMessage:h},l.default.createElement("div",{className:i.default.innner},a&&l.default.createElement("div",{className:i.default.tools},l.default.createElement(u.Icon,{name:"pen",size:20,type:"light",clickable:!0,onClick:function(){return d(t)}}),l.default.createElement(u.Icon,{name:"trash",size:20,type:"light",clickable:!0,onClick:function(){return f(t)}})),l.default.createElement("div",{className:i.default.content},l.default.createElement("h6",null,p),l.default.createElement("p",null,r),o&&l.default.createElement("span",{className:i.default.loadingTip},l.default.createElement(u.Loading,{size:10}))))))}))),a&&l.default.createElement("div",{className:i.default.wrapper},l.default.createElement("div",{onClick:r,className:i.default.addButton},l.default.createElement(u.Icon,{name:"add",size:20,type:"light"}))))};var n=r(a(21)),l=r(a(0)),o=a(1259),u=a(25),c=r(a(3)),s=r(a(1001)),i=r(a(1923))},,function(e,t,a){e.exports={wrapper:"_30EfsRi0WbMvAGkUtPp_pX",error:"bvYl6q_2buGchG0_oOgDB"}},function(e,t,a){e.exports={wrapper:"_1JNcscoEqUrPOfgH9bogzK",content:"_1rxqdHBClXet0rKccVsHtF",loadingTip:"_1Sbq1lYD-XsgcJkNcfkTMx",innner:"ZiUxG2dpZ98DolM28G884",editting:"_1KqodXGORr8QmNaNsSwc6n",tools:"_3V99brls9xcBq15s0iRdil",addButton:"_18he9_SXyr20t3iXb5JdBC"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(74)),m=l(r(0)),h=r(70),v=r(5),E=n(r(1925)),y=n(r(1927)),b=n(r(1940)),g=n(r(1951));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S={singlestat:y.default,graph:b.default,table:g.default},O=(0,h.inject)("modalStore","monitoringStore")(o=(0,h.observer)((u=function(e){(0,i.default)(r,e);var a=_(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).temporaryMonitor=e.getTemporaryMonitor(),e.handleCancel=function(){e.props.modalStore.unSelectMonitor()},e.handleSubmit=function(){e.isNewMonitor?e.monitor.belongTo.push(e.temporaryMonitor):e.monitor.config=e.temporaryMonitor.config,e.props.modalStore.unSelectMonitor()},e}return(0,s.default)(r,[{key:"getTemporaryMonitor",value:function(){return this.isNewMonitor?this.monitor:this.monitor.clone()}},{key:"componentDidMount",value:function(){this.temporaryMonitor.monitoring(this.props.monitoringStore)}},{key:"componentWillUnmount",value:function(){this.temporaryMonitor.stopMonitoring()}},{key:"render",value:function(){var e=S[this.monitor.type];return m.default.createElement(E.default,{formData:this.temporaryMonitor.config,onSubmit:this.handleSubmit,onCancel:this.handleCancel},e?m.default.createElement(e,{monitor:this.temporaryMonitor}):t("MONITOR_TYPE_NO_SUPPORT"))}},{key:"monitor",get:function(){return this.props.modalStore.selectedMonitor}},{key:"isNewMonitor",get:function(){var e=this.monitor;return!e.belongTo.has(e)}}]),r}(m.Component),(0,p.default)(u.prototype,"monitor",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitor"),u.prototype),(0,p.default)(u.prototype,"isNewMonitor",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"isNewMonitor"),u.prototype),o=u))||o)||o;a.default=O},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.formData,a=e.children,r=e.onCancel,u=e.onSubmit;return n.default.createElement(l.Form,{className:o.default.wrapper,data:t,onSubmit:u},n.default.createElement("div",{className:o.default.form},a),n.default.createElement("div",{className:o.default.formFooter},n.default.createElement(l.Button,{type:"control",icon:"close",iconType:"light",onClick:r}),n.default.createElement(l.Button,{type:"control",icon:"check",iconType:"light",htmlType:"submit"})))};var n=r(a(0)),l=a(25),o=r(a(1926))},function(e,t,a){e.exports={wrapper:"_3ZeYUgWPbewvTTUqMUOecy",form:"_7inMxqFIqjVzbHwr-qNm9",formFooter:"_3SNcsZ0T9tkGjtowg76Bzz"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(74)),m=l(r(0)),h=r(70),v=r(5),E=n(r(16)),y=n(r(1086)),b=r(1087),g=r(1933),_=n(r(942)),S=n(r(1937)),O=n(r(1001));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,h.inject)("monitoringStore","labelStore")(o=(0,h.observer)((u=function(e){(0,i.default)(r,e);var a=C(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleLabelSearch=function(t){var a=e.props.monitoringStore,r=a.cluster,n=a.namespace,l=e.props.monitoringStore.getTimeRange(),o=l.from,u=l.to;e.props.labelStore.fetchLabelSets({cluster:r,namespace:n,metric:t,start:Math.floor(o.valueOf()/1e3),end:Math.floor(u.valueOf()/1e3)})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.props.monitoringStore.fetchMetadata()}},{key:"render",value:function(){var e=this.stat,a=(0,E.default)(this.monitor,"config.title",""),r=(0,v.toJS)(this.props.labelStore.labelsets);return m.default.createElement(y.default,{preview:m.default.createElement(O.default,{errorMessage:this.monitor.errorMessage},m.default.createElement(g.SingleStatGraph,{singleState:e,title:a})),sidebar:m.default.createElement(b.GraphTextInput,{type:"singlestat"}),main:m.default.createElement(_.default,{label:t("DATA")},m.default.createElement(S.default,{supportMetrics:this.supportMetrics,labelsets:r,onLabelSearch:this.handleLabelSearch}))})}},{key:"monitor",get:function(){return this.props.monitor}},{key:"supportMetrics",get:function(){return this.props.monitoringStore.targetsMetadata.map((function(e){return{value:e.metric,desc:e.help,type:e.type}}))}},{key:"stat",get:function(){return this.monitor.stat}}]),r}(m.Component),(0,p.default)(u.prototype,"monitor",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitor"),u.prototype),(0,p.default)(u.prototype,"supportMetrics",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"supportMetrics"),u.prototype),(0,p.default)(u.prototype,"stat",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"stat"),u.prototype),o=u))||o)||o;a.default=T},function(e,t,a){e.exports={wrapper:"_3Stre0zYy7b8sCvF-xGly_",preview:"_1GfNd1Y_MUbgYSx9yzgB0h",form:"_3EOZI4PcAQPnwR-RVaCUSg",sidebar:"_2-dZfxhdtX-1OfJmQ5eWnQ",resource:"_2YOLD4b02Mh-Oj4kRCDrcJ"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.type,r={singlestat:{i18n:t("SINGLE_STATE_CHART"),icon:"text"},line:{i18n:t("LINE_CHART"),icon:"linechart"},bar:{i18n:t("BAR_CHART"),icon:"barchart"},table:{i18n:t("TABLE"),icon:"table-chart"}},n=r[a].icon,c=r[a].i18n;return l.default.createElement("div",{className:u.default.wrapper},l.default.createElement("header",null,t("CHART_TYPES")),l.default.createElement("div",null,l.default.createElement(o.Icon,{name:n,type:"light",size:40}),l.default.createElement("h3",null,c)))};var l=n(r(0)),o=r(25),u=n(r(1930))},function(e,t,a){e.exports={wrapper:"_2145NKyaXROReR0eN6-PBI"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.options,a=e.value,r=e.onChange;return l.default.createElement("div",{className:s.default.wrapper},t.map((function(e,t){return l.default.createElement("div",{className:(0,o.default)((0,n.default)({},s.default.select,(0,u.default)(e.value.join(","),a.join(",")))),key:(0,c.default)(e.value)?e.value.join(","):t,onClick:function(){r(e.value)}},l.default.createElement("h3",null,e.label),l.default.createElement("div",{className:s.default.colors},e.value.map((function(e){return l.default.createElement("div",{key:e,style:{backgroundColor:e}})}))))})))};var n=r(a(21)),l=r(a(0)),o=r(a(3)),u=r(a(745)),c=r(a(23)),s=r(a(1932))},function(e,t,a){e.exports={wrapper:"_2li-l2mP2fMG1QZq-ZLncF",select:"_20S0JG5Gyd1kQm4yX006oO",colors:"_3DefZS0H3j5fxqBHp5Ejhd"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SingleStatGraph",{enumerable:!0,get:function(){return n.default}});var n=r(a(1934))},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.singleState,a=e.title;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("h3",null,n.default.createElement("span",null,t)),n.default.createElement("p",null,a))};var n=r(a(0)),l=r(a(1935))},function(e,t,a){e.exports={wrapper:"_3t0RsORTnxwuLWyQZfTZC9"}},function(e,t,a){e.exports={wrapper:"_3H8zHTGkN2UxY70Ttk_aKT"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=r(25),m=l(r(740)),h=r(725),v=l(r(1050)),E=l(r(907)),y=l(r(943)),b=l(r(1939));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=Object.keys(h.unitTransformMap).map((function(e){return{label:e,value:e}})),S=function(e){(0,s.default)(r,e);var a=g(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){return d.default.createElement("div",{className:b.default.wrapper},d.default.createElement("div",{className:b.default.config},d.default.createElement(p.Form.Item,{rules:[{required:!0,message:t("NAME_EMPTY_DESC")}]},d.default.createElement(E.default,{name:"title"},(function(e){var a=e.onChange,r=e.value;return d.default.createElement(y.default,{label:t("GRAPH_NAME"),tips:""},d.default.createElement(p.Input,{className:b.default.input,value:r,onChange:a}))}))),d.default.createElement(p.Form.Item,null,d.default.createElement(E.default,{name:"format",defaultValue:_[0]},(function(e){var a=e.onChange,r=e.value;return d.default.createElement(y.default,{label:t("Unit"),tips:""},d.default.createElement(p.Select,{options:_,value:r,onChange:a}))}))),d.default.createElement(p.Form.Item,null,d.default.createElement(E.default,{name:"decimals",defaultValue:0},(function(e){var a=e.onChange,r=e.value;return d.default.createElement(y.default,{label:t("DECIMALS"),tips:""},d.default.createElement(m.default,{value:r,max:5,min:0,onChange:a}))})))),d.default.createElement("div",{className:b.default.metric},d.default.createElement(p.Form.Item,null,d.default.createElement(v.default,(0,o.default)({name:"targets[0].expr"},this.props)))))}}]),r}(d.Component);a.default=S},function(e,t,a){e.exports={wrapper:"_2C1fCSF8KpDwIEut_2MgtV",label:"QkppNQvAINnnNmxn5RPP6",content:"_39Ri6GN7ykbXXIM_Ff6zud"}},function(e,t,a){e.exports={wrapper:"Ak6-eMDkfF3C5TJyQphR8",config:"_2F_uvfrHJwigmWBLGegJ7I",metric:"_35j6cKLTeLYz6_IGhHcdd4",input:"ondUZb0hG43EmAsEFaDEn"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(74)),m=l(r(0)),h=r(70),v=r(5),E=r(25),y=n(r(636)),b=r(58),g=n(r(1086)),_=r(1087),S=n(r(907)),O=n(r(1260)),C=n(r(1945)),T=n(r(1001)),R=n(r(942)),D=n(r(1947));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,h.inject)("monitoringStore","labelStore")(o=(0,h.observer)((u=function(e){(0,i.default)(r,e);var a=k(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleLabelSearch=function(t){var a=e.props.monitoringStore,r=a.cluster,n=a.namespace,l=e.props.monitoringStore.getTimeRange(),o=l.from,u=l.to;e.props.labelStore.fetchLabelSets({cluster:r,namespace:n,metric:t,start:Math.floor(o.valueOf()/1e3),end:Math.floor(u.valueOf()/1e3)})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.props.monitoringStore.fetchMetadata()}},{key:"render",value:function(){var e=this.monitor.config,a=e.title,r=e.lines,n=e.bars,l=e.stack,o=e.description,u=this.monitor.errorMessage,c=this.monitor.legends,s=(0,v.toJS)(this.props.labelStore.labelsets);return m.default.createElement(g.default,{preview:m.default.createElement(T.default,{errorMessage:u},m.default.createElement(C.default,{title:a,description:o},m.default.createElement(O.default,{line:r,bar:n,stacked:l,timeRange:this.timeRange,valueFormatter:this.monitor.valueFormatter,legends:c,data:this.monitor.graphData}))),sidebar:m.default.createElement(m.default.Fragment,null,m.default.createElement(_.GraphTextInput,{type:this.monitor.config.lines?"line":"bar"}),m.default.createElement(R.default,{className:"margin-t12",label:t("GRAPH_TYPES")},m.default.createElement(E.Form.Item,null,m.default.createElement(S.default,{name:"stack",debounce:100},(function(e){var a=e.onChange,r=e.value;return m.default.createElement(y.default,{defaultValue:!1,value:r,onChange:a,options:[{value:!0,label:t("STACKED_GRAPH_TYPE"),icon:"barchart",description:t("STACKED_GRAPH_TYPE_DESC")},{value:!1,label:t("SINGLE_GRAPH_TYPE_NAME"),icon:"barchart",description:t("SINGLE_GRAPH_TYPE")}]})})))),m.default.createElement(R.default,{label:t("GRAPH_COLORS")},m.default.createElement(E.Form.Item,null,m.default.createElement(S.default,{name:"colors",defaultValue:0,debounce:100},(function(e){var a=e.onChange,r=e.value;return m.default.createElement(_.ThemeSelector,{onChange:a,value:r,options:b.MONITOR_GRAPH_COLORS.map((function(e){return{label:t(e.nameI18nKey),value:e.colors}}))})}))))),main:m.default.createElement(D.default,{supportMetrics:this.supportMetrics,labelsets:s,onLabelSearch:this.handleLabelSearch})})}},{key:"monitor",get:function(){return this.props.monitor}},{key:"supportMetrics",get:function(){return this.props.monitoringStore.targetsMetadata.map((function(e){return{value:e.metric,desc:e.help,type:e.type}}))}},{key:"timeRange",get:function(){return this.monitor.timeRange}}]),r}(m.Component),(0,p.default)(u.prototype,"monitor",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitor"),u.prototype),(0,p.default)(u.prototype,"supportMetrics",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"supportMetrics"),u.prototype),o=u))||o)||o;a.default=N},,,,function(e,t,a){e.exports={wrapper:"O3kTaWXsEhAjMYeAvOzL1"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.description,r=e.children;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",null,n.default.createElement("h3",null,t),n.default.createElement("p",null,a)),r)};var n=r(a(0)),l=r(a(1946))},function(e,t,a){e.exports={wrapper:"NdXgZ7ysaYFLK9YlXlK3-"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(12)),u=l(r(13)),c=l(r(19)),s=l(r(20)),i=l(r(18)),f=n(r(0)),d=l(r(16)),p=r(25),m=l(r(740)),h=r(725),v=l(r(1262)),E=l(r(1263)),y=l(r(942)),b=l(r(1264)),g=l(r(907)),_=l(r(943)),S=l(r(1950));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=Object.keys(h.unitTransformMap).map((function(e){return{label:e,value:e}})),T=function(e){(0,c.default)(r,e);var a=O(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.supportMetrics,r=e.labelsets,n=e.onLabelSearch;return f.default.createElement("div",{className:S.default.wrapper},f.default.createElement(y.default,{label:t("BASIC_INFORMATION")},f.default.createElement(p.Form.Item,null,f.default.createElement(p.Columns,null,f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,null,f.default.createElement(g.default,{name:"title"},(function(e){var a=e.onChange,r=e.value;return f.default.createElement(_.default,{label:t("GRAPH_NAME")},f.default.createElement(p.Input,{value:r,onChange:a}))})))),f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,null,f.default.createElement(g.default,{name:"description"},(function(e){var a=e.onChange,r=e.value;return f.default.createElement(_.default,{label:t("DESCRIPTION")},f.default.createElement(p.Input,{value:r,onChange:a}))}))))))),f.default.createElement(y.default,{label:t("DATA")},f.default.createElement(p.Form.Item,null,f.default.createElement(v.default,{name:"targets",header:function(e){var a=e.add,r=e.value;return f.default.createElement(b.default,{right:f.default.createElement(p.Button,{type:"control",onClick:function(){return a({step:(0,d.default)(r,"[0].step",""),legendFormat:"",expr:"",refId:Math.max.apply(null,r.map((function(e){return e.refId})))+1})}},t("ADD"))})}},(function(e){var t=e.formItemName,l=e.onDelete,o=e.onUpClick,u=e.onDownClick,c=e.index;return f.default.createElement(E.default,{key:c,onDelete:l,onUpClick:o,onDownClick:u,prefix:t,labelsets:r,onLabelSearch:n,supportMetrics:a})})))),f.default.createElement(y.default,{label:t("Y_AXIS")},f.default.createElement(p.Columns,null,f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,null,f.default.createElement(g.default,{name:"yaxes[0].format",debounce:100},(function(e){var a=e.onChange,r=e.value;return f.default.createElement(_.default,{label:t("Unit"),tips:""},f.default.createElement(p.Select,{defaultValue:"none",options:C,value:r,onChange:a}))})))),f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,null,f.default.createElement(g.default,{name:"yaxes[0].decimals",debounce:100},(function(e){var a=e.onChange,r=e.value;return f.default.createElement(_.default,{label:t("DECIMALS"),tips:""},f.default.createElement(m.default,{defaultValue:0,value:r,max:5,min:0,onChange:a}))})))))))}}]),r}(f.Component);a.default=T},function(e,t,a){e.exports={wrapper:"_1yTATo3lD_7rwY6lDudrCg",sort:"_1EFKSiYd2WrRafk0f3869_",form:"_3zEEtuQ4RATqr1QWLM324p",firstLine:"_3pMxYSBlRPq-WUsskbA7Tq",name:"_3aiu8eoQvrvOlWJ1SOMEHc",interval:"sCj97pEm23Tzvk_osJXDd",exprInput:"_28BUdWgdtRiDcK_TmmW9Cn"}},function(e,t,a){e.exports={wrapper:"_14rVNDNOZeNfMTOdh6yKjR"}},function(e,t,a){},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(74)),m=l(r(0)),h=r(70),v=r(5),E=r(25),y=n(r(740)),b=n(r(1262)),g=n(r(1086)),_=r(1087),S=n(r(942)),O=n(r(1263)),C=n(r(1952)),T=n(r(1264)),R=n(r(907)),D=n(r(943));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,h.inject)("monitoringStore")(o=(0,h.observer)((u=function(e){(0,i.default)(r,e);var a=k(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"render",value:function(){return m.default.createElement(g.default,{preview:m.default.createElement("div",null),sidebar:m.default.createElement(_.GraphTextInput,{type:"table"}),main:m.default.createElement(m.default.Fragment,null,m.default.createElement(S.default,{label:t("DATA")},m.default.createElement(E.Form.Item,null,m.default.createElement(b.default,{name:"targets",header:function(e){var a=e.onAdd;return m.default.createElement(T.default,{right:m.default.createElement(E.Button,{type:"control",onClick:a},t("ADD"))})}},(function(e){var t=e.formItemName,a=e.onDelete,r=e.onUpClick,n=e.onDownClick;return m.default.createElement(O.default,{onDelete:a,onUpClick:r,onDownClick:n,prefix:t})})))),m.default.createElement(S.default,{label:t("TABLE_SETTINGS")},m.default.createElement(E.Form.Item,null,m.default.createElement(b.default,{name:"styles",header:function(e){var a=e.onAdd;return m.default.createElement(T.default,{left:m.default.createElement(E.Form.Item,null,m.default.createElement(R.default,{name:"expr"},(function(e){var a=e.onChange,r=e.value;return m.default.createElement("div",null,m.default.createElement(D.default,{label:t("PER_PAGE_LINES"),tips:""},m.default.createElement(y.default,{value:r,onChange:a,defaultValue:100})))}))),right:m.default.createElement(E.Button,{type:"control",onClick:a},t("ADD"))})}},(function(e){var t=e.formItemName,a=e.onDelete,r=e.onUpClick,n=e.onDownClick;return m.default.createElement(C.default,{onDelete:a,onUpClick:r,onDownClick:n,prefix:t})})))))})}},{key:"monitor",get:function(){return this.props.monitor}}]),r}(m.Component),(0,p.default)(u.prototype,"monitor",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitor"),u.prototype),o=u))||o)||o;a.default=N},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.prefix,r=e.onUpClick,n=e.onDownClick,l=e.onDelete;return o.default.createElement("div",{className:f.default.wrapper},o.default.createElement("div",{className:f.default.sort},o.default.createElement(u.Icon,{name:"sort-ascending",onClick:r}),o.default.createElement(u.Icon,{name:"sort-descending",onClick:n})),o.default.createElement("div",{className:f.default.form},o.default.createElement("div",{className:f.default.firstLine},o.default.createElement("div",null,o.default.createElement(u.Form.Item,{className:f.default.name},o.default.createElement(c.default,{name:"".concat(a,".alias")},(function(e){var a=e.onChange,r=e.value;return o.default.createElement("div",null,o.default.createElement(s.default,{label:t("COLUMN_NAME"),tips:""},o.default.createElement(u.Input,{className:f.default.input,value:r,onChange:a})))}))),o.default.createElement(u.Form.Item,{className:f.default.interval},o.default.createElement(c.default,{name:"".concat(a,".pattern")},(function(e){var a=e.onChange,r=e.value;return o.default.createElement("div",null,o.default.createElement(s.default,{label:t("FIELD_NAME"),tips:""},o.default.createElement(u.Input,{className:f.default.input,value:r,onChange:a})))})))),o.default.createElement(u.Icon,{name:"trash",onClick:l})),o.default.createElement("div",{className:f.default.exprInput},o.default.createElement(u.Form.Item,null,o.default.createElement(c.default,{name:"".concat(a)},(function(e){var a=e.onChange,r=e.value;return o.default.createElement(s.default,{label:t("DISPLAY_FORMAT"),tips:""},o.default.createElement(i.default,{value:r,onChange:function(e){return a(p(p({},r),e))}}))}))))))};var l=n(r(21)),o=n(r(0)),u=r(25),c=n(r(907)),s=n(r(943)),i=n(r(1953)),f=n(r(1968));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(93)),d=r(25),p=r(5),m=n(r(1954)),h=n(r(1967));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={shouldInputModalShow:!1},e.handleCustomClick=function(){e.setState({shouldInputModalShow:!0})},e.handleCustomColseClick=function(){e.setState({shouldInputModalShow:!1})},e.handleModalSubmit=function(t){e.setState({shouldInputModalShow:!1}),e.props.onChange(t)},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.state.shouldInputModalShow,a=this.props.value;return i.default.createElement("div",null,i.default.createElement("div",{className:h.default.wrapper},i.default.createElement("div",null,this.renderItems()),i.default.createElement("div",{onClick:this.handleCustomClick},i.default.createElement("span",{className:h.default.button},i.default.createElement(d.Icon,{name:"pen"}),t("DISPLAY_FORMAT")))),i.default.createElement(m.default,{data:(0,p.toJS)(a),visible:e,onCancel:this.handleCustomColseClick,onOk:this.handleModalSubmit}))}},{key:"renderItems",value:function(){var e=this.props.value;return[{key:"type",label:t("TYPE")},{key:"unit",label:t("Unit"),visible:function(e,t){return"number"===t.type}},{key:"dateFormat",label:t("TIME_FORMAT"),visible:function(e,t){return"date"===t.type}},{key:"decimals",label:t("DECIMALS"),visible:function(e,t){return"number"===t.type}},{key:"colorMode",label:function(e){return"t('THRESHOLD_FILL') (".concat(e,")")},visible:function(e,t){return"number"===t.type&&"disabled"!==e},value:function(e,t){return i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{className:h.default.colorCycle,style:{backgroundColor:t.colors[0]}}),i.default.createElement("span",null,"<"),i.default.createElement("span",null,t.thresholds[0]),i.default.createElement("span",null,"<"),i.default.createElement("span",{className:h.default.colorCycle,style:{backgroundColor:t.colors[1]}}),i.default.createElement("span",null,"<"),i.default.createElement("span",null,t.thresholds[1]),i.default.createElement("span",null,"<"),i.default.createElement("span",{className:h.default.colorCycle,style:{backgroundColor:t.colors[2]}}))}}].map((function(t){if((0,f.default)(t.visible)&&!t.visible(e[t.key],e))return!1;var a=(0,f.default)(t.value)?t.value(e[t.key],e):e[t.key];if(!a)return!1;var r=(0,f.default)(t.label)?t.label(e[t.key],e):t.label;return i.default.createElement("span",{key:t.key,className:h.default.item},r,": ",a)}))}}]),r}(i.default.Component);a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(191)),d=n(r(274)),p=r(25),m=n(r(740)),h=n(r(1955)),v=n(r(1966));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).form=i.default.createRef(),t.handleTypeChange=function(e){t.setState({type:e})},t.onOk=function(){var e,a=t.props.data.type;"date"===a?e=(0,f.default)(t.props.data,["type","dateFormat"]):"number"===a?e=(0,f.default)(t.props.data,["type","decimals","unit","colorMode","thresholds","colors"]):"string"===a&&(e=(0,f.default)(t.props.data,["type"])),t.form.current.validator((function(){return t.props.onOk(e)}))},t.state={type:e.data.type},t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.data,r=e.visible,n=e.onCancel,l=this.state.type;return i.default.createElement(d.default,{width:960,title:t("CUSTOM_DISPLAY_STYLE"),description:t("CUSTOM_DISPLAY_MODAL_DESC"),icon:"table-chart",visible:r,okText:t("Apply"),onCancel:n,onOk:this.onOk},i.default.createElement(p.Form,{data:a,ref:this.form},i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("DATA_TYPE")},i.default.createElement(p.Select,{name:"type",onChange:this.handleTypeChange,options:[{label:"string",value:"string"},{label:"date",value:"date"},{label:"number",value:"number"}]}))),i.default.createElement(p.Column,null)),"number"===l&&i.default.createElement("div",null,i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("Unit")},i.default.createElement(p.Select,{defaultValue:"null",name:"unit",options:[{label:"Bytes",value:"Bytes"},{label:"null",value:"null"}]}))),i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{rules:[{required:!0}],label:t("DECIMALS")},i.default.createElement(m.default,{defaultValue:0,name:"decimals"})))),i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("THRESHOLD_FILL"),desc:t("THRESHOLD_FILL_DESC")},i.default.createElement(p.Select,{name:"colorMode",defaultValue:"disabled",options:[{label:"cell",value:"cell"},{label:"disabled",value:"disabled"},{label:"value",value:"value"}]}))),i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("HIGHT_RULES")},i.default.createElement("div",{className:v.default.tableColorStyle},i.default.createElement(p.Form.Item,{className:v.default.thresholds},i.default.createElement(h.default,{name:"colors[0]",defaultValue:"#fff"})),i.default.createElement("span",null," < "),i.default.createElement(p.Form.Item,{className:v.default.thresholds,rules:[{required:!0}]},i.default.createElement(m.default,{name:"thresholds[0]",defaultValue:0})),i.default.createElement("span",null," < "),i.default.createElement(p.Form.Item,{className:v.default.thresholds},i.default.createElement(h.default,{defaultValue:"#fff",name:"colors[1]"})),i.default.createElement("span",null," < "),i.default.createElement(p.Form.Item,{className:v.default.thresholds,rules:[{required:!0}]},i.default.createElement(m.default,{name:"thresholds[1]",defaultValue:0})),i.default.createElement("span",null," < "),i.default.createElement(p.Form.Item,{className:v.default.thresholds},i.default.createElement(h.default,{name:"colors[2]",defaultValue:"#fff"}))))))),"date"===l&&i.default.createElement("div",null,i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("TIME_FORMAT"),rules:[{required:!0}]},i.default.createElement(p.Select,{name:"dateFormat",defaultValue:"YYYY/MM/DD HH:mm:ss",options:[{label:"YYYY/MM/DD HH:mm:ss",value:"YYYY/MM/DD HH:mm:ss"}]})))))))}}]),r}(i.default.Component);a.default=y},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),o=r(a(19)),u=r(a(20)),c=r(a(18)),s=r(a(0)),i=a(3672),f=r(a(3)),d=r(a(1965));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var m=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={shouldMenuShow:!1},e.startSelect=function(){e.setState({shouldMenuShow:!0})},e.changeComplete=function(t){var a=t.hex;e.setState({shouldMenuShow:!1}),e.props.onChange(a)},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.className,r=this.state.shouldMenuShow;return s.default.createElement("div",{className:(0,f.default)(d.default.wrapper,a)},s.default.createElement("div",{style:{backgroundColor:t},onClick:this.startSelect}),r?s.default.createElement("div",{className:d.default.menu},s.default.createElement(i.SwatchesPicker,{onChangeComplete:this.changeComplete})):null)}}]),a}(s.default.Component);t.default=m},,,,,,,,,,function(e,t,a){e.exports={wrapper:"_2DqLE96MTxZgrmRaNYl3JI",menu:"_2YfBS7zYBSFVfBIOJT917U"}},function(e,t,a){e.exports={tableColorStyle:"_1_27Q09X6bn874q3jLw2v_",thresholds:"_1RovZFa3S9pOGx6bbUQPeW"}},function(e,t,a){e.exports={wrapper:"o_P3iP3_ZCsYtILH2QSyr",button:"_8-O7IVONGvYHZOfpcUOd",item:"_1GpHd2FMkgEHInMuv06qmH",colorCycle:"_1RNy3XODfgSAL5n6eOXavO"}},function(e,t,a){e.exports={wrapper:"_3h-NIuRqRE3h9GtNycKl4C",sort:"_3zsgf0KB-tg69gdZzW1-R2",form:"_2jSW_hDrQmQKxkNpIAG6sD",firstLine:"FrymriZwgftO8vlt-WmRq",name:"_1QnATmUkirtXgCWVQyKWSi",interval:"_3YNbiGLQms1_SoiSyMlZUp",exprInput:"_2mO4Qynrm8iiNk_zzxR4N_"}},function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,o,u=r(a(109)),c=r(a(12)),s=r(a(13)),i=r(a(19)),f=r(a(20)),d=r(a(18)),p=r(a(74)),m=n(a(0)),h=a(70),v=a(5),E=r(a(32)),y=r(a(1970)),b=r(a(1976)),g=r(a(1987)),_=r(a(1989));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,h.inject)("monitoringStore")(l=(0,h.observer)((o=function(e){(0,i.default)(a,e);var t=S(a);function a(){return(0,c.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.allMonitors.forEach((function(t){return t.monitoring(e.monitoringStore)}))}},{key:"componentWillUnmount",value:function(){this.allMonitors.forEach((function(e){e.stopMonitoring(),e.clearMonitorMetrics()}))}},{key:"render",value:function(){var e=this.props.monitoringStore.isEditing;return m.default.createElement(g.default,{graphList:m.default.createElement(y.default,{rows:[this.monitoringStore.unNameGraphRow].concat((0,u.default)(this.graphMonitorRows)),monitos:this.allMonitors}),graphRowList:e?m.default.createElement(b.default,null):this.renderGraphRows()})}},{key:"monitorStatFactory",value:function(e){return{id:e.config.id,title:e.config.title,metrics:(0,E.default)(e.stats)?[]:e.stats.map((function(e){return{title:e.name,id:e.id,color:e.color,value:e.stat}}))}}},{key:"renderGraphRows",value:function(){var e=this,t=[{id:0,hideTitle:!0,panels:this.unNameGraphRowMonitors.map(this.monitorStatFactory,this)}],a=this.graphMonitorRows.map((function(t){return{title:t.config.title,id:t.config.id,panels:t.monitors.map(e.monitorStatFactory,e)}}));return m.default.createElement(m.default.Fragment,null,m.default.createElement(_.default,{rows:t}),m.default.createElement(_.default,{rows:a}))}},{key:"monitoringStore",get:function(){return this.props.monitoringStore}},{key:"graphMonitorRows",get:function(){return this.monitoringStore.graphMonitorRows}},{key:"unNameGraphRowMonitors",get:function(){return this.monitoringStore.unNameGraphRow.monitors}},{key:"monitorsInRows",get:function(){return this.graphMonitorRows.reduce((function(e,t){return[].concat((0,u.default)(e),(0,u.default)(t.monitors))}),[])}},{key:"allMonitors",get:function(){return[].concat((0,u.default)(this.unNameGraphRowMonitors),(0,u.default)(this.monitorsInRows))}}]),a}(m.Component),(0,p.default)(o.prototype,"monitoringStore",[v.computed],Object.getOwnPropertyDescriptor(o.prototype,"monitoringStore"),o.prototype),(0,p.default)(o.prototype,"graphMonitorRows",[v.computed],Object.getOwnPropertyDescriptor(o.prototype,"graphMonitorRows"),o.prototype),(0,p.default)(o.prototype,"unNameGraphRowMonitors",[v.computed],Object.getOwnPropertyDescriptor(o.prototype,"unNameGraphRowMonitors"),o.prototype),(0,p.default)(o.prototype,"monitorsInRows",[v.computed],Object.getOwnPropertyDescriptor(o.prototype,"monitorsInRows"),o.prototype),(0,p.default)(o.prototype,"allMonitors",[v.computed],Object.getOwnPropertyDescriptor(o.prototype,"allMonitors"),o.prototype),l=o))||l)||l;t.default=O},function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,o=r(a(12)),u=r(a(13)),c=r(a(19)),s=r(a(20)),i=r(a(18)),f=n(a(0)),d=a(70),p=r(a(1971)),m=r(a(1001)),h=r(a(1974));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E={graph:p.default,table:function(){}},y=(0,d.observer)(l=function(e){(0,c.default)(a,e);var t=v(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){return f.default.createElement("div",null,this.props.rows.map((function(e){return f.default.createElement(f.default.Fragment,{key:e.config.id},e.monitors.map((function(e){var t=e.config||{},a=t.id,r=t.title,n=t.description,l=t.type,o=E[l],u=Object.prototype.toString.call(o);return f.default.createElement(m.default,{key:a,errorMessage:e.errorMessage},f.default.createElement(h.default,{title:r,description:n},"[object Function]"!==u&&o?f.default.createElement(o,{monitor:e}):null))})))})))}}]),a}(f.Component))||l;t.default=y},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=a(70),d=r(a(1972));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,f.inject)("monitoringStore")(n=(0,f.observer)(n=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.monitoringStore.getTimeRange(),t=e.from,a=e.to,r={start:t.valueOf(),end:a.valueOf()},n=this.props.monitor,l=n.config,o=n.valueFormatter,u=n.graphData,c=n.legends,s=l.title,f=l.lines,p=l.bars,m=l.stack;return i.default.createElement(d.default,{key:c.map((function(e){return e.ID})).join(","),title:s,line:f,bar:p,stacked:m,timeRange:r,valueFormatter:o,legends:c,data:u})}}]),a}(i.default.Component))||n)||n;t.default=m},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),o=r(a(21)),u=r(a(12)),c=r(a(13)),s=r(a(19)),i=r(a(20)),f=r(a(18)),d=r(a(0)),p=r(a(3)),m=r(a(1260)),h=r(a(1973));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(a,e);var t=y(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={legendsVisibleStates:e.props.legends.reduce((function(e,t){return E(E({},e),{},(0,o.default)({},t.ID,!0))}),{})},e.handleClick=function(t){var a=t.currentTarget.dataset.id,r=e.state.legendsVisibleStates;e.setState({legendsVisibleStates:E(E({},r),{},(0,o.default)({},a,!r[a]))})},e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.legends,r=(0,l.default)(t,["legends"]),u=this.state.legendsVisibleStates;return d.default.createElement("div",{className:h.default.wrapper},d.default.createElement(m.default,(0,n.default)({},r,{legends:a.filter((function(e){return u[e.ID]}))})),d.default.createElement("div",null,a.map((function(t){return d.default.createElement("span",{className:(0,p.default)(h.default.legend,(0,o.default)({},h.default.hidden,!u[t.ID])),key:t.ID,"data-id":t.ID,onClick:e.handleClick},d.default.createElement("small",{className:h.default.radios,style:{backgroundColor:t.color}}),d.default.createElement("span",null,t.name))}))))}}]),a}(d.default.Component);t.default=b},function(e,t,a){e.exports={legend:"hYVeXXLX5hUg_Skp5KFDx",hidden:"_3UdJhoiUMp6i5NgSYGomIF"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.description,r=e.children;return n.default.createElement("div",{className:o.default.wrapper},n.default.createElement("header",null,n.default.createElement("h3",null,t,a&&n.default.createElement(l.Tooltip,{content:a},n.default.createElement(l.Icon,{name:"question"})))),r)};var n=r(a(0)),l=a(25),o=r(a(1975))},function(e,t,a){e.exports={wrapper:"_1u2Q6u2ZLAcL6JzPYrETFD",maximize:"_2f_K6nodyfyufD4be_iRn_"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(74)),m=l(r(0)),h=r(70),v=r(5),E=r(1259),y=n(r(1977)),b=n(r(1979)),g=n(r(1981)),_=n(r(1983)),S=n(r(1985));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,h.inject)("monitoringStore","modalStore")(o=(0,h.observer)((u=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).addRow=function(){e.props.monitoringStore.addNewRow()},e.showMonitorModal=function(){e.props.modalStore.showNewMonitorModal()},e.onNewMonitorModalCancel=function(){e.props.modalStore.hideNewMonitorModal()},e.onConfirmNewGraphType=function(t){var a;"line"===t||"bar"===t?a=e.props.monitoringStore.generatGraphMonitor({lines:"line"===t,bars:"bar"===t}):"table"===t&&(a=e.props.monitoringStore.generatTableMonitor()),e.props.modalStore.hideNewMonitorModal(),e.modalStore.selectMonitor(a)},e}return(0,s.default)(r,[{key:"handleRowTitleChange",value:function(e){return function(t){e.config.title=t}}},{key:"handleRowPanelsSort",value:function(e){return function(t){var a=e.monitors.map((function(e){return e.id})).join(",");t.map((function(e){return e.monitor.id})).join(",")!==a&&(e.monitors=t.map((function(t){var a=t.monitor;return a.belong(e),a})))}}},{key:"handleRowDesc",value:function(e){var t=this;return function(){var a=t.props.monitoringStore.graphMonitorRows,r=a.length,n=a[e];a[e]=a[(e+1)%r],a[(e+1)%r]=n}}},{key:"handleRowAsc",value:function(e){var t=this;return function(){var a=t.props.monitoringStore.graphMonitorRows,r=a.length,n=a[e];a[e]=a[(e+r-1)%r],a[(e+r-1)%r]=n}}},{key:"handleRowDelete",value:function(e){var t=this;return function(){t.props.monitoringStore.graphMonitorRows.splice(e,1)}}},{key:"handleMonitorDelete",value:function(e,t){return function(){e.deleteTextMonitorByIndex(t)}}},{key:"handleMonitorSelect",value:function(e){var t=this;return function(){t.props.modalStore.selectMonitor(e)}}},{key:"render",value:function(){var e=this,a=this.props.monitoringStore.unNameGraphRow,r=this.props.monitoringStore.graphMonitorRows;return m.default.createElement(g.default,{top:m.default.createElement("div",null,m.default.createElement(E.ReactSortable,{handle:".".concat("j-sort"),list:a.monitors.map((function(e){return{monitor:e}})),setList:this.handleRowPanelsSort(a),animation:200,group:"group"},a.monitors.map((function(t,r){return m.default.createElement(b.default,{key:t.id,title:t.config.title,sortHandlerClassName:"j-sort",onEditClick:e.handleMonitorSelect(t),onDeleteClick:e.handleMonitorDelete(a,r)})}))),r.map((function(t,a){return m.default.createElement("div",{key:t.config.id},m.default.createElement(y.default,{key:t.config.id,onChange:e.handleRowTitleChange(t),title:t.config.title,onDescClick:e.handleRowDesc(a),onAscClick:e.handleRowAsc(a),onDeleteClick:e.handleRowDelete(a)}),m.default.createElement(E.ReactSortable,{key:"sortTable".concat(t.config.id),handle:".".concat("j-sort"),list:t.monitors.map((function(e){return{monitor:e}})),setList:e.handleRowPanelsSort(t),animation:200,group:"group"},t.monitors.map((function(a,r){return m.default.createElement(b.default,{key:a.config.id,title:a.config.title,sortHandlerClassName:"j-sort",onEditClick:e.handleMonitorSelect(a),onDeleteClick:e.handleMonitorDelete(t,r)})}))))}))),bottom:m.default.createElement("div",null,m.default.createElement(_.default,{title:t("ADD_MONITOR_ITEM"),onClick:this.showMonitorModal}),m.default.createElement(_.default,{title:t("ADD_MONITOR_ROW"),onClick:this.addRow}),m.default.createElement(S.default,{visible:this.modalStore.shouldNewMonitorModalShow,onCancel:this.onNewMonitorModalCancel,onOk:this.onConfirmNewGraphType}))})}},{key:"modalStore",get:function(){return this.props.modalStore}},{key:"monitoringStore",get:function(){return this.props.monitoringStore}}]),r}(m.Component),(0,p.default)(u.prototype,"modalStore",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"modalStore"),u.prototype),(0,p.default)(u.prototype,"monitoringStore",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitoringStore"),u.prototype),o=u))||o)||o;a.default=C},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),o=r(a(19)),u=r(a(20)),c=r(a(18)),s=r(a(0)),i=a(25),f=r(a(1978));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var p=function(e){(0,o.default)(a,e);var t=d(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={editing:!1},e.handleEditClick=function(){e.setState({editing:!0},(function(){e.inputRef.current.focus()}))},e.inputRef=s.default.createRef(),e.onChange=function(t){(0,e.props.onChange)(t.target.value)},e.onBlur=function(){e.setState({editing:!1})},e.onKeyUp=function(t){13===t.keyCode&&e.setState({editing:!1})},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.state.editing,t=this.props,a=t.title,r=t.onDescClick,n=t.onAscClick,l=t.onDeleteClick;return s.default.createElement("div",{className:f.default.wrapper},s.default.createElement("h3",null,e?s.default.createElement("input",{ref:this.inputRef,type:"text",value:a,onBlur:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp}):a),s.default.createElement("span",{className:f.default.tools},s.default.createElement(i.Icon,{name:"pen",onClick:this.handleEditClick}),s.default.createElement(i.Icon,{name:"trash",onClick:l}),s.default.createElement(i.Icon,{name:"sort-descending",onClick:r}),s.default.createElement(i.Icon,{name:"sort-ascending",onClick:n})))}}]),a}(s.default.Component);t.default=p},function(e,t,a){e.exports={wrapper:"_1Q5L6xVUY_dZiZE9P7abIn",tools:"_2AX8cBDeGzuZCuS9zSbLUA"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.sortHandlerClassName,r=e.onEditClick,u=e.onDeleteClick;return n.default.createElement("div",{className:o.default.wrapper},n.default.createElement("h3",null,t),n.default.createElement("div",{className:o.default.tools},n.default.createElement(l.Icon,{name:"pen",className:o.default.edit,onClick:r}),n.default.createElement(l.Icon,{name:"trash",className:o.default.edit,onClick:u}),n.default.createElement(l.Icon,{name:"drag-handle",className:a})))};var n=r(a(0)),l=a(25),o=r(a(1980))},function(e,t,a){e.exports={wrapper:"_1YVAyThxPFHSQQzYDWZZba",tools:"_1K8ripXpvIFhR8VfrzmiBH",edit:"FP5B56V7_lFfN94zeARrg"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.top,a=e.bottom;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",null,t),n.default.createElement("div",null,a))};var n=r(a(0)),l=r(a(1982))},function(e,t,a){e.exports={wrapper:"_3_UUuXKfEGWvjq98lJJLFJ"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.onClick;return n.default.createElement("div",{className:o.default.wrapper,onClick:a},n.default.createElement(l.Icon,{name:"add"}),n.default.createElement("span",null,t))};var n=r(a(0)),l=a(25),o=r(a(1984))},function(e,t,a){e.exports={wrapper:"_2dxZyYmy9dDDX9jI0csU0h"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(136)),c=l(r(12)),s=l(r(13)),i=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(3)),h=l(r(274)),v=r(25),E=l(r(942)),y=l(r(1986));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={type:"line"},e.typeConfig={line:{icon:"linechart",name:t("LINE_CHART"),desc:[{title:t("APPLICABLE_SCENE"),description:t("LINE_CHART_DESC")},{title:t("BASE_LINE_CHART"),description:t("BASE_LINE_CHART_DESC")},{title:t("STACK_LINE_CHART"),description:t("STACK_LINE_CHART_DESC")}]},bar:{icon:"barchart",name:t("BAR_CHART"),desc:[{title:t("APPLICABLE_SCENE"),description:t("BAR_CHART_DESC")},{title:t("BASE_BAR_CHART"),description:t("BASE_BAR_CHART_DESC")},{title:t("STACK_BAR_CHART"),description:t("STACK_BAR_CHART_DESC")}]}},e.handleClick=function(t){e.setState({type:t.currentTarget.dataset.type})},e.onOk=function(){e.props.onOk(e.state.type)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,l=this.state.type,c=this.typeConfig[l];return p.default.createElement(h.default,{width:960,imageIcon:"/assets/coin.svg",title:t("SELECT_CHART_TYPE"),description:t("SELECT_CHART_TYPE_MODAL_DESC"),visible:r,onCancel:n,onOk:this.onOk},p.default.createElement("div",{className:y.default.wrapper},p.default.createElement(E.default,{label:t("CHART_TYPES")},Object.entries(this.typeConfig).map((function(t){var a=(0,u.default)(t,2),r=a[0],n=a[1];return p.default.createElement("div",{key:r,"data-type":r,onClick:e.handleClick,className:y.default.typeOpts},p.default.createElement("div",{className:(0,m.default)(y.default.typeOpt,(0,o.default)({},y.default.select,r===l))},p.default.createElement(v.Icon,{className:y.default.icon,name:n.icon,size:40,type:r===l?"light":"dark"}),p.default.createElement("h4",null,n.name)))}))),c.desc.map((function(e){return p.default.createElement("div",{key:e.title},p.default.createElement("h3",null,e.title),p.default.createElement("p",null,e.description))})),p.default.createElement(E.default,{label:t("DISPLAY_POSITION")},p.default.createElement("div",{className:y.default.position},p.default.createElement("div",{className:y.default.navs},p.default.createElement("div",null),p.default.createElement("div",null)),p.default.createElement("div",{className:y.default.placeholderWrapper},p.default.createElement("div",{className:y.default.placeholder},p.default.createElement("div",{className:"text-center"},p.default.createElement(v.Icon,{name:c.icon,size:40}),p.default.createElement("div",{className:"margin-t12"},t("EMPTY_CHART_PLACEHOLDER")))))))))}}]),r}(p.Component);a.default=g},function(e,t,a){e.exports={wrapper:"_3Gsl08n1YLlMoZKB-ZIDyt",typeOpts:"DI7hisvpRHRQ4BOLCrfHJ",typeOpt:"_2_0SO5zI5pSrohp43NuaNF",select:"_2ydBGOddL92AnuxLWamTH7",position:"_1EKwsFmFowHAHtJ7TY95ZU",navs:"qqJ5lFZU8VjK1Sxl4oDZu",placeholderWrapper:"_1N3lMb4bCQ9diP9zwD3xpY",placeholder:"_11m9sjSshUu7Y2-c_9QF5D"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.graphList,a=e.graphRowList;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",{className:l.default.graphs},t),n.default.createElement("div",{className:l.default.row},a))};var n=r(a(0)),l=r(a(1988))},function(e,t,a){e.exports={wrapper:"_2f81WjhyuGPKeTo_qAX3rO",graphs:"_Jreo1l7RXs_lL5KI3y-i",row:"_28aqToPqGsHD4usWoSm-Sq",hidden:"_1muGurgPkX7BU0SJUUGgkk"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.rows.map((function(e){return n.default.createElement("div",{key:e.id},e.hideTitle||n.default.createElement("h3",{className:o.default.rowTitle},e.title),e.panels.map((function(e){return n.default.createElement(l.default,{key:e.id,title:e.title,metrics:e.metrics})})))}))};var n=r(a(0)),l=r(a(1990)),o=r(a(1992))},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(136)),l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=r(a(24)),d=a(25),p=r(a(1991));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(a,e);var t=m(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={collapse:!0},e.handleTitleClick=function(){e.setState((function(e){return{collapse:!e.collapse}}))},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.metrics,r=this.state.collapse;return i.default.createElement("div",{className:p.default.wrapper},i.default.createElement("h3",{onClick:this.handleTitleClick},i.default.createElement("span",null,t),i.default.createElement("small",null,i.default.createElement(d.Icon,{name:r?"chevron-right":"chevron-down"}))),!r&&i.default.createElement("div",{className:p.default.legendsContainer},a.map((function(e,t){return i.default.createElement("div",{className:p.default.legends,key:t},i.default.createElement("p",null,i.default.createElement("small",{style:{backgroundColor:e.color}}),i.default.createElement("span",{title:e.title},e.title)),i.default.createElement("div",{className:p.default.subMetrics},(0,f.default)(e.value)&&Object.entries(e.value).map((function(e){var t=(0,n.default)(e,2),a=t[0],r=t[1];return i.default.createElement("div",{key:a},i.default.createElement("span",null,a),i.default.createElement("span",null,r))}))))}))))}}]),a}(i.default.Component);t.default=h},function(e,t,a){e.exports={wrapper:"rjDeaoFJ6N8WsWZ0bilph",legendsContainer:"_1Qvu2gaT9loLM60nS8Q06W",legends:"_2n9SFFnS_yXTWI_QrGamFb",subMetrics:"_2Q1jEzz9hTB_6cseHgUbTs"}},function(e,t,a){e.exports={rowTitle:"_20_7N3uyaR-QiWjc9NRg3z"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),l=a(70),o=r(a(1257));var u=(0,l.inject)("modalStore")((function(e){var t=e.modalStore;return n.default.createElement(o.default,{type:"control",icon:"theme",onClick:function(){t.changeTheme()}})}));t.default=u},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(137));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=function(e){(0,u.default)(r,e);var a=d(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={time:Date.now()},e}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.updateTime()}},{key:"updateTime",value:function(){var e=this;this.timer=setTimeout((function(){e.setState({time:Date.now()}),e.updateTime()}),1e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){return i.default.createElement(i.default.Fragment,null,t("TIME"),": ",(0,f.default)(this.state.time).format("YYYY-MM-DD HH:mm:ss"))}}]),r}(i.default.Component);a.default=p},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.theme,a=e.className,r=(0,l.default)(e,["theme","className"]),i="light"===t?s.default.light:s.default.dark;return o.default.createElement(c.default,(0,n.default)({className:(0,u.default)(a,i)},r))};var n=r(a(71)),l=r(a(56)),o=r(a(0)),u=r(a(3)),c=r(a(1996)),s=r(a(1998))},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.description,r=e.onCancel,s=e.children,i=e.operations,f=e.className;return n.default.createElement(o.default,{fullScreen:!0,hideFooter:!0,visible:!0,title:t,description:a,icon:"monitor",className:(0,u.default)(c.default.wrapper,f),headerClassName:c.default.header,bodyClassName:c.default.body,closable:!1,operations:n.default.createElement("div",{className:c.default.operations},i,n.default.createElement(l.Button,{icon:"close",iconType:"light",type:"control",onClick:r,className:c.default.close}))},s)};var n=r(a(0)),l=a(25),o=r(a(274)),u=r(a(3)),c=r(a(1997))},function(e,t,a){e.exports={wrapper:"_1v3w1K8GocJSNhGw0Otqvw",operations:"_2AtGIYhklmm48zCtgKZtnI",body:"_2_tbF0yNMg946Wj9MNdEpW",header:"_1Jj1diU-3q7-CIxwUuTEsN",close:"iOtAIVcFhv-JY_191Zjgq"}},function(e,t,a){e.exports={dark:"_2Y2inQV9uyIxXH3la3UO2x",light:"SrA97pSKRoGNYKHsT1wtU"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.sidebar,a=e.content;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",{className:l.default.sidebar},t),n.default.createElement("div",{className:l.default.content},a))};var n=r(a(0)),l=r(a(2e3))},function(e,t,a){e.exports={wrapper:"_2VQ65xJOwT9qSI7B5BWRaN",sidebar:"_88ehNHIYZa4OJYE96LJg2",content:"_1mU4S3qQTlDWk5sHLHl-0G"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,o,u,c=r(a(91)),s=r(a(12)),i=r(a(13)),f=r(a(74)),d=(r(a(92)),a(5)),p=(n=function(){function e(){(0,s.default)(this,e),(0,c.default)(this,"theme",l,this),(0,c.default)(this,"selectedMonitor",o,this),(0,c.default)(this,"shouldNewMonitorModalShow",u,this)}return(0,i.default)(e,[{key:"selectMonitor",value:function(e){this.selectedMonitor=e}},{key:"unSelectMonitor",value:function(){this.selectedMonitor=null}},{key:"changeTheme",value:function(){this.theme="light"===this.theme?"dark":"light"}},{key:"showNewMonitorModal",value:function(){this.shouldNewMonitorModalShow=!0}},{key:"hideNewMonitorModal",value:function(){this.shouldNewMonitorModalShow=!1}}]),e}(),l=(0,f.default)(n.prototype,"theme",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"dark"}}),o=(0,f.default)(n.prototype,"selectedMonitor",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=(0,f.default)(n.prototype,"shouldNewMonitorModalShow",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,f.default)(n.prototype,"selectMonitor",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"selectMonitor"),n.prototype),(0,f.default)(n.prototype,"unSelectMonitor",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"unSelectMonitor"),n.prototype),(0,f.default)(n.prototype,"changeTheme",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"changeTheme"),n.prototype),(0,f.default)(n.prototype,"showNewMonitorModal",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"showNewMonitorModal"),n.prototype),(0,f.default)(n.prototype,"hideNewMonitorModal",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"hideNewMonitorModal"),n.prototype),n);t.default=p},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(136)),o=r(a(12)),u=r(a(13)),c=r(a(19)),s=r(a(20)),i=r(a(18)),f=r(a(74)),d=r(a(16)),p=a(5),m=a(725),h=r(a(1102));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E={avg:m.avgs,last:function(e){return e[e.length-1]},first:function(e){return e[0]}},y=(n=function(e){(0,c.default)(a,e);var t=v(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"stat",get:function(){var e=this.config,t=e.valueName,a=e.decimals,r=void 0===a?0:a,n=e.format,o=this.metrics,u=this.metrics.length;if(u>1)return"Only queries that return single series/table is supported";if(0===u)return"No Data";var c=(0,d.default)(o,"0.values",[]).map((function(e){var t=(0,l.default)(e,2)[1];return Number(t)})),s=(E[t]||m.avgs)(c)||0;return(m.unitTransformMap[n]||m.unitTransformMap.none)(s,r)}}]),a}(h.default),(0,f.default)(n.prototype,"stat",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"stat"),n.prototype),n);t.default=y},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=r(a(21)),o=r(a(136)),u=r(a(12)),c=r(a(13)),s=r(a(19)),i=r(a(20)),f=r(a(18)),d=r(a(74)),p=a(5),m=a(725),h=r(a(16)),v=r(a(1102));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b={avg:m.avgs,last:function(e){return e[e.length-1]},first:function(e){return e[0]},max:function(e){return Math.max.apply(null,e)},min:function(e){return Math.min.apply(null,e)}},g=(n=function(e){(0,s.default)(a,e);var t=y(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"graphData",get:function(){var e=this.metrics.reduce((function(e,t){var a=t.values,r=t.id;return a.forEach((function(t){var a=(0,o.default)(t,2),n=a[0],l=a[1],u=1e3*n,c=e[u]||{};c[r]=Number(l),e[u]=c})),e}),{});return Object.entries(e).map((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({time:Number(a)},r)}))}},{key:"legends",get:function(){var e=this.config.colors,t=void 0===e?[]:e;return this.formattedMetrics.map((function(e,a){var r=e.id;return{name:e.name,ID:r,color:t[a%t.length]}}))}},{key:"valueFormatter",get:function(){var e=(0,h.default)(this.config,"yaxes[0].format","none"),t=(0,h.default)(this.config,"yaxes[0].decimals",2),a=m.unitTransformMap[e]||function(){};return function(e){return a(e,t)}}},{key:"stats",get:function(){var e=this;return this.formattedMetrics.map((function(t,a){var r=(t.values||[]).map((function(e){var t=(0,o.default)(e,2)[1];return Number(t)})),n=e.config.colors,l=void 0===n?[]:n;return{id:t.id,name:t.name,color:l[a%l.length],stat:{max:e.valueFormatter(b.max(r)),min:e.valueFormatter(b.min(r)),avg:e.valueFormatter(b.avg(r)),last:e.valueFormatter(b.last(r))}}}))}}]),a}(v.default),(0,d.default)(n.prototype,"graphData",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"graphData"),n.prototype),(0,d.default)(n.prototype,"legends",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"legends"),n.prototype),(0,d.default)(n.prototype,"valueFormatter",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"valueFormatter"),n.prototype),(0,d.default)(n.prototype,"stats",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"stats"),n.prototype),n);t.default=g},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l,o,u=r(a(91)),c=r(a(12)),s=r(a(13)),i=r(a(74)),f=(r(a(92)),a(5)),d=r(a(139)),p=(n=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.config,n=void 0===r?{}:r,s=a.monitors,i=void 0===s?[]:s;(0,c.default)(this,e),(0,u.default)(this,"monitors",l,this),(0,u.default)(this,"config",o,this),this.config=n,this.monitors=i.map((function(e){return e.belong(t)}))}return(0,s.default)(e,[{key:"push",value:function(e){return e.belong(this),this.monitors.push(e),this}},{key:"has",value:function(e){return(0,d.default)(this.monitors,e)}},{key:"updateMonitors",value:function(e){this.monitors=e}},{key:"deleteTextMonitorByIndex",value:function(e){this.monitors.splice(e,1)}}]),e}(),l=(0,i.default)(n.prototype,"monitors",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,i.default)(n.prototype,"config",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,i.default)(n.prototype,"updateMonitors",[f.action],Object.getOwnPropertyDescriptor(n.prototype,"updateMonitors"),n.prototype),(0,i.default)(n.prototype,"deleteTextMonitorByIndex",[f.action],Object.getOwnPropertyDescriptor(n.prototype,"deleteTextMonitorByIndex"),n.prototype),n);t.default=p},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(49)),u=n(r(50)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(16)),h=n(r(1256)),v=n(r(2007)),E=n(r(1291)),y=n(r(766)),b=n(r(2012));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={finishBasis:!1},e.handleOk=function(){var t=(0,u.default)(o.default.mark((function t(a){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r="Grafana"===e.state.type?a:e.store.toJS(),e.props.onOk(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleBasicConfirm=function(t){var a=e.props,r=a.cluster,n=a.namespace;e.store=new E.default(_({cluster:r,namespace:n,formTemplate:t,name:(0,m.default)(t,"metadata.name"),description:(0,m.default)(t,'metadata.annotations["kubesphere.io/description"]'),isEditing:!0},t.spec)),e.setState({finishBasis:!0,type:t.spec.title,formData:t})},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.state,a=e.finishBasis,r=e.type,n=e.formData,l=this.props,o=l.cluster,u=l.namespace,c=l.formTemplate,s=l.isSubmitting,i=l.onCancel,f=l.store,d=f.module;return a?"Grafana"===r?p.default.createElement(v.default,{formTemplate:n,onCancel:i,onOk:this.handleOk}):p.default.createElement(h.default,{store:this.store,cluster:o,onOk:this.handleOk,onCancel:i,isSubmitting:s}):p.default.createElement(y.default,{visible:!0,module:d,name:"CUSTOM_MONITORING_DASHBOARD",cluster:o,namespace:u,formTemplate:c,steps:b.default,store:f,onOk:this.handleBasicConfirm,onCancel:i,okBtnText:t("NEXT")})}}]),r}(p.default.Component);a.default=O},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s,i=n(r(21)),f=n(r(91)),d=n(r(12)),p=n(r(13)),m=n(r(135)),h=n(r(19)),v=n(r(20)),E=n(r(18)),y=n(r(74)),b=(n(r(92)),n(r(0))),g=r(70),_=n(r(16)),S=n(r(274)),O=r(25),C=r(5),T=r(58),R=n(r(2008)),D=n(r(2009));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var I=(0,g.observer)((o=function(e){(0,h.default)(r,e);var a=P(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return e=a.call.apply(a,[this].concat(l)),(0,f.default)(e,"type",u,(0,m.default)(e)),e.formRef=b.default.createRef(),(0,f.default)(e,"formData",c,(0,m.default)(e)),(0,f.default)(e,"handleTypeChange",s,(0,m.default)(e)),e.handleSave=function(){var t=e.formRef.current;t&&t.validate((function(){var t=e.props,a=t.onOk,r=t.formTemplate,n=e.formData,l=(0,_.default)(r,"metadata.name"),o=(0,_.default)(r,'metadata.annotations["kubesphere.io/description"]');a(N(N({},n),{},{type:"grafana",name:l,description:o,grafanaDashboardName:l}))}))},e.renderUpload=function(){return"json"===e.type?b.default.createElement(O.Form.Item,{label:t("SUPPORT_JSON_FILE"),rules:[{required:!0,message:t("UPLOAD_FILE_TIP")}]},b.default.createElement(D.default,{name:"grafanaDashboardContent"})):null},e.renderUrl=function(){return"json"===e.type?null:b.default.createElement(O.Form.Item,{label:t("UPLOAD_GRAFANA_URL"),rules:[{required:!0,message:t("ENTER_GRAFANA_URL")},{pattern:T.PATTERN_URL,message:t("INVALID_URL_DESC")}]},b.default.createElement(O.Input,{name:"grafanaDashboardUrl",autoFocus:!0,maxLength:63}))},e}return(0,p.default)(r,[{key:"render",value:function(){var e=this.props.onCancel;return b.default.createElement(S.default,{visible:!0,width:600,onCancel:e,title:t("UPLOAD_GRAFANA_DASHBOARD"),onOk:this.handleSave},b.default.createElement("div",{className:R.default.container},b.default.createElement(O.Form,{data:this.formData,ref:this.formRef},b.default.createElement(O.RadioGroup,{mode:"button",value:this.type,onChange:this.handleTypeChange,size:"small"},b.default.createElement(O.RadioButton,{value:"json"},t("UPLOAD_FROM_LOCAL_STORAGE")),b.default.createElement(O.RadioButton,{value:"url"},t("UPLOAD_FROM_URL"))),this.renderUpload(),this.renderUrl())))}}]),r}(b.default.Component),u=(0,y.default)(o.prototype,"type",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"json"}}),c=(0,y.default)(o.prototype,"formData",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=(0,y.default)(o.prototype,"handleTypeChange",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.type=t,e.formData={}}}}),l=o))||l;a.default=I},function(e,t,a){e.exports={container:"_1N2aKN3q6b7ysIzqzzy8I8"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(49)),u=n(r(50)),c=n(r(21)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(25),v=n(r(878)),E=n(r(299)),y=n(r(3)),b=r(37),g=r(2010),_=n(r(2011));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=function(e){(0,f.default)(r,e);var a=C(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).setFileStatus=function(e,t){n.setState((function(a){return{files:O(O({},a.files),{},(0,c.default)({},e,O(O({},a.files[e]),t)))}}))},n.beforeUploadHandler=function(){var e=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(n.state.files).length>0)){e.next=4;break}return h.Notify.error(t("FILE_UPLOAD_ERROR")),e.abrupt("return",Promise.reject(t("FILE_UPLOAD_ERROR")));case 4:if("json"===a.name.slice(a.name.lastIndexOf(".")+1)){e.next=8;break}return h.Notify.error(t("WRONG_FILE_EXTENSION_NAME",{type:"JSON"})),e.abrupt("return",Promise.reject(t("WRONG_FILE_EXTENSION_NAME",{type:"JSON"})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.startHandler=function(e){n.setFileStatus(e.uid,{size:e.size,name:e.name,showProgress:!0,showFile:!1,percentage:0,status:"active"})},n.progressHandler=function(e,t){var a=(0,E.default)(e.percent)?Math.round(e.percent):0;n.setFileStatus(t.uid,{size:t.size,percentage:100===a?99:a,status:"active"})},n.successHandler=function(e,a){var r={name:a.name,size:a.size,showProgress:!1,showFile:!0,percentage:100,status:"active"};n.setFileStatus(a.uid,r);var l=new FileReader;l.readAsText(a,"utf8"),l.addEventListener("load",(function(){var e=l.result;n.props.onChange&&n.props.onChange(e)})),h.Notify.success({content:t("UPLOAD_SUCCESSFUL")})},n.errorHandler=function(e,a,r){n.setFileStatus(r.uid,{size:r.size,showProgress:!0,showFile:!1,status:"exception"}),h.Notify.error({content:t("UPLOAD_FAILED")})},n.handleReUpload=function(){Object.keys(n.state.files).forEach((function(e){n.uploader.abort(e)})),n.setState({files:{}}),n.props.onChange(""),n.uploader.onClick()},n.renderProgress=function(e){var a=n.state.files[e];return m.default.createElement("div",{className:_.default.uploadingContent,key:e},m.default.createElement("p",{className:_.default.fileInfo},m.default.createElement("span",{className:_.default.fileName},a.name),m.default.createElement("span",{className:_.default.uploadText},t("UPLOAD_PERCENT",{percent:a.percentage})),m.default.createElement("span",{className:_.default.uploadText},t("FILE_SIZE",{size:(0,b.formatSize)(a.size)}))),m.default.createElement(h.Progress,{status:"primary",className:_.default.progress,percent:a.percentage,strokeWidth:8,key:e,showInfo:!1}))},n.renderFileItem=function(e){var a=n.state.files[e];return m.default.createElement("div",{className:_.default.uploadingContent,key:e},m.default.createElement("p",{className:_.default.fileInfo},m.default.createElement("span",{className:_.default.fileName},a.name),m.default.createElement("span",{className:_.default.uploadText},t("UPLOAD_FULLY")),m.default.createElement("span",{className:_.default.uploadText},t("FILE_SIZE",{size:(0,b.formatSize)(a.size)}))),m.default.createElement(h.Progress,{status:"primary",className:_.default.progress,percent:100,strokeWidth:8,showInfo:!1}))},n.uploaderProps={name:"grafanaDashboard",method:"post",action:n.getUploadUrl,multiple:!1,type:"json",beforeUpload:n.beforeUploadHandler,onStart:n.startHandler,onSuccess:n.successHandler,onProgress:n.progressHandler,onError:n.errorHandler},n.state={files:{}},n}return(0,i.default)(r,[{key:"render",value:function(){var e=this,a=this.state.files,r=Object.keys(a).length;return m.default.createElement("div",null,m.default.createElement("div",{className:_.default.container},m.default.createElement(v.default,(0,l.default)({},this.uploaderProps,{ref:function(t){e.uploader=t}}),m.default.createElement("div",{className:(0,y.default)(_.default.selectContainer,{})},m.default.createElement(h.Icon,{className:_.default.icon,size:40,name:"upload"}),m.default.createElement("p",{className:_.default.title},t("UPLOAD_FROM_LOCAL_TITLE")),m.default.createElement("p",{className:_.default.desc},t("SUPPORT_JSON_FILE"))))),m.default.createElement("div",{className:(0,y.default)(_.default.uploadContainer,(0,c.default)({},_.default.none,!r))},m.default.createElement("span",{className:_.default.icon},m.default.createElement(g.ReactComponent,null)),Object.keys(a).map((function(t){return a[t]?a[t].showProgress?e.renderProgress(t):a[t].showFile?e.renderFileItem(t):null:null})),m.default.createElement(h.Icon,{changeable:!0,name:"trash",onClick:this.handleReUpload,className:_.default.uploadIcon})))}},{key:"getUploadUrl",get:function(){return"/grafana/file"}}]),r}(m.default.Component);a.default=T},function(e,t,a){"use strict";a.r(t),a.d(t,"ReactComponent",(function(){return i}));var r=a(71),n=a.n(r),l=a(0),o=a.n(l),u=o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.29 18.517h2.646v1.323c0 .73.592 1.323 1.323 1.323H19.84c.73 0 1.323-.592 1.323-1.323V7.936h-3.968c-.73 0-1.323-.592-1.323-1.323V2.645H9.259c-.73 0-1.323.593-1.323 1.323v6.613H5.291V2.645A2.645 2.645 0 017.936 0h10.26l5.612 5.612v15.55a2.645 2.645 0 01-2.645 2.646H7.936a2.645 2.645 0 01-2.645-2.645v-2.646z",fill:"#324558"}),c=o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 10.582a1 1 0 00-1 1v5.936a1 1 0 001 1h18a1 1 0 001-1V11.58a1 1 0 00-1-1H1zm7.648 6.41c-.372.28-.874.42-1.504.42-.437 0-.836-.08-1.195-.24-.36-.16-.634-.38-.822-.659a1.686 1.686 0 01-.284-.969H6.02c0 .628.375.942 1.125.942.279 0 .496-.057.652-.17a.553.553 0 00.235-.475c0-.221-.078-.391-.235-.51-.156-.118-.437-.243-.843-.374a5.981 5.981 0 01-.965-.39c-.646-.348-.969-.818-.969-1.41 0-.307.087-.58.26-.822.173-.24.422-.429.746-.564a2.808 2.808 0 011.092-.203c.406 0 .768.073 1.086.22.317.148.564.355.74.624.176.268.264.572.264.914H8.035c0-.26-.082-.463-.246-.608-.164-.144-.395-.216-.692-.216-.286 0-.509.06-.668.181a.573.573 0 00-.238.479c0 .184.093.34.28.464.186.126.46.243.822.352.666.2 1.152.45 1.457.746.304.297.457.667.457 1.11 0 .492-.187.878-.559 1.158zm-5.088.193a2.118 2.118 0 01-.989.227c-.601 0-1.07-.153-1.406-.46-.336-.305-.504-.738-.504-1.298h1.18c0 .278.059.484.176.617.117.133.302.2.554.2a.672.672 0 00.536-.231c.132-.154.199-.373.199-.656v-3.938h1.172v3.938c0 .361-.08.681-.24.959-.16.277-.387.491-.678.642zm8.297.227c.477 0 .9-.115 1.268-.344.368-.23.652-.555.85-.977.197-.422.296-.912.296-1.472v-.254c0-.558-.1-1.05-.302-1.475a2.254 2.254 0 00-.856-.98 2.353 2.353 0 00-1.263-.342c-.474 0-.896.114-1.264.342a2.254 2.254 0 00-.856.98c-.201.426-.302.919-.302 1.479v.28c.002.548.105 1.032.308 1.452.203.42.49.744.86.97.37.227.79.34 1.261.34zm-.921-1.442c.213.32.52.48.921.48.394 0 .696-.154.907-.462.21-.309.317-.759.32-1.35v-.277c0-.597-.107-1.05-.32-1.36-.214-.31-.519-.464-.914-.464-.394 0-.697.153-.91.459-.214.306-.322.754-.325 1.345v.278c0 .58.107 1.03.32 1.351zm4.959 1.364V13.59l2.281 3.743h1.172v-5.688H18.18v3.75l-2.285-3.75h-1.172v5.688h1.172z",fill:"#B6C2CD"}),s=o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.572 17.412c.367 0 .696-.076.988-.227.291-.151.517-.365.678-.642.16-.278.24-.598.24-.96v-3.937H3.306v3.938c0 .283-.067.502-.2.656a.671.671 0 01-.534.23c-.253 0-.438-.066-.555-.199-.117-.133-.176-.339-.176-.617H.661c0 .56.168.993.504 1.299.336.306.805.459 1.407.459zm4.572 0c.63 0 1.132-.14 1.504-.42.372-.28.559-.666.559-1.159 0-.442-.153-.812-.457-1.109-.305-.297-.79-.546-1.457-.746-.362-.11-.636-.226-.823-.351-.186-.126-.279-.28-.279-.465 0-.198.08-.358.238-.479.16-.121.382-.181.668-.181.297 0 .528.072.692.216.164.145.246.347.246.608h1.172a1.63 1.63 0 00-.264-.914 1.729 1.729 0 00-.74-.623 2.555 2.555 0 00-1.086-.221c-.404 0-.768.068-1.092.203a1.695 1.695 0 00-.746.564c-.173.241-.26.515-.26.823 0 .59.323 1.06.969 1.41.237.127.559.257.965.389.406.131.687.256.844.374.156.119.234.289.234.51a.553.553 0 01-.234.475c-.157.113-.374.17-.653.17-.75 0-1.125-.314-1.125-.942H4.843c0 .368.095.69.284.97.188.278.463.497.822.657.36.16.758.24 1.195.24zm4.713 0c.477 0 .9-.115 1.268-.344.368-.23.652-.555.85-.977.198-.422.296-.913.296-1.472v-.254c0-.558-.1-1.05-.302-1.475a2.254 2.254 0 00-.856-.98 2.353 2.353 0 00-1.263-.342c-.474 0-.896.114-1.264.342a2.254 2.254 0 00-.855.98c-.202.426-.303.919-.303 1.479v.28c.002.548.105 1.032.308 1.452.204.42.49.744.86.97.37.227.79.34 1.261.34zm0-.961c-.4 0-.708-.16-.921-.48-.214-.321-.32-.772-.32-1.352v-.278c.002-.59.11-1.04.324-1.345.213-.306.516-.46.91-.46.396 0 .7.156.914.466.213.31.32.762.32 1.359v.277c-.003.591-.11 1.041-.32 1.35-.211.308-.513.463-.906.463zm4.038.883V13.59l2.281 3.743h1.172v-5.688H18.18v3.75l-2.285-3.75h-1.172v5.688h1.172z",fill:"#324558"}),i=function(e){return o.a.createElement("svg",n()({viewBox:"0 0 24 24",fill:"none",width:"1em",height:"1em"},e),u,c,s)};t.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01LjI5MDY1IDE4LjUxNzRINy45MzU5OVYxOS44NDAxQzcuOTM1OTkgMjAuNTcwNiA4LjUyODE3IDIxLjE2MjcgOS4yNTg2NiAyMS4xNjI3SDE5Ljg0QzIwLjU3MDUgMjEuMTYyNyAyMS4xNjI3IDIwLjU3MDYgMjEuMTYyNyAxOS44NDAxVjcuOTM2MDNIMTcuMTk0N0MxNi40NjQyIDcuOTM2MDMgMTUuODcyIDcuMzQzODUgMTUuODcyIDYuNjEzMzVWMi42NDUzNEg5LjI1ODY2QzguNTI4MTcgMi42NDUzNCA3LjkzNTk5IDMuMjM3NTIgNy45MzU5OSAzLjk2ODAxVjEwLjU4MTRINS4yOTA2NVYyLjY0NTM0QzUuMjkwNjUgMS4xODQzNiA2LjQ3NTAxIDAgNy45MzU5OSAwSDE4LjE5NjRMMjMuODA4IDUuNjExNjJWMjEuMTYyN0MyMy44MDggMjIuNjIzNyAyMi42MjM3IDIzLjgwODEgMjEuMTYyNyAyMy44MDgxSDcuOTM1OTlDNi40NzUwMSAyMy44MDgxIDUuMjkwNjUgMjIuNjIzNyA1LjI5MDY1IDIxLjE2MjdWMTguNTE3NFoiIGZpbGw9IiMzMjQ1NTgiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xIDEwLjU4MTVDMC40NDc3MTUgMTAuNTgxNSAwIDExLjAyOTMgMCAxMS41ODE1VjE3LjUxNzZDMCAxOC4wNjk5IDAuNDQ3NzE1IDE4LjUxNzYgMSAxOC41MTc2SDE5QzE5LjU1MjMgMTguNTE3NiAyMCAxOC4wNjk4IDIwIDE3LjUxNzZWMTEuNTgxNUMyMCAxMS4wMjkzIDE5LjU1MjMgMTAuNTgxNSAxOSAxMC41ODE1SDFaTTguNjQ4MDUgMTYuOTkxN0M4LjI3NTY2IDE3LjI3MTcgNy43NzQzNiAxNy40MTE2IDcuMTQ0MTUgMTcuNDExNkM2LjcwNjY1IDE3LjQxMTYgNi4zMDgyMSAxNy4zMzE1IDUuOTQ4ODMgMTcuMTcxNEM1LjU4OTQ2IDE3LjAxMTIgNS4zMTUzNyAxNi43OTE4IDUuMTI2NTcgMTYuNTEzMkM0LjkzNzc3IDE2LjIzNDUgNC44NDMzNyAxNS45MTE2IDQuODQzMzcgMTUuNTQ0NEg2LjAxOTE1QzYuMDE5MTUgMTYuMTcyIDYuMzk0MTUgMTYuNDg1OCA3LjE0NDE1IDE2LjQ4NThDNy40MjI3OSAxNi40ODU4IDcuNjQwMjQgMTYuNDI5MiA3Ljc5NjQ5IDE2LjMxNTlDNy45NTI3NCAxNi4yMDI2IDguMDMwODcgMTYuMDQ0NCA4LjAzMDg3IDE1Ljg0MTNDOC4wMzA4NyAxNS42MiA3Ljk1Mjc0IDE1LjQ1IDcuNzk2NDkgMTUuMzMxNUM3LjY0MDI0IDE1LjIxMzEgNy4zNTg5OSAxNS4wODgxIDYuOTUyNzQgMTQuOTU2NUM2LjU0NjQ5IDE0LjgyNSA2LjIyNDg4IDE0LjY5NTUgNS45ODc5IDE0LjU2NzlDNS4zNDIwNiAxNC4yMTg5IDUuMDE5MTUgMTMuNzQ4OSA1LjAxOTE1IDEzLjE1NzdDNS4wMTkxNSAxMi44NTA0IDUuMTA1NzQgMTIuNTc2MyA1LjI3ODkxIDEyLjMzNTVDNS40NTIwOSAxMi4wOTQ2IDUuNzAwNzkgMTEuOTA2NCA2LjAyNTAxIDExLjc3MUM2LjM0OTIzIDExLjYzNTYgNi43MTMxNiAxMS41Njc5IDcuMTE2OCAxMS41Njc5QzcuNTIzMDUgMTEuNTY3OSA3Ljg4NTAzIDExLjY0MTQgOC4yMDI3NCAxMS43ODg2QzguNTIwNDUgMTEuOTM1NyA4Ljc2NzE5IDEyLjE0MzQgOC45NDI5NyAxMi40MTE2QzkuMTE4NzYgMTIuNjc5OSA5LjIwNjY1IDEyLjk4NDUgOS4yMDY2NSAxMy4zMjU3SDguMDM0NzdDOC4wMzQ3NyAxMy4wNjUzIDcuOTUyNzQgMTIuODYyOCA3Ljc4ODY4IDEyLjcxODNDNy42MjQ2MiAxMi41NzM3IDcuMzk0MTUgMTIuNTAxNSA3LjA5NzI3IDEyLjUwMTVDNi44MTA4MSAxMi41MDE1IDYuNTg4MTYgMTIuNTYyIDYuNDI5MyAxMi42ODMxQzYuMjcwNDUgMTIuODA0MiA2LjE5MTAyIDEyLjk2MzcgNi4xOTEwMiAxMy4xNjE2QzYuMTkxMDIgMTMuMzQ2NSA2LjI4NDEyIDEzLjUwMTUgNi40NzAzMiAxMy42MjY1QzYuNjU2NTIgMTMuNzUxNSA2LjkzMDYxIDEzLjg2ODcgNy4yOTI1OCAxMy45NzhDNy45NTkyNSAxNC4xNzg2IDguNDQ0OTMgMTQuNDI3MyA4Ljc0OTYyIDE0LjcyNDFDOS4wNTQzIDE1LjAyMSA5LjIwNjY1IDE1LjM5MDggOS4yMDY2NSAxNS44MzM1QzkuMjA2NjUgMTYuMzI1NyA5LjAyMDQ1IDE2LjcxMTggOC42NDgwNSAxNi45OTE3Wk0zLjU1OTc3IDE3LjE4NTFDMy4yNjgxMSAxNy4zMzYxIDIuOTM4NjggMTcuNDExNiAyLjU3MTQ5IDE3LjQxMTZDMS45Njk5MyAxNy40MTE2IDEuNTAxMTggMTcuMjU4NiAxLjE2NTI0IDE2Ljk1MjZDMC44MjkzMDQgMTYuNjQ2NyAwLjY2MTMzNSAxNi4yMTM3IDAuNjYxMzM1IDE1LjY1MzhIMS44NDEwMkMxLjg0MTAyIDE1LjkzMjUgMS44OTk2MiAxNi4xMzgyIDIuMDE2OCAxNi4yNzFDMi4xMzM5OSAxNi40MDM4IDIuMzE4ODkgMTYuNDcwMiAyLjU3MTQ5IDE2LjQ3MDJDMi43OTU0NSAxNi40NzAyIDIuOTczODQgMTYuMzkzNCAzLjEwNjY1IDE2LjIzOThDMy4yMzk0NiAxNi4wODYxIDMuMzA1ODcgMTUuODY3NCAzLjMwNTg3IDE1LjU4MzVWMTEuNjQ2SDQuNDc3NzRWMTUuNTgzNUM0LjQ3Nzc0IDE1Ljk0NTUgNC4zOTc2NiAxNi4yNjUxIDQuMjM3NTEgMTYuNTQyNUM0LjA3NzM1IDE2LjgxOTggMy44NTE0NCAxNy4wMzQgMy41NTk3NyAxNy4xODUxWk0xMS44NTc0IDE3LjQxMTZDMTIuMzM0IDE3LjQxMTYgMTIuNzU2NSAxNy4yOTcgMTMuMTI1IDE3LjA2NzlDMTMuNDkzNSAxNi44Mzg3IDEzLjc3NjcgMTYuNTEzMiAxMy45NzQ2IDE2LjA5MTNDMTQuMTcyNSAxNS42Njk0IDE0LjI3MTUgMTUuMTc4NiAxNC4yNzE1IDE0LjYxODdWMTQuMzY0OEMxNC4yNzE1IDEzLjgwNzUgMTQuMTcwNiAxMy4zMTU5IDEzLjk2ODggMTIuODkwMUMxMy43NjY5IDEyLjQ2NDQgMTMuNDgxOCAxMi4xMzc1IDEzLjExMzMgMTEuOTA5N0MxMi43NDQ4IDExLjY4MTggMTIuMzIzNiAxMS41Njc5IDExLjg0OTYgMTEuNTY3OUMxMS4zNzU3IDExLjU2NzkgMTAuOTU0NCAxMS42ODE4IDEwLjU4NTkgMTEuOTA5N0MxMC4yMTc1IDEyLjEzNzUgOS45MzIzIDEyLjQ2NDQgOS43MzA0OCAxMi44OTAxQzkuNTI4NjUgMTMuMzE1OSA5LjQyNzc0IDEzLjgwODggOS40Mjc3NCAxNC4zNjg3VjE0LjY0OTlDOS40MzAzNSAxNS4xOTY4IDkuNTMzMjEgMTUuNjgwNSA5LjczNjM0IDE2LjEwMTFDOS45Mzk0NiAxNi41MjE3IDEwLjIyNTkgMTYuODQ1MiAxMC41OTU3IDE3LjA3MThDMTAuOTY1NSAxNy4yOTgzIDExLjM4NjEgMTcuNDExNiAxMS44NTc0IDE3LjQxMTZaTTEwLjkzNTYgMTUuOTcwMkMxMS4xNDkxIDE2LjI5MDUgMTEuNDU2NCAxNi40NTA3IDExLjg1NzQgMTYuNDUwN0MxMi4yNTA3IDE2LjQ1MDcgMTIuNTUyNyAxNi4yOTY0IDEyLjc2MzcgMTUuOTg3OEMxMi45NzQ2IDE1LjY3OTIgMTMuMDgxNCAxNS4yMjkzIDEzLjA4NCAxNC42MzgyVjE0LjM2MDhDMTMuMDg0IDEzLjc2NDUgMTIuOTc3MiAxMy4zMTE0IDEyLjc2MzcgMTMuMDAxNUMxMi41NTAxIDEyLjY5MTYgMTIuMjQ1NCAxMi41MzY2IDExLjg0OTYgMTIuNTM2NkMxMS40NTY0IDEyLjUzNjYgMTEuMTUzIDEyLjY4OTYgMTAuOTM5NSAxMi45OTU2QzEwLjcyNTkgMTMuMzAxNiAxMC42MTc4IDEzLjc1MDIgMTAuNjE1MiAxNC4zNDEzVjE0LjYxODdDMTAuNjE1MiAxNS4xOTk0IDEwLjcyMiAxNS42NDk5IDEwLjkzNTYgMTUuOTcwMlpNMTUuODk0OSAxNy4zMzM1VjEzLjU5MTNMMTguMTc2MiAxNy4zMzM1SDE5LjM0ODFWMTEuNjQ2SDE4LjE4MDFWMTUuMzk2TDE1Ljg5NDkgMTEuNjQ2SDE0LjcyMzFWMTcuMzMzNUgxNS44OTQ5WiIgZmlsbD0iI0I2QzJDRCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIuNTcxNTMgMTcuNDExNkMyLjkzODcyIDE3LjQxMTYgMy4yNjgxNSAxNy4zMzYxIDMuNTU5ODEgMTcuMTg1MUMzLjg1MTQ4IDE3LjAzNCA0LjA3NzM5IDE2LjgxOTggNC4yMzc1NSAxNi41NDI1QzQuMzk3NyAxNi4yNjUxIDQuNDc3NzggMTUuOTQ1NSA0LjQ3Nzc4IDE1LjU4MzVWMTEuNjQ2SDMuMzA1OTFWMTUuNTgzNUMzLjMwNTkxIDE1Ljg2NzQgMy4yMzk1IDE2LjA4NjEgMy4xMDY2OSAxNi4yMzk3QzIuOTczODggMTYuMzkzNCAyLjc5NTQ5IDE2LjQ3MDIgMi41NzE1MyAxNi40NzAyQzIuMzE4OTMgMTYuNDcwMiAyLjEzNDAzIDE2LjQwMzggMi4wMTY4NSAxNi4yNzFDMS44OTk2NiAxNi4xMzgyIDEuODQxMDYgMTUuOTMyNSAxLjg0MTA2IDE1LjY1MzhIMC42NjEzNzdDMC42NjEzNzcgMTYuMjEzNyAwLjgyOTM0NiAxNi42NDY2IDEuMTY1MjggMTYuOTUyNkMxLjUwMTIyIDE3LjI1ODYgMS45Njk5NyAxNy40MTE2IDIuNTcxNTMgMTcuNDExNlpNNy4xNDQxOSAxNy40MTE2QzcuNzc0NCAxNy40MTE2IDguMjc1NyAxNy4yNzE2IDguNjQ4MDkgMTYuOTkxN0M5LjAyMDQ5IDE2LjcxMTggOS4yMDY2OSAxNi4zMjU3IDkuMjA2NjkgMTUuODMzNUM5LjIwNjY5IDE1LjM5MDggOS4wNTQzNCAxNS4wMjEgOC43NDk2NiAxNC43MjQxQzguNDQ0OTcgMTQuNDI3MiA3Ljk1OTI5IDE0LjE3ODUgNy4yOTI2MyAxMy45NzhDNi45MzA2NSAxMy44Njg3IDYuNjU2NTYgMTMuNzUxNSA2LjQ3MDM2IDEzLjYyNjVDNi4yODQxNiAxMy41MDE1IDYuMTkxMDYgMTMuMzQ2NSA2LjE5MTA2IDEzLjE2MTZDNi4xOTEwNiAxMi45NjM3IDYuMjcwNDkgMTIuODA0MiA2LjQyOTM1IDEyLjY4MzFDNi41ODgyIDEyLjU2MiA2LjgxMDg2IDEyLjUwMTUgNy4wOTczMSAxMi41MDE1QzcuMzk0MTkgMTIuNTAxNSA3LjYyNDY2IDEyLjU3MzcgNy43ODg3MiAxMi43MTgzQzcuOTUyNzggMTIuODYyOCA4LjAzNDgxIDEzLjA2NTMgOC4wMzQ4MSAxMy4zMjU3SDkuMjA2NjlDOS4yMDY2OSAxMi45ODQ1IDkuMTE4OCAxMi42Nzk5IDguOTQzMDIgMTIuNDExNkM4Ljc2NzI0IDEyLjE0MzQgOC41MjA0OSAxMS45MzU3IDguMjAyNzggMTEuNzg4NkM3Ljg4NTA3IDExLjY0MTQgNy41MjMxIDExLjU2NzkgNy4xMTY4NSAxMS41Njc5QzYuNzEzMiAxMS41Njc5IDYuMzQ5MjcgMTEuNjM1NiA2LjAyNTA1IDExLjc3MUM1LjcwMDgzIDExLjkwNjQgNS40NTIxMyAxMi4wOTQ2IDUuMjc4OTUgMTIuMzM1NEM1LjEwNTc4IDEyLjU3NjMgNS4wMTkxOSAxMi44NTA0IDUuMDE5MTkgMTMuMTU3N0M1LjAxOTE5IDEzLjc0ODkgNS4zNDIxMSAxNC4yMTg5IDUuOTg3OTQgMTQuNTY3OUM2LjIyNDkyIDE0LjY5NTUgNi41NDY1MyAxNC44MjUgNi45NTI3OCAxNC45NTY1QzcuMzU5MDMgMTUuMDg4MSA3LjY0MDI4IDE1LjIxMzEgNy43OTY1MyAxNS4zMzE1QzcuOTUyNzggMTUuNDUgOC4wMzA5MSAxNS42MiA4LjAzMDkxIDE1Ljg0MTNDOC4wMzA5MSAxNi4wNDQ0IDcuOTUyNzggMTYuMjAyNiA3Ljc5NjUzIDE2LjMxNTlDNy42NDAyOCAxNi40MjkyIDcuNDIyODMgMTYuNDg1OCA3LjE0NDE5IDE2LjQ4NThDNi4zOTQxOSAxNi40ODU4IDYuMDE5MTkgMTYuMTcyIDYuMDE5MTkgMTUuNTQ0NEg0Ljg0MzQxQzQuODQzNDEgMTUuOTExNiA0LjkzNzgxIDE2LjIzNDUgNS4xMjY2MSAxNi41MTMyQzUuMzE1NDEgMTYuNzkxOCA1LjU4OTUgMTcuMDExMiA1Ljk0ODg4IDE3LjE3MTRDNi4zMDgyNSAxNy4zMzE1IDYuNzA2NjkgMTcuNDExNiA3LjE0NDE5IDE3LjQxMTZaTTExLjg1NzUgMTcuNDExNkMxMi4zMzQgMTcuNDExNiAxMi43NTY2IDE3LjI5NyAxMy4xMjUgMTcuMDY3OUMxMy40OTM1IDE2LjgzODcgMTMuNzc2NyAxNi41MTMyIDEzLjk3NDcgMTYuMDkxM0MxNC4xNzI2IDE1LjY2OTQgMTQuMjcxNSAxNS4xNzg1IDE0LjI3MTUgMTQuNjE4N1YxNC4zNjQ3QzE0LjI3MTUgMTMuODA3NSAxNC4xNzA2IDEzLjMxNTkgMTMuOTY4OCAxMi44OTAxQzEzLjc2NyAxMi40NjQ0IDEzLjQ4MTggMTIuMTM3NSAxMy4xMTMzIDExLjkwOTdDMTIuNzQ0OCAxMS42ODE4IDEyLjMyMzYgMTEuNTY3OSAxMS44NDk3IDExLjU2NzlDMTEuMzc1NyAxMS41Njc5IDEwLjk1NDUgMTEuNjgxOCAxMC41ODYgMTEuOTA5N0MxMC4yMTc1IDEyLjEzNzUgOS45MzIzNCAxMi40NjQ0IDkuNzMwNTIgMTIuODkwMUM5LjUyODY5IDEzLjMxNTkgOS40Mjc3OCAxMy44MDg4IDkuNDI3NzggMTQuMzY4N1YxNC42NDk5QzkuNDMwMzkgMTUuMTk2OCA5LjUzMzI1IDE1LjY4MDUgOS43MzYzOCAxNi4xMDExQzkuOTM5NSAxNi41MjE2IDEwLjIyNiAxNi44NDUyIDEwLjU5NTggMTcuMDcxOEMxMC45NjU1IDE3LjI5ODMgMTEuMzg2MSAxNy40MTE2IDExLjg1NzUgMTcuNDExNlpNMTEuODU3NSAxNi40NTA3QzExLjQ1NjQgMTYuNDUwNyAxMS4xNDkxIDE2LjI5MDUgMTAuOTM1NiAxNS45NzAyQzEwLjcyMjEgMTUuNjQ5OSAxMC42MTUzIDE1LjE5OTQgMTAuNjE1MyAxNC42MTg3VjE0LjM0MTNDMTAuNjE3OSAxMy43NTAyIDEwLjcyNiAxMy4zMDE2IDEwLjkzOTUgMTIuOTk1NkMxMS4xNTMgMTIuNjg5NiAxMS40NTY0IDEyLjUzNjYgMTEuODQ5NyAxMi41MzY2QzEyLjI0NTUgMTIuNTM2NiAxMi41NTAyIDEyLjY5MTYgMTIuNzYzNyAxMy4wMDE1QzEyLjk3NzMgMTMuMzExNCAxMy4wODQgMTMuNzY0NSAxMy4wODQgMTQuMzYwOFYxNC42MzgyQzEzLjA4MTQgMTUuMjI5MyAxMi45NzQ3IDE1LjY3OTIgMTIuNzYzNyAxNS45ODc4QzEyLjU1MjggMTYuMjk2NCAxMi4yNTA3IDE2LjQ1MDcgMTEuODU3NSAxNi40NTA3Wk0xNS44OTUgMTcuMzMzNVYxMy41OTEzTDE4LjE3NjIgMTcuMzMzNUgxOS4zNDgxVjExLjY0NkgxOC4xODAxVjE1LjM5NkwxNS44OTUgMTEuNjQ2SDE0LjcyMzFWMTcuMzMzNUgxNS44OTVaIiBmaWxsPSIjMzI0NTU4Ii8+Cjwvc3ZnPgo="},function(e,t,a){e.exports={container:"v7G9tmJJiZiPTjYulk-uk",selectContainer:"_2JbUzk0qVPxow2dv37yVtn",icon:"_3dvVq4Wja1r855of5vz4Vz",title:"_2iY4A3tvAD8fqWCX7YbXzW",desc:"_2Qz6RDrQb0PqcjJChLpZ51",uploadContainer:"_2FoLzMRXXZB1NAvaVl4r1y",uploadingContent:"M6eVRzcbprHTXlq43-qL",fileInfo:"_93kbv_HMX_E4Nb61U_YCJ",fileName:"_3Z0oHIHL6-rqZ80URIlaWt",uploadText:"_2ToMbKmVtBJZXrzMUJsa0A",progress:"_2kNei8kEcBntfnpeptiCS",uploadIcon:"_1QevqqsDTqOPEx8RnmcIon",none:"_3Th3hjQg4wakFUvbxe0l0F"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=[{title:"BASIC_INFORMATION",icon:"dashboard",component:r(a(2013)).default,required:!0}];t.default=n},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(136)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(70),m=n(r(16)),h=n(r(73)),v=n(r(32)),E=n(r(185)),y=r(25),b=n(r(1292)),g=r(58),_=n(r(2015)),S=n(r(2016));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var C=(0,p.observer)(l=function(e){(0,s.default)(r,e);var a=O(r);function r(e){var n;if((0,u.default)(this,r),(n=a.call(this,e)).templateSettingsOpts=Object.entries(n.templateSettings).map((function(e){var a=(0,o.default)(e,2),r=a[0],n=a[1];return{value:r,image:n.logo,label:"Custom"===n.name?t("CUSTOM"):n.name,description:n.description}})),n.nameValidator=function(e,a,r){if(!a)return r();n.props.store.checkName({name:a,namespace:n.props.namespace,cluster:n.props.cluster}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.handleTemplateChange=function(e){(0,h.default)(n.formTemplate,"spec",(0,m.default)(n.templateSettings,"".concat(e,".settings"),{})),n.forceUpdate()},(0,v.default)(n.formTemplate.spec)){var l=Object.keys(n.templateSettings)[0],c=(0,E.default)(n.templateSettings[l].settings);(0,h.default)(n.formTemplate,"spec",c)}return n}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return d.default.createElement(y.Form,{data:this.formTemplate,ref:e},d.default.createElement(y.Columns,null,d.default.createElement(y.Column,null,d.default.createElement(y.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:g.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},d.default.createElement(y.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),d.default.createElement(y.Column,null,d.default.createElement(y.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},d.default.createElement(y.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))),d.default.createElement(y.Form.Item,{label:d.default.createElement("div",{className:S.default.templateLabel},d.default.createElement("h3",null,t("TEMPLATE")),d.default.createElement("p",null,t("CUSTOM_MONITORING_TEMPLATE_DESC")))},d.default.createElement(b.default,{name:"spec.title",className:S.default.templateList,options:this.templateSettingsOpts,onChange:this.handleTemplateChange})))}},{key:"templateSettings",get:function(){return(0,E.default)(_.default)}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,m.default)(t,g.MODULE_KIND_MAP[a],t)}}]),r}(d.default.Component))||l;a.default=C},function(e,t,a){e.exports={container:"_9NWeMBAss3j4dAfPXgl7q",selected:"_23vK4ncmS9GHYl5k5YaN4J"}},function(e){e.exports=JSON.parse('{"Elasticsearch Overview":{"settings":{"datasource":"prometheus","panels":[{"decimals":0,"format":"none","id":11,"targets":[{"expr":"sum by(cluster) (elasticsearch_cluster_health_status{color=\\"red\\"})"}],"title":"Red Clusters","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":12,"targets":[{"expr":"sum by(cluster) (elasticsearch_cluster_health_status{color=\\"yellow\\"})"}],"title":"Yellow Clusters","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":14,"targets":[{"expr":"elasticsearch_cluster_health_number_of_nodes"}],"title":"Number of Nodes","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":16,"targets":[{"expr":"elasticsearch_cluster_health_number_of_data_nodes"}],"title":"Number of Data Nodes","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":17,"targets":[{"expr":"elasticsearch_cluster_health_number_of_pending_tasks"}],"title":"Pending Tasks","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":21,"targets":[{"expr":"sum (elasticsearch_process_open_files_count)"}],"title":"Open File Descriptors","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":22,"targets":[{"expr":"elasticsearch_cluster_health_active_primary_shards"}],"title":"Active primary shards","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":25,"targets":[{"expr":"elasticsearch_cluster_health_active_shards"}],"title":"Active shards","type":"singlestat","valueName":"last"},{"id":37,"title":"JVM","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":15,"lines":true,"stack":false,"targets":[{"expr":"sum by(name) (elasticsearch_jvm_memory_used_bytes) / sum by(name) (elasticsearch_jvm_memory_max_bytes)","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"JVM Memory Used","type":"graph","yaxes":[{"decimals":2,"format":"percent (0.0-1.0)"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":30,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_jvm_memory_committed_bytes","legendFormat":"{{name}} committed: {{area}}","refId":1,"step":"1m"},{"expr":"elasticsearch_jvm_memory_max_bytes","legendFormat":"{{name}} max: {{area}}","refId":2,"step":"1m"}],"title":"JVM Memory Committed","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":27,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_jvm_gc_collection_seconds_count[3m])","legendFormat":"{{name}} {{gc}}","refId":1,"step":"1m"}],"title":"GC Count","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":28,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_jvm_gc_collection_seconds_sum[3m])","legendFormat":"{{name}} {{gc}}","refId":1,"step":"1m"}],"title":"GC Time","type":"graph","yaxes":[{"decimals":3,"format":"none"}]},{"id":38,"title":"Resource Consumption","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":29,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_os_load1","legendFormat":"load1: {{name}}","refId":1,"step":"1m"},{"expr":"elasticsearch_os_load5","legendFormat":"load5: {{name}}","refId":2,"step":"1m"},{"expr":"elasticsearch_os_load15","legendFormat":"load15: {{name}}","refId":3,"step":"1m"}],"title":"Load Average","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":32,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_filesystem_data_available_bytes","legendFormat":"{{name}}: {{path}}","refId":1,"step":"1m"}],"title":"Disk Usage","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":33,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_transport_tx_size_bytes_total[3m])","legendFormat":"{{name}}: sent","refId":1,"step":"1m"},{"expr":"irate(elasticsearch_transport_rx_size_bytes_total[3m])","legendFormat":"{{name}}: received","refId":2,"step":"1m"}],"title":"Network Usage","type":"graph","yaxes":[{"decimals":2,"format":"Byte"}]},{"id":39,"title":"Documents and Indices","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":34,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_indices_docs","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Documents Count on Node","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":26,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_cluster_health_initializing_shards","legendFormat":"Initializing Shards","refId":1,"step":"1m"},{"expr":"elasticsearch_cluster_health_relocating_shards","legendFormat":"Relocating Shards","refId":2,"step":"1m"},{"expr":"elasticsearch_cluster_health_active_shards","legendFormat":"Active Shards","refId":3,"step":"1m"},{"expr":"elasticsearch_cluster_health_active_primary_shards","legendFormat":"Active Primary Shards","refId":4,"step":"1m"},{"expr":"elasticsearch_cluster_health_unassigned_shards","legendFormat":"Unassigned Shards","refId":5,"step":"1m"},{"expr":"elasticsearch_cluster_health_delayed_unassigned_shards","legendFormat":"Delayed Unassigned Shards","refId":6,"step":"1m"}],"title":"Shards","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":35,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_indices_search_query_time_seconds[3m]) ","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Query Time","type":"graph","yaxes":[{"decimals":3,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":42,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_indices_query_cache_memory_size_bytes","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Query Cache Size","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":36,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_indices_indexing_index_time_seconds_total[5m])","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Indexing Time","type":"graph","yaxes":[{"decimals":3,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":43,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_indices_segments_count","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Count of Index Segments","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":44,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_indices_segments_memory_bytes","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Current Memory of Segments","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"Total size of stored index data in bytes with all shards on all nodes","id":45,"lines":true,"stack":false,"targets":[{"expr":"sum by(index) (elasticsearch_indices_store_size_bytes_total)","legendFormat":"{{index}}","refId":1,"step":"1m"}],"title":"Total Size Stored Index Data","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]}],"title":"Elasticsearch Overview"},"name":"Elasticsearch","logo":"/assets/elasticsearch-das.svg"},"MySQL Overview":{"settings":{"datasource":"prometheus","panels":[{"decimals":2,"format":"none","id":2,"targets":[{"expr":"mysql_global_status_uptime / (3600*24)"}],"title":"MySQL Uptime (days)","type":"singlestat","valueName":"last"},{"decimals":2,"format":"none","id":3,"targets":[{"expr":"rate(mysql_global_status_queries[5m]) or irate(mysql_global_status_queries[5m])"}],"title":"Current QPS","type":"singlestat","valueName":"last"},{"decimals":0,"format":"Byte","id":6,"targets":[{"expr":"mysql_global_variables_innodb_buffer_pool_size"}],"title":"InnoDB Buffer Pool Size","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":9,"targets":[{"expr":"mysql_global_variables_max_connections"}],"title":"Max Permitted Connections","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":12,"targets":[{"expr":"mysql_global_variables_thread_cache_size"}],"title":"Thread Cache Size","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":21,"targets":[{"expr":"mysql_global_variables_long_query_time"}],"title":"Long Query Time (second)","type":"singlestat","valueName":"last"},{"id":4,"title":"Connections and Threads","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"The maximum number of connections that have been in use simultaneously since the server started.","id":8,"lines":true,"stack":false,"targets":[{"expr":"mysql_global_status_max_used_connections","legendFormat":"Max Used Connections","refId":1,"step":"1m"}],"title":"Connections","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"Threads Cached: The number of threads in the thread cache. Threads Connected: The number of currently open connections. Threads Created: The number of threads created to handle connections. Threads Running: The number of threads that are not sleeping.","id":5,"lines":true,"stack":false,"targets":[{"expr":"mysql_global_status_threads_connected","legendFormat":"Threads Connected","refId":1,"step":"1m"},{"expr":"mysql_global_status_threads_created","legendFormat":"Threads Created","refId":2,"step":"1m"},{"expr":"mysql_global_status_threads_running","legendFormat":"Threads Running","refId":3,"step":"1m"},{"expr":"mysql_global_status_threads_cached","legendFormat":"Threads Cached","refId":4,"step":"1m"}],"title":"Threads","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"Aborted_clients: The number of connections that were aborted because the client died without closing the connection properly. Aborted_connects: The number of failed attempts to connect to the MySQL server.","id":22,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_aborted_connects[5m]) or irate(mysql_global_status_aborted_connects[5m])","legendFormat":"Aborted Connects (attempts)","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_aborted_clients[5m]) or irate(mysql_global_status_aborted_clients[5m])","legendFormat":"Aborted Clients (timeout)","refId":2,"step":"1m"}],"title":"Aborted Connections","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"id":10,"title":"Queries and Questions","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"The number of statements executed by the server. This includes only statements sent to the server by clients and not statements executed within stored programs, unlike the Queries variable.","id":13,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_questions[5m]) or irate(mysql_global_status_questions[5m])","legendFormat":"Questions","refId":1,"step":"1m"}],"title":"Questions","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":18,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_select_full_join[5m]) or irate(mysql_global_status_select_full_join[5m])","legendFormat":"Full Join","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_select_full_range_join[5m]) or irate(mysql_global_status_select_full_range_join[5m])","legendFormat":"Full Range Join","refId":2,"step":"1m"},{"expr":"rate(mysql_global_status_select_scan[5m]) or irate(mysql_global_status_select_scan[5m])","legendFormat":"Scan","refId":3,"step":"1m"},{"expr":"rate(mysql_global_status_select_range[5m]) or irate(mysql_global_status_select_range[5m])","legendFormat":"Range","refId":4,"step":"1m"},{"expr":"rate(mysql_global_status_select_range_check[5m]) or irate(mysql_global_status_select_range_check[5m])","legendFormat":"Range Check","refId":5,"step":"1m"}],"title":"Select By Types","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":19,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_sort_rows[5m]) or irate(mysql_global_status_sort_rows[5m])","legendFormat":"Rows","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_sort_range[5m]) or irate(mysql_global_status_sort_range[5m])","legendFormat":"Range","refId":2,"step":"1m"},{"expr":"rate(mysql_global_status_sort_merge_passes[5m]) or irate(mysql_global_status_sort_merge_passes[5m])","legendFormat":"Merge Passes","refId":3,"step":"1m"},{"expr":"rate(mysql_global_status_sort_scan[5m]) or irate(mysql_global_status_sort_scan[5m])","legendFormat":"Scan","refId":4,"step":"1m"}],"title":"Sort By Types","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"The number of queries that have taken more than long_query_time seconds. This counter increments regardless of whether the slow query log is enabled.","id":20,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_slow_queries[5m]) or irate(mysql_global_status_slow_queries[5m])","legendFormat":"Slow Queries","refId":1,"step":"1m"}],"title":"Slow Queries","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"id":15,"title":"Temporary Objects","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":16,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_created_tmp_tables[5m]) or irate(mysql_global_status_created_tmp_tables[5m])","legendFormat":"Created Tmp Tables","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_created_tmp_disk_tables[5m]) or irate(mysql_global_status_created_tmp_disk_tables[5m])","legendFormat":"Created Tmp Disk Tables","refId":2,"step":"1m"},{"expr":"rate(mysql_global_status_created_tmp_files[5m]) or irate(mysql_global_status_created_tmp_files[5m])","legendFormat":"Created Tmp Files","refId":3,"step":"1m"}],"title":"Tmp Tables and Files","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"id":23,"title":"Table Locks","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"The number of times that a request for a table lock could be granted immediately, or could not be granted immediately and a wait was needed. ","id":24,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_table_locks_immediate[5m]) or irate(mysql_global_status_table_locks_immediate[5m])","legendFormat":"Table Locks Immediate","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_table_locks_waited[5m]) or irate(mysql_global_status_table_locks_waited[5m])","legendFormat":"Table Locks Waited","refId":2,"step":"1m"}],"title":"Locks By Types","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"id":25,"title":"Network Traffic","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":26,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_bytes_received[5m]) or irate(mysql_global_status_bytes_received[5m])","legendFormat":"Inbound","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_bytes_sent[5m]) or irate(mysql_global_status_bytes_sent[5m])","legendFormat":"Outbound","refId":2,"step":"1m"}],"title":"Inbound vs Outbound","type":"graph","yaxes":[{"decimals":0,"format":"Byte/s"}]}],"title":"MySQL Overview"},"name":"MySQL","logo":"/assets/mysql.svg"},"Redis Overview":{"settings":{"datasource":"prometheus","panels":[{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":6,"lines":true,"stack":false,"targets":[{"expr":"irate(redis_keyspace_hits_total[5m])","legendFormat":"Hits","refId":1,"step":"1m"},{"expr":"irate(redis_keyspace_misses_total[5m])","legendFormat":"Misses","refId":2,"step":"1m"}],"title":"Hits / Misses per Sec","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":7,"lines":true,"stack":false,"targets":[{"expr":"rate(redis_net_input_bytes_total[5m])","legendFormat":"Input","refId":1,"step":"1m"},{"expr":"rate(redis_net_output_bytes_total[5m])","legendFormat":"Output","refId":2,"step":"1m"}],"title":"Network I/O","type":"graph","yaxes":[{"decimals":2,"format":"Byte/s"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":8,"lines":true,"stack":false,"targets":[{"expr":"sum (redis_db_keys) by (db)","legendFormat":"{{db}}","refId":1,"step":"1m"}],"title":"Total Items per DB","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":9,"lines":true,"stack":false,"targets":[{"expr":"sum (redis_db_keys) - sum (redis_db_keys_expiring) ","legendFormat":"Not Expiring","refId":1,"step":"1m"},{"expr":"sum (redis_db_keys_expiring) ","legendFormat":"Expiring","refId":2,"step":"1m"}],"title":"Expiring vs Not-Expiring Keys","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":10,"lines":true,"stack":false,"targets":[{"expr":"sum(rate(redis_expired_keys_total[5m])) by (instance)","legendFormat":"Expired","refId":1,"step":"1m"},{"expr":"sum(rate(redis_evicted_keys_total[5m])) by (instance)","legendFormat":"Evicted","refId":2,"step":"1m"}],"title":"Expired / Evicted","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":11,"lines":true,"stack":false,"targets":[{"expr":"topk(5, irate(redis_commands_total[3m]))","legendFormat":"{{cmd}}","refId":1,"step":"1m"}],"title":"Command Calls / sec","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":12,"lines":true,"stack":false,"targets":[{"expr":"redis_connected_clients","legendFormat":"total","refId":1,"step":"1m"}],"title":"Redis connected clients","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"decimals":2,"format":"none","id":1,"targets":[{"expr":"redis_uptime_in_seconds / (3600 * 24)"}],"title":"Uptime (days)","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":3,"targets":[{"expr":"redis_connected_clients"}],"title":"Clients","type":"singlestat","valueName":"last"},{"decimals":2,"format":"percent (0-100)","id":4,"targets":[{"expr":"redis_memory_used_bytes  / redis_memory_max_bytes"}],"title":"Memory Usage","type":"singlestat","valueName":"last"},{"decimals":2,"format":"none","id":5,"targets":[{"expr":"rate(redis_commands_processed_total[2m])"}],"title":"Commands Executed / sec","type":"singlestat","valueName":"last"}],"title":"Redis Overview"},"name":"Redis","logo":"/assets/redis-das.svg"},"Jenkins Overview":{"settings":{"datasource":"prometheus","panels":[{"format":"none","id":56,"targets":[{"expr":"process_open_fds{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}"}],"title":"Open File Descriptors","type":"singlestat"},{"decimals":0,"format":"none","id":57,"targets":[{"expr":"jenkins_queue_blocked_value{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}"}],"title":"Queue Blocked","type":"singlestat"},{"decimals":0,"format":"none","id":58,"targets":[{"expr":"jenkins_executor_in_use_value{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}"}],"title":"Executors in Use","type":"singlestat"},{"decimals":0,"format":"none","id":59,"targets":[{"expr":"jenkins_queue_buildable_value{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}"}],"title":"Queue Buildable","type":"singlestat"},{"decimals":0,"format":"none","id":60,"targets":[{"expr":"jenkins_runs_total_total{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}\\n"}],"title":"Total Run","type":"singlestat"},{"id":35,"title":"JVM","type":"row"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":37,"lines":true,"targets":[{"expr":"sum by(namespace, container, instance) (jvm_memory_bytes_used) / sum by(namespace, container, instance) (jvm_memory_bytes_max)","legendFormat":"{{container}}-{{instance}}","refId":1,"step":"1m"}],"title":"JVM Memory Used","type":"graph","yaxes":[{"decimals":2,"format":"percent (0.0-1.0)"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":38,"lines":true,"targets":[{"expr":"jvm_memory_bytes_committed","legendFormat":"{{container}}-{{instance}} committed: {{area}}","refId":1,"step":"1m"},{"expr":"jvm_memory_bytes_max","legendFormat":"{{container}}-{{instance}} max: {{area}}","refId":2,"step":"1m"}],"title":"JVM Memory Committed","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":39,"lines":true,"targets":[{"expr":"irate(jvm_gc_collection_seconds_count[3m])","legendFormat":"{{container}}-{{instance}}: {{gc}}","refId":1,"step":"1m"}],"title":"GC Count","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":40,"lines":true,"targets":[{"expr":"irate(jvm_gc_collection_seconds_sum[3m])\\n","legendFormat":"{{container}}-{{instance}}: {{gc}}","refId":1,"step":"1m"}],"title":"GC Time","type":"graph","yaxes":[{"decimals":3,"format":"seconds"}]},{"id":42,"title":"Resource Consumption","type":"row"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":43,"lines":true,"targets":[{"expr":"vm_cpu_load_x100_history{quantile=\\"0.999\\"} / 100\\n","legendFormat":"load1: {{container}}-{{instance}}","refId":1,"step":"1m"},{"expr":"vm_cpu_load_x100_window_5m{quantile=\\"0.999\\"} / 100","legendFormat":"load5: {{container}}-{{instance}}","refId":2,"step":"1m"},{"expr":"vm_cpu_load_x100_window_15m{quantile=\\"0.999\\"} / 100","legendFormat":"load15: {{container}}-{{instance}}","refId":3,"step":"1m"}],"title":"Load Average","type":"graph","yaxes":[{"decimals":3,"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":44,"lines":true,"targets":[{"expr":"default_jenkins_disk_usage_bytes{container=\\"ks-jenkins\\", namespace=\\"kubesphere-devops-system\\", job=\\"ks-jenkins\\"}","legendFormat":"{{container}}-{{instance}}: {{directory}}","refId":1,"step":"1m"}],"title":"Disk Usage","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":55,"lines":true,"targets":[{"expr":"process_open_fds{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}","legendFormat":"open fds","refId":1,"step":"1m"},{"expr":"process_max_fds{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}","legendFormat":"max fds","refId":2,"step":"1m"}],"title":"File Descriptor","type":"graph","yaxes":[{"format":"none"}]},{"id":46,"title":"Job","type":"row"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":47,"lines":true,"targets":[{"expr":"jenkins_runs_total_total","legendFormat":"total jobs","refId":1,"step":"1m"},{"expr":"jenkins_runs_success_total\\n\\n","legendFormat":"successful jobs","refId":2,"step":"1m"},{"expr":"jenkins_runs_failure_total","legendFormat":"failure jobs","refId":3,"step":"1m"},{"expr":"jenkins_runs_aborted_total","legendFormat":"aborted jobs","refId":4,"step":"1m"}],"title":"Job Statistics","type":"graph","yaxes":[{"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":48,"lines":true,"targets":[{"expr":"jenkins_queue_stuck_history{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\", quantile=\\"0.999\\"}","legendFormat":"{{container}}-{{instance}}","refId":1,"step":"1m"}],"title":"Stuck Job History","type":"graph","yaxes":[{"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"Amount of disk usage (bytes) for each job in Jenkins","id":49,"lines":true,"targets":[{"expr":"default_jenkins_job_usage_bytes","legendFormat":"{{url}}","refId":1,"step":"1m"}],"title":"Job Disk Usage","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"id":51,"title":"Status","type":"row"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":53,"lines":true,"targets":[{"expr":"jenkins_health_check_score{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}\\n","legendFormat":"{{container}}-{{instance}}-health-score","refId":1,"step":"1m"},{"expr":"default_jenkins_up{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}","legendFormat":"{{container}}-{{instance}}-up","refId":2,"step":"1m"}],"title":"Jenkins Health","type":"graph","yaxes":[{"decimals":2,"format":"none"}]}],"title":"Jenkins Overview"},"name":"Jenkins","logo":"/assets/jenkins.svg"},"GPU Overview":{"settings":{"datasource":"prometheus","panels":[{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":12,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"DCGM_FI_DEV_GPU_TEMP","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU Temperature","type":"graph","xaxis":{},"yaxes":[{"format":"none"}]},{"datasource":"${DS_PROMETHEUS}","id":14,"format":"none","targets":[{"expr":"avg(DCGM_FI_DEV_GPU_TEMP)","refId":1,"step":"1m"}],"title":"GPU Avg. Temp","type":"singlestat"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":10,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_DEV_POWER_USAGE * on(pod,namespace) group_left(node) kube_pod_info)","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU Power Usage","type":"graph","xaxis":{},"yaxes":[{"format":"none"}]},{"datasource":"${DS_PROMETHEUS}","id":16,"format":"none","targets":[{"expr":"sum(DCGM_FI_DEV_POWER_USAGE)","step":"1m"}],"title":"GPU Power Total","type":"singlestat"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":2,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_DEV_SM_CLOCK * on(pod,namespace) group_left(node) kube_pod_info) * 1000000","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU SM Clocks","type":"graph","xaxis":{},"yaxes":[{"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":6,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_DEV_GPU_UTIL * on(pod,namespace) group_left(node) kube_pod_info)","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU Utilization","type":"graph","xaxis":{},"yaxes":[{"format":"percent (0.0-1.0)"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":18,"legend":["to_the_right","max","avg"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_DEV_FB_USED * on(pod,namespace) group_left(node) kube_pod_info)","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU Framebuffer Mem Used","type":"graph","xaxis":{},"yaxes":[{"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":4,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_PROF_PIPE_TENSOR_ACTIVE * on(pod,namespace) group_left(node) kube_pod_info)","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"Tensor Core Utilization","type":"graph","xaxis":{},"yaxes":[{"format":"percent (0.0-1.0)"}]}],"title":"GPU Overview"},"description":" ","name":"GPU","logo":"/assets/GPU.svg"},"Grafana":{"settings":{"datasource":"prometheus","panels":[],"title":"Grafana"},"name":"Grafana","description":" ","logo":"/assets/grafana.svg"},"Custom Monitoring":{"settings":{"datasource":"prometheus","panels":[],"title":"Custom Monitoring"},"name":"Custom","description":" ","logo":"/assets/prometheus.svg"}}')},function(e,t,a){e.exports={templateList:"KSUx0GMOtSywAxVTF3PGQ",templateLabel:"F1e1CyJJ9gzhTQLwN8RyP"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(274)),i=r(25),f=n(r(1084));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={"devops.credential.create":{on:function(e){var a,r=e.store,n=e.success,u=e.cluster,d=e.workspace,m=e.devops,h=e.formTemplate,v=(0,c.default)(e,["store","success","cluster","workspace","devops","formTemplate"]),E=s.default.open(p({onOk:(a=(0,o.default)(l.default.mark((function e(a,o){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.handleCreate(a,{devops:m,cluster:u}).finally((function(){o&&o()}));case 2:s.default.close(E),i.Notify.success({content:t("CREATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)}),store:r,cluster:u,workspace:d,devops:m,formTemplate:h,modal:f.default},v))}},"devops.credential.edit":{on:function(e){var a,r=e.store,n=e.success,u=e.cluster,d=e.workspace,m=e.devops,h=e.formTemplate,v=(0,c.default)(e,["store","success","cluster","workspace","devops","formTemplate"]),E=s.default.open(p({onOk:(a=(0,o.default)(l.default.mark((function e(a,o){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.updateCredential(a,{devops:m,cluster:u}).finally((function(){o&&o()}));case 2:s.default.close(E),i.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)}),store:r,cluster:u,workspace:d,devops:m,formTemplate:h,modal:f.default},v))}}};a.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(109)),i=n(r(185)),f=n(r(16)),d=n(r(73)),p=r(25),m=n(r(274)),h=n(r(2019)),v=n(r(2021)),E=n(r(2022)),y=n(r(760));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _=function(e){if(e.length>0){var t=new Map,a=[];return e.forEach((function(a){var r=a.name;if(r){var n=e.filter((function(e){return e.name===r}));t.set(r,n)}})),t.has("*")?a=(0,s.default)(t.get("*")):(t.forEach((function(e){var t=e.length&&e.filter((function(e){return"*"===e.namespace}));t.length>0?a.push(t[0]):a=a.concat(e)})),a)}return e},S={"devops.create":{on:function(e){var a=e.store,r=e.workspace,n=e.success,l=(0,c.default)(e,["store","workspace","success"]),o=m.default.open(g({onOk:function(e){var l=(0,f.default)(e,"spec.placement.cluster");a.create(e,{cluster:l,workspace:r}).then((function(){m.default.close(o),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),n&&n(l)}))},formTemplate:{},modal:h.default,store:a,workspace:r,hideCluster:!globals.app.isMultiCluster},l))}},"devops.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=m.default.open(g({onOk:function(e){a.update(r,e).then((function(){m.default.close(o),p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},modal:v.default,detail:r,store:a},l))}},"devops.edit.allowlist":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=(0,c.default)(e,["store","detail","success"]),h=m.default.open(g({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,s,v,E;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,i.default)(a),c=(0,f.default)(o,"spec.argo.sourceRepos",[]),s=(0,f.default)(o,"spec.argo.destinations",[]),(v=c.filter((function(e){return"*"===e}))).length>0&&(0,d.default)(o,"spec.argo.sourceRepos",v),E=_(s),(0,d.default)(o,"spec.argo.destinations",E),e.next=9,r.editAllowlist(n,o);case 9:m.default.close(h),p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 12:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:E.default,store:r},s))}},"devops.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,s=(0,c.default)(e,["store","success","rowKey"]),i=r.list,f=i.data,d=i.selectedRowKeys,h=f.filter((function(e){return d.includes(e[u])})).map((function(e){return e.name})),v=m.default.open(g({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],f.forEach((function(e){d.includes(e[u])&&a.push(r.delete(e))})),e.next=4,Promise.all(a);case 4:m.default.close(v),p.Notify.success({content:t("DELETE_SUCCESSFUL")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),title:1===h.length?t("DELETE_DEVOPS_PROJECT"):t("DELETE_MULTIPLE_DEVOPS_PROJECTS"),desc:1===h.length?t.html("DELETE_DEVOPS_PROJECT_TIP",{resource:h.join(", ")}):t.html("DELETE_DEVOPS_PROJECT_TIP_PL",{resource:h.join(", ")}),resource:h.join(", "),modal:y.default,store:r},s))}}};a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(21)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(70),v=n(r(16)),E=n(r(32)),y=n(r(1)),b=r(25),g=n(r(274)),_=n(r(749)),S=r(58),O=n(r(770)),C=n(r(2020));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=(0,h.observer)((u=o=function(e){(0,f.default)(r,e);var a=D(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).valueRenderer=function(e){return m.default.createElement(_.default,{cluster:e.cluster,size:"small",noStatus:!0})},n.optionRenderer=function(e){return m.default.createElement(m.default.Fragment,null,m.default.createElement(_.default,{cluster:e.cluster,size:"small",theme:"light",noStatus:!0}),e.disabled&&m.default.createElement("div",{className:C.default.toolmessage},m.default.createElement("span",null,e.cluster.isReady?t("NO_DEVOPS_INSTALL"):t("Not Ready"))))},n.nameValidator=function(e,a,r){if(!a)return r();var l=n.props,o=l.formTemplate,u=l.workspace,c=(0,v.default)(o,"spec.placement.cluster");n.store.checkName({name:a,cluster:c,workspace:u},{generateName:!0}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.handleClusterChange=function(){if(n.nameRef&&n.nameRef.current){var e="metadata.generateName";n.formRef&&n.formRef.current&&!(0,E.default)(n.formRef.current.state.errors)&&n.formRef.current.resetValidateResults(e),n.nameRef.current.validate((0,c.default)({},e,(0,v.default)(n.props.formTemplate,e)))}},n.store=e.store,n.workspaceStore=new O.default,n.nameRef=m.default.createRef(),n.formRef=m.default.createRef(),n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.props.hideCluster||this.fetchClusters()}},{key:"fetchClusters",value:function(e){this.workspaceStore.fetchClusters(R(R({},e),{},{workspace:this.props.workspace}))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.formTemplate,n=e.hideCluster,l=e.onOk,o=e.onCancel;return m.default.createElement(g.default.Form,{width:960,bodyClassName:C.default.body,data:r,onCancel:o,onOk:l,visible:a,closable:!1,hideHeader:!0,formRef:this.formRef},m.default.createElement("div",{className:C.default.header},m.default.createElement("img",{src:"/assets/project-create.svg",alt:""}),m.default.createElement("div",{className:C.default.title},m.default.createElement("div",null,t("CREATE_DEVOPS_PROJECT")),m.default.createElement("p",null,t("DEVOPS_PROJECT_CREATE_DESC")))),m.default.createElement("div",{className:C.default.content},m.default.createElement(b.Columns,null,m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("NAME"),desc:t("SERVICE_NAME_DESC"),ref:this.nameRef,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:S.PATTERN_SERVICE_NAME,message:t("INVALID_NAME_DESC",{message:t("SERVICE_NAME_DESC")})},{validator:this.nameValidator}]},m.default.createElement(b.Input,{name:"metadata.generateName",autoFocus:!0,maxLength:63}))),m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},m.default.createElement(b.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),m.default.createElement(b.Columns,null,!n&&m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("CLUSTER_SETTINGS"),rules:[{required:!0,message:t("CLUSTER_EMPTY_DESC")}]},m.default.createElement(b.Select,{name:"spec.placement.cluster",className:C.default.cluster,options:this.clusters,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,defaultValue:this.defaultCluster,onChange:this.handleClusterChange}))),m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},m.default.createElement(b.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))))))}},{key:"networkOptions",get:function(){return[{label:t("OFF"),value:""},{label:t("ON"),value:"enabled"}]}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,cluster:e,disabled:!e.isReady||!(0,v.default)(e,"configz.devops",!1)}}))}},{key:"defaultCluster",get:function(){var e=this.props.cluster,t=this.clusters.filter((function(e){return!e.disabled})).map((function(e){return e.value}));return t.find((function(t){return t===e}))||t[0]}}]),r}(m.default.Component),o.propTypes={formTemplate:y.default.object,visible:y.default.bool,isSubmitting:y.default.bool,onOk:y.default.func,onCancel:y.default.func},o.defaultProps={formTemplate:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=k},function(e,t,a){e.exports={body:"_3ZKoSqYFw5BRXmnCMUCyhC",header:"_3W-QAW13W4dowCBvjkJ7-y",title:"_22NqdZtvVEOVr9kv6bDsWN",toolmessage:"_370UWtm3Xf9odgtqYFtvAL",content:"Uz1mMt6FKA96vAT7roymt",cluster:"_2w41wf42xuXfsCbwGPlYQf",itemOption:"ZAVdNzefGlD04KWsBC5i_",itemValue:"_2ZXSuKSm_TuXXuyXCcojy-",group:"_3mcpkjmNOwaJzL-_WcWPpG"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(16)),m=n(r(0)),h=n(r(1)),v=r(5),E=r(70),y=r(25),b=n(r(274)),g=r(58),_=n(r(278));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,E.observer)((u=o=function(e){(0,i.default)(r,e);var a=S(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleOk=function(e){(0,t.props.onOk)(e)},t.form=m.default.createRef(),t.store=new _.default,e.detail.workspace&&t.store.fetchList({limit:1/0,workspace:e.detail.workspace}),t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){var t=(0,p.default)(this.props,"detail.workspace");t&&t!==(0,p.default)(e,"detail.workspace")&&this.store.fetchMembers({limit:1/0,workspace:t})}},{key:"getMembersOptions",value:function(){return(0,v.toJS)(this.store.list).data.map((function(e){return{label:e.username,value:e.username}}))}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.visible,n=e.onCancel,l=e.isSubmitting;return m.default.createElement(b.default.Form,{width:691,title:t("EDIT_INFORMATION"),icon:"pen",data:a,onOk:this.handleOk,onCancel:n,isSubmitting:l,visible:r},m.default.createElement(y.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:g.PATTERN_NAME,message:t("PATTERN_NAME_INVALID_TIP")}]},m.default.createElement(y.Input,{name:"name",disabled:!0})),m.default.createElement(y.Form.Item,{label:t("CREATOR"),desc:t("DEVOPS_ADMIN_DESC")},m.default.createElement(y.Select,{name:"creator",options:this.getMembersOptions(),disabled:!0})),m.default.createElement(y.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},m.default.createElement(y.Input,{name:"aliasName",maxLength:63})),m.default.createElement(y.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},m.default.createElement(y.TextArea,{maxLength:256,name:"description"})))}}]),r}(m.default.Component),o.propTypes={detail:h.default.object,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func,isSubmitting:h.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(109)),u=n(r(49)),c=n(r(50)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(761)),v=n(r(1)),E=r(25),y=n(r(274)),b=n(r(802)),g=n(r(16)),_=n(r(68)),S=n(r(788)),O=n(r(1010)),C=r(5),T=n(r(2023)),R=n(r(2024));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=function(e){(0,f.default)(r,e);var a=N(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=a.call.apply(a,[this].concat(l))).state={formTemplate:{},options:[],clusters:[],isLoading:!1},e.store=new S.default,e.cdStore=new O.default,e.formRef=m.default.createRef(),e.init=(0,c.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,e.initFormTemplate();case 3:return t.next=5,e.fetchClusters();case 5:e.setState({isLoading:!1});case 6:case"end":return t.stop()}}),t)}))),e.fetchClusters=(0,c.default)(u.default.mark((function a(){var r,n;return u.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.cdStore.getClustersList();case 2:r=e.cdStore.clustersList.map((function(e){return{label:e.label,value:e.name,server:e.server}})),n={label:t("ALL"),value:"*",server:"*"},e.setState({clusters:[n].concat((0,o.default)(r))});case 5:case"end":return a.stop()}}),a)}))),e.initFormTemplate=function(){e.store.fetchDetail(k({},e.props)).then((function(){var t=(0,g.default)((0,C.toJS)(e.store.detail),"_originData.spec.argo",{});e.setState({formTemplate:{spec:{argo:t}}})}))},e.checkItemValid=function(e){return""!==e},e.sourceReposValidator=function(e,a,r){if(!a)return r();if(a.length>0){var n=[];a.forEach((function(e){return n.includes(e)?r({message:t("CODE_REPOSITORY_EXIST_DESC")}):e?void n.push(e):r({message:t("REPO_EMPTY_DESC")})}))}r()},e.destinationsValidator=function(e,a,r){if(!a)return r();if(a.length>0){var n=[];a.forEach((function(e){var a=n.find((function(t){return t.namespace===e.namespace&&t.cluster===e.name}));return(0,_.default)(a)?e.name&&!e.namespace?r({message:t("PROJECT_NOT_SELECT_DESC")}):void n.push({namespace:e.namespace,cluster:e.name}):r({message:t("DEPLOYMENT_LOCATION_EXIST_DESC")})}))}r()},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.onOk,l=e.devops,o=e.cluster;return m.default.createElement(y.default.Form,{width:960,title:t("EDIT_ALLOWLIST"),data:this.state.formTemplate,onCancel:r,onOk:n,visible:a,formRef:this.formRef},this.state.isLoading?m.default.createElement(E.Loading,{spinning:this.state.isLoading},m.default.createElement(b.default,{desc:"NO_DATA"})):m.default.createElement(m.default.Fragment,null,m.default.createElement(E.Form.Item,{label:t("CODE_REPO_PL"),rules:[{validator:this.sourceReposValidator}]},m.default.createElement(h.default,{name:"spec.argo.sourceRepos",addText:t("ADD"),itemType:"string",checkItemValid:this.checkItemValid},m.default.createElement(R.default,{devops:l,cluster:o}))),m.default.createElement(E.Form.Item,{label:t("DEPLOYMENT_LOCATION_PL"),rules:[{validator:this.destinationsValidator}]},m.default.createElement(h.default,{name:"spec.argo.destinations",itemType:"object",addText:t("ADD")},m.default.createElement(T.default,{clusters:this.state.clusters,formtemplate:this.state.formTemplate})))))}}]),r}(m.default.Component);a.default=P,P.propTypes={formTemplate:v.default.object,visible:v.default.bool,isSubmitting:v.default.bool,onOk:v.default.func,onCancel:v.default.func},P.defaultProps={formTemplate:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s=n(r(109)),i=n(r(49)),f=n(r(21)),d=n(r(50)),p=n(r(91)),m=n(r(12)),h=n(r(13)),v=n(r(135)),E=n(r(19)),y=n(r(20)),b=n(r(18)),g=n(r(74)),_=(n(r(92)),n(r(0))),S=n(r(191)),O=n(r(16)),C=n(r(32)),T=n(r(73)),R=n(r(774)),D=n(r(753)),k=r(25),N=r(5),P=r(70),I=r(37),w=n(r(1293));function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var x={label:t("ALL"),value:"*",icon:"allowlist"},L=(0,P.observer)((o=function(e){(0,E.default)(n,e);var a,r=j(n);function n(){var e;(0,m.default)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=r.call.apply(r,[this].concat(l))).projectStore=new D.default,e.state={formData:{}},(0,p.default)(e,"cluster",u,(0,v.default)(e)),e.fetchNamespaces=(0,d.default)(i.default.mark((function t(){var a,r,n=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.length>0&&void 0!==n[0]?n[0]:{},"*"!==(r=(0,I.inCluster2Default)(e.cluster))){t.next=6;break}e.projectStore.list.update({data:[],isLoading:!1}),t.next=9;break;case 6:if(!r||"*"===r){t.next=9;break}return t.next=9,e.projectStore.fetchList(A(A({cluster:r},a),{},{type:"user"}));case 9:case"end":return t.stop()}}),t)}))),e.projectOptionRenderer=function(e){return _.default.createElement("span",{className:w.default.option},e.isFedManaged?_.default.createElement("img",{className:w.default.indicator,src:"/assets/cluster.svg"}):_.default.createElement(k.Icon,{name:"project"}),e.label,e.isFedManaged&&_.default.createElement(k.Tooltip,{content:t("MULTI_CLUSTER_PROJECT_NOT_FOR_CD")},_.default.createElement(k.Icon,{className:w.default.tip,name:"question"})))},(0,p.default)(e,"handleClusterChange",c,(0,v.default)(e)),e.handleChange=function(t){e.props.onChange(A({},t))},e.checkDestinationsValid=function(e){return!(0,C.default)(e)&&e.name&&e.namespace&&e.server},e}return(0,h.default)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:(a=(0,d.default)(i.default.mark((function e(){var t,a,r,n,l,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.destinations[this.props.index]||{},a=t.name,r=t.namespace,!a){e.next=10;break}return l=this.clusters.find((function(e){return e.value===a}))||{},this.cluster=l.value,(0,T.default)(this.state.formData,"name",(0,O.default)(this.clusters,l.value)),(0,T.default)(this.state.formData,"server",(0,O.default)(this.clusters,l.server)),e.next=8,this.fetchNamespaces();case 8:o=this.namespaces.find((function(e){return e.value===r})),(0,T.default)(this.state.formData,"namespace",null!==(n=null==o?void 0:o.value)&&void 0!==n?n:"");case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.value;return _.default.createElement(R.default,{value:e,onChange:this.handleChange},_.default.createElement(k.Select,{name:"name",placeholder:t("CLUSTER"),options:this.clusters,onChange:this.handleClusterChange,prefixIcon:_.default.createElement(k.Icon,{name:"cluster",size:16})}),_.default.createElement(k.Select,{name:"namespace",placeholder:t("PROJECT"),options:this.namespaces,pagination:(0,S.default)(this.projectStore.list,["page","limit","total"]),isLoading:this.projectStore.list.isLoading,onFetch:this.fetchNamespaces,valueRenderer:this.projectOptionRenderer,optionRenderer:this.projectOptionRenderer,searchable:!0}))}},{key:"clusters",get:function(){return this.props.clusters||[]}},{key:"destinations",get:function(){return(0,O.default)(this.props.formtemplate,"spec.argo.destinations",[])}},{key:"namespaces",get:function(){var e=this.projectStore.list.data.filter((function(e){return"Terminating"!==e.status})).map((function(e){return{label:e.name,value:e.name,disabled:e.isFedManaged,isFedManaged:e.isFedManaged}}));return this.cluster?[x].concat((0,s.default)(e)):e}}]),n}(_.default.Component),u=(0,g.default)(o.prototype,"cluster",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=(0,g.default)(o.prototype,"handleClusterChange",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,d.default)(i.default.mark((function t(a){var r,n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.cluster=a,t.next=3,e.fetchNamespaces();case 3:r=e.clusters.find((function(e){return e.value===a})).server,n=e.namespaces[0].value,e.props.onChange({name:a,server:r,namespace:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),l=o))||l;a.default=L},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(109)),u=n(r(21)),c=n(r(50)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=r(25),h=n(r(0)),v=n(r(1080)),E=n(r(191)),y=n(r(1293));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var S=function(e){(0,f.default)(r,e);var a=_(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,u=new Array(n),i=0;i<n;i++)u[i]=arguments[i];return(e=a.call.apply(a,[this].concat(u))).codeStore=new v.default,e.state={options:[]},e.getRepoList=function(){var a=(0,c.default)(l.default.mark((function a(r){var n,u,c,s,i;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.props,u=n.devops,c=n.cluster,a.next=3,e.codeStore.fetchList(g({devops:u,cluster:c},r));case 3:s=e.codeStore.list.data.map((function(e){return{label:e.name,value:e.repoURL,icon:"bitbucket_server"===e.provider?"bitbucket":e.provider}})),i={label:t("ALL"),value:"*",icon:"allowlist"},e.setState({options:[i].concat((0,o.default)(s))});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.repoOptionRenderer=function(e){return function(t){return h.default.createElement("span",{className:y.default.option},h.default.createElement(m.Icon,{name:e.icon,type:"value"===t?"dark":"light"}),e.label,"*"===e.value?"":" (".concat(e.value,")"))}},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.getRepoList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.value,r=t.index;return h.default.createElement(m.Select,{value:a,key:r,style:{maxWidth:"100%"},placeholder:" ",options:this.state.options,pagination:(0,E.default)(this.codeStore.list,["page","limit","total"]),isLoading:this.codeStore.list.isLoading,onFetch:this.getRepoList,valueRenderer:function(t){return e.repoOptionRenderer(t)("value")},optionRenderer:function(t){return e.repoOptionRenderer(t)("option")},clearable:!0,searchable:!0,onChange:this.props.onChange})}}]),r}(h.default.Component);a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(16)),i=n(r(73)),f=n(r(738)),d=n(r(185)),p=n(r(782)),m=n(r(32)),h=r(25),v=n(r(274)),E=n(r(2026)),y=n(r(2028)),b=r(5),g=n(r(2046)),_=n(r(760)),S=n(r(733)),O=n(r(2048)),C=r(37),T=n(r(737)),R=n(r(753));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={"federated.project.create":{on:function(e){var a,r=e.store,n=e.success,u=e.cluster,m=e.workspace,y=e.clusters,b=(0,c.default)(e,["store","success","cluster","workspace","clusters"]),g=v.default.open(k({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.default)(a,'metadata.annotations["kubesphere.io/creator"]',globals.user.username),(0,i.default)(a,'metadata.labels["kubesphere.io/workspace"]',m),o=(0,p.default)((0,s.default)(a,"spec.placement.clusters",[]).filter((function(e){return e.name})),"name"),u=new T.default(r),(0,i.default)(a,"spec.placement.clusters",o),c=(0,d.default)(a),(0,i.default)(c,'metadata.labels["kubesphere.io/kubefed-host-namespace"]',"true"),(0,i.default)(c,'metadata.labels["kubefed.io/managed"]',"false"),(0,f.default)(c,"spec.placement"),(0,f.default)(c,"metadata.annotations"),e.next=12,r.create(c,{workspace:m});case 12:return e.next=14,u.create(O.default.namespaces(a),{namespace:(0,s.default)(a,"metadata.name")});case 14:v.default.close(g),h.Notify.success({content:t("CREATE_SUCCESSFUL")}),n&&n();case 17:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:u,workspace:m,clusters:y,formTemplate:S.default.project(),modal:E.default,store:r},b))}},"federated.project.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=new R.default,u=v.default.open(k({onOk:function(){o.delete({name:r.name}).then((function(){v.default.close(u),h.Notify.success({content:t("DELETE_SUCCESSFUL")}),n&&n()}))},store:a,modal:_.default,resource:r.name,type:"MULTI_CLUSTER_PROJECT",isLoading:o.isLoading},l))}},"federated.project.delete.batch":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,s=(0,c.default)(e,["store","success","rowKey"]),i=new R.default,f=r.list,d=f.data,p=f.selectedRowKeys,m=d.filter((function(e){return p.includes(e[u])})).map((function(e){return e.name})),E=v.default.open(k({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],d.forEach((function(e){m.includes(e.name)&&a.push(i.delete({name:e.name}))})),e.next=4,Promise.all(a);case 4:v.default.close(E),h.Notify.success({content:t("DELETE_SUCCESSFUL")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:m.join(", "),modal:_.default,store:r,isLoading:i.isLoading},s))}},"federated.workload.template.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=e.module,o=e.supportGpuSelect,u=void 0!==o&&o,i=(0,c.default)(e,["store","detail","success","module","supportGpuSelect"]),f=v.default.open(k({onOk:function(e){var l=(0,s.default)(e,"spec.overrides",[]);(0,C.multiCluster_overrides_Dot)(l);var o=(0,s.default)(e,"spec.template.spec.customMode",{});(0,m.default)(o)||delete e.spec.template.spec.customMode,a.update(r,e).then((function(){h.Notify.success({content:t("UPDATE_SUCCESSFUL")}),v.default.close(f),n&&n()}))},store:a,module:l||a.module,detail:(0,b.toJS)(r._originData),modal:y.default,type:r.type,workloadStore:a,isEdit:!0,supportGpuSelect:u,hideVolumeSetting:"statefulsets"===a.module},i))}},"federated.project.add.cluster":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=v.default.open(k({onOk:function(e){a.patch(r,e).then((function(){h.Notify.success({content:t("UPDATE_SUCCESSFUL")}),v.default.close(o),n&&n()}))},store:a,formTemplate:(0,b.toJS)(r._originData),modal:g.default},l))}}};a.default=N},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s=n(r(21)),i=n(r(49)),f=n(r(109)),d=n(r(50)),p=n(r(12)),m=n(r(13)),h=n(r(19)),v=n(r(20)),E=n(r(18)),y=n(r(74)),b=n(r(0)),g=r(70),_=n(r(16)),S=n(r(73)),O=n(r(782)),C=n(r(32)),T=n(r(1)),R=r(25),D=n(r(274)),k=n(r(761)),N=n(r(774)),P=n(r(749)),I=r(58),w=r(5),M=n(r(2027));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var j=(0,g.observer)((c=u=function(e){(0,h.default)(r,e);var a=A(r);function r(e){var n;return(0,p.default)(this,r),(n=a.call(this,e)).nameValidator=function(){var e=(0,d.default)(i.default.mark((function e(a,r,l){var o,u,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",l());case 2:return e.next=4,n.store.checkName({name:r});case 4:if(!e.sent.exist){e.next=7;break}return e.abrupt("return",l({message:t("PROJECT_NAME_EXISTS_IN_HOST"),field:a.field}));case 7:return o=(0,_.default)(n.props.formTemplate,"spec.placement.clusters",[]),e.next=10,Promise.all((0,f.default)(o.map((function(e){return n.store.checkName({name:r,cluster:e.name})}))));case 10:if(u=e.sent,!((c=u.findIndex((function(e){return e.exist})))>-1&&o[c])){e.next=14;break}return e.abrupt("return",l({message:t("PROJECT_NAME_EXISTS_IN_CLUSTER",{cluster:o[c].name}),field:a.field}));case 14:l();case 15:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),n.valueRenderer=function(e){return b.default.createElement(P.default,{cluster:e.cluster,size:"small",noStatus:!0})},n.optionRenderer=function(e){return b.default.createElement(P.default,{cluster:e.cluster,size:"small",theme:"light",noStatus:!0})},n.handleClusterChange=function(e){if((0,S.default)(n.props.formTemplate,"spec.placement.clusters",(0,O.default)(e,"name")),n.nameRef&&n.nameRef.current){var t="metadata.name";n.formRef&&n.formRef.current&&!(0,C.default)(n.formRef.current.state.errors)&&n.formRef.current.resetValidateResults(t),n.nameRef.current.validate((0,s.default)({},t,(0,_.default)(n.props.formTemplate,t)))}},n.store=e.store,n.formRef=b.default.createRef(),n.nameRef=b.default.createRef(),n}return(0,m.default)(r,[{key:"renderClusters",value:function(){return b.default.createElement(R.Form.Group,{label:t("CLUSTER_PL"),desc:t("PROJECT_CLUSTER_SETTINGS_DESC")},b.default.createElement(R.Form.Item,{rules:[{required:!0,message:t("CLUSTER_EMPTY_DESC")}]},b.default.createElement(k.default,{name:"spec.placement.clusters",addText:t("ADD_CLUSTER"),itemType:"object",onChange:this.handleClusterChange},b.default.createElement(N.default,null,b.default.createElement(R.Select,{name:"name",placeholder:" ",className:M.default.cluster,options:this.clusters,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer})))))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.formTemplate,n=e.onOk,l=e.onCancel,o=e.isSubmitting;return b.default.createElement(D.default.Form,{width:960,formRef:this.formRef,bodyClassName:M.default.body,data:r,onCancel:l,onOk:n,visible:a,closable:!1,isSubmitting:o,hideHeader:!0},b.default.createElement("div",{className:M.default.header},b.default.createElement("img",{src:"/assets/project-create.svg",alt:""}),b.default.createElement("div",{className:M.default.title},b.default.createElement("div",null,t("CREATE_MULTI_CLUSTER_PROJECT")),b.default.createElement("p",null,t("CREATE_MULTI_CLUSTER_PROJECT_DESC")))),b.default.createElement("div",{className:M.default.content},b.default.createElement(R.Columns,null,b.default.createElement(R.Column,null,b.default.createElement(R.Form.Item,{label:t("NAME"),desc:t("SERVICE_NAME_DESC"),ref:this.nameRef,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:I.PATTERN_SERVICE_NAME,message:t("INVALID_NAME_DESC",{message:t("SERVICE_NAME_DESC")})},{validator:this.nameValidator}]},b.default.createElement(R.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),b.default.createElement(R.Column,null,b.default.createElement(R.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},b.default.createElement(R.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),b.default.createElement(R.Columns,null,b.default.createElement(R.Column,null,b.default.createElement(R.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},b.default.createElement(R.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))),b.default.createElement(R.Column,null)),this.renderClusters()))}},{key:"networkOptions",get:function(){return[{label:t("Off"),value:""},{label:t("On"),value:"enabled"}]}},{key:"clusters",get:function(){return this.props.clusters.map((function(e){return{label:e.name,value:e.name,cluster:e,disabled:!e.isReady}}))}}]),r}(b.default.Component),u.propTypes={formTemplate:T.default.object,visible:T.default.bool,isSubmitting:T.default.bool,clusters:T.default.array,onOk:T.default.func,onCancel:T.default.func},u.defaultProps={formTemplate:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},o=c,(0,y.default)(o.prototype,"clusters",[w.computed],Object.getOwnPropertyDescriptor(o.prototype,"clusters"),o.prototype),l=o))||l;a.default=j},function(e,t,a){e.exports={body:"_2YFT-UtUl19RnIcDCBLrSX",header:"_2cYVq3DxoJtlCWF7n20jG",title:"_3JeOv7o2Iknp2JVawu8F0D",content:"_3FxY_7mBEqpROSZi3lNiqU",cluster:"ZBb_XLUwlhmbTirefNnWq",toolmessage:"_2Zd1xHbMCz9tv6jdf1MAn2"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),o=r(a(12)),u=r(a(13)),c=r(a(19)),s=r(a(20)),i=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(1011)),m=r(a(2032));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.module,a=(0,l.default)(e,["module"]);return f.default.createElement(p.default,(0,n.default)({title:"EDIT_SETTINGS",icon:"storage",module:t,forms:this.forms},a))}},{key:"forms",get:function(){return m.default[this.props.module]}}]),a}(f.default.Component);t.default=v,v.propTypes={module:d.default.string},v.defaultProps={module:"deployments"}},,,,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1295)),l=r(a(1296)),o=r(a(1297)),u=r(a(1298)),c=r(a(2033)),s=r(a(2038)),i={deployments:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:n.default},{icon:"container",name:"podTemplate",title:"CONTAINER_PL",component:l.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:o.default},{icon:"group",name:"deploymentMode",title:"POD_SCHEDULING_RULES",component:u.default},{title:"CLUSTER_DIFF",icon:"blue-green-deployment",name:"Diff Settings",component:s.default}],statefulsets:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:n.default},{icon:"container",name:"podTemplate",title:"CONTAINER_PL",component:l.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:o.default},{title:"CLUSTER_DIFF",icon:"blue-green-deployment",name:"Diff Settings",component:s.default}],service:[{icon:"network-router",name:"editService",title:"SERVICE_SETTINGS",component:c.default},{title:"CLUSTER_DIFF",icon:"blue-green-deployment",name:"Diff Settings",component:s.default}]};t.default=i},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(5),p=n(r(1076)),m=r(58),h=n(r(2034)),v=n(r(2037));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleOk=function(){var t=e.props,a=t.onSave,r=t.store,n=t.detail,l=e.context.resetSubRoute,o=e.formRef.current,u=r.list,c=(0,d.toJS)(u.selectedRowKeys).filter((function(e){return e!==n.uid}));o&&o.validate((function(){a(o.getData()),u.setSelectRowKeys(c)})),l&&l()},e.handleCancel=function(){(0,e.props.onCancel)()},e}return(0,o.default)(r,[{key:"renderServiceSettings",value:function(){var e=this.props,t=e.cluster,a=e.formRef,r=e.isFederated,n=e.formProps,l=e.formTemplate,o=e.type;return i.default.createElement(h.default,{formRef:a,formTemplate:l,cluster:t,isFederated:r,formProps:n,type:m.SERVICE_TYPES_VALUE[o]})}},{key:"renderExternalName",value:function(){var e=this.props,t=e.formRef,a=e.formTemplate;return i.default.createElement(p.default,{formRef:t,formTemplate:a})}},{key:"renderEmpty",value:function(){return i.default.createElement("p",{className:v.default.empty},t("UNKNOWN_SERVICE_TYPE"))}},{key:"renderForm",value:function(){var e=null;switch(this.props.type){case m.SERVICE_TYPES.VirtualIP:case m.SERVICE_TYPES.Headless:e=this.renderServiceSettings();break;case m.SERVICE_TYPES.ExternalName:e=this.renderExternalName();break;default:e=this.renderEmpty()}return e}},{key:"render",value:function(){return i.default.createElement("div",null,this.renderForm())}}]),r}(i.default.Component);a.default=y,y.propTypes={type:f.default.string,formTemplate:f.default.object,onSave:f.default.func,onCancel:f.default.func},y.defaultProps={type:"",formTemplate:{},onSave:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=r(25),d=n(r(636));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderTypeSelect",value:function(){return i.default.createElement(f.Form.Item,{label:t("INTERNAL_ACCESS_MODE")},i.default.createElement(d.default,{className:"margin-b12",value:this.state.serviceType,onChange:this.handleTypeChange,options:this.types,disabled:!0}))}}]),r}(n(r(2035)).default);a.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(16)),d=n(r(73)),p=n(r(738)),m=n(r(32)),h=n(r(0)),v=r(25),E=n(r(636)),y=n(r(761)),b=n(r(1078)),g=r(37),_=r(58),S=n(r(1241)),O=n(r(2036));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=function(e){(0,c.default)(r,e);var a=C(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).state={serviceType:"virtualIP"},e.handleTypeChange=function(t){e.setState({serviceType:t},(function(){"virtualIP"===t?(0,p.default)(e.formTemplate,"spec.clusterIP"):(0,d.default)(e.formTemplate,"spec.clusterIP","None")}))},e.handleLabelsChange=function(t){var a=e.props.formTemplate;(0,d.default)(a,"metadata.labels",t),(0,d.default)(a,'metadata.annotations["kubesphere.io/workloadName"]',"".concat(t.app,"-").concat(t.version))},e.portsValidator=function(e,a,r){if(!a)return r();if(a.length>0){var n=[];a.forEach((function(e){return e.name&&e.port?n.includes(e.name)?r({message:t("PORT_INPUT_DESC")}):e.name&&(e.name.length>63||!_.PATTERN_PORT_NAME.test(e.name))?r({message:t("PORT_NAME_DESC")}):void n.push(e.name):r({message:t("INVALID_PORT")})}))}r()},e.labelsValidator=function(e,a,r){return a?(0,m.default)(a)?r({message:t("ENTER_SELECTOR_TIP")}):(0,g.isValidLabel)(a)?r():r({message:t("LABEL_FORMAT_DESC")}):r()},e}return(0,u.default)(r,[{key:"renderTypeSelect",value:function(){return h.default.createElement(v.Form.Item,{label:t("INTERNAL_ACCESS_MODE")},h.default.createElement(E.default,{className:"margin-b12",value:this.state.serviceType,onChange:this.handleTypeChange,options:this.types}))}},{key:"renderLabelSelector",value:function(){var e=this.props.isFederated;return h.default.createElement(v.Form.Item,{label:t("WORKLOAD_SELECTOR"),rules:[{required:!0,message:t("ENTER_SELECTOR_TIP")},{validator:this.labelsValidator}]},h.default.createElement(S.default,{name:e?"spec.template.spec.selector":"spec.selector",cluster:this.props.cluster,namespace:this.namespace,addText:t("ADD"),isFederated:e,onChange:this.handleLabelsChange}))}},{key:"renderPorts",value:function(){var e=this.props.isFederated;return h.default.createElement(v.Form.Group,{label:t("PORT_PL"),desc:t("SERVICE_PORTS_DESC")},h.default.createElement(v.Form.Item,{rules:[{required:!0,message:t("PORT_EMPTY")},{validator:this.portsValidator,checkOnSubmit:!0}]},h.default.createElement(y.default,{name:e?"spec.template.spec.ports":"spec.ports",itemType:"object",addText:t("ADD_PORT")},h.default.createElement(b.default,null))))}},{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formProps;return h.default.createElement("div",{className:O.default.wrapper},h.default.createElement(v.Form,(0,l.default)({data:this.formTemplate,ref:t},a),this.renderTypeSelect(),this.renderLabelSelector(),this.renderPorts()))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,_.MODULE_KIND_MAP[a],t)}},{key:"namespace",get:function(){return(0,f.default)(this.formTemplate,"metadata.namespace")}},{key:"types",get:function(){return[{icon:"cluster",label:t("VIRTUAL_IP_TITLE"),description:t("VIRTUAL_IP_DESC"),value:"virtualIP"},{icon:"blockchain",label:t("INTERNAL_DOMAIN_NAME"),description:t("INTERNAL_DOMAIN_NAME_DESC"),value:"headlessSelector"}]}}]),r}(h.default.Component);a.default=T},function(e,t,a){e.exports={wrapper:"_1d8R2wC-iPUk0mJ0gGdi9g",contentWrapper:"_3YpkzmM-waCXVs2m6v7Jd1",card:"_2TCiSZqKH5Kv9Jot5mNmTY",tabs:"_3CrPTt4KFbhRsB2wWRMg88",label:"_2GCaqlVoPz2mC7DU580ae2"}},function(e,t,a){e.exports={empty:"_3g5fKDY3mes3tmmqImZr6D"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(32)),m=n(r(290)),h=n(r(73)),v=r(58),E=r(25),y=n(r(1066)),b=n(r(1215)),g=n(r(1218)),_=n(r(1221)),S=n(r(1224)),O=n(r(1225)),C=n(r(2039)),T=n(r(2041)),R=n(r(1064)),D=n(r(2043));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var N=function(e){(0,c.default)(r,e);var a=k(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleLocal=function(t){e.formTemplate.spec.overrides.map((function(e){return t.includes(e.clusterName)||(0,p.default)(e.clusterOverrides)||(e.clusterOverrides=[]),e}));var a=[];t.forEach((function(e){a.push({name:e})})),(0,h.default)(e.formTemplate,"spec.placement.clusters",a)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.formRef,n=a.projectDetail,o=a.withService,u=a.formProps,c=a.module,s=a.isEdit,i=a.workspace,p=(0,m.default)(n.clusters,"name");return f.default.createElement("div",null,f.default.createElement(E.Form,(0,l.default)({data:this.formTemplate,ref:r},u),f.default.createElement(E.Form.Group,{label:t("CLUSTER")},f.default.createElement(E.Form.Item,null,f.default.createElement(R.default,{name:"clusters",options:this.clustersOption,defaultValue:this.defaultClusters,onChange:this.handleLocal}))),"service"===c&&s?null:f.default.createElement(E.Form.Group,{label:t("CONTAINER_IMAGE"),desc:t("CLUSTER_DIFF_CONTAINER_SETTINGS_DESC"),checkable:!0},f.default.createElement(y.default,{clusters:this.clusters,clustersDetail:p,namespace:this.namespace},(function(t){return f.default.createElement(b.default,(0,l.default)({formTemplate:e.formTemplate},t,u),(function(e){return f.default.createElement(D.default,(0,l.default)({isEdit:s},e,{workspace:i}))}))}))),this.showVolumeTemplate&&f.default.createElement(E.Form.Group,{label:t("VOLUME_TEMPLATE_SETTINGS"),desc:t("CLUSTER_VOLUME_DIFF_DESC"),checkable:!0},f.default.createElement(y.default,{clusters:this.clusters,clustersDetail:p,namespace:this.namespace},(function(t){return f.default.createElement(S.default,(0,l.default)({formTemplate:e.formTemplate},t),(function(e){return f.default.createElement(O.default,e)}))}))),f.default.createElement(E.Form.Group,{label:t("PORT_SETTINGS"),desc:t("CLUSTER_DIFF_PORT_SETTINGS_DESC"),checkable:!0},f.default.createElement(y.default,{clusters:this.clusters,clustersDetail:p,namespace:this.namespace},"service"===c&&s?function(t){return f.default.createElement(C.default,(0,l.default)({formTemplate:e.formTemplate,withService:o},t,u),(function(e){return f.default.createElement(T.default,e)}))}:function(t){return f.default.createElement(b.default,(0,l.default)({formTemplate:e.formTemplate,withService:o,serviceTemplate:(0,d.default)(e.props.formTemplate,"Service")},t,u),(function(e){return f.default.createElement(g.default,e)}))})),"service"===c&&s?null:f.default.createElement(E.Form.Group,{label:t("ENVIRONMENT_VARIABLE_PL"),desc:t("CLUSTER_DIFF_ENVIRONMENT_VARIABLES_DESC"),checkable:!0},f.default.createElement(y.default,{clusters:this.clusters,clustersDetail:p,namespace:this.namespace},(function(t){return f.default.createElement(b.default,(0,l.default)({formTemplate:e.formTemplate},t,u),(function(e){return f.default.createElement(_.default,e)}))})))))}},{key:"namespace",get:function(){return(0,d.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,v.MODULE_KIND_MAP[a],t)}},{key:"clusters",get:function(){return(0,d.default)(this.formTemplate,"spec.placement.clusters",[])}},{key:"clustersOption",get:function(){var e=this.props.projectDetail.clusters,t=[];return e.forEach((function(e){t.push({name:e.name,value:e.name,provider:e.provider})})),t}},{key:"showVolumeTemplate",get:function(){return"statefulsets"===this.props.module&&(0,d.default)(this.formTemplate,"spec.template.spec.volumeClaimTemplates")}},{key:"defaultClusters",get:function(){return(0,d.default)(this.formTemplate,"spec.placement.clusters",[]).map((function(e){return e.name}))}}]),r}(f.default.Component);a.default=N},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(21)),o=n(a(109)),u=n(a(12)),c=n(a(13)),s=n(a(19)),i=n(a(20)),f=n(a(18)),d=n(a(16)),p=n(a(73)),m=n(a(32)),h=n(a(782)),v=n(a(23)),E=r(a(0)),y=n(a(3)),b=n(a(2040));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=function(e){(0,s.default)(a,e);var t=S(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={editContainer:""},e.showEdit=function(t){var a=e.props,r=a.onSelect,n=a.cluster;e.setState({editContainer:t.clusterName},(function(){r(n)}))},e.handleEdit=function(t){var a=t.data,r=e.props,n=r.cluster,l=r.formTemplate,u=r.onChange,c=[];a.ports.forEach((function(e){e.servicePort&&c.push({name:e.name,protocol:e.protocol,port:e.servicePort,targetPort:e.containerPort})}));var s=[{path:"/spec/ports",value:c}],i=(0,d.default)(l,"spec.overrides",[]),f=i.find((function(e){return e.clusterName===n}));f?f.clusterOverrides=(0,h.default)([].concat(s,(0,o.default)(f.clusterOverrides||[])),"path"):i.push({clusterName:n,clusterOverrides:s}),(0,p.default)(l,"spec.overrides",i),e.setState({editContainer:""}),u()},e.renderContainer=function(t){var a=e.props,r=a.children,n=a.selected,o=e.state.editContainer;return E.default.createElement("div",{key:t.name,className:(0,y.default)(b.default.wrapper,(0,l.default)({},b.default.selected,n))},r(_(_({},e.props),{},{containerType:"worker",formData:t,isEdit:o===t.clusterName,showEdit:e.showEdit,onEdit:e.handleEdit})))},e}return(0,c.default)(a,[{key:"getContainer",value:function(e){var t=this.props,a=t.cluster,r=t.formTemplate,n=(0,d.default)(r,"spec.overrides",[]).find((function(e){return e.clusterName===a}))||{},l={path:"/spec/ports",value:e};n&&!(0,m.default)(n.clusterOverrides)&&n.clusterOverrides.forEach((function(e){if(e&&e.path.startsWith("/spec/ports")){var t=e.value;!(0,m.default)(t)&&(0,v.default)(t)||(t=(0,d.default)(r,"spec.template.spec.ports")),(0,p.default)(l,"value",t)}}));var o=l.value.map((function(e){return{name:e.name,protocol:e.protocol,servicePort:e.port,containerPort:e.targetPort}}));return{clusterName:a,ports:o}}},{key:"render",value:function(){var e=this.props.formTemplate,t=(0,d.default)(e,"spec.template.spec.ports",[]),a=this.getContainer(t);return E.default.createElement(E.default.Fragment,null,this.renderContainer(a,"worker"))}}]),a}(E.Component);t.default=O},function(e,t,a){e.exports={wrapper:"_10qAPtNu0wFuyojJ9ol8zs",selected:"gG0AbN0FtgLTYXYx6Uk00"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(191)),m=l(r(902)),h=l(r(993)),v=l(r(2042));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,s.default)(r,e);var a=E(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleSubmit=function(t){var a=e.props,r=a.index,n=a.containerType;(0,a.onEdit)({index:r,containerType:n,data:(0,p.default)(t,["ports"])})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formData,r=e.containerType,n=e.withService,l="init"!==r&&n,u=d.default.createElement(d.default.Fragment,null,a.ports&&a.ports.map((function(e,a){return d.default.createElement("div",{key:a,className:v.default.port},d.default.createElement("span",null,"".concat(t("PROTOCOL"),": ").concat(e.protocol)),d.default.createElement("span",null,"".concat(t("NAME"),": ").concat(e.name)),d.default.createElement("span",null,"".concat(t("CONTAINER_PORT"),": ").concat(e.containerPort)),l&&d.default.createElement("span",null,"".concat(t("SERVICE_PORT"),": ").concat(e.servicePort)))})));return d.default.createElement(m.default,(0,o.default)({},this.props,{title:u,onOk:this.handleSubmit}),d.default.createElement(h.default,{withService:"init"!==r&&n}))}}]),r}(d.Component);a.default=y},function(e,t,a){e.exports={port:"_1BuMHNg2pwGj5c5dHEdMpg"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u=n(r(71)),c=n(r(21)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=l(r(0)),h=n(r(16)),v=n(r(190)),E=n(r(936)),y=n(r(68)),b=r(70),g=r(5),_=n(r(811)),S=n(r(853)),O=r(37),C=r(280),T=n(r(902)),R=n(r(2044));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=(0,b.observer)(o=function(e){(0,f.default)(r,e);var a=N(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).handleSubmit=function(e){var a=t.props,r=a.index,n=a.containerType;(0,a.onEdit)({index:r,containerType:n,data:(0,v.default)(e,"type")})},t.quotaStore=new _.default,t.workspaceQuotaStore=new S.default,t.state={availableQuota:{}},t}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchQuota()}},{key:"fetchQuota",value:function(){var e=this,t=this.props,a=t.cluster,r=t.workspace,n=t.namespace;r&&n&&Promise.all([this.quotaStore.fetch({cluster:a,namespace:n}),this.workspaceQuotaStore.fetchDetail({name:r,workspace:r,cluster:a})]).then((function(){var t=(0,g.toJS)(e.quotaStore.data.hard),a=(0,C.getLeftQuota)((0,h.default)(e.workspaceQuotaStore.detail,"status.total"),e.quotaStore.data),r=a.namespace,n=a.workspace;e.setState({availableQuota:{workspace:n,namespace:k(k({},r),(0,v.default)(t,O.resourceLimitKey))}})}))}},{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.formData,l=e.containerType,o=e.isEdit,c=(0,h.default)(n,"resources");return m.default.createElement(T.default,(0,u.default)({},this.props,{title:m.default.createElement("span",null,"".concat(t("IMAGE"),": ").concat(n.image)),onOk:this.handleSubmit}),m.default.createElement(R.default,{data:n,cluster:a,namespace:r,limitRanges:c,defaultContainerType:l,workspaceQuota:this.workspaceQuota,isEdit:o}))}},{key:"workspaceQuota",get:function(){var e=(0,h.default)(this.state.availableQuota,"namespace",{}),t=(0,h.default)(this.state.availableQuota,"workspace",{});return(0,E.default)(e,t,(function(e,t){if(e||t)return(0,y.default)(e)?t:e<t?e:t}))}}]),r}(m.Component))||o;a.default=P},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=r(37),d=r(58),p=r(25),m=n(r(32)),h=n(r(16)),v=n(r(872)),E=n(r(903)),y=n(r(1067)),b=n(r(2045));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,u.default)(r,e);var a=g(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"getGpuLimit",value:function(){return(0,f.gpuLimitsArr)(this.workspaceQuota)}},{key:"renderAdvancedSettings",value:function(){var e=this.props,a=e.defaultContainerType,r=e.onContainerTypeChange,n=e.isEdit,l=this.defaultResourceLimit;return i.default.createElement(E.default,{defaultShow:!0},i.default.createElement(i.default.Fragment,null,i.default.createElement(p.Columns,{className:b.default.columns},i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("CONTAINER_NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:d.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})}]},i.default.createElement(p.Input,{name:"name",defaultValue:"container-".concat((0,f.generateId)()),maxLength:63}))),i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("CONTAINER_TYPE")},i.default.createElement(p.Select,{name:"type",defaultValue:a,options:this.containerTypes,onChange:r,valueRenderer:this.valueRenderer})))),i.default.createElement(p.Alert,{className:"margin-b12",type:"info",message:t("CONTAINER_RESOURCE_LIMIT_TIP")}),i.default.createElement(p.Form.Item,{rules:[{validator:this.limitValidator,checkOnSubmit:!0}]},i.default.createElement(v.default,{name:"resources",defaultValue:l,onError:this.handleError,isEdit:n,supportGpuSelect:!0,workspaceLimitProps:this.workspaceLimitProps}))))}},{key:"defaultResourceLimit",get:function(){var e=this.props.limitRanges,t=void 0===e?{}:e;if(t.limits||t.requests)return{requests:t.requests||{},limits:t.limits||{}}}},{key:"workspaceLimitProps",get:function(){var e=this.props.workspaceQuota;return(0,m.default)(e)?{}:{limits:{cpu:(0,h.default)(e,"limits.cpu"),memory:(0,h.default)(e,"limits.memory")},requests:{cpu:(0,h.default)(e,"requests.cpu"),memory:(0,h.default)(e,"requests.memory")},gpuLimit:this.getGpuLimit()}}}]),r}(y.default);a.default=_},function(e,t,a){e.exports={message:"_2tYIfpBit4wZxAd9FJxE6y",imageSearch:"WP6XS0i1_qs6HdOBtnh2d",columns:"_3ZMZ7kB3ERXUvc6BlRfr7D",type:"_1z31teCRLbXGZmM73L340N"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(109)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(74)),p=n(r(0)),m=r(25),h=n(r(761)),v=n(r(774)),E=r(5),y=n(r(274)),b=n(r(73)),g=n(r(782)),_=n(r(16)),S=n(r(749)),O=n(r(2047));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var T=(l=function(e){(0,s.default)(r,e);var a=C(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).clustersList=(0,_.default)(e.props.formTemplate,"spec.placement.clusters",[]),e.formTemplate={},e.handleClusterChange=function(t){(0,b.default)(e.formTemplate,"clusters",(0,g.default)(t,"name"))},e.valueRenderer=function(e){return p.default.createElement(S.default,{cluster:e.cluster,size:"small",noStatus:!0})},e.optionRenderer=function(e){return p.default.createElement(S.default,{cluster:e.cluster,size:"small",theme:"light",noStatus:!0})},e.handleOk=function(t){var a=e.props,r=a.onOk,n=a.formTemplate,l=(0,g.default)([].concat((0,o.default)(e.clustersList),(0,o.default)(t.clusters)),"name"),u=(0,_.default)(n,"metadata.annotations"),c=l.map((function(e){return{clusterName:e.name,clusterOverrides:[{path:"/metadata/annotations",value:u}]}}));(0,b.default)(n,"spec.placement.clusters",l),(0,b.default)(n,"spec.overrides",c),r(n)},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel;return p.default.createElement(y.default.Form,{data:this.formTemplate,width:691,title:t("ADD_CLUSTER"),icon:"enterprise",onOk:this.handleOk,onCancel:n,visible:a,isSubmitting:r},p.default.createElement("div",{className:O.default.fedProClusterContainer},p.default.createElement(m.Form.Group,null,p.default.createElement(m.Form.Item,{rules:[{required:!0,message:t("CLUSTER_EMPTY_DESC")}],desc:this.enableAddCluster?t("FEDPROJECT_CANNOT_ADD_CLUSTER"):null},p.default.createElement(h.default,{name:"clusters",addText:t("ADD_CLUSTER"),itemType:"object",onChange:this.handleClusterChange},p.default.createElement(v.default,null,p.default.createElement(m.Select,{name:"name",placeholder:" ",options:this.clusters,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer})))))))}},{key:"clusters",get:function(){var e=this;return this.props.clusters.map((function(t){var a=e.clustersList.some((function(e){return e.name===t.name}));return{label:t.name,value:t.name,cluster:t,disabled:!t.isReady||a}}))}},{key:"enableAddCluster",get:function(){return this.clusters.every((function(e){return e.disabled}))}}]),r}(p.default.Component),(0,d.default)(l.prototype,"clusters",[E.computed],Object.getOwnPropertyDescriptor(l.prototype,"clusters"),l.prototype),(0,d.default)(l.prototype,"enableAddCluster",[E.computed],Object.getOwnPropertyDescriptor(l.prototype,"enableAddCluster"),l.prototype),l);a.default=T},function(e,t,a){e.exports={fedProClusterContainer:"_2iCHyPdPf0H_KTrM8xWFQL"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(16)),l=r(a(185)),o=r(a(738)),u={namespaces:function(e){var t=(0,n.default)(e,"metadata.name"),a=(0,n.default)(e,"metadata.annotations"),r=(0,n.default)(e,"spec.placement"),u=(0,n.default)(e,"spec.placement.clusters",[]),c=(0,n.default)(e,'metadata.labels["kubesphere.io/workspace"]'),s=(0,l.default)(e);(0,o.default)(s,"apiVersion"),(0,o.default)(s,"kind"),(0,o.default)(s,"metadata.name"),(0,o.default)(s,"metadata.annotations"),(0,o.default)(s,"spec");var i=u.map((function(e){return{clusterName:e.name,clusterOverrides:[{path:"/metadata/annotations",value:a}]}}));return{apiVersion:"types.kubefed.io/v1beta1",kind:"FederatedNamespace",metadata:{name:t,namespace:t,labels:{"kubesphere.io/workspace":c},annotations:a},spec:{placement:r,template:s,overrides:i}}}};t.default=u},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=r(25),i=n(r(274)),f=n(r(73)),d=n(r(32)),p=n(r(2050)),m=n(r(760)),h=n(r(733)),v=n(r(2053)),E=n(r(767));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={"gateways.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.name,o=e.success,u=(0,c.default)(e,["store","cluster","namespace","name","success"]),d=i.default.open(b({onOk:function(e){(0,f.default)(e,"metadata",{namespace:n,name:l,creator:globals.user.username,createTime:new Date,annotations:b({},e.metadata.annotations)}),"kubesphere-controls-system"!==n&&(0,f.default)(e,"spec.controller.scope",{enabled:!0,namespace:n}),a.addGateway({cluster:r,namespace:n},e).then((function(){i.default.close(d),s.Notify.success({content:t("CREATE_SUCCESSFUL")}),o&&o()}))},modal:p.default,cluster:r,namespace:n,name:l,store:a,detail:h.default.gateways()},u))}},"gateways.edit":{on:function(e){return(0,o.default)(l.default.mark((function a(){var r,n,u,d,m,h,v,y,g,_,S;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.store,n=e.detail,u=e.cluster,d=e.namespace,m=e.success,h=(0,c.default)(e,["store","detail","cluster","namespace","success"]),v=new E.default,y=""===d?{cluster:u}:{cluster:u,namespace:d},a.next=5,v.getGateway(b({},y));case 5:g=a.sent,_=g.resourceVersion,S=i.default.open(b({onOk:function(){var e=(0,o.default)(l.default.mark((function e(a){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getGateway(b({},y));case 2:(n=e.sent).resourceVersion===_?((0,f.default)(a,"metadata.resourceVersion",n.resourceVersion),r.editGateway({cluster:u,namespace:d},a).then((function(){i.default.close(S),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),m&&m()}))):(_=n.resourceVersion,s.Notify.info({content:t("GATEWAY_UPDATING_TIP")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),modal:p.default,detail:n,cluster:u,namespace:d,store:r},h));case 8:case"end":return a.stop()}}),a)})))()}},"gateways.delete":{on:function(e){var a=e.store,r=e.resource,n=e.detail,l=e.cluster,o=e.namespace,u=e.success,f=(0,c.default)(e,["store","resource","detail","cluster","namespace","success"]),p=r?t.html("DELETE_RESOURCE_TYPE_DESC_GW",{resource:r,type:t("GATEWAY_LOW")}):t("DISABLE_GATEWAY_TIP"),h=i.default.open(b({onOk:function(){a.deleteGateway({cluster:l,namespace:o,isOld:(0,d.default)(n.createTime)}).then((function(){i.default.close(h),s.Notify.success({content:t("DISABLE_SUCCESSFUL")}),u&&u()}))},store:a,modal:m.default,title:t("DISABLE_GATEWAY"),desc:p,type:"GATEWAY",resource:r,cluster:l,namespace:o},f))}},"gateways.update":{on:function(e){var a=e.store,r=e.detail,n=e.cluster,l=e.namespace,o=e.success,u=(0,c.default)(e,["store","detail","cluster","namespace","success"]),f=i.default.open(b({onOk:function(){a.updateGateway({cluster:n,namespace:l,gatewayName:r.metadata.name},r).then((function(){i.default.close(f),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),o&&o()}))},modal:v.default,detail:r,store:a,cluster:n,namespace:l},u))}},"gateways.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,f=(0,c.default)(e,["store","success","rowKey"]),d=r.list,p=d.data,h=d.selectedRowKeys,v=p.filter((function(e){return h.includes(e[u])})).map((function(e){return{name:e.name,namespace:e.namespace}})),E=v.map((function(e){return e.name})),y=i.default.open(b({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],p.forEach((function(e){if(v.find((function(t){return t.name===e.name&&t.namespace===e.namespace}))){var t=e.name.split("kubesphere-router-")[1],n="kubesphere-system"===t?"":t,l=e.cluster;a.push(r.deleteGateway({namespace:n,cluster:l}))}})),e.next=4,Promise.all(a);case 4:i.default.close(y),s.Notify.success({content:t("DELETE_SUCCESSFUL")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:E.join(", "),modal:m.default,title:1===E.length?t("DISABLE_GATEWAY"):t("DISABLE_MULTIPLE_GATEWAYS"),store:r},f))}}};a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s,i,f=n(r(109)),d=n(r(91)),p=n(r(12)),m=n(r(13)),h=n(r(135)),v=n(r(19)),E=n(r(20)),y=n(r(18)),b=n(r(74)),g=(n(r(92)),n(r(16))),_=n(r(73)),S=n(r(32)),O=n(r(0)),C=n(r(1)),T=r(25),R=n(r(274)),D=n(r(786)),k=n(r(991)),N=r(58),P=r(5),I=r(70),w=r(2051),M=n(r(2052));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,E.default)(this,a)}}var j=(0,I.observer)((i=s=function(e){(0,v.default)(r,e);var a=A(r);function r(e){var n;return(0,p.default)(this,r),n=a.call(this,e),(0,d.default)(n,"template",u,(0,h.default)(n)),(0,d.default)(n,"options",c,(0,h.default)(n)),n.getTypeOptions=function(){return[{label:"NodePort",value:"NodePort"},{label:"LoadBalancer",value:"LoadBalancer"}]},n.initAnnotations=function(){var e=(0,g.default)(n.template,"spec.service.annotations"),t=(0,g.default)(n.template,"spec.service.type"),a=(0,g.default)(n.template,"metadata.annotations['kubesphere.io/annotations']");(0,S.default)(e)&&"LoadBalancer"===t&&"QingCloud Kubernetes Engine"===a&&(0,_.default)(n.template,"spec.service.annotations",globals.config.loadBalancerDefaultAnnotations)},n.handleOk=function(){var e=n.props.onOk,t=n.state.isChecked;(0,_.default)(n.template,'spec.deployment.annotations["servicemesh.kubesphere.io/enabled"]',t?"true":"false"),n.form.current.validate((function(){e(n.template)}))},n.handleTypeChange=function(e){var t=(0,g.default)(n.template,"spec.service.annotations",{});"LoadBalancer"===e?((0,_.default)(n.template,"spec.service.annotations",(0,S.default)(t)?globals.config.loadBalancerDefaultAnnotations:t),(0,_.default)(n.template,"metadata.annotations['kubesphere.io/annotations']","QingCloud Kubernetes Engine")):((0,_.default)(n.template,"spec.service.annotations",{}),(0,_.default)(n.template,"metadata.annotations['kubesphere.io/annotations']","")),n.setState({type:e})},n.providerOptionRenderer=function(e){return O.default.createElement(O.default.Fragment,null,O.default.createElement(T.Icon,{className:"margin-r8",name:e.icon,type:"light",size:20}),e.label)},n.handleAnnotations=function(e){n.options=Object.keys(w.CLUSTER_PROVIDERS_ANNOTATIONS[e]),"QingCloud Kubernetes Engine"===e?n.setAnnotations(globals.config.loadBalancerDefaultAnnotations):n.setAnnotations({})},n.setAnnotations=function(e){(0,_.default)(n.template,"spec.service.annotations",e),n.forceUpdate()},n.renderLoadBalancerSupport=function(){var e=[].concat((0,f.default)(N.CLUSTER_PROVIDERS),[{label:"OpenELB",value:"OpenELB",icon:"kubernetes"}]);return O.default.createElement("div",{className:M.default.loadBalancer},O.default.createElement(T.Form.Item,{label:t("LOAD_BALANCER_PROVIDER")},O.default.createElement(T.Select,{options:e,placeholder:" ",optionRenderer:n.providerOptionRenderer,onChange:n.handleAnnotations,name:"metadata.annotations['kubesphere.io/annotations']"})))},n.handleToggleChange=function(e){n.setState({isChecked:e})},n.renderTitle=function(){return O.default.createElement("div",{className:M.default.modalTitle},O.default.createElement(T.Icon,{name:"loadbalancer",size:32}),O.default.createElement("div",{className:M.default.modalTitleContent},O.default.createElement("div",null,t("ENABLE_GATEWAY")),O.default.createElement("p",null," ",t("ENABLE_GATEWAY_DESC"))))},n.handleConfigError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({configError:e})},n.form=O.default.createRef(),n.state={isChecked:JSON.parse((0,g.default)(n.template,'spec.deployment.annotations["servicemesh.kubesphere.io/enabled"]',!1)),configError:""},n}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.initAnnotations()}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.cluster,l=e.isSubmitting,o=this.state,u=o.isChecked,c=o.configError;return O.default.createElement(R.default,{width:960,title:this.renderTitle(),onCancel:r,visible:a,bodyClassName:M.default.modalBody,headerClassName:M.default.modalHead,closable:!1,hideFooter:!0},O.default.createElement("div",{className:M.default.body},O.default.createElement("div",{className:M.default.wrapper},O.default.createElement(T.Form,{ref:this.form,data:this.template},O.default.createElement(T.Form.Item,{label:t("ACCESS_MODE"),className:M.default.types},O.default.createElement(T.RadioGroup,{name:"spec.service.type",mode:"button",buttonWidth:155,onChange:this.handleTypeChange,size:"small"},O.default.createElement(T.RadioButton,{value:"NodePort"},"NodePort"),O.default.createElement(T.RadioButton,{value:"LoadBalancer"},"LoadBalancer"))),O.default.createElement("div",{className:M.default.content},globals.app.hasClusterModule(n,"servicemesh")&&O.default.createElement("div",{className:M.default.wrapperContent},O.default.createElement("div",{className:M.default.toggle},O.default.createElement(T.Toggle,{checked:u,onChange:this.handleToggleChange}),t("TRACING")),O.default.createElement("div",{className:M.default.toggleTip},t.html("GATEWAY_TRACING_TIP"))),"LoadBalancer"===(0,g.default)(this.template,"spec.service.type")&&O.default.createElement(O.default.Fragment,null,this.renderLoadBalancerSupport(),O.default.createElement("div",{className:M.default.wrapperContent},O.default.createElement(T.Form.Item,{label:t("ANNOTATION_PL")},O.default.createElement(k.default,{controlled:!0,options:(0,P.toJS)(this.options),className:M.default.objectBg,name:"spec.service.annotations",addText:t("ADD")})))),O.default.createElement("div",{className:M.default.wrapperContent},O.default.createElement(T.Form.Item,{label:t("CONFIGURATION_OPTIONS")},O.default.createElement(D.default,{className:M.default.objectBg,name:"spec.controller.config",addText:t("ADD"),onError:this.handleConfigError}))))))),O.default.createElement("div",{className:M.default.footer},O.default.createElement(T.Button,{onClick:r,loading:l,disabled:l},t("CANCEL")),O.default.createElement(T.Button,{type:"control",onClick:this.handleOk,loading:l,disabled:l||""!==c},t("OK"))))}}]),r}(O.default.Component),s.propTypes={template:C.default.object,visible:C.default.bool,onOk:C.default.func,onCancel:C.default.func,isSubmitting:C.default.bool},s.defaultProps={template:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},o=i,u=(0,b.default)(o.prototype,"template",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.detail||{}}}),c=(0,b.default)(o.prototype,"options",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=o))||l;a.default=j},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLUSTER_PROVIDERS_ANNOTATIONS=void 0;var r={"Aliyun ACK":{"service.beta.kubernetes.io/alibaba-cloud-loadbalancer-address-type":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-charge-type":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-id":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-spec\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-master-zoneid\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-slave-zoneid\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-force-override-listeners\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-bandwidth\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-vswitch-id\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-additional-resource-tags\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-ip-version\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-delete-protection\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-modification-protection\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-resource-group-id\t":"","service.beta.kubernetes.io/alibaba-cloud-loadbalancer-name\t":""},"Aure Kubernetes Service":{"service.beta.kubernetes.io/azure-load-balancer-internal":"","service.beta.kubernetes.io/azure-load-balancer-internal-subnet":"","service.beta.kubernetes.io/azure-dns-label-name":"","service.beta.kubernetes.io/azure-shared-securityrule":"","service.beta.kubernetes.io/azure-load-balancer-resource-group":"","service.beta.kubernetes.io/azure-allowed-service-tags":"","service.beta.kubernetes.io/azure-load-balancer-tcp-idle-timeout":"","service.beta.kubernetes.io/azure-load-balancer-disable-tcp-reset":""},"Huawei Cloud CCE":{"kubernetes.io/elb.class":"","kubernetes.io/session-affinity-mode":"","kubernetes.io/elb.id":"","kubernetes.io/elb.subnet-id":""},"Amazon EKS":{"service.beta.kubernetes.io/load-balancer-source-ranges":"","service.beta.kubernetes.io/aws-load-balancer-type\t":"","service.beta.kubernetes.io/aws-load-balancer-nlb-target-type":"","service.beta.kubernetes.io/aws-load-balancer-name\t":"","service.beta.kubernetes.io/aws-load-balancer-internal":"","service.beta.kubernetes.io/aws-load-balancer-scheme":"","service.beta.kubernetes.io/aws-load-balancer-proxy-protocol":"","service.beta.kubernetes.io/aws-load-balancer-ip-address-type":"","service.beta.kubernetes.io/aws-load-balancer-access-log-enabled":"","service.beta.kubernetes.io/aws-load-balancer-access-log-s3-bucket-name":"","service.beta.kubernetes.io/aws-load-balancer-access-log-s3-bucket-prefix":"","service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled":"","service.beta.kubernetes.io/aws-load-balancer-ssl-cert":"","service.beta.kubernetes.io/aws-load-balancer-ssl-ports":"","service.beta.kubernetes.io/aws-load-balancer-ssl-negotiation-policy":"","service.beta.kubernetes.io/aws-load-balancer-backend-protocol":"","service.beta.kubernetes.io/aws-load-balancer-additional-resource-tags":"","service.beta.kubernetes.io/aws-load-balancer-healthcheck-healthy-threshold":"","service.beta.kubernetes.io/aws-load-balancer-healthcheck-unhealthy-threshold":"","service.beta.kubernetes.io/aws-load-balancer-healthcheck-timeout":"","service.beta.kubernetes.io/aws-load-balancer-healthcheck-interval":"","service.beta.kubernetes.io/aws-load-balancer-healthcheck-protocol":"","service.beta.kubernetes.io/aws-load-balancer-healthcheck-port\t":"","service.beta.kubernetes.io/aws-load-balancer-healthcheck-path":"","service.beta.kubernetes.io/aws-load-balancer-eip-allocations":"","service.beta.kubernetes.io/aws-load-balancer-private-ipv4-addresses\t":"","service.beta.kubernetes.io/aws-load-balancer-target-group-attributes":"","service.beta.kubernetes.io/aws-load-balancer-subnets":"","service.beta.kubernetes.io/aws-load-balancer-alpn-policy":"","service.beta.kubernetes.io/aws-load-balancer-target-node-labels":""},"Google Kubernetes Engine":{"cloud.google.com/network-tier":""},"QingCloud Kubernetes Engine":{"service.beta.kubernetes.io/qingcloud-load-balancer-eip-ids":"","service.beta.kubernetes.io/qingcloud-load-balancer-type":"0"},"Tencent Kubernetes Engine":{"service.kubernetes.io/loadbalance-id":"","service.kubernetes.io/qcloud-loadbalancer-internal-subnetid":"","service.kubernetes.io/tke-existed-lbid":"","service.kubernetes.io/local-svc-only-bind-node-with-pod":"","service.cloud.tencent.com/local-svc-weighted-balance":"","service.kubernetes.io/qcloud-loadbalancer-backends-label":"","service.cloud.tencent.com/direct-access":"","service.cloud.tencent.com/tke-service-config":"","service.cloud.tencent.com/tke-service-config-auto":"","service.kubernetes.io/loadbalance-nat-ipv6":"","service.kubernetes.io/loadbalance-type":"","service.cloud.tencent.com/specify-protocol":"","service.kubernetes.io/service.extensiveParameters":"","service.cloud.tencent.com/enable-grace-shutdown":"","kubernetes.io/service.internetChargeType":"","kubernetes.io/service.internetMaxBandwidthOut":""},OpenELB:{"lb.kubesphere.io/v1alpha1":"","protocol.openelb.kubesphere.io/v1alpha1":"","eip.openelb.kubesphere.io/v1alpha2":""}};t.CLUSTER_PROVIDERS_ANNOTATIONS=r},function(e,t,a){e.exports={modalBody:"_1W8ICRFudzizrwjjlAcLB5",body:"_2ynZ9Qv5UBx4fdFF94iS8l",title:"_1KSWFSm2_S45PYbuv-ylkc",wrapper:"_3Xw8W1pcplCVMxZGuPXD1h",types:"_3hcGivEGhw7kKkrWaSIwbh",content:"_3kJmDSOTlGJNzVC74giSdM",wrapperContent:"_31NltraBC15DWZFVQw0FII",toggle:"_30PuUvVRi3WL3hUQMzYBKi",toggleTip:"_2Tpg7-yEO4iYJmla3rrTQH",modalHead:"_1MQmwepBQ4o4vIt7Sofj",modalTitle:"_3_hCNks3aVEgLmZjWCu90Y",modalTitleContent:"_1b_AX358BmOPnGnyYH8thr",footer:"_2ypYyRW9Ofzx9BYHt_EBbh",objectBg:"gz6zaUnJJSaQ6LBjd6P4M",loadBalancer:"_2URqPcgtq6_w6kQXfaGwvz",lbB:"GyNUXQU2RPwnkNxkeubav"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(274)),v=r(25),E=r(70),y=n(r(2054));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var g=(0,E.observer)((u=o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleOk=function(){var t=e.props;(0,t.onOk)(t.detail)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(h.default,{width:600,onCancel:r,visible:a,closable:!1,onOk:this.handleOk,footerClassName:y.default.footer,bodyClassName:y.default.modalBody,hideHeader:!0},p.default.createElement("div",{className:y.default.body},p.default.createElement("div",{className:y.default.title},p.default.createElement(v.Icon,{name:"information",type:"light",size:20}),p.default.createElement("strong",null,t("UPDATED_GATEWAY_TITLE"))),p.default.createElement("div",{className:y.default.content},t("UPDATED_GATEWAY_DESC"))))}}]),r}(p.default.Component),o.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={detail:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=g},function(e,t,a){e.exports={modalBody:"_2J_VWsfuSeyfjEPyWoXEnM",title:"ky2jKIotIQKZRDn6osazT",content:"_3LmHELJYHg20z0wgQYhqPr",footer:"_1PAbTr7xLaBxt4wQGLbfF9"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(16)),i=r(25),f=n(r(274)),d=n(r(760));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var m={"group.user.remove":{on:function(e){var a,r=e.store,n=e.detail,m=e.workspace,h=e.success,v=(0,c.default)(e,["store","detail","workspace","success"]),E=f.default.open(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({onOk:(a=(0,o.default)(l.default.mark((function e(){var a,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getGroupBinding({user:n.name,group:n.group},{workspace:m});case 2:a=e.sent,o=(0,s.default)(a.items[0],"metadata.name"),r.deleteGroupBinding(o,{workspace:m}).then((function(){f.default.close(E),i.Notify.success({content:t("DELETE_SUCCESSFUL")}),h&&h()}));case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),modal:d.default,title:t("REMOVE_MEMBER"),desc:t.html("REMOVE_MEMBER_TIP",{resource:n.name}),resource:n.name,store:r},v))}}};a.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(56)),u=r(5),c=r(25),s=n(r(274)),i=n(r(766)),f=n(r(2057)),d=n(r(733)),p=n(r(822)),m=n(r(2059)),h=n(r(16)),v=n(r(32)),E=n(r(23)),y=n(r(73));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _=function(e,t){var a=(0,h.default)(e,"spec.config.environment");return(0,E.default)(a)&&(a=a.filter((function(e){return t(e)}))),a},S={"imagebuilder.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,u=e.success,f=(0,o.default)(e,["store","cluster","namespace","module","success"]),h=d.default[l]({namespace:n}),E=s.default.open(g({onOk:function(e){if(e){var o=_(e,(function(e){return!(0,v.default)(e)}));(0,y.default)(e,"spec.config.environment",o),a.create(e,{cluster:r,namespace:n}).then((function(){s.default.close(E),c.Notify.success({content:t("CREATE_SUCCESSFUL")}),u&&u(),p.default.delete("".concat(l,"_create_form"))}))}},module:l,cluster:r,namespace:n,name:"Image Builder",formTemplate:h,steps:m.default,modal:i.default,noCodeEdit:!0,store:a},f))}},"imagebuilder.rerun":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=(0,o.default)(e,["store","detail","success"]),l=s.default.open(g({onOk:function(e){var n=_(e,(function(e){return!(0,v.default)(e)}));(0,y.default)(e,"spec.config.environment",n),t.updateBuilder(e,a).then((function(){s.default.close(l),r&&r()}))},detail:(0,u.toJS)(a._originData),modal:f.default,cluster:a.cluster,namespace:a.namespace,store:t},n))}}};a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=n(r(16)),p=n(r(73)),m=r(25),h=n(r(274)),v=n(r(997)),E=n(r(1079)),y=n(r(2058));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=b(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).handleOk=function(){var e=n.props,t=e.onOk,a=e.detail;a&&((0,d.default)(a,"metadata.annotations['devops.kubesphere.io/donotautoscale']")&&(0,p.default)(a,"metadata.annotations['devops.kubesphere.io/donotautoscale']","true"),n.content.current.validate((function(){t(a)})))},n.renderEnableUpdate=function(){var e=n.props.detail;return(0,d.default)(e,"metadata.annotations.serviceName")?i.default.createElement("div",{className:y.default.checkboxCard},i.default.createElement("label",null,i.default.createElement(m.Form.Item,null,i.default.createElement(m.Checkbox,{name:"isUpdateWorkload",defaultValue:!0},i.default.createElement("span",{name:!0,className:y.default.title},t("S2I_UPDATE_WORKLOAD"))))),i.default.createElement("p",{className:y.default.desc},t("S2I_UPDATA_WORKLOAD_DESC"))):null},n.form=i.default.createRef(),n.content=i.default.createRef(),n}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.cluster,o=e.detail,u=e.namespace,c=(0,d.default)(o,"spec.config.isBinaryURL");return i.default.createElement(h.default.Form,{formRef:this.form,width:691,title:t("RUN"),icon:"cdn",onOk:this.handleOk,okText:t("RUN"),onCancel:n,visible:a,data:o,isSubmitting:r},c?i.default.createElement(E.default,{formTemplate:o,formRef:this.content,cluster:l,namespace:u,mode:"edit"}):i.default.createElement(v.default,{formTemplate:o,formRef:this.content,cluster:l,namespace:u,mode:"edit"}),this.renderEnableUpdate())}}]),r}(i.default.Component);a.default=g,g.propTypes={visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},g.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,t,a){e.exports={checkboxCard:"_3Y2tyGl5PEtOaHysruKVvi",title:"_3ATnnLF4a1obzO82eJmNLf",desc:"rnfyY8DMRnQvhUfZgd3IA"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(2060)),l=r(a(997)),o=[{title:"BUILD_MODE",component:n.default},{title:"BUILD_SETTINGS",component:l.default,required:!0}];t.default=o},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(49)),u=n(r(50)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(73)),h=n(r(16)),v=n(r(738)),E=n(r(1)),y=n(r(3)),b=r(25),g=n(r(823)),_=r(912),S=n(r(997)),O=n(r(1079)),C=n(r(2061));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=function(e){(0,i.default)(r,e);var a=T(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).fetchData=(0,u.default)(o.default.mark((function e(){var t,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.cluster,e.next=3,n.store.getS2iSupportLanguage({cluster:t});case 3:a=e.sent,n.setState(a);case 5:case"end":return e.stop()}}),e)}))),n.handleLanguageSelect=function(e,t){return function(){var a=n.props.steps;"b2i"===t&&((0,m.default)(a,"[1].component",O.default),(0,m.default)(n.props.formTemplate,'metadata.labels["s2i-type.kubesphere.io"]',"b2i"),(0,m.default)(n.props.formTemplate,"spec.config.isBinaryURL",!0)),"s2i"===t&&((0,m.default)(a,"[1].component",S.default),(0,m.default)(n.props.formTemplate,'metadata.labels["s2i-type.kubesphere.io"]',"s2i"),(0,v.default)(n.props.formTemplate,"spec.config.isBinaryURL")),n.context.setSteps(a),(0,m.default)(n.props.formTemplate,"metadata.annotations.languageType",e),(0,v.default)(n.props.formTemplate,"spec.config.builderImage"),n.forceUpdate()}},n.renderSupportTip=function(){if("containerd"===globals.runtime.toLowerCase())return p.default.createElement(b.Alert,{className:C.default.margin_b_10,type:"warning",message:t("CONTAINERD_RUNTIME_NOT_SUPPORT")})},n.store=new g.default,n.state={s2i:[],b2i:[]},n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,a=this.props,r=a.formTemplate,n=a.formRef,o=(0,h.default)(this.props.formTemplate,"metadata.annotations.languageType"),u=(0,h.default)(this.props.formTemplate,'metadata.labels["s2i-type.kubesphere.io"]',"s2i");return p.default.createElement(b.Form,{ref:n,data:r},this.renderSupportTip(),p.default.createElement("div",{className:C.default.header},p.default.createElement("p",null,t("IMAGE_FROM_S2I")),p.default.createElement("p",null,t("S2I_DESC"))),p.default.createElement("ul",{className:C.default.content},this.state.s2i.map((function(a){return p.default.createElement("li",{key:a,className:(0,y.default)(C.default.item,(0,l.default)({},C.default.item_select,o===a&&"s2i"===u)),onClick:e.handleLanguageSelect(a,"s2i")},p.default.createElement(b.Icon,{name:(0,_.getLanguageIcon)(a,"radio"),size:48}),p.default.createElement("p",null,t(a.toUpperCase())))}))),p.default.createElement("div",{className:C.default.header},p.default.createElement("p",null,t("IMAGE_FROM_B2I")),p.default.createElement("p",null,t("B2I_DESC"))),p.default.createElement("ul",{className:C.default.content},this.state.b2i.map((function(a){return p.default.createElement("li",{key:a,className:(0,y.default)(C.default.item,(0,l.default)({},C.default.item_select,o===a&&"b2i"===u)),onClick:e.handleLanguageSelect(a,"b2i")},p.default.createElement(b.Icon,{name:(0,_.getLanguageIcon)(a,"radio"),size:48}),p.default.createElement("p",null,t(a.toUpperCase())))}))))}}]),r}(p.default.Component);a.default=R,R.contextTypes={setSteps:E.default.func}},function(e,t,a){e.exports={header:"UF0cy-s-F7_E3xD9T-iiO",content:"_3nX5vmb5CHWXRRdJAshIoI",item_select:"_1-Jk3y0NUhvd28iE52bNEk",margin_b_10:"_3kVPnlIFTOJFynDcNQlbJX"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(0)),i=n(r(185)),f=r(25),d=n(r(274)),p=n(r(2063)),m=n(r(1103)),h=n(r(1104)),v=n(r(1105));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={"log.collection.active.switch":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),i=d.default.open(y({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.enabled,e.next=3,r.patch(r.detail,{metadata:{labels:{"logging.kubesphere.io/enabled":o?"true":"false"}}});case 3:d.default.close(i),n&&n(),f.Notify.success({content:t("UPDATE_SUCCESSFUL")});case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:d.default.Form,store:r,width:497,icon:"timed-task",title:t("CHANGE_STATUS"),children:s.default.createElement(p.default,null)},u))}},"log.collection.edit":{on:function(e){var a,r=e.store,n=e.success,p=(0,c.default)(e,["store","success"]),E={es:m.default,forward:v.default,kafka:h.default},b=r.detail.type,g=E[b]||null,_=(0,i.default)(r.detail.config),S=d.default.open(y({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(r.detail,{spec:(0,u.default)({},b,a)});case 2:d.default.close(S),n&&n(),f.Notify.success({content:t("UPDATE_SUCCESSFUL")});case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:d.default.Form,data:_,width:691,icon:"timed-task",title:t("EDIT_LOG_RECEIVER"),children:s.default.createElement(g,null),store:r},p))}}};a.default=b},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(12)),u=l(r(13)),c=l(r(19)),s=l(r(20)),i=l(r(18)),f=n(r(0)),d=r(25),p=l(r(2064));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=m(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).statusLabel=[{label:t("ENABLE"),value:1},{label:t("DISABLE"),value:0}],e}return(0,u.default)(r,[{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement("p",{className:p.default.tip},t("LOG_COLLECTION_ENABLE_TIPS")),f.default.createElement(d.Form.Item,null,f.default.createElement(d.Select,{name:"enabled",options:this.statusLabel,placeholder:t("SELECT_STATUS_TIP")})))}}]),r}(f.Component);a.default=h},function(e,t,a){e.exports={tip:"_1uuSdxXW-f_ib1niUKsZY7"}},,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(56)),u=r(5),c=r(25),s=n(r(274)),i=n(r(2071)),f=n(r(2073)),d=n(r(760));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={"member.invite":{on:function(e){var a=e.store,r=e.cluster,n=e.workspace,l=e.namespace,u=e.success,f=e.devops,d=(0,o.default)(e,["store","cluster","workspace","namespace","success","devops"]),p=s.default.open(m({onOk:function(e){a.create(e,{cluster:r,workspace:n,namespace:l,devops:f}).then((function(){s.default.close(p),c.Notify.success({content:"".concat(t("Invited Successfully"))}),u&&u()}))},modal:i.default,store:a,cluster:r,workspace:n,namespace:l,devops:f},d))}},"member.edit":{on:function(e){var a=e.store,r=e.module,n=e.detail,l=e.cluster,u=e.workspace,i=e.namespace,d=e.success,p=e.devops,h=(0,o.default)(e,["store","module","detail","cluster","workspace","namespace","success","devops"]),v=s.default.open(m({onOk:function(e){a.update(m(m(m({},n),l),{},{workspace:u,namespace:i,devops:p}),{username:n.name,roleRef:e}).then((function(){s.default.close(v),c.Notify.success({content:t("UPDATE_SUCCESSFUL")}),d&&d()}))},modal:f.default,store:a,module:r},h))}},"member.remove":{on:function(e){var a=e.store,r=e.detail,n=e.cluster,l=e.workspace,u=e.namespace,i=e.success,f=e.devops,p=(0,o.default)(e,["store","detail","cluster","workspace","namespace","success","devops"]),h=s.default.open(m({onOk:function(){a.delete(m(m({},r),{},{cluster:n,workspace:l,namespace:u,devops:f})).then((function(){s.default.close(h),c.Notify.success({content:t("DELETE_SUCCESSFUL")}),i&&i()}))},modal:d.default,title:t("REMOVE_MEMBER"),desc:t.html("REMOVE_MEMBER_TIP",{resource:r.name}),resource:r.name,store:a},p))}},"member.remove.batch":{on:function(e){var a=e.store,r=e.cluster,n=e.workspace,l=e.namespace,i=e.success,f=e.devops,p=(0,o.default)(e,["store","cluster","workspace","namespace","success","devops"]),h=(0,u.toJS)(a.list.selectedRowKeys),v=h.join(", "),E=s.default.open(m({onOk:function(){a.batchDelete({rowKeys:h,cluster:r,workspace:n,namespace:l,devops:f}).then((function(){s.default.close(E),c.Notify.success({content:t("DELETE_SUCCESSFUL")}),i&&i()}))},modal:d.default,title:1===v.split(", ").length?t("REMOVE_MEMBER"):t("REMOVE_MULTIPLE_MEMBERS"),desc:1===v.split(", ").length?t.html("REMOVE_MEMBER_TIP",{resource:v}):t.html("REMOVE_MULTIPLE_MEMBERS_TIP",{resource:v}),resource:v,store:a},p))}}};a.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(109)),s=n(r(21)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=n(r(1)),E=r(5),y=r(70),b=r(25),g=n(r(274)),_=n(r(826)),S=n(r(278)),O=n(r(2072)),C=n(r(1299));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var k=(0,y.observer)((u=o=function(e){(0,d.default)(r,e);var a=D(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.props,r=a.workspace,n=a.namespace,l=a.devops;t.userStore.fetchList(R({name:t.state.name,workspace:n||l?r:void 0},e))},t.handleSearch=function(e){t.setState({name:e},t.fetchData)},t.handleSelect=function(e,a){t.setState((function(t){var r=t.members,n=t.newMembers;return{members:[].concat((0,c.default)(r),[e]),newMembers:[].concat((0,c.default)(n),[{username:e,roleRef:a}])}}))},t.handleSubmit=function(){t.props.onOk(t.state.newMembers)},t.userStore=new S.default,t.memberStore=new S.default,t.state={members:[],newMembers:[]},t}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.cluster,r=t.workspace,n=t.namespace,l=t.devops;this.memberStore.fetchList({limit:-1,cluster:a,workspace:r,namespace:n,devops:l}).then((function(){e.setState({members:e.memberStore.list.data.map((function(e){return e.name}))})}))}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,l=a.roles,o=a.title,u=a.desc,c=a.searchPlaceholder,s=this.state.members,i=(0,E.toJS)(this.userStore.list),f=i.data,d=void 0===f?[]:f,p=i.total,m=i.page,v=i.isLoading;return h.default.createElement(g.default,{width:691,icon:"pen",onCancel:n,onOk:this.handleSubmit,visible:r,bodyClassName:C.default.modalBody,hideHeader:!0},h.default.createElement("div",{className:C.default.body},h.default.createElement("div",{className:C.default.title},h.default.createElement("div",{className:"h4"},o||t("INVITE_MEMBER")),h.default.createElement("p",null,u||t("INVITE_MEMBER_DESC"))),h.default.createElement("div",{className:C.default.content},h.default.createElement(b.InputSearch,{placeholder:c||t("INVITE_MEMBER_SEARCH_PLACEHOLDER"),onSearch:this.handleSearch}),h.default.createElement("div",{className:C.default.results},h.default.createElement(_.default,{data:d,total:p,page:m,loading:v,onFetch:this.fetchData},d.map((function(t){return h.default.createElement(O.default,{key:t.name,user:t,roles:l,selected:s.includes(t.name),onSelect:e.handleSelect})})))))))}}]),r}(h.default.Component),o.propTypes={roles:v.default.array,visible:v.default.bool,workspace:v.default.string,namespace:v.default.string,cluster:v.default.string,title:v.default.string,desc:v.default.string,searchPlaceholder:v.default.string,onOk:v.default.func,onCancel:v.default.func},o.defaultProps={roles:[],visible:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(16)),f=n(r(0)),d=n(r(1)),p=r(25),m=n(r(727)),h=n(r(1299));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleMoreMenuClick=function(t,a){var r=e.props;(0,r.onSelect)(r.user.username,a)},e}return(0,o.default)(r,[{key:"getDesc",value:function(e){var a=(0,i.default)(e,"description");return t(a)}},{key:"renderMoreMenu",value:function(){var e=this,a=this.props.roles;return f.default.createElement("div",{className:h.default.menu},f.default.createElement("p",null,t("ASSIGN_ROLE")),f.default.createElement(p.Menu,{onClick:this.handleMoreMenuClick},a.map((function(t){return f.default.createElement(p.Menu.MenuItem,{key:t.name},f.default.createElement(m.default,{className:h.default.avatar,icon:"role",iconSize:40,title:t.name,desc:e.getDesc(t),noLink:!0}))}))))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.onSelect,r=e.selected;return f.default.createElement("div",{className:h.default.item,"data-user":t.username},f.default.createElement("p",null,f.default.createElement("strong",null,t.username)),f.default.createElement("p",null,t.email),!r&&f.default.createElement(p.Dropdown,{content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},f.default.createElement(p.Button,{type:"control",icon:"add",iconType:"light",onClick:a})),r&&f.default.createElement(p.Button,{type:"flat",icon:"check",disabled:!0}))}}]),r}(f.default.Component);a.default=E,E.propTypes={user:d.default.object,roles:d.default.array,selected:d.default.bool,onSelect:d.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(16)),m=n(r(0)),h=n(r(1)),v=r(70),E=r(25),y=n(r(274)),b=n(r(2074));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,v.observer)((u=o=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).handleOk=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props.onOk,r=t.role;a(r)},e.getRoleOptions=function(){return e.props.roles.map((function(e){var a=(0,p.default)(e,"description");return{label:e.name,value:e.name,desc:t(a)}}))},e.optionRenderer=function(e){return m.default.createElement("div",{className:b.default.option},m.default.createElement("div",null,e.label),m.default.createElement("p",null,e.desc))},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=e.role;return m.default.createElement(y.default.Form,{width:691,title:t("CHANGE_ROLE"),icon:"role",onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},m.default.createElement(E.Form.Item,{label:t("ROLE"),rules:[{required:!0,message:t("SELECT_ROLE_TIP")}]},m.default.createElement(E.Select,{name:"role",optionRenderer:this.optionRenderer,options:this.getRoleOptions(),defaultValue:l})))}}]),r}(m.default.Component),o.propTypes={role:h.default.string,roles:h.default.array,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func,isSubmitting:h.default.bool},o.defaultProps={role:"",roles:[],visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=_},function(e,t,a){e.exports={option:"_2hbd_NLQpyyfSepVMs0f2Z"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(16)),i=n(r(32)),f=r(25),d=n(r(274)),p=n(r(2076)),m=n(r(2091)),h=n(r(2092)),v=n(r(2093)),E=n(r(2095)),y=n(r(760)),b=n(r(733));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={"network.policies.add":{on:function(e){var a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),l=n.namespace,o=n.module,u=n.cluster,s=d.default.open(_({modal:p.default,onOk:function(e){(0,i.default)(e)?d.default.close(s):a.create(e,{cluster:u,namespace:l}).then((function(){d.default.close(s),f.Notify.success({content:t("CREATE_SUCCESSFUL")}),r&&r()}))},formTemplate:b.default[o]({namespace:l}),store:a},n))}},"network.policies.addIpBlock":{on:function(e){var a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),l=n.namespace,o=n.module,u=n.cluster,s=d.default.open(_({modal:m.default,onOk:function(e){(0,i.default)(e)?d.default.close(s):a.create(e,{cluster:u,namespace:l}).then((function(){d.default.close(s),f.Notify.success({content:t("CREATE_SUCCESSFUL")}),r&&r()}))},formTemplate:b.default[o]({namespace:l}),store:a},n))}},"network.policies.delete":{on:function(e){var a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),l=n.namespace,o=n.cluster,u=n.ruleName,s=d.default.open(_({modal:y.default,onOk:function(){a.delete({name:u,namespace:l,cluster:o}).then((function(){d.default.close(s),f.Notify.success({content:t("DELETE_SUCCESSFUL")}),r&&r()}))},resource:u,store:a},n))}},"network.policies.addByYaml":{on:function(e){var t,a=e.store,r=(e.detail,e.success),n=(0,c.default)(e,["store","detail","success"]),u=n.cluster,i=d.default.open(_({modal:h.default,onOk:(t=(0,o.default)(l.default.mark((function e(t){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.default)(t,"metadata.namespace"),e.next=3,a.create(t,{namespace:n,cluster:u});case 3:d.default.close(i),r&&r();case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:a},n))}},"network.ippool.add":{on:function(e){var t,a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),u=n.cluster,s=d.default.open(_({modal:v.default,onOk:(t=(0,o.default)(l.default.mark((function e(t){var n,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cidrs,o=[],n.forEach((function(e){o.push(a.create({apiVersion:"network.kubesphere.io/v1alpha1",kind:"IPPool",metadata:{name:e.name,annotations:{"kubesphere.io/description":e.desc}},spec:{type:"calico",cidr:e.cidr}},{cluster:u}))})),e.next=5,Promise.all(o);case 5:d.default.close(s),r&&r();case 7:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:a},n))}},"network.ipool.assignworkspace":{on:function(e){var t,a=e.store,r=e.success,n=e.detail,u=(0,c.default)(e,["store","success","detail"]),s=d.default.open(_({modal:E.default,onOk:(t=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.patch(n,t);case 2:d.default.close(s),r&&r();case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:a,detail:n},u))}}};a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s,i,f,d=n(r(71)),p=n(r(21)),m=n(r(91)),h=n(r(12)),v=n(r(13)),E=n(r(135)),y=n(r(19)),b=n(r(20)),g=n(r(18)),_=n(r(74)),S=(n(r(92)),n(r(0))),O=r(70),C=n(r(73)),T=r(5),R=n(r(3)),D=r(25),k=n(r(274)),N=n(r(723)),P=n(r(748)),I=r(37),w=n(r(1300)),M=r(2078);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,b.default)(this,a)}}var L=(0,O.inject)("projectStore")(l=(0,O.observer)((o=function(e){(0,y.default)(r,e);var a=x(r);function r(e){var n;return(0,h.default)(this,r),n=a.call(this,e),(0,m.default)(n,"tabName",u,(0,E.default)(n)),(0,m.default)(n,"specType",c,(0,E.default)(n)),(0,m.default)(n,"specNameSpaces",s,(0,E.default)(n)),(0,m.default)(n,"specCurNameSpace",i,(0,E.default)(n)),(0,m.default)(n,"specServices",f,(0,E.default)(n)),n.handleTabChange=function(e){n.tabName=e,n.specNameSpaces=[],n.specCurNameSpace=n.props.namespace,n.specServices=[]},n.handleNameSpaceChange=function(e){var t=n.props.cluster;n.specCurNameSpace=e,n.serviceStore.fetchList({namespace:e,cluster:t,limit:-1})},n.handleNameSpaceChecked=function(e,t){var a=(0,E.default)(n),r=a.specNameSpaces,l=a.tabName,o=r.filter((function(t){return t.name===e.name})).length>0;t&&!o?(r.push({name:e.name}),n.specNameSpaces=(0,T.toJS)(r)):!t&&o&&(n.specNameSpaces=r.filter((function(t){return t.name!==e.name}))),n.psRef.current.handleValueChange("type",null,l)},n.handleServiceChange=function(e,t){var a=(0,E.default)(n),r=a.specCurNameSpace,l=a.specServices,o=a.tabName,u=l.filter((function(t){return t.name===e.name&&t.namespace===r})).length>0;t&&!u?(l.push({name:e.name,namespace:r}),n.specServices=(0,T.toJS)(l)):!t&&u&&(n.specServices=l.filter((function(t){return!(t.name===e.name&&t.namespace===r)}))),n.psRef.current.handleValueChange("type",null,o)},n.handleSave=function(){var e=(0,E.default)(n),t=e.tabName,a=e.specType,r=e.specNameSpaces,l=e.specServices,o=n.props.formTemplate,u="projects"===t?r.map((function(e){return{namespace:e}})):l.map((function(e){return{service:e}}));if(u.length){var c="egress"===a?"to":"from";(0,C.default)(o,"spec.".concat(a,"[0].").concat(c),u),(0,C.default)(o,"metadata.name","policy-".concat(c,"-").concat((0,I.generateId)()))}n.props.onOk(o)},n.psValidator=function(e,a,r){var l=(0,E.default)(n),o=l.tabName,u=l.specNameSpaces,c=l.specServices;0===("projects"===o?u.map((function(e){return{namespace:e}})):c.map((function(e){return{service:e}}))).length?r({message:t("EMPTY_RESOURCE_DESC")}):r()},n.projectStore=e.projectStore,n.serviceStore=new P.default,n.specCurNameSpace=e.namespace,n.psRef=S.default.createRef(),n}return(0,v.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.namespace,a={cluster:e.cluster,limit:-1};this.projectStore.fetchList(j({},a)),this.serviceStore.fetchList(j({namespace:t},a))}},{key:"render",value:function(){var e=this,a=this.projectStore.list,r=this.serviceStore.list,n=Object.assign({},this.props),l=this.specNameSpaces,o=this.specType,u=this.tabName,c=this.specCurNameSpace,s=this.specServices;return S.default.createElement(k.default.Form,(0,d.default)({width:600,icon:"add",title:t("ADD_ALLOWLIST_ENTRY"),closable:!0},n,{onOk:this.handleSave}),S.default.createElement(D.Form.Item,{label:t("TRAFFIC_DIRECTION"),desc:t("INTERNAL_TRAFFIC_DIRECTION_DESC"),rules:[{required:!0,message:t("SELECT_RULE_DIRECTION_TIP")}]},S.default.createElement(D.RadioGroup,{name:"direction",defaultValue:o,wrapClassName:w.default.dirCheck,onChange:function(t){e.specType=t}},S.default.createElement(D.RadioButton,{value:"egress"},S.default.createElement(D.Icon,{name:"upload",size:32}),S.default.createElement("div",null,t("EGRESS"))),S.default.createElement(D.RadioButton,{value:"ingress"},S.default.createElement(D.Icon,{name:"download",size:32}),S.default.createElement("div",null,t("INGRESS"))))),S.default.createElement(D.Form.Item,{label:t("TYPE"),rules:[{validator:this.psValidator}],ref:this.psRef},S.default.createElement(D.RadioGroup,{name:"type",mode:"button",buttonWidth:155,defaultValue:u,onChange:this.handleTabChange,size:"small",rules:[{required:!0}]},S.default.createElement(D.RadioButton,{value:"projects"},t("PROJECT")),S.default.createElement(D.RadioButton,{value:"services"},t("SERVICE")))),S.default.createElement(N.default,{className:(0,R.default)("projects"===u?"block":"hide",w.default.panel_p)},S.default.createElement("ul",{className:w.default.list},a.data.map((function(a){return S.default.createElement("li",{key:a.name},S.default.createElement(D.Checkbox,{value:a.name,checked:l.filter((function(e){return e.name===a.name})).length>0,disabled:a.isFedManaged,onChange:function(t){e.handleNameSpaceChecked(a,t)}},a.name),a.isFedManaged&&S.default.createElement(D.Tooltip,{content:t("FED_HOST_NAMESPACE_TIP")},S.default.createElement(D.Icon,{className:w.default.tip,name:"question"})))})))),S.default.createElement(N.default,{className:(0,R.default)("services"===u?"block":"hide",w.default.panel_s)},S.default.createElement("div",{className:w.default.sheader},S.default.createElement(M.ProjectSelect,{cluster:this.props.cluster,defaultValue:c,onChange:this.handleNameSpaceChange,tipMessage:t("FED_HOST_NAMESPACE_TIP")})),S.default.createElement("div",{className:w.default.sbody},S.default.createElement("ul",{className:w.default.list},r.data.map((function(t){return S.default.createElement("li",{key:t.name},S.default.createElement(D.Checkbox,{value:t.name,checked:s.filter((function(e){return e.name===t.name&&e.namespace===c})).length>0,onChange:function(a){e.handleServiceChange(t,a)}},t.name))}))))))}}]),r}(S.default.Component),u=(0,_.default)(o.prototype,"tabName",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"projects"}}),c=(0,_.default)(o.prototype,"specType",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=(0,_.default)(o.prototype,"specNameSpaces",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,_.default)(o.prototype,"specCurNameSpace",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=(0,_.default)(o.prototype,"specServices",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=o))||l)||l;a.default=L},,function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AccessModes",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"AddonsInput",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"AnnotationsInput",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ArrayInput",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"BoolSelect",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"BoxSelect",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ContainerPort",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ContainerServicePort",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ObjectInput",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"PropertiesInput",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"EnvironmentInput",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"ReplicasInput",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"MountInput",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"NumberInput",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"ResourceLimit",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"Upload",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"InputPassword",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"TrafficSlider",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"ServicePort",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"RulePath",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"UrlInput",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"SchemeInput",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"ProjectSelect",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(t,"StringInput",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(t,"SecretSelect",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"RoleSelect",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(t,"UnitWrapper",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"BoxInput",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"UnitSlider",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"TagInput",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"TailIUnitInput",{enumerable:!0,get:function(){return M.default}});var n=r(a(1106)),l=r(a(994)),o=r(a(991)),u=r(a(761)),c=r(a(1244)),s=r(a(1301)),i=r(a(1219)),f=r(a(1220)),d=r(a(774)),p=r(a(786)),m=r(a(1222)),h=r(a(1302)),v=r(a(905)),E=r(a(740)),y=r(a(872)),b=r(a(2082)),g=r(a(952)),_=r(a(1107)),S=r(a(1078)),O=r(a(1063)),C=r(a(1012)),T=r(a(1303)),R=r(a(935)),D=r(a(1073)),k=r(a(1248)),N=r(a(1108)),P=r(a(1185)),I=r(a(913)),w=r(a(1069)),M=r(a(1304))},function(e,t,a){e.exports={accessModeWrapper:"t3ac6iAwz0VNleKctOM3q",accessMode:"_2ntH9Ni8zzlXvi9v2KCUYd"}},,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=n(r(3)),p=r(25),m=n(r(878)),h=n(r(2083));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=v(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).uploaderProps={name:"file",action:"/images/upload",accept:"image/*",beforeUpload:function(e){return!(e.size>2097152)||(p.Notify.error(t("FILE_OVERSIZED_TIP")),!1)},onSuccess:function(t){t&&e.onChange(t.path)}},n}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.value,r=e.placeholder,n=e.defaultLogo;return i.default.createElement(p.Columns,{className:(0,d.default)("is-variable is-2",t)},i.default.createElement(p.Column,{className:"is-narrow"},i.default.createElement("img",{className:(0,d.default)(h.default.image,"upload-preview"),src:a||n})),i.default.createElement(p.Column,null,i.default.createElement(m.default,this.uploaderProps,i.default.createElement("div",{className:h.default.upload},i.default.createElement(p.Icon,{size:32,name:"upload"}),i.default.createElement("p",null,r)))))}}]),r}(i.default.Component);a.default=E,E.propTypes={className:f.default.string,defaultLogo:f.default.string,placeholder:f.default.string,value:f.default.string,onChange:f.default.func},E.defaultProps={className:"",value:"",onChange:function(){}}},function(e,t,a){e.exports={image:"_167OKUS_EKBqwDQxcIx-4e",upload:"_2t1CYrv42g1fxOKAN8Cxrv"}},,,function(e,t,a){e.exports={container:"_2VDZ-7eQWd8zMV87f6SbU-",select:"_1njJEaKU6jyyl9YDFHgWWW"}},function(e,t,a){e.exports={option:"_1Iz4ohvzuXgnhL83dbwRxn"}},,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(71)),u=n(r(21)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(73)),v=n(r(32)),E=r(25),y=n(r(274)),b=n(r(748)),g=r(37),_=r(58),S=n(r(1300));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,m.inject)("projectStore")(l=(0,m.observer)(l=function(e){(0,i.default)(r,e);var a=T(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).setCIDR=function(e){var a=C(C({},t.state.cidr),e);t.setState({cidr:a})},t.addPortRule=function(){var e=t.state.portRules;e.push({port:{value:""},protocol:"TCP"}),t.setState(e)},t.delPortRule=function(e){var a=t.state.portRules;a.length>1&&(a.splice(e,1),t.setState(a))},t.modifyRule=function(e,a){var r=t.state.portRules,n=r[e];r[e]=C(C({},n),a),t.setState(r)},t.validCIDR=function(e){var a=C({},t.state.cidr),r=a.ip,n=a.mask;return e&&""===r.value||(r.valid=_.PATTERN_IP.test(r.value)),e&&""===n.value||(n.valid=_.PATTERN_IP_MASK.test(n.value)),t.setState({cidr:a}),!!r.valid&&!!n.valid},t.isValidPort=function(e){return""!==e&&/^(?![0])(\d{0,5})$/.test(e)&&e<65536},t.validPort=function(){var e=t.state.portRules.slice(),a=!0;return e.forEach((function(e){e.port.valid=(0,v.default)(e.port.value)||t.isValidPort(e.port.value),e.port.valid||(a=!1)})),t.setState({portRules:e}),a},t.validSpecType=function(){var e=t.state.specType;return""===e&&t.setState({specType:!1}),""!==e},t.validFormData=function(){return t.validSpecType()&&t.validCIDR()&&t.validPort()},t.handleSave=function(){var e=t.state,a=e.specType,r=e.cidr,n=e.portRules;if(t.validFormData()){var l=t.props.formTemplate,o=n.filter((function(e){return!(0,v.default)(e.port.value)})).map((function(e){return{port:+e.port.value,protocol:e.protocol}})),u={ipBlock:{cidr:"".concat(r.ip.value,"/").concat(r.mask.value)}},c="egress"===a?"to":"from";(0,h.default)(l,"spec.".concat(a,"[0].ports"),o),(0,h.default)(l,"spec.".concat(a,"[0].").concat(c,"[0]"),u),(0,h.default)(l,"metadata.name","policy-".concat(c,"-").concat((0,g.generateId)())),t.props.onOk(l)}},t.projectStore=e.projectStore,t.serviceStore=new b.default,t.state={specType:"",specNameSpaces:[],specServices:[],specCurNameSpace:e.namespace,protocols:[{value:"TCP",label:"TCP"},{value:"UDP",label:"UDP"},{value:"SCTP",label:"SCTP"}],cidr:{ip:{value:""},mask:{value:""}},portRules:[{port:{value:""},protocol:"TCP"}]},t}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=Object.assign({},this.props),r=this.state,n=r.specType,l=r.protocols,u=r.portRules,c=r.cidr,s=!1;return p.default.createElement(y.default.Form,(0,o.default)({width:600,icon:"add",title:t("ADD_ALLOWLIST_ENTRY"),closable:!0},a,{onOk:this.handleSave}),p.default.createElement(E.Form.Item,{label:t("TRAFFIC_DIRECTION"),desc:n?t("EXTERNAL_TRAFFIC_DIRECTION_DESC"):p.default.createElement("span",{className:S.default.errColor},t("SELECT_RULE_DIRECTION_TIP"))},p.default.createElement(E.RadioGroup,{size:"large",name:"direction",defaultValue:n,wrapClassName:S.default.dirCheck,onChange:function(t){return e.setState({specType:t})}},p.default.createElement(E.RadioButton,{value:"egress"},p.default.createElement(E.Icon,{name:"upload",size:32}),p.default.createElement("div",null,t("EGRESS"))),p.default.createElement(E.RadioButton,{value:"ingress"},p.default.createElement(E.Icon,{name:"download",size:32}),p.default.createElement("div",null,t("INGRESS"))))),p.default.createElement(E.Form.Item,{label:t("NETWORK_SEGMENT")},p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:S.default.cidr},p.default.createElement(E.Input,{name:"cidr-ip",className:!1===c.ip.valid?S.default.error:"",defaultValue:c.ip.value,placeholder:t("NETWORK_SEGMENT_EXAMPLE"),onChange:function(t,a){return e.setCIDR({ip:{value:a}})},onBlur:this.validCIDR}),p.default.createElement("span",null,"/"),p.default.createElement(E.Input,{name:"cidr-mask",className:!1===c.mask.valid?S.default.error:"",defaultValue:c.mask.value,placeholder:"24",onChange:function(t,a){return e.setCIDR({mask:{value:a}})},onBlur:this.validCIDR})),p.default.createElement("div",{className:S.default[!1===c.ip.valid||!1===c.mask.valid?"errColor":"cidr_desc"]},!1===c.ip.valid||!1===c.mask.valid?t("ENTER_VALID_SEGMENT_DESC"):t("NETWORK_SEGMENT_DESC")))),p.default.createElement("div",{className:S.default.title},t("PORT_PL")),u.map((function(a,r){var n=a.port,o=a.protocol;return!1===n.valid&&(s=!0),p.default.createElement("div",{className:S.default.rulerow,key:"".concat(r)},p.default.createElement("div",null,p.default.createElement(E.Select,{name:"proto",value:o,options:l,onChange:function(t){return e.modifyRule(r,{protocol:t})}}),p.default.createElement(E.Form.Item,null,p.default.createElement(E.Input,{placeholder:t("PORT_EXAMPLE"),className:!1===n.valid?S.default.error:"",value:n.value,onBlur:e.validPort,onChange:function(t){return e.modifyRule(r,{port:{value:t}})}}))),p.default.createElement("div",null,p.default.createElement(E.Icon,{changeable:!0,clickable:!0,name:"trash",onClick:function(){e.delPortRule(r)}})))})),p.default.createElement("div",{className:S.default.addBtn},p.default.createElement(E.Button,{onClick:this.addPortRule},t("ADD"))),s&&p.default.createElement("div",{className:S.default.errColor},t("ENTER_VALID_PORT_NUMBER_DESC")))}}]),r}(p.default.Component))||l)||l;a.default=R},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=n(r(68)),p=n(r(274)),m=n(r(870));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.props,a=e.onOk,r=e.onCancel,n=t.editor.current.getData();(0,d.default)(n)?r():a(n)},t.state={value:{kind:"NetworkPolicy",apiVersion:"networking.k8s.io/v1",metadata:{name:"",namespace:""},spec:{podSelector:{}}}},t.editor=i.default.createRef(),t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting;return i.default.createElement(p.default,{icon:"firewall",title:t("CREATE_NETWORK_POLICY_TCAP"),description:t("CREATE_NETWORK_POLICY_DESC"),onOk:this.handleOk,onCancel:r,okText:t("OK"),visible:a,isSubmitting:n,width:960},i.default.createElement(m.default,{ref:this.editor,value:this.state.value}))}}]),r}(i.default.Component);a.default=v,v.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool,readOnly:f.default.bool},v.defaultProps={visible:!1,isSubmitting:!1,readOnly:!1,detail:{},onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(650)),m=l(r(73)),h=r(25),v=l(r(274)),E=l(r(740)),y=l(r(774)),b=r(58),g=r(37),_=r(1306),S=l(r(2094));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var C=function(e){(0,s.default)(r,e);var a=O(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={count:1,ip:"",mask:24,cidrs:[],formData:{}},e.random=(0,g.generateId)(4),e.handleIPChange=function(t){e.setState({ip:t},e.handleCIDRsChange)},e.handleMaskChange=function(t){e.setState({mask:t},e.handleCIDRsChange)},e.handleCountChange=function(t){e.setState({count:t},e.handleCIDRsChange)},e.handleCIDRsChange=(0,p.default)((function(){var t=e.state,a=t.ip,r=t.mask,n=t.count,l=t.formData,o=[];if(b.PATTERN_IP.test(a)&&r&&n>0)for(var u=0,c=new _.Netmask("".concat(a,"/").concat(r)),s=function(){var e=c.toString();o.every((function(t){return t.cidr!==e}))&&o.push({cidr:e}),u+=1,c=c.next()};u<n;)s();(0,m.default)(l,"cidrs",o),e.setState({cidrs:o,formData:l})}),200),e.validator=function(e,a,r){return a&&a.cidr?a.name?void r():r({message:t("NAME_EMPTY_DESC"),field:e.field}):r({message:t("ENTER_NETWORK_SEGMENT_TIP"),field:e.field})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this,a=this.state,r=a.count,n=a.cidrs,l=a.formData,u=Object.assign({},this.props);return d.default.createElement(v.default.Form,(0,o.default)({title:t("CREATE_POD_IP_POOL"),width:960,data:l},u),d.default.createElement(h.Form.Item,{label:t("IP_ADDRESS"),rules:[{required:!0,message:t("IP_ADDRESS_EMPTY_DESC")},{pattern:b.PATTERN_IP,message:t("INVALID_IP_DESC")}]},d.default.createElement(h.Input,{name:"ip",onChange:this.handleIPChange})),d.default.createElement(h.Form.Item,{label:t("MASK"),rules:[{required:!0,message:t("MASK_TIP")}]},d.default.createElement(E.default,{name:"mask",defaultValue:24,integer:!0,min:0,max:31,onChange:this.handleMaskChange})),d.default.createElement(h.Form.Item,{label:t("QUANTITY"),desc:t("IP_POOL_CREATE_COUNT_DESC"),rules:[{required:!0,message:t("IP_POOL_NUM_TIP")}]},d.default.createElement(E.default,{name:"count",defaultValue:r,integer:!0,min:1,max:10,onChange:this.handleCountChange})),n.map((function(a,r){return d.default.createElement(h.Form.Item,{label:0===r?t("IP_POOL_CREATE_DESC"):"",key:r,rules:[{validator:e.validator}]},d.default.createElement(y.default,{className:S.default.item,name:"cidrs[".concat(r,"]")},d.default.createElement(h.Input,{name:"cidr",placeholder:t("NETWORK_SEGMENT_SCAP")}),d.default.createElement(h.Input,{name:"name",defaultValue:"ippool-".concat(e.random,"-").concat(r),placeholder:t("NAME")}),d.default.createElement(h.Input,{name:"desc",placeholder:t("DESCRIPTION")})))})))}}]),r}(d.Component);a.default=C},function(e,t,a){e.exports={item:"_3uoK9qDanFKfCuNoWPhdqh"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c,s=n(r(71)),i=n(r(109)),f=n(r(49)),d=n(r(50)),p=n(r(12)),m=n(r(13)),h=n(r(19)),v=n(r(20)),E=n(r(18)),y=l(r(0)),b=n(r(1)),g=r(5),_=r(70),S=n(r(191)),O=n(r(16)),C=n(r(73)),T=n(r(185)),R=r(25),D=n(r(274)),k=n(r(770));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var P="",I=(0,_.observer)((c=u=function(e){(0,h.default)(r,e);var a=N(r);function r(e){var n;return(0,p.default)(this,r),(n=a.call(this,e)).fetchWorkspaces=function(){var e=(0,d.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.workspaceStore.fetchList(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.workspaceValidator=function(e,a,r){if(!a)return r();var l=n.props.detail,o=(0,O.default)(l,"status.allocations",0)>0,u=l.workspace;return o&&u&&a!==u?r({message:t("IPPOOL_ASSIGN_WORKSPACE_CHANGE_WARNING"),field:e.field}):o&&a!==P?r({message:t("IPPOOL_ASSIGN_WORKSPACE_ALLOCATED_WARNING"),field:e.field}):void r()},n.handleSubmit=function(e){var t=n.props.onOk,a={},r=(0,O.default)(e,"metadata.labels['kubesphere.io/workspace']");r===P?((0,C.default)(a,"metadata.labels['kubesphere.io/workspace']",null),(0,C.default)(a,"metadata.labels['ippool.network.kubesphere.io/default']","")):((0,C.default)(a,"metadata.labels['kubesphere.io/workspace']",r||null),(0,C.default)(a,"metadata.labels['ippool.network.kubesphere.io/default']",null)),t(a)},n.formTemplate=(0,T.default)((0,g.toJS)(e.detail._originData)),n.workspaceStore=new k.default,n}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.props.detail.isDefault&&(0,C.default)(this.formTemplate,"metadata.labels['kubesphere.io/workspace']",P),this.workspaceStore.fetchList({cluster:this.props.cluster})}},{key:"getWorkspaces",value:function(){return[{label:t("ALL"),value:P}].concat((0,i.default)(this.workspaceStore.list.data.map((function(e){return{label:e.name,value:e.name}}))))}},{key:"render",value:function(){var e=this.props.detail,a=(0,O.default)(e,"status.allocations",0)>0,r=e.workspace;return y.default.createElement(D.default.Form,(0,s.default)({title:t("ASSIGN_WORKSPACE"),icon:"enterprise",width:691,data:this.formTemplate},this.props,{onOk:this.handleSubmit}),a&&r?y.default.createElement(R.Alert,{className:"margin-b12",type:"warning",message:t("IPPOOL_ASSIGN_WORKSPACE_ALLOCATED_WARNING")}):y.default.createElement(R.Alert,{className:"margin-b12",type:"info",message:t("IPPOOL_ASSIGN_WORKSPACE_DESC")}),y.default.createElement(R.Form.Item,{label:t("WORKSPACE"),desc:t("SELECT_WORKSPACE_DESC"),rules:[{validator:this.workspaceValidator}]},y.default.createElement(R.Select,{name:"metadata.labels['kubesphere.io/workspace']",options:this.getWorkspaces(),pagination:(0,S.default)(this.workspaceStore.list,["page","total","limit"]),isLoading:this.workspaceStore.list.isLoading,onFetch:this.fetchWorkspaces,searchable:!0,clearable:!0,placeholder:" "})))}}]),r}(y.Component),u.propTypes={detail:b.default.object,visible:b.default.bool,onOk:b.default.func,onCancel:b.default.func},u.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){}},o=c))||o;a.default=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(109)),u=n(r(50)),c=n(r(21)),s=n(r(56)),i=n(r(16)),f=n(r(73)),d=n(r(32)),p=n(r(1109)),m=r(5),h=r(25),v=n(r(274)),E=n(r(1250)),y=n(r(2097)),b=n(r(2098)),g=n(r(2102)),_=n(r(2104)),S=n(r(2106)),O=n(r(1e3)),C=n(r(2109));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D={"node.add":{on:function(e){var t,a=e.kkName,r=e.success,n=(0,s.default)(e,["kkName","success"]),c=new O.default,d=v.default.open(R({modal:E.default,onOk:(t=(0,u.default)(l.default.mark((function e(t){var n,u,s;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.fetchDetail({name:a});case 2:return n=(0,m.toJS)(c.detail._originData),u=(0,i.default)(n,"spec.hosts",[]),s=(0,i.default)(n,"spec.roleGroups",{}),t.roles.forEach((function(e){s[e]=s[e]||[],s[e].push(t.name)})),(0,f.default)(n,"spec.hosts",[].concat((0,o.default)(u),[t])),(0,f.default)(n,"spec.roleGroups",s),e.next=10,c.update({name:a},n).then((function(){v.default.close(d),r&&r()}));case 10:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:c,addAfterCreate:!0},n))}},"node.type.add":{on:function(){v.default.open({modal:y.default})}},"node.add.log":{on:function(e){var t=e.detail;v.default.open({modal:b.default,detail:t})}},"node.labels":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=(0,s.default)(e,["store","detail","success"]),l=(0,m.toJS)(a.labels),o=v.default.open(R({onOk:function(e){(0,p.default)(l,(function(t,a){(0,d.default)(e[a])&&(l[a]=null)}));var n=R(R({},l),e);t.patch(a,{metadata:{labels:n}}).then((function(){v.default.close(o),r&&r()}))},value:l,modal:g.default,store:t},n))}},"node.taint":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=(0,s.default)(e,["store","detail","success"]),l=v.default.open(R({onOk:function(e){t.patch(a,e).then((function(){v.default.close(l),r&&r()}))},value:(0,m.toJS)(a.taints),modal:_.default,store:t},n))}},"node.taint.batch":{on:function(e){var a=e.store,r=e.success,n=(0,m.toJS)(a.list),l=n.data,o=n.selectedRowKeys,u=l.filter((function(e){return o.includes(e.name)})),c=v.default.open({onOk:function(e){a.batchPatchTaints(e).then((function(){v.default.close(c),h.Notify.success({content:t("UPDATE_SUCCESSFUL")}),r&&r()}))},nodes:u,modal:S.default,store:a})}},"node.edge.add":{on:function(e){var a=e.cluster,r=e.store,n=(0,s.default)(e,["cluster","store"]),l=v.default.open(R({onOk:function(){v.default.close(l)},title:t("Add Edge Node"),modal:C.default,cluster:a,store:r},n))}}};a.default=D},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(274)),p=r(25);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=m(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return f.default.createElement(d.default.Form,(0,l.default)({width:600,icon:"nodes",title:t("Add Node Type")},this.props),f.default.createElement(p.Form.Item,{label:t("Type Name"),desc:t("NAME_DESC")},f.default.createElement(p.Input,{name:"name",maxLength:63})),f.default.createElement(p.Form.Item,{label:t("DESCRIPTION"),desc:t("NODE_TYPE_DESCRIPTION_DEC")},f.default.createElement(p.TextArea,{name:"description"})))}}]),r}(f.default.Component);a.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(274)),m=n(r(1110)),h=n(r(1e3)),v=r(70),E=n(r(2101));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=(0,v.observer)(l=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).kubekeyClusterStore=new h.default,e.fetchPod=function(){var t=(0,d.default)(e.props,"detail.kkName");t&&e.kubekeyClusterStore.fetchDetail({name:t})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.fetchPod()}},{key:"renderContent",value:function(){var e=(0,d.default)(this.kubekeyClusterStore.detail,"status.jobInfo",{}),t=e.namespace,a=e.pods,r=(0,d.default)(a,"[0].name"),n=(0,d.default)(a,"[0].containers[0].name");return f.default.createElement(m.default,{className:E.default.containerLog,contentClassName:E.default.containerLogContent,namespace:t,podName:r,containerName:n,isRealtime:!0})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return f.default.createElement(p.default,{bodyClassName:E.default.body,title:t("LOGS"),visible:a,onCancel:r,fullScreen:!0,hideFooter:!0},this.renderContent())}}]),r}(f.default.Component))||l;a.default=b},,,function(e,t,a){e.exports={body:"_1YPo-YXSjXshsvOLc6vDAH",containerLog:"_1BDHwOP-bAWoN4kDG1yCjv",containerLogContent:"_3zKOo0nnc69mFUX5on-BCT"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(32)),v=r(25),E=n(r(274)),y=n(r(786)),b=n(r(2103));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).handleOk=function(){(0,t.props.onOk)(t.state.value)},t.handleChange=function(e){t.setState({value:e})},t.handleError=function(e){t.setState({enableSave:(0,h.default)(e)})},t.state={value:e.value,enableSave:!0},t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.value;a&&a!==e.visible&&r!==e.value&&this.setState({value:r})}},{key:"render",value:function(){var e=this.props,a=e.title,r=(e.onOk,(0,o.default)(e,["title","onOk"])),n=this.state,u=n.value,c=n.enableSave;return d.default.createElement(E.default.Form,(0,l.default)({width:1162,bodyClassName:b.default.body,title:t("EDIT_TITLE",{title:a}),icon:"pen",okText:t("OK"),onOk:this.handleOk,disableOk:!c},r),d.default.createElement("div",{className:b.default.wrapper},d.default.createElement("div",{className:(0,m.default)(b.default.title,"h5")},t(a)),d.default.createElement("div",{className:b.default.content},d.default.createElement(v.Form.Item,null,d.default.createElement(y.default,{className:b.default.inputs,addText:t("ADD"),value:u,onChange:this.handleChange,onError:this.handleError})))))}}]),r}(d.default.Component);a.default=_,_.propTypes={value:p.default.object,title:p.default.string,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func},_.defaultProps={visible:!1,title:"",onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"nGOiMiUdF85Rmj9KRQgJy",wrapper:"_3gcATE4Hg6mOM-FIQJUKap",title:"_1TC3EKShLbFxFx5bge4ASR",content:"_3du1pxv0kFceCZAjUywg8s",inputs:"_1PO0E_3BPNCJdOqw1k0o1P"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=r(25),h=n(r(274)),v=n(r(16)),E=n(r(32)),y=n(r(1307)),b=n(r(1309));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).handleSubmit=function(e){var a=(0,v.default)(e,"spec.taints");if((0,E.default)(a))t.props.onOk(e);else{var r={},n=!0;a.forEach((function(e){r[e.key]?n=!1:r[e.key]=1})),n&&t.props.onOk(e)}},t.state={formData:{spec:{taints:e.value}}},t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.value;a&&a!==e.visible&&e.value!==r&&this.setState({formData:{spec:{taints:r}}})}},{key:"render",value:function(){var e=this.props,a=(e.value,e.onOk,(0,o.default)(e,["value","onOk"]));return d.default.createElement(h.default.Form,(0,l.default)({width:1162,bodyClassName:b.default.body,title:t("EDIT_TAINTS"),icon:"wrench",okText:t("OK"),data:this.state.formData,onOk:this.handleSubmit},a),d.default.createElement("div",{className:b.default.wrapper},d.default.createElement("div",{className:b.default.title},t("TAINTS")),d.default.createElement(m.Alert,{type:"info",message:t("TAINTS_DESC")}),d.default.createElement("div",{className:b.default.content},d.default.createElement(m.Form.Item,null,d.default.createElement(y.default,{name:"spec.taints"})))))}}]),r}(d.default.Component);a.default=_,_.propTypes={value:p.default.array,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func},_.defaultProps={visible:!1,value:[{}],onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(0)),c=r(25),s=n(r(774)),i=n(r(1308)),f=function(e){var a=e.onSelect,r=e.onDelete,n=e.disabled,f=(0,o.default)(e,["onSelect","onDelete","disabled"]),d=[{label:t("NOSCHEDULE"),value:"NoSchedule"},{label:t("PREFER_NOSCHEDULE"),value:"PreferNoSchedule"},{label:t("NOEXECUTE"),value:"NoExecute"}];return u.default.createElement("div",{className:i.default.item},u.default.createElement(s.default,(0,l.default)({className:i.default.inputs},f),u.default.createElement(c.Input,{name:"key",placeholder:t("KEY")}),u.default.createElement(c.Input,{name:"value",placeholder:t("VALUE")}),u.default.createElement(c.Select,{name:"effect",options:d,defaultValue:"NoSchedule"})),u.default.createElement("div",{className:i.default.tips},u.default.createElement(c.Tooltip,{content:u.default.createElement("div",{dangerouslySetInnerHTML:{__html:t("TAINTS_TIPS")}})},u.default.createElement(c.Icon,{name:"question",size:16}))),u.default.createElement("div",{className:i.default.actions},a&&u.default.createElement(c.Tooltip,{content:t("TAINT_SELECT_TIPS")},u.default.createElement(c.Button,{type:"flat",icon:"add",className:i.default.select,disabled:n,onClick:a})),r&&u.default.createElement(c.Tooltip,{content:t("TAINT_DELETE_TIPS")},u.default.createElement(c.Button,{type:"flat",icon:"trash",className:i.default.delete,onClick:r}))))};a.default=f},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(109)),c=n(r(12)),s=n(r(13)),i=n(r(135)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(1)),v=n(r(32)),E=n(r(73)),y=n(r(2107)),b=n(r(2108)),g=n(r(851)),_=n(r(650)),S=n(r(16)),O=r(37),C=r(25),T=n(r(274)),R=n(r(1307)),D=n(r(1309));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N=function(e){(0,f.default)(r,e);var a=k(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).getTaints=function(e){return e.taints||[{}]},t.getCommonTaints=function(e){var a=e.nodes;if((0,v.default)(a)||1===a.length)return[{}];var r=a.reduce((function(e,a){return{taints:(0,y.default)(t.getTaints(e),t.getTaints(a),"key")}}));return(0,v.default)(r.taints)?[{}]:t.getTaints(r)},t.getDifferentTaints=function(e){var a=t.getTaints(e).filter((function(e){return(0,v.default)(e.key)&&(0,v.default)(e.value)||!t.commonTaintsKeys.includes(e.key)}));return(0,v.default)(a)?[{}]:a},t.handleSubmit=function(){var e=t.state,a=e.nodes,r=e.commonTaints,n=a.map((function(e){var a=t.getTaints(e);return(0,E.default)(e,"taints",[].concat((0,u.default)(a),(0,u.default)(r)).filter((function(e){return e.key}))),e})),l=!0;n.forEach((function(e){var t=(0,S.default)(e,"taints",[]),a={};t.forEach((function(e){a[e.key]?l=!1:a[e.key]=1}))})),l&&t.props.onOk(n)},t.handleChangeAll=(0,_.default)((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.setState((function(r){var n=r.nodes,l=(0,u.default)(n);return l.forEach((function(e){var r=t.getTaints(e);a.key&&(0,g.default)(r,(function(e){return e.key===a.key})),(0,g.default)(r,(function(e){return t.commonTaintsKeys.includes(e.key)}))})),{nodes:l,commonTaints:(0,v.default)(e)?[{}]:e}}))}),100),t.handleChange=function(e,a){return(0,O.cacheFunc)("_change_".concat(a),(function(e){t.setState((function(t){var r=t.nodes,n=(0,u.default)(r);return(0,E.default)(n,"[".concat(a,"].taints"),e),{nodes:n}}))}),(0,i.default)(t))},t.handleSelect=function(e){return(0,O.cacheFunc)("_select_".concat(e),(function(e){e.key&&t.setState((function(t){var a=t.nodes,r=t.commonTaints;return a.forEach((function(t){var a=t.taints||[];t.taints=(0,b.default)(a,[e],"key").filter((function(e){return e.key}))})),r.push(e),{nodes:a,commonTaints:r.filter((function(e){return e.key}))}}))}),(0,i.default)(t))},t.state={nodes:e.nodes,commonTaints:t.getCommonTaints(e)},t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible!==e.visible&&this.setState({nodes:this.props.nodes,commonTaints:this.getCommonTaints(this.props)})}},{key:"renderCommonTaints",value:function(){var e=this.state,a=e.nodes,r=e.commonTaints;return(0,v.default)(a)||1===a.length?null:m.default.createElement("div",{className:D.default.node},m.default.createElement("div",{className:D.default.subTitle},t("COMMON_TAINTS")),m.default.createElement(R.default,{value:r,onChange:this.handleChangeAll}))}},{key:"renderNodeTaints",value:function(){var e=this,t=this.state,a=t.nodes,r=t.commonTaints,n=(0,v.default)(a)||1===a.length;return a.map((function(t,a){var l=e.getDifferentTaints(t);return m.default.createElement("div",{key:t.name,className:D.default.node},m.default.createElement("div",{className:D.default.subTitle},t.name),m.default.createElement(R.default,{common:r,value:l,onSelect:n?null:e.handleSelect(a),onChange:e.handleChange(t,a)}))}))}},{key:"render",value:function(){var e=this.props,a=(e.detail,e.onOk,(0,o.default)(e,["detail","onOk"]));return m.default.createElement(T.default.Form,(0,l.default)({width:1162,bodyClassName:D.default.body,title:t("EDIT_TAINTS"),icon:"wrench",okText:t("OK"),onOk:this.handleSubmit},a),m.default.createElement("div",{className:D.default.wrapper},m.default.createElement("div",{className:D.default.title},t("TAINTS")),m.default.createElement(C.Alert,{type:"info",message:t("TAINTS_DESC")}),m.default.createElement("div",{className:D.default.content},this.renderCommonTaints(),this.renderNodeTaints())))}},{key:"commonTaintsKeys",get:function(){return this.state.commonTaints.map((function(e){return e.key}))}}]),r}(m.default.Component);a.default=N,N.propTypes={visible:h.default.bool,nodes:h.default.array,onOk:h.default.func,onCancel:h.default.func},N.defaultProps={visible:!1,nodes:[],onOk:function(){},onCancel:function(){}}},,,function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(49)),u=l(r(50)),c=l(r(21)),s=l(r(12)),i=l(r(13)),f=l(r(19)),d=l(r(20)),p=l(r(18)),m=n(r(0)),h=l(r(1111)),v=r(25),E=r(1112),y=r(37),b=r(58),g=l(r(274)),_=l(r(2113));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T={name:function(e){return t("IN_USE_Node_NAME",{name:e})},IP:function(e){return t("IN_USE_Node_IP",{ip:e})}},R=function(e){(0,f.default)(r,e);var a=C(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={link:"",loading:!1,showLink:!1,isCheck:!0,formData:(0,h.default)(e.props.formTemplate||{})},e.formRef=m.default.createRef(),e.store=e.props.store,e.validator=function(t){return function(a,r,n){var l=t.toLocaleLowerCase();if(!r)return n();var o=e.props.cluster;a.field===l&&e.store.createEdgeNode(O({cluster:o},e.state.formData)).then((function(e){"Failure"===e.status?e.message.indexOf("".concat(t))>-1?n({field:a.field,message:T[t](r)}):n():n()}))}},e.handleLink=function(){var t=e.props.cluster,a=e.state.isCheck,r=e.formRef.current;r&&r.validate((0,u.default)(o.default.mark((function r(){var n,l;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.setState({loading:!0}),r.next=3,e.store.createEdgeNode(O({cluster:t,defaultTaint:a},e.state.formData));case 3:"Failure"!==(n=r.sent).status&&(l=n.data,e.setState({link:l,showLink:!0})),e.setState({loading:!1});case 6:case"end":return r.stop()}}),r)}))))},e.handleCopy=function(){v.Notify.success({content:t("COPY_SUCCESSFUL")})},e.emptyLink=function(){e.state.link&&e.setState({link:"",showLink:!1})},e.renderLink=function(){var a=e.state,r=a.showLink,n=a.link;return r?m.default.createElement("div",{className:_.default.column},m.default.createElement(v.Form.Item,{label:m.default.createElement(m.default.Fragment,null,t("EDGENODE_CONFIG_COMMAND"),m.default.createElement(v.Tooltip,{content:m.default.createElement("span",{className:_.default.installInfo},t.html("EDGENODE_CONFIG_COMMAND_TIP"))},m.default.createElement(v.Icon,{className:_.default.infoIcon,name:"information",size:18}))),desc:t("ADD_EDGE_COMMAND")},m.default.createElement("div",{className:_.default.linkContainer},m.default.createElement("pre",{className:_.default.link},n))),m.default.createElement(E.CopyToClipboard,{text:n,onCopy:e.handleCopy},m.default.createElement(v.Button,null,t("COPY")))):null},e.handleChangeCheck=function(t){e.setState({isCheck:t})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=e.onCancel;return m.default.createElement(g.default,{title:t("Add Edge Node"),width:600,visible:a,onOk:r,onCancel:n,hideFooter:!0},m.default.createElement(v.Form,{data:this.state.formData,ref:this.formRef},m.default.createElement(v.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("EDGENODE_NAME_EMPTY_DESC")},{pattern:b.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.validator("name")}],desc:t("NAME_DESC")},m.default.createElement(v.Input,{name:"name",defaultValue:"edgenode-".concat((0,y.generateId)(4)),onChange:this.emptyLink})),m.default.createElement("div",{className:_.default.column},m.default.createElement(v.Form.Item,{label:t("INTERNAL_IP_ADDRESS"),desc:t("EDGENODE_INTERNAL_IP_DESC"),rules:[{required:!0,message:t("EDGENODE_INTERNAL_IP_EMPTY_DESC")},{pattern:b.PATTERN_IP,message:t("INVALID_IP_DESC")},{validator:this.validator("IP")}]},m.default.createElement(v.Input,{name:"ip",placeholder:"0.0.0.0",autoComplete:"off",onChange:this.emptyLink})),m.default.createElement(v.Button,{onClick:this.handleLink,loading:this.state.loading},t("VALIDATE"))),m.default.createElement(v.Checkbox,{defaultValue:!0,checked:this.state.isCheck,onChange:this.handleChangeCheck},t("ADD_DEFAULT_TAINT",{params:'node-role.kubernetes.io/edge="":NoSchedule'})),this.renderLink()))}}]),r}(m.Component);a.default=R},,,,function(e,t,a){e.exports={errorMessage:"_3S7-jeydyoFwDpd9pSycVx",linkContainer:"_1ggyEQNMCzuZ-coFwWh3pC",link:"c_iHcRkOuUTw0vHcUCv2d",column:"_3oR2jlvaLkV7X5Pt_HUBWZ",infoIcon:"_1xenl2b6SqpTOis9lh2q2P",installInfo:"k72561gKG-uS6_V9v8-zN"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(0)),i=r(25),f=n(r(274)),d=n(r(2115)),p=n(r(2185)),m=n(r(2186)),h=n(r(760)),v=n(r(2188)),E=n(r(2213)),y=n(r(1323)),b=n(r(2222)),g=n(r(2231)),_=n(r(1326)),S=n(r(2242)),O=n(r(2252)),C=n(r(2254)),T=n(r(2256)),R=n(r(2258)),D=r(914);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P={"openpitrix.app.create":{on:function(e){var t=e.store,a=e.cluster,r=e.namespace,n=(0,c.default)(e,["store","cluster","namespace"]),l=f.default.open(N({onOk:function(){f.default.close(l)},store:t,cluster:a,namespace:r,modal:d.default},n))}},"openpitrix.app.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=f.default.open(N({onOk:function(e){a.patch(r,e).then((function(){f.default.close(o),i.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:p.default},l))}},"openpitrix.app.template.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=f.default.open(N({onOk:function(e){a.upgrade(e,r).then((function(){f.default.close(o),i.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:m.default},l))}},"openpitrix.repo.add":{on:function(e){var t,a=e.store,r=e.workspace,n=e.success,u=(0,c.default)(e,["store","workspace","success"]),s=f.default.open(N({onOk:(t=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.create(N(N({},t),{},{workspace:r,app_default_status:"active"}));case 2:f.default.close(s),n&&n();case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:a,modal:v.default,workspace:r},u))}},"openpitrix.repo.edit":{on:function(e){var t,a=e.store,r=e.detail,n=e.workspace,u=e.success,s=(0,c.default)(e,["store","detail","workspace","success"]),i=f.default.open(N({onOk:(t=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.update(t);case 2:f.default.close(i),u&&u();case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:a,detail:r,modal:v.default,workspace:n},s))}},"openpitrix.template.create":{on:function(e){var t=e.store,a=e.success,r=(0,c.default)(e,["store","success"]),n=f.default.open(N({onOk:function(){f.default.close(n),a&&a()},store:t,modal:E.default},r))}},"openpitrix.template.upload":{on:function(e){var a,r=e.store,n=e.workspace,u=e.success,s=(0,c.default)(e,["store","workspace","success"]),d=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.create(N(N({},a),{},{workspace:n}));case 2:i.Notify.success({content:t("UPLOAD_SUCCESSFUL")}),f.default.close(d),u&&u();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:y.default,title:t("UPLOAD_HELM_TITLE"),description:t("UPLOAD_HELM_CHART_DESC"),icon:"templet",type:"CREATE_APP",workspace:n},s))}},"openpitrix.template.edit":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),s=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.update(a);case 2:f.default.close(s),i.Notify.success({content:t("MODIFY_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:b.default,success:n},u))}},"openpitrix.template.addVersion":{on:function(e){var a,r=e.store,n=e.versionStore,u=e.workspace,s=e.success,d=(0,c.default)(e,["store","versionStore","workspace","success"]),p=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.create(a);case 2:i.Notify.success({content:t("ADD_VERSION_SUCCESSFUL")}),f.default.close(p),s&&s();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:y.default,title:t("UPLOAD_HELM_TITLE"),description:t("UPLOAD_HELM_CHART_DESC"),icon:"templet",type:"CREATE_APP",workspace:u},d))}},"openpitrix.template.deploy":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),s=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,d,p;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.namespace,u=a.cluster,d=a.workspace,p=(0,c.default)(a,["namespace","cluster","workspace"]),e.next=3,r.deploy(p,{workspace:d,namespace:o,cluster:u});case 3:f.default.close(s),i.Notify.success({content:"".concat(t("DEPLOYED_SUCCESSFUL"))}),n&&n();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:g.default},u))}},"openpitrix.template.delete":{on:function(e){var a=e.store,r=e.detail,n=e.versions,u=e.success,d=(0,c.default)(e,["store","detail","versions","success"]),p=r.name,m=t.html("DELETE_APP_TEMPLATE_DESC",{resource:p});n.length&&(m=s.default.createElement("span",null,t.html("DELETE_APP_TEMPLATE_VERSIONS_DESC",{resource:p})));var v,E=f.default.open(N({onOk:(v=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.delete(r);case 2:f.default.close(E),i.Notify.success({content:t("DELETE_SUCCESSFUL")}),u&&u();case 5:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)}),store:a,desc:m,type:"APP_TEMPLATE",resource:p,modal:h.default},d))}},"openpitrix.template.action":{on:function(e){var a,r=e.store,n=e.detail,u=e.handleType,s=e.success,d=(0,c.default)(e,["store","detail","handleType","success"]),p=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.handle({action:u,app_id:n.app_id});case 2:a=D.HANDLE_TYPE_TO_SHOW[u]||u,f.default.close(p),i.Notify.success({content:"".concat(t("".concat(a.toUpperCase(),"_SUCCESSFUL")))}),s&&s();case 6:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),content:t.html("APP_".concat((u||"suspend").toUpperCase(),"_TIP"),{name:n.name}),modal:_.default,store:r},d))}},"openpitrix.template.review":{on:function(e){var a,r=e.store,n=e.detail,u=e.type,s=e.success,d=e.onReject,p=(0,c.default)(e,["store","detail","type","success","onReject"]),m=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(){var a,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.app_id,o=n.version_id,e.next=3,r.handle({app_id:a,version_id:o,action:"pass"});case 3:f.default.close(m),i.Notify.success(t("RELEASE_SUCCESSFUL")),s&&s();case 6:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),onReject:function(){f.default.close(m),d()},icon:"safe-notice",title:t("APP_DETAILS"),description:t("APP_DETAILS_DESC"),canHandle:"unprocessed"===u,modal:S.default,detail:n,store:r},p))}},"openpitrix.template.reject":{on:function(e){var a,r=e.store,n=e.detail,u=e.type,s=e.success,d=(0,c.default)(e,["store","detail","type","success"]),p=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.app_id,u=n.version_id,e.next=3,r.handle(N({app_id:o,version_id:u,action:"reject"},a));case 3:f.default.close(p),i.Notify.success(t("REJECT_SUCCESSFUL")),s&&s();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),icon:"safe-notice",title:t("REJECTION_REASON"),description:t("REJECT_REASON_DESC"),canHandle:"unprocessed"===u,versionId:n.version_id||"",modal:O.default,store:r},d))}},"openpitrix.category.edit":{on:function(e){var a,r=e.store,n=e.detail,u=e.names,s=e.success,d=(0,c.default)(e,["store","detail","names","success"]),p=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.category_id){e.next=6;break}return e.next=3,r.update(a);case 3:o="".concat(t("MODIFY_SUCCESSFUL")),e.next=9;break;case 6:return e.next=8,r.create(a);case 8:o=t("CREATE_SUCCESSFUL");case 9:f.default.close(p),i.Notify.success({content:o}),s&&s();case 12:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("CATEGORY"),icon:"tag",detail:n,categoryNames:u,modal:C.default,store:r},d))}},"openpitrix.category.delete":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=(0,c.default)(e,["store","detail","success"]),d=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.delete(n);case 2:f.default.close(d),i.Notify.success({content:t("DELETE_SUCCESSFUL")}),u&&u();case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),desc:t.html("DELETE_CATEGORY_DESC",{name:n.name}),modal:h.default,store:r},s))}},"openpitrix.category.ajust":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),s=f.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.adjustCategory(a);case 2:f.default.close(s),i.Notify.success({content:"".concat(t("CHANGED_SUCCESSFULLY"))}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("CHANGE_CATEGORY"),icon:"tag",modal:T.default,store:r},u))}},"openpitrix.app.agreement":{on:function(e){var t=e.success,a=(0,c.default)(e,["success"]),r=f.default.open(N({onOk:function(){f.default.close(r),t&&t()},modal:R.default},a))}}};a.default=P},function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,o,u,c=r(a(71)),s=r(a(56)),i=r(a(21)),f=r(a(12)),d=r(a(13)),p=r(a(19)),m=r(a(20)),h=r(a(18)),v=n(a(0)),E=a(70),y=r(a(191)),b=r(a(1)),g=a(25),_=r(a(274)),S=r(a(2116)),O=r(a(2121)),C=r(a(2184));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var k=(0,E.observer)((u=o=function(e){(0,p.default)(a,e);var t=D(a);function a(e){var r;return(0,f.default)(this,a),(r=t.call(this,e)).setViewType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"appList",t=arguments.length>1?arguments[1]:void 0;r.setState({selectRepo:t,viewType:e})},r.handleClickApp=function(e){r.setState({viewType:"appDetail",selectApp:e})},r.handleDeploy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.props.trigger("openpitrix.template.deploy",R(R(R({},e),(0,y.default)(r.props,["cluster","workspace","namespace"])),{},{success:function(){return r.props.onOk()}}))},r.state={selectRepo:"",viewType:"appList",selectApp:null},r}return(0,d.default)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=e.workspace,n=(e.onDeploy,(0,s.default)(e,["visible","onCancel","workspace","onDeploy"])),l=this.state,o=l.viewType,u=l.selectApp,i=l.selectRepo;return v.default.createElement(_.default,(0,c.default)({width:1070,className:C.default.modal,bodyClassName:C.default.body,visible:t,onCancel:a,rightScreen:!0,hideHeader:!0,hideFooter:!0},n),v.default.createElement(g.Button,{className:C.default.close,icon:"close",iconType:"light",type:"control",onClick:a}),"appList"===o&&v.default.createElement(S.default,{workspace:r,selectRepo:i,setType:this.setViewType,onClickApp:this.handleClickApp}),"appDetail"===o&&v.default.createElement(O.default,{setType:this.setViewType,app:u,workspace:r,onDeploy:this.handleDeploy}))}}]),a}(v.Component),o.propTypes={workspace:b.default.string,visible:b.default.bool,onOk:b.default.func,onCancel:b.default.func},o.defaultProps={workspace:"",visible:!1,onOk:function(){},onCancel:function(){}},l=u))||l;t.default=k},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c,s=n(r(109)),i=n(r(49)),f=n(r(21)),d=n(r(50)),p=n(r(12)),m=n(r(13)),h=n(r(19)),v=n(r(20)),E=n(r(18)),y=l(r(0)),b=r(70),g=n(r(1)),_=n(r(16)),S=n(r(298)),O=r(25),C=n(r(1310)),T=n(r(862)),R=n(r(1113)),D=r(787),k=n(r(2120));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var w=(0,b.observer)((c=u=function(e){(0,h.default)(n,e);var a,r=I(n);function n(e){var t;return(0,p.default)(this,n),(t=r.call(this,e)).fetchRepos=(0,d.default)(i.default.mark((function e(){var a,r,n=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:{},r=t.props.workspace,e.next=4,t.repoStore.fetchList(P({status:"active",noLimit:!0,workspace:r},a));case 4:case"end":return e.stop()}}),e)}))),t.fetchApps=(0,d.default)(i.default.mark((function e(){var a,r,n,l,o,u=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>0&&void 0!==u[0]?u[0]:{},r=!(u.length>1&&void 0!==u[1])||u[1],e.next=4,t.appStore.fetchList(P({page:1,limit:D.STORE_APP_LIMIT,status:t.isFormWorkspace?"":"active",workspace:t.isFormWorkspace?t.props.workspace:"",repo_id:t.selectedRepo},a));case 4:n=t.appStore,l=n.allApps,o=n.list,r?(l.clear(),l.replace(o.data)):l.push.apply(l,(0,s.default)(o.data));case 6:case"end":return e.stop()}}),e)}))),t.fetchMoreApps=(0,d.default)(i.default.mark((function e(){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.appStore.list.page,e.next=3,t.fetchApps({page:a+1},!1);case 3:case"end":return e.stop()}}),e)}))),t.handleSearch=function(e){t.fetchApps({keyword:e})},t.handleRefresh=function(){t.fetchApps()},t.handleChangeRepo=function(e){t.selectedRepo!==e&&t.setState({selectRepo:e},(function(){t.fetchApps()}))},t.state={selectRepo:e.selectRepo},t.appStore=new T.default,t.repoStore=new R.default,t}return(0,m.default)(n,[{key:"componentDidMount",value:(a=(0,d.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchRepos();case 2:if(!(this.repoSelectOptions.length>0)){e.next=5;break}return e.next=5,this.fetchApps();case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderHeader",value:function(){return y.default.createElement("div",{className:k.default.header},y.default.createElement("div",{className:k.default.logo},y.default.createElement("img",{src:"/assets/application.svg",alt:""})),y.default.createElement("div",{className:k.default.text},y.default.createElement("h2",null,t("APP_TEMPLATE_PL")),y.default.createElement("p",null,t("APP_TEMPLATES_MODAL_DESC"))))}},{key:"renderToolbar",value:function(){return y.default.createElement("div",{className:k.default.toolbar},y.default.createElement(O.Select,{name:"repo",placeholder:t("SELECT_APP_REPOSITORY"),onChange:this.handleChangeRepo,className:k.default.selectRepos,options:this.repoSelectOptions,value:this.selectedRepo}),y.default.createElement(O.InputSearch,{onSearch:this.handleSearch,className:k.default.search,placeholder:t("SEARCH")}),y.default.createElement(O.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh}))}},{key:"render",value:function(){var e=this.appStore,t=e.allApps,a=e.list,r=a.isLoading,n=a.total;return y.default.createElement(y.default.Fragment,null,this.renderHeader(),this.renderToolbar(),y.default.createElement("div",{className:k.default.apps},y.default.createElement(C.default,{itemCls:k.default.appItem,apps:t.toJS(),isLoading:r,total:n,onFetchMore:this.fetchMoreApps,onClickAppItem:this.props.onClickApp,disableLink:!0})))}},{key:"isFormWorkspace",get:function(){return!this.selectedRepo}},{key:"repoSelectOptions",get:function(){var e=this.repoStore.list.data.map((function(e){var t=e.name;return{value:e.repo_id,label:t}}));return e.unshift({value:null,label:t("CURRENT_WORKSPACE")}),e}},{key:"selectedRepo",get:function(){return this.state.selectRepo||(0,_.default)(this.repoSelectOptions,"[0].value")}}]),n}(y.Component),u.propTypes={workspace:g.default.string,store:g.default.object,onClickApp:g.default.func,fetchApps:g.default.func,selectRepo:g.default.string},u.defaultProps={workspace:"",store:{},onClickApp:S.default},o=c))||o;a.default=w},,,,function(e,t,a){e.exports={apps:"_1UatQrbMOVzFuohgTg31oP",appItem:"_1M1BO3tpD1NAdxEzt9622l",header:"_2X4awaWFWZe3_0szPQS1tG",logo:"_2VFLGzBVR1DwI0uG14Iij",text:"_180h4OHwH9Gfe3LwWRj5r1",toolbar:"fwgiubvg9GxvkA5OEo1tO",selectRepos:"hUYgP6O2Qv2aSSy9gAShl",search:"_1Qe3PDhi2sBCabmc6Pwcpf"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c,s=n(r(49)),i=n(r(21)),f=n(r(50)),d=n(r(12)),p=n(r(13)),m=n(r(19)),h=n(r(20)),v=n(r(18)),E=l(r(0)),y=r(70),b=n(r(1)),g=n(r(16)),_=n(r(137)),S=r(25),O=n(r(636)),C=n(r(1311)),T=n(r(1321)),R=n(r(862)),D=n(r(814)),k=n(r(2181)),N=n(r(2183));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var M=(0,y.observer)((c=u=function(e){(0,m.default)(n,e);var a,r=w(n);function n(e){var t;return(0,d.default)(this,n),(t=r.call(this,e)).fetchVersions=(0,f.default)(s.default.mark((function e(){var a,r=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,t.versionStore.fetchList(I(I({},a),{},{app_id:t.appId,noLimit:!0}));case 3:case"end":return e.stop()}}),e)}))),t.handleTabChange=function(e){t.setState({tab:e})},t.handleClickBack=function(){var e=t.props.app;t.props.setType("appList",e.repo_id)},t.showDeploy=function(){t.props.onDeploy({app:t.appStore.detail,store:t.appStore})},t.handleChangeAppVersion=function(e){t.setState({selectAppVersion:e})},t.state={tab:"versionInfo",selectAppVersion:"",showDeploy:!1},t.appStore=new R.default,t.versionStore=new D.default,t}return(0,p.default)(n,[{key:"componentDidMount",value:(a=(0,f.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchVersions();case 2:t=(0,g.default)(this.versionStore,"list.data[0].version_id",""),this.setState((function(){return{selectAppVersion:t}})),this.appStore.fetchDetail({app_id:[this.appId]});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.props.setType()}},{key:"renderVersionList",value:function(){return E.default.createElement("div",{className:"margin-b12"},E.default.createElement("div",{className:"h6 margin-b12"},t("VERSION")),E.default.createElement(O.default,{value:this.state.selectAppVersion,options:this.versionOptions,onChange:this.handleChangeAppVersion}))}},{key:"render",value:function(){var e=this.props.app,a=this.state,r=a.selectAppVersion,n=a.tab,l=this.appStore.detail;return E.default.createElement(E.default.Fragment,null,E.default.createElement(k.default,{onClickBack:this.handleClickBack,title:e.name,desc:e.description,icon:e.icon}),E.default.createElement("div",{className:N.default.bar},E.default.createElement(S.RadioGroup,{mode:"button",value:n,options:this.tabs,onChange:this.handleTabChange}),E.default.createElement(S.Button,{type:"control",onClick:this.showDeploy},t("INSTALL"))),E.default.createElement("div",{className:N.default.content},E.default.createElement(S.Columns,null,E.default.createElement(S.Column,null,E.default.createElement(C.default,{appId:this.appId,versionId:r,currentTab:n})),E.default.createElement(S.Column,{className:"is-narrow"},this.renderVersionList(),E.default.createElement(T.default,{app:l})))))}},{key:"appId",get:function(){return this.props.app.app_id}},{key:"tabs",get:function(){return[{label:t("APP_INFORMATION"),value:"versionInfo"},{label:t("CHART_FILES"),value:"chartFiles"}]}},{key:"versionOptions",get:function(){return this.versionStore.list.data.map((function(e){var a=e.version_id,r=e.name,n=e.create_time;return{label:r,description:(0,_.default)(n).format(t("YYYY-MM-DD")),value:a}}))}}]),n}(E.Component),u.propTypes={app:b.default.object,setType:b.default.func,workspace:b.default.string},u.defaultProps={app:{}},o=c))||o;a.default=M},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(12)),u=l(r(13)),c=l(r(19)),s=l(r(20)),i=l(r(18)),f=n(r(0)),d=l(r(1)),p=r(25),m=l(r(293)),h=l(r(2182));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClickBack=function(){e.props.onClickBack?e.props.onClickBack():history.back()},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.title,r=e.desc,n=e.icon;return f.default.createElement("div",{className:h.default.banner},f.default.createElement("div",{className:h.default.back,onClick:this.handleClickBack},f.default.createElement(p.Icon,{name:"return",size:20}),f.default.createElement("span",null,t("BACK"))),f.default.createElement("div",{className:h.default.intro},f.default.createElement("span",{className:h.default.icon},f.default.createElement(m.default,{src:n,alt:"",iconLetter:a,iconSize:48})),f.default.createElement("div",{className:h.default.text},f.default.createElement("h3",null,a),f.default.createElement("p",null,r))),f.default.createElement("div",{className:h.default.rightIcon},f.default.createElement("span",{className:h.default.image},f.default.createElement(m.default,{src:n,alt:"",iconLetter:a,iconSize:200}))))}}]),r}(f.PureComponent);E.propTypes={title:d.default.string,desc:d.default.string,icon:d.default.string,onClickBack:d.default.func};var y=E;a.default=y},function(e,t,a){e.exports={banner:"_1FsQGq61FOegh8j3_GhZif",back:"_1gmVPVuByhMa57J036PSxv",intro:"_3j5upf16nlGbfjUg4e-X34",icon:"fDrmqEhdOkv6q7azoOFUs",text:"Pk8jY_OQnHqX_iBCCvh9r",rightIcon:"_Ea0pMqGjtHduLt6SbNPo",image:"_2Dw5Wj1kIEH4VCAKK2-1q6"}},function(e,t,a){e.exports={bar:"_1DaaC_xsG5XhBKwZhkgEg2",content:"_9_gu9ro0MHL2Y29sszoZI",loading:"_4r_xEprGi4V3ulL1P_Ojc"}},function(e,t,a){e.exports={modal:"_1KackZTxL0khYUVdXmINz7",body:"_1QrRgA4KOz3Xeinog9zRKn",close:"_3PAVlOmYX1mSke11tsE8YY"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(25),p=n(r(274));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleOk=function(t){(0,e.props.onOk)(t)},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.visible,n=e.isSubmitting,l=e.onCancel;return i.default.createElement(p.default.Form,{data:a,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:l,visible:r,isSubmitting:n},i.default.createElement(d.Form.Item,{label:t("NAME"),desc:t("LONG_NAME_DESC")},i.default.createElement(d.Input,{name:"name",disabled:!0})),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{maxLength:256,name:"description"})))}}]),r}(i.default.Component);a.default=h,h.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},h.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s=n(r(71)),i=n(r(49)),f=n(r(21)),d=n(r(50)),p=n(r(12)),m=n(r(13)),h=n(r(19)),v=n(r(20)),E=n(r(18)),y=n(r(74)),b=n(r(0)),g=n(r(1)),_=r(5),S=r(70),O=n(r(16)),C=n(r(73)),T=n(r(191)),R=r(25),D=n(r(795)),k=n(r(274)),N=n(r(814)),P=n(r(832)),I=r(813),w=n(r(2187));function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var x=(0,S.observer)((c=u=function(e){(0,h.default)(r,e);var a=j(r);function r(e){var n;return(0,p.default)(this,r),(n=a.call(this,e)).updateValuesYaml=function(){var e=n.fileStore.files;e&&e["values.yaml"]&&((0,C.default)(n.state.formData,"conf",e["values.yaml"]),n.setState({valuesYaml:e["values.yaml"],loadingFile:!1}))},n.versionOptionRender=function(e){var a=e.label,r=e.value;return b.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"",r===n.latestVersion&&b.default.createElement(R.Tag,{type:"warning"},t("LATEST_VERSION")))},n.fetchVersions=(0,d.default)(i.default.mark((function e(){var t,a,r=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},a=n.props.detail,e.abrupt("return",n.versionStore.fetchList(A(A({},t),{},{app_id:a.app_id})));case 3:case"end":return e.stop()}}),e)}))),n.handleVersionChange=function(e){var t=n.props.detail;(0,C.default)(n.state.formData,"version_id",e),n.setState({loadingFile:!0,valuesYaml:""}),n.fileStore.fetch({app_id:t.app_id,version_id:e}).then((function(){n.updateValuesYaml()}))},n.handleYamlChange=function(e){var t=n.state.formData;n.setState({valuesYaml:e},(function(){(0,C.default)(t,"conf",e)}))},n.handleOk=function(){n.props.onOk(n.state.formData)},n.state={currentStep:0,formData:A(A({},(0,T.default)(e.detail,["app_id","cluster_id","description","name","owner","version_id"])),{},{namespace:e.namespace,cluster:e.cluster,workspace:e.workspace}),valuesYaml:"",conf:(0,O.default)(e.detail,"env",""),loadingFile:!1},n.versionStore=new N.default,n.fileStore=new P.default,n}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){var e=this;this.setState({loadingFile:!0}),this.versionStore.fetchList({app_id:this.props.detail.app_id}),this.fileStore.fetch({app_id:this.props.detail.app_id,version_id:this.state.formData.version_id}).then((function(){e.updateValuesYaml()}))}},{key:"render",value:function(){var e=this.props.detail,a=this.state,r=a.valuesYaml,n=a.conf,l=a.loadingFile;return b.default.createElement(k.default,(0,s.default)({title:t("EDIT_APP_SETTINGS")},this.props,{onOk:this.handleOk,width:1280,okText:t("OK")}),b.default.createElement(R.Columns,null,b.default.createElement(R.Column,null,b.default.createElement("div",{className:w.default.label},t("CURRENT_APP_VERSION")),b.default.createElement(R.Input,{className:"margin-b12",value:e.version.name,readOnly:!0}),b.default.createElement("div",{className:w.default.label},t("CURRENT_APP_SETTINGS_READONLY")),b.default.createElement(R.Loading,{spinning:!1},b.default.createElement(D.default,{mode:"yaml",className:w.default.readOnly,value:n,options:{readOnly:!0}}))),b.default.createElement(R.Column,null,b.default.createElement("div",{className:w.default.label},t("TARGET_APP_VERSION")),b.default.createElement(R.Select,{name:"version_id",className:"margin-b12",value:this.state.formData.version_id,options:this.sortedVersions,placeholder:t("VERSION_EMPTY_DESC"),pagination:(0,T.default)(this.versionStore.list,["page","limit","total"]),isLoading:this.versionStore.list.isLoading,onFetch:this.fetchVersions,onChange:this.handleVersionChange,optionRenderer:this.versionOptionRender,valueRenderer:this.versionOptionRender}),b.default.createElement("div",{className:w.default.label},t("TARGET_APP_SETTINGS")),b.default.createElement(R.Loading,{spinning:l},b.default.createElement(D.default,{mode:"yaml",value:r,onChange:this.handleYamlChange})))))}},{key:"sortedVersions",get:function(){return this.versionStore.list.data.map((function(e){return{label:e.name,value:e.version_id}})).sort((function(e,t){return(0,I.compareVersion)(t.name,e.name)}))}},{key:"latestVersion",get:function(){return(0,O.default)(this.sortedVersions,"[0].value","")}}]),r}(b.default.Component),u.propTypes={visible:g.default.bool,detail:g.default.object,store:g.default.object,cluster:g.default.string,workspace:g.default.string,namespace:g.default.string,onOk:g.default.func,onCancel:g.default.func},u.defaultProps={visible:!1,detail:{},onOk:function(){},onCancel:function(){}},o=c,(0,y.default)(o.prototype,"sortedVersions",[_.computed],Object.getOwnPropertyDescriptor(o.prototype,"sortedVersions"),o.prototype),(0,y.default)(o.prototype,"latestVersion",[_.computed],Object.getOwnPropertyDescriptor(o.prototype,"latestVersion"),o.prototype),l=o))||l;a.default=x},function(e,t,a){e.exports={label:"_3uikzxbVhWftLhURgoCd7X",readOnly:"_3khog5JHAOn8kW0CFIpLvI"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(56)),c=l(r(21)),s=l(r(12)),i=l(r(13)),f=l(r(19)),d=l(r(20)),p=l(r(18)),m=n(r(0)),h=l(r(1)),v=l(r(16)),E=r(25),y=l(r(274)),b=l(r(2189)),g=l(r(2190)),_=l(r(1117));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=function(e){(0,f.default)(r,e);var a=O(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).getFormData=function(e){var t="https";if(e&&e.url){var a=e.url.match(/^(.*):\/\//);a[1]&&(t=a[1])}return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({type:t,name:"",sync_period:(0,v.default)(e,"sync_period","0s"),repoType:"Helm",visibility:"public",credential:"{}",providers:["kubernetes"]},e)},n.getSeconds=function(e){var t=e.slice(-1),a=e.slice(0,-1),r=parseFloat(e);if(r.toString()!==a)return 179;switch(t){default:case"s":return r;case"m":return 60*r;case"h":return 60*r*60}},n.timeValidator=function(e,a,r){var l=n.getSeconds(a);return l?/^[0-9]*$/.test(l)?0!==l&&(l>86400||l<180)?r({message:t("SYNC_INTERVAL_TIP")}):void r():r({message:t("SYNC_INTERVAL_INVALID")}):r()},n.handleSubmit=function(e){n.props.onOk(e).then((function(){n.setState({formData:n.getFormData({})})}))},n.handleCancel=function(){n.props.onCancel(),n.setState({formData:n.getFormData({})})},n.handleUrlValidate=function(e){n.setState({isValid:e.isValid})},n.formRef=m.default.createRef(),n.state={formData:n.getFormData(e.detail)},n}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.detail!==e.detail&&this.setState({formData:this.getFormData(this.props.detail)})}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.store,n=(e.onOk,e.onCancel,e.workspace),l=(0,u.default)(e,["detail","store","onOk","onCancel","workspace"]),c=a?"EDIT_APP_REPO":"ADD_APP_REPO";return m.default.createElement(y.default.Form,(0,o.default)({bodyClassName:_.default.body,title:t(c),icon:"firewall",width:691,data:this.state.formData,onOk:this.handleSubmit,onCancel:this.handleCancel},l),m.default.createElement(E.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")}]},m.default.createElement(E.Input,{name:"name",autoFocus:!0})),m.default.createElement(g.default,{store:r,workspace:n,formData:this.state.formData,onValidate:this.handleUrlValidate,isSubmitting:this.props.isSubmitting}),m.default.createElement(E.Form.Item,{label:t("SYNC_INTERVAL"),desc:t("SYNC_INTERVAL_DESC"),rules:[{required:!0,message:t("SYNC_PERIOD_EMPTY_DESC")},{validator:this.timeValidator}]},m.default.createElement(b.default,{name:"sync_period"})),m.default.createElement(E.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},m.default.createElement(E.TextArea,{name:"description",maxLength:256})))}}]),r}(m.Component);a.default=C,C.propTypes={store:h.default.object,detail:h.default.object,visible:h.default.bool,isSubmitting:h.default.bool,onOk:h.default.func,onCancel:h.default.func},C.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=r(25),d=n(r(1117));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleChangeValue=function(e,a){var r=t.props.onChange,n=t.state.unit;t.setState({value:a}),r(a?"".concat(a).concat(n):a)},t.handleChangeUnit=function(e){var a=t.props.onChange,r=t.state.value;t.setState({unit:e}),a(r?"".concat(r).concat(e):r)},t.state={value:e.value.slice(0,-1),unit:e.value.slice(-1)},t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.unit;return i.default.createElement("div",{className:d.default.timeInput},i.default.createElement(f.Input,{className:d.default.input,value:t,onChange:this.handleChangeValue}),i.default.createElement(f.Select,{className:d.default.select,value:a,options:this.options,onChange:this.handleChangeUnit}))}},{key:"options",get:function(){return[{label:t("SECONDS"),value:"s"},{label:t("MINUTES"),value:"m"},{label:t("HOURS"),value:"h"}]}}]),r}(i.default.Component);a.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s,i,f,d,p,m=n(r(21)),h=n(r(91)),v=n(r(12)),E=n(r(135)),y=n(r(13)),b=n(r(19)),g=n(r(20)),_=n(r(18)),S=n(r(74)),O=(n(r(92)),n(r(0))),C=n(r(1)),T=r(5),R=r(70),D=n(r(2191)),k=n(r(32)),N=n(r(16)),P=n(r(73)),I=n(r(879)),w=r(813),M=r(25),A=n(r(1117));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,m.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var F=/^(http|https|s3):\/\//,U=[{label:"http://",value:"http"},{label:"https://",value:"https"},{label:"s3://",value:"s3"}],V=(0,R.observer)((p=d=function(e){(0,b.default)(r,e);var a=L(r);function r(e){var n;(0,v.default)(this,r),n=a.call(this,e),(0,h.default)(n,"handleTypeChange",u,(0,E.default)(n)),(0,h.default)(n,"handleUrlChange",c,(0,E.default)(n)),(0,h.default)(n,"handleAccessInputChange",s,(0,E.default)(n)),(0,h.default)(n,"handleVerify",i,(0,E.default)(n)),(0,h.default)(n,"handleVerifyResult",f,(0,E.default)(n));var l=(0,N.default)(e.formData,"type","http"),o=n.getUrl(e.formData),d=n.getCredential(e.formData);return(0,T.extendObservable)((0,E.default)(n),{type:l,url:o,credential:d,validateStatus:"",validateStatusCode:0,isValid:!1}),n.validateSchema=new D.default({url:function(e,a,r){n.isValid&&"success"===n.validateStatus?r():r(new Error(t("INVALID_URL_DESC")))}}),n}return(0,y.default)(r,[{key:"store",get:function(){return this.props.store}}]),(0,y.default)(r,[{key:"getUrl",value:function(e){if(e.url){var t=new RegExp("^([\\s\\S]*?:\\/\\/)([\\s\\S]*)$","g").exec(e.url);return t?t[2]:""}return""}},{key:"getCredential",value:function(e){var t={accessKeyID:"",secretAccessKey:""};if(e.credential)try{return x(x({},t),JSON.parse(e.credential))}catch(e){}return t}},{key:"resetValidateStatus",value:function(){this.validateStatus="",this.validate()}},{key:"checkVerifyEnable",value:function(){if("validating"===this.validateStatus)return!1;if("s3"===this.type){var e=this.credential,t=e.accessKeyID,a=e.secretAccessKey;return!(0,k.default)(this.url)&&!(0,k.default)(t)&&!(0,k.default)(a)}return!(0,k.default)(this.url)}},{key:"validate",value:function(){var e=this.props,t=e.formData,a=e.onValidate;this.validateSchema.validate(t,{first:!0},(function(e,t){a({isValid:(0,k.default)(t)})}))}},{key:"render",value:function(){return O.default.createElement("div",{className:A.default.urlInput},this.renderField(),this.renderAccess())}},{key:"renderValidateStatus",value:function(){var e=this.validateStatus,a=this.validateStatusCode;if(""===e)return null;var r="validating"===e?O.default.createElement(M.Loading,{size:16}):O.default.createElement(M.Tooltip,{placement:"top",content:"success"===e?t("VALID_URL_DESC"):(0,w.checkRepoInvalidReason)(a)},O.default.createElement(M.Icon,{name:e}));return O.default.createElement("div",{className:A.default.validStatus},r)}},{key:"renderField",value:function(){return O.default.createElement("div",{className:A.default.field},O.default.createElement("label",{className:A.default.label},t("URL")),O.default.createElement("div",{className:A.default.fieldInput},O.default.createElement(M.Select,{className:A.default.protocol,value:this.type,options:U,onChange:this.handleTypeChange}),O.default.createElement(M.Input,{className:A.default.url,type:"text",name:"url",value:this.url,validateStatus:this.validateStatus,placeholder:"example.com",onChange:this.handleUrlChange}),this.renderValidateStatus(),"s3"!==this.type&&O.default.createElement(M.Button,{className:A.default.verifyBtn,onClick:this.handleVerify,disabled:!this.checkVerifyEnable()||this.props.isSubmitting},t("VALIDATE"))),O.default.createElement("div",{className:A.default.desc},t("APP_REPO_URL_DESC")))}},{key:"renderAccess",value:function(){return"s3"!==this.type?null:O.default.createElement("div",{className:A.default.access},O.default.createElement("div",{className:A.default.accessItem},O.default.createElement("label",{className:A.default.label},t("ACCESS_KEY_ID")),O.default.createElement(M.Input,{name:"accessKeyID",value:this.credential.accessKeyID,onChange:this.handleAccessInputChange})),O.default.createElement("div",{className:A.default.accessItem},O.default.createElement("label",{className:A.default.label},t("SECRET_ACCESS_KEY")),O.default.createElement(M.Input,{name:"secretAccessKey",value:this.credential.secretAccessKey,onChange:this.handleAccessInputChange})),O.default.createElement(M.Button,{className:A.default.verifyBtn,onClick:this.handleVerify,disabled:!this.checkVerifyEnable()||this.props.isSubmitting},t("VALIDATE")))}}]),r}(O.default.Component),d.propTypes={formData:C.default.object,onValidate:C.default.func,isSubmitting:C.default.bool},d.defaultProps={formData:{},onValidate:function(){},isSubmitting:!1},o=p,u=(0,S.default)(o.prototype,"handleTypeChange",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=e.props.formData;(0,P.default)(a,"credential","s3"===t?JSON.stringify(e.credential):"{}"),(0,P.default)(a,"type",t),e.type=t,F.test(e.url)||(0,P.default)(a,"url","".concat(t,"://").concat(e.url)),e.resetValidateStatus()}}}),c=(0,S.default)(o.prototype,"handleUrlChange",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var r=e.props.formData,n=(0,I.default)(a);(0,P.default)(r,"url",F.test(n)?n:"".concat(e.type,"://").concat(n)),e.url=n,e.resetValidateStatus()}}}),s=(0,S.default)(o.prototype,"handleAccessInputChange",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.target.name;e.credential[a]=t.target.value,(0,P.default)(e.props.formData,"credential",JSON.stringify(e.credential)),e.resetValidateStatus()}}}),i=(0,S.default)(o.prototype,"handleVerify",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.validateStatus="validating";var t=e.props.formData,a=t.url,r=t.credential;e.store.validate({type:e.type,url:a,workspace:e.props.workspace,credential:r}).then((function(t){e.handleVerifyResult(t.ok,t.errorCode)})).catch((function(){e.handleVerifyResult(!1)}))}}}),f=(0,S.default)(o.prototype,"handleVerifyResult",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.validateStatus=t?"success":"error",e.validateStatusCode=t?0:a,e.isValid=t,e.validate()}}}),(0,S.default)(o.prototype,"resetValidateStatus",[T.action],Object.getOwnPropertyDescriptor(o.prototype,"resetValidateStatus"),o.prototype),l=o))||l;a.default=V},,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(56)),c=l(r(12)),s=l(r(13)),i=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(1)),h=l(r(3)),v=r(25),E=l(r(274)),y=l(r(2214)),b=r(37),g=l(r(2216));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=function(e){(0,i.default)(r,e);var a=_(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=(0,u.default)(e,["visible","onOk"]),l=(0,b.getWebsiteUrl)().url;return p.default.createElement(E.default,(0,o.default)({width:600,bodyClassName:g.default.body,visible:a,hideHeader:!0},n),p.default.createElement("div",{className:(0,h.default)(g.default.header,"clearfix")},p.default.createElement("img",{src:"/assets/application.svg",alt:""}),p.default.createElement("div",{className:g.default.title}," ",t("CREATE_APP_TEMPLATE")),p.default.createElement("div",{className:g.default.description},t("CREATE_APP_TEMPLATE_DESC"))),p.default.createElement(y.default,{className:g.default.item,title:t("UPLOAD_HELM_TITLE"),show:!0},p.default.createElement("div",{className:g.default.more},p.default.createElement("div",{className:g.default.description},t("HELM_CHART_FORMAT_DESC")),p.default.createElement(v.Button,{type:"control",onClick:r},t("UPLOAD")),p.default.createElement("div",{className:g.default.note}," ",t.html("APP_CREATE_GUIDE",{docUrl:l})))))}}]),r}(p.Component);a.default=S,S.propTypes={visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func},S.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),l=r(a(12)),o=r(a(13)),u=r(a(19)),c=r(a(20)),s=r(a(18)),i=r(a(0)),f=a(1),d=r(a(3)),p=a(25),m=r(a(2215));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(a,e);var t=h(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={show:e.props.show,close:!1},e.toggle=function(){e.setState((function(e){return{show:!e.show}}))},e.close=function(){e.setState({close:!0})},e}return(0,o.default)(a,[{key:"render",value:function(){var e,t=this.props,a=t.className,r=t.title,l=t.hasClose,o=t.description,u=t.children,c=this.state,s=c.show,f=c.close;return i.default.createElement("div",{className:(0,d.default)(m.default.item,(e={},(0,n.default)(e,m.default.hideBg,!s),(0,n.default)(e,m.default.close,f),e),a)},i.default.createElement("div",{className:m.default.name,onClick:this.toggle},i.default.createElement(p.Icon,{name:s?"chevron-down":"chevron-right",size:20}),r,l&&!s&&i.default.createElement(p.Icon,{onClick:this.close,name:"close",size:20,className:m.default.closeIcon})),i.default.createElement("div",{className:(0,d.default)(m.default.detail,(0,n.default)({},m.default.more,!s))},o||u))}}]),a}(i.default.Component);t.default=v,v.propTypes={title:f.PropTypes.string,description:f.PropTypes.string,show:f.PropTypes.bool,hasClose:f.PropTypes.bool},v.defaultProps={title:"",description:"",show:!1,hasClose:!1}},function(e,t,a){e.exports={item:"_2R-OA2wgFv3mbPJKfBIaX7",hideBg:"aSyW8y8emrhSy2MBzQKcD",close:"_3VPiR9lK6WXBhSkrUNdy-H",name:"_33hMf-OF9XImHwm-LhooXh",closeIcon:"_3PIL0xxkZX8ydOOwdHurfc",detail:"QO8FskG69CUNwCFVUQSRe",more:"_3U3WzN-jhR4kf_IMbMjLGK"}},function(e,t,a){e.exports={body:"_3h99wEjjBu7dM8XLM260Si",header:"_28t6cMjRrw-hLtf4pMoFxM",title:"rZl0p0p0PvUroTZyEmQ0C",description:"CTcfpOJrLSYc8t6F5szin",item:"_1ytH-qXuR9Oiy1Assaixn0",more:"_39janX0J74H9bDKIZeydBs",note:"_2QwVboTlporGzzInUuRTuz"}},,,,,,function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,o,u,c=r(a(71)),s=r(a(56)),i=r(a(49)),f=r(a(50)),d=r(a(12)),p=r(a(13)),m=r(a(19)),h=r(a(20)),v=r(a(18)),E=n(a(0)),y=r(a(1)),b=a(5),g=a(70),_=r(a(16)),S=r(a(73)),O=r(a(191)),C=r(a(650)),T=r(a(185)),R=a(25),D=r(a(274)),k=r(a(2223)),N=r(a(2225)),P=r(a(2227)),I=r(a(1119)),w=r(a(832)),M=r(a(2230));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var j=(0,g.observer)((u=o=function(e){(0,m.default)(a,e);var t=A(a);function a(e){var r;return(0,d.default)(this,a),(r=t.call(this,e)).handleAppChange=(0,C.default)((function(e,t){var a=r.state.detail,n=(0,T.default)(a);(0,S.default)(n,t,e),r.setState({detail:n})}),200),r.handleOk=(0,f.default)(i.default.mark((function e(){var t,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,O.default)(r.state.detail,["app_id","name","abstraction","description","home","category_id","readme","workspace"]),(a=r.formRef.current)&&a.validate((function(){return r.props.onOk(t)}));case 3:case"end":return e.stop()}}),e)}))),r.onCancel=function(){var e=r.state.oldScreenshots;r.handleAppChange(e,"screenshots"),r.props.onCancel()},r.store=r.props.store,r.categoryStore=new I.default,r.fileStore=new w.default,r.formRef=E.default.createRef(),r.state={detail:(0,T.default)((0,b.toJS)(r.props.detail)),oldScreenshots:(0,_.default)(r.props.detail,"screenshots")},r}return(0,p.default)(a,[{key:"componentDidMount",value:function(){this.categoryStore.fetchList({noLimit:!0})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.isSubmitting,r=(e.onCancel,(0,s.default)(e,["visible","isSubmitting","onCancel"])),n=(0,b.toJS)((0,_.default)(this.categoryStore,"list.data",[])),l=this.state.detail;return E.default.createElement(D.default,(0,c.default)({},r,{className:M.default.modal,bodyClassName:M.default.body,onOk:this.handleOk,onCancel:this.onCancel,visible:t,isSubmitting:a,fullScreen:!0}),E.default.createElement(R.Columns,{className:"height-full is-gapless"},E.default.createElement(R.Column,{className:"is-narrow"},E.default.createElement(k.default,{store:this.store,formData:l,categories:n,fileStore:this.fileStore,formRef:this.formRef,handleChange:this.handleAppChange})),E.default.createElement(R.Column,null,E.default.createElement(N.default,{handleChange:this.handleAppChange,store:this.store,detail:l,fileStore:this.fileStore}),E.default.createElement(P.default,{handleChange:this.handleAppChange,store:this.store,detail:l}))))}}]),a}(E.Component),o.propTypes={store:y.default.object,detail:y.default.object,visible:y.default.bool,onOk:y.default.func,onCancel:y.default.func},o.defaultProps={store:{},detail:{},visible:!1,onOk:function(){},onCancel:function(){}},l=u))||l;t.default=j},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),o=n(r(49)),u=n(r(50)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(1),h=r(25),v=n(r(302)),E=n(r(295)),y=n(r(878)),b=n(r(293)),g=r(58),_=r(787),S=n(r(2224));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).checkPackage=function(){var e=(0,u.default)(o.default.mark((function e(a){var r,n,l,c,s,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.fileStore,n=r.checkFile,l=r.handleFileByBase64Str,c=r.validateImageSize,!(s=n(a,"icon"))){e.next=6;break}t.setState({error:s,base64Str:""}),e.next=9;break;case 6:return i=(0,E.default)(a.name.toLocaleLowerCase().split(".")),e.next=9,l(a,function(){var e=(0,u.default)(o.default.mark((function e(a){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="data:image/".concat("svg"===i?"svg+xml":i,";base64,").concat(a),e.next=4,c(r);case 4:e.sent?(t.handleAppChange(a,"icon"),t.props.store.uploadIcon(a),t.setState({error:"",base64Str:a})):t.setState({error:"FILE_MAX_SIZE_ICON",base64Str:""});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:return e.abrupt("return",Promise.reject());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleAppChange=function(e,a){t.props.handleChange(e,a)},t.state={base64Str:""},t}return(0,s.default)(r,[{key:"renderIcon",value:function(){var e=this.props.formData,a=this.state,r=a.base64Str,n=a.error;return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:S.default.uploadIcon},p.default.createElement("div",{className:S.default.iconShow},p.default.createElement(b.default,{className:S.default.image,isBase64Str:Boolean(r),src:r||e.icon,iconLetter:e.name,iconSize:96})),p.default.createElement("div",{className:S.default.word},p.default.createElement("div",{className:S.default.note},t("APP_ICON_FORMAT")," ",p.default.createElement("br",null),t("APP_ICON_SIZE")),p.default.createElement(y.default,{beforeUpload:this.checkPackage,accept:_.UPLOAD_FILE_TYPES.icon},p.default.createElement(h.Button,null,t("UPLOAD"))))),n&&p.default.createElement("div",{className:S.default.error},t(n)))}},{key:"render",value:function(){var e=this,a=this.props,r=a.formData,n=a.formRef,l=(0,v.default)(r.category_set,{status:"enabled"})||{};return r.category_id=r.category_id||l.category_id,p.default.createElement("div",{className:S.default.wrapper},p.default.createElement("div",{className:"h5"},t("BASIC_INFORMATION")),p.default.createElement(h.Form,{data:r,ref:n},p.default.createElement(h.Form.Item,{label:t("NAME"),desc:t("APP_NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")}]},p.default.createElement(h.Input,{name:"name",onChange:function(t){return e.handleAppChange(t,"name")},maxLength:20})),p.default.createElement(h.Form.Item,{label:t("DESCRIPTION"),desc:t("APP_DESCRIPTION_DESC")},p.default.createElement(h.TextArea,{name:"description",maxLength:120,onChange:function(t){return e.handleAppChange(t,"description")}})),p.default.createElement(h.Form.Item,{label:t("ICON"),className:S.default.upload},this.renderIcon()),p.default.createElement(h.Form.Item,{label:t("APP_CATEGORY"),desc:t("CHOOSE_APP_CATEGORY_DESC")},p.default.createElement(h.Select,{name:"category_id",options:this.categories,onChange:this.handleAppChange,placeholder:" "})),p.default.createElement(h.Form.Item,{label:t("SERVICE_PROVIDER_WEBSITE_TCAP"),desc:t("SERVICE_PROVIDER_WEBSITE_DESC"),rules:[{pattern:g.PATTERN_URL,message:t("WRONG_ADDRESS_TIP")}]},p.default.createElement(h.Input,{name:"home",onChange:function(t){return e.handleAppChange(t,"home")},maxLength:100}))))}},{key:"categories",get:function(){return(0,l.default)(this.props.categories.map((function(e){var a=e.name,r=e.category_id;return{label:t("APP_CATE_".concat(a.toUpperCase().replace(/[^A-Z]+/g,"_")),{defaultValue:a}),value:r}})))}}]),r}(p.default.Component);a.default=C,C.propTypes={formData:m.PropTypes.object,categories:m.PropTypes.array,handleChange:m.PropTypes.func,fileStore:m.PropTypes.object},C.defaultProps={formData:{},categories:[],handleChange:function(){},fileStore:function(){}}},function(e,t,a){e.exports={wrapper:"Rk4l1po88HDeYzazEMBN_",upload:"ys_3xaDsyuU_BwmYso3da",uploadIcon:"xazERK8IwIU5mMNlOh0ov",iconShow:"_2O2_iCxVqr5NIU8iXwgeKw",image:"dB9UI_QxazYVhoEEGXV2Q",word:"_3FSAieuafxZbkRTeupWSZ4",note:"_3SDtD1U6KJUZH49mws95gu",error:"BJosedTpMR7xNtx-4boXe"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(49)),s=n(r(50)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(70),E=n(r(1)),y=n(r(3)),b=r(25),g=n(r(16)),_=n(r(293)),S=n(r(878)),O=r(787),C=n(r(2226));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R=(0,v.observer)((u=o=function(e){(0,d.default)(r,e);var a=T(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={error:""},e.onUploadClick=function(){e.uploadRef.onClick()},e.uploadScreenshot=function(){var t=(0,s.default)(c.default.mark((function t(a,r){var n,l,o,u,i,f,d,p,m;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.fileStore,l=n.checkFile,o=n.handleFileByBase64Str,u=e.props.store.uploadScreenshot,i=e.props,f=i.detail,d=i.handleChange,(p=l(a,"screenshots"))?e.setState({error:p}):(m=r.indexOf(a),o(a,function(){var t=(0,s.default)(c.default.mark((function t(a){var r,n,l;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({error:""}),r=(0,g.default)(f,"screenshots",""),n=r?r.split(","):[],t.next=5,u(a,n,m);case 5:l=t.sent,d(l,"screenshots");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),t.abrupt("return",Promise.reject());case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.deleteScreenshot=function(){var t=(0,s.default)(c.default.mark((function t(a,r){var n,l,o,u,s;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,l=n.handleChange,o=n.store,u=o.deleteScreenshot,t.next=4,u(a,r);case 4:s=t.sent,l(s,"screenshots");case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return(0,f.default)(r,[{key:"render",value:function(){var e=this,a=this.state.error,r=this.props.detail,n=(0,g.default)(r,"screenshots",""),l=n?n.split(","):[],o=l.length;return h.default.createElement("div",null,h.default.createElement("div",{className:C.default.title},t("APP_SCREENSHOTS")),h.default.createElement("div",{className:C.default.screenshot},h.default.createElement("ul",{className:C.default.pictures},l.map((function(a,n){return h.default.createElement("li",{key:n},h.default.createElement(_.default,{src:a,isBase64Str:!0}),h.default.createElement("div",{className:C.default.delete},h.default.createElement("label",{onClick:function(){e.deleteScreenshot(n,r)}},h.default.createElement(b.Icon,{name:"trash",size:20,className:C.default.icon}),t("DELETE"))))})),o<O.SCREENSHOTS_LIMIT&&h.default.createElement("li",{className:C.default.upload},h.default.createElement(S.default,{multiple:!0,className:C.default.upload,beforeUpload:this.uploadScreenshot,ref:function(t){e.uploadRef=t},accept:O.UPLOAD_FILE_TYPES.screenshot},h.default.createElement(b.Icon,{name:"add",size:48,className:C.default.add})))),a?h.default.createElement("div",{className:C.default.error},t(this.state.error)):h.default.createElement("div",{className:C.default.words},t("SCREENSHOTS_COLON"),o,"/",O.SCREENSHOTS_LIMIT,t("FILE_MAX_SCREENSHOTS"),o>0?h.default.createElement("label",{className:C.default.deleteAll,onClick:function(){e.deleteScreenshot(-1,r)}},t("DELETE_ALL")):h.default.createElement("label",{className:(0,y.default)(C.default.deleteAll,C.default.disabled)},t("DELETE_ALL")))))}}]),r}(h.default.Component),o.propTypes={detail:E.default.object,store:E.default.object,fileStore:E.default.object},o.defaultProps={detail:{},store:{},fileStore:function(){}},l=u))||l;a.default=R},function(e,t,a){e.exports={title:"_2uPiYzFDOXR72WfG9uGqfU",screenshot:"_2YKRw87avTolrxMvvqKdUw",pictures:"_2mut4J5F7tqeF_yGoONfAl",upload:"_3Y5SOweqK4JOLgJYTWXwWB",add:"svj73vqzmkHDs00vaMNKa",delete:"_2CvCSpyGVDD7j2kE2aPl6g",icon:"_19kdNNakltP3B4lu8OnnPQ",error:"gtPg-cI0R-ryIQiNIwS3N",words:"_2w8iv_6c2wn1jOzU9DFnYk",disabled:"LwrGabyBVUqWJUr4TYWl",deleteAll:"_2nkH5dSh2jhtOpVwtll5Dp"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(1)),v=n(r(2228)),E=n(r(2229));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b={h1:!0,h2:!0,h3:!0,h4:!0,img:!1,link:!0,code:!0,preview:!0,expand:!0,undo:!0,redo:!0,save:!1,subfield:!0},g=(0,m.observer)((u=o=function(e){(0,i.default)(r,e);var a=y(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleChange=function(e){t.setState({readme:e}),t.props.handleChange(e,"abstraction")},t.state={readme:e.detail.abstraction},t}return(0,s.default)(r,[{key:"render",value:function(){var e=this.state.readme;return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:E.default.header},t("APP_INTRODUCTION")),p.default.createElement("div",{className:E.default.readmeEdit},p.default.createElement(v.default,{value:e,onChange:this.handleChange,placeholder:t("START_EDITING"),toolbar:b})))}}]),r}(p.default.Component),o.propTypes={detail:h.default.object,store:h.default.object,handleChange:h.default.func},o.defaultProps={detail:{},store:{},handleChange:function(){}},l=u))||l;a.default=g},,function(e,t,a){e.exports={header:"ovSS-AWa-ZyP2A-ngZTMO",readmeEdit:"Y_xQq9aBBqoFkxZrwNVBS"}},function(e,t,a){e.exports={modal:"BdK5ZaX-xYe3UCP_Y1MKV",body:"_2yuMHphDy5tXJVP5ZG_oka"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(71)),s=n(r(56)),i=n(r(49)),f=n(r(21)),d=n(r(50)),p=n(r(12)),m=n(r(13)),h=n(r(19)),v=n(r(20)),E=n(r(18)),y=n(r(0)),b=n(r(1)),g=r(70),_=n(r(16)),S=r(25),O=n(r(274)),C=n(r(1324)),T=n(r(1325)),R=n(r(814)),D=n(r(832)),k=r(37),N=n(r(2238)),P=n(r(2240));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var A=(0,g.observer)((u=o=function(e){(0,h.default)(n,e);var a,r=M(n);function n(e){var t;return(0,p.default)(this,n),(t=r.call(this,e)).handlePrev=function(){t.setState((function(e){var t=e.currentStep;return{currentStep:Math.max(0,t-1)}}))},t.handleNext=function(){var e=t.formRef.current;e&&e.validate((function(){t.setState((function(e){var a=e.currentStep;return{currentStep:Math.min(t.steps.length-1,a+1)}}))}))},t.handleOk=function(){var e=t.formRef.current;e&&e.validate((function(){t.props.onOk(t.state.formData)}))},t.state={currentStep:0,formData:{app_id:e.app.app_id,name:"".concat(e.app.name.slice(0,7).toLowerCase().replaceAll(" ","-"),"-").concat((0,k.generateId)()),version_id:e.versionId,namespace:e.namespace,cluster:e.cluster,workspace:e.workspace},intializing:!0},t.versionStore=new R.default,t.fileStore=new D.default,t.formRef=y.default.createRef(),t}return(0,m.default)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:(a=(0,d.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.versionStore.fetchList({app_id:this.props.app.app_id});case 2:return this.state.formData.version_id||this.setState({formData:w(w({},this.state.formData),{},{version_id:(0,_.default)(this.versionStore,"list.data[0].version_id","")})}),e.next=5,this.fileStore.fetch({app_id:this.props.app.app_id,version_id:this.state.formData.version_id});case 5:this.setState({intializing:!1});case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderSteps",value:function(){return y.default.createElement("div",{className:P.default.steps},y.default.createElement(N.default,{steps:this.steps,current:this.state.currentStep}))}},{key:"renderForm",value:function(){var e=this.props,t=e.app,a=e.cluster,r=e.workspace,n=e.namespace,l=e.versionId,o=this.state,u=o.formData,c=o.currentStep;if(o.intializing)return y.default.createElement(S.Loading,{className:P.default.loading});var s=this.steps[c],i=s.component,f={formData:u,cluster:a,workspace:r,namespace:n,versionId:l,versionStore:this.versionStore,fileStore:this.fileStore,appId:t.app_id};return s.isForm?f.formRef=this.formRef:f.ref=this.formRef,y.default.createElement("div",{className:P.default.form},y.default.createElement(i,f))}},{key:"renderFooter",value:function(){var e=this.state.currentStep,a=this.steps.length-1;return y.default.createElement("div",{className:P.default.footer},e>0&&y.default.createElement(S.Button,{type:"control",onClick:this.handlePrev},t("PREVIOUS")),e<a?y.default.createElement(S.Button,{type:"control",onClick:this.handleNext},t("NEXT")):y.default.createElement(S.Button,{type:"control",onClick:this.handleOk,loading:this.props.store.isSubmitting},t("INSTALL")))}},{key:"render",value:function(){var e=this.props,t=e.app,a=(e.versionId,e.onOk,e.onCancel),r=(e.isSubmitting,(0,s.default)(e,["app","versionId","onOk","onCancel","isSubmitting"]));return y.default.createElement(O.default,(0,c.default)({bodyClassName:P.default.body,imageIcon:t.icon||t.name,title:t.name,description:t.description,onCancel:a,rightScreen:!0,hideFooter:!0},r),this.renderSteps(),this.renderForm(),this.renderFooter())}},{key:"steps",get:function(){return[{title:"BASIC_INFORMATION",component:C.default,required:!0,isForm:!0},{title:"APP_SETTINGS",component:T.default,required:!0}]}}]),n}(y.default.Component),o.propTypes={visible:b.default.bool,app:b.default.object,store:b.default.object,cluster:b.default.string,workspace:b.default.string,namespace:b.default.string,versionId:b.default.string,onOk:b.default.func,onCancel:b.default.func},o.defaultProps={visible:!1,app:{},onOk:function(){},onCancel:function(){}},l=u))||l;a.default=A},,,,,,,function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(3)),m=l(r(2239));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,s.default)(r,e);var a=h(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.steps,r=e.current;return d.default.createElement("div",{className:m.default.wrapper},a.map((function(e,a){var n;return d.default.createElement("div",{key:e.title},d.default.createElement("span",{className:(0,p.default)(m.default.indicator,(n={},(0,o.default)(n,m.default.fullfill,r>a),(0,o.default)(n,m.default.current,r===a),(0,o.default)(n,m.default.pending,r<a),n))}),d.default.createElement("span",null,t(e.title)))})))}}]),r}(d.Component);a.default=v},function(e,t,a){e.exports={wrapper:"_1rMJfMVFnxLy1REsL1b0d2",indicator:"_1AbVJwEGRYpTCxZ4fg8_sj",pending:"_1G5x995omZkUPUMTKD4tAN",current:"_2bAp9vrnpwq4_uGyp0SW3g",fullfill:"GN3iaoOEvA_qq-V2O-jXe"}},function(e,t,a){e.exports={body:"llEBCzPZ3tg-xtEiqsqId",form:"_1CBuVzX83GlsKJl1N68JLM",steps:"_3GIS02Ma2AO6qKKu1n_m0z",footer:"_3huyye8nSYCWnxBm26xXvq",loading:"_1A8KLi4Z4xBf-34211Mprr"}},,function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c,s=n(r(71)),i=n(r(21)),f=n(r(56)),d=n(r(49)),p=n(r(50)),m=n(r(12)),h=n(r(13)),v=n(r(19)),E=n(r(20)),y=n(r(18)),b=l(r(0)),g=n(r(1)),_=r(70),S=n(r(3)),O=r(25),C=n(r(16)),T=r(5),R=n(r(274)),D=n(r(293)),k=n(r(2243)),N=n(r(2245)),P=n(r(2247)),I=n(r(1118)),w=n(r(2249)),M=n(r(862)),A=n(r(814)),j=n(r(832)),x=n(r(2251));function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,E.default)(this,a)}}var F=O.Tabs.TabPanel,U=(0,_.observer)((c=u=function(e){(0,v.default)(r,e);var a=L(r);function r(e){var t;return(0,m.default)(this,r),(t=a.call(this,e)).fetchData=function(e){var a=e.detail;t.store.fetchDetail({app_id:a.app_id}),t.versionStore.fetchDetail({app_id:a.app_id,version_id:a.version_id}),t.fileStore.fetch({app_id:a.app_id,version_id:a.version_id})},t.getPackageName=function(){var e=t.props.detail,a=(0,C.default)(t.versionStore,"detail.package_name");return!a||a.startsWith("att-")?"".concat(e.app_name,"-").concat(e.version_name):a},t.handleTabChange=function(){var e=(0,p.default)(d.default.mark((function e(a){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({tab:a});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.store=new M.default,t.versionStore=new A.default,t.fileStore=new j.default,t.state={tab:"appInfo"},t}return(0,h.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.fetchData(this.props)}},{key:"componentDidMount",value:function(){this.props.visible&&this.fetchData(this.props)}},{key:"renderBaseInfo",value:function(){var e=(0,T.toJS)(this.store.detail),a=(0,T.toJS)(this.versionStore.detail),r=(0,C.default)(e,"screenshots",""),n=r?r.split(","):[],l=n.length;return b.default.createElement(b.default.Fragment,null,b.default.createElement(k.default,{detail:e,versionName:a.name}),b.default.createElement("div",{className:x.default.screenshots},b.default.createElement("div",{className:x.default.title},t("APP_SCREENSHOTS")),l>0?b.default.createElement("ul",null,n.map((function(e,t){return b.default.createElement("li",{key:t},b.default.createElement(D.default,{src:e}))}))):b.default.createElement("p",null,t("NONE"))))}},{key:"renderConfigFiles",value:function(){var e=this.versionStore.detail,t=this.fileStore.files;return b.default.createElement("div",null,b.default.createElement(I.default,{className:x.default.downloadInfo,fileStore:this.fileStore,packageName:this.getPackageName(),updateTime:e.update_time||e.status_time,appId:e.app_id,versionId:e.version_id,hasPackage:!0}),b.default.createElement(P.default,{files:t}))}},{key:"renderFooter",value:function(){var e=this.props,a=e.isSubmitting,r=e.onReject,n=e.onOk;return b.default.createElement("div",{className:x.default.footer},b.default.createElement(O.Button,{type:"danger",onClick:r},t("REJECT")),b.default.createElement(O.Button,{type:"control",loading:a,disabled:a,onClick:n},t("APPROVE")))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.canHandle,n=(0,f.default)(e,["visible","canHandle"]),l=(0,T.toJS)(this.versionStore.detail),o=this.state.tab,u=(0,C.default)(this.fileStore,"files",{})["README.md"];return b.default.createElement(R.default,(0,s.default)({bodyClassName:(0,S.default)(x.default.body,(0,i.default)({},x.default.hideFooter,!r)),visible:a},n,{rightScreen:!0,hideFooter:!0}),b.default.createElement(O.Tabs,{type:"button",activeName:o,onChange:this.handleTabChange},b.default.createElement(F,{label:t("APP_INFORMATION"),name:"appInfo"},this.renderBaseInfo()),b.default.createElement(F,{label:t("DOCUMENTATION"),name:"readme"},b.default.createElement(N.default,{readme:u})),b.default.createElement(F,{label:t("CHART_FILES"),name:"configFiles"},this.renderConfigFiles()),b.default.createElement(F,{label:t("UPDATE_LOG"),name:"updateLog"},b.default.createElement(w.default,{description:l.description}))),r&&this.renderFooter())}}]),r}(b.Component),u.propTypes={visible:g.default.bool,canHandle:g.default.bool,detail:g.default.object,onReject:g.default.func,onOk:g.default.func,onCancel:g.default.func},u.defaultProps={visible:!1,canHandle:!1,detail:{},onReject:function(){},onOk:function(){},onCancel:function(){}},o=c))||o;a.default=U},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(70),v=n(r(293)),E=n(r(953)),y=n(r(2244));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var g=(0,h.observer)((u=o=function(e){(0,i.default)(r,e);var a=b(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"renderBase",value:function(){var e=this.props,a=e.detail,r=e.versionName,n=a.home?/^https?:\/\//.test(a.home)?a.home:"http://".concat(a.home):a.home;return p.default.createElement("div",{className:y.default.base},p.default.createElement("div",{className:y.default.title},t("BASIC_INFORMATION")),p.default.createElement("div",{className:y.default.info},p.default.createElement("div",{className:y.default.icon},p.default.createElement(v.default,{src:a.icon,iconLetter:a.name,iconSize:100})),p.default.createElement("div",{className:y.default.words},p.default.createElement("dl",null,p.default.createElement("dd",null,a.name),p.default.createElement("dt",null,t("NAME"))),p.default.createElement("dl",null,p.default.createElement("dd",null,p.default.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},a.home),!a.home&&p.default.createElement("span",null,"-")),p.default.createElement("dt",null,t("SERVICE_PROVIDER_WEBSITE")))),p.default.createElement("div",null,p.default.createElement("dl",null,p.default.createElement("dd",null,r),p.default.createElement("dt",null,t("VERSION"))),p.default.createElement("dl",null,p.default.createElement("dd",null,a.isv),p.default.createElement("dt",null,t("WORKSPACE"))))),p.default.createElement("div",{className:y.default.description},p.default.createElement("dl",null,p.default.createElement("pre",null,a.description||"-"),p.default.createElement("dt",null,t("INTRODUCTION")))),p.default.createElement("div",{className:y.default.title},t("APP_DESCRIPTION")),p.default.createElement("div",null,p.default.createElement(E.default,{source:a.abstraction||t("NONE")})))}},{key:"render",value:function(){return p.default.createElement("div",{className:y.default.main},this.renderBase())}}]),r}(p.default.Component),o.propTypes={detail:m.default.object,versionName:m.default.string},o.defaultProps={detail:{},versionName:""},l=u))||l;a.default=g},function(e,t,a){e.exports={base:"_3RhG54Afc3jTrbfar2yUo0",info:"_2pPSF0uuUVhnDFREH_W1RE",icon:"sN1v3yg2lJsboH2B2H53J",words:"vEULlxo--39bvTHCeQZnd",description:"_1Sv5X8JxKxpsz_-ZoHkVMt",title:"_1PRTS92xyJ2yUX613onuo4"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=n(r(953)),p=n(r(2246));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.readme;return e?i.default.createElement(d.default,{source:e,className:p.default.markdown}):i.default.createElement("p",null,t("NO_DOCUMENT_FOUND"))}}]),r}(i.default.PureComponent);a.default=h,h.propTypes={readme:f.default.string},h.defaultProps={readme:""}},function(e,t,a){e.exports={markdown:"V_-mqFB-1z1gAg3djZCMg"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s,i=n(r(21)),f=n(r(91)),d=n(r(12)),p=n(r(13)),m=n(r(135)),h=n(r(19)),v=n(r(20)),E=n(r(18)),y=(n(r(92)),n(r(74))),b=n(r(0)),g=r(70),_=r(25),S=r(5),O=r(821),C=n(r(3)),T=n(r(1049)),R=n(r(795)),D=n(r(2248));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var N=(0,g.observer)((o=function(e){(0,h.default)(r,e);var a=k(r);function r(e){var t;return(0,d.default)(this,r),(t=a.call(this,e)).DEFAULT_PREVIEW_FILE="values.yaml",(0,f.default)(t,"changeMode",u,(0,m.default)(t)),(0,f.default)(t,"changeSelectFile",c,(0,m.default)(t)),(0,f.default)(t,"changePreviewType",s,(0,m.default)(t)),t.handleDownload=function(){var e=t.props.files[t.selectFile];"yaml"===t.mode?t.downloadAsYaml(e):"json"===t.mode&&t.downloadAsJSON(e)},(0,S.extendObservable)((0,m.default)(t),{selectFile:t.defaultSelectFile,mode:"yaml"}),t}return(0,p.default)(r,[{key:"downloadAsJSON",value:function(e){var t=this.selectFile.replace(/yaml$/,"json"),a="";try{a=JSON.stringify(T.default.safeLoad(e),null,2)}catch(e){a=e}this.saveAs(a,t)}},{key:"downloadAsYaml",value:function(e){var t=this.selectFile;this.saveAs(e,t)}},{key:"saveAs",value:function(e,t){var a=new Blob([e],{type:"text/plain;charset=utf-8"});(0,O.saveAs)(a,t)}},{key:"render",value:function(){return this.selectFile?b.default.createElement("div",{className:D.default.wrapper},b.default.createElement("div",{className:D.default.topbar},b.default.createElement("div",{className:D.default.icon},b.default.createElement(_.Icon,{name:"coding",size:20}),b.default.createElement("span",null,t("CHART_FILES"))),this.renderFileSelect()),b.default.createElement("div",{className:D.default.edit},this.renderPreviewToolbar(),this.renderPreviewContent())):b.default.createElement("p",null,t("NO_APP_CHART_FILE_FOUND"))}},{key:"renderFileSelect",value:function(){return b.default.createElement(_.Select,{defaultValue:this.selectFile,onChange:this.changeSelectFile,options:this.fileOptions})}},{key:"renderPreviewToolbar",value:function(){return b.default.createElement("div",{className:D.default.toolbar},b.default.createElement(_.Icon,{className:D.default.download,name:"download",size:20,color:{primary:"#fff"},onClick:this.handleDownload,clickable:!0,changeable:!0}))}},{key:"renderPreviewTypeBtn",value:function(e,t){var a=this;return b.default.createElement("span",{className:(0,C.default)(D.default.preview_btn,(0,i.default)({},D.default.active,this.mode===e)),onClick:function(){return a.changePreviewType(e)}},t)}},{key:"renderPreviewContent",value:function(){return b.default.createElement(R.default,{mode:this.mode,value:this.props.files[this.selectFile],options:{readOnly:!0}})}},{key:"fileOptions",get:function(){var e=this.props.files,t=void 0===e?{}:e;return Object.keys(t).map((function(e){return{label:e,value:e}}))}},{key:"defaultSelectFile",get:function(){var e=this.props.files,t=(void 0===e?{}:e)[this.DEFAULT_PREVIEW_FILE],a=this.fileOptions.length?this.fileOptions[0].value:"";return t?this.DEFAULT_PREVIEW_FILE:a}}]),r}(b.default.Component),(0,y.default)(o.prototype,"fileOptions",[S.computed],Object.getOwnPropertyDescriptor(o.prototype,"fileOptions"),o.prototype),(0,y.default)(o.prototype,"defaultSelectFile",[S.computed],Object.getOwnPropertyDescriptor(o.prototype,"defaultSelectFile"),o.prototype),u=(0,y.default)(o.prototype,"changeMode",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.mode=t}}}),c=(0,y.default)(o.prototype,"changeSelectFile",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectFile=t}}}),s=(0,y.default)(o.prototype,"changePreviewType",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.mode=t}}}),l=o))||l;a.default=N},function(e,t,a){e.exports={wrapper:"C9RBDezZTSZ9wuANVHPsi",topbar:"_1qDSB0O58SB7_GXNCw7_dc",icon:"_3srqZVcOkSMEixaltbPZi7",edit:"_2jL4KvBNHuC4jU_RiiIi4_",toolbar:"_2_GUQMPwxTWMMjXHWFT_Ka",download:"_3jjk2LxhatXGcY7nGnb2Fl",preview_btn:"_20Qa4VKbEwotZP_JgGCEar",active:"_3QE1zwmNIDX4CN7ZNPOTga"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=n(r(2250));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.description;return i.default.createElement("div",{className:d.default.main},i.default.createElement("div",{className:d.default.title},t("UPDATE_LOG")),i.default.createElement("pre",{className:d.default.updateLog},e||t("NO_UPDATE_LOG_DESC")))}}]),r}(i.default.PureComponent);a.default=m,m.propTypes={description:f.default.string},m.defaultProps={description:""}},function(e,t,a){e.exports={main:"_2u4FA6A7MCUfIFe4Z8dqKO",title:"_1xP27HuPsxtLPGTg0MT-St"}},function(e,t,a){e.exports={body:"_2IouoNUd7iTI3nxkqsDwX7",hideFooter:"_3c8gxa4F0ILHsBRr299LfN",downloadInfo:"_3KDp6pP6cAe17QzOMgHY9_",screenshots:"_2hMAd_6nxqkUS9UaXkSw-a",title:"_1CJO5lsaTds2qNIyfcMs4u",footer:"_3qPgJzENw1ErWJvWwB6Ij6"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(56)),c=l(r(12)),s=l(r(13)),i=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(1)),h=r(25),v=l(r(274)),E=l(r(2253));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=y(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleReject=function(){return t.formRef.validate((function(){return t.props.onOk({version_id:t.props.versionId,message:t.state.message})}))},t.changeMessage=function(e){t.setState({message:e})},t.state={message:""},t}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=(0,u.default)(a,["visible"]),l={message:this.state.message};return p.default.createElement(v.default,(0,o.default)({width:600,visible:r},n,{onOk:this.handleReject,footerClassName:E.default.footer}),p.default.createElement(h.Form,{data:l,ref:function(t){e.formRef=t},className:E.default.rejectForm},p.default.createElement(h.Form.Item,{rules:[{required:!0,message:t("REJECT_REASON_TIP")}]},p.default.createElement(h.TextArea,{name:"message",onChange:this.changeMessage}))))}}]),r}(p.Component);a.default=b,b.propTypes={versionId:m.default.string,onOk:m.default.func,onCancel:m.default.func},b.defaultProps={versionId:"",onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={rejectForm:"_2HRp9_fNHxQCirZ1195MMj",footer:"_2lsP4pTvid2tIQnqGzOeDI"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(21)),c=l(r(56)),s=l(r(12)),i=l(r(13)),f=l(r(19)),d=l(r(20)),p=l(r(18)),m=n(r(0)),h=l(r(1)),v=l(r(3)),E=r(25),y=l(r(745)),b=l(r(274)),g=r(787),_=l(r(2255));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O=function(e){(0,f.default)(r,e);var a=S(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).changeName=function(e){n.setState({name:e})},n.changeIcon=function(e){n.setState({description:e})},n.nameValidator=function(e,a,r){if(!a)return r();var l=n.props,o=l.detail,u=l.categoryNames;if(a!==o.name&&u.includes(a))return r({message:t("NAME_EXIST_DESC"),field:e.field});r()},n.createOrModify=function(){var e={name:n.state.name,description:n.state.description,locale:"{}"},t=n.props.detail.category_id;t&&(e.category_id=t),n.formRef.validate((function(){n.props.onOk(e)}))},n.onCancel=function(){n.setState({name:"",description:""}),n.props.onCancel()},n.state={name:n.props.detail.name,description:n.props.detail.description},n}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.detail;(0,y.default)(t,e.detail)||this.setState({name:t.name,description:t.description})}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=(0,c.default)(a,["visible"]),l={name:this.state.name,description:this.state.description};return m.default.createElement(b.default,(0,o.default)({width:600,visible:r,footerClassName:_.default.footer},n,{onOk:this.createOrModify,onCancel:this.onCancel}),m.default.createElement(E.Form,{data:l,ref:function(t){e.formRef=t}},m.default.createElement(E.Form.Item,{label:t("NAME"),desc:t("CATEGORY_NAME_DESC"),rules:[{required:!0,message:t("ENTER_CATEGORY_NAME_TIP")},{validator:this.nameValidator}]},m.default.createElement(E.Input,{name:"name",onChange:this.changeName,maxLength:20})),m.default.createElement(E.Form.Item,{label:t("ICON")},m.default.createElement("div",{name:"description",className:_.default.icons,value:l.description},g.CATEGORY_ICONS.map((function(t){return m.default.createElement("label",{key:t,onClick:function(){return e.changeIcon(t)},className:(0,v.default)((0,u.default)({},_.default.active,t===l.description))},m.default.createElement(E.Icon,{name:t,size:20}))}))))))}}]),r}(m.Component);a.default=O,O.propTypes={detail:h.default.object,categoryNames:h.default.array,onOk:h.default.func,onCancel:h.default.func},O.defaultProps={detail:{},categoryNames:[],onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={footer:"_2Qp-Oq8oA7HhDGSXylc-1b",icons:"XKu-mU-Dz1wbD5ksgEs7z",active:"_3i5IWpdoNOUzlLf-hGhkbI"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(109)),u=l(r(71)),c=l(r(12)),s=l(r(13)),i=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(1)),h=r(25),v=l(r(274)),E=l(r(2257));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=y(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleChange=function(e){t.setState({categoryId:e})},t.adjustCategory=function(){t.props.onOk({category_id:t.state.categoryId})},t.onCancel=function(){t.setState({categoryId:""}),t.props.onCancel()},t.state={categoryId:t.props.categoryId},t}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=Object.assign({},this.props),r={category_id:this.state.categoryId};return p.default.createElement(v.default,(0,u.default)({width:600,footerClassName:E.default.footer},a,{onOk:this.adjustCategory,onCancel:this.onCancel}),p.default.createElement(h.Form,{className:E.default.form,data:r,ref:function(t){e.formRef=t}},p.default.createElement(h.Form.Item,{label:t("CHANGE_CATEGORY"),desc:t("CHANGE_CATEGORY_DESC")},p.default.createElement(h.Select,{name:"category_id",options:this.categories,value:this.state.categoryId,onChange:this.handleChange}))))}},{key:"categories",get:function(){return(0,o.default)(this.props.categories.map((function(e){var a=e.name,r=e.category_id;return{label:t("APP_CATE_".concat(a.toUpperCase().replace(/[^A-Z]+/g,"_")),{defaultValue:a}),value:r}})))}}]),r}(p.Component);a.default=b,b.propTypes={categories:m.default.array,categoryId:m.default.string,onOk:m.default.func,onCancel:m.default.func},b.defaultProps={categories:[],categoryId:"",onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={footer:"_2TvTf_D-_JM0vtni7wgWQZ",form:"_3wLMP_UWlRBwrQYi452Fek"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(56)),c=l(r(12)),s=l(r(13)),i=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(1)),h=r(25),v=l(r(274)),E=l(r(2259));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=y(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChangeCheck=function(e){localStorage.setItem("".concat(globals.user.username,"-app-agreement"),e)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=(0,u.default)(e,["visible","onOk"]);return p.default.createElement(v.default,(0,o.default)({width:600,bodyClassName:E.default.body,visible:a,hideHeader:!0,onOk:r,okText:t("AGREE")},n),p.default.createElement("div",{className:E.default.wrapper},p.default.createElement("img",{src:"/assets/app-safety.svg",alt:""}),p.default.createElement("div",{className:E.default.content},p.default.createElement("div",{className:E.default.title}," ",t("APP_DEPLOY_AGREEMENT")),p.default.createElement("ul",null,p.default.createElement("li",null,t("APP_DEPLOY_AGREEMENT_DESC_1")),p.default.createElement("li",null,t("APP_DEPLOY_AGREEMENT_DESC_2"))),p.default.createElement(h.Checkbox,{onChange:this.handleChangeCheck},t("DO_NOT_REMIND_AGAIN")))))}}]),r}(p.Component);a.default=b,b.propTypes={visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func},b.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"_1yenBd_xxty8LIDUQZfbje",wrapper:"_1hbebsdjZ3ZpoZNh-lJuTR",content:"_2sujFFe0rBgZgjurei191W",title:"_2ZVasVLtnF01STWETyn4LD"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=r(5),i=r(25),f=n(r(274)),d=n(r(760)),p=n(r(766)),m=n(r(2261)),h=n(r(1330)),v=n(r(2268)),E=n(r(2269)),y=n(r(2270)),b=n(r(2272)),g=r(2318),_=r(912),S=n(r(2328)),O=n(r(16)),C=n(r(32));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=e.type.toLowerCase().split("parameterdefinition")[0],a=(0,O.default)(e,"defaultParameterValue.value"),r=e.name,n=(0,O.default)(e,"choices",[]),l={};switch(t){case"choice":l={name:r,value:a||n[0]};break;default:l={name:r,value:a}}return l}var k={"pipeline.create":{on:function(e){var a,r=e.store,n=e.cluster,u=e.devops,s=(e.workspace,e.module),d=e.success,m=e.formTemplate,h=(0,c.default)(e,["store","cluster","devops","workspace","module","success","formTemplate"]),v=f.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_.updatePipelineParams)(a),(0,_.updatePipelineParamsInSpec)(a,u),e.next=4,r.createPipeline({data:a,devops:u,cluster:n});case 4:f.default.close(v),i.Notify.success({content:t("CREATE_SUCCESSFUL")}),d&&d();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,module:s,cluster:n,devops:u,formTemplate:m,modal:p.default,steps:g.PIPELINE_PROJECT_CREATE_STEPS,noCodeEdit:!0},h))}},"pipeline.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,p=e.devops,m=e.cluster,h=(0,c.default)(e,["store","success","rowKey","devops","cluster"]),v=(0,s.toJS)(r.list),E=v.data,y=v.selectedRowKeys,b=E.filter((function(e){return y.includes(e[u])})).map((function(e){return e.name})),g=f.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],E.forEach((function(e){b.includes(e.name)&&a.push(r.delete({name:e.name,devops:p,cluster:m}))})),e.next=4,Promise.all(a);case 4:f.default.close(g),i.Notify.success({content:t("DELETE_SUCCESSFUL")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:b.join(", "),modal:d.default,store:r},h))}},"pipeline.batch.run":{on:function(e){return(0,o.default)(l.default.mark((function a(){var r,n,u,c,f,d,p,m,h,v;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.store,n=e.success,u=e.rowKey,c=e.devops,f=e.cluster,d=(0,s.toJS)(r.list),p=d.data,m=d.selectedRowKeys,i.Notify.success({content:1===p.length?t("PIPELINE_RUN_START_SI"):t("PIPELINE_RUN_START_PL")}),h=p.filter((function(e){return m.includes(e[u])})).map((function(e){return e.name})),v=[],p.forEach(function(){var e=(0,o.default)(l.default.mark((function e(t){var a,n,o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.includes(t.name)){e.next=11;break}if(a=t.parameters,n=t.branchNames,o=(0,O.default)(n,"[0]",""),!n||(0,C.default)(n)){e.next=9;break}return e.next=7,r.getBranchDetail({branch:o,name:t.name,devops:c,cluster:f});case 7:u=e.sent,a=u.parameters||void 0;case 9:(0,C.default)(a)||(a=a.map((function(e){return D(e)}))),v.push(r.runBranch({name:t.name,devops:c,cluster:f,branch:o,parameters:a}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.next=8,Promise.all(v);case 8:i.Notify.success({content:1===p.length?t("BATCH_RUN_SUCCESS_SI"):t("BATCH_RUN_SUCCESS_PL")}),r.setSelectRowKeys([]),n&&n();case 11:case"end":return a.stop()}}),a)})))()}},"pipeline.edit":{on:function(e){var a,r=e.store,n=e.cluster,u=e.devops,s=e.success,d=e.formTemplate,p=(0,c.default)(e,["store","cluster","devops","success","formTemplate"]),m=f.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_.updatePipelineParams)(a,!0),(0,_.updatePipelineParamsInSpec)(a,u),e.next=4,r.updatePipeline({data:a,devops:u,cluster:n});case 4:f.default.close(m),i.Notify.success({content:t("UPDATE_SUCCESSFUL")}),s&&s();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,cluster:n,devops:u,formTemplate:d,modal:v.default},p))}},"pipeline.advance.edit":{on:function(e){var a,r=e.store,n=e.cluster,u=e.devops,s=e.success,d=e.formTemplate,p=(0,c.default)(e,["store","cluster","devops","success","formTemplate"]),h=f.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_.updatePipelineParams)(a,!0),(0,_.updatePipelineParamsInSpec)(a,u),e.next=4,r.updatePipeline({data:a,devops:u,cluster:n});case 4:f.default.close(h),i.Notify.success({content:t("UPDATE_SUCCESSFUL")}),s&&s();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,cluster:n,devops:u,formTemplate:d,modal:m.default},p))}},"pipeline.params":{on:function(e){var t,a=e.store,r=e.success,n=e.devops,u=e.cluster,s=(0,c.default)(e,["store","success","devops","cluster"]),i=f.default.open(R({onOk:(t=(0,o.default)(l.default.mark((function e(t,o){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.runBranch({devops:n,name:s.params.name,branch:o,parameters:t,cluster:u});case 2:f.default.close(i),r&&r(o);case 4:case"end":return e.stop()}}),e)}))),function(e,a){return t.apply(this,arguments)}),store:a,devops:n,cluster:u,modal:h.default},s))}},"pipeline.scanRepositoryLogs":{on:function(e){var t,a=e.store,r=(e.success,(0,c.default)(e,["store","success"])),n=f.default.open(R({onOk:(t=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.default.close(n);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),modal:y.default,store:a},r))}},"pipeline.jenkins":{on:function(e){var a,r=e.store,n=e.params,u=e.defaultValue,s=e.success,d=(0,c.default)(e,["store","params","defaultValue","success"]),p=f.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.updateJenkinsFile(a,n);case 2:f.default.close(p),i.Notify.success({content:t("UPDATE_SUCCESSFUL")}),s&&s();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:S.default,defaultValue:u,params:n},d))}},"pipeline.pipelineCreate":{on:function(e){var a,r=e.store,n=(e.rootStore,e.success),u=e.jsonData,s=e.params,d=(0,c.default)(e,["store","rootStore","success","jsonData","params"]),p=f.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.updateJenkinsFile(a,s);case 2:f.default.close(p),i.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:b.default,jsonData:u,params:s,store:r},d))}},"pipeline.pipelineTemplate":{on:function(e){var t,a=e.store,r=(e.rootStore,e.success),n=e.jsonData,u=e.params,s=(0,c.default)(e,["store","rootStore","success","jsonData","params"]),i=f.default.open(R({onOk:(t=(0,o.default)(l.default.mark((function e(t){var n,o,c,s,d,p,m,h;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.jenkinsFile,"custom"===t.template){e.next=13;break}return o=t.paramsForm,c=void 0===o?{}:o,s=Object.keys(c).reduce((function(e,t){return e.push({name:t,value:c[t]}),e}),[]),e.next=6,a.getTempleJenkins(t.template,{parameters:s});case 6:return d=e.sent,p=u.devops,m=u.name,h=u.cluster,e.next=10,a.checkScriptCompile({devops:p,pipeline:m,value:d,cluster:h});case 10:return e.next=12,a.convertJenkinsFileToJson(d,h);case 12:n=e.sent;case 13:f.default.close(i),r&&r(n);case 15:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),modal:p.default,steps:g.PIPELINE_CREATE_STEPS,jsonData:n,params:u,store:a},s))}},"pipeline.copy":{on:function(e){var a,r=e.store,n=e.cluster,u=e.devops,s=e.success,d=e.formTemplate,p=(0,c.default)(e,["store","cluster","devops","success","formTemplate"]),m=f.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_.updatePipelineParams)(a,!0),(0,_.updatePipelineParamsInSpec)(a,u),Object.keys(a).forEach((function(e){"metadata"===e&&a[e]&&Object.keys(a[e]).forEach((function(t){"name"!==t&&"namespace"!==t&&delete a[e][t]}))})),e.next=5,r.createPipeline({data:a,devops:u,cluster:n});case 5:f.default.close(m),i.Notify.success({content:t("CREATE_SUCCESSFUL")}),s&&s();case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,cluster:n,devops:u,success:s,formTemplate:d,modal:E.default},p))}}};a.default=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=n(r(274)),p=n(r(16)),m=n(r(1327));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=["discarder","timer_trigger","remote_trigger","regex_filter","multibranch_job_trigger"],E=function(e){(0,u.default)(r,e);var a=h(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).setEnableFlag=function(e){var a=e||{},r=a.pipeline,n=a.multi_branch_pipeline,l=r||n;l&&(v.forEach((function(t){var a=l[t]||(0,p.default)(l,"svn_source.".concat(t))||(0,p.default)(l,"git_source.".concat(t))||(0,p.default)(l,"github_source.".concat(t))||(0,p.default)(l,"gitlab_source.".concat(t))||(0,p.default)(l,"bitbucket_server_source.".concat(t))||(0,p.default)(l,"multibranch_job_trigger");(l[t]||a)&&(e["enable_".concat(t)]=!0)})),e.description=l.description,t.setState({formTemplate:e}))},t.handleOk=function(){var e=t.formRef&&t.formRef.current;e&&e.validate((function(){t.props.onOk(t.formRef.current.getData())}))},t.formRef=i.default.createRef(),t.state={formTemplate:{}},t}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.setEnableFlag(this.props.formTemplate)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return i.default.createElement(d.default,{width:1162,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("EDIT_PIPELINE")},i.default.createElement(m.default,{type:"edit",formRef:this.formRef,formTemplate:this.state.formTemplate,devops:this.props.devops,cluster:this.props.cluster}))}}]),r}(i.default.Component);a.default=E,E.propTypes={name:f.default.string,branches:f.default.array},E.defaultProps={branches:[],visible:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(32)),d=n(r(23)),p=n(r(16)),m=n(r(73)),h=n(r(0)),v=n(r(1)),E=r(25),y=r(58),b=n(r(2263)),g=n(r(1328));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=_(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleDelete=function(t){var a=e.props,r=a.formTemplate,n=a.name;(0,m.default)(r,n,e.value.filter((function(e,a){return a!==t}))),e.forceUpdate()},e.handleMoreMenuClick=function(t,a){var r=e.props,n=r.formTemplate,o=r.name;(0,m.default)(n,o,[].concat((0,l.default)((0,d.default)(e.value)?e.value:[]),[{type:a}])),e.forceUpdate()},e}return(0,u.default)(r,[{key:"renderMoreMenu",value:function(){return h.default.createElement(E.Menu,{onClick:this.handleMoreMenuClick},Object.keys(y.PIPELINE_PARAMS_TYPES).map((function(e){return h.default.createElement(E.Menu.MenuItem,{key:e},h.default.createElement(E.Icon,{name:"ticket"})," ",t(y.PIPELINE_PARAMS_TYPES[e]))})))}},{key:"render",value:function(){var e=this,a=this.props.name;return h.default.createElement("div",{className:g.default.wrapper},h.default.createElement("div",{className:g.default.header},h.default.createElement(E.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},h.default.createElement(E.Button,{type:"control"},t("ADD")))),h.default.createElement("div",{className:g.default.content},(0,f.default)(this.value)&&h.default.createElement("p",{className:"text-center padding-12"},t("NO_DATA")),(0,d.default)(this.value)&&this.value.map((function(t,r){return h.default.createElement(b.default,{key:r,value:t,prefix:"".concat(a,"[").concat(r,"]"),onDelete:e.handleDelete.bind(e,r)})}))))}},{key:"value",get:function(){return(0,p.default)(this.props.formTemplate,this.props.name,[])}}]),r}(h.default.Component);a.default=S,S.propTypes={name:v.default.string,value:v.default.array,onChange:v.default.func},S.defaultProps={name:"",value:[],onChange:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(25),p=r(58),m=n(r(1328));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderFormItems",value:function(e){var t=null;switch(e){case"string":t=this.renderStringFormItems();break;case"text":t=this.renderTextFormItems();break;case"boolean":t=this.renderBooleanFormItems();break;case"choice":t=this.renderChoiceFormItems();break;case"password":t=this.renderPasswordFormItems()}return t}},{key:"renderStringFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAMETER_NAME_EMPTY_DESC")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("DEFAULT_VALUE"),desc:t("PIPELINE_PARAM_DEFAULT_DESC")},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".default_value"),defaultValue:e.default_value||""})))),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"renderTextFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAMETER_NAME_EMPTY_DESC")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name})),i.default.createElement(d.Form.Item,{label:t("DEFAULT_VALUE")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".default_value"),defaultValue:e.default_value||""})),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"renderBooleanFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAMETER_NAME_EMPTY_DESC")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("DEFAULT_VALUE")},i.default.createElement(d.RadioGroup,{name:"".concat(this.props.prefix,".default_value"),defaultValue:JSON.parse(e.default_value||"true")},i.default.createElement(d.Radio,{value:"true"},"True"),i.default.createElement(d.Radio,{value:"false"},"False"))))),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"renderChoiceFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAMETER_NAME_EMPTY_DESC")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("OPTIONS"),desc:t("CHOICE_PARAM_OPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".default_value"),defaultValue:e.choice})))),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"renderPasswordFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("PASSWORD")},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".default_value"),type:"password",defaultValue:e.default_value||""})))),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"render",value:function(){var e=this.props,a=e.value,r=e.onDelete;return i.default.createElement("div",{className:m.default.itemWrapper},i.default.createElement("div",{className:m.default.itemTitle},i.default.createElement("p",null,i.default.createElement("strong",null,"PARAMS_TEXT"===p.PIPELINE_PARAMS_TYPES[a.type]?t("PARAMS_TEXT_TCAP"):t(p.PIPELINE_PARAMS_TYPES[a.type]))),i.default.createElement(d.Button,{className:m.default.delete,type:"flat",icon:"trash",onClick:r})),a.type&&this.renderFormItems(a.type))}}]),r}(i.default.Component);a.default=v,v.propTypes={value:f.default.object,onChange:f.default.func,onDelete:f.default.func},v.defaultProps={value:{},onChange:function(){},onDelete:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(291)),d=n(r(190)),p=n(r(32)),m=n(r(0)),h=n(r(1)),v=r(25),E=r(58),y=n(r(2265)),b=n(r(1329));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t){var a=e.props,r=a.value;(0,a.onChange)(_(_({},r),t))},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)((0,d.default)(r,t))},e.handleMoreMenuClick=function(t,a){var r=e.props,n=r.value,l=r.onChange;if(!(0,f.default)(n,a))switch(a){case"discover_branches":l(_(_({},n),{},{discover_branches:1}));break;case"discover_pr_from_origin":l(_(_({},n),{},{discover_pr_from_origin:1}));break;case"discover_pr_from_forks":l(_(_({},n),{},{discover_pr_from_forks:{strategy:1,trust:2}}));break;case"discover_tags":l(_(_({},n),{},{discover_tags:!0}))}},e}return(0,u.default)(r,[{key:"renderMoreMenu",value:function(){var e=this,a=this.props.value,r=Object.keys(a);return m.default.createElement(v.Menu,{onClick:this.handleMoreMenuClick},!(0,p.default)(this.menuData)&&Object.keys(this.menuData).map((function(a){return m.default.createElement(v.Menu.MenuItem,{key:a,disabled:r.includes(a)},m.default.createElement(v.Icon,{name:"ticket"})," ",t(e.menuData[a].replace(/\s/g,"_").toUpperCase()))})))}},{key:"render",value:function(){var e=this,a=this.props,r=a.name,n=a.value;return m.default.createElement("div",null,m.default.createElement("div",{className:b.default.header},m.default.createElement(v.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},m.default.createElement(v.Button,{type:"control"},t("ADD_STRATEGY")))),m.default.createElement("div",{className:b.default.content},Object.keys(this.menuData).filter(f.default.bind(this,n)).map((function(t,a){return m.default.createElement(y.default,{key:a,value:(0,l.default)({},t,n[t]),prefix:"".concat(r,"[").concat(a,"]"),onDelete:e.handleDelete.bind(e,t),onChange:e.handleChange,menuData:e.menuData})}))))}},{key:"menuData",get:function(){var e=this.props.sourceType;return["gitlab","github","bitbucket_server"].includes(e)?E.PIPELINE_ACTION_TYPES:{}}}]),r}(m.default.Component);a.default=O,O.propTypes={name:h.default.string,value:h.default.object,onChange:h.default.func,sourceType:h.default.string},O.defaultProps={name:"",value:{},sourceType:"",onChange:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(16)),m=n(r(650)),h=n(r(73)),v=r(25),E=n(r(1329));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).triggerChange=(0,m.default)((function(t){e.props.onChange(t)}),500),e.handleChange=function(t){return function(a){var r=t.split(".");if(r.length>1){var n=(0,p.default)(e.props.value,r[0]);return n?(0,h.default)(n,r[1],a):n=(0,l.default)({},r[1],a),void e.triggerChange(b(b({},e.props.value),{},(0,l.default)({},r[0],n)))}e.triggerChange(b(b({},e.props.value),{},(0,l.default)({},t,a)))}},e}return(0,u.default)(r,[{key:"renderFormItems",value:function(e){var t=null;switch(e){case"discover_branches":t=this.renderBranchesFormItems();break;case"discover_pr_from_origin":t=this.renderPrOriginFormItems();break;case"discover_pr_from_forks":t=this.renderPrForkFormItems();break;default:t=this.renderTagBranchesFormItems()}return t}},{key:"renderTagBranchesFormItems",value:function(){var e=this.props.value;return f.default.createElement("div",null,f.default.createElement(v.Form.Item,{label:t("STRATEGY")},f.default.createElement(v.Select,{name:"discover_tags",defaultValue:e.discover_tags,onChange:this.handleChange("discover_tags"),options:[{label:t("ENABLE_TAG_BRANCH_DISCOVERY"),value:!0},{label:t("DISABLE_TAG_BRANCH_DISCOVERY"),value:!1}]})))}},{key:"renderBranchesFormItems",value:function(){var e=this.props.value;return f.default.createElement("div",null,f.default.createElement(v.Form.Item,{label:t("STRATEGY")},f.default.createElement(v.Select,{name:"discover_branches",defaultValue:e.discover_branches,onChange:this.handleChange("discover_branches"),options:[{label:t("EXCLUDE_PR_BRANCHES"),value:1},{label:t("ONLY_PR_BRANCHES"),value:2},{label:t("ALL_BRANCHES"),value:3}]})))}},{key:"renderPrOriginFormItems",value:function(){var e=this.props.value;return f.default.createElement("div",null,f.default.createElement(v.Form.Item,{label:t("PULL_STRATEGY")},f.default.createElement(v.Select,{name:"discover_pr_from_origin",defaultValue:e.discover_pr_from_origin,onChange:this.handleChange("discover_pr_from_origin"),options:[{label:t("OPTIONS_PR_PARAMS_1"),value:1},{label:t("OPTIONS_PR_PARAMS_2"),value:2},{label:t("OPTIONS_PR_PARAMS_3"),value:3}]})))}},{key:"renderPrForkFormItems",value:function(){var e=this.props.value;return f.default.createElement("div",null,f.default.createElement(v.Columns,null,f.default.createElement(v.Column,null,f.default.createElement(v.Form.Item,{label:t("PULL_STRATEGY")},f.default.createElement(v.Select,{name:"discover_pr_from_forks.strategy",defaultValue:e.discover_pr_from_forks&&e.discover_pr_from_forks.strategy,onChange:this.handleChange("discover_pr_from_forks.strategy"),options:[{label:t("OPTIONS_PR_PARAMS_1"),value:1},{label:t("OPTIONS_PR_PARAMS_2"),value:2},{label:t("OPTIONS_PR_PARAMS_3"),value:3}]}))),f.default.createElement(v.Column,null,f.default.createElement(v.Form.Item,{label:t("TRUSTED_USERS")},f.default.createElement(v.Select,{name:"discover_pr_from_forks.trust",defaultValue:e.discover_pr_from_forks&&e.discover_pr_from_forks.trust,onChange:this.handleChange("discover_pr_from_forks.trust"),options:[{label:t("CONTRIBUTORS"),value:1},{label:t("EVERYONE"),value:2},{label:t("USERS_WITH_PERMISSION"),value:3},{label:t("NOBODY"),value:4}]})))))}},{key:"render",value:function(){var e=this.props,a=e.value,r=e.onDelete,n=e.menuData,l=Object.keys(a)[0];return f.default.createElement("div",{className:E.default.itemWrapper},f.default.createElement("div",{className:E.default.itemTitle},f.default.createElement("p",null,f.default.createElement("strong",null,t(n[l].replace(/\s/g,"_").toUpperCase()))),f.default.createElement(v.Button,{className:E.default.delete,type:"flat",icon:"trash",onClick:r})),l&&this.renderFormItems(l))}}]),r}(f.default.Component);a.default=_,_.propTypes={value:d.default.object,onChange:d.default.func,onDelete:d.default.func},_.defaultProps={value:{},onChange:function(){},onDelete:function(){}}},function(e,t,a){e.exports={advance:"CL0stuq5jSYOBJiO8mU2C",wrapper:"XW_-pU8ZwuxgGpjgUHW-8"}},,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(49)),u=n(r(50)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(25),v=n(r(274)),E=n(r(16)),y=n(r(1082)),b=n(r(1083));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=function(e){(0,i.default)(r,e);var a=S(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.hideSelectRepo=function(){t.setState({showSelectRepo:!1})},t.showSelectRepo=function(){t.setState({showSelectRepo:!0})},t.handleOk=(0,u.default)(o.default.mark((function e(){var a,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.onOk,r=t.form.current.getData(),e.next=4,a(r);case 4:t.state.subRoute&&t.props.handleScanRepository();case 5:case"end":return e.stop()}}),e)}))),t.handleRepoChange=function(e,a){var r=t.props.formTemplate,n=void 0===r?{}:r,o=(0,E.default)(n,"multi_branch_pipeline",{}),u="".concat((0,E.default)(n,"multi_branch_pipeline.source_type",""),"_source"),c=Object.assign((0,E.default)(n,"multi_branch_pipeline.".concat(u),{}),a[u]);t.setState({showSelectRepo:!1},(function(){t.scmRef.current.onChange(_(_(_({source_type:e},o),a),{},(0,l.default)({},u,c)))}))},t.handleSaveRepo=function(){var e=t.state.subRoute;if(e.onSave)return e.onSave((function(){t.setState({subRoute:{}})}))},t.form=p.default.createRef(),t.scmRef=p.default.createRef(),t.state={showSelectRepo:!1,repo:{}},t}return(0,s.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.formTemplate,l=void 0===n?{}:n,o=(0,E.default)(l,"pipeline.name","")||(0,E.default)(l,"multi_branch_pipeline.name",""),u=(0,E.default)(l,"pipeline.description","")||(0,E.default)(l,"multi_branch_pipeline.description","");return this.state.showSelectRepo?p.default.createElement(v.default,{width:1e3,hideHeader:!0,onOk:this.handleSaveRepo,visible:a},p.default.createElement(b.default,{sourceData:l.multi_branch_pipeline,devops:l.devops,cluster:l.cluster,name:o,onSave:this.handleRepoChange,onCancel:this.hideSelectRepo,enableTypeChange:!1})):p.default.createElement(v.default,{width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,onCancel:r,visible:a},p.default.createElement(h.Form,{ref:this.form,data:l},p.default.createElement(h.Form.Item,{label:t("NAME"),desc:t("")},p.default.createElement(h.Input,{name:"name",defaultValue:o,disabled:!0})),p.default.createElement(h.Form.Item,{label:t("DESCRIPTION"),desc:t("")},p.default.createElement(h.TextArea,{name:"description",defaultValue:u})),l.multi_branch_pipeline?p.default.createElement(h.Form.Item,{label:t("CODE_REPOSITORY")},p.default.createElement(y.default,{name:"multi_branch_pipeline",ref:this.scmRef,onClick:this.showSelectRepo})):null))}}]),r}(p.default.Component);a.default=O,O.propTypes={formTemplate:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func},O.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},O.childContextTypes={registerSubRoute:m.default.func,resetSubRoute:m.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(25),p=n(r(274)),m=r(58);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).handleOk=function(){var e=n.props.onOk,t=n.form.current;t&&t.validate((function(){var a=t.getData();e(a)}))},n.validator=function(e,a,r){if(!a)return r();n.props.store.checkPipelineName({name:a,cluster:n.props.cluster,devops:n.props.devops}).then((function(a){if(a.exist)return r({field:e.field,message:t("NAME_EXIST_DESC")});r()}))},n.form=i.default.createRef(),n}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.title,l=e.icon,o=e.formTemplate,u=void 0===o?{}:o;return i.default.createElement(p.default,{width:691,title:n,icon:l,onOk:this.handleOk,onCancel:r,visible:a},i.default.createElement(d.Form,{ref:this.form,data:u},i.default.createElement(d.Form.Item,{label:t("NAME"),desc:t("PIPELINE_NAME_DESC"),rules:[{required:!0,message:t("PIPELINE_NAME_TIP")},{pattern:m.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.validator}]},i.default.createElement(d.Input,{name:"name",maxLength:63})),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{name:"description",maxLength:256}))))}}]),r}(i.default.Component);a.default=v,v.propTypes={formTemplate:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func},v.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(49)),s=n(r(50)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=n(r(1)),E=r(25),y=r(70),b=n(r(16)),g=n(r(32)),_=n(r(274)),S=n(r(2271));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(0,y.observer)((u=o=function(e){(0,d.default)(r,e);var a=O(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).refreshHandler=function(){for(var e=n.props.store.repositoryLog.split("\n"),t=!1,a=e.length-1;a>=0;a--)if(!(0,g.default)(e[a])&&e[a].indexOf("Finished")>-1)return void(t=!0);if(t)clearInterval(n.refresh),n.refresh=null;else{var r=n.props.params;n.props.store.getRepoScanLogs(r)}},n.handleFetch=(0,s.default)(c.default.mark((function e(){var a;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.params,e.next=3,n.props.handleScanRepository();case 3:return e.next=5,n.props.store.getRepoScanLogs(a);case 5:E.Notify.success({content:t("LOGS_OBTAINED_SUCCESSFULLY")});case 6:case"end":return e.stop()}}),e)}))),n.handleDownloadLogs=function(){var e=n.props.store.repositoryLog;n.props.store.saveAsFile(e,"log.txt")},n.formRef=h.default.createRef(),n.refresh=setInterval((function(){n.refreshHandler()}),4e3),n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.params;this.props.store.getRepoScanLogs(e)}},{key:"componentDidUpdate",value:function(e){if(!e.visible&&this.props.visible){var t=this.props.params;this.props.store.getRepoScanLogs(t)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.refresh)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.props.store.repositoryLog;return h.default.createElement(_.default,{width:1160,onCancel:r,visible:a,closable:!1,title:t("REPOSITORY_SCAN_LOGS"),cancelText:t("CLOSE")},h.default.createElement("div",{className:S.default.content},h.default.createElement("div",{className:S.default.btn_group},h.default.createElement(E.Icon,{name:"human",size:20}),this.startBy,h.default.createElement(E.Button,{onClick:this.handleDownloadLogs},t("DOWNLOAD")),h.default.createElement(E.Button,{onClick:this.handleFetch},t("RESCAN"))),h.default.createElement("pre",{className:S.default.pre},n)))}},{key:"startBy",get:function(){var e=this.props.store.repositoryLog.split("\n"),a=(0,b.default)(e,"[0]",""),r=a.match(/^Started by (user )?(.*)?/)||[],n=r[1],l=r[2];return a&&n?t("STARTED_BY_NAME",{name:l}):a&&!n?t("STARTED_BY_NAME",{name:t(l)}):t("STARTED_BY_NAME",{name:"-"})}}]),r}(h.default.Component),o.propTypes={name:v.default.string,branches:v.default.array},o.defaultProps={branches:[],visible:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=C},function(e,t,a){e.exports={content:"_1TtDoHIK3aC3dRiBhRTT0F",btn_group:"_1iXbGXD3S6h6qcpzVlnDq1",pre:"_8f1VfuEP3pLkfRwcKptfp"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(21)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(274)),h=n(r(760)),v=n(r(1120)),E=n(r(3)),y=n(r(32)),b=n(r(2317));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).hideConfirm=function(){t.setState({isshowComfirm:!1})},t.showConfirm=function(){t.setState({isshowComfirm:!0})},t.handleCancel=function(){t.hideConfirm();var e=t.props.params,a=e.devops,r=e.name;localStorage.removeItem("".concat(globals.user.username,"-").concat(a,"-").concat(r)),t.props.onCancel()},t.CLIENT_WIDTH=document.body.clientWidth,t.state={isshowComfirm:!1,createPipelineType:(0,y.default)(t.props.jsonData)?void 0:"custom",jsonData:t.props.jsonData},t}return(0,c.default)(r,[{key:"renderPipelineContent",value:function(){var e=this.props,t=e.params,a=e.isSubmitting,r=e.onOk,n=this.state.jsonData;return d.default.createElement(v.default,{className:b.default.content,isEditMode:!0,params:t,jsonData:n,onOk:r,onCancel:this.showConfirm,isSubmitting:a})}},{key:"render",value:function(){var e=this.props.visible,a=this.state.createPipelineType,r=!(0,y.default)(a),n={hideHeader:r,closable:!r,title:t("CREATE_PIPELINE"),imageIcon:"/assets/pipeline/pipeline-icon-dark.svg",description:t("CREATE_PIPELINE_DESC")};return d.default.createElement(d.default.Fragment,null,d.default.createElement(m.default,(0,l.default)({width:a?Math.max(this.CLIENT_WIDTH-40,1200):"1400px",bodyClassName:(0,E.default)(b.default.body,(0,o.default)({},b.default.templeHeight,!a)),headerClassName:b.default.header,visible:e,closable:!1,maskClosable:!1,onOk:this.props.onOk,onCancel:this.showConfirm,hideFooter:!0},n),this.renderPipelineContent()),d.default.createElement(h.default,{visible:this.state.isshowComfirm,onCancel:this.hideConfirm,onOk:this.handleCancel,title:t("CLOSE"),desc:t("Are you sure to close this pipeline Editor ?")}))}}]),r}(d.default.Component);a.default=_,_.propTypes={name:p.default.string,module:p.default.string,store:p.default.object,formTemplate:p.default.object,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func,jsonData:p.default.object,isSubmitting:p.default.bool},_.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={header:"_2saOnbMeHxpTm11Eed8tTs",body:"_2DgEUY-oZ3U39kMNOaJ0il",templeHeight:"_3spQYJcu5vaFgqKDKvxEzP",title:"_2xngYZLt3Su7hKoNhj6gjS",content:"LvzjWthXqdqyYc0TizKIr"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.PIPELINE_CREATE_STEPS=t.PIPELINE_PROJECT_CREATE_STEPS=void 0;var n=r(a(2319)),l=r(a(1327)),o=r(a(2320)),u=r(a(2326)),c=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"ADVANCED_SETTINGS",component:l.default,required:!0}];t.PIPELINE_PROJECT_CREATE_STEPS=c;var s=[{title:"SELECT_TEMPLATE",component:o.default,required:!0},{title:"PARAMETER_CONFIG",component:u.default,required:!0,icon:"slider"}];t.PIPELINE_CREATE_STEPS=s},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=r(25),p=r(58),m=n(r(1082)),h=n(r(1083));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=E(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).showSelectRepo=function(){n.setState({showSelectRepo:!0})},n.hideSelectRepo=function(){n.setState({showSelectRepo:!1})},n.handleRepoChange=function(e,t){n.setState({showSelectRepo:!1},(function(){n.scmRef.current.onChange(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({source_type:e},t))}))},n.handleDeleteSource=function(){n.scmRef.current.onChange()},n.validator=function(e,a,r){if(!a)return r();n.props.store.checkPipelineName({name:a,cluster:n.props.cluster,devops:n.props.devops}).then((function(a){if(a.exist)return r({field:e.field,message:t("NAME_EXIST_DESC")});r()}))},n.state={showSelectRepo:!1},n.scmRef=f.default.createRef(),n}return(0,u.default)(r,[{key:"renderRepoSelectForm",value:function(){var e=this.props,t=e.formTemplate,a=e.devops,r=e.cluster;return f.default.createElement(h.default,{sourceData:t.multi_branch_pipeline,devops:a,name:t.name,cluster:r,onSave:this.handleRepoChange,onCancel:this.hideSelectRepo})}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return this.state.showSelectRepo?this.renderRepoSelectForm():f.default.createElement(d.Form,{ref:a,data:r},f.default.createElement(d.Columns,null,f.default.createElement(d.Column,null,f.default.createElement(d.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:p.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.validator}]},f.default.createElement(d.Input,{name:"name",maxLength:63})),f.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},f.default.createElement(d.TextArea,{name:"description",maxLength:256}))),f.default.createElement(d.Column,null,f.default.createElement(d.Form.Item,{label:t("DEVOPS_PROJECT"),desc:t("PIPELINE_CREATE_DEVOPS_PROJECT_DESC")},f.default.createElement(d.Input,{name:"devopsName",disabled:!0})))),f.default.createElement(d.Form.Item,{label:t("CODE_REPOSITORY_OPTIONAL")},f.default.createElement(m.default,{name:"multi_branch_pipeline",ref:this.scmRef,onClick:this.showSelectRepo,handleDeleteSource:this.handleDeleteSource,devops:this.props.devops})))}}]),r}(f.default.Component);a.default=y},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(73)),d=n(r(0)),p=r(70),m=r(25),h=n(r(2321)),v=n(r(2325));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=(0,p.observer)(l=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleTemplateChange=function(t,a){(0,f.default)(e.props.formTemplate,"template",t),(0,f.default)(e.props.formTemplate,"params",a)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return d.default.createElement(m.Form,{data:r,ref:a,className:v.default.pipeline_template_form},d.default.createElement(m.Form.Item,{name:"template",rules:[{required:!0,message:t("PIPELINE_VALIDATOR_DESC")}]},d.default.createElement(h.default,{name:"template",templateLoading:!1,handleTemplateChange:this.handleTemplateChange,formTemplate:r})))}}]),r}(d.default.Component))||l;a.default=y},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(71)),c=l(r(49)),s=l(r(50)),i=l(r(136)),f=n(r(0)),d=l(r(3)),p=l(r(883)),m=l(r(1123)),h=l(r(2324)),v=function(e){var a=e.handleTemplateChange,r=e.formTemplate,n={type:"custom",image:"/assets/pipeline/custom.svg",title:t("CUSTOM_PIPELIEN"),desc:t("CUSTOM_PIPELIEN_DESC")},l=new p.default,o=(0,f.useState)([]),d=(0,i.default)(o,2),v=d[0],y=d[1],b=(0,f.useState)(r.template),g=(0,i.default)(b,2),_=g[0],S=g[1],O=(0,f.useState)(!1),C=(0,i.default)(O,2),T=C[0],R=C[1],D=function(){var e=(0,s.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getPipelineTemplateList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){R(!0),D().then((function(e){e.push(n),y(e)})).finally((function(){R(!1)}))}),[]);var k=function(e,t){S(e),a&&a(e,t)};return f.default.createElement("div",{className:h.default.container},f.default.createElement(m.default,{spinning:T},f.default.createElement("div",{className:h.default.template},v&&v.map((function(e){return f.default.createElement(E,(0,u.default)({key:e.type,isSelected:_===e.type},e,{getTemple:k}))})))))};a.default=v;var E=function(e){var t=e.type,a=e.image,r=e.title,n=e.desc,l=e.parameters,u=e.getTemple,c=e.isSelected,s=(0,f.useRef)();return f.default.createElement("div",{className:(0,d.default)(h.default.card,(0,o.default)({},h.default.cardSelected,c)),onClick:function(){return u(t,l)}},f.default.createElement("div",{className:(0,d.default)(h.default.bg)},f.default.createElement("img",{src:a,ref:s,onError:function(){s.current.src="/assets/pipeline/custom.svg"}})),f.default.createElement("div",{className:h.default.info},f.default.createElement("div",{className:h.default.subtitle},r),f.default.createElement("p",{title:n,className:h.default.desc,style:{"-webkit-box-orient":"vertical"}},n)))}},,,function(e,t,a){e.exports={container:"_1kaDdvsCDov05n6ER1wlbB",title:"_1C-7dQGtX33JkSHwYAWGYz",card:"_3Aib_reYwYhPU8Swp57k0j",cardSelected:"_2oJj50hK159qSfvarGMI7E",bg:"CpVt8f8oNp_vruCV0QJh5",info:"_3tOaVhp-H4O_o1UMo84zEV",subtitle:"_3C_MhMM1PU2LSxvd1kyT5O",desc:"vq8hCrTUwI7BHDDDguAxC"}},function(e,t,a){e.exports={pipeline_template_form:"_2ZhLZbeOlhAnmZtNqK4Xug"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.formTemplate,r=e.formRef,n=e.store,l=(0,s.default)(e,["formTemplate","formRef","store"]),g=a.params,_=void 0===g?[]:g,S=(0,i.useState)("params"),O=(0,c.default)(S,2),C=O[0],T=O[1],R=(0,i.useState)(!1),D=(0,c.default)(R,2),k=D[0],N=D[1],P=(0,i.useState)({}),I=(0,c.default)(P,2),w=I[0],M=I[1],A=function(){var e=(0,u.default)(o.default.mark((function e(t){var r,u,c,s,i,f,d,p,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("view"!==t){e.next=16;break}return r=a.paramsForm,u=void 0===r?{}:r,c=Object.keys(u).reduce((function(e,t){return e.push({name:t,value:u[t]}),e}),[]),N(!0),e.next=6,n.getTempleJenkins(a.template,{parameters:c});case 6:return s=e.sent,i=l.params,f=i.devops,d=i.name,p=i.cluster,e.next=10,n.checkScriptCompile({devops:f,pipeline:d,value:s,cluster:p});case 10:return e.next=12,n.convertJenkinsFileToJson(s,p);case 12:m=e.sent,M(m),(0,h.default)(a,"jenkinsFile",m),N(!1);case 16:T(t);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.default.createElement("div",{className:y.default.templateParams},i.default.createElement(v.default,{spinning:n.isSubmitting},i.default.createElement(f.Tabs,{type:"button",tabs:C,onChange:A},i.default.createElement(b,{label:t("PARAMETER_CONFIG"),name:"params"},i.default.createElement("div",{className:y.default.container},i.default.createElement("div",{className:y.default.params},i.default.createElement(f.Form,{data:a,ref:r},(0,p.default)(_)&&_.length>0?i.default.createElement("div",{className:y.default.params_container},_.map((function(e,t){return i.default.createElement(E.default,{key:t,option:e})}))):i.default.createElement("div",{className:y.default.empty},i.default.createElement("div",{className:y.default.icon},i.default.createElement("img",{src:"/assets/pipeline-temp-empty.svg",alt:""})),i.default.createElement("p",null,t("EMPTY_PARAMS_CONFIG"))))))),i.default.createElement(b,{label:t("PREVIEW"),name:"view",disabled:(0,m.default)(_)},i.default.createElement("div",{className:y.default.view},i.default.createElement(v.default,{spinning:k},i.default.createElement(f.Form,{data:a,ref:r},i.default.createElement(d.default,{className:y.default.content,jsonData:w}))))))))};var o=l(r(49)),u=l(r(50)),c=l(r(136)),s=l(r(56)),i=n(r(0)),f=r(25),d=l(r(1120)),p=l(r(23)),m=l(r(32)),h=l(r(73)),v=l(r(1123)),E=l(r(2327)),y=l(r(1335)),b=f.Tabs.TabPanel},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.option;function r(){var e;return l.default.createElement(o.Form.Item,{label:a.name,desc:a.description,rules:[{required:null!==(e=a.required)&&void 0!==e&&e,message:t("Please input value")}]},l.default.createElement(o.Input,{name:"paramsForm.".concat(a.name),defaultValue:a.default||""}))}return l.default.createElement("div",{className:u.default.itemWrapper},function(e){var t=null;switch(e){case"string":t=r();break;case"bool":t=l.default.createElement(o.Form.Item,{label:a.name},l.default.createElement(o.RadioGroup,{name:"paramsForm.".concat(a.name),defaultValue:a.default||!1},l.default.createElement(o.Radio,{value:!0},"True"),l.default.createElement(o.Radio,{value:!1},"False")));break;default:t=r()}return t}(a.type))};var l=n(r(0)),o=r(25),u=n(r(1335))},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(274)),h=n(r(795)),v=n(r(883)),E=n(r(760)),y=n(r(745)),b=n(r(2329));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).showConfirm=function(){var e=t.props.defaultValue,a=t.state.value;(0,y.default)(e,a)?t.props.onCancel():t.setState({isshowComfirm:!0})},t.hideConfirm=function(){t.setState({isshowComfirm:!1})},t.handleCancel=function(){t.hideConfirm(),t.props.onCancel()},t.handleChange=function(e){t.setState({value:e})},t.getEditorInstance=function(e){t.editor=e},t.checkScriptCompile=(0,o.default)(l.default.mark((function e(){var a,r,n,o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.params,r=a.devops,n=a.name,o=a.cluster,t.setState({isLoading:!0}),e.next=4,t.store.checkScriptCompile({value:t.newValue,pipeline:n,devops:r,cluster:o}).finally((function(){t.setState({isLoading:!1})}));case 4:if("fail"!==(u=e.sent).status){e.next=9;break}return t.setState({error:{row:u.line-1,column:u.column,type:"error",text:u.message}}),t.forceUpdate(),e.abrupt("return",u);case 9:return t.setState({error:null}),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)}))),t.handleOk=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.newValue=t.state.value.replace(/\t/g,"    "),e.next=3,t.checkScriptCompile();case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:t.props.onOk(t.newValue);case 7:case"end":return e.stop()}}),e)}))),t.store=new v.default,t.state={value:e.defaultValue,isLoading:!1,isshowComfirm:!1},t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.defaultValue;a&&!e.visible&&r&&this.setState({value:r})}},{key:"render",value:function(){var e=this.props.visible;return d.default.createElement(d.default.Fragment,null,d.default.createElement(m.default,{icon:"cogwheel",width:900,bodyClassName:b.default.body,isSubmitting:this.props.isSubmitting||this.state.isLoading,onCancel:this.showConfirm,onOk:this.handleOk,renderFooter:this.renderFooter,visible:e,closable:!1,maskClosable:!1,title:t("Jenkinsfile")},d.default.createElement(d.default.Fragment,null,d.default.createElement(h.default,{className:b.default.codeEditor,name:"script",mode:"groovy",value:this.state.value,onChange:this.handleChange,options:this.state.error&&{annotations:[this.state.error]}}),this.state.error&&d.default.createElement("div",{className:b.default.checkResult},d.default.createElement("img",{src:"/assets/error.svg"}),d.default.createElement("span",null,t("JENKINS_LINS_ERROR",{line:this.state.error.row+1}))))),d.default.createElement(E.default,{visible:this.state.isshowComfirm,onCancel:this.hideConfirm,onOk:this.handleCancel,title:t("CLOSE"),desc:t("CLOSE_JENKINSFILE_EDITOR_TIP")}))}}]),r}(d.default.Component);a.default=_,_.propTypes={name:p.default.string,params:p.default.object},_.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={codeEditor:"FwGVnxxpNbU-YwCj8hrz_",checkResult:"_177fFbaR70Um61ePRL6Q86",body:"_33dDTLMi8Kh16V0VchwicK"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(16)),i=n(r(73)),f=n(r(301)),d=n(r(32)),p=r(25),m=n(r(274)),h=n(r(2331)),v=n(r(2339)),E=n(r(2341)),y=n(r(2342)),b=n(r(733)),g=r(37),_=n(r(811)),S=n(r(278));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T={"project.create":{on:function(e){var a,r=e.store,n=e.success,u=e.cluster,f=e.workspace,d=(0,c.default)(e,["store","success","cluster","workspace"]),h=m.default.open(C({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.default)(a,'metadata.labels["kubesphere.io/workspace"]',f),o=u||(0,s.default)(a,"cluster"),c={cluster:o,workspace:f},e.next=5,r.create(a,c);case 5:m.default.close(h),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),n&&n(o);case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),hideCluster:!globals.app.isMultiCluster||!!u,cluster:u,workspace:f,formTemplate:b.default.project(),modal:v.default,store:r},d))}},"project.quota.edit":{on:function(e){e.store;var a,r=e.detail,n=e.success,u=(0,c.default)(e,["store","detail","success"]),i=new _.default,v=m.default.open(C({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,s.default)(a,"spec.hard",{}),u={name:a.name,namespace:r.name,cluster:r.cluster},(0,g.quota_limits_requests_Dot)(o),a.spec={hard:(0,f.default)(o,(function(e){return e?(0,d.default)(e.toString()):!e}))},e.next=6,i.checkName(u);case 6:if(!e.sent.exist){e.next=12;break}return e.next=10,i.update(u,{apiVersion:"v1",kind:"ResourceQuota",metadata:C(C({},u),{},{name:r.name}),spec:a.spec});case 10:e.next=14;break;case 12:return e.next=14,i.create({apiVersion:"v1",kind:"ResourceQuota",metadata:C(C({},u),{},{name:r.name}),spec:a.spec},u);case 14:m.default.close(v),p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 17:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),detail:r,store:i,modal:h.default,supportGpuSelect:!0},u))}},"project.default.resource":{on:function(e){var a,r=e.store,n=e.detail,u=e.namespace,s=e.cluster,f=e.success,h=e.isFederated,v=e.projectDetail,E=(0,c.default)(e,["store","detail","namespace","cluster","success","isFederated","projectDetail"]),_=m.default.open(C({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,E,y,S;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,g.limits_Request_EndsWith_Dot)({limits:a.default,requests:a.defaultRequest||{}}),c=o.limits,E=o.requests,a.default=C(C({},a.default),c),a.defaultRequest=C(C({},a.defaultRequest),E),!(0,d.default)(n)){e.next=10;break}return y=b.default.limitRange(),h?(y=b.default.federated({data:b.default.limitRange(),clusters:v.clusters.map((function(e){return e.name})),kind:"LimitRange"}),(0,i.default)(y,"metadata.name",u),(0,i.default)(y,"spec.template.spec",{limits:[C(C({},a),{},{type:"Container"})]})):(0,i.default)(y,"spec",{limits:[C(C({},a),{},{type:"Container"})]}),e.next=8,r.create(y,{namespace:u,cluster:s});case 8:e.next=15;break;case 10:return S=C({},n._originData),h?(0,i.default)(S,"spec.template.spec",{limits:[C(C({},n.limit),a)]}):(0,i.default)(S,"spec",{limits:[C(C({},n.limit),a)]}),(0,i.default)(S,"metadata.resourceVersion",n.resourceVersion),e.next=15,r.update(C(C({},n),{},{namespace:u,cluster:s}),S);case 15:m.default.close(_),p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),f&&f();case 18:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:y.default,store:r,detail:n,supportGpuSelect:!0,namespace:u,cluster:s,isFederated:h},E))}},"project.assignworkspace":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,i=(0,c.default)(e,["store","detail","success"]),f=new S.default,d=m.default.open(C({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,i,h;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(n,a);case 2:return o=n.cluster,c=n.name,i=(0,s.default)(a,'metadata.annotations["kubesphere.io/creator"]'),h=(0,s.default)(a,'metadata.labels["kubesphere.io/workspace"]'),e.next=7,f.create([{username:i,roleRef:"admin"}],{cluster:o,workspace:h,namespace:c});case 7:m.default.close(d),p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 10:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:E.default,store:r},i))}}};a.default=T},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(49)),u=n(r(50)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(5),v=n(r(16)),E=n(r(73)),y=n(r(32)),b=n(r(936)),g=n(r(2332)),_=n(r(301)),S=n(r(300)),O=r(25),C=n(r(274)),T=n(r(872)),R=n(r(811)),D=n(r(853)),k=r(280),N=n(r(2335)),P=n(r(2338));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var A=function(e){(0,i.default)(n,e);var a,r=M(n);function n(e){var t;return(0,c.default)(this,n),(t=r.call(this,e)).form=p.default.createRef(),t.store=new R.default,t.workspaceQuotaStore=new D.default,t.state={formTemplate:{},error:"",leftQuota:{}},t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.props.detail&&this.props.detail.name&&(this.fetchQuota(),this.fetchData(this.props.detail))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.detail;a&&a!==e.visible&&r&&r.name&&this.fetchData(r)}},{key:"fetchData",value:(a=(0,u.default)(o.default.mark((function e(){var t,a,r=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.store.checkName({name:t.name,namespace:t.name,cluster:t.cluster});case 3:if(!e.sent.exist){e.next=7;break}return e.next=7,this.store.fetchDetail({name:t.name,namespace:t.name,cluster:t.cluster});case 7:a=(0,h.toJS)(this.store.detail),this.setState({formTemplate:a});case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchQuota",value:function(){var e=this,t=this.props.detail||{},a=t.workspace,r=t.name,n=t.cluster;a&&r&&Promise.all([this.store.fetch({cluster:n,namespace:r}),this.workspaceQuotaStore.fetchDetail({workspace:a,name:a,cluster:n})]).then((function(t){var a=(0,k.getLeftQuota)(t[1],(0,v.default)(t[0],"data")).workspace,r=(0,k.getUsedQuota)((0,v.default)(t[0],"data"));e.setState({leftQuota:(0,b.default)(r,a,(function(e,t){return t?(0,g.default)(e,t):e}))})}))}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.visible,n=e.onOk,l=e.onCancel,o=e.isFederated,u=e.isSubmitting,c=this.state.error;return p.default.createElement(C.default.Form,{width:960,title:t("EDIT_PROJECT_QUOTAS"),icon:"pen",data:this.state.formTemplate,onOk:n,onCancel:l,visible:r,isSubmitting:u,disableOk:!!c},p.default.createElement("div",{className:P.default.body},p.default.createElement(O.Form.Item,{label:t("NAME")},p.default.createElement(O.Input,{name:"name",defaultValue:a.name,disabled:!0})),p.default.createElement(O.Form.Item,null,p.default.createElement(T.default,this.resourceLimitProps)),p.default.createElement("div",{className:P.default.label},t("APPLICATION_RESOURCE_COUNT")),p.default.createElement(N.default,{data:this.state.formTemplate,isFederated:o})))}},{key:"resourceLimitProps",get:function(){var e=this,a=this.state.formTemplate,r=this.state.leftQuota,n=(0,y.default)(r)?{}:{limits:{cpu:(0,v.default)(r,"limits.cpu"),memory:(0,v.default)(r,"limits.memory")},requests:{cpu:(0,v.default)(r,"requests.cpu"),memory:(0,v.default)(r,"requests.memory")}},o=globals.config.supportGpuType,u=(0,v.default)(a,"spec.hard",{}),c=o.filter((function(e){return Object.keys(u).some((function(t){return(0,S.default)(t,e)}))})),s=(0,y.default)(c)?{}:(0,l.default)({},"".concat(c[0]),u["requests.".concat(c[0])]);return{cpuProps:{marks:[{value:0,label:t("NO_REQUEST"),weight:4},{value:1,label:1,weight:4},{value:2,label:2,weight:2},{value:3,label:3,weight:2},{value:4,label:4},{value:5,label:5},{value:6,label:6},{value:7,label:7},{value:8,label:8},{value:1/0,label:t("NO_LIMIT")}]},memoryProps:{marks:[{value:0,label:t("NO_REQUEST"),weight:4},{value:2,label:2,weight:4},{value:4,label:4,weight:2},{value:6,label:6,weight:2},{value:8,label:8},{value:10,label:10},{value:12,label:12},{value:14,label:14},{value:16,label:16},{value:1/0,label:t("NO_LIMIT")}],unit:"Gi",valueFormatter:function(e){return e>0&&e<1?e.toFixed(2):e>1&&e!==1/0?e.toFixed(1):e}},defaultValue:{limits:{cpu:(0,v.default)(a,'spec.hard["limits.cpu"]'),memory:(0,v.default)(a,'spec.hard["limits.memory"]')},requests:w({cpu:(0,v.default)(a,'spec.hard["requests.cpu"]'),memory:(0,v.default)(a,'spec.hard["requests.memory"]')},s)},workspaceLimitProps:n,onChange:function(e){(0,E.default)(a,'spec.hard["limits.cpu"]',(0,v.default)(e,"limits.cpu",null)),(0,E.default)(a,'spec.hard["limits.memory"]',(0,v.default)(e,"limits.memory",null)),(0,E.default)(a,'spec.hard["requests.cpu"]',(0,v.default)(e,"requests.cpu",null)),(0,E.default)(a,'spec.hard["requests.memory"]',(0,v.default)(e,"requests.memory",null));var t=globals.config.supportGpuType,r=(0,v.default)(a,"spec.hard",{}),n=(0,_.default)(r,(function(e,a){return t.some((function(e){return a.endsWith(e)}))}));(0,E.default)(a,"spec.hard",n);var l=Object.keys((0,v.default)(e,"requests",{})).filter((function(e){return t.some((function(t){return e.endsWith(t)}))}));if(!(0,y.default)(l)){var o=l[0];(0,E.default)(a,'spec.hard["requests.'.concat(o,'"]'),e.requests["".concat(o)])}},onError:function(t){e.setState({error:t})},supportGpuSelect:this.props.supportGpuSelect}}}]),n}(p.default.Component);a.default=A,A.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},A.defaultProps={visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}}},,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(944)),p=n(r(16)),m=n(r(32)),h=n(r(73)),v=n(r(190)),E=n(r(68)),y=n(r(110)),b=n(r(191)),g=r(25),_=n(r(761)),S=r(58),O=r(37),C=n(r(2336)),T=r(1336),R=n(r(2337));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=function(e){(0,c.default)(r,e);var a=D(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).handleAddQuotaItem=function(e){t.setState({items:e},(function(){var a=(0,p.default)(t.props.data,"spec.hard"),r=(0,b.default)(a,t.omitKeys),n={};e.forEach((function(e){var t=e.module,a=e.value;if(!(0,E.default)(t)){var r=(0,p.default)(S.QUOTAS_MAP,"".concat(t,".name"),t);n["".concat(r)]=a}})),(0,h.default)(t.props.data,"spec.hard",(0,y.default)(n,r))}))},t.checkItemValid=function(e){return!(0,m.default)(e)&&e.module},t.state={items:(0,l.default)(t.getItems(e))},t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({items:(0,l.default)(this.getItems(this.props))})}},{key:"getItems",value:function(e){var t=(0,v.default)((0,p.default)(e.data,"spec.hard",{}),this.omitKeys),a=[];(0,d.default)(t,(function(e,t){var r={module:T.QUOTAS_KEY_MODULE_MAP[t]||t,value:e};a.push(r)}));var r=a.findIndex((function(e){return"pods"===e.module}));if(r>0){var n=a[0];a[0]=a[r],a[r]=n}return r<0&&a.unshift({module:"pods",value:""}),a}},{key:"render",value:function(){var e=this.state.items;return f.default.createElement("div",{className:R.default.wrapper},f.default.createElement(g.Form.Item,null,f.default.createElement(_.default,{value:e,itemType:"object",addText:t("ADD"),onChange:this.handleAddQuotaItem,checkItemValid:this.checkItemValid},f.default.createElement(C.default,{isFederated:this.props.isFederated}))))}},{key:"omitKeys",get:function(){var e=globals.config.supportGpuType,t=(0,l.default)(O.resourceLimitKey);return e.forEach((function(e){return t.push("limits.".concat(e),"requests.".concat(e))})),t}}]),r}(f.default.Component);a.default=k},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),o=n(r(21)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(25),m=r(58),h=n(r(774)),v=n(r(740)),E=r(1336);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=y(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).handleLimitValue=function(t){e.props.onChange(t)},e.renderInputByModule=function(){var a=e.props.value,r=Object.keys(m.QUOTAS_MAP),n=Object.entries(m.QUOTAS_MAP).filter((function(e){return e[0]!==a.module})).map((function(e){return e[1].name}));return r.concat(n).includes(a.module)?d.default.createElement(v.default,{name:"value",className:"margin-l12",placeholder:t("QUOTA"),integer:!0}):d.default.createElement(p.Input,{name:"value",className:"margin-l12",placeholder:t("QUOTA")})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.value;return d.default.createElement(h.default,{value:e,onChange:this.handleLimitValue},d.default.createElement(p.Select,(0,o.default)({name:"module",options:this.options,searchable:!0,placeholder:" ",disabled:"pods"===e.module},"placeholder",t("SELECT_RESOURCE_TIP"))),this.renderInputByModule())}},{key:"options",get:function(){var e=this,a=this.props,r=a.arrayValue,n=a.value.module,o=r.map((function(e){return e.module})),u=[].concat((0,l.default)(o.filter((function(e){return e!==n}))),(0,l.default)(E.RESERVED_MODULES));return Object.keys(m.QUOTAS_MAP).filter((function(t){return!(u.includes(t)||e.props.isFederated&&E.FEDERATED_PROJECT_UNSOPPORT_QUOTA.includes(t))})).map((function(e){return{label:t("NUMBER_OF_".concat(e.toUpperCase())),value:e}}))}}]),r}(d.default.Component);a.default=b},function(e,t,a){e.exports={wrapper:"OHqalT8ZLNRPiAcYkLb-p",add:"_1RKtUyVv46X4f1WsjhxvcS",item:"zOiZ4AklV0TvknqGbtNzB"}},function(e,t,a){e.exports={body:"_38N-CZ_6U9Ba4aNiyInnr8",quotaItem:"_1VqWJpf8oTEkFhFkRxwO-G",label:"_2V4kVNLAdMz66nvNOjqBhX"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c,s=n(r(21)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(74)),v=n(r(0)),E=r(70),y=n(r(16)),b=n(r(32)),g=n(r(1)),_=r(25),S=n(r(274)),O=n(r(749)),C=r(58),T=n(r(770)),R=r(5),D=n(r(2340));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var I=(0,E.observer)((c=u=function(e){(0,d.default)(r,e);var a=P(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).nameValidator=function(e,a,r){if(!a)return r();if(0===a.indexOf("kube-"))return r({message:t("NAME_VALIDATION_FAILED"),field:e.field});var l=n.props.cluster||(0,y.default)(n.props.formTemplate,"cluster");if(!l&&globals.app.isMultiCluster)return r();n.store.checkName({name:a,cluster:l}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.handleClusterChange=function(){if(n.nameRef&&n.nameRef.current){var e="metadata.name";n.formRef&&n.formRef.current&&!(0,b.default)(n.formRef.current.state.errors)&&n.formRef.current.resetValidateResults(e),n.nameRef.current.validate((0,s.default)({},e,(0,y.default)(n.props.formTemplate,e)))}},n.valueRenderer=function(e){return v.default.createElement(O.default,{cluster:e.cluster,size:"small",noStatus:!0})},n.optionRenderer=function(e){return v.default.createElement(O.default,{cluster:e.cluster,size:"small",theme:"light",noStatus:!0})},n.store=e.store,n.workspaceStore=new T.default,n.formRef=v.default.createRef(),n.nameRef=v.default.createRef(),n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.props.hideCluster||this.fetchClusters()}},{key:"fetchClusters",value:function(e){this.workspaceStore.fetchClusters(N(N({},e),{},{workspace:this.props.workspace}))}},{key:"renderClusters",value:function(){return v.default.createElement(_.Form.Group,{label:t("CLUSTER"),desc:t("SELECT_CLUSTER_DESC")},v.default.createElement(_.Form.Item,{rules:[{required:!0,message:t("CLUSTER_EMPTY_DESC")}]},v.default.createElement(_.Select,{name:"cluster",className:D.default.cluster,options:this.clusters,defaultValue:this.props.defaultCluster,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,onChange:this.handleClusterChange,placeholder:" "})))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.formTemplate,n=e.hideCluster,l=e.onOk,o=e.onCancel,u=e.isSubmitting;return v.default.createElement(S.default.Form,{width:960,formRef:this.formRef,bodyClassName:D.default.body,data:r,onCancel:o,onOk:l,visible:a,closable:!1,isSubmitting:u,hideHeader:!0},v.default.createElement("div",{className:D.default.header},v.default.createElement("img",{src:"/assets/project-create.svg",alt:""}),v.default.createElement("div",{className:D.default.title},v.default.createElement("div",null,t("CREATE_PROJECT")),v.default.createElement("p",null,t("CREATE_PROJECT_DESC")))),v.default.createElement("div",{className:D.default.content},v.default.createElement(_.Columns,null,v.default.createElement(_.Column,null,v.default.createElement(_.Form.Item,{label:t("NAME"),desc:t("PROJECT_NAME_DESC"),ref:this.nameRef,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:C.PATTERN_SERVICE_NAME,message:t("PROJECT_NAME_INVALID_DESC")},{validator:this.nameValidator}]},v.default.createElement(_.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),v.default.createElement(_.Column,null,v.default.createElement(_.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},v.default.createElement(_.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),v.default.createElement(_.Columns,null,v.default.createElement(_.Column,null,v.default.createElement(_.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},v.default.createElement(_.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))),v.default.createElement(_.Column,null)),!n&&this.renderClusters()))}},{key:"networkOptions",get:function(){return[{label:t("Off"),value:""},{label:t("On"),value:"enabled"}]}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,cluster:e,disabled:!e.isReady}}))}},{key:"defaultClusters",get:function(){var e=this.workspaceStore.clusters.data.filter((function(e){return e.isReady})).map((function(e){return{name:e.name}}));return(0,b.default)(e)?void 0:e}}]),r}(v.default.Component),u.propTypes={formTemplate:g.default.object,visible:g.default.bool,isSubmitting:g.default.bool,onOk:g.default.func,onCancel:g.default.func},u.defaultProps={formTemplate:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},o=c,(0,h.default)(o.prototype,"clusters",[R.computed],Object.getOwnPropertyDescriptor(o.prototype,"clusters"),o.prototype),(0,h.default)(o.prototype,"defaultClusters",[R.computed],Object.getOwnPropertyDescriptor(o.prototype,"defaultClusters"),o.prototype),l=o))||l;a.default=I},function(e,t,a){e.exports={body:"yQVuHwvZatSDhyjLUxSq5",header:"_3s8iAobkuDQP3egb7N_LV-",title:"_1N6z-WOWpmvXrCkFLYrEFO",content:"_2J8aCzfL8eRgztGnCRkwJc",cluster:"_3sckvxZYDol88LJbcAn1US",toolmessage:"_37IuScW3NoMm7a6hjFHwUR"}},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c,s=n(r(71)),i=n(r(21)),f=n(r(49)),d=n(r(50)),p=n(r(12)),m=n(r(13)),h=n(r(19)),v=n(r(20)),E=n(r(18)),y=l(r(0)),b=n(r(1)),g=r(70),_=n(r(191)),S=r(25),O=n(r(274)),C=n(r(770)),T=n(r(278));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var N=(0,g.observer)((c=u=function(e){(0,h.default)(r,e);var a=k(r);function r(e){var t;return(0,p.default)(this,r),(t=a.call(this,e)).handleWorkspaceChange=function(e){t.setState({workspace:e},(function(){t.fetchMembers()}))},t.fetchWorkspaces=function(){var e=(0,d.default)(f.default.mark((function e(a){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.workspaceStore.fetchList(a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.fetchMembers=function(){var e=(0,d.default)(f.default.mark((function e(a){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.workspace){e.next=2;break}return e.abrupt("return",t.memberStore.fetchList(D({workspace:t.state.workspace},a)));case 2:return e.abrupt("return",Promise.resolve({}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={workspace:""},t.formTemplate={},t.workspaceStore=new C.default,t.memberStore=new T.default,t}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.workspaceStore.fetchList()}},{key:"getWorkspaces",value:function(){return this.workspaceStore.list.data.map((function(e){return{label:e.name,value:e.name}}))}},{key:"getUsers",value:function(){return this.memberStore.list.data.map((function(e){return{label:e.username,value:e.username}}))}},{key:"render",value:function(){return y.default.createElement(O.default.Form,(0,s.default)({title:t("ASSIGN_WORKSPACE"),icon:"firewall",width:691,data:this.formTemplate},this.props),y.default.createElement(S.Alert,{className:"margin-b12",type:"info",message:t("PROJECT_ASSIGN_DESC")}),y.default.createElement(S.Form.Item,{label:t("WORKSPACE"),desc:t("SELECT_WORKSPACE_DESC")},y.default.createElement(S.Select,{name:"metadata.labels['kubesphere.io/workspace']",onChange:this.handleWorkspaceChange,options:this.getWorkspaces(),pagination:(0,_.default)(this.workspaceStore.list,["page","total","limit"]),isLoading:this.workspaceStore.list.isLoading,onFetch:this.fetchWorkspaces,placeholder:" ",searchable:!0,clearable:!0})),y.default.createElement(S.Form.Item,{label:t("PROJECT_ADMINISTRATOR"),desc:t("PROJECT_ADMINISTRATOR_DESC")},y.default.createElement(S.Select,{name:"metadata.annotations['kubesphere.io/creator']",options:this.getUsers(),pagination:(0,_.default)(this.memberStore.list,["page","total","limit"]),isLoading:this.memberStore.list.isLoading,onFetch:this.fetchMembers,placeholder:" ",searchable:!0,clearable:!0})))}}]),r}(y.Component),u.propTypes={visible:b.default.bool,onOk:b.default.func,onCancel:b.default.func},u.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},o=c))||o;a.default=N},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(16)),m=n(r(936)),h=n(r(68)),v=n(r(190)),E=n(r(850)),y=n(r(996)),b=n(r(199)),g=n(r(300)),_=n(r(0)),S=n(r(1)),O=n(r(274)),C=n(r(872)),T=n(r(811)),R=n(r(853)),D=r(37);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var I=function(e){(0,i.default)(r,e);var a=P(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleChange=function(e){t.setState({data:{default:e.limits,defaultRequest:e.requests}})},t.handleOk=function(){(0,t.props.onOk)(t.state.data)},t.handleError=function(e){return t.setState({error:e})},t.availableQuota_memory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=N({},e);return Object.keys(e).forEach((function(a){a.endsWith("memory")&&(t[a]=(0,D.memoryFormat)(e[a])),a.endsWith("cpu")&&(t[a]=(0,D.cpuFormat)(e[a]))})),t},t.singleClusterQuota=function(e,a,r){return new Promise((function(n){Promise.all([t.quotaStore.fetch({cluster:r,namespace:a}),t.workspaceQuotaStore.fetchDetail({name:e,workspace:e,cluster:r})]).then((function(e){var a=(0,p.default)(e[1],"hard"),r=(0,p.default)(e[0],"data.hard");n({workspaceQuota:t.availableQuota_memory(a),namespaceQuota:t.availableQuota_memory(r)})}))}))},t.multiClusterQuota=function(e,a){var r=[],n={"limits.cpu":void 0,"limits.memory":void 0};t.props.clusters.forEach((function(n){return r.push(t.singleClusterQuota(e,a,n))})),Promise.all(r).then((function(e){var a=e.map((function(e){return(0,p.default)(e,"workspaceQuota",n)})),r=e.map((function(e){return(0,p.default)(e,"namespaceQuota",n)})),l=e.map((function(e){return(0,v.default)((0,p.default)(e,"namespaceQuota",{}),D.resourceLimitKey)}));t.setState({availableQuota:{workspace:t.transformQuota(a),namespace:N(N({},t.transformQuota(r)),t.transformGpu(l))}})}))},t.transformQuota=function(e){return{"limits.cpu":t.findCpuOrMemoryMin(e,"limits.cpu"),"limits.memory":t.findCpuOrMemoryMin(e,"limits.memory"),"requests.cpu":t.findCpuOrMemoryMin(e,"requests.cpu"),"requests.memory":t.findCpuOrMemoryMin(e,"requests.memory")}},t.findCpuOrMemoryMin=function(e,t){var a=e.map((function(e){return e[t]}));return(0,E.default)(a)},t.transformGpu=function(e){var t=globals.config.supportGpuType,a=e.map((function(e){return(0,b.default)(e,(function(e,a){return t.some((function(e){return(0,g.default)(a,e)}))}))}));return(0,y.default)(a,(function(e,t){var a=(0,p.default)(e,"".concat(Object.keys(t)[0]));return a?Number(a)>Number(Object.values(t)[0])?N(N({},e),t):N({},e):N(N({},e),t)}),{})},t.fetchQuota=(0,o.default)(l.default.mark((function e(){var a,r,n,o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,r=a.workspace,n=a.cluster,o=a.namespace,a.isFederated){e.next=8;break}return e.next=4,t.singleClusterQuota(r,o,n);case 4:u=e.sent,t.setState({availableQuota:{workspace:(0,p.default)(u,"workspaceQuota"),namespace:(0,p.default)(u,"namespaceQuota")}}),e.next=9;break;case 8:t.multiClusterQuota(r,o);case 9:case"end":return e.stop()}}),e)}))),t.getQuotaInfo=function(e){return(0,p.default)(t.workspaceQuota,e,void 0)},t.handleOk=function(){(0,t.props.onOk)(t.state.data)},t.handleError=function(e){return t.setState({error:e})},t.getQuotaInfo=function(e){return(0,p.default)(t.workspaceQuota,e,void 0)},t.quotaStore=new T.default,t.workspaceQuotaStore=new R.default,t.state={data:(0,p.default)(e.detail,"limit",{}),error:"",availableQuota:{}},t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchQuota()}},{key:"componentDidUpdate",value:function(e){var t=this.props.detail;t.limit&&t.limit!==e.detail.limit&&this.setState({data:t.limit})}},{key:"getGpuLimit",value:function(){return(0,D.gpuLimitsArr)(this.workspaceQuota)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=this.state.error;return _.default.createElement(O.default,{width:960,title:t("EDIT_DEFAULT_CONTAINER_QUOTAS"),icon:"firewall",onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n,disableSubmit:!!l},_.default.createElement(C.default,{defaultValue:this.resourceLimit,onChange:this.handleChange,onError:this.handleError,supportGpuSelect:this.props.supportGpuSelect||!1,workspaceLimitProps:this.workspaceLimitProps}))}},{key:"resourceLimit",get:function(){return{requests:(0,p.default)(this.props.detail,"limit.defaultRequest",{}),limits:(0,p.default)(this.props.detail,"limit.default",{})}}},{key:"workspaceQuota",get:function(){var e=(0,p.default)(this.state,"availableQuota.namespace",{}),t=(0,p.default)(this.state,"availableQuota.workspace",{});return(0,m.default)(e,t,(function(e,t){if(e||t)return(0,h.default)(e)?t:e<t?e:t}))}},{key:"workspaceLimitProps",get:function(){return{limits:{cpu:this.getQuotaInfo("limits.cpu"),memory:this.getQuotaInfo("limits.memory")},requests:{cpu:this.getQuotaInfo("requests.cpu"),memory:this.getQuotaInfo("requests.memory")},gpuLimit:this.getGpuLimit()}}}]),r}(_.default.Component);a.default=I,I.propTypes={detail:S.default.object,namespace:S.default.string,visible:S.default.bool,onOk:S.default.func,onCancel:S.default.func,isSubmitting:S.default.bool},I.defaultProps={visible:!1,isSubmitting:!1,namespace:"",detail:{},onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=r(25),i=n(r(274)),f=n(r(760)),d=n(r(2344)),p=n(r(748));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={"resource.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=i.default.open(h({onOk:function(){a.delete(r).then((function(){i.default.close(o),s.Notify.success({content:t("DELETE_SUCCESSFUL")}),n&&n()}))},store:a,modal:f.default,resource:r.name},l))}},"resource.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,d=(0,c.default)(e,["store","success","rowKey"]),m=new p.default,v=r.list,E=v.data,y=v.selectedRowKeys,b=E.filter((function(e){return y.includes(e[u])})).map((function(e){return{name:e.name,namespace:e.namespace}})),g=b.map((function(e){return e.name})),_=i.default.open(h({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],E.forEach((function(e){b.find((function(t){return t.name===e.name&&t.namespace===e.namespace}))&&(a.push(r.delete(e)),"statefulsets"===r.module&&a.push(m.delete(h(h({},e),{},{name:e.spec.serviceName}))))})),e.next=4,Promise.all(a);case 4:i.default.close(_),s.Notify.success({content:t("DELETE_SUCCESSFUL")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:g.join(", "),modal:f.default,store:r},d))}},"resource.batch.stop":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,f=(0,c.default)(e,["store","success","rowKey"]),p=r.list,m=p.data,v=p.selectedRowKeys,E=m.filter((function(e){return v.includes(e[u])})).map((function(e){return{name:e.name,namespace:e.namespace}})),y=E.map((function(e){return e.name})),b=i.default.open(h({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],m.forEach((function(e){E.find((function(t){return t.name===e.name&&t.namespace===e.namespace}))&&a.push(r.stop(e))})),e.next=4,Promise.all(a);case 4:i.default.close(b),s.Notify.success({content:"".concat(t("STOP_SUCCESS_DESC"))}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:y.join(", "),modal:d.default,store:r},f))}}};a.default=v},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(25),p=n(r(274)),m=n(r(2345));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={confirm:""},e.handleInputChange=function(t){e.setState({confirm:t.target.value})},e.handleOk=function(){e.props.onOk()},e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({confirm:""})}},{key:"render",value:function(){var e=this.props,a=e.app,r=e.type,n=e.resource,l=e.visible,o=e.onCancel,u=e.title,c=e.desc,s=e.isSubmitting,f=r||void 0,h=r?"".concat(r,"_LOW"):void 0,v=r?"".concat(r,"_PL"):void 0,E=c||(n&&r?1===n.split(", ").length?t.html("DELETE_RESOURCE_TYPE_DESC_SI",{type:t(h),resource:n}):t.html("DELETE_RESOURCE_TYPE_DESC_PL",{type:t(h),resource:n}):t.html("STOP_DESC",{resource:n,type:""}));return a&&(E=t.html("STOP_APP_RESOURCE_TIP",{type:r,resource:n,app:a})),i.default.createElement(p.default,{width:504,bodyClassName:m.default.modalBody,visible:l,isSubmitting:s,onCancel:o,hideHeader:!0,hideFooter:!0},i.default.createElement("div",{className:m.default.body},i.default.createElement("div",{className:"h5"},i.default.createElement(d.Icon,{name:"close",type:"light",className:m.default.closeIcon}),u||(n&&r?1===n.split(", ").length?t("STOP_TITLE_SI",{type:t(f)}):t("STOP_TITLE_PL",{type:t(v)}):t("STOP"))),i.default.createElement("div",{className:m.default.content},i.default.createElement("p",null,E),n&&i.default.createElement(d.Input,{name:"confirm",value:this.state.confirm,onChange:this.handleInputChange,placeholder:n,autoFocus:!0}))),i.default.createElement("div",{className:m.default.footer},i.default.createElement(d.Button,{onClick:o,"data-test":"modal-cancel"},t("CANCEL")),i.default.createElement(d.Button,{type:"danger",loading:s,disabled:s||!!n&&this.state.confirm!==n,onClick:this.handleOk,"data-test":"modal-ok"},t("OK"))))}}]),r}(i.default.Component);a.default=v,v.propTypes={type:f.default.string,resource:f.default.string,visible:f.default.bool,title:f.default.oneOfType([f.default.string,f.default.node]),desc:f.default.oneOfType([f.default.string,f.default.node]),onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},v.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={modalBody:"V3WE_gCdFFccI6xtK2Ggx",body:"_1zlECIP6AUyOgycNLNcLO0",content:"YrlO8vrb3S-LDnaRDeIJM",closeIcon:"_2Rw7-E0IzpRuCWq8Nbr_QQ",footer:"_1xi-T9pvoKbF80RaXo2H7X"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=r(25),i=n(r(274)),f=n(r(1337)),d=n(r(1338)),p=n(r(73));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={"resource.baseinfo.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=i.default.open(h({onOk:function(e){a.patch(r,e).then((function(){i.default.close(o),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},detail:r,modal:f.default,store:a},l))}},"resource.yaml.edit":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,f=(0,c.default)(e,["store","detail","success"]),m=i.default.open(h({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isScheduleProject){e.next=9;break}return(0,p.default)(a[0],"metadata.resourceVersion",n.resourceVersion),e.next=5,r.update(n,a[0]);case 5:return e.next=7,r.updateScheduleYaml(n,a[1]);case 7:e.next=12;break;case 9:return(0,p.default)(a,"metadata.resourceVersion",n.resourceVersion),e.next=12,r.update(n,a);case 12:s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),i.default.close(m),u&&u();case 15:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),detail:n,store:r,modal:d.default},f))}}};a.default=v},function(e,t,a){e.exports={editor:"_3JQlRh-o6JuniWSRDk3cbe",readOnly:"_1-NRR0ZvVwGhsXzTyFruig"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(56)),u=n(r(73)),c=n(r(185)),s=r(25),i=n(r(274)),f=n(r(2349)),d=n(r(1339)),p=n(r(2352)),m=n(r(733));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={"role.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.workspace,u=e.success,c=e.devops,d=(0,o.default)(e,["store","cluster","namespace","workspace","success","devops"]),p=a.module,h=i.default.open(v({onOk:function(e){e?(c&&(e.metadata.namespace=c),a.create(e,{cluster:r,namespace:n,workspace:l,devops:c}).then((function(){i.default.close(h),s.Notify.success({content:t("CREATE_SUCCESSFUL")}),u&&u()}))):i.default.close(h)},modal:f.default,store:a,module:p,cluster:r,namespace:n,workspace:l,formTemplate:m.default[p]({namespace:n})},d))}},"role.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),f=a.module,p=Object.assign(m.default[f]({namespace:l.namespace}),(0,c.default)(r._originData));(0,u.default)(p,"metadata.resourceVersion",r.resourceVersion),p.roleTemplates=r.roleTemplates;var h=i.default.open(v({onOk:function(e){e?(delete p.roleTemplates,(0,u.default)(p,'metadata.annotations["iam.kubesphere.io/aggregation-roles"]',JSON.stringify(e)),a.update(r,p).then((function(){i.default.close(h),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))):i.default.close(h)},modal:d.default,store:a,module:f,edit:!0,formTemplate:p},l))}},"role.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=i.default.open(v({onOk:function(){a.delete(r).then((function(){i.default.close(u),s.Notify.success({content:t("DELETE_SUCCESSFUL")}),n&&n()}))},modal:p.default,module:a.module,detail:r,store:a},l))}}};a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(16)),m=n(r(73)),h=n(r(0)),v=r(70),E=n(r(1)),y=r(25),b=n(r(274)),g=n(r(1339)),_=r(58);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,v.observer)((u=o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={showEditAuthorization:!1},e.showEditAuthorization=function(){e.setState({showEditAuthorization:!0})},e.hideEditAuthorization=function(){e.setState({showEditAuthorization:!1})},e.handleCreate=function(t){(0,m.default)(e.props.formTemplate,'metadata.annotations["iam.kubesphere.io/aggregation-roles"]',JSON.stringify(t)),e.props.onOk(e.props.formTemplate)},e.roleNameValidator=function(a,r,n){if(!r)return n();var l=e.props,o=l.workspace,u=l.cluster,c=l.namespace,s=(0,p.default)(e.props.formTemplate,"metadata.name");if(e.props.edit&&s===r)return n();e.props.store.checkName({name:r,workspace:o,cluster:u,namespace:c}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.module,l=e.onCancel,o=e.formTemplate,u=e.roleTemplates,c=e.isSubmitting,s=this.state.showEditAuthorization,i="workspaceroles"===n;return s?h.default.createElement(g.default,{module:n,visible:s,formTemplate:o,roleTemplates:u,onOk:this.handleCreate,onCancel:this.hideEditAuthorization,isSubmitting:c}):h.default.createElement(b.default.Form,{width:600,title:a||t("CREATE_ROLE"),icon:"role",data:o,onCancel:l,onOk:this.showEditAuthorization,okText:t("EDIT_PERMISSIONS"),visible:r},h.default.createElement(y.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),tip:i?t("WORKSPACE_ROLE_NAME_TIP"):null,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:_.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.roleNameValidator}]},h.default.createElement(y.Input,{name:"metadata.name",maxLength:63})),h.default.createElement(y.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},h.default.createElement(y.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),h.default.createElement(y.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},h.default.createElement(y.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})),h.default.createElement(y.Alert,{className:"margin-t12",title:t("NEXT_STEP"),message:t("NEXT_STEP_DESC")}))}}]),r}(h.default.Component),o.propTypes={store:E.default.object,module:E.default.string,roleTemplates:E.default.array,formTemplate:E.default.object,title:E.default.string,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,module:"roles",onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROLE_MODULES=void 0;var r={globalroles:[{name:"Clusters Management",icon:"cluster"},{name:"Access Control",icon:"key"},{name:"Apps Management",icon:"openpitrix",hide:!globals.app.enableAppStore},{name:"Platform Settings",icon:"cogwheel"}],workspaceroles:[{name:"Projects Management",icon:"project"},{name:"DevOps Management",icon:"strategy-group",hide:!globals.app.hasKSModule("devops")},{name:"Apps Management",icon:"appcenter",hide:!globals.app.hasKSModule("openpitrix")},{name:"Access Control",icon:"key"},{name:"Workspace Settings",icon:"cogwheel"}],roles:[{name:"Application Workloads",icon:"appcenter"},{name:"Storage Management",icon:"storage"},{name:"Configuration Center",icon:"hammer"},{name:"Monitoring & Alerting",icon:"monitor"},{name:"Access Control",icon:"human"},{name:"Project Settings",icon:"project"}],devopsroles:[{name:"Pipelines Management",icon:"application"},{name:"Continuous Deployments Management",icon:"rocket"},{name:"Code Repositories Management",icon:"code"},{name:"Credentials Management",icon:"key"},{name:"Access Control",icon:"human"},{name:"DevOps Settings",icon:"strategy-group"}],clusterroles:[{name:"Cluster Resources Management",icon:"nodes"},{name:"Project Resources Management",icon:"project"},{name:"Network Management",icon:"earth"},{name:"Storage Management",icon:"database"},{name:"Monitoring & Alerting",icon:"monitor"},{name:"Access Control",icon:"human"},{name:"Cluster Settings",icon:"cluster"}]};t.ROLE_MODULES=r},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(109)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(16)),m=l(r(32)),h=r(25),v=l(r(275)),E=l(r(1340));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=y(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).handleCheck=function(){var a=e.props,r=a.roleTemplates,n=a.roleTemplatesMap,l=a.data,u=a.onChange,c=(0,o.default)(r);if(c.includes(l.name)){var s=c.filter((function(t){return t!==l.name&&e.getDependencies([t]).includes(l.name)}));0===s.length?c=c.filter((function(e){return e!==l.name})):h.Notify.warning(t("DESELECT_RESOURCE_FIRST",{resource:s.map((function(e){return t("PERMISSION_".concat((0,p.default)(n,"[".concat(e,"].aliasName")).toUpperCase().replace(/[^A-Z]+/g,"_")))})).join("/")}))}else c.push(l.name);u([].concat((0,o.default)(c),(0,o.default)(e.getDependencies(c))))},e.getDependencies=function(t){var a=e.props.roleTemplatesMap,r=[];return(0,m.default)(t)||(t.forEach((function(e){var n=a[e];n.dependencies&&n.dependencies.forEach((function(e){t.includes(e)||r.includes(e)||r.push(e)}))})),r.length>0&&r.push.apply(r,(0,o.default)(e.getDependencies(r)))),r},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.roleTemplates,r=e.roleTemplatesMap,n=e.data;return d.default.createElement("div",{className:E.default.checkItem},d.default.createElement(h.Checkbox,{checked:a.includes(n.name),onClick:this.handleCheck}),d.default.createElement(v.default,{title:t("PERMISSION_".concat(n.aliasName.toUpperCase().replace(/[^A-Z]+/g,"_"))),onClick:this.handleCheck,description:t("PERMISSION_".concat(n.aliasName.toUpperCase().replace(/[^A-Z]+/g,"_"),"_DESC"))}),n.dependencies.length>0&&d.default.createElement("div",{className:E.default.extra},t("DEPENDS_ON"),n.dependencies.map((function(e){return d.default.createElement(h.Tag,{className:E.default.tag,type:"info",key:e},t("PERMISSION_".concat((0,p.default)(r,"[".concat(e,"].aliasName")).toUpperCase().replace(/[^A-Z]+/g,"_"))))}))))}}]),r}(d.Component);a.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(49)),s=n(r(21)),i=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(0)),E=n(r(1)),y=r(70),b=n(r(32)),g=n(r(274)),_=n(r(278)),S=n(r(1341)),O=r(58),C=n(r(2353));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var R=(0,y.observer)((u=o=function(e){(0,p.default)(n,e);var a,r=T(n);function n(e){var t;return(0,f.default)(this,n),(t=r.call(this,e)).state={users:[],groups:{},isLoading:!1},t.store=new _.default,t.groupStore=new S.default,t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.visible,a=e.detail;t&&a.name&&this.fetchData()}},{key:"fetchData",value:(a=(0,i.default)(c.default.mark((function e(){var t,a,r,n,l,o,u,i,f;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props,r=a.module,n=a.detail.name,l=a.cluster,o=a.workspace,u=a.namespace,this.setState({isLoading:!0}),e.next=4,this.store.fetchList((t={},(0,s.default)(t,O.ROLE_QUERY_KEY[r],n),(0,s.default)(t,"cluster",l),(0,s.default)(t,"workspace",o),(0,s.default)(t,"namespace",u),t));case 4:if(i=e.sent,!(0,b.default)(i)||!o){e.next=10;break}return e.next=8,this.groupStore.getWorksapceRoleBinding("",{cluster:l,workspace:o,namespace:u,rolename:n});case 8:f=e.sent,this.setState({groups:f});case 10:this.setState({users:i,isLoading:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.visible,n=e.onOk,l=e.onCancel,o=e.isSubmitting,u=this.state,c=u.users,s=u.groups,i=u.isLoading;return v.default.createElement(g.default,{width:504,onOk:i||c.length||s.totalItems?null:n,onCancel:l,visible:r,isSubmitting:o,okButtonType:"danger",hideHeader:!0},v.default.createElement("div",{className:C.default.body},v.default.createElement("div",{className:"h5"},t("DELETE_ROLE")),v.default.createElement("p",null,!i&&c.length?t.html("DELETE_ROLE_USER_TIP".concat(1===c.length?"":"_PL"),{count:c.length}):s.totalItems?t.html("DELETE_ROLE_DEPARTMENT_TIP".concat(1===s.totalItems?"":"_PL"),{count:s.totalItems}):t.html("DELETE_ROLE_TIP",{resource:a.name}))))}}]),n}(v.default.Component),o.propTypes={detail:E.default.object,module:E.default.string,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},o.defaultProps={detail:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=R},function(e,t,a){e.exports={body:"_2OPaWn_o79qbwztkINRFGV"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(56)),u=n(r(16)),c=n(r(73)),s=r(25),i=n(r(274)),f=n(r(766)),d=n(r(2355)),p=n(r(2357)),m=n(r(2359)),h=r(58),v=n(r(733)),E=n(r(822)),y=n(r(1208));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={"router.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,c=e.module,d=e.success,p=e.isFederated,m=(0,o.default)(e,["store","cluster","namespace","module","success","isFederated"]),b=h.MODULE_KIND_MAP[c],_=(0,l.default)({},b,v.default[c]({namespace:n}));p&&Object.keys(_).forEach((function(e){_[e]=v.default.federated({data:_[e],clusters:m.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var S=i.default.open(g({onOk:function(e){var l=(0,u.default)(e,b);if(e){var o={cluster:r,namespace:n};o.namespace=o.namespace||(0,u.default)(l,"metadata.namespace"),a.create(l,o).then((function(){i.default.close(S),s.Notify.success({content:t("CREATE_SUCCESSFUL")}),d&&d(),E.default.delete("".concat(c,"_create_form"))}))}},module:c,cluster:r,namespace:n,name:"Route",formTemplate:_,isFederated:p,steps:y.default,modal:f.default,store:a},m))}},"router.rules.edit":{on:function(e){var a=e.store,r=e.namespace,n=e.detail,l=e.success,u=(0,o.default)(e,["store","namespace","detail","success"]),c=i.default.open(g({onOk:function(e){a.update(n,e).then((function(){i.default.close(c),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},modal:p.default,detail:n,cluster:n.cluster,store:a,namespace:r},u))}},"fedproject.router.rules.edit":{on:function(e){var a=e.store,r=e.namespace,n=e.detail,l=e.success,f=(0,o.default)(e,["store","namespace","detail","success"]),d=i.default.open(g({onOk:function(e){var r=(0,u.default)(e,"spec.template",{}),o=new Set;Object.values(r.spec).forEach((function(e){e.forEach((function(e){return e.clusters.forEach((function(e){return o.add(e)}))}))}));var f=Array.from(o).map((function(e){return{name:e}}));(0,c.default)(e,"spec.placement.clusters",f),a.update(n,e).then((function(){i.default.close(d),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},modal:m.default,detail:n,cluster:n.cluster,namespace:r,store:a},f))}},"router.annotations.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=i.default.open(g({onOk:function(e){a.update(r,e).then((function(){i.default.close(u),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},modal:d.default,detail:r,store:a},l))}}};a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(5),v=r(70),E=r(25),y=n(r(274)),b=n(r(991)),g=n(r(2356));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=(0,v.observer)((u=o=function(e){(0,i.default)(r,e);var a=_(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,h.toJS)(o.selectedRowKeys).filter((function(e){return e!==l.uid}));r(e),o.setSelectRowKeys(u)},t.state={formTemplate:(0,h.toJS)(e.detail._originData)},t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){(0,h.toJS)(this.props.detail._originData)!==e.detail._originData&&this.setState({formTemplate:(0,h.toJS)(this.props.detail._originData)})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting;return p.default.createElement(y.default.Form,{title:t("EDIT_ANNOTATIONS"),icon:"firewall",visible:a,width:960,data:this.state.formTemplate,onOk:this.handleOk,onCancel:r,isSubmitting:n},p.default.createElement("div",{className:g.default.wrapper},p.default.createElement("div",{className:g.default.formWrapper},p.default.createElement(E.Form.Item,null,p.default.createElement(b.default,{name:"metadata.annotations",hiddenKeys:globals.config.preservedAnnotations,addText:t("ADD")})))))}}]),r}(p.default.Component),o.propTypes={detail:m.default.object,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={detail:{},isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=S},function(e,t,a){e.exports={wrapper:"_1Krvo8pJnzz9dd6tFsz7bY",formWrapper:"_313r2ZWWe5GzJhGz_CNWWG"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(5),p=n(r(16)),m=n(r(185)),h=n(r(32)),v=n(r(274)),E=n(r(1062)),y=n(r(2358));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=b(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleOk=function(){var e=t.state.subRoute;if(e.onSave)return e.onSave((function(){t.setState({subRoute:{}})}));var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=t.state.formTemplate.Ingress,u=n.list,c=(0,d.toJS)(u.selectedRowKeys).filter((function(e){return e!==l.uid}));r(o),u.setSelectRowKeys(c)},t.handleCancel=function(){var e=t.state.subRoute;if(e.onCancel)return e.onCancel(),void t.setState({subRoute:{}});(0,t.props.onCancel)()},t.form=i.default.createRef(),t.state={subRoute:{},formTemplate:t.getFormTemplate((0,d.toJS)(e.detail._originData))},t}return(0,o.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}}]),(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){(0,d.toJS)(this.props.detail._originData)!==e.detail._originData&&this.setState({formTemplate:this.getFormTemplate((0,d.toJS)(this.props.detail._originData))})}},{key:"getFormTemplate",value:function(e){var t=(0,m.default)(e),a=(0,p.default)(t,"spec.tls",[]),r=(0,p.default)(t,"spec.rules",[]);return a.length>0&&r.length>0&&r.forEach((function(e){var t=a.find((function(t){return t.hosts&&t.hosts.includes(e.host)}));t?(e.protocol="https",e.secretName=t.secretName):e.protocol="http"})),{Ingress:t}}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.cluster,n=e.isSubmitting,l=e.namespace,o=this.state,u=o.subRoute,c=o.formTemplate;return i.default.createElement(v.default,{width:960,title:t("EDIT_ROUTING_RULES"),icon:"firewall",onOk:this.handleOk,okText:t("OK"),cancelText:(0,h.default)(u)?null:t("PREVIOUS"),onCancel:this.handleCancel,visible:a,isSubmitting:n},i.default.createElement("div",{className:y.default.wrapper},i.default.createElement(E.default,{module:"ingresses",formRef:this.form,formTemplate:c,cluster:r,namespace:l})))}}]),r}(i.default.Component);g.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},g.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1},g.childContextTypes={registerSubRoute:f.default.func,resetSubRoute:f.default.func};var _=g;a.default=_},function(e,t,a){e.exports={wrapper:"_2wf3cNZWhIeqht7bbNiU00"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(5),p=n(r(16)),m=n(r(185)),h=n(r(32)),v=n(r(745)),E=n(r(274)),y=n(r(1062)),b=n(r(2360));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,u.default)(r,e);var a=g(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleOk=function(){var e=t.state.subRoute;if(e.onSave)return e.onSave((function(){t.setState({subRoute:{}})}));(0,t.props.onOk)(t.state.formTemplate.Ingress)},t.handleCancel=function(){var e=t.state.subRoute;if(e.onCancel){var a=e.onCancel();if(!a)return;return a(),void t.setState({subRoute:{}})}(0,t.props.onCancel)()},t.formRef=i.default.createRef(),t.state={subRoute:{},formTemplate:t.getFormTemplate((0,d.toJS)(e.detail._originData))},t}return(0,o.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}}]),(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){(0,v.default)((0,d.toJS)(this.props.detail._originData),(0,d.toJS)(e.detail._originData))||this.setState({formTemplate:this.getFormTemplate((0,d.toJS)(this.props.detail._originData))})}},{key:"getFormTemplate",value:function(e){var t=(0,m.default)(e),a=(0,p.default)(t,"spec.tls",[]),r=(0,p.default)(t,"spec.rules",[]);return a.length>0&&r.length>0&&r.forEach((function(e){var t=a.find((function(t){return t.hosts&&t.hosts.includes(e.host)}));t?(e.protocol="https",e.secretName=t.secretName):e.protocol="http"})),{Ingress:t}}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.cluster,n=e.isSubmitting,l=e.isFederated,o=e.projectDetail,u=this.state,c=u.subRoute,s=u.formTemplate;return i.default.createElement(E.default,{width:960,title:t("EDIT_ROUTING_RULES"),icon:"firewall",onOk:this.handleOk,okText:t("OK"),cancelText:(0,h.default)(c)?null:t("PREVIOUS"),onCancel:this.handleCancel,visible:a,isSubmitting:n},i.default.createElement("div",{className:b.default.wrapper},i.default.createElement(y.default,{module:"ingresses",formRef:this.formRef,formTemplate:s,cluster:r,isFederated:l,projectDetail:o})))}}]),r}(i.default.Component);_.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},_.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1},_.childContextTypes={registerSubRoute:f.default.func,resetSubRoute:f.default.func};var S=_;a.default=S},function(e,t,a){e.exports={wrapper:"_2SvyqGEvoXG9IXqxRtZsU7"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(56)),u=n(r(16)),c=n(r(73)),s=r(25),i=n(r(274)),f=n(r(766)),d=n(r(2362)),p=r(58),m=n(r(733)),h=n(r(822)),v=n(r(2371));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={"secret.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,c=e.module,d=e.isFederated,E=e.success,b=(0,o.default)(e,["store","cluster","namespace","module","isFederated","success"]),g=p.MODULE_KIND_MAP[c],_=(0,l.default)({},g,m.default[c]({namespace:n}));d&&Object.keys(_).forEach((function(e){_[e]=m.default.federated({data:_[e],clusters:b.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var S=i.default.open(y({onOk:function(e){var l=(0,u.default)(e,g);l&&a.create(l,{cluster:r,namespace:n||(0,u.default)(l,"metadata.namespace")}).then((function(){i.default.close(S),s.Notify.success({content:t("CREATE_SUCCESSFUL")}),E&&E(l),h.default.delete("".concat(c,"_create_form"))}))},module:c,cluster:r,namespace:n,name:g,isFederated:d,formTemplate:_,steps:v.default,modal:f.default,store:a},b))}},"secret.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=i.default.open(y({onOk:function(e){(0,c.default)(e,"metadata.resourceVersion",r.resourceVersion),l.isFederated&&((0,c.default)(e,"apiVersion",a.version),(0,c.default)(e,"kind",a.secretKind)),a.update(r,e).then((function(){i.default.close(u),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:d.default,disableSelect:!0},l))}}};a.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(1)),p=r(5),m=n(r(32)),h=n(r(274)),v=n(r(799)),E=n(r(1343)),y=n(r(2370));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=_(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleSubFormSave=function(){var e=t.state.subRoute;e&&e.onSave&&e.onSave((function(){t.setState({subRoute:{}})}))},t.handleSubFormCancel=function(){var e=t.state.subRoute;e&&e.onCancel&&(e.onCancel(),t.setState({subRoute:{}}))},t.handleOk=function(){(0,t.props.onOk)(t.state.formTemplate)},t.state={formTemplate:t.getFormTemplate(e.detail),subRoute:{}},t}return(0,u.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}}]),(0,u.default)(r,[{key:"getFormTemplate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,p.toJS)(e._originData);return g({},t)}},{key:"renderSaveBar",value:function(){var e=this.state.subRoute;return(0,m.default)(e)?null:f.default.createElement(v.default,{className:y.default.confirm,onOk:this.handleSubFormSave,onCancel:this.handleSubFormCancel})}},{key:"render",value:function(){var e=this.state,a=e.subRoute,r=e.formTemplate,n=this.props,l=n.visible,o=n.isSubmitting,u=n.onCancel,c=n.isFederated,s=n.disableSelect,i=n.detail;return f.default.createElement(h.default,{width:960,title:t("EDIT_SETTINGS"),icon:"pen",bodyClassName:y.default.body,onOk:this.handleOk,okText:t("OK"),onCancel:u,visible:l,disableSubmit:!(0,m.default)(a),isSubmitting:o},f.default.createElement(E.default,{formTemplate:r,isFederated:c,cluster:i.cluster,mode:"edit",disableSelect:s}),this.renderSaveBar())}}]),r}(f.default.Component);a.default=S,S.propTypes={detail:d.default.object,visible:d.default.bool,onOk:d.default.func,onCancel:d.default.func,isSubmitting:d.default.bool,disableSelect:d.default.bool},S.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1,disableSelect:!1},S.childContextTypes={registerSubRoute:d.default.func,resetSubRoute:d.default.func}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(136)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(190)),p=n(r(652)),m=r(292),h=n(r(2364));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleDelete=function(t){return function(){var a=e.props,r=a.value;(0,a.onChange)((0,d.default)(r,t))}},e.handleEdit=function(t){return function(){(0,e.props.onEdit)(t)}},e}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this,a=this.props,r=a.value,n=a.onAdd;return f.default.createElement(p.default,null,Object.entries(r).map((function(t){var a=(0,l.default)(t,2),r=a[0],n=a[1];return f.default.createElement(p.default.Item,{key:r,icon:"key",title:r,description:(0,m.safeAtob)(n)||"-",onDelete:e.handleDelete(r),onEdit:e.handleEdit(r)})})),f.default.createElement(p.default.Add,{title:t("ADD_DATA_TCAP"),description:t("ADD_DATA_DESC"),onClick:n}))}},{key:"render",value:function(){return f.default.createElement("div",{className:h.default.wrapper},this.renderContent())}}]),r}(f.default.Component);a.default=E,E.defaultProps={value:{}}},function(e,t,a){e.exports={wrapper:"-jwoKUpfEA_iKuklHFsVt"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(879)),p=n(r(1)),m=r(25),h=r(801),v=r(292),E=n(r(2366));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).formRef=f.default.createRef(),e.state={formData:e.getFormData()},e.registerForm=function(){var t=e.context.registerSubRoute,a=e.props.onCancel;t&&t(e.handleSubmit,a)},e.handleGoBack=function(){var t=e.context.resetSubRoute;t&&t(),e.props.onCancel()},e.handleSubmit=function(t){var a=e.props.onOk,r=e.formRef&&e.formRef.current;r&&r.validate((function(){var e=r.getData(),n=e.key,o=e.value;a((0,l.default)({},(0,d.default)(n),window.btoa(o))),t&&t()}))},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.registerForm()}},{key:"getFormData",value:function(){var e=this.props,t=e.detail,a=e.selectKey;return{key:a||"",value:(0,v.safeAtob)(t[a]||"")}}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.selectKey;return f.default.createElement("div",{className:E.default.wrapper},f.default.createElement("div",{className:"h6"},f.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},f.default.createElement(h.ReactComponent,null)),a[r]?t("EDIT_DATA_TCAP"):t("ADD_DATA_TCAP")),f.default.createElement("div",{className:E.default.formWrapper},f.default.createElement(m.Form,{data:this.state.formData,ref:this.formRef},f.default.createElement(m.Form.Item,{label:t("DATA_KEY")},f.default.createElement(m.Input,{name:"key"})),f.default.createElement(m.Form.Item,{label:t("DATA_VALUE")},f.default.createElement(m.TextArea,{name:"value",rows:4,autoResize:!0})))))}}]),r}(f.default.Component);a.default=b,b.defaultProps={detail:{},selectKey:""},b.contextTypes={registerSubRoute:p.default.func,resetSubRoute:p.default.func}},function(e,t,a){e.exports={wrapper:"_1UlfrF0XQcQAvMsWWcTR1w",formWrapper:"_1Nq08DNhRDjFIGATy_iM_m",confirm:"_1BpCYDDpzOGUjDrFZPDMRN"}},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),o=n(a(13)),u=n(a(19)),c=n(a(20)),s=n(a(18)),i=n(a(16)),f=r(a(0)),d=a(292);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){var a=(0,i.default)(t,"target.value",t);return(0,e.props.onChange)((0,d.safeBtoa)(a))},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.children,r=e.value;return f.default.cloneElement(a,{name:t,value:(0,d.safeAtob)(r||""),onChange:this.handleChange})}}]),a}(f.Component);t.default=m},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u=n(r(49)),c=n(r(50)),s=n(r(21)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(16)),v=n(r(650)),E=n(r(73)),y=n(r(291)),b=l(r(0)),g=r(70),_=r(5),S=r(25),O=n(r(1303)),C=r(37),T=r(292),R=n(r(773)),D=n(r(637)),k=n(r(2369)),N=n(r(1344));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var M=(0,g.observer)(o=function(e){(0,d.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).getStateFromProps=function(e){var t=(0,C.safeParseJSON)(e),a=Object.keys((0,h.default)(t,"auths",{}))[0]||"";return{url:a,username:(0,h.default)(t,'auths["'.concat(a,'"].username'),""),password:(0,h.default)(t,'auths["'.concat(a,'"].password'),""),email:(0,h.default)(t,'auths["'.concat(a,'"].email'),"")}},e.store=new R.default,e.hostStore=new D.default,e.state=I(I({},e.getStateFromProps(e.props.value)),{},{isValidating:!1}),e.triggerChange=(0,v.default)((function(){var t=e.props.onChange,a=e.state,r=a.url,n=a.username,l=a.password,o=a.email;e.setState({errorMsg:""}),r&&n&&l&&(e.handleAnnotationsByUrl(r),t(JSON.stringify({auths:(0,s.default)({},r,{username:n,password:l,email:o,auth:(0,T.safeBtoa)("".concat(n,":").concat(l))})})))}),200),e.handleAnnotationsByUrl=function(t){if("http"===t.replace(/^(http(s)?:\/\/)?(.*)$/,"$1").replace("://","")){var a=(0,h.default)(e.props.fedFormTemplate,"metadata.annotations",{});(0,E.default)(e.props.fedFormTemplate,"metadata.annotations",I(I({},a),{},{"secret.kubesphere.io/force-insecure":"true"}))}else{var r=(0,h.default)(e.props.fedFormTemplate,"metadata.annotations",{});(0,y.default)(r,"secret.kubesphere.io/force-insecure")&&delete r["secret.kubesphere.io/force-insecure"],(0,E.default)(e.props.fedFormTemplate,"metadata.annotations",I({},r))}},e.getHostName=(0,c.default)(u.default.mark((function t(){var a,r,n,l,o=arguments;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,e.hostStore.fetchList(I(I({},n),{},{labelSelector:"cluster-role.kubesphere.io/host=",limit:-1}));case 3:return l=(0,_.toJS)(e.hostStore.list.data).filter((function(e){return Object.keys(e.labels).some((function(e){return e.endsWith("cluster-role.kubesphere.io/host")}))})),t.abrupt("return",null!==(a=null===(r=l[0])||void 0===r?void 0:r.name)&&void 0!==a?a:"host");case 5:case"end":return t.stop()}}),t)}))),e.handleValidate=(0,c.default)(u.default.mark((function t(){var a,r,n,l,o,c;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.cluster,n=a.isFederated,l=a.namespace,o=a.screatName,!e.validate()){t.next=23;break}if(e.setState({isValidating:!0}),t.t1=e.store,t.t2=e.props.fedFormTemplate,t.t3=o,t.t4=l,!n){t.next=13;break}return t.next=10,e.getHostName();case 10:t.t5=t.sent,t.next=14;break;case 13:t.t5=r;case 14:return t.t6=t.t5,t.t7={fedFormTemplate:t.t2,name:t.t3,namespace:t.t4,cluster:t.t6},t.next=18,t.t1.validateImageRegistrySecret.call(t.t1,t.t7);case 18:if(t.t0=t.sent,t.t0){t.next=21;break}t.t0={};case 21:c=t.t0,e.setState({validate:c.validate||!1,reason:c.reason||"",isValidating:!1});case 23:case"end":return t.stop()}}),t)}))),e.handleUrlChange=function(t){e.setState({url:t},e.triggerChange)},e.handleUserNameChange=function(t){e.setState({username:t.target.value},e.triggerChange)},e.handleEmailChange=function(t){e.setState({email:t.target.value},e.triggerChange)},e.handlePasswordChange=function(t){e.setState({password:t.target.value},e.triggerChange)},e}return(0,f.default)(r,[{key:"validate",value:function(){return!!(this.state.url&&this.state.username&&this.state.password)||(this.setState({errorMsg:t("IMAGE_REGISTRY_REQUIRED_DESC")}),!1)}},{key:"renderTip",value:function(){var e=this.state,a=e.errorMsg,r=e.validate,n=e.reason;return a?b.default.createElement(S.Alert,{className:"margin-t12",type:"error",message:a}):r?b.default.createElement(S.Alert,{type:"info",icon:"success",message:t("REGISTRY_SECRET_VER_SUC")}):n?b.default.createElement(S.Alert,{type:"error",title:t("REGISTRY_SECRET_VER_ERR"),message:n}):b.default.createElement(S.Alert,{type:"info",message:t("IMAGE_REGISTRY_VALIDATE_TIP")})}},{key:"render",value:function(){var e=this.state,a=e.url,r=e.username,n=e.password,l=e.email,o=e.isValidating;return b.default.createElement("div",null,b.default.createElement("input",{name:"username",className:"hidden-input",type:"text",disabled:!0}),b.default.createElement("input",{name:"password",className:"hidden-input",type:"password",disabled:!0}),b.default.createElement(S.Columns,null,b.default.createElement(S.Column,null,b.default.createElement(k.default,{label:t("REGISTRY_ADDRESS_TCAP"),desc:t("REGISTRY_ADDRESS_TIP"),required:!0},b.default.createElement(O.default,{value:a,onChange:this.handleUrlChange}))),b.default.createElement(S.Column,null,b.default.createElement(k.default,{label:t("USERNAME"),required:!0},b.default.createElement(S.Input,{value:r,onChange:this.handleUserNameChange,autoComplete:"nope"})))),b.default.createElement(S.Columns,null,b.default.createElement(S.Column,null,b.default.createElement(k.default,{label:t("EMAIL")},b.default.createElement(S.Input,{value:l,onChange:this.handleEmailChange}))),b.default.createElement(S.Column,null,b.default.createElement(k.default,{label:t("PASSWORD"),required:!0},b.default.createElement("div",{className:N.default.password},b.default.createElement(S.InputPassword,{type:"password",value:n,onChange:this.handlePasswordChange,autoComplete:"new-password"}),b.default.createElement(S.Button,{onClick:this.handleValidate,loading:o},t("VALIDATE")))))),b.default.createElement("div",{className:N.default.tip},this.renderTip()))}}]),r}(b.Component))||o;a.default=M},function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(12)),o=n(a(13)),u=n(a(19)),c=n(a(20)),s=n(a(18)),i=r(a(0)),f=n(a(1344));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=function(e){(0,u.default)(a,e);var t=d(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.desc,r=e.required,n=e.children;return i.default.createElement("div",{className:f.default.wrapper},t&&i.default.createElement("label",{className:f.default.label,htmlFor:name},t,r?i.default.createElement("span",{className:f.default.requiredIcon},"*"):null),i.default.createElement("div",{className:f.default.control},n,a&&i.default.createElement("div",{className:f.default.desc},a)))}}]),a}(i.Component);t.default=p},function(e,t,a){e.exports={body:"ok_C6WKg4I2-lgwUuNM-G",confirm:"_3kOQ-5ctupyU0pPCq4MU3E"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(37),l=r(a(852)),o=r(a(1343)),u=[{title:"BASIC_INFORMATION",component:(0,n.withProps)(l.default,{maxNameLength:63}),required:!0},{title:"DATA_SETTINGS",component:o.default,required:!0}];t.default=u},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(16)),i=n(r(32)),f=n(r(73)),d=r(5),p=r(25),m=n(r(274)),h=n(r(766)),v=n(r(2373)),E=n(r(2375)),y=n(r(2378)),b=n(r(1247)),g=n(r(2382)),_=r(58),S=r(2384),O=n(r(822)),C=n(r(733)),T=n(r(1070)),R=n(r(998));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={"service.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,o=e.success,u=(0,c.default)(e,["store","cluster","namespace","module","success"]),s=_.MODULE_KIND_MAP[l],i=m.default.open(k({onOk:function(e){var u=e;u&&(s&&1===Object.keys(e).length&&e[s]&&(u=e[s]),a.create(u,{cluster:r,namespace:n}).then((function(){m.default.close(i),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),o&&o(),O.default.delete("".concat(l,"_create_form"))})))},cluster:r,namespace:n,modal:v.default,store:a},u))}},"service.simple.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,o=e.success,i=(0,c.default)(e,["store","cluster","namespace","module","success"]),f=_.MODULE_KIND_MAP[l],d=(0,u.default)({},f,C.default[l]({namespace:n})),v=m.default.open(k({onOk:function(e){var u=(0,s.default)(e,f);u&&a.create(u,{cluster:r,namespace:n||(0,s.default)(u,"metadata.namespace")}).then((function(){m.default.close(v),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),o&&o(),O.default.delete("".concat(l,"_create_form"))}))},module:l,cluster:r,namespace:n,name:f,formTemplate:d,steps:T.default.simpleservice,modal:h.default,store:a},i))}},"service.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=m.default.open(k({onOk:function(e){a.update(r,e).then((function(){m.default.close(o),p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},modal:E.default,detail:r,type:r.type,cluster:r.cluster,store:a},l))}},"service.gateway.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=m.default.open(k({onOk:function(e){a.update(r,e).then((function(){m.default.close(o),p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},modal:y.default,detail:r,store:a},l))}},"fedservice.gateway.edit":{on:function(e){var a=e.store,r=e.cluster,n=e.detail,l=e.resources,o=e.success,u=(0,c.default)(e,["store","cluster","detail","resources","success"]),i=m.default.open(k({onOk:function(e){var l=n.name,u=n.namespace,c=n.template,s=n.overrides,d={},h=s.find((function(e){return e.clusterName===r}));h||(h={clusterName:r,clusterOverrides:[]},s.push(h));h.clusterOverrides=(0,S.getOverrides)(c,e,["metadata.annotations","spec.type","spec.ports"]),(0,f.default)(d,"spec.overrides",s),a.patch({name:l,namespace:u},d).then((function(){m.default.close(i),p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),o&&o()}))},modal:y.default,detail:(0,s.default)(l,"".concat(r)),store:a},u))}},"service.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=m.default.open(k({onOk:function(){m.default.close(o),p.Notify.success({content:t("DELETE_SUCCESSFUL")}),n&&n()},store:a,modal:g.default,resource:r},l))}},"service.batch.delete":{on:function(e){var a=e.store,r=e.success,n=e.rowKey,l=void 0===n?"name":n,o=(0,c.default)(e,["store","success","rowKey"]),u=(0,d.toJS)(a.list),s=u.data,f=u.selectedRowKeys,h=s.filter((function(e){return f.includes(e[l])}));if(!(0,i.default)(h))var v=m.default.open(k({onOk:function(){m.default.close(v),p.Notify.success({content:t("DELETE_SUCCESSFUL")}),r&&r()},modal:g.default,resource:h,store:a},o))}},"service.monitor.edit":{on:function(e){e.store;var t,a=e.cluster,r=e.namespace,n=e.success,u=e.detail,d=(0,c.default)(e,["store","cluster","namespace","success","detail"]),p=new R.default,h=C.default.servicemonitors({name:u.name,namespace:r}),v=m.default.open(k({onOk:(t=(0,o.default)(l.default.mark((function e(t){var o,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,s.default)(t,"metadata.name"),e.next=3,p.checkName({name:o,cluster:a,namespace:r});case 3:if(c=e.sent,(0,f.default)(t,"metadata.ownerReferences",[{apiVersion:"v1",kind:"Service",name:u.name,uid:u.uid}]),c.exist){e.next=10;break}return e.next=8,p.create(t,{cluster:a,namespace:r});case 8:e.next=17;break;case 10:if(!(0,i.default)((0,s.default)(t,"spec.endpoints"))){e.next=15;break}return e.next=13,p.delete({name:o,cluster:a,namespace:r});case 13:e.next=17;break;case 15:return e.next=17,p.update({name:o,cluster:a,namespace:r},t);case 17:m.default.close(v),n&&n();case 19:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),cluster:a,namespace:r,formTemplate:h,detail:u,store:p,modal:b.default},d))}}};a.default=N},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),o=n(r(49)),u=n(r(50)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(25),h=n(r(73)),v=n(r(274)),E=n(r(766)),y=n(r(1065)),b=n(r(823)),g=n(r(736)),_=n(r(737)),S=n(r(1070)),O=r(37),C=n(r(733)),T=r(912),R=r(58),D=n(r(2374));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=function(e){(0,i.default)(r,e);var a=k(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchData=(0,u.default)(o.default.mark((function e(){var a,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.cluster,e.next=3,t.s2iStore.getS2iSupportLanguage({cluster:a});case 3:r=e.sent,n=t.state.groups.map((function(e){return"b2i"===e.type&&(e.options=r.b2i),"s2i"===e.type&&(e.options=r.s2i),e})),t.setState({groups:n});case 6:case"end":return e.stop()}}),e)}))),t.handleTypeSelect=function(e){t.setState({type:e.currentTarget.dataset.value,s2iType:e.currentTarget.dataset.type})},t.handleWorkloadModuleChange=function(e){t.setState({workloadModule:e})},t.s2iStore=new b.default,t.workloadStore=new g.default,t.showDevOps=globals.app.hasClusterModule(e.cluster,"devops")&&!t.props.isFederated,t.state={type:"",workloadModule:"deployments",groups:[{name:"SELECT_SERVICE_TYPE",description:"SELECT_SERVICE_TYPE_DESC",options:[{icon:"backup",name:"STATELESS_SERVICE",value:"statelessservice"},{icon:"stateful-set",name:"STATEFUL_SERVICE",value:"statefulservice"}].concat((0,l.default)(t.props.isFederated?[]:[{icon:"ip",name:"EXTERNAL_SERVICE",value:"externalservice"}]))}].concat((0,l.default)(t.showDevOps?[{name:"SERVICE_FROM_CODE",type:"s2i",description:"SERVICE_FROM_CODE_DESC",options:R.S2I_SUPPORTED_TYPES},{name:"SERVICE_FROM_ARTIFACT",type:"b2i",description:"SERVICE_FROM_ARTIFACT_DESC",options:R.B2I_SUPPORTED_TYPES}]:[]),(0,l.default)(t.props.isFederated?[]:[{name:"CUSTOMIZE_SERVICE",description:"CUSTOMIZE_SERVICE_DESC",options:[{icon:"clock",name:"SPECIFY_WORKLOAD",value:"simpleservice"},{icon:"coding",name:"EDIT_YAML",value:"yaml"}]}]))},t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.showDevOps&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.visible;this.props.visible||t===e.visible||this.setState({type:"",workloadModule:"deployments"})}},{key:"renderHeader",value:function(){return p.default.createElement("div",{className:D.default.header},p.default.createElement("div",{className:"h4 margin-b12"},t("CREATE_SERVICE")),p.default.createElement("p",null,t("CREATE_SERVICE_DESC")),p.default.createElement("img",{src:"/assets/create-service.svg",alt:""}))}},{key:"renderGroups",value:function(){var e=this;return p.default.createElement("div",{className:D.default.groups},this.state.groups.map((function(a){return p.default.createElement("div",{key:a.name,className:D.default.group},p.default.createElement("div",{className:D.default.title},p.default.createElement("div",null,t(a.name)),p.default.createElement("p",null,t(a.description))),p.default.createElement("ul",null,a.options&&a.options.map((function(r){return p.default.createElement("li",{key:r.value||r,"data-value":r.value||r,"data-type":a.type,onClick:e.handleTypeSelect},p.default.createElement("div",null,p.default.createElement(m.Icon,{name:r.icon||(0,T.getLanguageIcon)(r,"radio"),size:48})),p.default.createElement("div",null,t(r.name||r.toUpperCase())))}))))})))}},{key:"renderSubModal",value:function(e,a){var r,n=this.props,o=n.store,u=n.visible,c=n.onOk,s=n.onCancel,i=n.cluster,f=n.namespace,d=n.isFederated,m=n.projectDetail,v=n.isSubmitting;if(a){var b="s2i"===a,g={S2i:C.default.s2ibuilders({namespace:f,isS2i:b,languageType:e}),Deployment:C.default.deployments({namespace:f}),Service:C.default.services({namespace:f})},T=b?S.default.s2iservice:S.default.b2iservice,R=b?t("LANGUAGE_TYPE_VALUE",{value:t(e.toUpperCase())}):t("ARTIFACT_TYPE_VALUE",{value:t(e.toUpperCase())});return this.workloadStore.setModule("deployments"),p.default.createElement(E.default,{icon:e,title:b?t("SERVICE_FROM_CODE"):t("SERVICE_FROM_ARTIFACT"),description:R,width:960,module:this.state.workloadModule,store:this.workloadStore,name:t("STATELESS_SERVICE"),visible:u,steps:T,cluster:i,namespace:f,formTemplate:g,isSubmitting:v,updateModule:this.handleWorkloadModuleChange,onOk:c,onCancel:s,noCodeEdit:!0})}switch(e){case"statelessservice":var D={Deployment:C.default.deployments({namespace:f}),Service:C.default.services({namespace:f})};d&&Object.keys(D).forEach((function(e){D[e]=C.default.federated({data:D[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})})),(0,h.default)(D,'Service.metadata.annotations["kubesphere.io/serviceType"]',e),this.workloadStore.setModule("deployments");var k=this.workloadStore,N=(0,l.default)(S.default[e]);d&&(N.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:(0,O.withProps)(y.default,{withService:!0})}),k=new _.default(this.workloadStore)),r=p.default.createElement(E.default,{width:960,module:"deployments",store:k,name:t("STATELESS_SERVICE"),visible:u,cluster:i,namespace:f,isFederated:d,projectDetail:m,steps:N,formTemplate:D,isSubmitting:v,onOk:c,onCancel:s});break;case"statefulservice":var P={StatefulSet:C.default.statefulsets({namespace:f}),Service:C.default.services({namespace:f})};d&&Object.keys(P).forEach((function(e){P[e]=C.default.federated({data:P[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})})),(0,h.default)(P,'Service.metadata.annotations["kubesphere.io/serviceType"]',e),this.workloadStore.setModule("statefulsets");var I=this.workloadStore,w=(0,l.default)(S.default[e]);d&&(w.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:(0,O.withProps)(y.default,{withService:!0})}),I=new _.default(this.workloadStore)),r=p.default.createElement(E.default,{width:960,module:"statefulsets",store:I,name:t("STATEFUL_SERVICE"),visible:u,cluster:i,namespace:f,isFederated:d,projectDetail:m,steps:w,formTemplate:P,isSubmitting:v,onOk:c,onCancel:s});break;case"simpleservice":case"externalservice":var M={Service:C.default.services({namespace:f})};d&&Object.keys(M).forEach((function(e){M[e]=C.default.federated({data:M[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})}));var A="externalservice"===e?t("CREATE_EXTERNAL_SERVICE"):t("SPECIFY_WORKLOAD_TO_CREATE_SERVICE"),j="externalservice"===e?t("CREATE_EXTERNAL_SERVICE_DESC"):t("SPECIFY_WORKLOAD_DESC");"externalservice"===e&&(0,h.default)(M,'Service.metadata.annotations["kubesphere.io/serviceType"]',e),r=p.default.createElement(E.default,{width:960,module:"services",store:o,title:A,description:j,visible:u,cluster:i,namespace:f,isFederated:d,projectDetail:m,steps:S.default[e],formTemplate:M,isSubmitting:v,onOk:c,onCancel:s});break;case"yaml":var x={Service:C.default.services({namespace:f})};d&&Object.keys(x).forEach((function(e){x[e]=C.default.federated({data:x[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})}));var L=t("EDIT_YAML_TO_CREATE_SERVICE");r=p.default.createElement(E.default,{width:960,module:"services",store:o,title:L,visible:u,cluster:i,namespace:f,isFederated:d,projectDetail:m,formTemplate:x,isSubmitting:v,onOk:c,onCancel:s,onlyCode:!0})}return r}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=this.state,n=r.type,l=r.s2iType;return n?this.renderSubModal(n,l):p.default.createElement(v.default,{bodyClassName:D.default.body,width:960,visible:t,onCancel:a,hideHeader:!0},this.renderHeader(),this.renderGroups())}}]),r}(p.default.Component);a.default=N},function(e,t,a){e.exports={body:"cbNCVjWQhnReqPddm4gee",header:"_3z9Nw7EpOrYUdcFPCf6UQQ",groups:"_2jTLPN_SuLOVUctqK30Adg",group:"Hbk366BfbfqDSt72frwoc",title:"_1k3IuI_W90TycEVQwt3NcK"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(5),p=n(r(274)),m=n(r(1076)),h=r(58),v=n(r(2376)),E=n(r(2377));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=y(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.props,a=e.onOk,r=e.store,n=e.detail,l=t.formRef.current,o=r.list,u=(0,d.toJS)(o.selectedRowKeys).filter((function(e){return e!==n.uid}));l&&l.validate((function(){a(l.getData()),o.setSelectRowKeys(u)}))},t.handleCancel=function(){(0,t.props.onCancel)()},t.formRef=i.default.createRef(),t.state={formTemplate:(0,d.toJS)(e.detail._originData)},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.detail;t._originData!==e.detail._originData&&this.setState({formTemplate:(0,d.toJS)(t._originData)})}},{key:"renderServiceSettings",value:function(){var e=this.props,t=e.cluster,a=e.type;return i.default.createElement(v.default,{formRef:this.formRef,formTemplate:this.state.formTemplate,onCancel:this.resetState,cluster:t,type:h.SERVICE_TYPES_VALUE[a]})}},{key:"renderExternalName",value:function(){return i.default.createElement(m.default,{formRef:this.formRef,formTemplate:this.state.formTemplate,onCancel:this.resetState})}},{key:"renderEmpty",value:function(){return i.default.createElement("p",{className:E.default.empty},t("UNKNOWN_SERVICE_TYPE"))}},{key:"renderForm",value:function(){var e=null;switch(this.props.type){case h.SERVICE_TYPES.VirtualIP:case h.SERVICE_TYPES.Headless:e=this.renderServiceSettings();break;case h.SERVICE_TYPES.ExternalName:e=this.renderExternalName();break;default:e=this.renderEmpty()}return e}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.type;return i.default.createElement(p.default,{width:1162,title:t("EDIT_SERVICE"),onOk:n!==h.SERVICE_TYPES.Unknown?this.handleOk:null,onCancel:this.handleCancel,visible:a,isSubmitting:r},this.renderForm())}}]),r}(i.default.Component);a.default=b,b.propTypes={visible:f.default.bool,type:f.default.string,detail:f.default.object,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},b.defaultProps={visible:!1,type:"",detail:{},onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1077)),d=r(25),p=n(r(636));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderTypeSelect",value:function(){return i.default.createElement(d.Form.Item,{label:t("INTERNAL_ACCESS_MODE")},i.default.createElement(p.default,{className:"margin-b12",value:this.props.type,onChange:this.handleTypeChange,options:this.types,disabled:!0}))}}]),r}(f.default);a.default=h},function(e,t,a){e.exports={empty:"_1iYB_RtQyygADkaCOPvMXp"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(16)),f=n(r(73)),d=n(r(738)),p=n(r(110)),m=n(r(190)),h=n(r(185)),v=n(r(0)),E=n(r(1)),y=r(5),b=r(25),g=n(r(274)),_=n(r(786)),S=n(r(2379)),O=n(r(2381));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var T=function(e){(0,u.default)(r,e);var a=C(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleTypeChange=function(e){var a=t.props.detail;if("LoadBalancer"===e){var r=(0,i.default)((0,y.toJS)(a._originData),"metadata.annotations",{});r=(0,p.default)(globals.config.loadBalancerDefaultAnnotations,r),(0,f.default)(t.state.formTemplate,"metadata.annotations",r)}else if(Object.keys(globals.config.loadBalancerDefaultAnnotations).forEach((function(e){(0,d.default)(t.state.formTemplate,'metadata.annotations["'.concat(e,'"]'))})),"ClusterIP"===e){var n=(0,i.default)(t.state.formTemplate,"spec.ports",[]).map((function(e){return(0,m.default)(e,["nodePort"])}));(0,f.default)(t.state.formTemplate,"spec.ports",n)}t.setState({type:e})},t.optionRenderer=function(e){return v.default.createElement("div",{className:O.default.option},v.default.createElement("div",null,e.label),v.default.createElement("p",null,e.desc))},t.handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,y.toJS)(o.selectedRowKeys).filter((function(e){return e!==l.uid}));r(e),o.setSelectRowKeys(u)},t.state={type:(0,i.default)((0,y.toJS)(e.detail._originData),"spec.type"),formTemplate:(0,h.default)((0,y.toJS)(e.detail._originData))},t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=this.state,o=l.type,u=l.formTemplate;return v.default.createElement(g.default.Form,{width:1162,title:t("EDIT_EXTERNAL_ACCESS"),data:u,onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},v.default.createElement("div",null,v.default.createElement(S.default,{title:t("EXTERNAL_ACCESS"),desc:t("SERVICE_EXTERNAL_ACCESS_DESC")}),v.default.createElement("div",{className:O.default.wrapper},v.default.createElement("div",{className:O.default.contentWrapper},v.default.createElement(b.Form.Item,{label:t("ACCESS_MODE"),className:O.default.types},v.default.createElement(b.Select,{name:"spec.type",options:this.accessModes,onChange:this.handleTypeChange,optionRenderer:this.optionRenderer})),"LoadBalancer"===o&&v.default.createElement(b.Form.Item,{label:t("ANNOTATION_PL")},v.default.createElement(_.default,{name:"metadata.annotations",hiddenKeys:globals.config.preservedAnnotations,addText:t("ADD")}))))))}},{key:"accessModes",get:function(){return[{label:t("NONE"),desc:t("ACCESS_NONE_TIP"),value:"ClusterIP"},{label:"NodePort",desc:t("ACCESS_NODEPORT_TIP"),value:"NodePort"},{label:"LoadBalancer",desc:t("ACCESS_LOADBALANCER_TIP"),value:"LoadBalancer"}]}}]),r}(v.default.Component);a.default=T,T.propTypes={visible:E.default.bool,detail:E.default.object,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},T.defaultProps={visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),l=r(a(3)),o=r(a(2380)),u=function(e){var t=e.title,a=e.desc,r=e.className;return n.default.createElement("div",{className:(0,l.default)(o.default.title,r)},n.default.createElement("div",{className:"h4"},t),n.default.createElement("p",null,a))};t.default=u},function(e,t,a){e.exports={title:"QATgUSsoGzs-HirGBPJ_o"}},function(e,t,a){e.exports={wrapper:"_3TA3Qz6ifk73ngG3XZqG3_",title:"_2xJakYguvxIfuNLPwECuxz",contentWrapper:"AdN2olZI0P9-CfZJC-oJd",option:"_36a3_8ve0treEjf7MSk9_V"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(21)),c=n(r(109)),s=n(r(49)),i=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(0)),E=n(r(1)),y=n(r(3)),b=n(r(16)),g=n(r(297)),_=n(r(23)),S=n(r(32)),O=n(r(782)),C=r(25),T=r(37),R=r(58),D=n(r(274)),k=n(r(751)),N=n(r(736)),P=n(r(763)),I=n(r(737)),w=n(r(823)),M=n(r(2383));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var j=["deployments","daemonsets","statefulsets"],x=function(e){(0,p.default)(n,e);var a,r=A(n);function n(e){var t;return(0,f.default)(this,n),(t=r.call(this,e)).stopPropagation=function(e){return e.stopPropagation()},t.handleOk=(0,i.default)(s.default.mark((function e(){var a,r,n,l,o,u,c,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,r=a.onOk,n=a.store,l=a.resource,o=t.state,u=o.selectedRelatedResourceIds,c=o.relatedResources,i=[],c.forEach((function(e){u.includes(e.uid)&&("persistentvolumeclaims"===e.module?i.push(t.volumeStore.delete(e)):j.includes(e.module)?(t.workloadStore.setModule(e.module),i.push(t.workloadStore.delete(e))):"s2ibuilders"!==e.module&&"s2i"!==e.type||i.push(t.builderStore.delete(e)))})),!(0,_.default)(l)){e.next=10;break}return e.next=7,Promise.all(l.map((function(e){return n.delete(e)})));case 7:n.list.setSelectRowKeys([]),e.next=12;break;case 10:return e.next=12,n.delete(l);case 12:return e.next=14,Promise.all(i);case 14:r();case 15:case"end":return e.stop()}}),e)}))),t.handleItemClick=function(e){var a=e.currentTarget.dataset.id;t.setState((function(e){var t=e.selectedRelatedResourceIds;return{selectedRelatedResourceIds:t.includes(a)?t.filter((function(e){return e!==a})):[].concat((0,c.default)(t),[a])}}))},t.state={relatedResources:[],selectedRelatedResourceIds:[],enableConfirm:!1,timer:3},t.workloadStore=new N.default,t.volumeStore=new P.default,t.builderStore=new w.default,e.isFederated&&(t.workloadStore=new I.default({module:"deployments"}),t.volumeStore=new I.default({module:t.volumeStore.module})),t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.visible&&(this.fetchRelatedResources(this.props.resource),this.startTimer())}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"startTimer",value:function(){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.setState((function(e){var t=e.timer;return{timer:Math.max(t-1,0),enableConfirm:t<=1}}),(function(){e.state.enableConfirm&&e.timer&&clearInterval(e.timer)}))}),1e3)}},{key:"fetchRelatedResources",value:(a=(0,i.default)(s.default.mark((function e(t){var a,r,n,l,o,u,i,f=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),a=[],(0,_.default)(t)?(a=t.map((function(e){return e.selector||(0,b.default)(e,"resource.selector")})),r=t[0].namespace,n=t[0].cluster):(a.push(t.selector||(0,b.default)(t,"resource.selector")),r=t.namespace,n=t.cluster),l=[],o=this.props.isFederated?["deployments","statefulsets"]:j,a.forEach((function(e){if(!(0,S.default)(e)){var t=(0,T.joinSelector)(e);l.push.apply(l,[f.volumeStore.fetchListByK8s({cluster:n,namespace:r,labelSelector:t})].concat((0,c.default)(o.map((function(e){return f.workloadStore.fetchListByK8s({cluster:n,namespace:r,labelSelector:t,module:e})}))))),e.s2ibuilder&&l.push(f.builderStore.fetchDetail({cluster:n,namespace:r,name:e.s2ibuilder,module:"s2ibuilders"}).then((function(e){return[e]})))}})),e.next=8,Promise.all(l);case 8:u=e.sent,i=(0,O.default)((0,g.default)(u),"uid").filter((function(e){return!(0,S.default)(e.name)})),this.setState({relatedResources:i,isLoading:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"renderContent",value:function(){var e=this,a=this.state,r=a.isLoading,n=a.relatedResources,l=a.selectedRelatedResourceIds;return!1===r&&(0,S.default)(n)?v.default.createElement(k.default,{icon:"appcenter",className:M.default.empty,title:t("NO_RELATED_RESOURCE_FOUND"),desc:t("NO_SERVICE_RELATED_RESOURCE_DESC")}):v.default.createElement("div",{className:M.default.resources},n.map((function(a){return v.default.createElement("div",{key:a.uid,"data-id":a.uid,className:(0,y.default)(M.default.resource,(0,u.default)({},M.default.selected,l.includes(a.uid))),onClick:e.handleItemClick},v.default.createElement(C.Checkbox,{checked:l.includes(a.uid),onClick:e.stopPropagation}),v.default.createElement(C.Icon,{name:R.ICON_TYPES[a.module],size:20,type:l.includes(a.uid)?"light":"dark"}),v.default.createElement("span",{className:M.default.resourceName},(0,T.getDisplayName)(a)),v.default.createElement("span",{className:M.default.resourceType},t(R.MODULE_KIND_MAP[a.module])))})))}},{key:"render",value:function(){var e=this.state,a=e.enableConfirm,r=e.timer,n=this.props,u=n.resource,c=(n.onOk,n.onCancel),s=n.isSubmitting,i=(0,o.default)(n,["resource","onOk","onCancel","isSubmitting"]),f=(0,_.default)(u)&&1!==u.length?t("DELETE_MULTIPLE_SERVICES"):t("DELETE_SERVICE"),d=(0,_.default)(u)&&1!==u.length?t.html("DELETE_SERVICE_DESC_PL",{resource:u.map((function(e){return e.name})).join(", ")}):(0,_.default)(u)?t.html("DELETE_SERVICE_DESC_SI",{resource:u.map((function(e){return e.name})).join(", ")}):t.html("DELETE_SERVICE_DESC_SI",{resource:u.name});return v.default.createElement(D.default,(0,l.default)({width:520,icon:"question",title:f,description:d,closable:!1,headerClassName:M.default.modalHeader,bodyClassName:M.default.modalBody,hideFooter:!0},i),v.default.createElement("div",{className:M.default.body},this.renderContent()),v.default.createElement("div",{className:M.default.footer},v.default.createElement(C.Button,{onClick:c},t("CANCEL")),v.default.createElement(C.Button,{type:"danger",loading:s,disabled:!a||s,onClick:this.handleOk},t("OK"),!a&&"(".concat(r,"s)"))))}}]),n}(v.default.Component);a.default=x,x.propTypes={resource:E.default.any,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},x.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={modalHeader:"_26d-mmc1L8YE15w2c5ynj-",modalBody:"OJj3mjDoKuQusJLoJyxm0",body:"xh0ShGgPliDrZ8GV160Qz",resources:"_3pLESr3si_XDoA7Poj1ldk",resource:"LOltHxE-oCwWcX3uKoJ6r",selected:"_1S_nFSv86IHQku-q8oIIuP",resourceName:"_3wA790hRgUadmWOd56JWt3",resourceType:"_3B2I_N_Bhq2bs2Nl5XvfDZ",footer:"_2lXPmmJElrAhBjoXVAlMPI",empty:"_7aUFmc9Af5O59nrGIsW-3"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.getOverrides=void 0;var n=r(a(16));t.getOverrides=function(e,t,a){var r=[];return e&&t?(a.forEach((function(a){var l=(0,n.default)(e,a,{}),o=(0,n.default)(t,a,{});JSON.stringify(l)!==JSON.stringify(o)&&r.push({path:"/".concat(a.replace(/\./g,"/")),value:o})})),r):r}},function(e,a,r){"use strict";(function(e){var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(56)),u=n(r(16)),c=r(25),s=n(r(274)),i=n(r(766)),f=n(r(2386)),d=n(r(2387)),p=r(58),m=n(r(733)),h=n(r(2388));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={"serviceaccount.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,f=e.workspace,d=e.module,v=e.success,y=(0,o.default)(e,["store","cluster","namespace","workspace","module","success"]),b=p.MODULE_KIND_MAP[d],g=(0,l.default)({},b,m.default[d]({namespace:n})),_=s.default.open(E({onOk:function(e){var l=(0,u.default)(e,b);l?a.create(l,{cluster:r,namespace:n||(0,u.default)(l,"metadata.namespace")}).then((function(){s.default.close(_),c.Notify.success({content:t("CREATE_SUCCESSFUL")}),v&&v()})):c.Notify.error({content:t("INVALID_YAML_FILE_FORMAT")})},modal:i.default,steps:h.default,formTemplate:g,name:b,store:a,module:d,cluster:r,namespace:n,workspace:f},y))}},"serviceaccount.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=s.default.open(E({onOk:function(e){a.patch(r,e).then((function(){s.default.close(u),c.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},detail:r,modal:f.default,namespace:r.namespace,store:a},l))}},"serviceaccount.role.edit":{on:function(a){var r=a.store,n=a.detail,l=a.success,u=(0,o.default)(a,["store","detail","success"]),i=s.default.open(E({onOk:function(e){r.patch(n,e).then((function(){s.default.close(i),c.Notify.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},detail:n,modal:d.default,store:r,module:e,namespace:n.namespace},u))}}};a.default=y}).call(this,r(76)(e))},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(5),v=r(70),E=n(r(833)),y=r(25),b=n(r(274)),g=n(r(747));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=(0,v.observer)((u=o=function(e){(0,i.default)(r,e);var a=_(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).roleStore=new g.default,t.handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,h.toJS)(o.selectedRowKeys).filter((function(e){return e!==l.uid}));r(e),o.setSelectRowKeys(u)},t.state={formData:(0,E.default)((0,h.toJS)(e.detail._originData||e.detail))},t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,E.default)((0,h.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=this.state.formData;return p.default.createElement(b.default.Form,{data:l,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r},p.default.createElement(y.Form.Item,{label:t("NAME")},p.default.createElement(y.Input,{name:"metadata.name",disabled:!0})),p.default.createElement(y.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},p.default.createElement(y.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),p.default.createElement(y.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(y.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}}]),r}(p.default.Component),o.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1},l=u))||l;a.default=S},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(5),v=r(70),E=n(r(833)),y=r(25),b=n(r(274)),g=n(r(1108)),_=n(r(747));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,v.observer)((u=o=function(e){(0,i.default)(r,e);var a=S(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).roleStore=new _.default,t.handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,h.toJS)(o.selectedRowKeys).filter((function(e){return e!==l.uid}));r(e),o.setSelectRowKeys(u)},t.state={formData:(0,E.default)((0,h.toJS)(e.detail._originData))},t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,E.default)((0,h.toJS)(this.props.detail._originData))})}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.onCancel,l=e.isSubmitting,o=e.cluster,u=e.namespace,c=this.state.formData;return p.default.createElement(b.default.Form,{width:600,title:a||t("CHANGE_ROLE"),icon:"client",data:c,onOk:this.handleOk,onCancel:n,visible:r,isSubmitting:l},p.default.createElement(y.Form.Item,{label:t("PROJECT_ROLE_SI"),desc:t("SERVICE_ACCOUNT_PROJECT_ROLE_DESC")},p.default.createElement(g.default,{name:"metadata.annotations['iam.kubesphere.io/role']",cluster:o,namespace:u,placeholder:" "})))}}]),r}(p.default.Component),o.propTypes={detail:m.default.object,title:m.default.string,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(37),l=r(a(2389)),o=[{title:"BASIC_INFORMATION",component:(0,n.withProps)(l.default,{maxNameLength:63}),required:!0}];t.default=o},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=r(70),p=n(r(16)),m=n(r(73)),h=r(25),v=n(r(935)),E=n(r(1108)),y=r(58),b=n(r(747));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=(0,d.observer)(l=function(e){(0,c.default)(r,e);var a=g(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).roleStore=new b.default,n.nameValidator=function(e,a,r){if(!a)return r();n.props.store.checkName({name:a,namespace:n.state.namespace,cluster:n.state.cluster}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.handleChange=function(e){(0,m.default)(n.formTemplate,'metadata.annotations["iam.kubesphere.io/role"]',""),n.setState({namespace:e})},n.state={cluster:e.cluster,workspace:e.workspace,namespace:e.namespace},n}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.formRef,a=this.state,r=a.cluster,n=a.namespace;return f.default.createElement(h.Form,{data:this.formTemplate,ref:e},f.default.createElement(h.Columns,null,f.default.createElement(h.Column,null,f.default.createElement(h.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:y.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},f.default.createElement(h.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),f.default.createElement(h.Column,null,f.default.createElement(h.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},f.default.createElement(h.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),f.default.createElement(h.Columns,null,!this.props.namespace&&f.default.createElement(h.Column,null,f.default.createElement(h.Form.Item,{label:t("PROJECT"),desc:t("SELECT_PROJECT_DESC"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},f.default.createElement(v.default,{name:"metadata.namespace",cluster:this.props.cluster,onChange:this.handleChange}))),f.default.createElement(h.Column,null,f.default.createElement(h.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},f.default.createElement(h.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))),f.default.createElement(h.Columns,null,f.default.createElement(h.Column,null,f.default.createElement(h.Form.Item,{label:t("PROJECT_ROLE_SI"),desc:t("SELECT_PROJECT_ROLE_DESC")},f.default.createElement(E.default,{name:"metadata.annotations['iam.kubesphere.io/role']",cluster:r,namespace:n,placeholder:" "})))))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,p.default)(t,y.MODULE_KIND_MAP[a],t)}}]),r}(f.default.Component))||l;a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=n(r(16)),i=n(r(73)),f=n(r(68)),d=n(r(1345)),p=r(25),m=n(r(274)),h=n(r(766)),v=n(r(760)),E=n(r(2391)),y=n(r(2393)),b=n(r(2399)),g=n(r(2401)),_=r(58),S=n(r(733)),O=n(r(822)),C=n(r(2403));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D={"storageclass.create":{on:function(e){var a=e.store,r=e.cluster,n=e.module,l=e.success,o=(0,c.default)(e,["store","cluster","module","success"]),i=_.MODULE_KIND_MAP[n],f=(0,u.default)({},i,S.default[n]({})),d=m.default.open(R({onOk:function(e){var o=(0,s.default)(e,i);o&&a.createAlongWithSnapshotClasses(o,{cluster:r}).then((function(){m.default.close(d),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),l&&l(),O.default.delete("".concat(n,"_create_form"))}))},module:n,cluster:r,name:i,steps:C.default,formTemplate:f,modal:h.default,store:a},o))}},"storageclass.set.default":{on:function(e){var t,a=e.store,r=e.cluster,n=e.detail,u=e.defaultStorageClass,s=e.success,i=(0,c.default)(e,["store","cluster","detail","defaultStorageClass","success"]),f=m.default.open(R({onOk:(t=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=3;break}return e.next=3,a.patch({name:u},{metadata:{annotations:{"storageclass.kubernetes.io/is-default-class":"false","storageclass.beta.kubernetes.io/is-default-class":"false"}}});case 3:return e.next=5,a.patch(n,{metadata:{annotations:{"storageclass.kubernetes.io/is-default-class":"true","storageclass.beta.kubernetes.io/is-default-class":"true"}}});case 5:m.default.close(f),s&&s();case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),cluster:r,modal:E.default,store:a},i))}},"storageclass.volume.function.update":{on:function(e){var a,r=e.cluster,n=e.store,u=e.detail,s=e.StorageClassStore,h=e.success,v=(0,c.default)(e,["cluster","store","detail","StorageClassStore","success"]),E=m.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(a){var r,o,c,s;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},o=a.allowClone,c=a.allowSnapshot,s=a.allowVolumeExpansion,(0,f.default)(o)||(0,i.default)(r,'metadata.annotations["storageclass.kubesphere.io/allow-clone"]',String(o)),(0,f.default)(c)||(0,i.default)(r,'metadata.annotations["storageclass.kubesphere.io/allow-snapshot"]',String(c)),(0,f.default)(s)||(0,i.default)(r,"allowVolumeExpansion",(0,d.default)(s)?s:JSON.parse(s)),e.next=7,n.patch(u,r);case 7:return e.next=9,n.fetchDetail({name:u.name,cluster:u.cluster});case 9:p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),m.default.close(E),h&&h();case 12:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:r,store:n,modal:b.default,StorageClassStore:s},v))}},"storageclass.pvc.autoresizer":{on:function(e){var a,r=e.store,n=e.cluster,u=e.detail,s=e.success,f=(0,c.default)(e,["store","cluster","detail","success"]),d=m.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(a){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u._originData,(0,i.default)(n,"metadata.annotations",R(R({},n.metadata.annotations),a)),e.next=4,r.patch(u,n);case 4:return e.next=6,r.fetchDetail({name:u.name,cluster:u.cluster});case 6:p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),m.default.close(d),s&&s();case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:n,store:r,formData:u._originData,modal:y.default},f))}},"storageclass.accessor":{on:function(e){var a,r=e.cluster,n=e.store,u=e.detail,c=e.storageClassName,s=e.success,i=e.shouldAddCrd,f=m.default.open({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.default.close(f),e.next=3,n.update({cluster:r,name:a.metadata.name},a);case 3:p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),s&&s();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),storageClassName:c,cluster:r,store:n,detail:u,shouldAddCrd:i,modal:g.default})}},"storageclass.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,s=void 0===u?"name":u,i=e.accessorStore,f=e.cluster,d=(0,c.default)(e,["store","success","rowKey","accessorStore","cluster"]),h=r.list,E=h.data,y=h.selectedRowKeys,b=E.filter((function(e){return y.includes(e[s])})).map((function(e){return{name:e.name,namespace:e.namespace}})).map((function(e){return e.name})),g=m.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(){var a,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],o=[],b.forEach((function(e){a.push(i.silentPatch({cluster:f,name:"".concat(e,"-accessor")},{spec:{storageClassName:"".concat(e,"-accessor-disabled")}})),o.push(r.delete({cluster:f,name:e}))})),e.next=5,Promise.all([].concat(a,o));case 5:m.default.close(g),p.Notify.success({content:t("DELETE_SUCCESSFUL")}),r.setSelectRowKeys([]),n&&n();case 9:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:b.join(", "),type:"STORAGE_CLASS",modal:v.default,store:r},d))}},"storageclass.delete":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=e.accessorStore,i=e.cluster,f=(0,c.default)(e,["store","detail","success","accessorStore","cluster"]),d=m.default.open(R({onOk:(a=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.silentPatch({cluster:i,name:"".concat(n.name,"-accessor")},{spec:{storageClassName:"".concat(n.name,"-accessor-disabled")}});case 2:r.delete(n).then((function(){m.default.close(d),p.Notify.success({content:t("DELETE_SUCCESSFUL")}),u&&u()}));case 3:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),store:r,modal:v.default,resource:n.name},f))}}};a.default=D},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(25),p=n(r(274)),m=n(r(2392));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.onOk,l=e.isSubmitting;return i.default.createElement(p.default,{width:520,onOk:n,onCancel:r,visible:a,okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:l,hideHeader:!0},i.default.createElement("div",{className:m.default.body},i.default.createElement("div",{className:"h5"},i.default.createElement(d.Icon,{name:"information",color:{primary:"#ffffff",secondary:"#41b1ea"},size:18}),"",t("SET_DEFAULT_STORAGE_CLASS_TITLE")),i.default.createElement("p",null,t("STORAGE_CLASS_SET_DEFAULT_DESC"))))}}]),r}(i.default.Component);a.default=v,v.propTypes={visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},v.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"LVUIJ9uwpeVUggtH-Ho5b"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(136)),s=n(r(21)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=n(r(1)),E=r(25),y=n(r(274)),b=n(r(275)),g=n(r(808)),_=n(r(740)),S=r(70),O=n(r(16)),C=n(r(1345)),T=n(r(930)),R=n(r(73)),D=n(r(879)),k=n(r(300)),N=n(r(2394)),P=n(r(2396)),I=n(r(2398));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var j=function(e,t,a,r){return(0,O.default)(e.formData,"metadata.annotations['".concat(t,".kubesphere.io/").concat(a,"']"),r)},x=1e4,L=0,F="Gi",U=(0,S.observer)((u=o=function(e){(0,d.default)(r,e);var a=A(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).enable=function(){var e=n.state.resize;n.setState({resize:M(M({},e),{},{enabled:!e.enabled})})},n.NumberEndDot=function(e){var t,a=null!==(t=/^[0-9]+(\.[0-9]{0,})?/g.exec(e))&&void 0!==t?t:[];return(0,k.default)(a[0],".")?e.split(".").join(""):e},n.handleOk=function(){n.formRef.current.validate((function(){var e=n.state,t=e.resize,a=e.restart,r={resize:t,restart:a},l=Object.entries(r).map((function(e){var t=(0,c.default)(e,2),a=t[0],r=t[1],l={};return Object.entries(r).forEach((function(e){var t=(0,c.default)(e,2),r=t[0],o=t[1],u=(0,C.default)(o)?JSON.stringify(o):n.NumberEndDot(o);(0,R.default)(l,"annotations['".concat(a,".kubesphere.io/").concat(r,"']"),u)})),l.annotations}));n.props.onOk(M(M(M({},l[0]),l[1]),{},{"restart.kubesphere.io/online-expansion-support":"".concat(!a.enabled)}))}))},n.handleLimitChange=function(e){var t=n.state.resize,a=F,r=/^[0-9]+(\.[0-9]{0,})?/g.test(e)?"".concat((0,D.default)(e)).concat(a):"10000Gi";n.setState({resize:M(M({},t),{},{"storage-limit":r}),fakeLimit:e})},n.handleThreshold=function(e){var t=n.state.resize,a="%"===e?"10%":e;n.setState({resize:M(M({},t),{},{threshold:a}),fakeThreshold:e})},n.handleIncrease=function(e){var t=n.state.resize,a="Gi"===e?"10Gi":e;n.setState({resize:M(M({},t),{},{increase:a}),fakeIncrease:e})},n.handleMaxTime=function(e){var t=n.state.restart;/^[0-9]*$/g.test(e)&&n.setState({restart:M(M({},t),{},{"max-time":""===e?"300":"".concat((0,D.default)(e))}),fakeMaxTime:(0,D.default)(e)})},n.restartEnable=function(){var e=n.state.restart;n.setState({restart:M(M({},e),{},{enabled:!e.enabled})})},n.renderMaxTime=function(){var e=n.state.fakeMaxTime;return h.default.createElement(h.default.Fragment,null,h.default.createElement(E.Alert,{type:"warning",message:t("RESTART_WORKLOAD_AUTOMATICALLY_TIP")}),h.default.createElement("div",{className:I.default.settings},h.default.createElement(E.Form.Item,{label:t("TIMEOUT_PERIOD_S")},h.default.createElement(_.default,{onChange:n.handleMaxTime,value:e,min:0}))))},n.formRef=h.default.createRef(),n.state={resize:{enabled:JSON.parse(j(e,"resize","enabled",!1)),increase:j(e,"resize","increase","10Gi"),"storage-limit":j(e,"resize","storage-limit","10000Gi"),threshold:j(e,"resize","threshold","10%")},restart:{enabled:JSON.parse(j(e,"restart","enabled",!1)),"max-time":j(e,"restart","max-time","300")},fakeIncrease:j(e,"resize","increase","10Gi"),fakeThreshold:j(e,"resize","threshold","10%"),fakeLimit:j(e,"resize","storage-limit","10000Gi"),fakeMaxTime:j(e,"restart","max-time","300")},n}return(0,f.default)(r,[{key:"getMarks",value:function(){var e=x,t=F;return(0,T.default)(6).reduce((function(a,r){var n=e*r/5,l=0===n?"0":"".concat(Math.floor(n)).concat(t);return M(M({},a),{},(0,s.default)({},n,l))}),{})}},{key:"render",value:function(){var e,a=this.props,r=a.visible,n=a.onCancel,l=a.formData,o=a.isSubmitting,u=this.state,c=u.resize,s=u.restart,i=u.fakeThreshold,f=u.fakeIncrease,d=u.fakeLimit,p=c.enabled,m=s.enabled,v=this.getMarks(),_=null===(e=/[0-9]+/g.exec(d))||void 0===e?void 0:e[0],S=_?parseInt(_,10):"",O=/[0-9]+/g.test(f)?f.endsWith("%")?f.slice(0,-1):f.slice(0,-2):"",C=""!==f?i.slice(0,-1):f;return h.default.createElement(y.default,{width:960,onOk:this.handleOk,onCancel:n,visible:r,title:t("SET_AUTO_EXPANSION"),okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:o},h.default.createElement(E.Form,{formData:l,ref:this.formRef},h.default.createElement(E.Form.Item,null,h.default.createElement("div",{className:I.default.wrapper},h.default.createElement(b.default,{className:I.default.text,icon:function(){return h.default.createElement("img",{src:"/assets/autoscaling.svg",style:{width:"32px",marginRight:"16px"}})},title:t("AUTO_EXPANSION"),description:t("AUTO_EXPANSION_DESC")}),h.default.createElement(g.default,{className:I.default.switch,text:p?t("ENABLED"):t("DISABLED"),checked:p,onChange:this.enable}))),h.default.createElement("div",{className:I.default.settings},h.default.createElement("div",{className:I.default.title},t("AUTO_EXPANSION_SETTINGS")),h.default.createElement("div",{className:I.default.container},h.default.createElement("div",{className:I.default.limit},h.default.createElement(E.Form.Item,{label:t("MAXIMUM_SIZE")},h.default.createElement(N.default,{size:S,max:x,min:L,marks:v,unit:F,onChange:this.handleLimitChange}))),h.default.createElement(E.Columns,null,h.default.createElement(E.Column,null,h.default.createElement(E.Form.Item,null,h.default.createElement(P.default,{title:t("THRESHOLD"),unit:"%",max:100,value:C,onChange:this.handleThreshold}))),h.default.createElement(E.Column,null,h.default.createElement(E.Form.Item,{desc:t("INCREMENT_DESC")},h.default.createElement(P.default,{title:t("INCREMENT"),value:O,unit:"Gi",onChange:this.handleIncrease}))))),h.default.createElement("div",{className:I.default.group},h.default.createElement("div",{className:I.default.container},h.default.createElement("div",{className:I.default.checkItem},h.default.createElement(E.Checkbox,{checked:m,onChange:this.restartEnable}),h.default.createElement("div",{className:I.default.text},h.default.createElement("span",{className:I.default.title},t("RESTART_WORKLOAD_AUTOMATICALLY")),h.default.createElement("span",{className:I.default.des},t("RESTART_WORKLOAD_AUTOMATICALLY_DESC")))),m&&this.renderMaxTime())))))}},{key:"increaseOptions",get:function(){return[{label:"GiB",value:"Gi"},{label:"%",value:"%"}]}},{key:"increaseUnit",get:function(){var e,t=this.state.fakeIncrease;return null!==(e=this.increaseOptions.filter((function(e){return t.endsWith(e.value)}))[0].value)&&void 0!==e?e:"%"}}]),r}(h.default.Component),o.propTypes={visible:v.default.bool,onOk:v.default.func,onCancel:v.default.func,isSubmitting:v.default.bool},l=u))||l;a.default=U},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),o=r(a(19)),u=r(a(20)),c=r(a(18)),s=r(a(0)),i=r(a(1)),f=a(25),d=r(a(740)),p=r(a(2395));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var h=function(e){(0,o.default)(a,e);var t=m(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).handleSliderChange=function(e){r.setState({size:e},(function(){r.props.onChange(e)}))},r.inputChange=function(e){r.setState({size:e},(function(){r.props.onChange(e)}))},r.state={size:e.size},r}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.max,a=e.min,r=e.unit,n=e.marks,l=this.state.size;return s.default.createElement("div",{className:p.default.wrapper},s.default.createElement(f.Slider,{value:l,max:t,min:a,marks:n,unit:r,onChange:this.handleSliderChange}),s.default.createElement("div",{className:p.default.inputBox},s.default.createElement(d.default,{className:p.default.input,value:l,max:t,min:a,onChange:this.inputChange}),s.default.createElement("span",{className:p.default.unit},r)))}}]),a}(s.default.Component);t.default=h,h.propTypes={size:i.default.number,max:i.default.number,min:i.default.number,unit:i.default.string,onChange:i.default.func},h.defaultProps={size:10,max:2048,min:0,unit:"Gi",onChange:function(){}}},function(e,t,a){e.exports={wrapper:"_1mvTs5GBM24J0ZC-PZKOqS",inputBox:"_33_mEhm-GlTPmcsAdY4L1N",input:"_2l_4JhXkXDawwXxLZvphsr",unit:"MtGAFnWFj5-7jxF1gChe0"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),l=r(a(13)),o=r(a(19)),u=r(a(20)),c=r(a(18)),s=r(a(0)),i=r(a(1)),f=r(a(879)),d=a(25),p=r(a(740)),m=r(a(2397));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var v=function(e){(0,o.default)(a,e);var t=h(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){var t=r.state.unit;r.props.onChange("".concat((0,f.default)(e)).concat(t))},r.handleInput=function(e){var t=r.state.unit;r.props.onChange("".concat((0,f.default)(e)).concat(t))},r.renderTail=function(){var e=r.props.options,t=r.state.unit;return e.length>1?s.default.createElement(d.Select,{className:m.default.tailSelect,options:e,value:t,defaultValue:t,onChange:r.handleSelectChange}):s.default.createElement("span",{className:m.default.unit},t)},r.state={unit:e.unit,value:e.value},r}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.min,r=e.max,n=e.value;return s.default.createElement(s.default.Fragment,null,""!==t&&s.default.createElement("div",{className:m.default.title},t),s.default.createElement("div",{className:m.default.wrapper},s.default.createElement(p.default,{className:m.default.input,min:a,value:n,max:r,onChange:this.handleInput}),this.renderTail()))}}]),a}(s.default.Component);t.default=v,v.propTypes={onChange:i.default.func,options:i.default.array,value:i.default.string,min:i.default.number,max:i.default.number,unit:i.default.string,title:i.default.string},v.defaultProps={options:[],value:"",min:0,title:"",unit:"",onChange:function(){}}},function(e,t,a){e.exports={title:"_3gCzFcF7fcPTu22LltCShA",wrapper:"_20nfJFuMfJpHOHE9YDPewL",input:"vaY31bEaxpZlAVRmVYPix",tailSelect:"_2XbNfOs7f_36Ovqjfw_HK9",unit:"flR4Dw7LDIWhIn8tDx9jF"}},function(e,t,a){e.exports={wrapper:"_199UmNQHyBJS0ebwEpIGw8",text:"_3UfJ52LH7FrU0bLw8j0O95",switch:"_2fHHkpPHo-8wuOAbtg_-fy",settings:"_2whYmFUOtrDqPfsDr3UVMW",title:"_1fTGAl2lYYfATlfTHgdLWr",container:"_3Q1kslT3zayxpY8R7UfqIL",limit:"_2P6eNTXyz8rvKC5lg8NgeP",checkItem:"_14y0ciRr89j7e_M0WYMQ9w",des:"uDVdwpV_vBYrKbce_FYfE",group:"_44T5XYn5HzVMT8x5tJZXT"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=r(25),v=n(r(274)),E=n(r(16)),y=n(r(68)),b=n(r(138)),g=r(70),_=n(r(2400));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,g.observer)((u=o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state=e.getState,e.dataUndefined=function(e){return!(0,y.default)(e)&&((0,b.default)(e)?JSON.parse(e):e)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,l=a.onOk,o=a.isSubmitting;return p.default.createElement(v.default,{width:600,onOk:function(){return l(e.state)},onCancel:n,visible:r,title:t("SET_VOLUME_OPERATIONS"),icon:"slider",okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:o},p.default.createElement(h.Alert,{type:"warning",className:"margin-b12",message:t.html("SET_VOLUME_OPERATIONS_TIP")}),p.default.createElement("div",{className:_.default.body},this.Items.map((function(t){var a=e.state[t.key],r=e.dataUndefined(a);return p.default.createElement("div",{className:_.default.Item,key:t.title},p.default.createElement("div",{className:_.default.icon},p.default.createElement(h.Toggle,{checked:r,disabled:(0,y.default)(a),onChange:function(){return t.onclick(r)}})),p.default.createElement("div",{className:_.default.textBox},p.default.createElement("span",{className:_.default.title},t.title),p.default.createElement("span",{className:_.default.des},t.des)))}))))}},{key:"getState",get:function(){var e=this.props.StorageClassStore.detail;return{allowClone:(0,E.default)(e.annotations,"storageclass.kubesphere.io/allow-clone",void 0),allowSnapshot:(0,E.default)(e.annotations,"storageclass.kubesphere.io/allow-snapshot",void 0),allowVolumeExpansion:(0,E.default)(e,"allowVolumeExpansion",void 0)}}},{key:"onOkState",get:function(){return{allowClone:this.dataUndefined(this.state.allowClone),allowSnapshot:this.dataUndefined(this.state.allowSnapshot),allowVolumeExpansion:this.dataUndefined(this.state.allowVolumeExpansion)}}},{key:"Items",get:function(){var e=this;return[{title:t("VOLUME_CLONING"),des:t("VOLUME_CLONING_DESC"),key:"allowClone",onclick:function(t){return e.setState({allowClone:!t})}},{title:t("VOLUME_SNAPSHOT_CREATION"),des:t("VOLUME_SNAPSHOT_CREATION_DESC"),key:"allowSnapshot",onclick:function(t){return e.setState({allowSnapshot:!t})}},{title:t("VOLUME_EXPANSION"),des:t("VOLUME_EXPANSION_DESC"),key:"allowVolumeExpansion",onclick:function(t){return e.setState({allowVolumeExpansion:!t})}}]}}]),r}(p.default.Component),o.propTypes={visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,t,a){e.exports={body:"_3QyHHg0hisjmcupBh_NvhW",Item:"SRjS5KHQZAgS4V27u_ywn",icon:"_15bRbSgLaZbaSnNzE8iSVC",textBox:"_3kTj8hcDzdP92R5Vjckb4u",title:"_4VY2gXWgMHU_XuA_Ke883",des:"j_xFi_rwmR4ZLJD46Ivr_"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(136)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(1)),m=l(r(274)),h=l(r(275)),v=l(r(808)),E=r(25),y=l(r(770)),b=l(r(753)),g=l(r(16)),_=l(r(73)),S=l(r(185)),O=l(r(2402));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var T=function(e){(0,s.default)(r,e);var a=C(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).workspaceStore=new y.default,t.namespaceStore=new b.default,t.fetchData=function(){var e=t.props.cluster;Promise.all([t.workspaceStore.fetchList({cluster:e,limit:-1}),t.namespaceStore.fetchList({cluster:e,limit:-1})]).then((function(e){var a=(0,o.default)(e,2),r=a[0],n=a[1],l=r.map((function(e){return e.name})),u=n.map((function(e){return e.name}));t.setState({workspace:l,namespace:u})}))},t.handleNsChange=function(e){t.setState({nsValues:e})},t.handleWsChange=function(e){t.setState({wsValues:e})},t.handleEnable=function(){t.setState({enabled:!t.state.enabled})},t.expression=function(e){return{fieldExpressions:[{field:"Name",operator:"In",values:e}]}},t.handleOk=function(){var e=t.props,a=e.onOk,r=e.storageClassName,n=t.state,l=n.enabled,o=n.nsValues,u=n.wsValues,c=n.newObject,s=n.nsOpt,i=n.wsOpt,f=(0,g.default)(c.spec,"namespaceSelector.fieldSelector",[t.expression([])]),d=(0,g.default)(c.spec,"workspaceSelector.fieldSelector",[t.expression([])]),p=l?r:"".concat(r,"-disabled");(0,_.default)(c.spec,"storageClassName",p),(0,_.default)(f[0],"fieldExpressions[0].values",o),(0,_.default)(f[0],"fieldExpressions[0].operator",s),(0,_.default)(d[0],"fieldExpressions[0].values",u),(0,_.default)(d[0],"fieldExpressions[0].operator",i),(0,_.default)(c.spec,"namespaceSelector.fieldSelector",f),(0,_.default)(c.spec,"workspaceSelector.fieldSelector",d),0===o.length&&delete c.spec.namespaceSelector,0===u.length&&delete c.spec.workspaceSelector,a(c)},t.handleNsOptChange=function(e){t.setState({nsOpt:e})},t.handleWsOptChange=function(e){t.setState({wsOpt:e})},t.state={newObject:(0,S.default)(e.detail),enabled:!(0,g.default)(e.detail.spec,"storageClassName","").includes("disabled"),workspace:[],namespace:[],nsOpt:(0,g.default)(e.detail,"spec.namespaceSelector.fieldSelector[0].fieldExpressions[0].operator","In"),wsOpt:(0,g.default)(e.detail,"spec.workspaceSelector.fieldSelector[0].fieldExpressions[0].operator","In"),nsValues:(0,g.default)(e.detail,"spec.namespaceSelector.fieldSelector[0].fieldExpressions[0].values",[]),wsValues:(0,g.default)(e.detail,"spec.workspaceSelector.fieldSelector[0].fieldExpressions[0].values",[])},t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=e.shouldAddCrd,o=this.state,u=o.enabled,c=o.nsValues,s=o.wsValues,i=o.nsOpt,f=o.wsOpt;return d.default.createElement(m.default,{width:960,onOk:this.handleOk,onCancel:r,visible:a,title:t("SET_AUTHORIZATION_RULES"),okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:n,hideFooter:l},l&&d.default.createElement(E.Alert,{type:"warning",message:t.html("AUTHORIZATION_NOT_SUPPORT")}),d.default.createElement("div",{className:O.default.wrapper},d.default.createElement(h.default,{className:O.default.text,icon:function(){return d.default.createElement("img",{src:"/assets/storageclass-tree.svg",style:{width:"40px",marginRight:"16px"}})},title:t("AUTHORIZATION_RULES"),description:t("AUTHORIZATION_RULES_DESC")}),d.default.createElement(v.default,{className:O.default.switch,text:u?t("ENABLED"):t("DISABLED"),checked:u,onChange:this.handleEnable})),d.default.createElement("div",{className:O.default.selectBox},d.default.createElement("div",{className:O.default.line},d.default.createElement(E.Select,{className:O.default.labelSelect,options:[{label:t("PROJECT"),value:"namespace"}],defaultValue:"namespace",disabled:!0}),d.default.createElement(E.Select,{className:O.default.operator,options:this.operatorOptions,onChange:this.handleNsOptChange,value:i}),d.default.createElement(E.Select,{multi:!0,className:O.default.labelSelect,options:this.namespaceOptions,onChange:this.handleNsChange,value:c})),d.default.createElement("div",{className:O.default.line},d.default.createElement(E.Select,{className:O.default.labelSelect,options:[{label:t("WORKSPACE"),value:"workspace"}],defaultValue:"workspace",disabled:!0}),d.default.createElement(E.Select,{className:O.default.operator,options:this.operatorOptions,onChange:this.handleWsOptChange,value:f}),d.default.createElement(E.Select,{multi:!0,className:O.default.labelSelect,options:this.workspaceOptions,onChange:this.handleWsChange,value:s}))))}},{key:"namespaceOptions",get:function(){return this.state.namespace.map((function(e){return{label:e,value:e}}))}},{key:"workspaceOptions",get:function(){return this.state.workspace.map((function(e){return{label:e,value:e}}))}},{key:"operatorOptions",get:function(){return[{label:t("OPERATOR_IN"),value:"In"},{label:t("OPERATOR_NOT_IN"),value:"NotIn"}]}}]),r}(d.Component);a.default=T,T.propTypes={visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func,isSubmitting:p.default.bool},T.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={wrapper:"_3D_cTNGP8MQC4Uc5eHhLZA",text:"_2GwAeg4xLWT1Ao1HBA2aT",switch:"_1IAyFA7w5XmghrEXWgouQd",selectBox:"_1ksKSMg9kux_MBU1RZ-fq0",line:"HK72SgA9yU7peLgeKlWEO",labelSelect:"FZVIiDuWKdDJRqouL39O0",operator:"tmura1FWwKDbtn1CR9CU4"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1346)),l=r(a(2404)),o=r(a(2406)),u=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"STORAGE_SYSTEM",component:l.default,required:!0},{title:"STORAGE_CLASS_SETTINGS",component:o.default,required:!0}];t.default=u},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(109)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(73)),m=n(r(190)),h=r(25),v=n(r(1292)),E=r(58),y=n(r(2405));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=b(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).provisionersOptions=[].concat((0,l.default)(E.PROVISIONERS.map((function(e){return(0,m.default)(e,["description"])}))),[{label:t("CUSTOM"),value:"",icon:"hammer"}]),n.changeProvisioner=function(e){n.setState({provisioner:e},n.updateParams)},n.formTemplate.provisioner||(n.formTemplate.provisioner=E.PROVISIONERS[0].value,(0,p.default)(n.formTemplate,"metadata.annotations['kubesphere.io/provisioner']",n.formTemplate.provisioner)),n.state={provisioner:n.formTemplate.provisioner},n}return(0,u.default)(r,[{key:"updateParams",value:function(){this.formTemplate.provisioner=this.state.provisioner,this.formTemplate.parameters={}}},{key:"render",value:function(){var e=this.props.formRef,a=this.state.provisioner,r=(E.PROVISIONERS.find((function(e){return e.value===a}))||{}).description;return f.default.createElement(h.Form,{data:this.formTemplate,ref:e},f.default.createElement(h.Form.Item,{label:f.default.createElement("div",{className:y.default.provisioner},f.default.createElement("h3",null,t("CHOOSE_STORAGE_SYSTEM_TIP")),f.default.createElement("p",null,t("PROVISIONER_DEPENDENCE_DESC")))},f.default.createElement(v.default,{onChange:this.changeProvisioner,name:"metadata.annotations['kubesphere.io/provisioner']",options:this.provisionersOptions})),f.default.createElement("p",{className:y.default.description,dangerouslySetInnerHTML:{__html:t(r)}}))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,E.MODULE_KIND_MAP[a],t)}}]),r}(f.default.Component);a.default=g},function(e,t,a){e.exports={provisioner:"XUh3rWXYiPF6kf28wKkXk",description:"_1ntIXDpZx7uRHczOv_FkZd"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(16)),d=n(r(190)),p=n(r(32)),m=n(r(0)),h=r(25),v=n(r(786)),E=n(r(2407)),y=r(58);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g={input:E.default,select:h.Select},_={maxsize:"GiB",stepsize:"GiB",minsize:"GiB"},S=function(e){(0,c.default)(r,e);var a=b(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).isCustomizedProvision=y.PROVISIONERS.every((function(e){return e.value!==t.provisionerValue})),t}return(0,u.default)(r,[{key:"getAccessModesOptions",value:function(){var e=this,a=y.PROVISIONERS.find((function(t){return t.value===e.provisionerValue}))||{};return((0,p.default)(a.access_modes)?Object.keys(y.ACCESS_MODES):a.access_modes).map((function(e){return{label:t(e),value:e}}))}},{key:"renderCustom",value:function(){return m.default.createElement(h.Form.Item,{label:t("PARAMETERS")},m.default.createElement(v.default,{name:"parameters",addText:t("ADD")}))}},{key:"renderParams",value:function(){var e=this,a=y.PROVISIONERS.find((function(t){return t.value===e.provisionerValue}));if((0,p.default)(a)||(0,p.default)(a.params))return this.renderCustom();for(var r=[],n=0;n<a.params.length;n+=2){var o,u,c=a.params[n]||{},s=a.params[n+1]||{},i=c.options?c.options.map((function(e){return{label:t(e.label),value:e.value}})):[],v=g[c.type],E=(0,f.default)(g,s.type||"");r.push(m.default.createElement(h.Columns,{key:n},m.default.createElement(h.Column,null,m.default.createElement(h.Form.Item,{label:t(c.key.toUpperCase()),desc:t(c.desc.toUpperCase())},m.default.createElement(v,(0,l.default)({name:"parameters.".concat(c.key.toLowerCase())},(0,d.default)(c,["type","key","desc","placeholder","options"]),{unit:null!==(o=_[c.key.toLowerCase()])&&void 0!==o?o:null,options:i,placeholder:t(c.placeholder)})))),s.type&&m.default.createElement(h.Column,null,m.default.createElement(h.Form.Item,{label:t(s.key.toUpperCase()),desc:t(s.desc.toUpperCase())},m.default.createElement(E,(0,l.default)({name:"parameters.".concat(s.key.toLowerCase()),unit:null!==(u=_[s.key.toLowerCase()])&&void 0!==u?u:null},(0,d.default)(s,["type","key","desc"])))))))}return r}},{key:"render",value:function(){var e=this.props.formRef,a=this.getAccessModesOptions(),r=a.map((function(e){return e.value}));return m.default.createElement("div",null,m.default.createElement(h.Form,{data:this.formTemplate,ref:e},m.default.createElement(h.Columns,null,m.default.createElement(h.Column,null,m.default.createElement(h.Form.Item,{label:t("VOLUME_EXPANSION")},m.default.createElement(h.Select,{name:"allowVolumeExpansion",options:[{label:t("YES"),value:"true"},{label:t("NO"),value:"false"}]}))),m.default.createElement(h.Column,null,m.default.createElement(h.Form.Item,{label:t("RECLAIM_POLICY")},m.default.createElement(h.Input,{name:"reclaimPolicy",disabled:!0})))),m.default.createElement(h.Columns,null,m.default.createElement(h.Column,null,m.default.createElement(h.Form.Item,{label:t("ACCESS_MODE"),desc:t("ACCESS_MODES_DESC")},m.default.createElement(h.Select,{name:"metadata.annotations['storageclass.kubesphere.io/supported-access-modes']",options:a,defaultValue:r,multi:!0}))),m.default.createElement(h.Column,null,m.default.createElement(h.Form.Item,{rules:[{required:!0,message:t("PARAMETER_REQUIRED")}],label:t("PROVISIONER")},m.default.createElement(h.Input,{name:"provisioner"})))),m.default.createElement(h.Columns,null,m.default.createElement(h.Column,null,m.default.createElement(h.Form.Item,{label:t("VOLUME_BINDING_MODE")},m.default.createElement(h.Select,{name:"volumeBindingMode",options:this.volumeBindingMode,defaultValue:"WaitForFirstConsumer"}))),m.default.createElement(h.Column,null)),this.renderParams()))}},{key:"provisionerValue",get:function(){return(0,f.default)(this.formTemplate,'metadata.annotations["kubesphere.io/provisioner"]',this.formTemplate.provisioner)}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,y.MODULE_KIND_MAP[a],t)}},{key:"volumeBindingMode",get:function(){return[{label:t("IMMEDIATE_BINDING"),value:"Immediate"},{label:t("BINDING_WAIT"),value:"WaitForFirstConsumer"}]}}]),r}(m.default.Component);a.default=S},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),o=r(a(12)),u=r(a(13)),c=r(a(19)),s=r(a(20)),i=r(a(18)),f=r(a(0)),d=r(a(1)),p=a(25),m=r(a(2408));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.unit,r=e.onChange,o=(0,l.default)(e,["name","unit","onChange"]);return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:m.default.wrapper},f.default.createElement(p.Input,(0,n.default)({name:t,className:m.default.input,onChange:r||null},o)),a&&f.default.createElement("span",{className:m.default.unit},a)))}}]),a}(f.default.Component);t.default=v,v.propTypes={onChange:d.default.func,unit:d.default.string}},function(e,t,a){e.exports={wrapper:"_2kGVdUbWOxTaeyX4b5Z8Q_",input:"qgxKLrXJOh3vbKAcB-CBG",unit:"_2GAL5LSZYi6CYdKZCidXt9"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(56)),u=n(r(0)),c=r(25),s=n(r(274)),i=n(r(1347)),f=n(r(1364)),d=n(r(1367)),p=n(r(658)),m=n(r(1370)),h=n(r(1371));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={"toolbox.logquery":{on:function(e){e.store;var a=(0,o.default)(e,["store"]),r=s.default.open(E({onOk:function(){s.default.close(r)},modal:i.default,title:t("CONTAINER_LOG_SEARCH")},a))}},"toolbox.eventsearch":{on:function(e){e.store;var a=(0,o.default)(e,["store"]),r=s.default.open(E({onOk:function(){s.default.close(r)},modal:f.default,title:u.default.createElement("div",null,u.default.createElement(c.Icon,{size:20,name:"thunder",style:{marginRight:7}})," ",u.default.createElement("span",{style:{fontSize:12,fontWeight:600,lineHeight:"20px",height:"20px"}},t("RESOURCE_EVENT_SEARCH")))},a))}},"toolbox.auditingsearch":{on:function(e){e.store;var a=(0,o.default)(e,["store"]),r=s.default.open(E({onOk:function(){s.default.close(r)},modal:d.default,title:u.default.createElement("div",null,u.default.createElement(c.Icon,{size:20,name:"login-servers",style:{marginRight:7}})," ",u.default.createElement("span",{style:{fontSize:12,fontWeight:600,lineHeight:"20px",height:"20px"}},t("AUDIT_LOG_SEARCH")))},a))}},"toolbox.kubectl":{on:function(e){e.store;var t=(0,o.default)(e,["store"]),a=s.default.open(E({onOk:function(){s.default.close(a)},modal:p.default,title:"kubectl"},t))}},"toolbox.kubeconfig":{on:function(e){e.store;var a=(0,o.default)(e,["store"]),r=s.default.open(E({onOk:function(){s.default.close(r)},modal:m.default,title:t("kubeconfig")},a))}},"toolbox.bill":{on:function(e){var t=e.store,a=(0,o.default)(e,["store"]),r=s.default.open(E({onOk:function(){s.default.close(r)},modal:h.default,store:t},a))}}};a.default=y},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=r(25),i=n(r(274)),f=n(r(2555)),d=n(r(2557)),p=n(r(2559)),m=n(r(73));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={"user.create":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),d=i.default.open(v({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return i.default.close(d),e.abrupt("return");case 3:return(0,m.default)(a,'metadata.annotations["iam.kubesphere.io/uninitialized"]',"true"),e.next=6,r.create(a);case 6:i.default.close(d),s.Notify.success({content:t("CREATE_SUCCESSFUL")}),n&&n();case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:f.default,store:r},u))}},"user.edit":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,d=(0,c.default)(e,["store","detail","success"]),p=i.default.open(v({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return i.default.close(p),e.abrupt("return");case 3:return(0,m.default)(a,"metadata.resourceVersion",n.resourceVersion),e.next=6,r.update(n,a);case 6:i.default.close(p),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:f.default,detail:n,store:r},d))}},"user.setting":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),f=i.default.open(v({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return i.default.close(f),e.abrupt("return");case 3:if(o=a.currentPassword,u=a.password,a.rePassword,d=(0,c.default)(a,["currentPassword","password","rePassword"]),!o||!u){e.next=10;break}return e.next=7,r.modifyPassword({name:globals.user.username},{currentPassword:o,password:u});case 7:setTimeout((function(){location.href="/login"}),1e3),e.next=12;break;case 10:return e.next=12,r.update({name:globals.user.username},d);case 12:i.default.close(f),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 15:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:p.default,store:r},u))}},"user.modifypassword":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=i.default.open(v({onOk:function(e){e?a.modifyPassword(r,e).then((function(){i.default.close(o),s.Notify.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()})):i.default.close(o)},modal:d.default,detail:r,store:a},l))}}};a.default=E},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u,c,s,i=n(r(71)),f=n(r(56)),d=n(r(21)),p=n(r(12)),m=n(r(13)),h=n(r(19)),v=n(r(20)),E=n(r(18)),y=n(r(74)),b=n(r(16)),g=l(r(0)),_=n(r(1)),S=r(5),O=r(70),C=r(25),T=n(r(274)),R=n(r(952)),D=r(37),k=r(58),N=n(r(747)),P=n(r(2556));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var A=(0,O.observer)((s=c=function(e){(0,h.default)(r,e);var a=M(r);function r(){var e;(0,p.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={formTemplate:w({apiVersion:"iam.kubesphere.io/v1alpha2",kind:"User"},(0,b.default)(e.props,"detail._originData",{}))},e.globalRoleStore=new N.default("globalroles"),e.userNameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r}).then((function(e){if(e.exist)return n({message:t("USERNAME_EXISTS"),field:a.field});n()}))},e.emailValidator=function(a,r,n){if(!r)return n();e.props.store.checkEmail(r).then((function(e){if(e.exist)return n({message:t("EMAIL_EXISTS"),field:a.field});n()}))},e.optionRenderer=function(e){return g.default.createElement("div",{className:P.default.option},g.default.createElement("div",null,e.item.name),g.default.createElement("p",null,e.item.description))},e}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.globalRoleStore.fetchList({limit:-1,sortBy:"createTime"})}},{key:"render",value:function(){var e=this.props,a=(e.store,e.detail),r=(0,f.default)(e,["store","detail"]),n=a?"EDIT_USER":"CREATE_USER",l=a?[{required:!0,message:t("USERNAME_EMPTY_DESC")}]:[{required:!0,message:t("USERNAME_EMPTY_DESC")},{pattern:k.PATTERN_USER_NAME,message:t("USERNAME_INVALID",{message:t("USERNAME_DESC")})},{validator:this.userNameValidator}],o=a?[{required:!0,message:t("EMAIL_EMPTY_DESC")}]:[{required:!0,message:t("EMAIL_EMPTY_DESC")},{type:"email",message:t("INVALID_EMAIL")},{validator:this.emailValidator}];return g.default.createElement(T.default.Form,(0,i.default)({title:t(n),icon:"human",width:691,data:this.state.formTemplate},r),g.default.createElement("input",{name:"username",className:"hidden-input",type:"text",disabled:!0}),g.default.createElement("input",{name:"password",className:"hidden-input",type:"password",disabled:!0}),g.default.createElement(C.Form.Item,{label:t("USERNAME"),desc:t("USERNAME_DESC"),rules:l},g.default.createElement(C.Input,{name:"metadata.name",autoComplete:"nope",disabled:!!a,autoFocus:!0,maxLength:32})),g.default.createElement(C.Form.Item,{label:t("EMAIL"),desc:t("EMAIL_DESC"),rules:o},g.default.createElement(C.Input,{name:"spec.email",placeholder:"user@example.com",autoComplete:"nope"})),g.default.createElement(C.Form.Item,{label:t("PLATFORM_ROLE"),desc:t("PLATFORM_ROLE_DESC")},g.default.createElement(C.Select,{name:"metadata.annotations['iam.kubesphere.io/globalrole']",optionRenderer:this.optionRenderer,options:this.globalRoles,placeholder:" "})),!a&&g.default.createElement(C.Form.Item,{className:P.default.password,label:t("PASSWORD"),desc:t("PASSWORD_DESC"),rules:[{required:!0,message:t("PASSWORD_EMPTY_DESC")},{pattern:k.PATTERN_PASSWORD,message:t("PASSWORD_INVALID_DESC")}]},g.default.createElement(R.default,{name:"spec.password",autoComplete:"nope",withStrength:!0})),g.default.createElement(C.Form.Item,{className:P.default.textarea,label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},g.default.createElement(C.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256,rows:"3"})))}},{key:"globalRoles",get:function(){return this.globalRoleStore.list.data.filter((function(e){return!(0,D.isSystemRole)(e.name)})).map((function(e){return{label:e.name,value:e.name,item:e}}))}}]),r}(g.Component),c.propTypes={store:_.default.object,detail:_.default.object,visible:_.default.bool,onOk:_.default.func,onCancel:_.default.func,isSubmitting:_.default.bool},c.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},u=s,(0,y.default)(u.prototype,"globalRoles",[S.computed],Object.getOwnPropertyDescriptor(u.prototype,"globalRoles"),u.prototype),o=u))||o;a.default=A},function(e,t,a){e.exports={password:"_1ADG5zIrZxFGThHw8n2EmT",textarea:"_3AQG3DTgv4CDYCBILVvos",option:"iR3e_Ox7Wx4eRyBl51gWs"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(71)),u=l(r(56)),c=l(r(12)),s=l(r(13)),i=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(1)),h=r(25),v=l(r(274)),E=l(r(952)),y=r(58),b=l(r(2558));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={password:"",formData:{}},e.handlePassswordChange=function(t){e.setState({password:t})},e.passwordValidator=function(a,r,n){if(!r)return n();r!==e.state.password&&n({message:t("PASSWORD_NOT_SAME_DESC"),field:a.field}),n()},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=(0,u.default)(e,["detail"]);return p.default.createElement(v.default.Form,(0,o.default)({title:t("CHANGE_PASSWORD"),icon:"pen",width:691,data:this.state.formData},r),p.default.createElement("input",{name:"username",className:"hidden-input",type:"text",disabled:!0}),p.default.createElement("input",{name:"password",className:"hidden-input",type:"password",disabled:!0}),p.default.createElement(h.Form.Item,{label:t("EMAIL")},p.default.createElement(h.Input,{disabled:!0,value:a.email})),p.default.createElement(h.Form.Item,{className:b.default.password,label:t("NEW_PASSWORD"),rules:[{required:!0,message:t("PASSWORD_EMPTY_DESC")},{pattern:y.PATTERN_PASSWORD,message:t("PASSWORD_DESC")}]},p.default.createElement(E.default,{name:"password",autoComplete:"new-password",onChange:this.handlePassswordChange,withStrength:!0})),p.default.createElement(h.Form.Item,{className:b.default.password,label:t("CONFIRM_PASSWORD"),rules:[{required:!0,message:t("CONFIRM_PASSWORD_TIP")},{validator:this.passwordValidator}]},p.default.createElement(E.default,{name:"rePassword",placeholder:" ",autoComplete:"new-password"})),p.default.createElement("div",{style:{height:200}}))}}]),r}(p.Component);a.default=_,_.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func},_.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={password:"_1Y4vNVcj5FUe5828ELzjaG",textarea:"_3qpHbW3KqGgth2GS-KMzr1",option:"_1z2QQj33fVWgBm8KRBy7H0"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(21)),c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(16)),m=n(r(73)),h=n(r(291)),v=n(r(185)),E=n(r(32)),y=n(r(0)),b=n(r(3)),g=n(r(1)),_=r(5),S=r(25),O=n(r(274)),C=n(r(799)),T=n(r(278)),R=n(r(2560)),D=n(r(2565));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var I=function(e){(0,i.default)(r,e);var a=P(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).registerUpdate=function(e,a){var r=t.state.updatedTabs;(0,h.default)(r,e)||t.setState({updatedTabs:N(N({},r),{},(0,u.default)({},e,a))})},t.handleChangeTab=function(e){var a=e.currentTarget.dataset.name;a&&t.setState({activeTab:a,subRoute:{}})},t.handleSaveChanges=function(e){return function(){var a=t.props.onOk,r=t["".concat(e,"FormRef")].current;r&&r.validate((function(){var n=r.getData();a(n),t.cancelUpdate(e)}))}},t.handleDiscardChanges=function(e){return function(){var a=t["".concat(e,"Ref")].current;a&&(a.resetData(),t.cancelUpdate(e))}},t.cancelUpdate=function(e){var a=N({},t.state.updatedTabs);delete a[e],t.setState({updatedTabs:a})},t.renderForm=function(e){var a=e.name,r=e.component,n=t.props.store,l=t.state.activeTab,o=r;if(!o)return null;var c="".concat(a,"Ref");t[c]||(t[c]=y.default.createRef());var s="".concat(a,"FormRef");return t[s]||(t[s]=y.default.createRef()),y.default.createElement("div",{key:a,className:(0,b.default)(D.default.form,(0,u.default)({},D.default.active,a===l))},y.default.createElement(o,{store:n,ref:t[c],formRef:t[s],formData:t.state.formData}))},t.state={formData:{},activeTab:(0,p.default)(t.tabs,"[0].name"),updatedTabs:{}},t.store=new T.default,t}return(0,s.default)(r,[{key:"getChildContext",value:function(){return{registerUpdate:this.registerUpdate}}}]),(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.store.fetchDetail({name:globals.user.username}).then((function(){var t=N({apiVersion:"iam.kubesphere.io/v1alpha2",kind:"User"},(0,v.default)((0,_.toJS)(e.store.detail._originData)));(0,m.default)(t,"metadata.resourceVersion",e.store.detail.resourceVersion),e.setState({formData:t})}))}},{key:"renderTabs",value:function(){var e=this;return y.default.createElement("ul",{className:D.default.tabs},this.tabs.map((function(a){var r=a.icon,n=void 0===r?"appcenter":r,l=a.title,o=a.name,c=e.state,s=c.activeTab,i=c.updatedTabs,f=o===s,d=f?"light":"dark";return y.default.createElement("li",{onClick:e.handleChangeTab,key:l,"data-name":o,className:(0,b.default)((0,u.default)({},D.default.active,f))},y.default.createElement(S.Tooltip,{placement:"bottomLeft",content:(0,h.default)(i,o)?e.updateTip:""},y.default.createElement("span",{className:D.default.tooltipTrigger},y.default.createElement(S.Icon,{name:n,size:16,type:d}),(0,h.default)(i,o)&&y.default.createElement("span",{className:D.default.tipIcon}))),y.default.createElement("p",null,t(l)))})))}},{key:"renderFormComponents",value:function(){var e=this.state,t=e.activeTab,a=e.updatedTabs;return y.default.createElement("div",{className:D.default.formWrapper},this.tabs.map(this.renderForm),y.default.createElement("div",{className:(0,b.default)(D.default.operations,(0,u.default)({},D.default.active,(0,h.default)(a,t)))},y.default.createElement(C.default,{className:D.default.confirm,onOk:this.handleSaveChanges(t),onCancel:this.handleDiscardChanges(t)})))}},{key:"renderContent",value:function(){return y.default.createElement("div",{className:D.default.content},y.default.createElement("div",{className:D.default.forms},this.renderTabs(),this.renderFormComponents()))}},{key:"renderFooter",value:function(){var e=this.state.subRoute,a=void 0===e?{}:e,r=a.onCancel,n=a.onSave;return y.default.createElement("div",{className:D.default.footer},r&&y.default.createElement(S.Button,{onClick:this.handlePrev},t("PREVIOUS")),n&&y.default.createElement(S.Button,{type:"control",onClick:this.handleSubFormSave},t("OK")),(0,E.default)(a)&&y.default.createElement(S.Button,{onClick:this.props.onCancel},t("CLOSE")))}},{key:"render",value:function(){var e=this.props,a=(e.detail,e.onOk,(0,o.default)(e,["detail","onOk"]));return y.default.createElement(O.default,(0,l.default)({bodyClassName:D.default.body,title:t("USER_SETTINGS"),icon:"wrench",width:1162,hideFooter:!0},a),y.default.createElement("div",{className:D.default.main},this.renderContent(),this.renderFooter()))}},{key:"updateTip",get:function(){return y.default.createElement("div",{className:D.default.tip},y.default.createElement("h6",null,t("CONTENT_NOT_SAVED_TIPS")),y.default.createElement("p",null,t("SAVE_EDIT_HINTS")))}},{key:"tabs",get:function(){return R.default}}]),r}(y.default.Component);a.default=I,I.propTypes={visible:g.default.bool,onOk:g.default.func,onCancel:g.default.func},I.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},I.childContextTypes={registerUpdate:g.default.func}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(2561)),l=r(a(2563)),o=[{icon:"paper",name:"basicInfo",title:"BASIC_INFORMATION",component:n.default},{icon:"ssh",name:"passwordSetting",title:"PASSWORD_SETTINGS",component:l.default}];t.default=o},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(25),p=n(r(185)),m=r(37),h=n(r(195)),v=n(r(2562));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).resetData=function(){t.setState({formData:t.getInitialData()})},t.handleFormChange=function(e,a){t.context.registerUpdate(t.name,{name:e,value:a})},t.state={formData:t.getInitialData()},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){e.formData!==this.props.formData&&this.setState({formData:this.getInitialData()})}},{key:"getInitialData",value:function(){return(0,p.default)(this.props.formData)}},{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement("div",{className:v.default.wrapper},i.default.createElement("div",{className:"h4"},t("BASIC_INFORMATION")),i.default.createElement(d.Form,{ref:e,data:this.state.formData,onChange:this.handleFormChange},i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("USERNAME")},i.default.createElement(d.Input,{name:"metadata.name",placeholder:"username",disabled:!0})),i.default.createElement(d.Form.Item,{label:t("EMAIL"),desc:t("USER_SETTING_EMAIL_DESC")},i.default.createElement(d.Input,{name:"spec.email",placeholder:"user@example.com"})),globals.config.supportLangs&&i.default.createElement(d.Form.Item,{label:t("LANGUAGE")},i.default.createElement(d.Select,{name:"spec.lang",options:this.languageOptions,defaultValue:(0,h.default)("lang")||(0,m.getBrowserLang)()}))))))}},{key:"name",get:function(){return"basicInfo"}},{key:"languageOptions",get:function(){return globals.config.showAllLangs?globals.config.supportLangs:globals.config.supportLangs.filter((function(e){return e.recommend}))}}]),r}(i.default.Component);a.default=y,y.contextTypes={registerUpdate:f.default.func}},function(e,t,a){e.exports={wrapper:"KH3XnMu-MyTWhxyHf4gKd",upload:"XPPHp2BX0rE0skRKK08bd"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(25),p=n(r(952)),m=r(58),h=n(r(2564));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=v(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).resetData=function(){n.setState({formData:n.getInitialData()})},n.handlePassswordChange=function(e){n.setState({password:e})},n.passwordValidator=function(e,a,r){if(!a)return r();a!==n.state.password&&r({message:t("PASSWORD_NOT_SAME_DESC"),field:e.field}),r()},n.handleFormChange=function(e,t){n.context.registerUpdate(n.name,{name:e,value:t})},n.state={password:"",formData:n.getInitialData()},n}return(0,o.default)(r,[{key:"getInitialData",value:function(){return{}}},{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement("div",{className:h.default.wrapper},i.default.createElement("div",{className:"h4"},t("PASSWORD_SETTINGS")),i.default.createElement(d.Form,{data:this.state.formData,ref:e,onChange:this.handleFormChange},i.default.createElement("input",{name:"password",className:"hidden-input",type:"password",disabled:!0}),i.default.createElement(d.Form.Item,{className:h.default.password,label:t("CURRENT_PASSWORD"),desc:t("ENTER_CURRENT_PASSWORD_DESC"),rules:[{required:!0,message:t("ENTER_CURRENT_PASSWORD_TIP")}]},i.default.createElement(p.default,{name:"currentPassword",placeholder:" ",autoComplete:"cur-password"})),i.default.createElement(d.Alert,{className:h.default.alert,type:"warning",message:t("PASSWORD_DESC")}),i.default.createElement(d.Form.Item,{className:h.default.password,label:t("NEW_PASSWORD"),rules:[{required:!0,message:t("PASSWORD_EMPTY_DESC")},{pattern:m.PATTERN_PASSWORD,message:t("PASSWORD_DESC")}]},i.default.createElement(p.default,{name:"password",placeholder:" ",autoComplete:"new-password",onChange:this.handlePassswordChange,tipClassName:h.default.dropdown,withStrength:!0})),i.default.createElement(d.Form.Item,{className:h.default.password,label:t("CONFIRM_PASSWORD"),rules:[{required:!0,message:t("CONFIRM_PASSWORD_TIP")},{validator:this.passwordValidator}]},i.default.createElement(p.default,{name:"rePassword",placeholder:" ",autoComplete:"new-password"}))))}},{key:"name",get:function(){return"passwordSetting"}}]),r}(i.default.Component);a.default=E,E.contextTypes={registerUpdate:f.default.func}},function(e,t,a){e.exports={wrapper:"_2f4Qwu-aMyuY2ayX60i3ow",alert:"-_vzO0gm8FRdolTnAgsKg",dropdown:"_1TOazrxPrE_VC7-rCUL3hs"}},function(e,t,a){e.exports={body:"_2uy1Nvc6heNC1CQwLvuQ2W",content:"_1lIeNHjQF9epWT-t_pShYu",forms:"_1EYYubFoXjSqfCjzgX9Q50",tabs:"_2VGusla4E1VhutBTSGrvSM",active:"_1MraCQa1kAyWnXL8dYc2-Y",tip:"_16cTW_hbIG4oYAeKmcdeA0",tooltipTrigger:"W04a-7w5uJhmQLBSzFoHC",tipIcon:"NaXnqKjzZHomE5MS--Al6",updateIcon:"_2uuOmNVwdkIagfgwWbkjW3",formWrapper:"_11NMns_UUFIN1rWN6bM5fc",operations:"_2kvFauDLN_uSqSa4uDFXj0",form:"_3ADJ1Bq3FvjzSuEDV1io3m",footer:"_1UfFR3uKyIYBgEQbDxFr8D"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(49)),u=l(r(50)),c=l(r(109)),s=l(r(21)),i=l(r(56)),f=l(r(16)),d=l(r(32)),p=r(25),m=l(r(274)),h=r(5),v=l(r(766)),E=l(r(2567)),y=l(r(2568)),b=l(r(2570)),g=l(r(1374)),_=l(r(2576)),S=l(r(1338)),O=l(r(1337)),C=r(58),T=l(r(733)),R=l(r(822)),D=n(r(2580)),k=l(r(2584));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={"volume.create":{on:function(e){var a=e.fromSnapshot,r=e.store,n=e.cluster,l=e.namespace,d=e.module,h=e.isFederated,E=e.extendformTemplate,y=e.success,b=(0,i.default)(e,["fromSnapshot","store","cluster","namespace","module","isFederated","extendformTemplate","success"]),_=C.MODULE_KIND_MAP[d],S=(0,s.default)({},_,P(P({},T.default.volumes({namespace:l})),E));h&&Object.keys(S).forEach((function(e){S[e]=T.default.federated({data:S[e],clusters:b.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var O=(0,c.default)(D.default);h&&O.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:g.default});var k,N=m.default.open(P({onOk:(k=(0,u.default)(o.default.mark((function e(a){var u,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,f.default)(a,_)){e.next=3;break}return e.abrupt("return");case 3:return(c={cluster:n,namespace:l}).namespace=c.namespace||(0,f.default)(u,"metadata.namespace"),e.next=7,r.create(u,c);case 7:m.default.close(N),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),y&&y(),R.default.delete("".concat(d,"_create_form"));case 11:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)}),module:d,cluster:n,namespace:l,name:_,title:t("CREATE_PERSISTENT_VOLUME_CLAIM"),formTemplate:S,isFederated:h,steps:a?D.APPLY_SNAPSHOT_FORM_STEPS:O,modal:v.default,store:r},b))}},"volume.clone":{on:function(e){var a,r=e.store,n=(0,i.default)(e,["store"]),l=m.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.cloneVolume(a);case 2:m.default.close(l),p.Notify.success({content:t("CREATE_SUCCESSFUL")});case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("CLONE_VOLUME"),modal:E.default,store:r},n))}},"volume.create.snapshot":{on:function(e){var a=e.store,r=e.detail,n=(0,i.default)(e,["store","detail"]),l=(0,f.default)(r,"annotations['volume.beta.kubernetes.io/storage-provisioner']","-"),c=[];a.snapshotType.items.forEach((function(e){e.driver===l&&c.push({label:e.metadata.name,value:e.metadata.name})}));var s,d=m.default.open(P({onOk:(s=(0,u.default)(o.default.mark((function e(r){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.createSnapshot(r);case 2:m.default.close(d),p.Notify.success({content:t("CREATE_SUCCESSFUL")});case 4:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)}),title:t("CREATE_SNAPSHOT"),modal:y.default,store:a,options:c},n))}},"create.snapshot":{on:function(e){var a,r=e.store,n=e.cluster,l=e.namespace,c=e.success,s=(0,i.default)(e,["store","cluster","namespace","success"]),f=m.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){var l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.namespace,u=(0,i.default)(a,["namespace"]),e.next=3,r.createSnapshot(P(P({},u),{},{cluster:n,namespace:l}));case 3:m.default.close(f),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),c&&c();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("CREATE_SNAPSHOT"),modal:y.default,store:r,cluster:n,namespace:l,volumeSelect:!0},s))}},"volume.expand":{on:function(e){var a,r=e.store,n=(0,i.default)(e,["store"]),l=m.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(r.detail,a);case 2:m.default.close(l),p.Notify.success({content:t("UPDATE_SUCCESSFUL")});case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:b.default,store:r},n))}},"volume.template.edit":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=e.module,l=e.isFederated,o=e.namespace,u=e.extendformTemplate,c=(0,i.default)(e,["store","detail","success","module","isFederated","namespace","extendformTemplate"]),p=C.MODULE_KIND_MAP[n],v=(0,s.default)({},p,P(P({},T.default.volumes({namespace:o})),u));l&&Object.keys(v).forEach((function(e){v[e]=T.default.federated({data:v[e],clusters:c.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var E=m.default.open(P(P({onOk:function(e){var n=(0,f.default)(e,"spec.template.spec.customMode",{});(0,d.default)(n)||delete e.spec.template.spec.customMode,t.update(a,e).then((function(){m.default.close(E),r&&r()}))},store:t,detail:(0,h.toJS)(a._originData),modal:_.default},c),{},{formTemplate:v,isFederated:l}))}},"volume.snapshot.yaml.edit":{on:function(e){var a,r=e.store,n=e.detail,l=e.success,c=e.namespace,s=e.cluster,f=(0,i.default)(e,["store","detail","success","namespace","cluster"]),d=m.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.update(P({namespace:c,cluster:s},r.detail),a);case 2:p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),m.default.close(d),l&&l();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:S.default,yaml:n},f))}},"volume.snapshotContent.baseInfo.edit":{on:function(e){var a,r=e.store,n=e.detail,l=e.cluster,c=e.namespace,s=e.success,f=(0,i.default)(e,["store","detail","cluster","namespace","success"]),d=m.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(P(P({},n),{},{cluster:l,namespace:c}),a);case 2:p.Notify.success({content:t("UPDATE_SUCCESSFUL")}),m.default.close(d),s&&s();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:n,modal:O.default},f))}},"snapshotClasses.create":{on:function(e){var a,r=e.store,n=e.module,l=e.name,f=e.detail,d=e.cluster,h=e.success,E=(0,i.default)(e,["store","module","name","detail","cluster","success"]),y=C.MODULE_KIND_MAP[n],b=(0,c.default)(k.default),g=(0,s.default)({},y,P({},T.default.volumesnapshotclass())),_=m.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a[y],e.next=3,r.create(n,{cluster:d});case 3:m.default.close(_),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),h&&h();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),module:n,name:l,store:r,detail:f,formTemplate:g,steps:b,modal:v.default,cluster:d},E))}}};a.default=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(58),p=r(25),m=n(r(274));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.onOk,o=e.title;return i.default.createElement(m.default.Form,{icon:"pen",width:691,title:o,onOk:l,onCancel:n,visible:a,isSubmitting:r},i.default.createElement(p.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:d.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("LONG_NAME_DESC")})}],desc:t("LONG_NAME_DESC")},i.default.createElement(p.Input,{name:"name",maxLength:253})))}}]),r}(i.default.Component);a.default=v,v.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},v.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(49)),s=n(r(21)),i=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(0)),E=n(r(1)),y=r(58),b=r(25),g=n(r(274)),_=n(r(763)),S=n(r(873)),O=n(r(874)),C=r(5),T=r(70),R=n(r(16)),D=n(r(24)),k=n(r(2569));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var w=(0,T.observer)((u=o=function(e){(0,p.default)(n,e);var a,r=I(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=r.call.apply(r,[this].concat(l))).volumeStore=new _.default,e.storageclass=new S.default,e.snapShotClassStore=new O.default,e.form=v.default.createRef(),e.testRef=v.default.createRef(),e.state={pagination:{page:0,total:0,limit:10},selectedVolume:"",volumeInfo:"",formData:{},snapShotClass:[],isLoading:!1,storageClassBan:!1,allowSnapshot:!0},e.fetchList=(0,i.default)(c.default.mark((function t(){var a,r,n=arguments;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.length>0&&void 0!==n[0]?n[0]:{},r=e.state.pagination,e.setState({isLoading:!0,pagination:P(P({},r),{},{page:r.page+1})},(function(){var t=e.state.pagination,r=t.page,n=t.limit,l=e.props,o=P(P({namespace:l.namespace,cluster:l.cluster},a),{},{limit:n*r,page:1,sortBy:"createTime"});e.volumeStore.fetchList(o).then((function(){var t=e.volumeStore.list.total;e.setState({pagination:P(P({},e.state.pagination),{},{total:t}),isLoading:!1})}))}));case 3:case"end":return t.stop()}}),t)}))),e.volumeChange=function(t){e.setState({selectedVolume:t},(function(){e.saveVolumeInfo()}))},e.volumeValidator=function(a,r,n){var l=e.state,o=l.allowSnapshot,u=l.volumeInfo;!o&&(0,D.default)(u)&&n({message:t("STORAGECLASS_NOT_ALLOW_CREATE_SNAPSHOT"),field:a.field}),n()},e.optionRenderer=function(a){return v.default.createElement("div",{className:k.default.option},a.isFedManaged?v.default.createElement("img",{className:k.default.indicator,src:"/assets/cluster.svg"}):v.default.createElement(b.Icon,{type:"light",name:"storage"}),a.label,"(",a.namespace,")",a.isFedManaged&&v.default.createElement(b.Tooltip,{content:e.props.tipMessage||t("FEDPROJECT_RESOURCE_TIP")},v.default.createElement(b.Icon,{className:k.default.tip,name:"question"})))},e.handleOk=function(){var t,a=e.props.onOk,r=e.state,n=r.allowSnapshot,l=r.selectedVolume;e.form.current.validator((function(){if(n){var r=e.form.current.props.data;""!==l&&(t=(0,C.toJS)(e.volumeStore.list.data).filter((function(e){return e.name===l}))[0].namespace),a(P(P({},r),{},{namespace:t}))}}))},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.volumeSelect&&(this.fetchList(),this.getSnapShotClassList())}},{key:"getSnapShotClassList",value:function(){var e=this.props,t={namespace:e.namespace,cluster:e.cluster,limit:-1};this.snapShotClassStore.fetchList(t)}},{key:"saveVolumeInfo",value:function(){var e=this,t=this.state.selectedVolume;if(t){var a=(0,C.toJS)(this.volumeStore.list.data).filter((function(e){return e.name===t}))[0];a&&this.setState({volumeInfo:a},(function(){e.getSnapShotClass(),e.getStorageClassInfo()}))}}},{key:"getSnapShotClass",value:function(){var e=(0,C.toJS)(this.snapShotClassStore.list.data),t=this.state.volumeInfo,a=(0,R.default)(t,"annotations['volume.beta.kubernetes.io/storage-provisioner']","-"),r=[];e.forEach((function(e){e.driver===a&&r.push({label:e.name,value:e.name})})),this.setState({snapShotClass:r})}},{key:"getStorageClassInfo",value:(a=(0,i.default)(c.default.mark((function e(){var t,a,r,n,l,o,u=this;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.cluster,r=t.namespace,n=this.state.volumeInfo,l=n.storageClassName,e.prev=3,e.next=6,this.storageclass.fetchDetail({cluster:a,namespace:r,name:l});case 6:o=(0,R.default)((0,C.toJS)(this.storageclass).detail.annotations,"storageclass.kubesphere.io/allow-snapshot","false"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),o="false";case 12:this.setState({allowSnapshot:JSON.parse(o)},(function(){u.testRef.current.validate({sourceName:u.state.selectedVolume})}));case 13:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return a.apply(this,arguments)})},{key:"renderVolumeSelect",value:function(){var e=this.state,a=e.pagination,r=e.isLoading;return v.default.createElement(b.Form.Item,{ref:this.testRef,label:t("PERSISTENT_VOLUME_CLAIM"),rules:[{required:!0,message:t("PVC_NOT_SELECT")},{validator:this.volumeValidator}],desc:t("SELECT_A_VOLUME_DESC")},v.default.createElement(b.Select,{searchable:!0,name:"sourceName",className:k.default.input,options:this.volumeList,pagination:a,onFetch:this.fetchList,onChange:this.volumeChange,isLoading:r,optionRenderer:this.optionRenderer,clearable:!0}))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.title,o=e.options,u=e.volumeSelect,c=this.state,s=c.snapShotClass,i=c.formData;return v.default.createElement(g.default,{icon:"pen",width:600,title:l,onOk:this.handleOk,onCancel:n,visible:a,isSubmitting:r},v.default.createElement(b.Form,{data:i,ref:this.form},u&&this.renderVolumeSelect(),v.default.createElement(b.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:y.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("LONG_NAME_DESC")})}],desc:t("LONG_NAME_DESC")},v.default.createElement(b.Input,{name:"name",maxLength:253,className:k.default.input})),v.default.createElement(b.Form.Item,{label:t("VOLUME_SNAPSHOT_CLASS"),rules:[{required:!0,message:t("SNAPSHOT_EMPTY_TIP")}],desc:t("SELECT_VOLUME_SNAPSHOT_CLASS_DESC")},v.default.createElement(b.Select,{name:"type",options:u?s:o,placeholder:" ",className:k.default.input}))))}},{key:"volumeList",get:function(){return(0,C.toJS)(this.volumeStore.list.data).map((function(e){return{value:e.name,label:e.name,disabled:!e.inUse||e.isFedManaged,isFedManaged:e.isFedManaged,namespace:e.namespace}}))}}]),n}(v.default.Component),o.propTypes={detail:E.default.object,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool,snapshotOption:E.default.array,volumeSelect:E.default.bool},o.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1,snapshotOption:[],volumeSelect:!1},l=u))||l;a.default=w},function(e,t,a){e.exports={input:"zvTsfyLRc9lqKCZ7OH12O",option:"_3FKGkuuhvdnSIGOarex_36",tip:"_3L7C3cYavlloj_j_uwkS9I"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(12)),c=l(r(13)),s=l(r(19)),i=l(r(20)),f=l(r(18)),d=n(r(0)),p=l(r(930)),m=l(r(1)),h=r(25),v=l(r(274)),E=l(r(1069)),y=l(r(2571));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,s.default)(r,e);var a=_(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"getMarks",value:function(){var e=this.props.max;return(0,p.default)(6).reduce((function(t,a){var r=e*a/5,n=0===r?"0":"".concat(Math.floor(r),"Gi");return g(g({},t),{},(0,o.default)({},r,n))}),{})}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.onOk,l=e.shouldAlertVisible,o=e.okText,u=e.onCancel,c=e.detail;return d.default.createElement(v.default.Form,{title:t(a),visible:r,icon:"scaling",data:c,okText:t(o),onCancel:u,onOk:n},l&&this.renderAlert(),this.renderInput())}},{key:"renderAlert",value:function(){return d.default.createElement(h.Alert,{className:y.default.alert,type:"warning",title:t("EXPAND_VOLUME"),icon:"exclamation",message:t("VOLUME_EXPAND_TIPS")})}},{key:"renderInput",value:function(){var e=this.props,a=e.max,r=e.min,n=e.unit,l=this.getMarks();return d.default.createElement(h.Form.Item,{label:t("VOLUME_CAPACITY")},d.default.createElement(E.default,{name:"spec.resources.requests.storage",max:a,min:r,marks:l,unit:n,withInput:!0,onChange:this.handleChange}))}}]),r}(d.Component);a.default=S,S.propTypes={shouldAlertVisible:m.default.bool,value:m.default.oneOfType([m.default.string,m.default.number]),detail:m.default.object,max:m.default.number,min:m.default.number,visible:m.default.bool,title:m.default.string,okText:m.default.string},S.defaultProps={detail:{},min:0,max:1024,unit:"Gi",title:"EXPAND_VOLUME",okText:"OK",shouldAlertVisible:!1}},function(e,t,a){e.exports={alert:"_27aGi1qudoX_elTsZw4M-y"}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(21)),u=l(r(109)),c=l(r(12)),s=l(r(13)),i=l(r(19)),f=l(r(20)),d=l(r(18)),p=n(r(0)),m=l(r(16)),h=l(r(73)),v=l(r(32)),E=l(r(185)),y=l(r(782)),b=l(r(3)),g=l(r(2573)),_=l(r(938)),S=l(r(2575));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={formData:e.getFormData(),isEdit:!1},e.showEdit=function(){e.setState({isEdit:!0}),e.props.onSelect(e.props.cluster)},e.hideEdit=function(){e.setState({isEdit:!1})},e.handleSubmit=function(t){var a=e.props,r=a.cluster,n=a.formTemplate,l=[];Object.keys(t.spec).forEach((function(e){var a="spec.".concat(e),r=(0,m.default)(t,a);(0,m.default)(n,"spec.template.".concat(a))!==r&&l.push({path:"/".concat(a.replace(/\./g,"/")),value:r})}));var o=(0,m.default)(n,"spec.overrides",[]),c=o.find((function(e){return e.clusterName===r}));c?c.clusterOverrides=(0,y.default)([].concat(l,(0,u.default)(c.clusterOverrides||[])),"path"):o.push({clusterName:r,clusterOverrides:l}),(0,h.default)(n,"spec.overrides",o),e.setState({formData:e.getFormData(),isEdit:!1})},e}return(0,s.default)(r,[{key:"getFormData",value:function(){var e=this.props,t=e.cluster,a=e.formTemplate,r=(0,m.default)(a,"spec.overrides",[]).find((function(e){return e.clusterName===t}))||{},n={spec:(0,E.default)((0,m.default)(a,"spec.template.spec"))};return r&&!(0,v.default)(r.clusterOverrides)&&r.clusterOverrides.forEach((function(e){if(e.path.startsWith("/spec")){var t=e.path.slice(1).replace(/\//g,".");(0,h.default)(n,t,e.value)}})),n}},{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.selected,l=e.editModalTitle,u=e.title,c=e.onChange,s=this.state,i=s.formData,f=s.isEdit;return p.default.createElement("div",{className:(0,b.default)(S.default.wrapper,(0,o.default)({},S.default.selected,n))},p.default.createElement(g.default,{title:"".concat(t("Storage Class"),": ").concat((0,m.default)(i,"spec.storageClassName")),formData:i,isEdit:f,showEdit:this.showEdit,hideEdit:this.hideEdit,onOk:this.handleSubmit,onChange:c},p.default.createElement(_.default,{cluster:a,namespace:r,editModalTitle:l,tabTitle:u})))}}]),r}(p.Component);a.default=C},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(12)),u=l(r(13)),c=l(r(19)),s=l(r(20)),i=l(r(18)),f=n(r(0)),d=r(25),p=l(r(799)),m=l(r(2574));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=h(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).formRef=f.default.createRef(),e.handleSubmit=function(){var t=e.props,a=t.onOk,r=t.onChange,n=e.formRef.current;n&&n.validate((function(){a(n.getData()),r&&r()}))},e.handleCancel=function(){e.props.hideEdit()},e.handleOpen=function(){e.props.showEdit()},e}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this.props,t=e.formData,a=e.children;return f.default.createElement("div",{className:m.default.form},f.default.createElement(d.Form,{ref:this.formRef,type:"inner",data:t},f.default.createElement("div",{className:m.default.formContent},a)),f.default.createElement(p.default,{className:m.default.confirm,onOk:this.handleSubmit,onCancel:this.handleCancel}))}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.selected,n=e.isEdit;return f.default.createElement(d.Dropdown,{visible:n,placement:"bottom",closeAfterClick:!1,onOpen:this.handleOpen,content:this.renderContent(),modifiers:this.modifiers,always:n},f.default.createElement("div",null,a,r&&f.default.createElement("span",{className:m.default.modify},f.default.createElement("span",null,t("EDIT")),f.default.createElement(d.Icon,{type:"light",size:20,name:"chevron-down"}))))}},{key:"modifiers",get:function(){return{computeStyle:{gpuAcceleration:!1}}}}]),r}(f.Component);a.default=v},function(e,t,a){e.exports={form:"msLppgLb31XNV2hAROzCF",formContent:"_2xXYl-4VecOZE86XX4THRo",modify:"vDTqlA_zC32lqD74tLyOO",confirm:"_32-qEsVwZwtGn6Ascvmi8G"}},function(e,t,a){e.exports={wrapper:"TPiC3uwJ6U_CLbzP1ZfsI",selected:"_2UTVKEKjjbtfJVJTiP3sww"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),o=r(a(12)),u=r(a(13)),c=r(a(19)),s=r(a(20)),i=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(1011)),m=r(a(2577));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.module,a=(0,l.default)(e,["module"]);return f.default.createElement(p.default,(0,n.default)({title:"EDIT_SETTINGS",icon:"storage",module:t,forms:this.forms},a))}},{key:"forms",get:function(){return m.default[this.props.module]}}]),a}(f.default.Component);t.default=v,v.propTypes={module:d.default.string},v.defaultProps={module:"deployments"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(37),l=r(a(1374)),o=r(a(2578)),u={deployments:[{icon:"storage",name:"volumeSettings",title:"STORAGE_SETTINGS",component:o.default},{icon:"blue-green-deployment",name:"diffSettings",title:"CLUSTER_DIFF",component:l.default}],statefulsets:[{icon:"storage",name:"volumeSettings",title:"STORAGE_SETTINGS",component:o.default},{icon:"blue-green-deployment",name:"diffSettings",title:"CLUSTER_DIFF",component:(0,n.withProps)(l.default,{withService:!0})}],daemonsets:[{icon:"storage",name:"volumeSettings",title:"STORAGE_SETTINGS",component:o.default},{icon:"blue-green-deployment",name:"diffSettings",title:"CLUSTER_DIFF",component:(0,n.withProps)(l.default,{withService:!0})}]};t.default=u},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(16)),p=r(25),m=n(r(636)),h=n(r(938)),v=n(r(1375)),E=n(r(1376));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=[{icon:"snapshot",value:!0,get label(){return t("CREATE_VOLUME_BY_SNAPSHOT")},get description(){return t("SELECT_SNAPSHOT_TO_CREATE_VOLUME")}},{icon:"database",value:!1,get label(){return t("CREATE_VOLUME_BY_STORAGE_CLASS")},get description(){return t("SELECT_STORAGE_CLASS_CREATE_VOLUME")}}],g=function(e){(0,c.default)(r,e);var a=y(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.isFederated,n=e.cluster,o=e.formProps,u=this.state.fromSnapshot;return f.default.createElement(p.Form,(0,l.default)({data:this.fedFormTemplate,ref:a},o),!r&&f.default.createElement(p.Form.Item,{label:t("CREATION_METHOD")},f.default.createElement(m.default,{value:u,options:b,onChange:this.handeChange})),u?f.default.createElement(v.default,{namespace:(0,d.default)(this.formTemplate,"metadata.namespace"),cluster:n}):f.default.createElement(h.default,{cluster:n}))}}]),r}(E.default);a.default=g},function(e,t,a){e.exports={snapshot:"Q_j-P1zbmXBVWMfs9s-An",selected:"_3rYCc2IQL6MTwzE1TSkA9J",snapshotContainer:"_2aQDxEL3MZKJw-6JxlVL2L",snapshots:"_3sCkMrQKrGRc8hr3259-Ra"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.APPLY_SNAPSHOT_FORM_STEPS=t.default=void 0;var n=r(a(852)),l=r(a(1376)),o=r(a(2581)),u=r(a(2583)),c=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:l.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:o.default,required:!0}];t.default=c;var s=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:u.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:o.default,required:!0}];t.APPLY_SNAPSHOT_FORM_STEPS=s},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=r(58),p=r(25),m=n(r(2582));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.store,r=e.formRef;return i.default.createElement(p.Form,{data:this.fedFormTemplate,ref:r},i.default.createElement(p.Form.Group,{label:t("ADD_METADATA"),desc:t("VOLUME_ADD_METADATA_DESC"),keepDataWhenUnCheck:!0,checkable:!0},i.default.createElement(m.default,{store:a,cluster:this.cluster,namespace:this.namespace,formTemplate:this.fedFormTemplate})))}},{key:"cluster",get:function(){return this.props.cluster}},{key:"namespace",get:function(){return(0,f.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,d.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,f.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(i.default.Component);a.default=v},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=r(25),d=n(r(786));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Form.Item,{label:t("LABEL_PL")},i.default.createElement(d.default,{name:"metadata.labels",addText:t("ADD")})),i.default.createElement(f.Form.Item,{label:t("ANNOTATION_PL")},i.default.createElement(d.default,{name:"metadata.annotations",addText:t("ADD")})))}}]),r}(i.default.Component);a.default=m},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=r(58),p=r(25),m=n(r(1106));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=["ReadWriteOnce","ReadOnlyMany","ReadWriteMany"],E=function(e){(0,u.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement(p.Form,{data:this.formTemplate,ref:e},i.default.createElement(p.Form.Item,{label:t("ACCESS_MODE_TCAP"),rules:[{required:!0}]},i.default.createElement(m.default,{name:"spec.accessModes[0]",defaultValue:(0,f.default)(v,"[0]",""),supportedAccessModes:v})))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,d.MODULE_KIND_MAP[a],t)}}]),r}(i.default.Component);a.default=E},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1346)),l=r(a(2585)),o=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"SNAPSHOT_CLASS_SETTINGS",component:l.default,required:!0}];t.default=o},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(281)),m=r(25),h=r(58),v=n(r(873)),E=r(5);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=(0,r(70).observer)(l=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).storageClass=new v.default,e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.cluster;this.storageClass.fetchList({cluster:e,limit:-1})}},{key:"render",value:function(){var e=this.props.formRef;return f.default.createElement("div",null,f.default.createElement(m.Form,{data:this.formTemplate,ref:e},f.default.createElement(m.Columns,null,f.default.createElement(m.Column,null,f.default.createElement(m.Form.Item,{label:t("PROVISIONER"),desc:t("SNAPSHOT_CLASS_PROVISIONER_DESC"),rules:[{required:!0,message:t("SNAPSHOT_CLASS_PROVISIONER_EMPTY_DESC")}]},f.default.createElement(m.Select,{name:"driver",options:this.provisionerOption}))),f.default.createElement(m.Column,null,f.default.createElement(m.Form.Item,{label:t("DELETION_POLICY")},f.default.createElement(m.Select,{name:"deletionPolicy",defaultValue:"Delete",options:this.options}))))))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,h.MODULE_KIND_MAP[a],t)}},{key:"options",get:function(){return[{label:"Delete",value:"Delete"},{label:"Retain",value:"Retain"}]}},{key:"provisionerOption",get:function(){var e=(0,E.toJS)(this.storageClass.list.data).map((function(e){return e.provisioner}));return(0,p.default)(e).map((function(e){return{label:e,value:e}}))}}]),r}(f.default.Component))||l;a.default=b},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(109)),c=n(r(21)),s=n(r(56)),i=n(r(16)),f=n(r(32)),d=n(r(190)),p=r(5),m=r(37),h=r(25),v=n(r(274)),E=n(r(766)),y=n(r(2587)),b=n(r(2589)),g=n(r(2590)),_=n(r(2592)),S=n(r(2594)),O=n(r(1065)),C=n(r(2598)),T=r(58),R=n(r(733)),D=n(r(822)),k=n(r(2600)),N=n(r(2607)),P=n(r(2608)),I=n(r(2609)),w=n(r(2610)),M=n(r(926)),A=n(r(748));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L={deployments:k.default,statefulsets:N.default,daemonsets:P.default,jobs:I.default,cronjobs:w.default},F={"workload.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,y=e.module,b=e.success,g=e.isFederated,_=e.renderScheduleTab,S=void 0!==_&&_,C=e.supportGpuSelect,k=void 0!==C&&C,N=(0,s.default)(e,["store","cluster","namespace","module","success","isFederated","renderScheduleTab","supportGpuSelect"]),P=T.MODULE_KIND_MAP[y],I=(0,c.default)({},P,R.default[y]({namespace:n})),w={};"statefulsets"===y&&(I.Service=R.default.services({namespace:n,selector:I[P].metadata.labels})),g&&(Object.keys(I).forEach((function(e){I[e]=R.default.federated({data:I[e],clusters:N.projectDetail.clusters.map((function(e){return e.name})),kind:e}),w=R.default.deploymentsSchedule({data:I[e],includeClusters:N.projectDetail.clusters.map((function(e){return e.name}))})})),a.setScheduleTemplate(w));var M=(0,u.default)(L[y]);g&&M.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:(0,m.withProps)(O.default,{withService:"statefulsets"===y})}),S&&a.ifRenderScheduleTab(S);var A=v.default.open(x({onOk:function(e){g&&("deployments"===y?(0,m.multiCluster_overrides_Dot)((0,i.default)(e,"Deployment.spec.overrides",[])):"statefulsets"===y&&(0,m.multiCluster_overrides_Dot)((0,i.default)(e,"StatefulSet.spec.overrides",[])));var u=e=(0,d.default)(e,(0,T.OMIT_TOTAL_REPLICAS)(P));if(u){var c=(0,i.default)(u,"spec.template.spec.customMode",{});(0,f.default)(c)||delete u.spec.template.spec.customMode,P&&1===Object.keys(e).length&&e[P]&&(u=e[P]),a.create(u,{cluster:r,namespace:n}).then((0,o.default)(l.default.mark((function e(){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isScheduleDeployment||!S){e.next=7;break}return o=(0,p.toJS)(a.scheduleTemplate),e.next=5,a.scheduleCreate(o,{cluster:r,namespace:n});case 5:return e.next=7,a.switchSchedule(!1);case 7:v.default.close(A),h.Notify.success({content:t("CREATE_SUCCESSFUL")}),b&&b(),D.default.delete("".concat(y,"_create_form"));case 11:case"end":return e.stop()}}),e)}))))}},onCancel:function(){a.isScheduleDeployment&&S&&a.switchSchedule(!1)},steps:M,module:y,cluster:r,namespace:n,name:P,isFederated:g,formTemplate:I,modal:E.default,store:a,supportGpuSelect:k},N))}},"workload.redeploy":{on:function(e){var a=e.store,r=e.detail,n=e.module,l=(e.success,(0,s.default)(e,["store","detail","module","success"])),o=T.MODULE_KIND_MAP[n],u=v.default.open(x({onOk:function(){a.patch(r,{spec:{template:{metadata:{annotations:{"kubesphere.io/restartedAt":new Date}}}}}).then((function(){v.default.close(u),h.Notify.success({content:t("RECREATE_SUCCESS_DESC")})}))},detail:r,type:o,modal:y.default,store:a},l))}},"workload.revision.rollback":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=(0,s.default)(e,["store","detail","success"]),l=v.default.open(x({onOk:function(e){t.rollBack(x(x({},a),{},{module:t.module}),e).then((function(){v.default.close(l),r&&r()}))},detail:a,modal:b.default,store:t},n))}},"workload.hpa.edit":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=(0,s.default)(e,["store","detail","success"]),u=new M.default,c=v.default.open(x({onOk:function(e,n){n?u.patch(a,e).then((function(){v.default.close(c),r&&r()})):u.create(e,a).then((0,o.default)(l.default.mark((function n(){return l.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v.default.close(c),n.next=3,t.patch(a,{metadata:{annotations:{"kubesphere.io/relatedHPA":(0,i.default)(e,"metadata.name",a.name)}}});case 3:r&&r();case 4:case"end":return n.stop()}}),n)}))))},detail:a,store:u,modal:g.default},n))}},"workload.template.edit":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=e.supportGpuSelect,l=void 0!==n&&n,o=(0,s.default)(e,["store","detail","success","supportGpuSelect"]),u=v.default.open(x({onOk:function(e){var n=(0,i.default)(e,"spec.template.spec.customMode",{});(0,f.default)(n)||delete e.spec.template.spec.customMode,t.update(a,e).then((function(){v.default.close(u),r&&r()}))},store:t,module:t.module,detail:(0,p.toJS)(a._originData),modal:_.default,supportGpuSelect:l,hideVolumeSetting:"statefulsets"===t.module},o))}},"workload.service.edit":{on:function(e){e.store;var t=e.detail,a=e.success,r=(0,s.default)(e,["store","detail","success"]),n=new A.default,l={type:"Headless(Selector)",name:(0,i.default)(t,"_originData.spec.serviceName",""),namespace:t.namespace,cluster:t.cluster},o=v.default.open(x({onOk:function(e){n.update(l,e).then((function(){v.default.close(o),a&&a()}))},detail:l,store:n,modal:S.default},r))}},"workload.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,s.default)(e,["store","detail","success"]),o=v.default.open(x({onOk:function(){v.default.close(o),h.Notify.success({content:t("DELETE_SUCCESSFUL")}),n&&n()},store:a,modal:C.default,resource:r},l))}},"workload.batch.delete":{on:function(e){var a=e.store,r=e.success,n=e.rowKey,l=void 0===n?"name":n,o=(0,s.default)(e,["store","success","rowKey"]),u=a.list,c=u.data,i=u.selectedRowKeys,f=c.filter((function(e){return i.includes(e[l])})),d=v.default.open(x({onOk:function(){v.default.close(d),h.Notify.success({content:t("DELETE_SUCCESSFUL")}),r&&r()},modal:C.default,resource:f,store:a},o))}}};a.default=F},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=r(25),h=n(r(274)),v=n(r(2588));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,s.default)(r,e);var a=E(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.type,n=(0,o.default)(e,["detail","type"]);return d.default.createElement(h.default,(0,l.default)({width:520,hideHeader:!0},n),d.default.createElement("div",{className:v.default.wrapper},d.default.createElement(m.Icon,{name:"question",size:40}),d.default.createElement("div",{className:v.default.text},d.default.createElement("div",null,t("RECREATE")),d.default.createElement("p",null,t("RECREATE_CONFIRM_DESC",{resource:a.name,type:t(r.toUpperCase())})))))}}]),r}(d.default.Component);a.default=y,y.propTypes={detail:p.default.object,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func,isSubmitting:p.default.bool},y.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,t,a){e.exports={wrapper:"_3gb5XWpq8vzH4mrGry7uxR",text:"_1YDX9cVd-P4aUdI_eBcLhl"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(21)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(5),v=r(70),E=n(r(1)),y=n(r(294)),b=n(r(16)),g=r(280),_=r(25),S=n(r(274)),O=n(r(1377));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var D=(0,v.observer)((u=o=function(e){(0,f.default)(r,e);var a=R(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.revisionStore.fetchList(e)},t.getFormData=function(){return{name:t.props.detail.name,currentRevision:"#".concat(t.curRevision)}},t.getRevisionOps=function(){return(0,y.default)(t.revisions,(function(e){return parseInt(e.revision,10)})).map((function(e){var t=e.revision;return{label:"#".concat(t),value:Number(t)}})).filter((function(e){return e.value!==t.curRevision}))},t.handleOk=function(){var e=t.props,a=e.detail,r=e.store,n=e.onOk;if(t.form&&t.form.current){var l=t.form.current;l&&l.validate((function(){var e,o=l.getData(),u=t.revisions.find((function(e){return Number(e.revision)===o.revision}));e="deployments"===r.module?[{op:"replace",path:"/spec/template",value:(0,h.toJS)((0,b.default)(u,"spec.template"))},{op:"replace",path:"/metadata/annotations",value:a.annotations}]:{spec:{template:T({$patch:"replace"},(0,h.toJS)((0,b.default)(u,"spec.template")))}},n(e)}))}},t.revisionStore=new O.default(e.store.module),t.form=m.default.createRef(),t}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.props.visible&&this.fetchData(this.props.detail)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=this.getFormData();return m.default.createElement(S.default.Form,{formRef:this.form,data:l,width:691,title:t("ROLL_BACK"),icon:"timed-task",onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},m.default.createElement(_.Form.Item,{label:t("RESOURCE_NAME")},m.default.createElement(_.Input,{name:"name",disabled:!0})),m.default.createElement(_.Form.Item,{label:t("CURRENT_REVISION_RECORD")},m.default.createElement(_.Input,{name:"currentRevision",disabled:!0})),m.default.createElement(_.Form.Item,{label:t("TARGET_REVISION_RECORD"),rules:[{required:!0,message:t("TARGET_REVISION_EMPTY_DESC")}]},m.default.createElement(_.Select,{name:"revision",placeholder:" ",options:this.getRevisionOps()})))}},{key:"revisions",get:function(){var e=this.revisionStore.list,t=e.data;return e.isLoading?[]:t}},{key:"curRevision",get:function(){var e=this.props,t=e.store,a=e.detail;return(0,g.getCurrentRevision)(a,this.revisions,t.module)}}]),r}(m.default.Component),o.propTypes={visible:E.default.bool,detail:E.default.object,onOk:E.default.func,onCancel:E.default.func},o.defaultProps={visible:!1,detail:{},onOk:function(){},onCancel:function(){}},l=u))||l;a.default=D},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o,u,c=n(r(12)),s=n(r(13)),i=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(5),h=r(70),v=n(r(1)),E=n(r(73)),y=n(r(110)),b=r(25),g=n(r(274)),_=n(r(740)),S=n(r(2591));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,h.observer)((u=o=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchData=function(e){var a=e.detail,r=a.namespace,n=a.cluster,l=a.annotations,o={name:(void 0===l?{}:l)["kubesphere.io/relatedHPA"]||e.detail.name,cluster:n,namespace:r};t.setState({loading:!0},(function(){t.store.checkName(o).then((function(e){t.isEdit=e.exist,e.exist?t.store.fetchDetail(o).then((function(){t.setState({loading:!1,formData:t.getFormData()})})):t.setState({loading:!1,formData:t.getFormData()})}))}))},t.getFormData=function(){var e=t.props.detail,a=e.name,r=e.namespace,n=e.uid,l=e.kind,o=(0,m.toJS)(t.store.detail),u=o.cpuCurrentUtilization,c=o.cpuTargetUtilization,s=o.memoryCurrentValue,i=o.memoryTargetValue;return(0,y.default)({},o._originData,{metadata:{name:a,namespace:r,annotations:{cpuCurrentUtilization:u,cpuTargetUtilization:c,memoryCurrentValue:s,memoryTargetValue:i},ownerReferences:[{apiVersion:"apps/v1",blockOwnerDeletion:!0,controller:!0,kind:l,name:a,uid:n}]},spec:{scaleTargetRef:{apiVersion:"apps/v1",kind:"Deployment",name:a}}})},t.handleOk=function(){var e=t.form.current;e&&e.validate((function(){var a=e.getData();t.isEdit&&(0,E.default)(a,"metadata.resourceVersion",null),t.props.onOk(a,t.isEdit)}))},t.form=p.default.createRef(),t.state={loading:!0,formData:void 0},t.store=e.store,t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(this.props)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.store.isSubmitting,l=this.state,o=l.formData,u=l.loading;return p.default.createElement(g.default,{width:691,title:t("AUTOSCALING"),icon:"firewall",onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},p.default.createElement(b.Loading,{spinning:u},p.default.createElement(b.Form,{data:o,ref:this.form},p.default.createElement(b.Alert,{className:S.default.alert,type:"info",message:t("CONFIGURE_AUTOSCALING_DESC")}),p.default.createElement(b.Form.Item,{label:t("RESOURCE_NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")}]},p.default.createElement(b.Input,{name:"metadata.name",disabled:!0})),p.default.createElement(b.Form.Item,{label:t("TARGET_CPU_USAGE_UNIT"),desc:t("TARGET_CPU_USAGE_DESC")},p.default.createElement(_.default,{name:"metadata.annotations.cpuTargetUtilization",interger:!0,min:0,defaultValue:"",onChange:this.handleCPUChange})),p.default.createElement(b.Form.Item,{label:t("TARGET_MEMORY_USAGE_UNIT"),desc:t("TARGET_MEMORY_USAGE_DESC")},p.default.createElement(_.default,{name:"metadata.annotations.memoryTargetValue",interger:!0,unit:"Mi",min:0,defaultValue:"",onChange:this.handleMemoryChange})),p.default.createElement(b.Form.Item,{label:t("MINIMUM_REPLICAS"),desc:t("MINIMUM_REPLICAS_DESC")},p.default.createElement(_.default,{name:"spec.minReplicas",min:1,integer:!0,defaultValue:1})),p.default.createElement(b.Form.Item,{label:t("MAXIMUM_REPLICAS"),desc:t("MAXIMUM_REPLICAS_DESC")},p.default.createElement(_.default,{name:"spec.maxReplicas",min:1,integer:!0,defaultValue:1})))))}}]),r}(p.default.Component),o.propTypes={visible:v.default.bool,store:v.default.object,detail:v.default.object,onOk:v.default.func,onCancel:v.default.func},o.defaultProps={visible:!1,store:{},detail:{},onOk:function(){},onCancel:function(){}},l=u))||l;a.default=C},function(e,t,a){e.exports={alert:"_3edXUM4aRr_6Nn2mRSBgoq"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),l=r(a(56)),o=r(a(12)),u=r(a(13)),c=r(a(19)),s=r(a(20)),i=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(1011)),m=r(a(2593));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.module,a=(0,l.default)(e,["module"]);return f.default.createElement(p.default,(0,n.default)({title:"EDIT_SETTINGS",icon:"storage",module:t,forms:this.forms},a))}},{key:"forms",get:function(){return m.default[this.props.module]}}]),a}(f.default.Component);t.default=v,v.propTypes={module:d.default.string},v.defaultProps={module:"deployments"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1295)),l=r(a(1296)),o=r(a(1297)),u=r(a(1298)),c={deployments:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:n.default},{icon:"container",name:"podTemplate",title:"CONTAINER_PL",component:l.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:o.default},{icon:"group",name:"deploymentMode",title:"POD_SCHEDULING_RULES",component:u.default}],statefulsets:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:n.default},{icon:"container",name:"podTemplate",title:"CONTAINER_PL",component:l.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:o.default}],daemonsets:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:n.default},{icon:"container",name:"podTemplate",title:"POD_PL",component:l.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:o.default}]};t.default=c},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(5),p=n(r(73)),m=r(58),h=n(r(748)),v=r(25),E=n(r(274)),y=n(r(2595));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=b(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.props.onOk,a=t.formRef.current;a&&a.validate((function(){var r=a.getData();(0,p.default)(r,"metadata.resourceVersion",t.store.detail.resourceVersion),e(r)}))},t.handleCancel=function(){(0,t.props.onCancel)()},t.formRef=i.default.createRef(),t.state={formTemplate:{}},t.store=e.store||new h.default,t.fetchData(e.detail),t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.detail;a&&a!==e.visible&&this.fetchData(r)}},{key:"fetchData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.name&&t.namespace&&this.store.fetchDetail(t).then((function(){e.setState({formTemplate:(0,d.toJS)(e.store.detail._originData)})}))}},{key:"renderForm",value:function(){return i.default.createElement(y.default,{formRef:this.formRef,formTemplate:this.state.formTemplate})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.detail;return i.default.createElement(E.default,{width:1162,title:t("EDIT_SERVICE"),onOk:n.type!==m.SERVICE_TYPES.Unknown?this.handleOk:null,onCancel:this.handleCancel,okText:t("OK"),visible:a,isSubmitting:r},i.default.createElement(v.Loading,{spinning:this.store.isLoading},this.renderForm()))}}]),r}(i.default.Component);a.default=g,g.propTypes={visible:f.default.bool,detail:f.default.object,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},g.defaultProps={visible:!1,detail:{},onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(16)),d=n(r(1077)),p=r(25),m=n(r(1023)),h=n(r(636)),v=n(r(2597));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderName",value:function(){return i.default.createElement(p.Form.Item,{label:t("NAME")},i.default.createElement(p.Input,{name:"metadata.name",disabled:!0}))}},{key:"renderSelectorLabels",value:function(){var e=(0,f.default)(this.props.formTemplate,"spec.selector",{});return i.default.createElement(p.Form.Item,{label:t("SELECTOR")},i.default.createElement("div",{className:v.default.selectors},Object.keys(e).map((function(t){return i.default.createElement(m.default,{key:t,name:t,value:e[t]})}))))}},{key:"renderTypeSelect",value:function(){return i.default.createElement(p.Form.Item,{label:t("INTERNAL_ACCESS_MODE")},i.default.createElement(h.default,{className:"margin-b12",value:this.state.serviceType,onChange:this.handleTypeChange,options:this.types,disabled:!0}))}},{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement("div",{className:v.default.wrapper},i.default.createElement(p.Form,{data:this.formTemplate,ref:e},this.renderName(),this.renderTypeSelect(),this.renderSelectorLabels(),this.renderPorts()))}}]),r}(d.default);a.default=y},,function(e,t,a){e.exports={card:"_1RshJt8HTq5HgEme5DfSMo",tabs:"wyrLrVtofUNlEaiwxIeFK",label:"QqDn4rm7cZu-6-D4Z5tTh",selectors:"_3_DdQN134r--ART1Vr6ZI9"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(56)),u=n(r(21)),c=n(r(109)),s=n(r(49)),i=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(0)),E=n(r(1)),y=n(r(3)),b=n(r(297)),g=n(r(23)),_=n(r(32)),S=n(r(16)),O=n(r(782)),C=r(25),T=r(37),R=r(58),D=n(r(274)),k=n(r(751)),N=n(r(748)),P=n(r(763)),I=n(r(737)),w=n(r(2599));function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var A=function(e){(0,p.default)(n,e);var a,r=M(n);function n(e){var t;return(0,f.default)(this,n),(t=r.call(this,e)).stopPropagation=function(e){return e.stopPropagation()},t.handleOk=(0,i.default)(s.default.mark((function e(){var a,r,n,l,o,u,c,i,f,d,p,m;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props,r=a.onOk,n=a.resource,l=a.store,o=t.state,u=o.selectedRelatedResourceIds,c=o.relatedResources,i=o.scheduledProjectList,f=[],c.forEach((function(e){u.includes(e.uid)&&("services"===e.module?f.push(t.serviceStore.delete(e)):"persistentvolumeclaims"===e.module&&f.push(t.volumeStore.delete(e)))})),e.next=6,Promise.all(f);case 6:if(!(0,g.default)(n)){e.next=17;break}return d=n[0].namespace,p=n.map((function(e){return e.name})),m=p.filter((function(e){return i.includes(e)})),e.next=12,Promise.all(n.map((function(e){return l.delete(e)})));case 12:return e.next=14,Promise.all(m.map((function(e){return l.deleteSchedule({name:e,namespace:d})})));case 14:l.list.setSelectRowKeys([]),e.next=23;break;case 17:return e.next=19,l.delete(n);case 19:if(e.t0=i.includes(n.name),!e.t0){e.next=23;break}return e.next=23,l.deleteSchedule({name:n.name,namespace:n.namespace});case 23:r();case 24:case"end":return e.stop()}}),e)}))),t.handleItemClick=function(e){var a=e.currentTarget.dataset.uid;t.setState((function(e){var t=e.selectedRelatedResourceIds;return{selectedRelatedResourceIds:t.includes(a)?t.filter((function(e){return e!==a})):[].concat((0,c.default)(t),[a])}}))},t.handleSelectAll=function(){var e=t.state,a=e.relatedResources,r=e.selectedRelatedResourceIds;(0,_.default)(r)&&t.setState({selectedRelatedResourceIds:a.map((function(e){return e.uid}))})},t.serviceStore=new N.default,t.volumeStore=new P.default,e.isFederated&&(t.serviceStore=new I.default({module:t.serviceStore.module}),t.volumeStore=new I.default({module:t.volumeStore.module})),t.state={relatedResources:[],selectedRelatedResourceIds:[],enableConfirm:!1,timer:3,scheduledProjectList:[]},t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.visible&&(this.fetchRelatedResources(this.props.resource),this.startTimer())}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"startTimer",value:function(){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.setState((function(e){var t=e.timer;return{timer:Math.max(t-1,0),enableConfirm:t<=1}}),(function(){e.state.enableConfirm&&e.timer&&clearInterval(e.timer)}))}),1e3)}},{key:"fetchRelatedResources",value:(a=(0,i.default)(s.default.mark((function e(t){var a,r,n,l,o,u,c,i,f,d,p=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.store,this.setState({isLoading:!0}),r=[],o=[],(0,g.default)(t)?(n=t[0].namespace,l=t[0].cluster,r=t.map((function(e){return e.selector||(0,S.default)(e,"resource.selector")}))):(n=t.namespace,l=t.cluster,r.push(t.selector||(0,S.default)(t,"resource.selector"))),u=[],r.forEach((function(e){if(!(0,_.default)(e)){var t=(0,T.joinSelector)(e);u.push(p.volumeStore.fetchListByK8s({cluster:l,namespace:n,labelSelector:t}),p.serviceStore.fetchListByK8s({cluster:l,namespace:n,labelSelector:t}))}})),e.next=9,Promise.all(u);case 9:if(c=e.sent,"deployments"!==a.module){e.next=24;break}return e.next=13,null===(f=a.getAllScheduleProject)||void 0===f?void 0:f.call(a,{namespace:n});case 13:if(e.t1=i=e.sent,e.t0=null!==e.t1,!e.t0){e.next=17;break}e.t0=void 0!==i;case 17:if(!e.t0){e.next=21;break}e.t2=i,e.next=22;break;case 21:e.t2=[];case 22:d=e.t2,(0,_.default)(d)||(o=d.items.map((function(e){return e.metadata.name})));case 24:this.setState({relatedResources:(0,O.default)((0,b.default)(c),"uid"),isLoading:!1,scheduledProjectList:o});case 25:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"renderContent",value:function(){var e=this,a=this.state,r=a.isLoading,n=a.relatedResources,l=a.selectedRelatedResourceIds;return!1===r&&(0,_.default)(n)?v.default.createElement(k.default,{icon:"appcenter",className:w.default.empty,title:t("NO_RELATED_RESOURCE_FOUND"),desc:t("NO_WORKLOAD_RELATED_RESOURCE_DESC")}):v.default.createElement("div",{className:w.default.resources},!(0,_.default)(n)&&v.default.createElement("div",{className:w.default.resource},v.default.createElement(C.Checkbox,{checked:!(0,_.default)(l),onClick:this.handleSelectAll,indeterminate:!(0,_.default)(l)}),v.default.createElement("span",{className:w.default.resourceName},t("SELECT_ALL"))),n.map((function(a){return v.default.createElement("div",{key:a.uid,"data-uid":a.uid,className:(0,y.default)(w.default.resource,(0,u.default)({},w.default.selected,l.includes(a.uid))),onClick:e.handleItemClick},v.default.createElement(C.Checkbox,{checked:l.includes(a.uid),onClick:e.stopPropagation}),v.default.createElement(C.Icon,{name:R.ICON_TYPES[a.module],size:20,type:l.includes(a.uid)?"light":"dark"}),v.default.createElement("span",{className:w.default.resourceName},a.name),v.default.createElement("span",{className:w.default.resourceType},t(R.MODULE_KIND_MAP[a.module])))})))}},{key:"render",value:function(){var e=this.state,a=e.enableConfirm,r=e.timer,n=this.props,u=n.resource,c=(n.onOk,n.onCancel),s=n.isSubmitting,i=(0,o.default)(n,["resource","onOk","onCancel","isSubmitting"]),f=(0,g.default)(u)&&1!==u.length?t("DELETE_MULTIPLE_WORKLOADS"):t("DELETE_WORKLOAD"),d=(0,g.default)(u)&&1!==u.length?t.html("DELETE_WORKLOAD_DESC_PL",{resource:u.map((function(e){return e.name})).join(", ")}):(0,g.default)(u)?t.html("DELETE_WORKLOAD_DESC_SI",{resource:u.map((function(e){return e.name})).join(", ")}):t.html("DELETE_WORKLOAD_DESC_SI",{resource:u.name});return v.default.createElement(D.default,(0,l.default)({width:520,icon:"question",title:f,description:d,closable:!1,headerClassName:w.default.modalHeader,bodyClassName:w.default.modalBody,hideFooter:!0},i),v.default.createElement("div",{className:w.default.body},this.renderContent()),v.default.createElement("div",{className:w.default.footer},v.default.createElement(C.Button,{onClick:c,"data-test":"modal-cancel"},t("CANCEL")),v.default.createElement(C.Button,{type:"danger",loading:s,disabled:!a||s,onClick:this.handleOk,"data-test":"modal-ok"},t("OK"),!a&&"(".concat(r,"s)"))))}}]),n}(v.default.Component);a.default=A,A.propTypes={resource:E.default.any,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},A.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={modalHeader:"_3TWrkomcU0cg65Le73FSC6",modalBody:"GK12m4CmybdVZClmBgcjk",body:"c8zsi95wQs89Y_fT0jHjR",resources:"_2XklTVyP5zrvHq-zl-pnkT",resource:"_2gyGrCh2fmo6Zv7TuojvaX",selected:"_7hDVeAnevM4xDK8nX4AVT",resourceName:"_2w4PDjTp1CNVaUpPVohjMs",resourceType:"_2acsON3o1XJq_j-yeoQkCn",footer:"_3Cme0DKegaGUSuwkdW_EyZ",empty:"_3b_ipjHAWArqQ2Cbg-SOXT"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(852)),l=r(a(875)),o=r(a(876)),u=r(a(961)),c=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:l.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:u.default,required:!0}];t.default=c},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(650)),f=n(r(16)),d=n(r(32)),p=n(r(68)),m=n(r(73)),h=n(r(0)),v=r(25),E=n(r(786)),y=r(37);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).handleLabelsChange=(0,i.default)((function(t){var a=e.props,r=a.module,n=a.isFederated;(0,y.updateLabels)(e.fedFormTemplate,r,t),n&&(0,m.default)(e.formTemplate,"metadata.labels",t)}),200),e.handleAnnotationsChange=(0,i.default)((function(t){e.props.isFederated&&((0,m.default)(e.formTemplate,"metadata.annotations",t),(0,y.updateFederatedAnnotations)(e.formTemplate))}),200),e.labelsValidator=function(a,r,n){if((0,p.default)(r)||(0,d.default)(r))return n();if(!(0,y.isValidLabel)(r))return n({message:t("LABEL_FORMAT_DESC")});var l=e.props,o=l.namespace,u=l.cluster;e.props.store.checkLabels({labels:r,namespace:o,cluster:u}).then((function(e){if(e.exist)return n({message:t("DUPLICATE_LABELS"),field:a.field});n()}))},e}return(0,o.default)(r,[{key:"render",value:function(){return h.default.createElement(h.default.Fragment,null,h.default.createElement(v.Form.Item,{label:t("LABEL_PL"),rules:[{validator:this.labelsValidator}]},h.default.createElement(E.default,{name:"metadata.labels",addText:t("ADD"),onChange:this.handleLabelsChange})),h.default.createElement(v.Form.Item,{label:t("ANNOTATION_PL")},h.default.createElement(E.default,{name:"metadata.annotations",addText:t("ADD"),hiddenKeys:globals.config.preservedAnnotations,onChange:this.handleAnnotationsChange})))}},{key:"formTemplate",get:function(){return this.props.formTemplate}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,f.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(h.default.Component);a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=r(25),p=n(r(2603));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=m(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return f.default.createElement(d.Form.Item,null,f.default.createElement(p.default,(0,l.default)({name:"".concat(this.prefix,"spec.nodeSelector"),addText:t("ADD_NODE_SELECTOR")},this.props)))}},{key:"prefix",get:function(){return this.props.prefix||"spec.template."}}]),r}(f.default.Component);a.default=h},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(71)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=r(25),p=n(r(786)),m=n(r(2604)),h=n(r(2606));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1},e.handleNodeSelect=function(t){var a=e.props.onChange;a&&a(t)},e.handleCancel=function(){e.setState({visible:!1})},e}return(0,u.default)(r,[{key:"renderNodeSelectForm",value:function(){var e=this.props,t=e.cluster,a=e.namespace;return f.default.createElement(m.default,{cluster:t,namespace:a,onSelect:this.handleNodeSelect,onCancel:this.handleCancel,visible:this.state.visible})}},{key:"render",value:function(){var e=this.state.visible;return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement(p.default,(0,l.default)({},this.props,{controlled:!0})),f.default.createElement(d.Popper,{className:h.default.popper,visible:e,placement:"right",content:this.renderNodeSelectForm(),closeAfterClick:!1,trigger:"click"},f.default.createElement(d.Button,{className:h.default.node},t("SPECIFY_NODE"))))}}]),r}(f.default.Component);a.default=E},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(21)),u=n(r(56)),c=n(r(49)),s=n(r(50)),i=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(5),E=r(70),y=n(r(16)),b=n(r(32)),g=r(25),_=n(r(826)),S=n(r(837)),O=n(r(1075)),C=n(r(877)),T=n(r(2605)),R=n(r(1378));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",pod_used:"node_pod_running_count",pod_total:"node_pod_quota"},I=(0,E.observer)(l=function(e){(0,d.default)(n,e);var a,r=N(n);function n(e){var a;(0,i.default)(this,n),(a=r.call(this,e)).handleTypeChange=function(){var e=(0,s.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchData({type:t});case 2:a.setState({type:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.fetchData=function(){var e=(0,s.default)(c.default.mark((function e(t){var r,n,l,o,s;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.type,n=(0,u.default)(t,["type"]),l=a.props,o=l.cluster,s=l.namespace,e.next=4,a.store[r].fetchList(k({cluster:o,namespace:s,type:r},n));case 4:return e.next=6,a.monitoringStore.fetchMetrics({resources:a.store[r].list.data.map((function(e){return e.name})),metrics:Object.values(P),last:!0});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSelect=function(e){a.setState({selectItem:e})},a.handleCancel=function(){a.setState({selectItem:{}},(function(){a.props.onCancel()}))},a.handleOK=function(){var e=a.props.onSelect,t=a.state.selectItem;e({"kubernetes.io/hostname":(0,y.default)(t,'labels["kubernetes.io/hostname"]')})},a.renderRadio=function(){var e=a.state.type;return a.edgeDisabled?h.default.createElement(g.RadioGroup,{mode:"button",buttonWidth:120,value:e,onChange:a.handleTypeChange,size:"small"},h.default.createElement(g.RadioButton,{value:"node"},t("CLUSTER_NODE_PL")),h.default.createElement(g.RadioButton,{value:"edgenode"},t("EDGE_NODE_PL"))):null},a.state={type:"node",selectItem:{}};var l=a.props.cluster;return a.nodeStore=new S.default,a.edgeNodeStore=new O.default,a.monitoringStore=new C.default({cluster:l}),a.store={node:a.nodeStore,edgenode:a.edgeNodeStore},a}return(0,f.default)(n,[{key:"componentDidMount",value:(a=(0,s.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData({type:this.state.type});case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this,a=this.state,r=a.type,n=a.selectItem,l=(0,v.toJS)(this.store[r].list),o=l.data,u=l.total,c=l.page,s=l.isLoading,i=(0,v.toJS)(this.monitoringStore).data;return(0,b.default)(i)?null:h.default.createElement("div",{className:R.default.container},h.default.createElement("div",{className:R.default.body},h.default.createElement(g.Alert,{className:"margin-b8",message:t("WORKLOAD_SPECIFY_NODE_DESC"),hideIcon:!0}),this.renderRadio(),h.default.createElement("div",{className:R.default.nodes},h.default.createElement(_.default,{data:o,total:u,page:c,loading:s,onFetch:function(t){return e.fetchData(k({type:r},t))}},o.map((function(t,a){return h.default.createElement(T.default,{key:"".concat(t.uid).concat(a),module:r,detail:t,metricsData:i,onClick:e.handleSelect,selected:n.uid===t.uid})}))))),h.default.createElement("div",{className:R.default.footer},h.default.createElement(g.Button,{onClick:this.handleCancel},t("CANCEL")),h.default.createElement(g.Button,{type:"control",onClick:this.handleOK},t("OK"))))}},{key:"edgeDisabled",get:function(){var e=this.props.cluster;return globals.app.hasClusterModule(e,"kubeedge")}}]),n}(h.default.PureComponent))||l;a.default=I},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(21)),o=n(r(12)),u=n(r(13)),c=n(r(19)),s=n(r(20)),i=n(r(18)),f=n(r(0)),d=n(r(3)),p=r(25),m=r(58),h=n(r(16)),v=n(r(32)),E=r(296),y=n(r(727)),b=n(r(729)),g=n(r(275)),_=r(725),S=n(r(1378));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",pod_used:"node_pod_running_count",pod_total:"node_pod_quota"},T=function(e){(0,c.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).handleClick=function(){var t=e.props;(0,t.onClick)(t.detail)},e.renderStatus=function(a){var r=(0,E.getNodeStatus)(a),n=a.taints;return f.default.createElement(g.default,{title:f.default.createElement(f.default.Fragment,null,f.default.createElement(b.default,{type:r,name:t("NODE_STATUS_".concat(r.toUpperCase()))}),!(0,v.default)(n)&&"success"===a.importStatus&&f.default.createElement(p.Tooltip,{content:e.renderTaintsTip(n)},f.default.createElement("span",{className:S.default.taints},n.length))),description:t("STATUS")})},e.renderTaintsTip=function(e){return f.default.createElement("div",null,f.default.createElement("div",null,t("TAINTS"),":"),f.default.createElement("div",null,e.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return f.default.createElement("div",{key:t},t)}))))},e.getLastValue=function(t,a,r){var n=e.props.metricsData,l=((0,h.default)(n[a],"data.result")||[]).find((function(e){return(0,h.default)(e,"metric.node")===t.name}));return(0,_.getValueByUnit)((0,h.default)(l,"value[1]",0),r)},e.getRecordMetrics=function(t,a){var r={};return a.forEach((function(a){r[a.type]=parseFloat(e.getLastValue(t,C[a.type],a.unit))})),r},e.renderCPU=function(a){var r=e.getRecordMetrics(a,[{type:"cpu_used",unit:"Core"},{type:"cpu_total",unit:"Core"},{type:"cpu_utilisation"}]);return f.default.createElement(g.default,{title:f.default.createElement("div",{className:S.default.resource},f.default.createElement("span",null,"".concat(Math.round(100*r.cpu_utilisation),"%")),r.cpu_utilisation>=.9&&f.default.createElement(p.Icon,{name:"exclamation"})),description:t("CPU")})},e.renderMemory=function(a){var r=e.getRecordMetrics(a,[{type:"memory_used",unit:"Gi"},{type:"memory_total",unit:"Gi"},{type:"memory_utilisation"}]);return f.default.createElement(g.default,{title:f.default.createElement("div",{className:S.default.resource},f.default.createElement("span",null,"".concat(Math.round(100*r.memory_utilisation),"%")),r.memory_utilisation>=.9&&f.default.createElement(p.Icon,{name:"exclamation"})),description:t("MEMORY")})},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.selected;return f.default.createElement("div",{className:(0,d.default)(S.default.item,(0,l.default)({},S.default.selected,r)),onClick:this.handleClick},f.default.createElement(p.Icon,{name:m.ICON_TYPES.nodes,size:20}),f.default.createElement("div",{className:S.default.ring}),f.default.createElement("div",{className:S.default.name},f.default.createElement(y.default,{icon:null,to:null,title:a.name,desc:a.ip})),this.renderStatus(a),f.default.createElement("div",null,f.default.createElement(g.default,{title:f.default.createElement(f.default.Fragment,null,a.role.join(",")),description:t("ROLE")})),f.default.createElement("div",null,this.renderCPU(a)),f.default.createElement("div",null,this.renderMemory(a)))}}]),r}(f.default.Component);a.default=T},function(e,t,a){e.exports={wrapper:"_4qArBgVOZGVzW4_C1mQa_",alert:"_2J-ZH7uleo6FGwk_vn2a-P",node:"_2_K8zkzSwO3NKwIB5qbvFK",popper:"_2Cg7AXgw8CzlfFEkQ2hckV"}},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(37),l=r(a(852)),o=r(a(875)),u=r(a(876)),c=r(a(961)),s=[{title:"BASIC_INFORMATION",icon:"cdn",component:l.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:(0,n.withProps)(o.default,{withService:!0}),required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:u.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:c.default,required:!0}];t.default=s},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(852)),l=r(a(875)),o=r(a(876)),u=r(a(961)),c=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:l.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:u.default,required:!0}];t.default=c},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(37),l=r(a(852)),o=r(a(876)),u=r(a(961)),c=r(a(1379)),s=r(a(1380)),i=[{title:"BASIC_INFORMATION",icon:"cdn",component:(0,n.withProps)(l.default,{maxNameLength:63}),required:!0},{title:"STRATEGY_SETTINGS",icon:"job",component:c.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:s.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:u.default,required:!0}];t.default=i},function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(37),l=r(a(2611)),o=r(a(1379)),u=r(a(1380)),c=r(a(876)),s=r(a(961)),i=[{title:"BASIC_INFORMATION",icon:"cdn",component:l.default,required:!0},{title:"STRATEGY_SETTINGS",icon:"cron-job",component:(0,n.withProps)(o.default,{prefix:"spec.jobTemplate.spec."}),required:!0},{title:"POD_SETTINGS",icon:"docker",component:(0,n.withProps)(u.default,{prefix:"spec.jobTemplate.spec.template."}),required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:(0,n.withProps)(c.default,{prefix:"spec.jobTemplate.spec.template."}),required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:(0,n.withProps)(s.default,{prefix:"spec.jobTemplate.spec.template."}),required:!0}];t.default=i},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(16)),f=n(r(73)),d=n(r(650)),p=n(r(0)),m=r(25),h=n(r(740)),v=n(r(935)),E=n(r(903)),y=r(58);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).handleNameChange=(0,d.default)((function(t){var a=(0,i.default)(e.formTemplate,"metadata.labels",{});a.app=t.slice(0,63),(0,f.default)(e.formTemplate,"spec.jobTemplate.metadata.labels",a)}),200),e.nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,namespace:e.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e.getConcurrencyPolicyOptions=function(){return[{label:t("RUN_JOBS_CONCURRENTLY"),value:"Allow"},{label:t("SKIP_NEW_JOB"),value:"Forbid"},{label:t("SKIP_OLD_JOB"),value:"Replace"}]},e}return(0,o.default)(r,[{key:"getCronOptions",value:function(){return[{label:t("EVERY_HOUR"),value:"0 * * * *"},{label:t("EVERY_DAY"),value:"0 0 * * *"},{label:t("EVERY_WEEK"),value:"0 0 * * 0"},{label:t("EVERY_MONTH"),value:"0 0 1 * *"}]}},{key:"render",value:function(){var e=this.props.formRef;return p.default.createElement(m.Form,{data:this.formTemplate,ref:e},p.default.createElement(m.Columns,null,p.default.createElement(m.Column,null,p.default.createElement(m.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:y.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})},{validator:this.nameValidator}]},p.default.createElement(m.Input,{name:"metadata.name",onChange:this.handleNameChange,autoFocus:!0,maxLength:52}))),p.default.createElement(m.Column,null,p.default.createElement(m.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},p.default.createElement(m.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),p.default.createElement(m.Columns,{className:"is-multiline"},!this.props.namespace&&p.default.createElement(m.Column,{className:"is-6"},p.default.createElement(m.Form.Item,{label:t("PROJECT"),desc:t("PROJECT_DESC"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},p.default.createElement(v.default,{name:"metadata.namespace",cluster:this.props.cluster,defaultValue:this.namespace}))),p.default.createElement(m.Column,{className:"is-6"},p.default.createElement(m.Form.Item,{label:t("SCHEDULE"),desc:t.html("CRONJOB_CRON_DESC"),rules:[{required:!0,message:t("ENTER_SCHEDULE_TIP")}]},p.default.createElement(m.Select,{name:"spec.schedule",options:this.getCronOptions(),searchable:!0,placeholder:" "}))),p.default.createElement(m.Column,{className:"is-6"},p.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(m.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))),p.default.createElement(E.default,null,p.default.createElement(m.Columns,{className:"margin-t8"},p.default.createElement(m.Column,null,p.default.createElement(m.Form.Item,{label:t("MAXIMUM_DELAY"),desc:t("MAXIMUM_DELAY_DESC")},p.default.createElement(h.default,{min:0,name:"spec.startingDeadlineSeconds",integer:!0})),p.default.createElement(m.Form.Item,{label:t("FAILED_JOBS_RETAINED"),desc:t("FAILED_JOBS_RETAINED_DESC")},p.default.createElement(h.default,{min:0,name:"spec.failedJobsHistoryLimit",integer:!0}))),p.default.createElement(m.Column,null,p.default.createElement(m.Form.Item,{label:t("SUCCESSFUL_JOBS_RETAINED"),desc:t("SUCCESSFUL_JOBS_RETAINED_DESC")},p.default.createElement(h.default,{min:0,name:"spec.successfulJobsHistoryLimit",integer:!0})),p.default.createElement(m.Form.Item,{label:t("CONCURRENCY_POLICY"),desc:t("CONCURRENCY_POLICY_DESC")},p.default.createElement(m.Select,{name:"spec.concurrencyPolicy",options:this.getConcurrencyPolicyOptions()}))))))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,i.default)(t,y.MODULE_KIND_MAP[a],t)}},{key:"namespace",get:function(){return(0,i.default)(this.formTemplate,"metadata.namespace")}}]),r}(p.default.Component);a.default=g},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(21)),c=n(r(56)),s=r(25),i=n(r(274)),f=n(r(16)),d=n(r(301)),p=n(r(32)),m=n(r(2613)),h=n(r(2623)),v=n(r(2625)),E=r(37),y=n(r(853));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={"workspace.create":{on:function(e){var a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),l=i.default.open(g({onOk:function(e){e?a.create(e).then((function(){i.default.close(l),s.Notify.success({content:t("CREATE_SUCCESSFUL")}),r&&r()})):i.default.close(l)},modal:m.default,store:a},n))}},"workspace.quota.edit":{on:function(e){e.store;var t,a=e.detail,r=e.success,n=(0,c.default)(e,["store","detail","success"]),u=new y.default,s=i.default.open(g({onOk:(t=(0,o.default)(l.default.mark((function e(t){var n,o,c,m;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:a.name,workspace:a.name,cluster:a.cluster},o=(0,f.default)(t,"spec.quota.hard",{}),e.next=4,u.checkName(n);case 4:if(c=e.sent,(0,E.quota_limits_requests_Dot)(o),m={apiVersion:"quota.kubesphere.io/v1alpha2",kind:"ResourceQuota",metadata:g(g({},n),{},{name:a.name}),spec:{quota:{hard:(0,d.default)(o,p.default)}}},!c.exist){e.next=12;break}return e.next=10,u.update(n,m);case 10:e.next=14;break;case 12:return e.next=14,u.create(m,n);case 14:i.default.close(s),r&&r();case 16:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),detail:a,store:u,modal:h.default},n))}},"workspace.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=i.default.open(g({onOk:function(e){a.delete(r,e).then((function(){i.default.close(o),s.Notify.success({content:t("DELETE_SUCCESSFUL")}),n&&n()}))},store:a,modal:v.default,resource:r.name},l))}},"workspace.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,f=(0,c.default)(e,["store","success","rowKey"]),d=r.list,p=d.data,m=d.selectedRowKeys,h=p.filter((function(e){return m.includes(e[u])})).map((function(e){return e.name})),E=i.default.open(g({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],p.forEach((function(e){h.includes(e.name)&&o.push(r.delete(e,a))})),e.next=4,Promise.all(o);case 4:i.default.close(E),s.Notify.success({content:t("DELETE_SUCCESSFUL")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),resource:h.join(", "),modal:v.default,store:r},f))}}};a.default=_},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(185)),f=n(r(0)),d=n(r(1)),p=r(25),m=n(r(274)),h=n(r(733)),v=n(r(2614)),E=n(r(2616)),y=n(r(2618)),b=n(r(2622));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,u.default)(r,e);var a=g(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(){t.props.onOk(t.state.formTemplate)},t.handlePrev=function(){t.setState((function(e){var t=e.currentStep;return{currentStep:Math.max(0,t-1)}}))},t.handleNext=function(){var e=t.formRef.current;e&&e.validate((function(){t.setState((function(e){var a=e.currentStep;return{currentStep:Math.min(t.steps.length-1,a+1)}}))}))},t.state={currentStep:0,formTemplate:(0,i.default)(h.default.workspaces())},t.formRef=f.default.createRef(),t}return(0,o.default)(r,[{key:"renderForm",value:function(){var e=this.props.store,t=this.state,a=t.formTemplate,r=t.currentStep,n=this.steps[r],l=n.component,o={store:e,formTemplate:a};return n.isForm?o.formRef=this.formRef:o.ref=this.formRef,f.default.createElement("div",{className:b.default.formWrapper},f.default.createElement("div",{className:b.default.wrapper},f.default.createElement("div",{className:b.default.form},f.default.createElement(l,o))))}},{key:"renderHeader",value:function(){var e=this.props.onCancel,a=this.state.currentStep;return f.default.createElement("div",{className:b.default.header},f.default.createElement("div",{className:b.default.title},f.default.createElement(p.Icon,{name:"close",size:20,clickable:!0,onClick:e}),f.default.createElement("span",null),f.default.createElement(p.Icon,{name:"enterprise",size:20}),f.default.createElement("span",null,t("CREATE_WORKSPACE"))),f.default.createElement("div",{className:b.default.wrapper},this.steps.length>1&&f.default.createElement(v.default,{steps:this.steps,current:a})),f.default.createElement("div",{className:b.default.headerBottom}))}},{key:"renderFooter",value:function(){var e=this.props,a=e.onCancel,r=e.isSubmitting,n=this.state.currentStep,l=this.steps.length-1;return f.default.createElement("div",{className:b.default.footer},f.default.createElement("div",{className:b.default.wrapper},f.default.createElement("div",{className:"text-right"},f.default.createElement(p.Button,{onClick:a},t("CANCEL")),n>0&&f.default.createElement(p.Button,{type:"control",onClick:this.handlePrev},t("PREVIOUS")),n<l?f.default.createElement(p.Button,{type:"control",onClick:this.handleNext},t("NEXT")):f.default.createElement(p.Button,{type:"control",onClick:this.handleOk,loading:r},t("CREATE")))))}},{key:"render",value:function(){var e=this.props.visible;return f.default.createElement(m.default,{className:b.default.modal,bodyClassName:b.default.body,visible:e,hideHeader:!0,hideFooter:!0,fullScreen:!0},this.renderHeader(),this.renderForm(),this.renderFooter())}},{key:"steps",get:function(){return globals.app.isMultiCluster?[{title:"BASIC_INFORMATION",component:E.default,required:!0,isForm:!0},{title:"CLUSTER_SETTINGS",component:y.default,required:!0}]:[{title:"BASIC_INFORMATION",component:E.default,required:!0,isForm:!0}]}}]),r}(f.default.Component);a.default=_,_.propTypes={namespace:d.default.string,visible:d.default.bool,onOk:d.default.func,onCancel:d.default.func,sampleApp:d.default.string},_.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(72),l=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(12)),u=l(r(13)),c=l(r(19)),s=l(r(20)),i=l(r(18)),f=n(r(0)),d=r(25),p=l(r(2615));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=m(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.steps,r=e.current;return f.default.createElement("div",{className:p.default.wrapper},a.map((function(e,a){return f.default.createElement("div",{key:e.title},r>=a?f.default.createElement(d.Icon,{name:"success",type:"coloured",size:12}):f.default.createElement(d.Icon,{name:"dot",type:"light",size:12}),f.default.createElement("span",null,t(e.title)))})))}}]),r}(f.Component);a.default=h},function(e,t,a){e.exports={wrapper:"_2dFP1gLucRGN5yjrJBJ0Wr"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,o=n(r(21)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(191)),p=n(r(0)),m=r(70),h=r(25),v=r(58),E=n(r(278)),y=n(r(2617));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=(0,m.observer)(l=function(e){(0,s.default)(r,e);var a=g(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).fetchUsers=function(e){return n.userStore.fetchList(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e))},n.nameValidator=function(e,a,r){return a?"workspaces"===a?r({message:t("current name is not available"),field:e.field}):void n.props.store.checkName({name:a}).then((function(a){if(a.exist)return r({message:t("Workspace name exists"),field:e.field});r()})):r()},n.userStore=new E.default,n.fetchUsers(),n}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return p.default.createElement("div",{className:y.default.wrapper},p.default.createElement("div",{className:y.default.step},p.default.createElement("div",null,t("BASIC_INFORMATION")),p.default.createElement("p",null,t("WORKSPACE_CREATE_DESC"))),p.default.createElement(h.Form,{data:r,ref:a},p.default.createElement(h.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("WORKSPACE_NAME_EMPTY_DESC")},{pattern:v.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},p.default.createElement(h.Input,{name:"metadata.name",autoFocus:!0,maxLength:63})),p.default.createElement(h.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},p.default.createElement(h.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),p.default.createElement(h.Form.Item,{label:t("ADMINISTRATOR")},p.default.createElement(h.Select,{name:"spec.template.spec.manager",options:this.users,pagination:(0,d.default)(this.userStore.list,["page","limit","total"]),isLoading:this.userStore.list.isLoading,onFetch:this.fetchUsers,defaultValue:globals.user.username,onChange:this.handleChange,searchable:!0})),p.default.createElement(h.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(h.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256,rows:"3"}))))}},{key:"users",get:function(){var e=globals.user.username,t=this.userStore.list.data.map((function(e){return{label:e.username,value:e.username}}));return t.every((function(t){return t.value!==e}))&&t.unshift({label:e,value:e}),t}}]),r}(p.default.Component))||l;a.default=_},function(e,t,a){e.exports={wrapper:"_1YWQK0YmICh6VF7xYh7F8S",step:"KZcJHL5-wOFRBPuOY-K3S",upload:"_1xozz9MRPzwnFpHQOlyHi4"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=r(25),d=n(r(2619)),p=n(r(2621));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return i.default.createElement("div",{className:p.default.wrapper},i.default.createElement("div",{className:p.default.step},i.default.createElement("div",null,t("CLUSTER_SETTINGS")),i.default.createElement("p",null,t("SELECT_CLUSTERS_DESC"))),i.default.createElement(f.Form,{data:r,ref:a},i.default.createElement(f.Form.Item,{label:t("AVAILABLE_CLUSTERS")},i.default.createElement(d.default,{name:"spec.placement.clusters"}))))}}]),r}(i.default.Component);a.default=h},function(e,a,r){"use strict";var n=r(6),l=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,u=n(r(21)),c=n(r(49)),s=n(r(50)),i=n(r(109)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=l(r(0)),E=n(r(3)),y=n(r(32)),b=r(5),g=r(70),_=r(25),S=n(r(749)),O=n(r(637)),C=n(r(2620));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var R=(0,g.observer)(o=function(e){(0,p.default)(n,e);var a,r=T(n);function n(){var e;(0,f.default)(this,n);for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return(e=r.call.apply(r,[this].concat(a))).clusterStore=new O.default,e.state={showTip:!1,hostClusters:[]},e.handleClick=function(t){var a,r=e.props,n=r.value,l=void 0===n?[]:n,o=r.onChange,u=t.currentTarget.dataset.cluster;a=l.some((function(e){return e.name===u}))?l.filter((function(e){return e.name!==u})):[].concat((0,i.default)(l),[{name:u}]),e.setState({showTip:a.some((function(t){return e.state.hostClusters.includes(t.name)}))}),o(a)},e.handleCheckboxClick=function(e){return e.stopPropagation()},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:(a=(0,s.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!globals.app.hasPermission({module:"clusters",action:"manage"})){e.next=5;break}return e.next=3,this.clusterStore.fetchList({limit:-1});case 3:e.next=7;break;case 5:return e.next=7,this.clusterStore.fetchList({limit:-1,from:"resource",labelSelector:"cluster.kubesphere.io/visibility=public"});case 7:this.setState({hostClusters:this.clusterStore.list.data.filter((function(e){return e.isHost})).map((function(e){return e.name}))});case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this,a=this.props.value,r=void 0===a?[]:a,n=(0,b.toJS)(this.clusterStore.list),l=n.data,o=n.isLoading;return(0,y.default)(l)&&!o?v.default.createElement(_.Alert,{type:"warning",message:t("NO_CLUSTER_AVAILABLE_DESC")}):v.default.createElement("div",{className:C.default.wrapper},this.state.showTip&&v.default.createElement(_.Alert,{className:"margin-b12",type:"warning",message:t("SELECT_HOST_CLUSTER_WARNING")}),l.map((function(t){return v.default.createElement("div",{key:t.name,className:(0,E.default)(C.default.item,(0,u.default)({},C.default.disabled,!globals.app.isMultiCluster)),"data-cluster":t.name,onClick:globals.app.isMultiCluster?e.handleClick:null},v.default.createElement(_.Checkbox,{checked:r.some((function(e){return e.name===t.name})),disabled:!globals.app.isMultiCluster,onClick:e.handleCheckboxClick}),v.default.createElement(S.default,{className:C.default.cluster,tagClass:"float-right",cluster:t,noTip:!0}))})))}}]),n}(v.Component))||o;a.default=R},function(e,t,a){e.exports={wrapper:"_1FhVvljOspycHsfzDrmHds",item:"_3uwdOWJxem3W_jqv6BAFu0",disabled:"sjn_zdlBrahI74WoV5omc",cluster:"_2s530jxSq442V0tK0dIkX-"}},function(e,t,a){e.exports={wrapper:"R1Nn-MWwPOaptPi1tXzA6",step:"_2V9cABkYkEUjC4bpDz2wdo",upload:"_2-sPfwB-LHg4P9mpA3WhAJ"}},function(e,t,a){e.exports={modal:"ydx1TCDzXWsap7ThoXdoN",body:"_38XL2I39TDuD1GVvoZW0LQ",wrapper:"_3XK3SFG_epD4pRJnzaf6o3",header:"_1Gu0OlXBfqMPX3Jx1OqhI1",headerBottom:"_3yGJCycuKnmGI8GEnF1HDl",title:"_1fvkT6ZxavCZQF95V0OIAV",steps:"_2QTdt6PzkIwGCb1f8zjB_4",formWrapper:"-HzNn2kxNzffyKGd7DRFU",footer:"_2G9tgA343D1vegacgEoqAc"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(49)),o=n(r(50)),u=n(r(12)),c=n(r(13)),s=n(r(19)),i=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=r(5),h=n(r(16)),v=n(r(73)),E=r(25),y=n(r(274)),b=n(r(872)),g=n(r(853)),_=n(r(2624));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=function(e){(0,s.default)(n,e);var a,r=S(n);function n(e){var t;return(0,u.default)(this,n),(t=r.call(this,e)).form=d.default.createRef(),t.store=new g.default,t.state={formTemplate:{},error:""},t}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.props.detail&&this.props.detail.name&&this.fetchData(this.props.detail)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.detail;a&&a!==e.visible&&r&&r.name&&this.fetchData(r)}},{key:"fetchData",value:(a=(0,o.default)(l.default.mark((function e(){var t,a=arguments;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.store.fetchDetail({name:t.name,workspace:t.name,cluster:t.cluster});case 3:this.setState({formTemplate:(0,m.toJS)(this.store.detail)});case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=e.onCancel,l=e.isSubmitting,o=this.state.error;return d.default.createElement(y.default.Form,{width:960,title:t("EDIT_WORKSPACE_QUOTAS"),icon:"pen",data:this.state.formTemplate,onOk:r,onCancel:n,visible:a,isSubmitting:l,disableOk:!!o},d.default.createElement("div",{className:_.default.body},d.default.createElement(E.Form.Item,null,d.default.createElement(b.default,this.resourceLimitProps))))}},{key:"resourceLimitProps",get:function(){var e=this,a=this.state.formTemplate;return{cpuProps:{marks:[{value:0,label:t("NO_REQUEST"),weight:4},{value:1,label:1,weight:4},{value:2,label:2,weight:2},{value:3,label:3,weight:2},{value:4,label:4},{value:5,label:5},{value:6,label:6},{value:7,label:7},{value:8,label:8},{value:1/0,label:t("NO_LIMIT")}]},memoryProps:{marks:[{value:0,label:t("NO_REQUEST"),weight:4},{value:2,label:2,weight:4},{value:4,label:4,weight:2},{value:6,label:6,weight:2},{value:8,label:8},{value:10,label:10},{value:12,label:12},{value:14,label:14},{value:16,label:16},{value:1/0,label:t("NO_LIMIT")}],unit:"Gi",valueFormatter:function(e){return e>0&&e<1?e.toFixed(2):e>1&&e!==1/0?e.toFixed(1):e}},defaultValue:{limits:{cpu:(0,h.default)(a,'spec.quota.hard["limits.cpu"]'),memory:(0,h.default)(a,'spec.quota.hard["limits.memory"]')},requests:{cpu:(0,h.default)(a,'spec.quota.hard["requests.cpu"]'),memory:(0,h.default)(a,'spec.quota.hard["requests.memory"]')}},onChange:function(e){(0,v.default)(a,'spec.quota.hard["limits.cpu"]',(0,h.default)(e,"limits.cpu",null)),(0,v.default)(a,'spec.quota.hard["limits.memory"]',(0,h.default)(e,"limits.memory",null)),(0,v.default)(a,'spec.quota.hard["requests.cpu"]',(0,h.default)(e,"requests.cpu",null)),(0,v.default)(a,'spec.quota.hard["requests.memory"]',(0,h.default)(e,"requests.memory",null))},onError:function(t){e.setState({error:t})}}}}]),n}(d.default.Component);a.default=O,O.propTypes={detail:p.default.object,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func,isSubmitting:p.default.bool},O.defaultProps={visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"_3gx-epim1LPGcKH75fP9Qu",quotaItem:"_3WPJPpKpsaYoGbWbJfWdgZ",label:"_1Gv6t_kWjdKJhsCfZ6sKDp"}},function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(12)),o=n(r(13)),u=n(r(19)),c=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=r(25),p=n(r(274)),m=n(r(2626));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={confirm:"",checked:!1},e.handleInputChange=function(t){e.setState({confirm:t.target.value})},e.handleDeleteCheckboxChange=function(t){e.setState({checked:t})},e.handleOk=function(){e.state.checked?e.props.onOk():e.props.onOk({kind:"DeleteOptions",apiVersion:"v1",propagationPolicy:"Orphan"})},e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({confirm:""})}},{key:"render",value:function(){var e=this.props,a=e.type,r=e.resource,n=e.visible,l=e.onCancel,o=e.title,u=e.desc,c=e.isSubmitting,s=a||void 0,f=a?"".concat(a,"_LOW"):void 0,h=a?"".concat(a,"_PL"):void 0,v=u||(r&&a?1===r.split(", ").length?t.html("DELETE_RESOURCE_TYPE_DESC_SI",{type:t(f),resource:r}):t.html("DELETE_RESOURCE_TYPE_DESC_PL",{type:t(f),resource:r}):t.html("DELETE_DESC"));return i.default.createElement(p.default,{width:504,bodyClassName:m.default.modalBody,visible:n,isSubmitting:c,onCancel:l,hideHeader:!0,hideFooter:!0},i.default.createElement("div",{className:m.default.body},i.default.createElement("div",{className:"h5"},i.default.createElement(d.Icon,{name:"close",type:"light",className:m.default.closeIcon}),o||(r&&a?1===r.split(", ").length?t("DELETE_TITLE_SI",{type:t(s)}):t("DELETE_TITLE_PL",{type:t(h)}):t("DELETE"))),i.default.createElement("div",{className:m.default.content},i.default.createElement("p",null,v),r&&i.default.createElement(d.Input,{name:"confirm",value:this.state.confirm,onChange:this.handleInputChange,placeholder:r,autoFocus:!0}),i.default.createElement(d.Checkbox,{onChange:this.handleDeleteCheckboxChange,checked:this.state.checked},t("DELETE_WORKSPACE_PROJECTS_DESC")))),i.default.createElement("div",{className:m.default.footer},i.default.createElement(d.Button,{onClick:l,"data-test":"modal-cancel"},t("CANCEL")),i.default.createElement(d.Button,{type:"danger",loading:c,disabled:c||!!r&&this.state.confirm!==r,onClick:this.handleOk,"data-test":"modal-ok"},t("OK"))))}}]),r}(i.default.Component);a.default=v,v.propTypes={type:f.default.string,resource:f.default.string,visible:f.default.bool,title:f.default.oneOfType([f.default.string,f.default.node]),desc:f.default.oneOfType([f.default.string,f.default.node]),onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},v.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={modalBody:"LMLXNreroioTPzZNBqI9P",body:"_11Lplgt-TPvmkVmIdHTC4F",content:"ydfzqfBYg_v0MAgK_cnl7",closeIcon:"_3jLtp35AZVNm24GTz4bZ76",footer:"UfSyRU5mQyye1fWDUyy8n"}}])]);