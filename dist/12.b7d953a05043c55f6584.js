(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1029:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,u,l=r(a(49)),c=r(a(109)),o=r(a(21)),i=r(a(56)),f=r(a(50)),s=r(a(91)),d=r(a(12)),p=r(a(13)),m=r(a(135)),h=r(a(19)),v=r(a(20)),y=r(a(18)),E=r(a(74)),g=(r(a(92)),r(a(16))),S=r(a(73)),b=a(5),T=a(58);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var N=(n=function(e){(0,h.default)(o,e);var t,a,r,n=C(o);function o(){var e;(0,d.default)(this,o);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),(0,s.default)(e,"resourceVersion",u,(0,m.default)(e)),e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/").concat(e.module)},e}return(0,p.default)(o,[{key:"getPath",value:function(e){var t=e.user,a="";return t&&(a+="/users/".concat(t)),a}},{key:"fetchList",value:(r=(0,f.default)(l.default.mark((function e(){var t,a,r,n,u,o,f=this,s=arguments;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.more,r=t.user,n=(0,i.default)(t,["more","user"]),this.list.isLoading=!0,n.sortBy||void 0!==n.ascending||(n.sortBy=T.LIST_DEFAULT_ORDER[this.module]||"createTime"),n.limit!==1/0&&-1!==n.limit||(n.limit=-1,n.page=1),n.limit=n.limit||10,e.next=7,request.get(this.getResourceUrl({user:r}),this.getFilterParams(n));case 7:return u=e.sent,o=((0,g.default)(u,"items")||[]).map((function(e){return _({},f.mapper(e))})),this.list.update(_(_({data:a?[].concat((0,c.default)(this.list.data),(0,c.default)(o)):o,total:u.totalItems||u.total_count||u.total||o.length||0},n),{},{limit:Number(n.limit)||10,page:Number(n.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getResource",value:(a=(0,f.default)(l.default.mark((function e(t){var a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get(this.getDetailUrl(t),{},null,(function(){return{}}));case 2:return a=e.sent,r=(0,g.default)(a,"metadata.resourceVersion"),this.resourceVersion=r||"",e.abrupt("return",void 0!==r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"update",value:(t=(0,f.default)(l.default.mark((function e(t,a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.resourceVersion){e.next=3;break}return e.next=3,this.getResource(t);case 3:return(0,S.default)(a,"metadata.resourceVersion",this.resourceVersion),e.abrupt("return",this.submitting(request.put(this.getDetailUrl(t),a)));case 5:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"kapis/notification.kubesphere.io/v2beta2"}}]),o}(r(a(277)).default),u=(0,E.default)(n.prototype,"resourceVersion",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,E.default)(n.prototype,"fetchList",[b.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,E.default)(n.prototype,"getResource",[b.action],Object.getOwnPropertyDescriptor(n.prototype,"getResource"),n.prototype),(0,E.default)(n.prototype,"update",[b.action],Object.getOwnPropertyDescriptor(n.prototype,"update"),n.prototype),n);t.default=N},1154:function(e,t,a){e.exports={title:"_3MyN8db51dIymCq_ZC1Gwn",row:"_1Wp_FocJespWSojpwmEORy",item:"_1Wca6ooaX_vhRkns6JCVcF",labelWrapper:"_2c9_1qksBruoEx3E-dV8-_",wrapper:"_1Qt_Py85R6VmNAr3eyTPAt",listWrapper:"_1YXhXmofHC5kroZqEBeYz2",listItem:"_-6807uDmbi-G9F7KW3RPe",boxWrapper:"_2IHS2beu14kmMkgIZcP6h0",empty:"CDHcI6fTkYWvRDqv9SsGW",tag:"rr3ttiyZ2BAdAQHbcNyYK"}},1458:function(e,t,a){e.exports={title:"Bq_DxvwoIbzNgUSGKKu74",urlInput:"_2iZy25kg8Y2xv_sPplOguB",row:"hJoducYzaKZSPuoAyXEF2",item:"_3Ut4KGvHM3y-EKah95yER_",wrapper:"_1y_QA9-eVFRkSPgVLTD4wj",listWrapper:"_2nnbmvgr5xxxdGUFDz24co",listItem:"_3QzQe3Rj1Hb6gV7rN2TR6t"}},1459:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(109)),l=n(r(12)),c=n(r(13)),o=n(r(19)),i=n(r(20)),f=n(r(18)),s=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(32)),h=r(25),v=n(r(913)),y=n(r(1154));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).handleAdd=function(t){var a=e.props,r=a.value;(0,a.onChange)([].concat((0,u.default)(r),[t]))},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)(r.filter((function(e){return e!==t})))},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.value,n=a.validate,u=a.className,l=a.title,c=void 0===l?t("KEYWORDS"):l,o=a.listTitle,i=void 0===o?t("KEYWORDS_LIST"):o,f=a.emptyDesc,d=void 0===f?t("EMPTY_KEYWORDS_DESC"):f,E=a.placeholder,g=void 0===E?t(" "):E;return s.default.createElement("div",{className:(0,p.default)(y.default.wrapper,u)},s.default.createElement(v.default,{className:y.default.wrapper,title:c,placeholder:g,validate:n,onAdd:this.handleAdd}),s.default.createElement("p",{className:"margin-t8"},i),s.default.createElement("div",{className:y.default.boxWrapper},(0,m.default)(r)?s.default.createElement("div",{className:y.default.empty},d):r.map((function(t){return s.default.createElement(h.Tag,{className:y.default.tag,key:t},t,s.default.createElement(h.Icon,{name:"close",size:12,clickable:!0,type:"light",onClick:function(){return e.handleDelete(t)}}))}))))}}]),r}(s.default.Component);a.default=g,g.propTypes={value:d.default.array,onChange:d.default.func},g.defaultProps={value:[],onChange:function(){}}},1460:function(e,t,a){e.exports={title:"IKj2QMOz04C12iP1VFDNL",subTitle:"_3K5t_PpqMH_7kKHPzcLCco",row:"ChmNt1kcK1XD-oKuGaup5",wrapper:"Z0KFimX54l9rVcMJUe3wp",item:"_1s7eK7cotVqGxPePQ3rUw7",boxWrapper:"_3AstjCLI3Fv8pmh3KAOBP8",empty:"_1W7NXKcHzz0De9UuYrjWm",tag:"_1Sx0_dd2bUpcOt6bBuHbQH"}},1461:function(e,t,a){e.exports={title:"_3elAhqGTewHKeiw6V0UPaX",row:"_1td6CdgMPVF4Cctcyr4p7D",item:"_27kS6c7nE8a42TJ6raKfgw",boxWrapper:"_2Eheikyi4hirTv6JInA8o0",empty:"_2XsEWMcxnB32ONK9LPkWPK",wrapper:"_3r_etzcqlf8QpBsvosXwTe",tag:"_2jfxlVwie6ylJ-Gabg_PeE"}},3036:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(16)),u=a(634),l=r(a(3037)),c=r(a(3039)),o=r(a(3041)),i=r(a(3047)),f=r(a(3055)),s=r(a(3058)),d=r(a(3062)),p=r(a(3065)),m=r(a(3068)),h="/settings",v=globals.app.getPlatformSettingsNavs(),y=(0,n.default)(v,"[0].items[0].name","nodes"),E=[{path:h,component:l.default,routes:[{path:"".concat(h,"/base-info"),component:c.default},{path:"".concat(h,"/third-login"),component:o.default},{path:"".concat(h,"/mail"),component:i.default},{path:"".concat(h,"/feishu"),component:m.default},{path:"".concat(h,"/dingtalk"),component:f.default},{path:"".concat(h,"/wecom"),component:s.default},{path:"".concat(h,"/slack"),component:d.default},{path:"".concat(h,"/webhook"),component:p.default},(0,u.getIndexRoute)({path:h,to:"".concat(h,"/").concat(y),exact:!0}),(0,u.getIndexRoute)({path:"".concat(h,"/notification-configuration"),to:"".concat(h,"/mail"),exact:!0}),(0,u.getIndexRoute)({path:"*",to:"/404",exact:!0})]}];t.default=E},3037:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(12)),c=u(r(13)),o=u(r(19)),i=u(r(20)),f=u(r(18)),s=n(r(0)),d=r(634),p=r(656),m=r(25),h=u(r(3038));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.match,r=e.route,n=e.location;return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"ks-page-side"},s.default.createElement("div",{className:h.default.titleWrapper},s.default.createElement("div",{className:h.default.icon},s.default.createElement(m.Icon,{name:"cogwheel",size:40,type:"light"})),s.default.createElement("div",{className:h.default.text},s.default.createElement("div",{className:"h6"},t("PLATFORM_SETTINGS")))),s.default.createElement(p.Nav,{className:"ks-page-nav",navs:globals.app.getPlatformSettingsNavs(),location:n,match:a})),s.default.createElement("div",{className:"ks-page-main"},(0,d.renderRoutes)(r.routes)))}}]),r}(s.Component);a.default=y},3038:function(e,t,a){e.exports={titleWrapper:"_22Dj0wzjufRSsZvAq6JDsd",icon:"_8WMN5i2cu0TIiBKNNfL2F",text:"_2fwfJWRgYjHWsM9zzuX8HJ"}},3039:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(12)),c=u(r(13)),o=u(r(19)),i=u(r(20)),f=u(r(18)),s=n(r(0)),d=u(r(723)),p=u(r(275)),m=u(r(724)),h=u(r(3040));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={showEdit:!1},e.showEdit=function(){e.setState({showEdit:!0})},e.hideEdit=function(){e.setState({showEdit:!1})},e.handleEdit=function(){},e}return(0,c.default)(r,[{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(m.default,{icon:"home",title:t("PLATFORM_INFORMATION"),description:t("PLATFORM_INFO_DESC")}),s.default.createElement(d.default,{title:t("BASIC_INFORMATION")},s.default.createElement("div",{className:h.default.header},s.default.createElement(p.default,{icon:"image",title:location.host,description:t("PLATFORM_ADDRESS")})),s.default.createElement("div",{className:h.default.content},s.default.createElement("div",{className:h.default.image},s.default.createElement("img",{src:"/assets/logo.png",alt:""})),s.default.createElement("div",{className:h.default.info},s.default.createElement(p.default,{title:globals.config.title,description:t("PLATFORM_TITLE")}),s.default.createElement(p.default,{title:globals.config.description||t("KS_DESCRIPTION"),description:t("PLATFORM_DESCRIPTION")})))))}}]),r}(s.Component);a.default=y},3040:function(e,t,a){e.exports={header:"_2JOcoqtC-u6w8ftvT7_BUc",content:"_3V0JNfmSu8j6NYqmnMKPR3",image:"_2-kR0HtnVEpARxqkUZWD2J",info:"_1A5ndzO--Hmwev3b5PWNMd"}},3041:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(12)),c=u(r(13)),o=u(r(19)),i=u(r(20)),f=u(r(18)),s=n(r(0)),d=r(25),p=u(r(723)),m=u(r(275)),h=u(r(724)),v=u(r(3042)),y=u(r(3044)),E=u(r(3046));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,o.default)(r,e);var a=g(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={showOAuth:!1,selectOAuth:{},showGithubOAuth:!1},e.showOAuth=function(){e.setState({showOAuth:!0})},e.hideOAuth=function(){e.setState({showOAuth:!1})},e.handleOAuth=function(){e.hideOAuth()},e.showGithubOAuth=function(){e.setState({showGithubOAuth:!0})},e.hideGithubOAuth=function(){e.setState({showGithubOAuth:!1})},e.handleGithubOAuth=function(){e.hideGithubOAuth()},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.state,a=e.showOAuth,r=e.selectOAuth,n=e.showGithubOAuth;return s.default.createElement("div",null,s.default.createElement(h.default,{icon:"passport",title:t("Third-party Login"),description:t("THIRD_PARTY_LOGIN_DESC"),tips:this.tips}),s.default.createElement("div",{className:E.default.title},t("Current third-party login configurations")),s.default.createElement(p.default,null,s.default.createElement(m.default,{icon:"github",title:"Github OAuth",description:t("Protocol Type")}),s.default.createElement("div",{className:E.default.status},s.default.createElement(m.default,{title:"Github OAuth ".concat(t("not configured")),description:"GitHub OAuth uses organization membership to grant access. "}),s.default.createElement(d.Button,{onClick:this.showGithubOAuth},t("Configure")," Github OAuth"))),s.default.createElement(p.default,null,s.default.createElement(m.default,{icon:"safe-notice",title:"OAuth",description:t("Protocol Type")}),s.default.createElement("div",{className:E.default.status},s.default.createElement(m.default,{title:"OAuth ".concat(t("not configured")),description:t("OAUTH_DESC")}),s.default.createElement(d.Button,{onClick:this.showOAuth},t("Configure")," OAuth"))),s.default.createElement(v.default,{visible:a,detail:r,onOk:this.handleOAuth,onCancel:this.hideOAuth}),s.default.createElement(y.default,{visible:n,detail:{},onOk:this.handleGithubOAuth,onCancel:this.hideGithubOAuth}))}},{key:"tips",get:function(){return[{title:t("THIRD_PARTY_LOGIN_Q"),description:t("THIRD_PARTY_LOGIN_A")}]}}]),r}(s.Component);a.default=S},3042:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(12)),l=n(r(13)),c=n(r(19)),o=n(r(20)),i=n(r(18)),f=n(r(0)),s=n(r(1)),d=n(r(833)),p=r(25),m=n(r(274)),h=n(r(3043));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).state={formData:(0,d.default)(e.detail)},t}return(0,l.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,d.default)(this.props.detail)})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onOk,u=e.onCancel,l=this.state.formData;return f.default.createElement(m.default.Form,{data:l,width:960,title:"OAuth",description:t("OAUTH_DESC"),icon:"safe-notice",onOk:n,onCancel:u,visible:a,isSubmitting:r},f.default.createElement(p.Columns,{className:h.default.content},f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")}]},f.default.createElement(p.Input,{name:"name"})),f.default.createElement(p.Form.Item,{label:t("Client ID"),rules:[{required:!0,message:t("Please input client id")}]},f.default.createElement(p.Input,{name:"clientID"}))),f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,{label:t("Server Address"),rules:[{required:!0,message:t("Please input server address")}]},f.default.createElement(p.Input,{name:"server"})),f.default.createElement(p.Form.Item,{label:t("Client Secret")},f.default.createElement(p.Input,{name:"secret"})))))}}]),r}(f.default.Component);a.default=y,y.propTypes={detail:s.default.object,visible:s.default.bool,onOk:s.default.func,onCancel:s.default.func,isSubmitting:s.default.bool},y.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},3043:function(e,t,a){e.exports={content:"KY43lBJeJSPyRUj2YB4A8"}},3044:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(12)),l=n(r(13)),c=n(r(19)),o=n(r(20)),i=n(r(18)),f=n(r(0)),s=n(r(1)),d=n(r(833)),p=r(25),m=n(r(274)),h=n(r(3045));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).state={formData:(0,d.default)(e.detail)},t}return(0,l.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,d.default)(this.props.detail)})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onOk,u=e.onCancel,l=this.state.formData;return f.default.createElement(m.default.Form,{data:l,width:960,title:"Github OAuth",description:t("GITHUB_OAUTH_DESC"),icon:"github",onOk:n,onCancel:u,visible:a,isSubmitting:r},f.default.createElement(p.Columns,{className:h.default.content},f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")}]},f.default.createElement(p.Input,{name:"name",defaultValue:"github",disabled:!0})),f.default.createElement(p.Form.Item,{label:t("Client ID"),rules:[{required:!0,message:t("Please input client id")}],desc:f.default.createElement("a",{href:"https://github.com/settings/applications/new",target:"_blank",rel:"noreferrer noopener"},t("How to obtain a Github client ID ?"))},f.default.createElement(p.Input,{name:"clientID"}))),f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,{label:t("Server Address"),rules:[{required:!0,message:t("Please input server address")}]},f.default.createElement(p.Input,{name:"server",defaultValue:"https://github.com/login/oauth/access_token",disabled:!0})),f.default.createElement(p.Form.Item,{label:t("Client Secret")},f.default.createElement(p.Input,{name:"secret"})))))}}]),r}(f.default.Component);a.default=y,y.propTypes={detail:s.default.object,visible:s.default.bool,onOk:s.default.func,onCancel:s.default.func,isSubmitting:s.default.bool},y.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},3045:function(e,t,a){e.exports={content:"_1pk6cz1TzVxq4YbJPr2iDV"}},3046:function(e,t,a){e.exports={title:"_240OB_CtDn-X1PYJwCTzNH",status:"_3TXmrEH_QnQICChYYy7UQh"}},3047:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,l=n(r(49)),c=n(r(136)),o=n(r(50)),i=n(r(12)),f=n(r(13)),s=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(70),v=n(r(32)),y=n(r(16)),E=n(r(73)),g=n(r(738)),S=n(r(185)),b=r(25),T=n(r(723)),k=n(r(3048)),_=n(r(922)),C=n(r(967)),N=n(r(923)),R=n(r(924)),D=r(292),I=n(r(733));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A="default-email-config",O="global-email-receiver",P="global-email-config-secret",x=(0,h.observer)(u=function(e){(0,s.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),f=0;f<n;f++)u[f]=arguments[f];return(e=a.call.apply(a,[this].concat(u))).configStore=new C.default,e.receiverStore=new N.default,e.secretStore=new R.default,e.state={formData:{config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},formStatus:"create",isLoading:!1},e.formData={config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},e.fetchData=(0,o.default)(l.default.mark((function t(){var a,r,n,u,o,i;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,e.configStore.fetchList({type:"email"});case 3:if(a=t.sent,r=a.find((function(e){return(0,y.default)(e,"metadata.name")===A})),(0,v.default)(r)){t.next=14;break}return t.next=8,Promise.all([e.receiverStore.fetchList({name:O}),e.secretStore.fetchList({name:P})]);case 8:n=t.sent,u=(0,c.default)(n,2),o=u[0],i=u[1],e.formData={config:(0,E.default)(e.configFormTemplate,"spec",r.spec),receiver:o[0],secret:(0,E.default)(e.secretTemplate,"data",(0,y.default)(i,"[0].data",{}))},e.setState({formData:(0,S.default)(e.formData),formStatus:"update"});case 14:e.setState({isLoading:!1});case 15:case"end":return t.stop()}}),t)}))),e.getVerifyFormTemplate=function(e){var t=(0,S.default)(e),a=t.config,r=t.receiver,n=t.secret;return(0,E.default)(a,"spec.email.authPassword.value",(0,y.default)(n,"data.authPassword")),(0,g.default)(r,"spec.email.alertSelector"),{config:a,receiver:r,secret:n}},e.handleSubmit=function(){var a=(0,o.default)(l.default.mark((function a(r){var n,u,c,o,i,f,s;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=(0,S.default)(r),u=n.config,c=n.receiver,o=n.secret,i=e.state.formStatus,s=(0,y.default)(o,"data"),Object.keys(s).forEach((function(e){s[e]=(0,D.safeBtoa)(s[e])})),(0,E.default)(u,"spec.email.authPassword.valueFrom.secretKeyRef.key","authPassword"),(0,E.default)(u,"spec.email.authPassword.valueFrom.secretKeyRef.name",P),"create"!==i){a.next=16;break}return a.next=9,e.configStore.create(u);case 9:return a.next=11,e.secretStore.create((0,E.default)(e.secretTemplate,"data",s));case 11:return a.next=13,e.receiverStore.create(c);case 13:f=t("ADDED_SUCCESS_DESC"),a.next=23;break;case 16:return a.next=18,e.configStore.update({name:A},u);case 18:return a.next=20,e.secretStore.update({name:P},(0,E.default)(e.secretTemplate,"data",s));case 20:return a.next=22,e.receiverStore.update({name:O},c);case 22:f=t("UPDATE_SUCCESSFUL");case 23:e.fetchData(),b.Notify.success({content:f,duration:1e3});case 25:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.onFormClose=function(){e.setState({formData:(0,S.default)(e.formData)})},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.formData,a=e.isLoading;return m.default.createElement("div",null,m.default.createElement(_.default,{type:"mail"}),m.default.createElement(T.default,{loading:a},m.default.createElement(k.default,{data:t,onCancel:this.onFormClose,onSubmit:this.handleSubmit,getVerifyFormTemplate:this.getVerifyFormTemplate,isSubmitting:this.receiverStore.isSubmitting})))}},{key:"configFormTemplate",get:function(){return I.default.notificationconfigs({name:A})}},{key:"receiverFormTemplate",get:function(){return I.default.notificationreceivers({name:O,type:"email"})}},{key:"secretTemplate",get:function(){return I.default.globalsecret({name:P})}}]),r}(m.default.Component))||u;a.default=x},3048:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(71)),c=u(r(56)),o=u(r(12)),i=u(r(13)),f=u(r(19)),s=u(r(20)),d=u(r(18)),p=n(r(0)),m=u(r(16)),h=r(25),v=u(r(1012)),y=r(58),E=u(r(921)),g=u(r(3054)),S=u(r(1458));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=function(e){(0,f.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={checked:(0,m.default)(e.props.data,"config.spec.email.requireTLS",!1)},e.handleChangeCheck=function(t){e.setState({checked:t})},e}return(0,i.default)(r,[{key:"renderServiceSetting",value:function(){var e=this.state.checked;return p.default.createElement("div",{className:S.default.row},p.default.createElement("div",{className:S.default.title},t("SERVER_SETTINGS")),p.default.createElement("div",{className:S.default.item},p.default.createElement(h.Form.Item,{label:t("SMTP_SERVER_ADDRESS")},p.default.createElement(v.default,{className:S.default.urlInput,portName:"config.spec.email.smartHost.port",hostName:"config.spec.email.smartHost.host",hostRules:[{required:!0,message:t("ADDRESS_EMPTY_DESC")},{pattern:y.PATTERN_HOST,message:t("INVALID_ADDRESS_DESC")}],portRules:[{required:!0,message:t("ENTER_PORT_NUMBER")},{pattern:y.PATTERN_PORT,message:t("INVALID_PORT_DESC")}],defaultPort:25})),p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{className:S.default.sslCheckbox,name:"config.spec.email.requireTLS",checked:e,onChange:this.handleChangeCheck},t("USE_SSL_SECURE_CONNECTION"))),p.default.createElement(h.Form.Item,{label:t("SMTP_USER"),rules:[{required:!0,message:t("SMTP_USER_EMPTY_DESC")}]},p.default.createElement(h.Input,{name:"config.spec.email.authUsername",placeholder:"admin@example.com"})),p.default.createElement(h.Form.Item,{label:t("SMTP_PASSWORD"),rules:[{required:!0,message:t("ENTER_PASSWORD_TIP")}]},p.default.createElement(h.InputPassword,{name:"secret.data.authPassword",type:"password",autoComplete:"new-password"})),p.default.createElement(h.Form.Item,{label:t("SENDER_EMAIL"),rules:[{required:!0,message:t("EMAIL_EMPTY_DESC")},{type:"email",message:t("INVALID_EMAIL_ADDRESS_DESC")}]},p.default.createElement(h.Input,{name:"config.spec.email.from",placeholder:"admin@example.com"}))))}},{key:"renderReceiverSetting",value:function(){var e=this.props.wrapperClassName;return p.default.createElement("div",{className:S.default.row},p.default.createElement("div",{className:S.default.title},t("RECIPIENT_SETTINGS")),p.default.createElement("div",{className:S.default.item},p.default.createElement(h.Form.Item,{rules:[{required:!0,message:t("ENTER_RECIPIENT_EMAIL_DESC")}]},p.default.createElement(g.default,{className:e,name:"receiver.spec.email.to"}))))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.data,r=e.onChange,n=e.hideFooter,u=(0,c.default)(e,["user","data","onChange","hideFooter"]);return p.default.createElement(E.default,(0,l.default)({name:"email",module:"mail",icon:"email",data:a,onChange:r,hideFooter:n,user:t},u),!t&&this.renderServiceSetting(),this.renderReceiverSetting())}}]),r}(p.Component);a.default=T},3049:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),u=r(a(56)),l=r(a(12)),c=r(a(13)),o=r(a(19)),i=r(a(20)),f=r(a(18)),s=r(a(0)),d=a(1),p=r(a(298)),m=r(a(745)),h=a(25);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,o.default)(a,e);var t=v(a);function a(e){var r;return(0,l.default)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=r.props.onChange;r.setState({value:e}),t!==p.default&&t(e)},r.state={value:e.value||!1},r}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.onText,r=e.offText,l=(0,u.default)(e,["name","onText","offText"]),c=this.state.value;return s.default.createElement(h.Toggle,(0,n.default)({},l,{name:t,onText:a,offText:r,checked:c,onChange:this.handleChange}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.value;return"value"in e&&!(0,m.default)(e.value,a)?{value:e.value}:null}}]),a}(s.default.Component);t.default=y,y.propTypes={name:d.PropTypes.string,onText:d.PropTypes.string,offText:d.PropTypes.string,value:d.PropTypes.bool,onChange:d.PropTypes.func},y.defaultProps={onChange:p.default}},3050:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,u=r(a(12)),l=r(a(13)),c=r(a(19)),o=r(a(20)),i=r(a(18)),f=r(a(74)),s=a(5);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var p=(n=function(e){(0,c.default)(a,e);var t=d(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).module="verification",e}return(0,l.default)(a,[{key:"checkInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return request.post("".concat(this.apiVersion,"/configs/notification/").concat(this.getPath(t),"/").concat(this.module),e)}},{key:"apiVersion",get:function(){return"kapis/notification.kubesphere.io/v2beta2"}}]),a}(r(a(1029)).default),(0,f.default)(n.prototype,"checkInfo",[s.action],Object.getOwnPropertyDescriptor(n.prototype,"checkInfo"),n.prototype),n);t.default=p},3051:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(109)),l=n(r(12)),c=n(r(13)),o=n(r(19)),i=n(r(20)),f=n(r(18)),s=n(r(0)),d=n(r(32)),p=r(25),m=n(r(1304)),h=r(836),v=r(58),y=n(r(3052));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=E(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).handleNameChange=function(e,t){n.setState({keyName:t})},n.handleAddItem=function(){var e=n.state,a=e.keyItems,r=e.keyName;v.PATTERN_TAG.test(r)?n.setState({keyItems:[].concat((0,u.default)(a),[{label:r,value:r}]),keyName:""}):p.Notify.error({content:t("PATTERN_TAG_INVALID_TIP")})},n.handleKeyChange=function(e){n.setState({key:e,values:[]},(function(){return n.handleChange()}))},n.handleOperatorChange=function(e){n.setState({operator:e},(function(){return n.handleChange()}))},n.handleValueChange=function(e){n.setState({values:e},(function(){return n.handleChange()}))},n.handleChange=function(){var e=n.state,t=e.key,a=e.operator,r=e.values;n.props.onChange({key:t,operator:a,values:["Exists","DoesNotExist"].includes(a)?[]:r})},n.dorpdownRender=function(e){var t=n.state.keyName;return s.default.createElement("div",{className:y.default.optionsContainer},s.default.createElement("div",{className:y.default.optionsList},e),s.default.createElement("div",{className:y.default.customSelect},s.default.createElement(p.Input,{className:y.default.customInput,value:t,onChange:n.handleNameChange}),s.default.createElement("div",{className:y.default.iconWrapper,onClick:n.handleAddItem},s.default.createElement(p.Icon,{name:"add",type:"light",size:12}))))},n.state=n.getInitialData(),n}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){if(e.value!==this.props.value){var t=this.props.value||{},a=t.key,r=void 0===a?"":a,n=t.operator,u=void 0===n?"":n,l=t.values,c=void 0===l?[]:l;this.setState({key:r,operator:u,values:c})}}},{key:"getInitialData",value:function(){var e=this.props.value||{},t=e.key,a=e.operator,r=e.values;return{key:t,operator:a,values:r,keyName:"",keyItems:t&&(0,d.default)(this.keys.find((function(e){return e.value===t})))?[].concat((0,u.default)(this.keys),[{label:t,value:t}]):(0,u.default)(this.keys)}}},{key:"renderValues",value:function(){var e=this.state,a=e.key,r=e.operator,n=e.values;return"Exists"===r||"DoesNotExist"===r?null:"severity"===a?s.default.createElement(p.Select,{name:"values",value:n,options:this.severities,multi:!0,onChange:this.handleValueChange,placeholder:t("VALUES")}):s.default.createElement(m.default,{name:"values",placeholder:t("VALUES"),value:n,onChange:this.handleValueChange})}},{key:"render",value:function(){var e=this.state,a=e.key,r=e.operator,n=e.keyItems;return s.default.createElement("div",{className:y.default.selectWrapper},s.default.createElement(p.Select,{name:"key",value:a,options:n,placeholder:t("LABEL"),onChange:this.handleKeyChange,dorpdownRender:this.dorpdownRender}),s.default.createElement(p.Select,{name:"operator",value:r,options:this.operators,onChange:this.handleOperatorChange,placeholder:t("CONDITION_OPERATOR")}),this.renderValues())}},{key:"keys",get:function(){return[{label:t("ALERTING_NAME"),value:"alertname"},{label:t("ALERTING_SEVERITY"),value:"severity"},{label:t("PROJECT"),value:"namespace"},{label:t("POD"),value:"pod"},{label:t("CONTAINER"),value:"container"}]}},{key:"operators",get:function(){return[{label:t("INCLUDES_VALUES"),value:"In"},{label:t("DOES_NOT_INCLUDE_VALUES"),value:"NotIn"},{label:t("EXISTS"),value:"Exists"},{label:t("DOES_NOT_EXIST"),value:"DoesNotExist"}]}},{key:"severities",get:function(){return h.SEVERITY_LEVEL.map((function(e){return{label:t(e.label),value:e.value,level:e}}))}}]),r}(s.default.Component);a.default=g},3052:function(e,t,a){e.exports={selectWrapper:"_3Q-vSjBsPVa1cWcNQgDJR5",optionsContainer:"_2Wib9obMhM5UwdLP6qjC5T",optionsList:"_9pQC5xaI9f4MzBkYKGAZB",customSelect:"_2AQi3m6oVvbPaIYLHFR7xP",iconWrapper:"_33Att7kcwNaPZ8FzNU0Xcy"}},3053:function(e,t,a){e.exports={header:"_22ALTOnSqv-OBctNSh-yr",action:"_387mT2Z_KU1mqOXU01FvHp",contentWrapper:"_2i9fUH4W721BffhnIB_30e",isHorizon:"CSYmHDLZQJUkow6PLs1_g",item:"_18KaqkEBKZYSEO-x5aX0C0",annotation:"_2DBwJ48w5esK1kqRCwiJEc",desc:"_1lJGDrMo-26yS66124FyQb",footer:"_13SX5rGpPIQlYwbnt4w2vS"}},3054:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(109)),l=n(r(12)),c=n(r(13)),o=n(r(19)),i=n(r(20)),f=n(r(18)),s=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(32)),h=r(25),v=n(r(652)),y=n(r(913)),E=r(58),g=n(r(278)),S=n(r(1458));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var T=function(e){(0,o.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=a.call.apply(a,[this].concat(c))).userStore=new g.default,e.validateMail=function(a){var r=e.props.value,n=globals.config.notification.wecom.max_number_of_email;if(a)if(r.length>n-1)h.Notify.error({content:t.html("MAX_EAMIL_COUNT",{count:n}),duration:1e3});else if(r.some((function(e){return e===a})))h.Notify.error({content:t("EMAIL_EXISTS"),duration:1e3});else{if(E.PATTERN_EMAIL.test(a))return!0;h.Notify.error({content:t("INVALID_EMAIL"),duration:1e3})}else h.Notify.error({content:t("EMAIL_EMPTY_DESC"),duration:1e3})},e.handleAdd=function(t){var a=e.props,r=a.value;(0,a.onChange)([].concat((0,u.default)(r),[t]))},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)(r.filter((function(e){return e!==t})))},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this,t=this.props,a=t.value,r=t.className;return s.default.createElement("div",{className:(0,p.default)(S.default.wrapper,r)},s.default.createElement(y.default,{placeholder:"user@example.com",validate:this.validateMail,onAdd:this.handleAdd}),!(0,m.default)(a)&&s.default.createElement("div",{className:S.default.listWrapper},s.default.createElement(v.default,null,a.map((function(t){return s.default.createElement(v.default.Item,{key:t,className:S.default.listItem,title:t,onDelete:function(){return e.handleDelete(t)}})})))))}}]),r}(s.default.Component);a.default=T,T.propTypes={value:d.default.array,onChange:d.default.func},T.defaultProps={value:[],onChange:function(){}}},3055:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,l=n(r(49)),c=n(r(136)),o=n(r(50)),i=n(r(12)),f=n(r(13)),s=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(70),v=n(r(23)),y=n(r(32)),E=n(r(16)),g=n(r(73)),S=n(r(738)),b=n(r(185)),T=r(25),k=n(r(723)),_=n(r(3056)),C=n(r(922)),N=n(r(967)),R=n(r(923)),D=n(r(924)),I=r(292),w=n(r(733));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O="default-dingtalk-config",P="global-dingtalk-receiver",x="global-dingtalk-config-secret",F=(0,h.observer)(u=function(e){(0,s.default)(r,e);var a=A(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),f=0;f<n;f++)u[f]=arguments[f];return(e=a.call.apply(a,[this].concat(u))).configStore=new N.default,e.receiverStore=new R.default,e.secretStore=new D.default,e.state={formData:{config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},isLoading:!1},e.formData={config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},e.fetchData=(0,o.default)(l.default.mark((function t(){var a,r,n,u,o,i;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,Promise.all([e.configStore.fetchList({type:"dingtalk"}),e.receiverStore.fetchList({name:P}),e.secretStore.fetchList({name:x})]);case 3:a=t.sent,r=(0,c.default)(a,3),n=r[0],u=r[1],o=r[2],i=n.find((function(e){return(0,E.default)(e,"metadata.name")===O})),e.formData={config:i||e.configFormTemplate,receiver:(0,g.default)(e.receiverFormTemplate,"spec",(0,E.default)(u,"[0].spec",{})),secret:(0,g.default)(e.secretTemplate,"data",(0,E.default)(o,"[0].data",{}))},e.setState({formData:(0,b.default)(e.formData)}),e.setState({isLoading:!1});case 12:case"end":return t.stop()}}),t)}))),e.getVerifyFormTemplate=function(e){var t={},a=(0,b.default)(e),r=a.receiver,n=a.secret,u=(0,E.default)(r,"spec.dingtalk.conversation.chatids"),l=(0,E.default)(r,"spec.dingtalk.chatbot.keywords"),c=(0,E.default)(n,"data",{}),o=c.appkey,i=c.appsecret,f=c.webhook,s=c.chatbotsecret;return o&&(0,g.default)(t,"config.spec.dingtalk.conversation.appkey.value",o),i&&(0,g.default)(t,"config.spec.dingtalk.conversation.appsecret.value",i),(0,y.default)(u)||(0,g.default)(t,"receiver.spec.dingtalk.conversation.chatids",u),f&&(0,g.default)(t,"receiver.spec.dingtalk.chatbot.webhook.value",f),s&&(0,g.default)(t,"receiver.spec.dingtalk.chatbot.secret.value",s),(0,y.default)(l)||(0,g.default)(t,"receiver.spec.dingtalk.chatbot.keywords",l),t},e.handleVerify=function(e){var a=e.receiver,r=e.secret,n=(0,E.default)(a,"spec.dingtalk.chatbot.keywords"),u=(0,E.default)(a,"spec.dingtalk.conversation.chatids"),l=(0,E.default)(r,"data",{}),c=l.appkey,o=l.appsecret,i=l.webhook,f=l.chatbotsecret;if([c,o,u,i,f,n].every((function(e){return(0,v.default)(e)?(0,y.default)(e):!e})))return T.Notify.error({content:t("DINGTALK_SETTING_TIP")}),!1;if(c||o||!(0,y.default)(u)){if(!c)return T.Notify.error({content:t("PLEASE_ENTER_VALUE_CUSTOM",{value:t("AppKey")})}),!1;if(!o)return T.Notify.error({content:t("PLEASE_ENTER_VALUE_CUSTOM",{value:t("AppSecret")})}),!1;if((0,y.default)(u))return T.Notify.error({content:t("PLEASE_ENTER_VALUE_CUSTOM",{value:t("CONVERSATION_ID")})}),!1}if(i||f||!(0,y.default)(n)){if(!i)return T.Notify.error({content:t("PLEASE_ENTER_VALUE_CUSTOM",{value:t("Webhook URL")})}),!1;if(!f&&(0,y.default)(n))return T.Notify.error({content:t("DINGTALK_CHATBOT_SECURITY_TIP")}),!1}return!0},e.getResource=(0,o.default)(l.default.mark((function t(){var a,r,n,u,o;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.configStore.getResource({name:O}),e.receiverStore.getResource({name:P}),e.secretStore.getResource({name:x})]);case 2:return a=t.sent,r=(0,c.default)(a,3),n=r[0],u=r[1],o=r[2],t.abrupt("return",{isExitConfig:n,isExitReceiver:u,isExitSecret:o});case 8:case"end":return t.stop()}}),t)}))),e.handleSubmit=function(){var t=(0,o.default)(l.default.mark((function t(a){var r,n,u,c,o,i,f,s,d,p;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(0,b.default)(a),n=r.config,u=r.receiver,c=r.secret,e.handleVerify(a)){t.next=3;break}return t.abrupt("return");case 3:return o=(0,E.default)(c,"data",{}),Object.keys(o).forEach((function(e){o[e]=(0,I.safeBtoa)(o[e])})),(0,g.default)(n,"spec.dingtalk.conversation.appkey.valueFrom.secretKeyRef.key","appkey"),(0,g.default)(n,"spec.dingtalk.conversation.appkey.valueFrom.secretKeyRef.name",x),(0,g.default)(n,"spec.dingtalk.conversation.appsecret.valueFrom.secretKeyRef.key","appsecret"),(0,g.default)(n,"spec.dingtalk.conversation.appsecret.valueFrom.secretKeyRef.name",x),(0,g.default)(u,"spec.dingtalk.chatbot.webhook.valueFrom.secretKeyRef.key","webhook"),(0,g.default)(u,"spec.dingtalk.chatbot.webhook.valueFrom.secretKeyRef.name",x),(0,g.default)(u,"spec.dingtalk.chatbot.secret.valueFrom.secretKeyRef.key","chatbotsecret"),(0,g.default)(u,"spec.dingtalk.chatbot.secret.valueFrom.secretKeyRef.name",x),o.appkey||(0,S.default)(n,"spec.dingtalk.conversation.appkey"),o.appsecret||(0,S.default)(n,"spec.dingtalk.conversation.appsecret"),i=(0,E.default)(n,"spec.dingtalk.conversation"),(0,y.default)(i)&&(0,S.default)(n,"spec.dingtalk.conversation"),o.webhook||(0,S.default)(u,"spec.dingtalk.chatbot.webhook"),o.chatbotsecret||(0,S.default)(u,"spec.dingtalk.chatbot.secret"),(0,y.default)((0,E.default)(u,"spec.dingtalk.conversation.chatids"))&&(0,S.default)(u,"spec.dingtalk.conversation"),(0,y.default)((0,E.default)(u,"spec.dingtalk.chatbot.keywords"))&&(0,S.default)(u,"spec.dingtalk.chatbot.keywords"),(0,y.default)((0,E.default)(u,"spec.dingtalk.chatbot"))&&(0,S.default)(u,"spec.dingtalk.chatbot"),t.next=24,e.getResource();case 24:if(f=t.sent,s=f.isExitConfig,d=f.isExitReceiver,p=f.isExitSecret,!s){t.next=38;break}if(!(0,y.default)((0,E.default)(u,"spec.dingtalk.conversation.chatids"))){t.next=34;break}return t.next=32,e.configStore.delete({name:O});case 32:t.next=36;break;case 34:return t.next=36,e.configStore.update({name:O},n);case 36:t.next=41;break;case 38:return(0,S.default)(n,"metadata.resourceVersion"),t.next=41,e.configStore.create(n);case 41:if(!d){t.next=46;break}return t.next=44,e.receiverStore.update({name:P},u);case 44:t.next=48;break;case 46:return t.next=48,e.receiverStore.create(u);case 48:if(!p){t.next=53;break}return t.next=51,e.secretStore.update({name:x},(0,g.default)(e.secretTemplate,"data",o));case 51:t.next=55;break;case 53:return t.next=55,e.secretStore.create((0,g.default)(e.secretTemplate,"data",o));case 55:return t.next=57,e.fetchData();case 57:T.Notify.success({content:"操作成功",duration:1e3});case 58:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFormClose=function(){e.setState({formData:(0,b.default)(e.formData)})},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.formData,a=e.isLoading;return m.default.createElement("div",null,m.default.createElement(C.default,{type:"dingtalk"}),m.default.createElement(k.default,{loading:a},m.default.createElement(_.default,{data:t,onCancel:this.onFormClose,onSubmit:this.handleSubmit,onVerify:this.handleVerify,getVerifyFormTemplate:this.getVerifyFormTemplate,isSubmitting:this.receiverStore.isSubmitting})))}},{key:"configFormTemplate",get:function(){return w.default.notificationconfigs({name:O})}},{key:"receiverFormTemplate",get:function(){return w.default.notificationreceivers({name:P,type:"dingtalk"})}},{key:"secretTemplate",get:function(){return w.default.globalsecret({name:x})}}]),r}(m.default.Component))||u;a.default=F},3056:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(71)),c=u(r(56)),o=u(r(12)),i=u(r(13)),f=u(r(19)),s=u(r(20)),d=u(r(18)),p=n(r(0)),m=u(r(16)),h=r(25),v=u(r(921)),y=u(r(3057)),E=u(r(1459)),g=u(r(1154));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=h.Tabs.TabPanel,T=function(e){(0,f.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).validateCid=function(a){var r=(0,m.default)(e.props.data,"receiver.spec.dingtalk.conversation.chatids",[]),n=globals.config.notification.dingtalk.max_number_of_cid;if(a)if(r.length>n-1)h.Notify.error({content:t.html("MAX_CID_COUNT",{count:n}),durantion:1e3});else{if(!r.includes(a))return!0;h.Notify.error({content:t("CONVERSATION_ID_EXISTS"),duration:1e3})}else h.Notify.error({content:t("ENTER_CONVERSATION_ID_DESC"),durantion:1e3})},e.validateKeywords=function(a){var r=(0,m.default)(e.props.data,"receiver.spec.dingtalk.chatbot.keywords",[]),n=globals.config.notification.dingtalk.max_number_of_keyword;if(a)if(r.length>n-1)h.Notify.error({content:t.html("MAX_KEYWORD_COUNT",{count:n}),durantion:1e3});else{if(!r.includes(a))return!0;h.Notify.error({content:t("KEYWORD_EXISTS"),duration:1e3})}else h.Notify.error({content:t("ENTER_KEYWORD_DESC"),durantion:1e3})},e}return(0,i.default)(r,[{key:"renderLabel",value:function(){return p.default.createElement("div",{className:g.default.labelWrapper},p.default.createElement("span",null,t("CONVERSATION_ID")),this.props.user&&p.default.createElement(h.Tooltip,{content:t("CONVERSATION_ID_TIP")},p.default.createElement(h.Icon,{className:g.default.tip,name:"question"})))}},{key:"renderServiceSetting",value:function(){return p.default.createElement("div",{className:g.default.row},p.default.createElement("div",{className:g.default.title},t("CONVERSATION_SETTINGS")),p.default.createElement("div",{className:g.default.item},p.default.createElement(h.Form.Item,{label:t("AppKey")},p.default.createElement(h.Input,{name:"secret.data.appkey"})),p.default.createElement(h.Form.Item,{label:t("AppSecret")},p.default.createElement(h.Input,{name:"secret.data.appsecret"}))))}},{key:"renderReceiverSetting",value:function(){var e=this.props.wrapperClassName;return p.default.createElement("div",{className:g.default.row},p.default.createElement("div",{className:g.default.title},p.default.createElement("span",null,t("RECIPIENT_SETTINGS"))),p.default.createElement("div",{className:g.default.item},p.default.createElement(h.Form.Item,{label:this.renderLabel()},p.default.createElement(y.default,{className:e,name:"receiver.spec.dingtalk.conversation.chatids",title:t("CONVERSATION_ID"),placeholder:" ",validate:this.validateCid}))))}},{key:"renderChatSetting",value:function(){var e=this.props.wrapperClassName;return p.default.createElement("div",{className:g.default.row},p.default.createElement("div",{className:g.default.title},p.default.createElement("span",null,t("CHATBOT_SETTINGS"))),p.default.createElement("div",{className:g.default.item},p.default.createElement(h.Form.Item,{label:t("Webhook URL")},p.default.createElement(h.Input,{name:"secret.data.webhook"})),p.default.createElement(h.Form.Item,{label:t("DINGTALK_SECRET")},p.default.createElement(h.Input,{name:"secret.data.chatbotsecret"})),p.default.createElement(h.Form.Item,null,p.default.createElement(E.default,{className:e,name:"receiver.spec.dingtalk.chatbot.keywords",validate:this.validateKeywords}))))}},{key:"render",value:function(){var e=this.props,a=e.user,r=e.data,n=e.onChange,u=e.hideFooter,o=(0,c.default)(e,["user","data","onChange","hideFooter"]);return p.default.createElement(v.default,(0,l.default)({name:"dingtalk",module:"DingTalk",icon:"dingtalk",data:r,onChange:n,hideFooter:u,user:a},o),p.default.createElement(h.Tabs,{type:"button"},p.default.createElement(b,{label:t("CONVERSATION_SETTINGS"),name:"conversation"},p.default.createElement(p.default.Fragment,null,!a&&this.renderServiceSetting(),this.renderReceiverSetting())),p.default.createElement(b,{label:t("CHATBOT_SETTINGS"),name:"chatbot"},this.renderChatSetting())))}}]),r}(p.Component);a.default=T},3057:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(109)),u=r(a(12)),l=r(a(13)),c=r(a(19)),o=r(a(20)),i=r(a(18)),f=r(a(0)),s=r(a(1)),d=r(a(3)),p=r(a(32)),m=r(a(652)),h=r(a(913)),v=r(a(1154));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var E=function(e){(0,c.default)(a,e);var t=y(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).handleAdd=function(t){var a=e.props,r=a.value;(0,a.onChange)([].concat((0,n.default)(r),[t]))},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)(r.filter((function(e){return e!==t})))},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.value,r=t.placeholder,n=t.validate,u=t.className;return f.default.createElement("div",{className:(0,d.default)(v.default.wrapper,u)},f.default.createElement(h.default,{className:v.default.wrapper,placeholder:r,validate:n,onAdd:this.handleAdd}),!(0,p.default)(a)&&f.default.createElement("div",{className:v.default.listWrapper},f.default.createElement(m.default,null,a.map((function(t){return f.default.createElement(m.default.Item,{key:t,className:v.default.listItem,title:t,onDelete:function(){return e.handleDelete(t)}})})))))}}]),a}(f.default.Component);t.default=E,E.propTypes={value:s.default.array,onChange:s.default.func},E.defaultProps={value:[],onChange:function(){}}},3058:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,l=n(r(49)),c=n(r(136)),o=n(r(50)),i=n(r(12)),f=n(r(13)),s=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(70),v=n(r(32)),y=n(r(16)),E=n(r(73)),g=n(r(738)),S=n(r(185)),b=r(25),T=n(r(723)),k=n(r(3059)),_=n(r(922)),C=n(r(967)),N=n(r(923)),R=n(r(924)),D=r(292),I=n(r(733));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A="default-wechat-config",O="global-wechat-receiver",P="global-wechat-config-secret",x=(0,h.observer)(u=function(e){(0,s.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),f=0;f<n;f++)u[f]=arguments[f];return(e=a.call.apply(a,[this].concat(u))).configStore=new C.default,e.receiverStore=new N.default,e.secretStore=new R.default,e.state={formData:{config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},formStatus:"create",isLoading:!1},e.formData={config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},e.fetchData=(0,o.default)(l.default.mark((function t(){var a,r,n,u,o,i;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,e.configStore.fetchList({type:"wechat"});case 3:if(a=t.sent,r=a.find((function(e){return(0,y.default)(e,"metadata.name")===A})),(0,v.default)(r)){t.next=14;break}return t.next=8,Promise.all([e.receiverStore.fetchList({name:O}),e.secretStore.fetchList({name:P})]);case 8:n=t.sent,u=(0,c.default)(n,2),o=u[0],i=u[1],e.formData={config:(0,E.default)(e.configFormTemplate,"spec",r.spec),receiver:(0,E.default)(e.receiverFormTemplate,"spec",(0,y.default)(o,"[0].spec",{})),secret:(0,E.default)(e.secretTemplate,"data",(0,y.default)(i,"[0].data",{}))},e.setState({formData:(0,S.default)(e.formData),formStatus:"update"});case 14:e.setState({isLoading:!1});case 15:case"end":return t.stop()}}),t)}))),e.getVerifyFormTemplate=function(e){var t=(0,S.default)(e),a=t.config,r=t.receiver,n=t.secret;return(0,E.default)(a,"spec.wechat.wechatApiSecret.value",(0,y.default)(n,"data.appsecret")),(0,g.default)(r,"spec.wechat.alertSelector"),(0,g.default)(a,"spec.wechat.wechatApiSecret.valueFrom"),{config:a,receiver:r,secret:n}},e.handleSubmit=function(){var a=(0,o.default)(l.default.mark((function a(r){var n,u,c,o,i,f,s;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=(0,S.default)(r),u=n.config,c=n.receiver,o=n.secret,i=e.state.formStatus,s=(0,y.default)(o,"data"),Object.keys(s).forEach((function(e){s[e]=(0,D.safeBtoa)(s[e])})),(0,E.default)(u,"spec.wechat.wechatApiSecret.valueFrom.secretKeyRef.key","appsecret"),(0,E.default)(u,"spec.wechat.wechatApiSecret.valueFrom.secretKeyRef.name",P),"create"!==i){a.next=16;break}return a.next=9,e.configStore.create(u);case 9:return a.next=11,e.secretStore.create((0,E.default)(e.secretTemplate,"data",s));case 11:return a.next=13,e.receiverStore.create(c);case 13:f=t("ADDED_SUCCESS_DESC"),a.next=23;break;case 16:return a.next=18,e.configStore.update({name:A},u);case 18:return a.next=20,e.secretStore.update({name:P},(0,E.default)(e.secretTemplate,"data",s));case 20:return a.next=22,e.receiverStore.update({name:O},c);case 22:f=t("UPDATE_SUCCESSFUL");case 23:e.fetchData(),b.Notify.success({content:f,duration:1e3});case 25:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.onFormClose=function(){e.setState({formData:(0,S.default)(e.formData)})},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.formData,a=e.isLoading;return m.default.createElement("div",null,m.default.createElement(_.default,{type:"wecom"}),m.default.createElement(T.default,{loading:a},m.default.createElement(k.default,{data:t,onCancel:this.onFormClose,onSubmit:this.handleSubmit,getVerifyFormTemplate:this.getVerifyFormTemplate,isSubmitting:this.receiverStore.isSubmitting})))}},{key:"configFormTemplate",get:function(){return I.default.notificationconfigs({name:A})}},{key:"receiverFormTemplate",get:function(){return I.default.notificationreceivers({name:O,type:"wechat"})}},{key:"secretTemplate",get:function(){return I.default.globalsecret({name:P})}}]),r}(m.default.Component))||u;a.default=x},3059:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(71)),c=u(r(56)),o=u(r(12)),i=u(r(13)),f=u(r(19)),s=u(r(20)),d=u(r(18)),p=n(r(0)),m=u(r(16)),h=u(r(32)),v=r(25),y=u(r(3060)),E=u(r(921)),g=u(r(3061)),S=u(r(1460));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=function(e){(0,f.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).state={type:"toUser"},e.validate=function(a){var r=e.state.type,n=(0,m.default)(e.props.data,"receiver.spec.wechat.".concat(r),[]),u=globals.config.notification.wecom["max_number_of_".concat(r)];if(a)if(n.length>u-1)v.Notify.error({content:t.html("MAX_".concat(r.toUpperCase(),"_COUNT"),{count:u}),duration:1e3});else{if(!n.includes(a))return!0;v.Notify.error({content:t("".concat(r.toUpperCase(),"_EXISTS")),duration:1e3})}else v.Notify.error({content:t("ENTER_".concat(r.toUpperCase(),"_TIP")),duration:1e3})},e.receiverValidator=function(a,r,n){if(["toParty","toUser","toTag"].every((function(t){return(0,h.default)((0,m.default)(e.props.data,"receiver.spec.wechat.".concat(t)))})))return n({message:t("RECIPIENT_SETTINGS_TIP")});n()},e.handleTypeChange=function(t){e.setState({type:t})},e}return(0,i.default)(r,[{key:"renderServiceSetting",value:function(){return p.default.createElement("div",{className:S.default.row},p.default.createElement("div",{className:S.default.title},t("SERVER_SETTINGS")),p.default.createElement("div",{className:S.default.item},p.default.createElement(v.Form.Item,{label:t("WECOM_CORP_ID"),rules:[{required:!0,message:t("ENTER_WECOM_CORP_ID_DESC")}]},p.default.createElement(v.Input,{name:"config.spec.wechat.wechatApiCorpId"})),p.default.createElement(v.Form.Item,{label:t("WECOM_AGENT_ID"),rules:[{required:!0,message:t("ENTER_WECOM_AGENT_ID_DESC")}]},p.default.createElement(v.Input,{name:"config.spec.wechat.wechatApiAgentId"})),p.default.createElement(v.Form.Item,{label:t("WECOM_SECRET"),rules:[{required:!0,message:t("ENTER_WECOM_SECRET_DESC")}]},p.default.createElement(v.Input,{name:"secret.data.appsecret"}))))}},{key:"renderReceiverSetting",value:function(){var e=this.state.type,a=this.props.wrapperClassName;return p.default.createElement("div",{className:S.default.row},p.default.createElement("div",{className:S.default.title},t("RECIPIENT_SETTINGS")),p.default.createElement("div",{className:S.default.subTitle},t("RECIPIENT_SETTINGS_TIP")),p.default.createElement("div",{className:S.default.item},p.default.createElement("div",{className:"margin-b12"},p.default.createElement(y.default,{value:e,onChange:this.handleTypeChange,options:this.tabs})),p.default.createElement(v.Form.Item,{rules:[{validator:this.receiverValidator}]},p.default.createElement(g.default,{name:"receiver.spec.wechat.".concat(e),className:a,validate:this.validate,type:e}))))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.data,r=e.onChange,n=e.hideFooter,u=(0,c.default)(e,["user","data","onChange","hideFooter"]);return p.default.createElement(E.default,(0,l.default)({name:"wechat",module:"WeCom",icon:"wecom",data:a,onChange:r,hideFooter:n,user:t},u),!t&&this.renderServiceSetting(),this.renderReceiverSetting())}},{key:"tabs",get:function(){return[{label:t("USER_ID"),value:"toUser"},{label:t("DEPARTMENT_ID"),value:"toParty"},{label:t("TAG_ID"),value:"toTag"}]}}]),r}(p.Component);a.default=T},3060:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),u=r(a(56)),l=r(a(12)),c=r(a(13)),o=r(a(19)),i=r(a(20)),f=r(a(18)),s=r(a(0)),d=r(a(32)),p=r(a(68)),m=r(a(1)),h=r(a(3)),v=a(25);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,o.default)(a,e);var t=y(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.options,r=e.onChange,l=(0,u.default)(e,["value","options","onChange"]);return(0,d.default)(a)?null:s.default.createElement(v.RadioGroup,(0,n.default)({wrapClassName:(0,h.default)("radio-group-button",{"radio-with-badge":a.every((function(e){return!(0,p.default)(e.count)}))}),value:t,onChange:r},l),a.filter((function(e){return!e.hidden})).map((function(e){return s.default.createElement(v.RadioButton,{key:e.value,value:e.value},e.label,!(0,p.default)(e.count)&&s.default.createElement(v.Badge,{status:e.value===t?"success":"default",count:Number(e.count)}))})))}}]),a}(s.default.Component);t.default=E,E.propTypes={options:m.default.array,value:m.default.any,onChange:m.default.func}},3061:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(109)),c=u(r(12)),o=u(r(13)),i=u(r(19)),f=u(r(20)),s=u(r(18)),d=n(r(0)),p=u(r(1)),m=u(r(3)),h=u(r(32)),v=r(25),y=u(r(913)),E=u(r(1460));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleAdd=function(t){var a=e.props,r=a.value;(0,a.onChange)([].concat((0,l.default)(r),[t]))},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)(r.filter((function(e){return e!==t})))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.validate,n=a.type,u=a.value,l=a.className,c=n.toUpperCase();return d.default.createElement("div",{className:(0,m.default)(E.default.wrapper,l)},d.default.createElement(y.default,{placeholder:t("WECOM_".concat(c.toUpperCase(),"_PLACEHOLDER")),validate:r,onAdd:this.handleAdd}),d.default.createElement("p",{className:"margin-t8"},t("".concat(n.toUpperCase(),"_LIST"))),d.default.createElement("div",{className:(0,m.default)(E.default.boxWrapper,l)},(0,h.default)(u)?d.default.createElement("div",{className:E.default.empty},t("EMPTY_".concat(c,"_DESC"))):u.map((function(t){return d.default.createElement(v.Tag,{className:E.default.tag,key:t},t,d.default.createElement(v.Icon,{name:"close",type:"light",size:12,clickable:!0,onClick:function(){return e.handleDelete(t)}}))}))))}}]),r}(d.Component);a.default=S,S.propTypes={value:p.default.array,onChange:p.default.func},S.defaultProps={value:[],onChange:function(){}}},3062:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,l=n(r(49)),c=n(r(136)),o=n(r(50)),i=n(r(12)),f=n(r(13)),s=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=r(70),v=n(r(32)),y=n(r(16)),E=n(r(73)),g=n(r(738)),S=n(r(185)),b=r(25),T=n(r(723)),k=n(r(3063)),_=n(r(922)),C=n(r(967)),N=n(r(923)),R=n(r(924)),D=r(292),I=n(r(733));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A="global-slack-receiver",O="global-slack-config-token",P=(0,h.observer)(u=function(e){(0,s.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),f=0;f<n;f++)u[f]=arguments[f];return(e=a.call.apply(a,[this].concat(u))).configStore=new C.default,e.receiverStore=new N.default,e.secretStore=new R.default,e.state={formData:{config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},formStatus:"create",isLoading:!1},e.formData={config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},e.fetchData=(0,o.default)(l.default.mark((function t(){var a,r,n,u,o,i;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,e.configStore.fetchList({type:"slack"});case 3:if(a=t.sent,r=a.find((function(e){return"default-slack-config"===(0,y.default)(e,"metadata.name")})),(0,v.default)(r)){t.next=14;break}return t.next=8,Promise.all([e.receiverStore.fetchList({name:A}),e.secretStore.fetchList({name:O})]);case 8:n=t.sent,u=(0,c.default)(n,2),o=u[0],i=u[1],e.formData={config:r,receiver:(0,E.default)(e.receiverFormTemplate,"spec",(0,y.default)(o,"[0].spec",{})),secret:(0,E.default)(e.secretTemplate,"data",(0,y.default)(i,"[0].data",{}))},e.setState({formData:(0,S.default)(e.formData),formStatus:"update"});case 14:e.setState({isLoading:!1});case 15:case"end":return t.stop()}}),t)}))),e.getVerifyFormTemplate=function(e){var t=(0,S.default)(e),a=t.config,r=t.receiver,n=t.secret;return(0,E.default)(a,"spec.slack.slackTokenSecret.value",(0,y.default)(n,"data.token")),(0,g.default)(r,"spec.slack.alertSelector"),(0,g.default)(a,"spec.slack.slackTokenSecret.valueFrom"),{config:a,receiver:r,secret:n}},e.handleSubmit=function(){var a=(0,o.default)(l.default.mark((function a(r){var n,u,c,o,i,f,s;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=(0,S.default)(r),u=n.config,c=n.receiver,o=n.secret,i=e.state.formStatus,f=(0,D.safeBtoa)((0,y.default)(o,"data.token")),(0,E.default)(u,"spec.slack.slackTokenSecret.valueFrom.secretKeyRefkey.key","token"),(0,E.default)(u,"spec.slack.slackTokenSecret.valueFrom.secretKeyRefkey.name",O),(0,E.default)(o,"data.token",f),"create"!==i){a.next=16;break}return a.next=9,e.configStore.create(u);case 9:return a.next=11,e.secretStore.create(o);case 11:return a.next=13,e.receiverStore.create(c);case 13:s=t("ADDED_SUCCESS_DESC"),a.next=21;break;case 16:return a.next=18,e.secretStore.update({name:O},o);case 18:return a.next=20,e.receiverStore.update({name:A},c);case 20:s=t("UPDATE_SUCCESSFUL");case 21:e.fetchData(),b.Notify.success({content:s,duration:1e3});case 23:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.onFormClose=function(){e.setState({formData:(0,S.default)(e.formData)})},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.formData,a=e.isLoading;return m.default.createElement("div",null,m.default.createElement(_.default,{type:"slack"}),m.default.createElement(T.default,{loading:a},m.default.createElement(k.default,{data:t,onCancel:this.onFormClose,onSubmit:this.handleSubmit,getVerifyFormTemplate:this.getVerifyFormTemplate,isSubmitting:this.receiverStore.isSubmitting})))}},{key:"configFormTemplate",get:function(){return I.default.notificationconfigs({name:"default-slack-config"})}},{key:"receiverFormTemplate",get:function(){return I.default.notificationreceivers({name:A,type:"slack"})}},{key:"secretTemplate",get:function(){return I.default.globalsecret({name:O})}}]),r}(m.default.Component))||u;a.default=P},3063:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(71)),c=u(r(56)),o=u(r(12)),i=u(r(13)),f=u(r(19)),s=u(r(20)),d=u(r(18)),p=n(r(0)),m=r(25),h=u(r(921)),v=u(r(3064)),y=u(r(1461));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,f.default)(r,e);var a=E(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"renderServiceSetting",value:function(){return p.default.createElement("div",{className:y.default.row},p.default.createElement("div",{className:y.default.title},t("SERVER_SETTINGS")),p.default.createElement("div",{className:y.default.item},p.default.createElement(m.Form.Item,{label:t("SLACK_TOKEN"),rules:[{required:!0,message:t("SLACK_TOKEN_DESC")}]},p.default.createElement(m.Input,{name:"secret.data.token"}))))}},{key:"renderReceiverSetting",value:function(){var e=this.props.wrapperClassName;return p.default.createElement("div",{className:y.default.row},p.default.createElement("div",{className:y.default.title},t("CHANNEL_SETTINGS")),p.default.createElement("div",{className:y.default.item},p.default.createElement(m.Form.Item,{rules:[{required:!0,message:t("CHANNEL_SETTINGS_DESC")}]},p.default.createElement(v.default,{name:"receiver.spec.slack.channels",className:e}))))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.data,r=e.onChange,n=e.hideFooter,u=(0,c.default)(e,["user","data","onChange","hideFooter"]);return p.default.createElement(h.default,(0,l.default)({name:"slack",module:"slack",icon:"slack",data:a,onChange:r,hideFooter:n,user:t},u),!t&&this.renderServiceSetting(),this.renderReceiverSetting())}}]),r}(p.Component);a.default=g},3064:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(109)),l=n(r(12)),c=n(r(13)),o=n(r(19)),i=n(r(20)),f=n(r(18)),s=n(r(0)),d=n(r(1)),p=n(r(3)),m=n(r(32)),h=r(25),v=n(r(913)),y=n(r(1461));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=a.call.apply(a,[this].concat(c))).validateChannel=function(a){var r=e.props.value,n=globals.config.notification.dingtalk.max_number_of_keyword;if(a)if(r.length>n-1)h.Notify.error({content:t.html("MAX_CHANNEL_COUNT",{count:n}),durantion:1e3});else{if(!r.some((function(e){return e===a})))return!0;h.Notify.error({content:t("CHANNEL_EXISTS"),duration:1e3})}else h.Notify.error({content:t("ADD_CHANNEL_DESC"),duration:1e3})},e.handleAdd=function(t){var a=e.props,r=a.value;(0,a.onChange)([].concat((0,u.default)(r),[t]))},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)(r.filter((function(e){return e!==t})))},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.value,n=a.className;return s.default.createElement("div",null,s.default.createElement(v.default,{className:y.default.wrapper,placeholder:t("SLACK_CHANNEL"),onAdd:this.handleAdd,validate:this.validateChannel}),s.default.createElement("p",{className:"margin-t8"},t("ADDED_CHANNELS")),s.default.createElement("div",{className:(0,p.default)(y.default.boxWrapper,n)},(0,m.default)(r)?s.default.createElement("div",{className:y.default.empty},t("EMPTY_CHANNEL_DESC")):r.map((function(t){return s.default.createElement(h.Tag,{className:y.default.tag,key:t},t,s.default.createElement(h.Icon,{name:"close",size:12,clickable:!0,onClick:function(){return e.handleDelete(t)}}))}))))}}]),r}(s.default.Component);a.default=g,g.propTypes={value:d.default.array,onChange:d.default.func},g.defaultProps={value:[],onChange:function(){}}},3065:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,l=n(r(49)),c=n(r(50)),o=n(r(12)),i=n(r(13)),f=n(r(19)),s=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(70),h=n(r(32)),v=n(r(16)),y=n(r(73)),E=n(r(738)),g=n(r(185)),S=r(25),b=n(r(723)),T=n(r(3066)),k=n(r(922)),_=n(r(923)),C=n(r(924)),N=r(292),R=n(r(733));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var I="global-webhook-receiver",w="global-webhook-config-secret",A=(0,m.observer)(u=function(e){(0,f.default)(r,e);var a=D(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),i=0;i<n;i++)u[i]=arguments[i];return(e=a.call.apply(a,[this].concat(u))).receiverStore=new _.default,e.secretStore=new C.default,e.state={formData:{receiver:e.receiverFormTemplate,secret:e.secretTemplate},formStatus:"create",isLoading:!1},e.formData={receiver:e.receiverFormTemplate,secret:e.secretTemplate},e.fetchData=(0,c.default)(l.default.mark((function t(){var a,r,n,u;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,e.receiverStore.fetchList({type:"webhook"});case 3:if(a=t.sent,r=a.find((function(e){return(0,v.default)(e,"metadata.name")===I})),(0,h.default)(r)){t.next=12;break}return t.next=8,e.secretStore.fetchList({name:w});case 8:n=t.sent,u=(0,v.default)(n,"[0].data",{}),e.formData={receiver:r,secret:(0,y.default)(e.secretTemplate,"data",u)},e.setState({formData:(0,g.default)(e.formData),formStatus:"update"});case 12:e.setState({isLoading:!1});case 13:case"end":return t.stop()}}),t)}))),e.getVerifyFormTemplate=function(e){var t=(0,g.default)(e),a=t.receiver,r=t.secret,n=(0,v.default)(a,'metadata.annotations["kubesphere.io/verify-type"]'),u=(0,v.default)(a,"spec.webhook.httpConfig.basicAuth.username"),l=(0,v.default)(r,"data",{}),c=l.password,o=l.token;return(0,E.default)(a,"spec.webhook.httpConfig.bearerToken"),(0,E.default)(a,"spec.webhook.httpConfig.basicAuth"),"basic"===n&&c&&((0,y.default)(a,"spec.webhook.httpConfig.basicAuth.password.value",c),(0,y.default)(a,"spec.webhook.httpConfig.basicAuth.username",u)),"token"===n&&o&&(0,y.default)(a,"spec.webhook.httpConfig.bearerToken.value",o),(0,E.default)(a,"spec.webhook.alertSelector"),{receiver:a}},e.handleSubmit=function(){var a=(0,c.default)(l.default.mark((function a(r){var n,u,c,o,i,f,s,d,p,m;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=(0,g.default)(r),u=n.receiver,c=n.secret,o=e.state.formStatus,i=(0,v.default)(u,'metadata.annotations["kubesphere.io/verify-type"]'),f=(0,v.default)(u,"spec.webhook.httpConfig.basicAuth.username"),s=(0,N.safeBtoa)((0,v.default)(c,"data.password")),d=(0,N.safeBtoa)((0,v.default)(c,"data.token")),p={},(0,E.default)(u,"spec.webhook.httpConfig.bearerToken"),(0,E.default)(u,"spec.webhook.httpConfig.basicAuth"),"basic"===i&&((0,y.default)(p,"password",s),(0,y.default)(u,"spec.webhook.httpConfig.basicAuth.username",f),(0,y.default)(u,"spec.webhook.httpConfig.basicAuth.password.key","password"),(0,y.default)(u,"spec.webhook.httpConfig.basicAuth.password.name",w)),"token"===i&&((0,y.default)(p,"token",d),(0,y.default)(u,"spec.webhook.httpConfig.bearerToken.key","token"),(0,y.default)(u,"spec.webhook.httpConfig.bearerToken.name",w)),"create"!==o){a.next=19;break}return a.next=14,e.secretStore.create((0,y.default)(e.secretTemplate,"data",p));case 14:return a.next=16,e.receiverStore.create(u);case 16:m=t("ADDED_SUCCESS_DESC"),a.next=24;break;case 19:return a.next=21,e.secretStore.update({name:w},(0,y.default)(e.secretTemplate,"data",p));case 21:return a.next=23,e.receiverStore.update({name:I},u);case 23:m=t("UPDATE_SUCCESSFUL");case 24:e.fetchData(),S.Notify.success({content:m,duration:1e3});case 26:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.onFormClose=function(){e.setState({formData:(0,g.default)(e.formData)})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.formData,a=e.isLoading;return p.default.createElement("div",null,p.default.createElement(k.default,{type:"webhook"}),p.default.createElement(b.default,{loading:a},p.default.createElement(T.default,{data:t,onCancel:this.onFormClose,onSubmit:this.handleSubmit,getVerifyFormTemplate:this.getVerifyFormTemplate,isSubmitting:this.receiverStore.isSubmitting})))}},{key:"receiverFormTemplate",get:function(){return R.default.notificationreceivers({name:I,type:"webhook"})}},{key:"secretTemplate",get:function(){return R.default.globalsecret({name:w})}}]),r}(p.default.Component))||u;a.default=A},3066:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(71)),c=u(r(56)),o=u(r(12)),i=u(r(13)),f=u(r(19)),s=u(r(20)),d=u(r(18)),p=n(r(0)),m=u(r(16)),h=r(25),v=u(r(952)),y=u(r(921)),E=u(r(3067));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,f.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={type:(0,m.default)(e.props.data,'receiver.metadata.annotations["kubesphere.io/verify-type"]',""),enabled:(0,m.default)(e.props.data,"receiver.spec.webhook.httpConfig.tlsConfig.insecureSkipVerify",!1)},e.handleTypeChange=function(t){e.setState({type:t})},e.handleChangeCheck=function(t){e.setState({enabled:t})},e}return(0,i.default)(r,[{key:"renderServiceSetting",value:function(){var e=this.state,a=e.type,r=e.enabled;return p.default.createElement("div",{className:E.default.row},p.default.createElement("div",{className:E.default.title},t("SERVER_SETTINGS")),p.default.createElement("div",{className:E.default.item},p.default.createElement(h.Form.Item,{label:t("Webhook URL"),rules:[{required:!0,message:t("WEBHOOK_URL_DESC")}]},p.default.createElement(h.Input,{name:"receiver.spec.webhook.url"})),p.default.createElement(h.Form.Item,{label:t("VERIFICATION_TYPE"),rules:[{required:!0,message:t("VERIFICATION_TYPE_DESC")}]},p.default.createElement(h.Select,{name:"receiver.metadata.annotations['kubesphere.io/verify-type']",value:a,options:this.options,onChange:this.handleTypeChange,placeholder:" "})),"basic"===a&&p.default.createElement(p.default.Fragment,null,p.default.createElement(h.Form.Item,{label:t("USERNAME"),rules:[{required:!0,message:t("WEBHOOK_USERNAME_EMPTY_DESC")}]},p.default.createElement(h.Input,{name:"receiver.spec.webhook.httpConfig.basicAuth.username"})),p.default.createElement(h.Form.Item,{label:t("PASSWORD"),rules:[{required:!0,message:t("WEBHOOK_PASSWORD_EMPTY_DESC")}]},p.default.createElement(v.default,{name:"secret.data.password",type:"password",autoComplete:"new-password"}))),"token"===a&&p.default.createElement(p.default.Fragment,null,p.default.createElement(h.Form.Item,{label:t("TOKEN"),rules:[{required:!0,message:t("WEBHOOK_TOKEN_EMPTY_DESC")}]},p.default.createElement(h.Input,{name:"secret.data.token"}))),p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{name:"receiver.spec.webhook.httpConfig.tlsConfig.insecureSkipVerify",checked:r,onChange:this.handleChangeCheck},t("SKIP_TLS_VERFICATION")))))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.data,r=e.onChange,n=e.hideFooter,u=(0,c.default)(e,["user","data","onChange","hideFooter"]);return p.default.createElement(y.default,(0,l.default)({name:"webhook",module:"webhook",icon:"webhook",data:a,onChange:r,hideFooter:n,user:t},u),this.renderServiceSetting())}},{key:"options",get:function(){return[{label:t("NO_AUTH"),value:"no"},{label:t("BEARER_TOKEN"),value:"token"},{label:t("BASIC_AUTH"),value:"basic"}]}}]),r}(p.Component);a.default=S},3067:function(e,t,a){e.exports={row:"_3VnLDYjLdHoxb33xLn5VuH",title:"_1ZsuBlfatMWIaoQC2wmrZK",item:"NwnaO1er604LDlEE8l-cB"}},3068:function(e,a,r){"use strict";var n=r(6),u=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,c=n(r(49)),o=n(r(136)),i=n(r(50)),f=n(r(12)),s=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=u(r(0)),v=n(r(23)),y=n(r(32)),E=n(r(16)),g=n(r(73)),S=n(r(738)),b=n(r(185)),T=r(70),k=n(r(922)),_=n(r(3069)),C=n(r(723)),N=r(25),R=n(r(923)),D=n(r(924)),I=n(r(967)),w=n(r(733)),A=r(292);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P="default-feishu-config",x="global-feishu-receiver",F="global-feishu-config-secret",L=(0,T.observer)(l=function(e){(0,d.default)(r,e);var a=O(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).receiverStore=new R.default,e.configStore=new I.default,e.secretStore=new D.default,e.state={formData:{config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},isLoading:!1},e.formData={config:e.configFormTemplate,receiver:e.receiverFormTemplate,secret:e.secretTemplate},e.fetchData=(0,i.default)(c.default.mark((function t(){var a,r,n,u,l,i;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.t0=Promise,t.next=4,e.configStore.fetchList({type:"feishu"});case 4:return t.t1=t.sent,t.t2=e.receiverStore.fetchList({name:x}),t.t3=e.secretStore.fetchList({name:F}),t.t4=[t.t1,t.t2,t.t3],t.next=10,t.t0.all.call(t.t0,t.t4);case 10:a=t.sent,r=(0,o.default)(a,3),n=r[0],u=r[1],l=r[2],i=n.find((function(e){return(0,E.default)(e,"metadata.name")===P})),e.formData={config:i||e.configFormTemplate,receiver:(0,g.default)(e.receiverFormTemplate,"spec",(0,E.default)(u,"[0].spec",{})),secret:(0,g.default)(e.secretTemplate,"data",(0,E.default)(l,"[0].data",{}))},e.setState({formData:(0,b.default)(e.formData)}),e.setState({isLoading:!1});case 19:case"end":return t.stop()}}),t)}))),e.getVerifyFormTemplate=function(e){var t={},a=(0,b.default)(e),r=a.receiver,n=a.secret,u=(0,E.default)(r,"spec.feishu.chatbot.keywords"),l=(0,E.default)(r,"spec.feishu.department"),c=(0,E.default)(r,"spec.feishu.user"),o=(0,E.default)(n,"data",{}),i=o.appkey,f=o.appsecret,s=o.webhook,d=o.chatbotsecret;return i&&(0,g.default)(t,"config.spec.feishu.appID.value",i),f&&(0,g.default)(t,"config.spec.feishu.appSecret.value",f),s&&(0,g.default)(t,"receiver.spec.feishu.chatbot.webhook.value",s),d&&(0,g.default)(t,"receiver.spec.feishu.chatbot.secret.value",d),(0,y.default)(u)||(0,g.default)(t,"receiver.spec.feishu.chatbot.keywords",u),(0,y.default)(l)||(0,g.default)(t,"receiver.spec.feishu.department",l),(0,y.default)(c)||(0,g.default)(t,"receiver.spec.feishu.user",c),t},e.handleVerify=function(e){var a=e.receiver,r=e.secret,n=(0,E.default)(a,"spec.feishu.chatbot.keywords"),u=(0,E.default)(a,"spec.feishu.department",[]),l=(0,E.default)(a,"spec.feishu.user",[]),c=(0,E.default)(r,"data",{}),o=c.appkey,i=c.appsecret,f=c.webhook,s=c.chatbotsecret;if([o,i,f,s,n].every((function(e){return(0,v.default)(e)?(0,y.default)(e):!e})))return N.Notify.error({content:t("DINGTALK_SETTING_TIP")}),!1;if(u.length>0||l.length>0){if(!o)return N.Notify.error({content:t("PLEASE_ENTER_VALUE_CUSTOM",{value:t("AppKey")})}),!1;if(!i)return N.Notify.error({content:t("PLEASE_ENTER_VALUE_CUSTOM",{value:t("AppSecret")})}),!1}if(f||s||!(0,y.default)(n)){if(!f)return N.Notify.error({content:t("PLEASE_ENTER_VALUE_CUSTOM",{value:t("Webhook URL")})}),!1;if(!s&&(0,y.default)(n))return N.Notify.error({content:t("DINGTALK_CHATBOT_SECURITY_TIP")}),!1}return!0},e.getResource=(0,i.default)(c.default.mark((function t(){var a,r,n,u,l;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.configStore.getResource({name:P}),e.receiverStore.getResource({name:x}),e.secretStore.getResource({name:F})]);case 2:return a=t.sent,r=(0,o.default)(a,3),n=r[0],u=r[1],l=r[2],t.abrupt("return",{isExitConfig:n,isExitReceiver:u,isExitSecret:l});case 8:case"end":return t.stop()}}),t)}))),e.handleSubmit=function(){var t=(0,i.default)(c.default.mark((function t(a){var r,n,u,l,o,i,f,s,d,p;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(0,b.default)(a),n=r.config,u=r.receiver,l=r.secret,e.handleVerify(a)){t.next=3;break}return t.abrupt("return");case 3:return o=(0,E.default)(l,"data",{}),Object.keys(o).forEach((function(e){o[e]=(0,A.safeBtoa)(o[e])})),(0,g.default)(n,"spec.feishu.appID.valueFrom.secretKeyRef.key","appkey"),(0,g.default)(n,"spec.feishu.appID.valueFrom.secretKeyRef.name",F),(0,g.default)(n,"spec.feishu.appSecret.valueFrom.secretKeyRef.name",F),(0,g.default)(n,"spec.feishu.appSecret.valueFrom.secretKeyRef.key","appsecret"),(0,g.default)(u,"spec.feishu.chatbot.webhook.valueFrom.secretKeyRef.key","webhook"),(0,g.default)(u,"spec.feishu.chatbot.webhook.valueFrom.secretKeyRef.name",F),(0,g.default)(u,"spec.feishu.chatbot.secret.valueFrom.secretKeyRef.key","chatbotsecret"),(0,g.default)(u,"spec.feishu.chatbot.secret.valueFrom.secretKeyRef.name",F),o.appkey||(0,S.default)(n,"spec.feishu.appID"),o.appsecret||(0,S.default)(n,"spec.feishu.appSecret"),i=(0,E.default)(n,"spec.dingtalk"),(0,y.default)(i)&&(0,S.default)(n,"spec.feishu"),o.webhook||(0,S.default)(u,"spec.feishu.chatbot.webhook"),o.chatbotsecret||(0,S.default)(u,"spec.feishu.chatbot.secret"),(0,y.default)((0,E.default)(u,"spec.feishu.chatbot.keywords"))&&(0,S.default)(u,"spec.feishu.chatbot.keywords"),(0,y.default)((0,E.default)(u,"spec.feishu.chatbot"))&&(0,S.default)(u,"spec.feishu.chatbot"),t.next=23,e.getResource();case 23:if(f=t.sent,s=f.isExitConfig,d=f.isExitReceiver,p=f.isExitSecret,!s){t.next=37;break}if(!(0,y.default)((0,E.default)(n,"spec.feishu"))){t.next=33;break}return t.next=31,e.configStore.delete({name:P});case 31:t.next=35;break;case 33:return t.next=35,e.configStore.update({name:P},n);case 35:t.next=40;break;case 37:return(0,S.default)(n,"metadata.resourceVersion"),t.next=40,e.configStore.create(n);case 40:if(!d){t.next=45;break}return t.next=43,e.receiverStore.update({name:x},u);case 43:t.next=47;break;case 45:return t.next=47,e.receiverStore.create(u);case 47:if(!p){t.next=52;break}return t.next=50,e.secretStore.update({name:F},(0,g.default)(e.secretTemplate,"data",o));case 50:t.next=54;break;case 52:return t.next=54,e.secretStore.create((0,g.default)(e.secretTemplate,"data",o));case 54:return t.next=56,e.fetchData();case 56:N.Notify.success({content:"操作成功",duration:1e3});case 57:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFormClose=function(){e.setState({formData:(0,b.default)(e.formData)})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.formData;return h.default.createElement("div",null,h.default.createElement(k.default,{type:"feishu"}),h.default.createElement(C.default,{loading:t},h.default.createElement(_.default,{data:a,onCancel:this.onFormClose,onSubmit:this.handleSubmit,onVerify:this.handleVerify,getVerifyFormTemplate:this.getVerifyFormTemplate,isSubmitting:this.receiverStore.isSubmitting})))}},{key:"configFormTemplate",get:function(){return w.default.notificationconfigs({name:P})}},{key:"receiverFormTemplate",get:function(){return w.default.notificationreceivers({name:x,type:"feishu"})}},{key:"secretTemplate",get:function(){return w.default.globalsecret({name:F})}}]),r}(h.Component))||l;a.default=L},3069:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(71)),c=u(r(56)),o=u(r(12)),i=u(r(13)),f=u(r(19)),s=u(r(20)),d=u(r(18)),p=n(r(0)),m=u(r(16)),h=r(25),v=u(r(921)),y=u(r(1459)),E=u(r(3070));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=h.Tabs.TabPanel,b=function(e){(0,f.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).validateKeywords=function(a){var r=(0,m.default)(e.props.data,"receiver.spec.feishu.chatbot.keywords",[]),n=globals.config.notification.feishu.max_number_of_keyword;if(a)if(r.length>n-1)h.Notify.error({content:t.html("MAX_KEYWORD_COUNT",{count:n}),durantion:1e3});else{if(!r.includes(a))return!0;h.Notify.error({content:t("KEYWORD_EXISTS"),duration:1e3})}else h.Notify.error({content:t("ENTER_KEYWORD_DESC"),durantion:1e3})},e}return(0,i.default)(r,[{key:"renderServiceSetting",value:function(){return p.default.createElement("div",{className:E.default.row},p.default.createElement("div",{className:E.default.title},t("CONVERSATION_SETTINGS")),p.default.createElement("div",{className:E.default.item},p.default.createElement(h.Form.Item,{label:t("AppKey")},p.default.createElement(h.Input,{name:"secret.data.appkey"})),p.default.createElement(h.Form.Item,{label:t("AppSecret")},p.default.createElement(h.Input,{name:"secret.data.appsecret"}))))}},{key:"renderReceiverSetting",value:function(){var e=this.props.wrapperClassName;return p.default.createElement("div",{className:E.default.row},p.default.createElement("div",{className:E.default.title},p.default.createElement("span",null,t("RECIPIENT_SETTINGS")),p.default.createElement("p",{className:E.default.subtitle},"至少需要配置一项方可接收通知")),p.default.createElement("div",{className:E.default.item},p.default.createElement(h.Tabs,{type:"button"},p.default.createElement(S,{label:t("USER_ID"),name:"conversation"},p.default.createElement(h.Form.Item,null,p.default.createElement(y.default,{className:e,title:t(""),listTitle:t("TOUSER_LIST"),emptyDesc:t("EMPTY_TOUSER_DESC"),placeholder:t("ENTER_TOUSER_TIP"),name:"receiver.spec.feishu.user",validate:this.validateKeywords}))),p.default.createElement(S,{label:t("DEPARTMENT_ID"),name:"chatbot"},p.default.createElement(h.Form.Item,null,p.default.createElement(y.default,{className:e,title:t(""),listTitle:t("TOPARTY_LIST"),emptyDesc:t("EMPTY_TOPARTY_DESC"),placeholder:t("ENTER_TOPARTY_TIP"),name:"receiver.spec.feishu.department",validate:this.validateKeywords}))))))}},{key:"renderChatSetting",value:function(){var e=this.props.wrapperClassName;return p.default.createElement("div",{className:E.default.row},p.default.createElement("div",{className:E.default.title},p.default.createElement("span",null,t("CHATBOT_SETTINGS"))),p.default.createElement("div",{className:E.default.item},p.default.createElement(h.Form.Item,{label:t("Webhook URL")},p.default.createElement(h.Input,{name:"secret.data.webhook"})),p.default.createElement(h.Form.Item,{label:t("DINGTALK_SECRET")},p.default.createElement(h.Input,{name:"secret.data.chatbotsecret"})),p.default.createElement(h.Form.Item,null,p.default.createElement(y.default,{className:e,name:"receiver.spec.feishu.chatbot.keywords",validate:this.validateKeywords}))))}},{key:"render",value:function(){var e=this.props,a=e.user,r=e.data,n=e.onChange,u=e.hideFooter,o=(0,c.default)(e,["user","data","onChange","hideFooter"]);return p.default.createElement(v.default,(0,l.default)({name:"feishu",module:"Feishu",icon:"feishu",data:r,onChange:n,hideFooter:u,user:a},o),p.default.createElement(h.Tabs,{type:"button"},p.default.createElement(S,{label:t("CONVERSATION_SETTINGS"),name:"conversation"},!a&&this.renderServiceSetting(),p.default.createElement(p.default.Fragment,null,this.renderReceiverSetting())),p.default.createElement(S,{label:t("CHATBOT_SETTINGS"),name:"chatbot"},this.renderChatSetting())))}}]),r}(p.Component);a.default=b},3070:function(e,t,a){e.exports={title:"w38gUtxv9TsKfvoAPzGLg",subtitle:"_1sN9qR8-xcipMqkjNomKrU",row:"_2RkkoTG18m5eYPXcTVUt9j",item:"_1xG2cy3wsSAKG_CRKOwumL"}},717:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(70),u=a(634),l=r(a(3036)),c=(0,n.inject)("rootStore")((function(){return(0,u.renderRoutes)(l.default)}));t.default=c},921:function(e,a,r){"use strict";var n=r(72),u=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(12)),c=u(r(13)),o=u(r(19)),i=u(r(20)),f=u(r(18)),s=n(r(0)),d=u(r(16)),p=u(r(73)),m=u(r(738)),h=u(r(32)),v=r(25),y=u(r(275)),E=u(r(808)),g=u(r(3049)),S=u(r(761)),b=u(r(3050)),T=u(r(733)),k=u(r(3051)),_=u(r(3053));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var N=function(e){(0,o.default)(r,e);var a=C(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).formRef=e.props.formRef||s.default.createRef(),e.verifyStore=new b.default,e.state={enabled:(0,d.default)(e.props.data,"receiver.spec.".concat(e.props.name,".enabled"),!1),isVerifying:!1},e.checkItemValid=function(e){return e.key&&e.operator},e.itemValidator=function(a,r,n){return r?r.some((function(t){return!e.checkItemValid(t)}))?n({message:t("INVALID_NOTIFICATION_CONDITION")}):void n():n()},e.handleSwitch=function(t){e.setState({enabled:t})},e.handleVerify=function(){var a=e.props,r=a.user,n=a.getVerifyFormTemplate,u=a.onVerify,l=e.formRef.current;l&&l.validate((function(){var a=l.getData(),c=T.default.notificationVerify({user:r}),o=n(a),i=o.config,f=o.receiver;u&&!u(a)||((0,p.default)(c,"config.spec",(0,d.default)(i,"spec",{})),(0,p.default)(c,"receiver.spec",(0,d.default)(f,"spec",{})),(0,h.default)(i)&&(0,m.default)(c,"config"),e.setState({isVerifying:!0}),e.verifyStore.checkInfo(c,{user:r}).then((function(a){e.setState({isVerifying:!1}),200===a.Status?v.Notify.success({content:t("SEND_TEST_MESSAGE_SUCCESS_DESC")}):v.Notify.error({content:a.Message})})))}))},e.handleSubmit=function(){var t=e.formRef.current;t&&t.validate((function(){e.props.onSubmit(t.getData())}))},e}return(0,c.default)(r,[{key:"renderEnableService",value:function(){var e=this.props,a=e.user,r=e.name,n=e.module,u=e.icon,l=this.state.enabled;return a?s.default.createElement("div",{className:_.default.contentWrapper},s.default.createElement(v.Form.Item,{className:_.default.isHorizon,text:t(l?t("ENABLED"):t("DISABLED"))},s.default.createElement(g.default,{name:"receiver.spec.".concat(r,".enabled"),value:l}))):s.default.createElement("div",{className:_.default.header},s.default.createElement(y.default,{className:_.default.title,icon:u,title:t("".concat(n.toUpperCase(),"_TITLE")),description:t("".concat(n.toUpperCase(),"_DESC"))}),s.default.createElement("div",{className:_.default.action},s.default.createElement(v.Form.Item,null,s.default.createElement(E.default,{name:"receiver.spec.".concat(r,".enabled"),text:t(l?t("ENABLED"):t("DISABLED")),checked:l,onChange:this.handleSwitch}))))}},{key:"renderControlAnnotation",value:function(){return s.default.createElement("div",{className:_.default.annotation},s.default.createElement(v.Icon,{name:"question"}),s.default.createElement("p",{className:_.default.desc},t.html("NOTIFICATION_CONDITION_SETTING_TIP")))}},{key:"renderControlSetting",value:function(){var e=this.props.name;return s.default.createElement(v.Form.Group,{label:t("NOTIFICATION_CONDITIONS"),desc:t("NOTIFICATION_CONDITION_SETTINGS_DESC"),checkable:!0},s.default.createElement(v.Form.Item,{rules:[{validator:this.itemValidator,checkOnSubmit:!0}]},s.default.createElement(S.default,{name:"receiver.spec.".concat(e,".alertSelector.matchExpressions"),itemType:"object",addText:t("ADD"),checkItemValid:this.checkItemValid,desc:this.renderControlAnnotation()},s.default.createElement(k.default,null))))}},{key:"renderVerifyAction",value:function(){var e=this.state.isVerifying;return s.default.createElement("div",{className:_.default.contentWrapper},s.default.createElement("p",null,t("SEND_TEST_MESSAGE_DESC")),s.default.createElement(v.Button,{className:_.default.action,onClick:this.handleVerify,loading:e},t("SEND_TEST_MESSAGE")))}},{key:"renderFooterBtns",value:function(){var e=this.props,a=e.onCancel,r=e.isSubmitting;return s.default.createElement("div",{className:_.default.footer},s.default.createElement(v.Button,{onClick:a},t("CANCEL")),s.default.createElement(v.Button,{type:"control",loading:r,onClick:this.handleSubmit},t("OK")))}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.onChange,r=e.hideFooter,n=e.children;return s.default.createElement(v.Form,{ref:this.formRef,data:t,onChange:a},s.default.createElement("div",{className:_.default.formBody},this.renderEnableService(),s.default.createElement("div",{className:_.default.contentWrapper},n,this.renderControlSetting()),this.renderVerifyAction()),!r&&this.renderFooterBtns())}}]),r}(s.Component);a.default=N},922:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u,l=n(r(12)),c=n(r(13)),o=n(r(19)),i=n(r(20)),f=n(r(18)),s=n(r(0)),d=r(70),p=n(r(724));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=(0,d.inject)("rootStore")(u=function(e){(0,o.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleTabChange=function(t){e.props.rootStore.routing.push("/settings/".concat(t))},e}return(0,c.default)(r,[{key:"render",value:function(){return s.default.createElement(p.default,{module:"notification",title:t("NOTIFICATION_CONFIGURATION"),description:t("NOTIFICATION_CONFIGURATION_DESC"),tabs:this.tabs})}},{key:"tabs",get:function(){return{value:this.props.type,onChange:this.handleTabChange,options:[{value:"mail",label:t("NOTIFICATION_EMAIL")},{value:"feishu",label:t("Feishu")},{value:"dingtalk",label:t("DingTalk")},{value:"wecom",label:t("WeCom")},{value:"slack",label:t("Slack")},{value:"webhook",label:t("Webhook")}]}}}]),r}(s.default.PureComponent))||u;a.default=h},923:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),u=r(a(19)),l=r(a(20)),c=r(a(18));function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var i=function(e){(0,u.default)(a,e);var t=o(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,u=new Array(r),l=0;l<r;l++)u[l]=arguments[l];return(e=t.call.apply(t,[this].concat(u))).module="receivers",e}return a}(r(a(1029)).default);t.default=i},924:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),u=r(a(19)),l=r(a(20)),c=r(a(18));function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var i=function(e){(0,u.default)(a,e);var t=o(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,u=new Array(r),l=0;l<r;l++)u[l]=arguments[l];return(e=t.call.apply(t,[this].concat(u))).module="secrets",e}return a}(r(a(1029)).default);t.default=i},967:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),u=r(a(19)),l=r(a(20)),c=r(a(18));function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var i=function(e){(0,u.default)(a,e);var t=o(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,u=new Array(r),l=0;l<r;l++)u[l]=arguments[l];return(e=t.call.apply(t,[this].concat(u))).module="configs",e}return a}(r(a(1029)).default);t.default=i}}]);