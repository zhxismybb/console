(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1035:function(e,t,r){e.exports={wrapper:"kovAnOBWnbXq-JlHU_VIP",cluster:"_1EpYMYludH_-IxTiJcMxz9",clusterLoading:"_34gsmPuVBqBUQYLF0aIvhy",scheduleCluster:"_2OBXZfvycGRODoc0s1-hEi",textWrapper:"_3gsJia0vEPvoV7rgPknk8Q",text:"_2CXdP5tWoZH9kLsqcMPgcE",icon:"_2kS7w0oWU2DFVal4VccUBf",bottom:"_14eMAldCS16L3-7wubxaT4",replicas:"_33X2z00tn1dxC0EsdKdhJL",pods:"_15U9Wo9GBtMtHz8A-LlO1h",more:"_1f6XH6RYJh3c9S47msjdY-",control:"_1-Fpu3XPZbpUJ-H33NUUKA",edit:"_3M72A2m-pBAJOiDIx5mXRK",indicator:"_1nLuS9q7OmVhqUNjpxd3qx",group:"_37Fw1BhM-BGh6-xHbB0ROe",titleBox:"Wm3KmLgy9-ioc64zaskqN",IconBox:"_1n51J1JGBYFqdhwNkK5K9c",right:"_1P23ECXnSY2rhW0yCLFiN5",totalBox:"_2CPRqwvpCEZvprHOxGKGxC",total:"_1xUqFi1s3g33Ut6ocGucZa",replicasInput:"_3b0Vhu1VlRb2r4ov1N_bG4",weight:"f92ZLYqLza7lGjiQIUNdl",value:"_1KAVXLkO7U9W4bOfF-bfZ4",spanText:"_1bXQGKTI9jGHqGEvmX_V9b",subText:"_2qOz41ujpcsfHRrFygnY16"}},1508:function(e,r,a){"use strict";var n=a(72),c=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=c(a(12)),u=c(a(13)),l=c(a(19)),i=c(a(20)),s=c(a(18)),f=c(a(16)),d=c(a(290)),p=n(a(0)),m=a(25),h=c(a(755)),v=a(58),y=a(289),g=c(a(3436));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var _=function(e){(0,l.default)(a,e);var r=E(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,r=e.data,a=e.clusters,n=e.module,c=(0,d.default)(a,"name");return p.default.createElement("div",{className:g.default.wrapper},p.default.createElement("div",{className:g.default.tags},r.clusters.map((function(e){var t=c[e.name];if(!t)return null;var a=(0,f.default)(r,"resources[".concat(t.name,"]"),{}),o=(0,f.default)(r,"clusterTemplates[".concat(t.name,"].spec.replicas"),0),u=(0,y.getWorkloadStatus)(a,n),l=u.status,i=u.reason;return p.default.createElement(m.Tag,{key:t.name,type:v.CLUSTER_GROUP_TAG_TYPE[t.group]},p.default.createElement(m.Icon,{name:v.CLUSTER_PROVIDER_ICON[t.provider]||"kubernetes",size:16,type:"light"}),p.default.createElement("span",null,a.availablePodNums||a.readyPodNums||0," /"," ",o)," ",i&&p.default.createElement(h.default,{status:l,data:a}))}))),p.default.createElement("p",null,t("REPLICAS_CURRENT"),"/",t("REPLICAS_DESIRED")))}}]),a}(p.Component);r.default=_},1509:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(a(0)),o=n(a(1)),u=a(276),l=a(25),i=n(a(275)),s=n(a(3472)),f=function(e){var r=e.gateway,a=e.rule,n=e.tls,o=void 0===n?{}:n,f=e.prefix,d=o.hosts&&o.hosts.includes(a.host)?"https":"http",p=a.host;if(r&&r.ports&&"NodePort"===r.type){var m=r.ports.find((function(e){return e.name===d}));m&&("http"===d&&80!==m.nodePort||"https"===d&&443!==m.nodePort)&&(p="".concat(p,":").concat(m.nodePort))}var h=c.default.createElement(c.default.Fragment,null,c.default.createElement("span",null,t("PROTOCOL_VALUE",{value:d.toUpperCase()})),"  ","https"===d&&c.default.createElement("span",null,t("CERTIFICATE_VALUE",{value:o.secretName})));return c.default.createElement("div",{className:s.default.card},c.default.createElement("span",{className:s.default.tip},t("UNABLE_TO_ACCESS"),"  ",c.default.createElement(l.Tooltip,{content:t.html("UNABLE_TO_ACCESS_TIP")},c.default.createElement(l.Icon,{name:"question"}))),c.default.createElement(i.default,{icon:"ip",title:p,description:h}),a.http.paths.map((function(e){return c.default.createElement("div",{key:e.path,className:s.default.path},c.default.createElement(l.Columns,null,c.default.createElement(l.Column,null,c.default.createElement("span",null,t.html("ROUTE_PATH_VALUE",{value:e.path}))),c.default.createElement(l.Column,null,c.default.createElement("span",null,t("SERVICE_COLON"),c.default.createElement("strong",null,c.default.createElement(u.Link,{to:"".concat(f,"/services/").concat(e.backend.service.name)},e.backend.service.name)))),c.default.createElement(l.Column,null,c.default.createElement("span",null,t.html("ROUTE_PORT_VALUE",{value:e.backend.service.port.number}))),c.default.createElement(l.Column,null,c.default.createElement("a",{href:"".concat(d,"://").concat(p).concat(e.path),target:"_blank",rel:"noreferrer noopener"},c.default.createElement(l.Button,{className:s.default.access},t("ACCESS_SERVICE"))))))})))};f.propTypes={rule:o.default.object};var d=f;r.default=d},1510:function(e,r,a){"use strict";var n=a(72),c=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=c(a(12)),u=c(a(13)),l=c(a(19)),i=c(a(20)),s=c(a(18)),f=n(a(0)),d=a(25),p=c(a(723)),m=a(58),h=c(a(3476));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var y=function(e){(0,l.default)(a,e);var r=v(a);function a(){var e;(0,o.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).state={showOptions:!1},e.optionsRef=f.default.createRef(),e.handleDOMClick=function(t){e.optionsRef&&e.optionsRef.current&&!e.optionsRef.current.contains(t.target)&&e.setState({showOptions:!1})},e.handleClick=function(t){e.setState({showOptions:!1},(function(){(0,e.props.onChange)(t)}))},e.toggleOptions=function(){e.setState((function(e){return{showOptions:!e.showOptions}}),(function(){document.removeEventListener("click",e.handleDOMClick),e.state.showOptions&&document.addEventListener("click",e.handleDOMClick)}))},e}return(0,u.default)(a,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDOMClick)}},{key:"renderValue",value:function(e){var r=this.props.extra;return f.default.createElement("div",{key:e.name,className:h.default.option,onClick:this.toggleOptions},f.default.createElement(d.Icon,{name:m.CLUSTER_PROVIDER_ICON[e.provider]||"kubernetes",size:20,type:"light"}),f.default.createElement("span",{className:h.default.name},e.name),e.group&&f.default.createElement(d.Tag,{key:e.name,type:m.CLUSTER_GROUP_TAG_TYPE[e.group]},t("ENV_".concat(e.group.toUpperCase()),{defaultValue:e.group})),r&&r(e),f.default.createElement(d.Icon,{className:h.default.indicator,name:"chevron-down",type:"light"}))}},{key:"renderOption",value:function(e){var r=this,a=this.props.extra;return f.default.createElement("div",{key:e.name,className:h.default.option,onClick:function(){return r.handleClick(e)}},f.default.createElement(d.Icon,{name:m.CLUSTER_PROVIDER_ICON[e.provider]||"kubernetes",size:20,type:"light"}),f.default.createElement("span",{className:h.default.name},e.name),e.group&&f.default.createElement(d.Tag,{key:e.name,type:m.CLUSTER_GROUP_TAG_TYPE[e.group]},t("ENV_".concat(e.group.toUpperCase()),{defaultValue:e.group})),a&&a(e))}},{key:"render",value:function(){var e=this,r=this.props,a=r.value,n=r.options,c=this.state.showOptions,o=n.find((function(e){return e.name===a.name}));return f.default.createElement(p.default,{title:t("CLUSTER")},f.default.createElement("div",{className:h.default.wrapper},f.default.createElement("div",{className:h.default.value},this.renderValue(o)),c&&f.default.createElement("div",{className:h.default.options,ref:this.optionsRef},n.map((function(t){return e.renderOption(t)})))))}}]),a}(f.Component);r.default=y},1511:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.default=void 0;var n=a(r(21)),c=a(r(109)),o=a(r(12)),u=a(r(13)),l=a(r(19)),i=a(r(20)),s=a(r(18)),f=a(r(0)),d=r(5),p=r(70),m=a(r(32)),h=a(r(297)),v=a(r(782)),y=a(r(290)),g=a(r(806)),E=a(r(1145)),_=a(r(1512)),S=a(r(3485));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var C=function(e){(0,l.default)(r,e);var t=b(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"renderReplicaInfo",value:function(){var e=this.store,t=e.detail,r=void 0===t?{}:t,a=e.resources,n=e.isResourcesLoading,c=(0,y.default)(this.props.projectStore.detail.clusters,"name");return f.default.createElement(_.default,{module:this.module,store:this.store,detail:r,resources:a,clustersDetail:c,clusters:r.clusters,isLoading:n,canEdit:this.enabledActions.includes("edit"),projectStore:this.props.projectStore})}},{key:"renderContainerPorts",value:function(){if(this.props.noPorts)return null;var e=this.store,t=e.resources,r=e.isResourcesLoading,a=[];return Object.values(t).forEach((function(e){e&&e.containers&&a.push.apply(a,(0,c.default)((0,v.default)((0,h.default)(e.containers.map((function(e){return(0,m.default)(e.ports)?[]:e.ports.slice()}))),"name").map((function(t){return k(k({},t),{},{cluster:e.cluster})}))))})),(0,m.default)(a)?null:f.default.createElement(E.default,{ports:a,loading:r,isFederated:!0})}},{key:"renderPods",value:function(){var e=this.store,t=e.detail,r=e.resources,a=(0,y.default)(this.props.projectStore.detail.clusters,"name"),n=t.clusters.filter((function(e){return a[e.name]})).map((function(e){return e.name}));return f.default.createElement(g.default,{prefix:this.prefix,details:(0,d.toJS)(r),clusters:n,isFederated:!0})}},{key:"renderContent",value:function(){return f.default.createElement("div",null,this.renderReplicaInfo(),this.renderContainerPorts(),this.renderPods())}},{key:"render",value:function(){return f.default.createElement("div",{className:S.default.main},this.renderContent())}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"prefix",get:function(){var e=this.props.match.params.workspace;return e?"/".concat(e):""}},{key:"enabledActions",get:function(){return globals.app.getActions({module:this.module,project:this.props.match.params.namespace})}}]),r}(f.default.Component),R=(0,p.inject)("projectStore","detailStore")((0,p.observer)(C));t.default=R;var T=C;t.Component=T},1512:function(e,r,a){"use strict";var n=a(72),c=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=c(a(49)),u=c(a(21)),l=c(a(50)),i=c(a(12)),s=c(a(13)),f=c(a(19)),d=c(a(20)),p=c(a(18)),m=n(a(0)),h=c(a(723)),v=c(a(1373)),y=c(a(73)),g=c(a(16)),E=a(5),_=c(a(3482)),S=c(a(3483)),O=c(a(3484)),k=c(a(1035));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var T=function(e){(0,f.default)(a,e);var r=R(a);function a(){var e;(0,i.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).getWeight=function(t){var r=e.props.store;return(0,g.default)(r.deployedScheduleTemplate,"spec.clusters.".concat(t,".weight"),0)},e.handleReplicasChange=function(){var t=(0,l.default)(o.default.mark((function t(r,a){var n,c,u,l,i,s,f;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,c=n.detail,u=n.store,l=c.overrides,(s=(i=void 0===l?[]:l).find((function(e){return e.clusterName===r})))?(f=s.clusterOverrides.find((function(e){return"/spec/replicas"===e.path})))?f.value=a:s.clusterOverrides.push({path:"/spec/replicas",value:a}):i.push({clusterName:r,clusterOverrides:[{path:"/spec/replicas",value:a}]}),t.next=6,u.patch(c,{spec:{overrides:i}});case 6:return t.next=8,u.resourceStore.patch(C(C({},c),{},{cluster:r}),{spec:{replicas:a}});case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.updateSchedule=(0,l.default)(o.default.mark((function t(){var r,a,n,c,u,l,i;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.store,n=r.detail,c=r.projectStore,u=r.clustersDetail,l=Object.keys((0,E.toJS)(u)),i={name:n.name,namespace:c.detail.namespace,workspace:c.detail.workspace},t.next=5,a.updateScheduleYaml(n,a.deployedScheduleTemplate);case 5:return t.next=7,a.fetchResources(C({clusters:l},i));case 7:case"end":return t.stop()}}),t)}))),e.handleWeightChange=function(){var t=(0,l.default)(o.default.mark((function t(r,a){var n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.store,(0,y.default)(n.deployedScheduleTemplate,"spec.clusters.".concat(r,".weight"),a),t.next=4,e.updateSchedule();case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.totalChange=function(){var t=(0,l.default)(o.default.mark((function t(r){var a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.store,(0,y.default)(a.deployedScheduleTemplate,"spec.totalReplicas",Number(r)),t.next=4,e.updateSchedule();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,s.default)(a,[{key:"renderTittleText",value:function(){var e=this.props.store.isScheduleProject?{Icon:"stretch",title:t("WEIGHTS"),des:t("SPECIFY_WEIGHTS_DESC")}:{Icon:"backup",title:t("REPLICA_COUNT"),des:t("SPECIFY_REPLICAS_DESC")};return m.default.createElement("div",{className:k.default.titleBox},m.default.createElement("div",{className:k.default.IconBox},m.default.createElement(v.default,{name:e.Icon,size:"40"})),m.default.createElement("div",{className:k.default.right},m.default.createElement("span",{className:k.default.title},e.title),m.default.createElement("span",{className:k.default.des},e.des)))}},{key:"render",value:function(){var e=this,r=this.props,a=r.store,n=r.resources,c=r.clusters,o=r.clustersDetail,u=r.canEdit,l=r.projectStore;return c?m.default.createElement(h.default,{title:t("POD_REPLICAS")},this.renderTittleText(),m.default.createElement("div",{className:k.default.wrapper},a.isScheduleProject&&m.default.createElement("div",{className:k.default.totalBox},m.default.createElement(v.default,{name:"pod",size:"40"}),m.default.createElement("div",{className:k.default.total},t("TOTAL_REPLICAS")),m.default.createElement(O.default,{desire:this.getTotalReplicas,onChange:this.totalChange})),c.map((function(t){return o[t.name]?a.isScheduleProject?m.default.createElement(S.default,{key:t.name,cluster:o[t.name],workload:n[t.name],store:a,projectStore:l,onWeightChange:e.handleWeightChange,onReplicasChange:u?e.handleReplicasChange:null}):m.default.createElement(_.default,{key:t.name,cluster:o[t.name],workload:n[t.name],onReplicasChange:u?e.handleReplicasChange:null,store:a}):null})))):null}},{key:"getTotalReplicas",get:function(){var e=this.props.store;return(0,g.default)(e.deployedScheduleTemplate,"spec.totalReplicas",0)}}]),a}(m.Component);r.default=T},1513:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(21)),l=n(a(12)),i=n(a(13)),s=n(a(135)),f=n(a(19)),d=n(a(20)),p=n(a(18)),m=n(a(0)),h=a(5),v=a(70),y=n(a(3)),g=n(a(32)),E=n(a(16)),_=a(37),S=a(725),O=n(a(920)),k=a(25),b=a(735),C=a(779),R=n(a(1422)),T=n(a(3486));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var A={cpu_usage:"pod_cpu_usage",memory_usage:"pod_memory_usage_wo_cache",net_transmitted:"pod_net_bytes_transmitted",net_received:"pod_net_bytes_received"},N={deployments:"deployment",statefulsets:"statefulset",daemonsets:"daemonset"},j=(0,v.inject)("detailStore")(c=(0,v.observer)(c=function(e){(0,f.default)(a,e);var r=w(a);function a(e){var t;return(0,l.default)(this,a),(t=r.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.state,a=r.cluster,n=r.pods;(0,g.default)(n)||e.cluster!==a?t.resourceStore.fetchSortedMetrics(D(D({},t.resourceParams),{},{cluster:e.cluster,metrics:[A.cpu_usage],limit:6})).then((function(r){var a=((0,E.default)(r[A.cpu_usage],"data.result")||[]).map((function(e){return(0,E.default)(e,"metric.pod")}));t.setState({pods:a,cluster:e.cluster},(function(){t.fetchMetrics(D({resources:a},e))}))})):t.fetchMetrics(D({resources:n},e))},t.fetchMetrics=function(e){t.monitorStore.fetchMetrics(D(D({resources:[],metrics:Object.values(A)},t.resourceParams),e))},t.getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU_USAGE",unitType:"cpu",metricType:A.cpu_usage},{type:"memory",title:"MEMORY_USAGE",unitType:"memory",metricType:A.memory_usage},{type:"bandwidth",title:"OUTBOUND_TRAFFIC",unitType:"bandwidth",metricType:A.net_transmitted},{type:"bandwidth",title:"INBOUND_TRAFFIC",unitType:"bandwidth",metricType:A.net_received}]},t.showMultipleModal=function(e){return(0,_.cacheFunc)("_showMultipleModal_".concat(e.title),(function(){t.setState({showMultipleModal:!0,selectItem:D(D({},e),{},{legend:["USAGE"]})})}),(0,s.default)(t))},t.hideMultipleModal=function(){t.setState({showMultipleModal:!1,selectItem:{}})},t.state={showMultipleModal:!1,selectItem:{},pods:[],cluster:""},t.monitorStore=new O.default,t.resourceStore=new O.default,t}return(0,i.default)(a,[{key:"renderCard",value:function(){var e=this,r=this.store.detail,a=r.createTime,n=r.clusters,c=this.monitorStore,u=c.isLoading,l=c.isRefreshing,i=this.getMonitoringCfgs(),s=this.isMore;return m.default.createElement(C.Controller,{createTime:a,onFetch:this.fetchData,loading:u,refreshing:l,clusters:n,isEmpty:(0,g.default)(this.metrics),isFederated:!0},s&&m.default.createElement(k.Alert,{message:t.html("MONITORING_ALERT_DESC"),type:"info"}),i.map((function(r){r.data=(0,E.default)(e.metrics,"".concat(r.metricType,".data.result"))||[],r.legend=r.data.map((function(e,t){return(0,E.default)(e,"metric.pod","pod".concat(t))}));var a=(0,S.getAreaChartOps)(r);return(0,g.default)(a.data)?null:m.default.createElement("div",{key:r.title,className:(0,y.default)(T.default.item)},s&&m.default.createElement("div",{className:T.default.more,onClick:e.showMultipleModal(r)},t("VIEW_ALL_REPLICAS")),m.default.createElement(b.MultiArea,(0,o.default)({width:"100%"},a)))})))}},{key:"renderModal",value:function(){var e=this.state,t=e.showMultipleModal,r=e.selectItem,a=this.store.detail,n=a.name,c=a.namespace;return m.default.createElement("div",null,m.default.createElement(R.default,{visible:t,module:this.monitoringModule,name:n,namespace:c,config:r,onCancel:this.hideMultipleModal}))}},{key:"render",value:function(){return m.default.createElement("div",null,this.renderCard(),this.renderModal())}},{key:"store",get:function(){return this.props.detailStore}},{key:"monitoringModule",get:function(){return N[this.store.module]}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"resourceParams",get:function(){var e=this.store.detail,t=e.namespace,r=e.name;return{namespace:t,workloadKind:this.monitoringModule,workloadName:r}}},{key:"isMore",get:function(){return((0,E.default)((0,h.toJS)(this.resourceStore.sort),"data[".concat(A.cpu_usage,"].data.result"))||[]).length>5}}]),a}(m.default.Component))||c)||c;r.default=j},3415:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(109)),c=r(634),o=a(r(3416)),u=a(r(3417)),l=a(r(3434)),i=a(r(3435)),s=a(r(3437)),f=a(r(3438)),d=a(r(3439)),p=a(r(3440)),m=a(r(3442)),h=a(r(3447)),v=a(r(3448)),y=a(r(3449)),g=a(r(3455)),E=a(r(3458)),_=a(r(3461)),S="/:workspace/federatedprojects/:namespace",O=[].concat((0,n.default)((0,_.default)(S)),[{path:S,component:o.default,routes:[{path:"".concat(S,"/overview"),component:u.default,exact:!0},{path:"".concat(S,"/applications"),component:l.default,exact:!0},{path:"".concat(S,"/deployments"),component:i.default,exact:!0},{path:"".concat(S,"/statefulsets"),component:s.default,exact:!0},{path:"".concat(S,"/services"),component:f.default,exact:!0},{path:"".concat(S,"/ingresses"),component:d.default,exact:!0},{path:"".concat(S,"/volumes"),component:p.default,exact:!0},{path:"".concat(S,"/base-info"),component:m.default,exact:!0},{path:"".concat(S,"/configmaps"),component:h.default,exact:!0},{path:"".concat(S,"/secrets"),component:v.default,exact:!0},{path:"".concat(S,"/quota"),component:y.default,exact:!0},{path:"".concat(S,"/gateways"),component:E.default,exact:!0},{path:"".concat(S,"/log-collections"),component:g.default,exact:!0},(0,c.getIndexRoute)({path:"".concat(S,"/workloads"),to:"".concat(S,"/deployments"),exact:!0}),(0,c.getIndexRoute)({path:S,to:"".concat(S,"/overview"),exact:!0}),(0,c.getIndexRoute)({path:"*",to:"/404",exact:!0})]}]);t.default=O},3416:function(e,r,a){"use strict";var n=a(6),c=a(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=c(a(0)),p=a(70),m=a(634),h=a(656),v=n(a(1158));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var g=(0,p.inject)("rootStore","projectStore")(o=(0,p.observer)(o=function(e){(0,i.default)(a,e);var r=y(a);function a(){var e;(0,u.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).handleChange=function(t){return e.routing.push(t)},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,r=e.match,a=e.route,n=e.location,c=this.props.projectStore.detail;return d.default.createElement("div",{className:"ks-page"},d.default.createElement("div",{className:"ks-page-side"},d.default.createElement(v.default,{title:t("MULTI_CLUSTER_PROJECT_SCAP"),type:"federatedprojects",detail:c,workspace:r.params.workspace,onChange:this.handleChange,isFederated:!0}),d.default.createElement(h.Nav,{className:"ks-page-nav",navs:globals.app.getFederatedProjectNavs(),location:n,match:r})),d.default.createElement("div",{className:"ks-page-main"},(0,m.renderRoutes)(a.routes)))}},{key:"project",get:function(){return this.props.match.params.namespace}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(d.Component))||o)||o;r.default=g},3417:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(21)),u=n(a(71)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(0)),m=a(70),h=a(25),v=n(a(16)),y=n(a(3418)),g=n(a(3420)),E=n(a(3428)),_=n(a(3430)),S=n(a(3432));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,m.inject)("rootStore","projectStore")(c=(0,m.observer)(c=function(e){(0,s.default)(a,e);var r=b(a);function a(){var e;(0,l.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).state={cluster:(0,v.default)(e.project,"detail.clusters[0].name")},e.handleClusterChange=function(t){e.setState({cluster:t})},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.project.detail,r={cluster:this.state.cluster,clusters:this.clusters,onClusterChange:this.handleClusterChange};return p.default.createElement("div",null,p.default.createElement("div",{className:"h3 margin-b12"},t("Overview")),p.default.createElement(h.Columns,null,p.default.createElement(h.Column,{className:"is-8"},p.default.createElement(y.default,{className:"margin-b12",detail:e,workspace:this.workspace}),this.enabledActions.includes("edit")&&p.default.createElement(_.default,{match:this.props.match}),p.default.createElement(g.default,(0,u.default)({match:this.props.match},r))),p.default.createElement(h.Column,{className:"is-4"},p.default.createElement(S.default,{className:"margin-b12"}),p.default.createElement(E.default,(0,u.default)({match:this.props.match},r)))))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"namespace",get:function(){return(0,v.default)(this.props.match,"params.namespace")}},{key:"workspace",get:function(){return(0,v.default)(this.props.match,"params.workspace")}},{key:"project",get:function(){return this.props.projectStore}},{key:"clusters",get:function(){return this.project.detail.clusters.map((function(e){return{label:e.name,value:e.name}}))}},{key:"enabledActions",get:function(){return globals.app.getActions(k(k({module:"project-settings"},this.props.match.params),{},{project:this.namespace}))}}]),a}(p.default.Component))||c)||c;r.default=C},3418:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(a(12)),o=n(a(13)),u=n(a(19)),l=n(a(20)),i=n(a(18)),s=n(a(0)),f=n(a(3)),d=a(276),p=a(25),m=n(a(275)),h=a(37),v=n(a(3419));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var g=function(e){(0,u.default)(a,e);var r=y(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,r=e.className,a=e.detail,n=void 0===a?{}:a,c=e.workspace;return s.default.createElement("div",{className:(0,f.default)(v.default.wrapper,r)},s.default.createElement("div",{className:v.default.header},s.default.createElement(p.Icon,{name:"project",size:40}),s.default.createElement(m.default,{title:(0,h.getDisplayName)(n),description:n.description||"-"})),s.default.createElement("div",{className:v.default.content},s.default.createElement(m.default,{title:s.default.createElement(d.Link,{to:"/workspaces/".concat(c)},c),description:t("WORKSPACE")}),s.default.createElement(m.default,{title:n.creator||"-",description:t("CREATOR")})),s.default.createElement("img",{className:v.default.background,src:"/assets/project-overview.svg"}))}}]),a}(s.default.Component);r.default=g},3419:function(e,t,r){e.exports={wrapper:"_1cCsVSrWXIaWdV8emflgLc",header:"_3CY3ZlrDR0I7YC4OIdZDkI",content:"_3ghCMfU_PDmm9szX-QX-92",background:"_3s5SVx8hwpIVXZJU0dXOME"}},3420:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(21)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(0)),m=a(70),h=n(a(651)),v=n(a(16)),y=a(5),g=a(58),E=a(725),_=n(a(1451)),S=n(a(1025)),O=a(25),k=n(a(723)),b=n(a(3421)),C=n(a(3424)),R=n(a(3427));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var w=["namespace_pod_count","namespace_deployment_count","namespace_statefulset_count","namespace_daemonset_count","namespace_job_count","namespace_cronjob_count","namespace_pvc_count","namespace_service_count","namespace_secret_count","namespace_configmap_count","namespace_ingresses_extensions_count","namespace_s2ibuilder_count"],A=["namespace_cpu_usage","namespace_memory_usage_wo_cache"],N=(0,m.inject)("rootStore")(c=(0,m.observer)(c=function(e){(0,s.default)(a,e);var r=D(a);function a(e){var n;return(0,l.default)(this,a),(n=r.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.fetchMetrics(),n.overviewStore.fetchResourceStatus(P(P(P({},e),n.props.match.params),{},{cluster:n.props.cluster}))},n.fetchMetrics=function(e){var t=n.state,r=t.resourceType,a=t.range;"application"===r?n.appResourceMonitorStore.fetchMetrics(P(P(P({},n.props.match.params),{},{cluster:n.props.cluster,metrics:w,step:"".concat(Math.floor(a/10),"s"),times:10,fillZero:!0},e),{},{autoRefresh:!1})):n.physicalResourceMonitorStore.fetchMetrics(P(P(P({},n.props.match.params),{},{cluster:n.props.cluster,metrics:A,step:"".concat(Math.floor(a/40),"s"),times:40,fillZero:!0},e),{},{autoRefresh:!1}))},n.getResourceData=function(){var e=(0,y.toJS)(n.overviewStore.resource),t=e.quota,r=void 0===t?{}:t,a=e.status,c=void 0===a?{}:a,o=r.used||{};return[{key:"deployments",icon:g.ICON_TYPES.deployments,name:"DEPLOYMENT",routeName:"deployments",num:o["count/deployments.apps"],warnNum:c.deployments,metric:"namespace_deployment_count"},{key:"statefulsets",icon:g.ICON_TYPES.statefulsets,name:"STATEFULSET",routeName:"statefulsets",num:o["count/statefulsets.apps"],warnNum:c.statefulsets,metric:"namespace_statefulset_count"},{key:"volumes",icon:g.ICON_TYPES.volumes,name:"PERSISTENT_VOLUME_CLAIM",routeName:"volumes",num:o.persistentvolumeclaims||o["count/persistentvolumeclaims"],warnNum:c["persistent-volume-claims"],metric:"namespace_pvc_count"},{key:"services",icon:g.ICON_TYPES.services,name:"SERVICE",routeName:"services",num:o["count/services"],metric:"namespace_service_count"},{key:"ingresses",icon:g.ICON_TYPES.ingresses,name:"ROUTE",routeName:"ingresses",num:o["count/ingresses.extensions"],metric:"namespace_ingresses_extensions_count"}]},n.handleResouceTypeChange=function(e){n.setState({resourceType:e},(function(){n.fetchMetrics()}))},n.handleRangeChange=function(e){n.setState({range:e},(function(){n.fetchMetrics()}))},n.clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.value})},n.state={resourceType:"application",range:43200},n.overviewStore=new _.default,n.appResourceMonitorStore=new S.default,n.physicalResourceMonitorStore=new S.default,n.fetchData(),n}return(0,i.default)(a,[{key:"componentDidUpdate",value:function(e){(0,h.default)(e.match.params,this.props.match.params)&&this.props.cluster===e.cluster||this.fetchData()}},{key:"componentDidMount",value:function(){(0,E.startAutoRefresh)(this,{method:"fetchMetrics",interval:1e4,leading:!1})}},{key:"componentWillUnmount",value:function(){(0,E.stopAutoRefresh)(this)}},{key:"renderApplicationResource",value:function(){var e=this,t=(0,y.toJS)(this.overviewStore.resource).isLoading,r=this.appResourceMonitorStore,a=r.data,n=r.isLoading,c=r.isRefreshing,u=this.getResourceData();return p.default.createElement(O.Loading,{spinning:t},p.default.createElement("div",{className:R.default.resources},u.filter((function(e){return!e.disabled})).map((function(t){return p.default.createElement(b.default,(0,o.default)({},e.props.match.params,t,{metrics:(0,v.default)(a,"".concat(t.metric,".data.result")),isMetricsLoading:n||c}))}))))}},{key:"renderPhysicalResource",value:function(){var e=this,r=this.physicalResourceMonitorStore,a=r.data,n=r.isLoading,c=r.isRefreshing,o=this.timeOptions.find((function(t){return t.value===e.state.range}))||{};return p.default.createElement("div",null,p.default.createElement(C.default,{type:"cpu",title:t("CPU_USAGE_TIME",{time:o.label}),metrics:(0,v.default)(a,"namespace_cpu_usage.data.result"),isLoading:n||c,showDay:o.value>=172800}),p.default.createElement(C.default,{type:"memory",title:t("MEMORY_USAGE_TIME",{time:o.label}),metrics:(0,v.default)(a,"namespace_memory_usage_wo_cache.data.result"),isLoading:n||c,showDay:o.value>=172800}))}},{key:"renderHeader",value:function(){var e=this.props,r=e.cluster,a=e.clusters,n=e.onClusterChange;return p.default.createElement("div",{className:R.default.header},p.default.createElement(O.RadioGroup,{mode:"button",value:this.state.resourceType,onChange:this.handleResouceTypeChange,size:"small"},p.default.createElement(O.RadioButton,{value:"application"},t("APPLICATION_RESOURCE_PL")),p.default.createElement(O.RadioButton,{value:"physical"},t("PHYSICAL_RESOURCE_PL"))),p.default.createElement(O.Select,{className:R.default.timeSelect,defaultValue:this.state.range,options:this.timeOptions,onChange:this.handleRangeChange}),p.default.createElement(O.Select,{className:R.default.cluster,value:r,options:a,onChange:n,valueRenderer:this.clusterRenderer}))}},{key:"render",value:function(){var e=this.state.resourceType;return p.default.createElement(k.default,{className:R.default.wrapper,title:t("RESOURCE_STATUS")},this.renderHeader(),"application"===e?this.renderApplicationResource():this.renderPhysicalResource())}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"namespace",get:function(){return(0,v.default)(this.props.match,"params.namespace")}},{key:"timeOptions",get:function(){return[{label:t("LAST_TIME_H",{num:1}),value:3600},{label:t("LAST_TIME_H",{num:2}),value:7200},{label:t("LAST_TIME_H",{num:5}),value:18e3},{label:t("LAST_TIME_H",{num:12}),value:43200},{label:t("LAST_TIME_D",{num:1}),value:86400},{label:t("LAST_TIME_D",{num:2}),value:172800},{label:t("LAST_TIME_D",{num:3}),value:259200},{label:t("LAST_TIME_D",{num:7}),value:604800}]}}]),a}(p.default.Component))||c)||c;r.default=N},3421:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o,u,l=n(a(71)),i=n(a(21)),s=n(a(12)),f=n(a(13)),d=n(a(19)),p=n(a(20)),m=n(a(18)),h=n(a(0)),v=a(70),y=n(a(1)),g=n(a(3)),E=n(a(93)),_=a(25),S=a(725),O=n(a(3422)),k=n(a(3423));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var C=(0,v.inject)("rootStore")(c=(0,v.observer)((u=o=function(e){(0,d.default)(a,e);var r=b(a);function a(){var e;(0,s.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).handleClick=function(){var t=e.props,r=t.onClick,a=t.name,n=t.routeName;(0,E.default)(r)?r(a):n&&e.routing.push("".concat(e.prefix,"/").concat(n))},e.handleWarnClick=function(t){t.stopPropagation();var r=e.props,a=r.routeName,n=r.onClick,c=r.name,o="volumes"===a?"pending":"updating";(0,E.default)(n)?n(c,o):a&&e.routing.push("".concat(e.prefix,"/").concat(a,"?status=").concat(o))},e}return(0,f.default)(a,[{key:"renderWarn",value:function(){var e=this.props,r=e.warnNum,a=e.name,n=r>99?h.default.createElement("div",{className:k.default.skip},"..."):r;return r>0?h.default.createElement("div",{className:k.default.warn},h.default.createElement(_.Tooltip,{className:k.default.tips,content:t("RESOURCE_WARNING_TIPS",{warnNum:r,tipName:t("".concat(a,"_PL"))})},h.default.createElement("div",{onClick:this.handleWarnClick},n))):null}},{key:"render",value:function(){var e=this.props,r=e.className,a=e.icon,n=e.iconSize,c=e.name,o=e.routeName,u=e.num,s=e.metrics,f=e.onClick,d=(0,S.getAreaChartOps)({title:"",unit:"",legend:["Count"],data:s});return h.default.createElement("div",{"data-name":c,className:(0,g.default)(k.default.card,r)},h.default.createElement("div",{className:k.default.icon},h.default.createElement(_.Icon,{name:a,size:n}),this.renderWarn()),h.default.createElement("div",{className:(0,g.default)(k.default.info,(0,i.default)({},k.default.cursor,o||f)),onClick:this.handleClick},h.default.createElement("strong",null,u),h.default.createElement("span",null,"1"===u?t(c):t("".concat(c,"_PL")))),h.default.createElement(O.default,(0,l.default)({width:330,height:44,bgColor:"transparent"},d)))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"prefix",get:function(){var e=this.props,t=e.namespace,r=e.workspace;return"/".concat(r,"/federatedprojects/").concat(t)}}]),a}(h.default.Component),o.propTypes={className:y.default.string,icon:y.default.string,iconSize:y.default.number,name:y.default.string,namespace:y.default.string,routeName:y.default.string,num:y.default.oneOfType([y.default.number,y.default.string]),warnNum:y.default.number,onClick:y.default.func},o.defaultProps={icon:"appcenter",iconSize:40,name:"deployment",namespace:"default",routeName:"",num:0,warnNum:0},c=u))||c)||c;r.default=C},3422:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(12)),c=a(r(13)),o=a(r(19)),u=a(r(20)),l=a(r(18)),i=a(r(0)),s=a(r(1)),f=r(58),d=a(r(800)),p=a(r(783)),m=a(r(772)),h=a(r(840)),v=a(r(825)),y=a(r(784)),g=a(r(785));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,u.default)(this,r)}}var _=function(e){(0,o.default)(r,e);var t=E(r);function r(){return(0,n.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"getVeticalPoints",value:function(){var e=this.props.width,t=(e-10)/10;return Array(10).fill("").map((function(e,r){return 5+t*r}))}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,r=e.areaColors,a={stroke:"#55bc8a",strokeWidth:1,fill:"#fff",fillOpacity:1};return this.series.map((function(e,n){var c=f.COLORS_MAP[r[n]];return i.default.createElement(d.default,{key:e,dataKey:e,stroke:c,fillOpacity:"0.1",fill:c,unit:t,dot:a})}))}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.height,a=e.xKey,n=e.data;return i.default.createElement(y.default,{width:t,height:r,debounce:1},i.default.createElement(h.default,{data:n},i.default.createElement(m.default,{dataKey:a,hide:!0}),i.default.createElement(p.default,{wrapperStyle:{zIndex:1e3},content:i.default.createElement(g.default,null)}),i.default.createElement(v.default,{strokeDasharray:"3 6",horizontal:!1,verticalPoints:this.getVeticalPoints()}),this.renderArea()))}},{key:"series",get:function(){var e=this.props,t=e.xKey,r=e.data;return Object.keys(r[0]||{}).filter((function(e){return e!==t}))}}]),r}(i.default.Component);t.default=_,_.propTypes={width:s.default.oneOfType([s.default.string,s.default.number]),height:s.default.oneOfType([s.default.string,s.default.number]),xKey:s.default.string,unit:s.default.string,data:s.default.array,bgColor:s.default.string,areaColors:s.default.array},_.defaultProps={width:180,height:56,xKey:"time",unit:"",bgColor:f.COLORS_MAP.lightest,areaColors:["green","blue","yellow","red"],data:[]}},3423:function(e,t,r){e.exports={card:"_1aK9M2ABK--zrWKxtSjitf",icon:"_3YStaQCgjfHrr2KxC-qWMb",warn:"_3XD-urPTP4b5kQFF25P1J3",tips:"_2wOcbgucGsMTTwMP340_w3",skip:"_2aj89OYDD2fNhMuJdOsLks",info:"_3NX2xvd1JmwoMSQCsNAUZl",cursor:"_2gjwCxV06MFwZ28jZgAfB0"}},3424:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(a(71)),o=n(a(12)),u=n(a(13)),l=n(a(19)),i=n(a(20)),s=n(a(18)),f=n(a(0)),d=a(37),p=a(725),m=n(a(3425)),h=n(a(3426));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var y=function(e){(0,l.default)(a,e);var r=v(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,r=e.type,a=e.title,n=e.metrics,o=e.showDay,u=(0,p.getAreaChartOps)({title:a,unitType:r,legend:["Count"],data:n,xFormatter:function(e){return(0,d.getLocalTime)(1e3*Number(e)).format(o?t("Do HH:mm"):"HH:mm")}});return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement("div",{className:h.default.chartWrapper},f.default.createElement("div",{className:h.default.title},a),f.default.createElement("div",{className:h.default.chart},f.default.createElement(m.default,(0,c.default)({width:"100%",height:120,bgColor:"transparent"},u)))))}}]),a}(f.default.Component);r.default=y},3425:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(12)),c=a(r(13)),o=a(r(19)),u=a(r(20)),l=a(r(18)),i=a(r(0)),s=a(r(1)),f=r(58),d=a(r(800)),p=a(r(783)),m=a(r(810)),h=a(r(772)),v=a(r(840)),y=a(r(825)),g=a(r(784)),E=a(r(785));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,u.default)(this,r)}}var S=function(e){(0,o.default)(r,e);var t=_(r);function r(){return(0,n.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,t=e.x,r=e.y,a=e.payload;return i.default.createElement("g",{transform:"translate(".concat(t,",").concat(r,")")},i.default.createElement("text",{x:0,y:0,dy:12,fill:"#79879c",textAnchor:"middle"},a.value))}}]),r}(i.default.PureComponent),O=function(e){(0,o.default)(r,e);var t=_(r);function r(){return(0,n.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"getHorizontalPoints",value:function(){var e=this.props.height,t=(e-30-6)/4;return Array(4).fill("").map((function(e,r){return 30+t*r}))}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,r=e.areaColors;return this.series.map((function(e,a){var n=f.COLORS_MAP[r[a]];return i.default.createElement(d.default,{key:e,dataKey:e,stroke:n,fillOpacity:"1",fill:"url(#colorPv)",unit:t})}))}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.height,a=e.xKey,n=e.data;return i.default.createElement(g.default,{width:t,height:r,debounce:1},i.default.createElement(v.default,{data:n,margin:{top:32,left:16,right:16,bottom:0}},i.default.createElement("defs",null,i.default.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},i.default.createElement("stop",{offset:"5%",stopColor:"#55bc8a",stopOpacity:.2}),i.default.createElement("stop",{offset:"95%",stopColor:"#55bc8a",stopOpacity:0}))),i.default.createElement(y.default,{vertical:!1,stroke:"#36435c",strokeDasharray:"2 2",horizontalPoints:this.getHorizontalPoints()}),i.default.createElement(h.default,{dataKey:a,axisLine:!1,tickLine:!1,height:30,interval:"preserveStart",tick:i.default.createElement(S,null),minTickGap:20}),i.default.createElement(m.default,{hide:!0,type:"number",domain:[function(e){return 0-Math.abs(e)},function(e){return 1.6*e}]}),i.default.createElement(p.default,{wrapperStyle:{zIndex:1e3},content:i.default.createElement(E.default,null)}),this.renderArea()))}},{key:"series",get:function(){var e=this.props,t=e.xKey,r=e.data;return Object.keys(r[0]||{}).filter((function(e){return e!==t}))}}]),r}(i.default.Component);t.default=O,O.propTypes={width:s.default.oneOfType([s.default.string,s.default.number]),height:s.default.oneOfType([s.default.string,s.default.number]),xKey:s.default.string,unit:s.default.string,data:s.default.array,bgColor:s.default.string,areaColors:s.default.array},O.defaultProps={width:180,height:56,xKey:"time",unit:"",bgColor:f.COLORS_MAP.lightest,areaColors:["green","blue","yellow","red"],data:[]}},3426:function(e,t,r){e.exports={wrapper:"_2R06eiyotdeGIx5OLhFonz",chartWrapper:"_29Puefj9SAxjkMV22wykzX",chart:"_2eHSIdMS6vT3QPzHyRq6Jw",title:"_1iV5AwK5s6o9oLhbG6ft6A"}},3427:function(e,t,r){e.exports={wrapper:"lhAYr_BvqflK6AH06NHDs",header:"fVrL2jWvbuvVpeFLdHh-5",timeSelect:"YQNUYGZd1XHRdL2_iF1TK",cluster:"_12WK-EhzeFn2BXYZ1E4kwL"}},3428:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(12)),u=n(a(13)),l=n(a(19)),i=n(a(20)),s=n(a(18)),f=n(a(0)),d=a(5),p=a(70),m=n(a(16)),h=n(a(32)),v=a(276),y=n(a(651)),g=a(25),E=n(a(723)),_=a(725),S=n(a(1477)),O=n(a(3429));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var b={workload_cpu_usage:"cpu",workload_memory_usage_wo_cache:"memory",workload_net_bytes_transmitted:"bandwidth",workload_net_bytes_received:"bandwidth"},C=(0,p.inject)("rootStore")(c=(0,p.observer)(c=function(e){(0,l.default)(a,e);var r=k(a);function a(e){var n;return(0,o.default)(this,a),(n=r.call(this,e)).clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.value})},n.store=new S.default({cluster:e.cluster,namespaces:(0,m.default)(e.match,"params.namespace")}),n}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"componentDidUpdate",value:function(e){(0,y.default)(e.match.params,this.props.match.params)&&this.props.cluster===e.cluster||(this.store.cluster=this.props.cluster,this.store.namespaces=(0,m.default)(this.props.match,"params.namespace"),this.store.fetchAll())}},{key:"getWorkloadLink",value:function(e){var t=e.owner_kind;if("Pod"!==t){var r=e.workload,a=(void 0===r?"":r).replace(/\w+:/,""),n=this.props.match.params,c=n.workspace,o=n.namespace;return{Deployment:"/".concat(c,"/federatedprojects/").concat(o,"/deployments/").concat(a),StatefulSet:"/".concat(c,"/federatedprojects/").concat(o,"/statefulsets/").concat(a),DaemonSet:"/".concat(c,"/federatedprojects/").concat(o,"/daemonsets/").concat(a)}[t]}}},{key:"renderHeader",value:function(){var e=this.props,t=e.cluster,r=e.clusters,a=e.onClusterChange;return f.default.createElement("div",{className:O.default.header},f.default.createElement(g.Select,{className:O.default.select,value:t,options:r,onChange:a,valueRenderer:this.clusterRenderer}),f.default.createElement(g.Select,{className:O.default.select,value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}))}},{key:"renderEmpty",value:function(){return f.default.createElement("div",{className:O.default.empty},f.default.createElement(g.Icon,{name:"backup",size:32}),f.default.createElement("div",null,t("NO_DATA")))}},{key:"renderContent",value:function(){var e=this,r=(0,d.toJS)(this.store.data);return!this.store.isLoading&&(0,h.default)(r)?this.renderEmpty():f.default.createElement("div",{className:O.default.content},r.slice(0,5).map((function(a){var n={Deployment:"backup",StatefulSet:"stateful-set",DaemonSet:"deamon-set",Pod:"pod",Default:"backup"},c=e.getWorkloadLink(a),o=a.workload.replace(/\w+:/,""),u=100*a[e.store.sort_metric]/r[0][e.store.sort_metric],l=(0,_.getSuitableUnit)(a[e.store.sort_metric],b[e.store.sort_metric]);return f.default.createElement("div",{className:O.default.app,key:"".concat(a.owner_kind,"-").concat(o)},f.default.createElement("div",{className:O.default.appContent},f.default.createElement(g.Icon,{name:n[a.owner_kind]||n.Default,type:"dark",size:40}),f.default.createElement("div",{className:O.default.text},f.default.createElement("div",{className:"relative","data-tooltip":o},f.default.createElement("div",null,c?f.default.createElement(v.Link,{to:c},o):o)),f.default.createElement("p",null,t(a.owner_kind))),f.default.createElement("div",{className:O.default.value},(0,_.getValueByUnit)(a[e.store.sort_metric],l)||0,f.default.createElement("span",{style:{fontSize:12}}," ",l))),f.default.createElement("div",{className:O.default.background,style:{width:"".concat(u.toFixed(2),"%")}}))})))}},{key:"render",value:function(){return f.default.createElement(E.default,{className:O.default.wrapper,title:t("TOP_5_FOR_RESOURCE_USAGE")},this.renderHeader(),this.renderContent())}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),a}(f.default.Component))||c)||c;r.default=C},3429:function(e,t,r){e.exports={wrapper:"ALy60QWv9PJIlLpSJ93tc",header:"_14neEM1YWcy8Yl_HhRXBZ9",title:"_3rcJ-P4KglVtAGgB47VOBC",select:"_1trHAxO9VXo4shhZWhZYRD",app:"_65oCruiMj4nUJACfdPg73",value:"_3L2-Jvn7GOtsJBEIGhLbAs",appContent:"W5UocK9-pHzxLPhMojqCP",text:"_3GdnxTROCHfv5IKMzw0yhW",background:"_2lDLZkYMWHYxOFFEZZYilE",empty:"JDSFBvlabhdgjVzNCAOt9"}},3430:function(e,r,a){"use strict";var n=a(6),c=a(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=n(a(21)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=c(a(0)),m=a(70),h=n(a(16)),v=a(25),y=n(a(275)),g=n(a(723)),E=n(a(737)),_=a(635),S=n(a(3431));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,m.inject)("rootStore","projectStore")(o=(0,m.observer)(o=(0,_.trigger)(o=function(e){(0,s.default)(a,e);var r=b(a);function a(){var e;(0,l.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).state={showTip:!1},e.store=new E.default({module:"limitranges"}),e.showSetting=function(){var t=e.params,r=t.namespace,a=t.workspace,n=e.store.list.data;e.trigger("project.default.resource",k(k({},e.params),{},{detail:n[0],isFederated:!0,workspace:a,name:r,clusters:e.clusters,projectDetail:e.props.projectStore.detail,success:function(){return e.setState({showTip:!1})}}))},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.params.namespace;this.store.fetchListByK8s({namespace:t}).then((function(){var t=e.store.list.total;e.setState({showTip:0===t})}))}},{key:"render",value:function(){return this.state.showTip?p.default.createElement(g.default,{className:S.default.wrapper},p.default.createElement(y.default,{className:S.default.text,icon:"exclamation",title:t("DEFAULT_CONTAINER_QUOTAS_NOT_SET"),description:t("DEFAULT_CONTAINER_QUOTAS_DESC")}),p.default.createElement(v.Button,{type:"control",onClick:this.showSetting},t("EDIT_QUOTAS"))):null}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}},{key:"clusters",get:function(){return(0,h.default)(this.props.projectStore,"detail.clusters",[]).map((function(e){return e.name}))}}]),a}(p.Component))||o)||o)||o;r.default=C},3431:function(e,t,r){e.exports={wrapper:"_2FvSeMzYYesvhX-ejJ42KX",text:"_3DdMVlXygCEhz8eMoaWaSB"}},3432:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(a(12)),o=n(a(13)),u=n(a(19)),l=n(a(20)),i=n(a(18)),s=n(a(0)),f=n(a(3)),d=a(25),p=a(37),m=n(a(3433));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var v=function(e){(0,u.default)(a,e);var r=h(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.className;return s.default.createElement("div",{className:(0,f.default)(m.default.wrapper,e)},s.default.createElement("div",{className:m.default.header},s.default.createElement(d.Icon,{name:"question",size:24}),t("TIPS")),s.default.createElement("div",{className:m.default.tip},s.default.createElement("a",{href:(0,p.getDocsUrl)("project_members"),target:"_blank",rel:"noreferrer noopener"},"💁 ",t("HOW_TO_INVITE_USERS"))),s.default.createElement("div",{className:m.default.tip},s.default.createElement("a",{href:(0,p.getDocsUrl)("internet"),target:"_blank",rel:"noreferrer noopener"},"💁 ",t("HOW_TO_SET_PROJECT_GATEWAY"))))}}]),a}(s.default.Component);r.default=v},3433:function(e,t,r){e.exports={wrapper:"_2FlObY7KQLaKmnkp47KrI4",header:"_319xfPV2ITnKrB71J5R5Ym",tip:"_3PNCi5_1HXFcGeCbjIrEoI"}},3434:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(21)),u=n(a(71)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(0)),m=n(a(16)),h=n(a(729)),v=n(a(727)),y=a(726),g=n(a(728)),E=n(a(724)),_=n(a(901)),S=a(37),O=n(a(737)),k=n(a(865));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var T=(0,y.withProjectList)({store:new O.default(new k.default),module:"applications",name:"APP"})(c=function(e){(0,s.default)(a,e);var r=R(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).getColumns=function(){return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return p.default.createElement(v.default,{title:(0,S.getDisplayName)(r),avatar:r.icon||"/assets/default-app.svg",to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t),desc:(0,m.default)(r,'annotations["kubesphere.io/description"]',"-")})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"20%",render:function(r,a){return"Deleting"===r?p.default.createElement(h.default,{type:r,name:t(r),flicker:!0}):p.default.createElement(_.default,{clusters:a.clusters,clustersDetail:e.props.projectStore.detail.clusters},(function(t){return e.renderStatus({cluster:t,record:a})}))}},{title:t("VERSION"),dataIndex:"version",isHideable:!0,width:"20%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:180,render:function(e){return(0,S.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.getData,c=t.projectStore;return e.props.trigger("crd.app.create",{module:a,isFederated:!0,namespace:r.params.namespace,projectDetail:c.detail,success:n})},e}return(0,i.default)(a,[{key:"renderStatus",value:function(e){var r=e.cluster,a=e.record,n=(0,m.default)(a,"resources[".concat(r.name,"]"));return n?p.default.createElement(h.default,{name:t(n.status),type:n.status}):t("waiting")}},{key:"getTableProps",value:function(){return{tableActions:this.tableActions,emptyProps:{title:t("NO_COMPOSED_APP_FOUND"),desc:t("COMPOSED_APP_EMPTY_DESC")},searchType:"name"}}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,a=e.tableProps;return p.default.createElement(y.ListPage,(0,u.default)({},this.props,{isFederated:!0}),p.default.createElement(E.default,(0,u.default)({},r,{tips:this.tips,description:t("APPLICATIONS_DESC")})),p.default.createElement(g.default,(0,u.default)({},a,this.getTableProps(),{columns:this.getColumns()})))}},{key:"tips",get:function(){return[{title:t("HOW_TO_USE_APP_GOVERN_Q"),description:t("HOW_TO_USE_APP_GOVERN_A"),closable:!1}]}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,r=e.namespace,a=globals.app.getActions({cluster:t,project:r,module:"deployments"}).includes("create"),n=globals.app.getActions({cluster:t,project:r,module:"services"}).includes("create");return a&&n}},{key:"tableActions",get:function(){var e=this.props.tableProps,r=this.canCreate?[{key:"create",type:"control",text:t("CREATE"),onClick:this.showCreate}]:[];return C(C({},e.tableActions),{},{actions:r,onCreate:null,selectActions:[]})}}]),a}(p.default.Component))||c;r.default=T},3435:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(21)),u=n(a(71)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(0)),m=n(a(727)),h=n(a(729)),v=n(a(724)),y=a(726),g=n(a(728)),E=n(a(1508)),_=a(37),S=a(58),O=n(a(737)),k=n(a(736));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var T=(0,y.withProjectList)({store:new O.default(new k.default("deployments")),module:"deployments",name:"WORKLOAD"})(c=function(e){(0,s.default)(a,e);var r=R(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.getColumns=function(){var r=e.props,a=r.module,n=r.projectStore;return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return p.default.createElement(m.default,{icon:S.ICON_TYPES[a],iconSize:40,isMultiCluster:r.isFedManaged,title:(0,_.getDisplayName)(r),desc:r.description||"-",to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"22%",render:function(e,r){return"Deleting"===e?p.default.createElement(h.default,{type:e,name:t(e),flicker:!0}):p.default.createElement(E.default,{data:r,module:a,clusters:n.detail.clusters})}},{title:t("APP"),dataIndex:"app",isHideable:!0,width:"22%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",isHideable:!0,width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace,renderScheduleTab:!0,supportGpuSelect:!0})},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return p.default.createElement(y.ListPage,(0,u.default)({},this.props,{isFederated:!0}),p.default.createElement(v.default,(0,u.default)({},t,{tabs:this.tabs})),p.default.createElement(g.default,(0,u.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")}]}}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("workload.delete",{type:a,detail:e,isFederated:!0})}}]}},{key:"tableActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return C(C({},e.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return r("workload.batch.delete",{type:a,rowKey:"name",isFederated:!0})}}]})}}]),a}(p.default.Component))||c;r.default=T},3436:function(e,t,r){e.exports={wrapper:"_3vfbX3W9MN6NoSM26C_PUM",tags:"_1J5vlSwYc2sSMZG3BALMr7"}},3437:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(21)),u=n(a(71)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(0)),m=n(a(727)),h=n(a(729)),v=n(a(724)),y=a(726),g=n(a(728)),E=n(a(1508)),_=a(37),S=a(289),O=a(58),k=n(a(737)),b=n(a(736));function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var P=(0,y.withProjectList)({store:new k.default(new b.default("statefulsets")),module:"statefulsets",name:"WORKLOAD"})(c=function(e){(0,s.default)(a,e);var r=T(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.getItemDesc=function(r){var a=(0,S.getWorkloadStatus)(r,e.props.module),n=a.status,c=a.reason;return c?p.default.createElement(StatusReason,{status:n,reason:t(c),data:r}):r.description||"-"},e.getColumns=function(){var r=e.props,a=r.module,n=r.projectStore;return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return p.default.createElement(m.default,{icon:O.ICON_TYPES[a],iconSize:40,isMultiCluster:r.isFedManaged,title:(0,_.getDisplayName)(r),desc:e.getItemDesc(r),to:r.deletionTime?null:"".concat(e.prefix,"/").concat(a,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"22%",render:function(e,r){return"Deleting"===e?p.default.createElement(h.default,{type:e,name:t(e),flicker:!0}):p.default.createElement(E.default,{data:r,module:a,clusters:n.detail.clusters})}},{title:t("APP"),dataIndex:"app",isHideable:!0,width:"22%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",isHideable:!0,width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace})},e}return(0,i.default)(a,[{key:"getStatus",value:function(){return O.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return p.default.createElement(y.ListPage,(0,u.default)({},this.props,{isFederated:!0}),p.default.createElement(v.default,(0,u.default)({},t,{tabs:this.tabs})),p.default.createElement(g.default,(0,u.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")}]}}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("workload.delete",{type:a,detail:e,isFederated:!0})}}]}},{key:"tableActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return R(R({},e.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return r("workload.batch.delete",{type:a,rowKey:"name",isFederated:!0})}}]})}}]),a}(p.default.Component))||c;r.default=P},3438:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(49)),u=n(a(21)),l=n(a(50)),i=n(a(71)),s=n(a(12)),f=n(a(13)),d=n(a(19)),p=n(a(20)),m=n(a(18)),h=n(a(0)),v=n(a(727)),y=n(a(729)),g=n(a(275)),E=n(a(724)),_=a(726),S=n(a(728)),O=a(37),k=a(58),b=n(a(737)),C=n(a(748));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var D=(0,_.withProjectList)({store:new b.default(new C.default),module:"services",name:"SERVICE"})(c=function(e){(0,d.default)(a,e);var r=P(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).getColumns=function(){var r=e.props,a=r.module,n=r.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(t,r){return h.default.createElement(v.default,{icon:k.ICON_TYPES[a],iconSize:40,title:(0,O.getDisplayName)(r),desc:r.description||"-",isMultiCluster:!0,to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(e){return h.default.createElement(y.default,{type:e,name:t(e),flicker:!0})}},{title:t("SERVICE_TYPE_TCAP"),dataIndex:'annotations["kubesphere.io/serviceType"]',isHideable:!0,render:function(e,r){return h.default.createElement(g.default,{title:e?t("SERVICE_TYPE_".concat(e.toUpperCase())):t("CUSTOM_SERVICE"),description:t(r.type)||"-"})}},{title:t("APP"),dataIndex:"app",isHideable:!0,width:"22%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("service.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace})},e}return(0,f.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return h.default.createElement(_.ListPage,(0,i.default)({},this.props,{isFederated:!0}),h.default.createElement(E.default,(0,i.default)({},t,{tips:this.tips})),h.default.createElement(S.default,(0,i.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"tips",get:function(){return[{title:t("SERVICE_TYPES_Q"),description:t("SERVICE_TYPES_A")},{title:t("SCENARIOS_FOR_SERVICES_Q"),description:t("SCENARIOS_FOR_SERVICES_A")}]}},{key:"itemActions",get:function(){var e,r=this,a=this.props,n=a.trigger,c=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:(e=(0,l.default)(o.default.mark((function e(t){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.store.fetchDetail(t);case 2:a=e.sent,n("federated.workload.template.edit",T(T({detail:a,projectDetail:r.props.projectStore.detail,module:"service"},r.props.match.params),{},{name:t.name,isFederated:!0,withService:!0}));case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("service.delete",{type:c,detail:e,isFederated:!0})}}]}},{key:"tableActions",get:function(){var e=this.props,r=e.tableProps,a=e.name,n=e.trigger;return T(T({},r.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return n("service.batch.delete",{type:a,rowKey:"name",isFederated:!0})}}]})}}]),a}(h.default.Component))||c;r.default=D},3439:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(49)),u=n(a(50)),l=n(a(71)),i=n(a(12)),s=n(a(13)),f=n(a(19)),d=n(a(20)),p=n(a(18)),m=n(a(0)),h=n(a(727)),v=n(a(729)),y=n(a(724)),g=n(a(728)),E=a(726),_=a(37),S=a(58),O=n(a(737)),k=n(a(855));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var C=(0,E.withProjectList)({store:new O.default(new k.default),module:"ingresses",name:"ROUTE"})(c=function(e){(0,f.default)(a,e);var r=b(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).getColumns=function(){var r=e.props,a=r.module,n=r.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(t,r){return m.default.createElement(h.default,{icon:S.ICON_TYPES[a],iconSize:40,title:(0,_.getDisplayName)(r),desc:r.description||"-",to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"22%",render:function(e){return m.default.createElement(v.default,{type:e,name:t(e),flicker:!0})}},{title:t("APP"),dataIndex:"app",isHideable:!0,width:"22%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("router.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace})},e}return(0,s.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return m.default.createElement(E.ListPage,(0,l.default)({},this.props,{isFederated:!0}),m.default.createElement(y.default,(0,l.default)({},t,{tips:this.tips})),m.default.createElement(g.default,(0,l.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"tips",get:function(){return[{title:t("PREREQUESTS_FOR_USE_ROUTE_Q"),description:t("PREREQUESTS_FOR_USE_ROUTE_A"),more:(0,_.getDocsUrl)("internet")},{title:t("ACCESS_TYPES_OF_ROUTE_Q"),description:t("ACCESS_TYPES_OF_ROUTE_A")}]}},{key:"itemActions",get:function(){var e,r,a=this,n=this.props,c=n.trigger,l=n.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){c("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return c("resource.yaml.edit",{detail:e})}},{key:"editRules",icon:"firewall",text:t("EDIT_ROUTING_RULES"),action:"edit",onClick:(r=(0,u.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.store.fetchDetail(t);case 2:r=e.sent,c("fedproject.router.rules.edit",{isFederated:!0,detail:r,projectDetail:a.props.projectStore.detail});case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"editAnnotations",icon:"firewall",text:t("EDIT_ANNOTATIONS"),action:"edit",onClick:(e=(0,u.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.store.fetchDetail(t);case 2:r=e.sent,c("router.annotations.edit",{detail:r});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return c("resource.delete",{type:l,detail:e})}}]}}]),a}(m.default.Component))||c;r.default=C},3440:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=n(a(16)),m=n(a(32)),h=a(37),v=a(25),y=n(a(727)),g=n(a(729)),E=a(726),_=n(a(724)),S=n(a(728)),O=n(a(755)),k=n(a(901)),b=n(a(737)),C=n(a(763)),R=a(289),T=n(a(3441));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var D=(0,E.withProjectList)({store:new b.default(new C.default),module:"persistentvolumeclaims",authKey:"volumes",name:"PERSISTENT_VOLUME_CLAIM",rowKey:"uid"})(c=function(e){(0,i.default)(a,e);var r=P(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).renderAccessTitle=function(){var e=d.default.createElement("div",null,d.default.createElement("div",null,t("ACCESS_MODE_TCAP"),":"),d.default.createElement("div",null,"RWO (ReadWriteOnce): ",t("ACCESS_MODE_RWO")),d.default.createElement("div",null,"ROX (ReadOnlyMany): ",t("ACCESS_MODE_ROX")),d.default.createElement("div",null,"RWX (ReadWriteMany): ",t("ACCESS_MODE_RWX")));return d.default.createElement("div",{className:T.default.mode_title},t("ACCESS_MODE_TCAP"),d.default.createElement(v.Tooltip,{content:e},d.default.createElement(v.Icon,{name:"question",size:16,className:T.default.question})))},e.mapperAccessMode=function(e){var t=(0,h.map_accessModes)(e);return d.default.createElement("span",null,t.join(","))},e.renderStatus=function(e){var r=e.cluster,a=e.record,n=(0,p.default)(a,"resources[".concat(r.name,"]"));if(!n)return t("waiting");var c=(0,R.getVolumeStatus)(n),o=(n.status||{}).phase,u=void 0===o?"":o;return(0,m.default)(c)?d.default.createElement(g.default,{type:u,className:T.default.status,name:t("VOLUME_STATUS_".concat(u.toUpperCase()))}):d.default.createElement(O.default,{reason:c,data:n,type:"volume"})},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("volume.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace})},e}return(0,l.default)(a,[{key:"getColumns",value:function(){var e=this;return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return d.default.createElement(y.default,{icon:"storage",iconSize:40,title:(0,h.getDisplayName)(r),desc:r.storageClassName||"-",to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(r,a){return"Deleting"===r?d.default.createElement(g.default,{type:r,name:t(r),flicker:!0}):d.default.createElement(k.default,{clusters:a.clusters,clustersDetail:e.props.projectStore.detail.clusters},(function(t){return e.renderStatus({cluster:t,record:a})}))}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",isHideable:!0,width:"14%",render:function(r,a){return d.default.createElement(k.default,{clusters:a.clusters,clustersDetail:e.props.projectStore.detail.clusters},(function(e){return(0,p.default)(a,"resources[".concat(e.name,"].inUse"))?t("MOUNTED"):t("NOT_MOUNTED")}))}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,render:function(t){return e.mapperAccessMode(t)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,h.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}]}},{key:"render",value:function(){var e=this.props,t=e.query,r=e.match,a=e.bannerProps,n=e.tableProps;return d.default.createElement(E.ListPage,(0,o.default)({},this.props,{isFederated:!0}),d.default.createElement(_.default,(0,o.default)({},a,{tips:this.tips})),d.default.createElement(S.default,(0,o.default)({},n,{itemActions:this.itemActions,namespace:t.namespace,columns:this.getColumns(),onCreate:this.showCreate,cluster:r.params.cluster,searchType:"name"})))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:a,detail:e})}}]}}]),a}(d.default.Component))||c;r.default=D},3441:function(e,t,r){e.exports={capacity:"iBZ0-sFnB5X4qtbfRm500",status:"_2KeXCGUnopa84_M0KKIaeZ"}},3442:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(21)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=a(5),m=a(70),h=n(a(16)),v=n(a(737)),y=a(635),g=n(a(724)),E=n(a(770)),_=n(a(3443)),S=n(a(3445));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var C=(0,m.inject)("rootStore","projectStore")(c=(0,m.observer)(c=(0,y.trigger)(c=function(e){(0,i.default)(a,e);var r=b(a);function a(){var e;(0,u.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).limitRangeStore=new v.default({module:"limitranges"}),e.workspaceStore=new E.default,e.getData=function(){var t=e.params.namespace;e.store.fetchDetail({namespace:t,name:t})},e.handleMoreMenuClick=function(t,r){var a=e.enabledItemActions.find((function(e){return e.key===r}));a&&a.onClick&&a.onClick()},e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.limitRangeStore.fetchListByK8s(this.params),this.workspaceStore.fetchClusters(this.params)}},{key:"render",value:function(){var e=(0,p.toJS)(this.store.detail),r=(0,h.default)(this.limitRangeStore,"list.data[0]");return d.default.createElement("div",null,d.default.createElement(g.default,{icon:"cdn",title:t("BASIC_INFORMATION"),description:t("PROJECT_BASIC_INFO_DESC"),module:"project_base_info",tips:this.tips}),d.default.createElement(_.default,{detail:e,workspace:this.params.workspace,actions:this.enabledItemActions,onMenuClick:this.handleMoreMenuClick}),d.default.createElement(S.default,{detail:r}))}},{key:"store",get:function(){return this.props.projectStore}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}},{key:"tips",get:function(){return[{title:t("WHAT_ARE_DEFAULT_CONTAINER_QUOTAS_Q"),description:t("WHAT_ARE_DEFAULT_CONTAINER_QUOTAS_A")}]}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"project-settings",project:this.params.namespace,cluster:this.params.cluster})}},{key:"itemActions",get:function(){var e=this,r=this.store.detail,a=(0,p.toJS)(this.limitRangeStore.list.data),n=(0,p.toJS)(this.props.projectStore.detail.clusters).map((function(e){return e.name}));return[{key:"edit",icon:"pen",action:"edit",text:t("EDIT_INFORMATION"),onClick:function(){return e.trigger("resource.baseinfo.edit",{detail:r,success:e.getData})}},{key:"add",icon:"add",text:t("ADD_CLUSTER"),action:"edit",onClick:function(){return e.trigger("federated.project.add.cluster",{detail:r,store:e.store,clusters:e.workspaceStore.clusters.data,success:e.getData})}},{key:"edit-default-resource",icon:"pen",action:"edit",text:t("EDIT_DEFAULT_CONTAINER_QUOTAS"),onClick:function(){return e.trigger("project.default.resource",k(k({},e.props.match.params),{},{store:e.limitRangeStore,detail:(0,h.default)(a,0,{}),isFederated:!0,projectDetail:r,clusters:n,success:function(){return e.limitRangeStore.fetchListByK8s(e.params)}}))}},{key:"delete",icon:"trash",action:"delete",text:t("DELETE_PROJECT"),onClick:function(){return e.trigger("federated.project.delete",{detail:r,success:function(){return e.props.rootStore.routing.push("/workspaces/".concat(e.params.workspace,"/federatedprojects"))}})}}]}},{key:"enabledItemActions",get:function(){var e=this;return this.itemActions.filter((function(t){return!t.action||e.enabledActions.includes(t.action)}))}}]),a}(d.default.Component))||c)||c)||c;r.default=C},3443:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(a(12)),o=n(a(13)),u=n(a(19)),l=n(a(20)),i=n(a(18)),s=n(a(0)),f=n(a(16)),d=n(a(32)),p=a(276),m=a(25),h=a(37),v=n(a(723)),y=n(a(1026)),g=n(a(3444));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var _=function(e){(0,u.default)(a,e);var r=E(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,o.default)(a,[{key:"renderMoreMenu",value:function(){var e=this.props,t=e.actions,r=e.onMenuClick;return s.default.createElement(m.Menu,{onClick:r},t.map((function(e){return s.default.createElement(m.Menu.MenuItem,{key:e.key},s.default.createElement(m.Icon,{name:e.icon,type:"light"})," ",e.text)})))}},{key:"render",value:function(){var e=this.props,r=e.detail,a=e.workspace,n=e.actions;return s.default.createElement(v.default,{className:g.default.wrapper,title:t("PROJECT_INFO")},s.default.createElement("div",{className:g.default.header},s.default.createElement(m.Icon,{name:"project",size:40}),s.default.createElement("div",{className:g.default.item},s.default.createElement("div",null,(0,h.getDisplayName)(r)),s.default.createElement("p",null,t("PROJECT_NAME"))),s.default.createElement("div",{className:g.default.item},s.default.createElement("div",null,s.default.createElement(p.Link,{to:"/workspaces/".concat(a)},a)),s.default.createElement("p",null,t("WORKSPACE"))),s.default.createElement("div",{className:g.default.item},s.default.createElement("div",null,(0,f.default)(r,"creator")||"-"),s.default.createElement("p",null,t("CREATOR"))),s.default.createElement("div",{className:g.default.item},s.default.createElement("div",null,(0,h.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")),s.default.createElement("p",null,t("CREATION_TIME"))),!(0,d.default)(n)&&s.default.createElement(y.default,{content:this.renderMoreMenu()})))}}]),a}(s.default.Component);r.default=_},3444:function(e,t,r){e.exports={wrapper:"_1OoRSXI9AaH-1pF0uVUoIA",header:"_2uA5GBAHHtwRgU51d1wP3G",item:"OIHmcMQG8LKBCOt5hlkmU",content:"Ya_oEvC_R5nxTIQyKATBc",contentItem:"_4VWupvp5oiq4Ey4tIByoZ"}},3445:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(a(12)),o=n(a(13)),u=n(a(19)),l=n(a(20)),i=n(a(18)),s=n(a(16)),f=n(a(300)),d=n(a(32)),p=n(a(0)),m=a(25),h=n(a(723)),v=a(37),y=n(a(3446));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var E=function(e){(0,u.default)(a,e);var r=g(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.detail,r=(0,v.cpuFormat)((0,s.default)(e,"limit.default.cpu")),a=(0,v.cpuFormat)((0,s.default)(e,"limit.defaultRequest.cpu")),n=(0,v.memoryFormat)((0,s.default)(e,"limit.default.memory")),c=(0,v.memoryFormat)((0,s.default)(e,"limit.defaultRequest.memory")),o=globals.config.supportGpuType,u=(0,s.default)(e,"limit.defaultRequest",{}),l=o.filter((function(e){return Object.keys(u).some((function(t){return(0,f.default)(t,e)}))})),i=(0,d.default)(l)?{}:{value:u["".concat(l[0])],type:l};return p.default.createElement(h.default,{title:t("DEFAULT_CONTAINER_QUOTA_PL")},p.default.createElement("div",{className:y.default.content},p.default.createElement("div",{className:y.default.contentItem},p.default.createElement(m.Icon,{name:"cpu",size:40}),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,a?"".concat(a," Core"):t("NO_REQUEST_TCAP")),p.default.createElement("p",null,t("CPU_REQUEST_SCAP"))),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,r?"".concat(r," Core"):t("NO_LIMIT_TCAP")),p.default.createElement("p",null,t("CPU_LIMIT_SCAP")))),p.default.createElement("div",{className:y.default.contentItem},p.default.createElement(m.Icon,{name:"memory",size:40}),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,c?"".concat(c," Mi"):t("NO_REQUEST_TCAP")),p.default.createElement("p",null,t("MEMORY_REQUEST_SCAP"))),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,n?"".concat(n," Mi"):t("NO_LIMIT_TCAP")),p.default.createElement("p",null,t("MEMORY_LIMIT_SCAP")))),p.default.createElement("div",{className:y.default.contentItem},p.default.createElement("img",{src:"/assets/GPU.svg",size:48}),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,i.value?i.type:t("NONE")),p.default.createElement("p",null,t("GPU_TYPE_SCAP"))),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,i.value?i.value:t("NO_LIMIT_TCAP")),p.default.createElement("p",null,t("GPU_LIMIT_SCAP"))))))}}]),a}(p.default.Component);r.default=E},3446:function(e,t,r){e.exports={item:"_1Ldmn-GeDglbBOMJrDBw9S",content:"_1WPVCAg1EyfGv2B_FJqVeQ",contentItem:"_1ARjXQw-_8avbwYcyo8cZK"}},3447:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=n(a(727)),m=n(a(729)),h=n(a(724)),v=a(726),y=n(a(728)),g=a(37),E=a(58),_=n(a(737));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var O=(0,v.withProjectList)({store:new _.default({module:"configmaps"}),module:"configmaps",name:"CONFIGMAP"})(c=function(e){(0,i.default)(a,e);var r=S(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).getColumns=function(){var r=e.props.module;return[{title:t("NAME"),dataIndex:"name",render:function(t,a){return d.default.createElement(p.default,{icon:E.ICON_TYPES[r],iconSize:40,title:(0,g.getDisplayName)(a),desc:a.description||"-",to:a.deletionTime?null:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(e){return d.default.createElement(m.default,{type:e,name:t(e),flicker:!0})}},{title:t("DATA"),dataIndex:"data",isHideable:!0,width:"33%",render:function(e){return Object.keys(e).join(",")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("configmap.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace})},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return d.default.createElement(v.ListPage,(0,o.default)({},this.props,{isFederated:!0}),d.default.createElement(h.default,(0,o.default)({},t,{tabs:this.tabs})),d.default.createElement(y.default,(0,o.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(e){return r("configmap.edit",{detail:e,isFederated:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:a,detail:e})}}]}}]),a}(d.default.Component))||c;r.default=O},3448:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=n(a(727)),m=n(a(729)),h=n(a(724)),v=a(726),y=n(a(728)),g=a(37),E=a(58),_=n(a(737));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var O=(0,v.withProjectList)({store:new _.default({module:"secrets"}),module:"secrets",name:"SECRET"})(c=function(e){(0,i.default)(a,e);var r=S(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).getColumns=function(){var r=e.props.module;return[{title:t("NAME"),dataIndex:"name",render:function(t,a){return d.default.createElement(p.default,{icon:E.ICON_TYPES[r],iconSize:40,title:(0,g.getDisplayName)(a),desc:a.description||"-",to:a.deletionTime?null:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"12%",render:function(e){return d.default.createElement(m.default,{type:e,name:t(e),flicker:!0})}},{title:t("TYPE"),dataIndex:"type",isHideable:!0,width:"12%",render:function(e){return t(E.SECRET_TYPES[e]||e)}},{title:t("SECRET_FIELD_COUNT"),dataIndex:"data",isHideable:!0,width:"12%",render:function(e){return Object.keys(e).length}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.getData,c=t.projectStore;return e.props.trigger("secret.create",{module:a,isFederated:!0,projectDetail:c.detail,namespace:r.params.namespace,success:n})},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return d.default.createElement(v.ListPage,(0,o.default)({},this.props,{isFederated:!0}),d.default.createElement(h.default,(0,o.default)({},t,{tabs:this.tabs})),d.default.createElement(y.default,(0,o.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(e){return r("secret.edit",{detail:e,isFederated:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:a,detail:e})}}]}}]),a}(d.default.Component))||c;r.default=O},3449:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=a(70),m=n(a(16)),h=n(a(724)),v=n(a(3450)),y=n(a(3454));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var E=(0,p.inject)("projectStore")(c=function(e){(0,i.default)(a,e);var r=g(a);function a(){var e;(0,u.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).getData=function(){e.store.fetchDetail(e.params)},e.handleMoreMenuClick=function(t,r){var a=e.enabledItemActions.find((function(e){return e.key===r}));a&&a.onClick&&a.onClick()},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this,r=this.props.projectStore.detail.clusters;return d.default.createElement("div",null,d.default.createElement(h.default,{icon:"cdn",title:t("PROJECT_QUOTA_PL"),description:t("PROJECT_QUOTAS_DESC")}),d.default.createElement("div",{className:y.default.title},t("RESOURCE_QUOTA_PL")),r.map((function(t){return d.default.createElement(v.default,(0,o.default)({key:t.name,cluster:t},e.props.match.params,{canEdit:e.canEdit}))})))}},{key:"store",get:function(){return this.props.projectStore}},{key:"params",get:function(){return(0,m.default)(this.props.match,"params",{})}},{key:"tips",get:function(){return[{title:t("HOW_TO_USE_QUOTA_Q"),description:t.html("HOW_TO_USE_QUOTA_A")}]}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"project-settings",project:this.params.namespace,cluster:this.params.cluster})}},{key:"canEdit",get:function(){return this.enabledActions.includes("edit")}}]),a}(d.default.Component))||c;r.default=E},3450:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(136)),u=n(a(21)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(0)),m=a(70),h=n(a(3)),v=n(a(16)),y=a(25),g=a(58),E=n(a(723)),_=n(a(749)),S=a(635),O=n(a(811)),k=n(a(3451)),b=n(a(3453));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var R=["limits.cpu","limits.memory","pods"],T=(0,m.inject)("rootStore")(c=(0,m.observer)(c=(0,S.trigger)(c=function(e){(0,s.default)(a,e);var r=C(a);function a(){var e;(0,l.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).store=new O.default,e.state={isFold:!0},e.showEdit=function(){var t=e.props,r=t.namespace,a=t.cluster,n=t.workspace;e.trigger("project.quota.edit",{detail:{name:r,namespace:r,cluster:a.name,workspace:n},success:e.fetchData,isFederated:!0})},e.toggleFold=function(){e.setState((function(e){return{isFold:!e.isFold}}))},e.fetchData=function(){var t=e.props,r=t.namespace,a=t.cluster;e.store.fetch({namespace:r,cluster:a.name})},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state.isFold,r=this.props,a=r.cluster,n=r.canEdit,c=this.items;return p.default.createElement(E.default,null,p.default.createElement("div",{className:b.default.cluster},p.default.createElement(_.default,{cluster:a,theme:"light"})),n&&p.default.createElement("div",{className:b.default.actions},p.default.createElement(y.Button,{onClick:this.showEdit},t("EDIT_QUOTAS"))),p.default.createElement("div",{className:(0,h.default)(b.default.content,(0,u.default)({},b.default.fold,e))},c.map((function(e){return p.default.createElement(k.default,e)}))),c.length>3&&p.default.createElement("div",{className:b.default.folder},p.default.createElement(y.Button,{icon:e?"chevron-down":"chevron-up",onClick:this.toggleFold},e?t("UNFOLD"):t("FOLD"))))}},{key:"items",get:function(){var e=this.store.data,t=(0,v.default)(e,"hard",{}),r=Object.values(g.QUOTAS_MAP).map((function(e){return e.name})),a=Object.keys(t).filter((function(e){return-1===r.indexOf(e)})).map((function(e){return[e,{name:e,type:"userDefined"}]}));return Object.entries(g.QUOTAS_MAP).concat(a).map((function(t){var r,a=(0,o.default)(t,2),n=a[0],c=a[1];return{key:n,name:n,total:(0,v.default)(e,'hard["'.concat(c.name,'"]')),used:(0,v.default)(e,'used["'.concat(c.name,'"]'),0),left:(0,v.default)(e,'left["'.concat(c.name,'"]')),type:null!==(r=null==c?void 0:c.type)&&void 0!==r?r:"system"}})).filter((function(e){var t=e.total,r=e.used,a=e.name;return!(!t&&!Number(r)&&-1===R.indexOf(a))}))}}]),a}(p.default.Component))||c)||c)||c;r.default=T},3451:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(a(0)),o=n(a(68)),u=a(25),l=n(a(1151)),i=a(37),s=a(58),f=n(a(3452)),d=function(e){var r,a=e.name,n=e.total,d=e.used,p=e.type,m=0;"limits.cpu"===a||"requests.cpu"===a?n&&(m=Number((0,i.cpuFormat)(d))/Number((0,i.cpuFormat)(n)),d="".concat((0,i.cpuFormat)(d)," Core"),n="".concat((0,i.cpuFormat)(n)," Core")):"limits.memory"===a||"requests.memory"===a?n&&(m=Number((0,i.memoryFormat)(d))/Number((0,i.memoryFormat)(n)),d="".concat((0,i.memoryFormat)(d,"Gi")," Gi"),n="".concat((0,i.memoryFormat)(n,"Gi")," Gi")):n&&(m=Number(d)/Number(n)),m=Math.min(Math.max(m,0),1);var h=a.indexOf("gpu")>-1?"gpu":a,v="gpu"===h?"".concat(h,".limit"):h,y=a.indexOf("gpu")>-1?s.ICON_TYPES.gpu:null!==(r=s.ICON_TYPES[a])&&void 0!==r?r:"resource";return c.default.createElement("div",{className:f.default.quota},c.default.createElement(u.Icon,{name:y,size:40}),c.default.createElement("div",{className:f.default.item},c.default.createElement("div",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return"userDefined"!==r||e.includes("gpu")?t(e.replace(/[. ]/g,"_").toUpperCase()):e}(v,p)),c.default.createElement("p",null,t("RESOURCE_TYPE_SCAP"))),c.default.createElement("div",{className:f.default.item},c.default.createElement("div",null,d),c.default.createElement("p",null,t("USED"))),c.default.createElement("div",{className:f.default.item},c.default.createElement("div",null,(0,o.default)(n)?t("NO_LIMIT_TCAP"):n),c.default.createElement("p",null,t("RESOURCE_LIMIT"))),c.default.createElement("div",{className:f.default.item,style:{flex:3}},c.default.createElement("div",null,t("USAGE")),c.default.createElement(l.default,{value:Math.min(m,1),className:f.default.bar,rightText:n?"":t("NO_LIMIT_TCAP"),text:"".concat(t("Used")," ").concat(Number((100*m).toFixed(2)),"%")})))};r.default=d},3452:function(e,t,r){e.exports={quota:"_3aPySvZFwKu_aUOuXKtt74",item:"_1I77wNxk4MpwyW4BbGhuWc",bar:"_20tiwfV8cet9kU4Rdqy-5W"}},3453:function(e,t,r){e.exports={cluster:"_367EWtp2wSigDOnEmf2wJ1",content:"_3viW1x9EZrOJRuO9ZV0ET3",fold:"_1NbZfknGRDsuW3_iIyJJqu",actions:"oVUaKu42SlFyUhxdx-1fg",folder:"VIGCh0w9Q5Nq0WhR95pi-"}},3454:function(e,t,r){e.exports={title:"_20BGuNk4qt2X7yCCXLVwpk"}},3455:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(12)),u=n(a(13)),l=n(a(19)),i=n(a(20)),s=n(a(18)),f=n(a(0)),d=a(70),p=n(a(32)),m=n(a(724)),h=n(a(3456));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var y=(0,d.inject)("rootStore","projectStore")(c=(0,d.observer)(c=function(e){(0,l.default)(a,e);var r=v(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.store.detail.name;return f.default.createElement("div",null,f.default.createElement(m.default,{icon:"log",title:t("LOG_COLLECTION"),description:t("DISK_LOG_COLLECTION_DESC"),tips:this.tips}),!this.disabledLoggingSideCar&&f.default.createElement(h.default,{namespace:e,actions:this.enableActions}))}},{key:"store",get:function(){return this.props.projectStore}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"enableActions",get:function(){return globals.app.getActions({module:"project-settings",project:this.namespace,cluster:this.cluster})}},{key:"disabledLoggingSideCar",get:function(){return!(0,p.default)(globals.config.disabledLoggingSidecarNamespace)&&globals.config.disabledLoggingSidecarNamespace.includes(this.namespace)}},{key:"tips",get:function(){return[{title:t("COLLECT_LOGS_ON_VOLUMES_Q"),description:t("COLLECT_LOGS_ON_VOLUMES_A")}]}}]),a}(f.default.Component))||c)||c;r.default=y},3456:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(12)),u=n(a(13)),l=n(a(19)),i=n(a(20)),s=n(a(18)),f=n(a(0)),d=n(a(3)),p=n(a(16)),m=n(a(73)),h=a(70),v=a(25),y=n(a(808)),g=n(a(723)),E=n(a(274)),_=n(a(737)),S=n(a(3457));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var k=(0,h.observer)(c=function(e){(0,l.default)(a,e);var r=O(a);function a(){var e;(0,o.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).state={showCloseConfirm:!1},e.store=new _.default({module:"namespaces"}),e.handleSwitch=function(){var t=e.store.detail;return"enabled"===(0,p.default)(t,'labels["logging.kubesphere.io/logsidecar-injection"]')?e.setState({showCloseConfirm:!0}):e.handleToggle()},e.handleToggle=function(){var t=e.store.detail,r="enabled"===(0,p.default)(t,'labels["logging.kubesphere.io/logsidecar-injection"]'),a={metadata:{labels:{"logging.kubesphere.io/logsidecar-injection":r?"disabled":"enabled"}}};(0,m.default)(a,'spec.template.metadata.labels["logging.kubesphere.io/logsidecar-injection"]',r?"disabled":"enabled"),e.store.patch(t,a).then((function(){e.hideCloseConfirm(),e.store.fetchDetail({name:t.name,namespace:t.name})}))},e.hideCloseConfirm=function(){e.setState({showCloseConfirm:!1})},e}return(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.namespace;this.store.fetchDetail({namespace:e,name:e})}},{key:"render",value:function(){var e=this.state.showCloseConfirm,r=this.store.detail,a="enabled"===(0,p.default)(r,'labels["logging.kubesphere.io/logsidecar-injection"]');return f.default.createElement(f.default.Fragment,null,f.default.createElement(g.default,{title:t("COLLECT_LOGS_ON_VOLUMES")},f.default.createElement("div",{className:S.default.header},f.default.createElement(v.Icon,{name:"log",size:40}),f.default.createElement("div",{className:S.default.item},f.default.createElement("div",null,a?t("ENABLED"):t("DISABLED")),f.default.createElement("p",null,t("LOG_COLLECTION_ENABLED_DESC"))),this.canEdit&&f.default.createElement("div",{className:(0,d.default)(S.default.item,"text-right")},f.default.createElement(y.default,{type:"control",text:a?t("ENABLED"):t("DISABLED"),onChange:this.handleSwitch,checked:a})))),this.canEdit&&f.default.createElement(E.default,{visible:e,onOk:this.handleToggle,onCancel:this.hideCloseConfirm,width:520,hideHeader:!0},f.default.createElement("div",{className:S.default.modalHeader},f.default.createElement(v.Icon,{name:"question",size:40,color:{primary:"#fff",secondary:"#329dce"}}),f.default.createElement("div",{className:S.default.title},f.default.createElement("div",null,t("DISABLE_LOG_COLLECTION")))),f.default.createElement("div",null,t("DISABLE_LOG_COLLECTION_TIP"))))}},{key:"canEdit",get:function(){return this.props.actions.includes("manage")}}]),a}(f.default.Component))||c;r.default=k},3457:function(e,t,r){e.exports={header:"KfRfc7XHnyKrIMG2WD7yY",item:"_1gCe0R2KaOu3PvBcpH-MNm",modalHeader:"_2Lsdh1r2v7JH_39s7jt8FO",title:"_1t58beq3U0qAO0Dd6Xwakq"}},3458:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=a(70),m=a(635),h=n(a(724)),v=n(a(3459));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var g=(0,p.inject)("rootStore","projectStore")(c=(0,p.observer)(c=(0,m.trigger)(c=function(e){(0,i.default)(a,e);var r=y(a);function a(){return(0,u.default)(this,a),r.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this;return d.default.createElement(d.default.Fragment,null,d.default.createElement(h.default,{icon:"loadbalancer",title:t("GATEWAY_SETTINGS"),description:t("PROJECT_GATEWAY_DESC"),tabs:this.tabs}),d.default.createElement("div",null,this.clusters.map((function(t){return d.default.createElement(v.default,(0,o.default)({key:t.name,cluster:t},e.props,{actions:e.enableActions}))}))))}},{key:"store",get:function(){return this.props.projectStore}},{key:"clusters",get:function(){return this.store.detail.clusters}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"enableActions",get:function(){return globals.app.getActions({module:"project-settings",project:this.namespace})}}]),a}(d.default.Component))||c)||c)||c;r.default=g},3459:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o,u,l=n(a(71)),i=n(a(49)),s=n(a(50)),f=n(a(21)),d=n(a(91)),p=n(a(12)),m=n(a(13)),h=n(a(135)),v=n(a(19)),y=n(a(20)),g=n(a(18)),E=n(a(74)),_=(n(a(92)),n(a(32))),S=n(a(16)),O=n(a(0)),k=a(5),b=a(70),C=a(25),R=n(a(723)),T=n(a(275)),P=n(a(1028)),D=n(a(749)),w=n(a(767)),A=a(635),N=a(37),j=n(a(3460));function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,y.default)(this,r)}}var L=(0,b.inject)("rootStore")(c=(0,b.observer)(c=(0,A.trigger)((o=function(e){(0,v.default)(a,e);var r=x(a);function a(e){var n;return(0,p.default)(this,a),n=r.call(this,e),(0,d.default)(n,"gatewayList",u,(0,h.default)(n)),n.getProjectGateway=function(){var e=M({},n.props.match.params);return n.store.getGatewayByProject(M(M({},e),{},{cluster:n.cluster}))},n.getInitGateway=(0,s.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getProjectGateway();case 2:t=e.sent,n.gatewayList=t;case 4:case"end":return e.stop()}}),e)}))),n.showGatewaySetting=function(){var e=n.props.match.params.namespace;n.trigger("gateways.create",{name:"",namespace:e,cluster:n.cluster,store:n.store,success:n.getInitGateway})},n.renderClusterGatewayTitle=function(){return O.default.createElement("div",{className:j.default.title},O.default.createElement("span",null," ",t("CLUSTER_GATEWAY")),O.default.createElement(C.Tooltip,{content:t("CLUSTER_GATEWAY_GUIDE_DESC"),placement:"top"},O.default.createElement(C.Icon,{name:"question",size:20})))},n.renderProjectTitle=function(){return O.default.createElement("div",{className:j.default.title},t("PROJECT_GATEWAY"))},n.renderOperations=function(e){var r=e.url,a=e.disabled;return O.default.createElement(C.Button,{disabled:a,onClick:function(){n.props.rootStore.routing.push(r)}},t("VIEW_DETAILS"))},n.store=new w.default,n}return(0,m.default)(a,[{key:"componentDidMount",value:function(){this.getInitGateway()}},{key:"renderEmpty",value:function(){var e=this.props.cluster,r=globals.app.isMultiCluster?(0,S.default)(globals,"clusterConfig.".concat(e.name,".ksVersion")):(0,S.default)(globals,"ksConfig.ksVersion"),a=(0,N.compareVersion)(r,"v3.2.0")<0;return O.default.createElement(R.default,null,O.default.createElement("div",{className:j.default.empty},O.default.createElement("div",{className:j.default.cluster},O.default.createElement(D.default,{cluster:e,theme:"light"})),O.default.createElement(T.default,{className:j.default.desc,title:O.default.createElement("p",{className:j.default.descTitle},O.default.createElement("span",null,t("GATEWAY_NOT_ENABLED")),a?O.default.createElement(C.Tooltip,{content:t("CLUSTER_UPGRADE_REQUIRED",{version:"3.2"}),placement:"top"},O.default.createElement(C.Icon,{name:"update",size:20,color:{primary:"#f5a623 ",secondary:"#ffe1be"}})):null),description:t("ENABLE_GATEWAY_TIP")}),this.canEdit&&O.default.createElement(C.Button,{type:"control",onClick:this.showGatewaySetting,disabled:a},t("ENABLE_GATEWAY"))))}},{key:"renderInternetAccess",value:function(e){var t=this,r=this.props.cluster;return O.default.createElement("div",{className:j.default.container},O.default.createElement("div",{className:j.default.cluster},O.default.createElement(D.default,{cluster:r,theme:"light"})),e.map((function(e,r,a){var n=0===r;return O.default.createElement(P.default,(0,l.default)({type:n?"cluster":"project"},t.props,{bodyClassName:j.default.bodyClass,itemClassName:j.default.itemClass,isFederated:!0,getData:t.getInitGateway,detail:e,key:r,store:t.store,title:n?t.renderClusterGatewayTitle():t.renderProjectTitle(),prefix:n?null:t.prefix,renderOperations:n?t.renderOperations:null,gatewayList:(0,k.toJS)(a)}))})))}},{key:"renderContent",value:function(){return this.gatewayList.every((function(e){return(0,_.default)((0,k.toJS)(e))}))?this.renderEmpty():this.renderInternetAccess(this.gatewayList)}},{key:"render",value:function(){return O.default.createElement("div",null,this.renderContent())}},{key:"canEdit",get:function(){return this.props.actions.includes("manage")}},{key:"cluster",get:function(){return this.props.cluster.name}},{key:"prefix",get:function(){return this.props.match.url}}]),a}(O.default.Component),u=(0,E.default)(o.prototype,"gatewayList",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=o))||c)||c)||c;r.default=L},3460:function(e,t,r){e.exports={cluster:"_2-ftWaI1a83L_0QqFrKD99",empty:"_3fjV7wo2CrhJ-5dXt_w3sp",desc:"_2sUA2vSFa_k4PbErr_vSfy",descTitle:"_2Rf6kTh0pgiyXfTNdjDb3A",container:"_1fc3jibbrO6vS2Nv3ZJMan",title:"_249VJGOOlE7eJT31tEzv36"}},3461:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1152)),c=a(r(3462)),o=a(r(3480)),u=a(r(3487)),l=a(r(3492)),i=a(r(3503)),s=a(r(3510)),f=a(r(3520)),d=a(r(3524));t.default=function(e){return[{path:"".concat(e,"/deployments/:name"),component:o.default},{path:"".concat(e,"/statefulsets/:name"),component:u.default},{path:"".concat(e,"/services/:name"),component:l.default},{path:"".concat(e,"/ingresses/:name"),component:i.default},{path:"".concat(e,"/volumes/:name"),component:s.default},{path:"".concat(e,"/secrets/:name"),component:f.default},{path:"".concat(e,"/configmaps/:name"),component:d.default},{path:"".concat(e,"/applications/:name"),component:c.default},{path:"".concat(e,"/gateways/:gatewayName"),component:n.default}]}},3462:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(21)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(0)),m=a(5),h=a(70),v=n(a(16)),y=n(a(32)),g=a(25),E=a(37),_=a(635),S=n(a(865)),O=n(a(737)),k=n(a(744)),b=n(a(3463));function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var P=(0,h.inject)("rootStore","projectStore")(c=(0,h.observer)(c=(0,_.trigger)(c=function(e){(0,s.default)(a,e);var r=T(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).store=new O.default(new S.default),e.fetchData=function(){var t=e.props.match.params;e.store.fetchDetail(t)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,m.toJS)(e.store.detail),success:e.fetchData})}},{key:"addComponent",icon:"add",text:t("Add Component"),action:"edit",onClick:function(){return e.trigger("crd.app.addservice",R({isFederated:!0,detail:(0,m.toJS)(e.store.detail),projectDetail:e.props.projectStore.detail,success:e.fetchData},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,m.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,y.default)(r)){var n=(0,v.default)(r,'labels["app.kubernetes.io/name"]');return[{name:t("PROJECT"),value:a},{name:t("APP"),value:n},{name:t("VERSION"),value:r.version},{name:t("CREATION_TIME_TCAP"),value:(0,E.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,E.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]}},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store,fedDetailStore:this.fedStore};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(g.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("APP_PL"),url:this.listUrl}]};return p.default.createElement(k.default,(0,o.default)({stores:e},r,{routes:b.default}))}},{key:"module",get:function(){return"applications"}},{key:"name",get:function(){return"APP"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r,"/").concat(this.module)}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(p.default.Component))||c)||c)||c;r.default=P},3463:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(634),c=a(r(3464)),o=a(r(3469)),u=a(r(3475)),l=a(r(3478)),i="/:workspace/federatedprojects/:namespace/applications/:name",s=[{path:"".concat(i,"/components"),title:"RESOURCE_STATUS",component:c.default,exact:!0},{path:"".concat(i,"/ingresses"),title:"EXTERNAL_ACCESS",component:o.default,exact:!0},{path:"".concat(i,"/traffic"),title:"TRAFFIC_MANAGEMENT",component:u.default,exact:!0},{path:"".concat(i,"/tracing"),title:"TRACING",component:l.default,exact:!0},(0,n.getIndexRoute)({path:i,to:"".concat(i,"/components"),exact:!0})];t.default=s},3464:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,c=a(r(12)),o=a(r(13)),u=a(r(19)),l=a(r(20)),i=a(r(18)),s=a(r(0)),f=r(70),d=a(r(3465));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var m=(0,f.inject)("detailStore")(n=(0,f.observer)(n=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var a;return(0,c.default)(this,r),(a=t.call(this,e)).store=e.detailStore,a}return(0,o.default)(r,[{key:"render",value:function(){var e=this,t=this.props.match.params.workspace,r=this.store.detail,a=r.clusters,n=r.namespace;return a.map((function(r){return s.default.createElement(d.default,{key:r.name,cluster:r.name,namespace:n,workspace:t,detail:e.store.detail})}))}}]),r}(s.default.Component))||n)||n;t.default=m},3465:function(e,r,a){"use strict";var n=a(6),c=a(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=c(a(0)),p=n(a(290)),m=n(a(32)),h=a(70),v=a(37),y=a(25),g=n(a(723)),E=n(a(749)),_=n(a(748)),S=n(a(3466)),O=n(a(3468));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var b=(0,h.inject)("projectStore")(o=(0,h.observer)(o=function(e){(0,i.default)(a,e);var r=k(a);function a(){var e;(0,u.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).serviceStore=new _.default,e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this.props,t=e.cluster,r=e.namespace,a=e.detail.selector;if(a){var n={cluster:t,namespace:r,labelSelector:(0,v.joinSelector)(a)};this.serviceStore.fetchListByK8s(n)}}},{key:"renderServices",value:function(){var e=this,r=this.serviceStore.list.data;return(0,m.default)(r)?d.default.createElement("div",{className:O.default.empty},t("NO_SERVICE_FOUND")):d.default.createElement("div",null,r.map((function(t){return d.default.createElement(S.default,{key:t.name,data:t,prefix:e.prefix})})))}},{key:"render",value:function(){var e=this.props.cluster,t=this.serviceStore.list.isLoading,r=(0,p.default)(this.props.projectStore.detail.clusters,"name");return d.default.createElement(g.default,null,d.default.createElement("div",{className:O.default.header},d.default.createElement("div",{className:O.default.cluster},d.default.createElement(E.default,{cluster:r[e],theme:"light",tagClass:"float-right"}))),d.default.createElement("div",{className:O.default.content},d.default.createElement(y.Loading,{spinning:t},this.renderServices())))}},{key:"prefix",get:function(){var e=this.props,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r)}}]),a}(d.Component))||o)||o;r.default=b},3466:function(e,r,a){"use strict";var n=a(72),c=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=c(a(12)),u=c(a(13)),l=c(a(19)),i=c(a(20)),s=c(a(18)),f=n(a(0)),d=a(276),p=c(a(16)),m=c(a(275)),h=c(a(3467));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var y=function(e){(0,l.default)(a,e);var r=v(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,r=e.data,a=e.prefix,n=(0,p.default)(r,'annotations["kubesphere.io/serviceType"]',"");return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement(m.default,{icon:"appcenter",title:f.default.createElement(d.Link,{to:"".concat(a,"/services/").concat(r.name)},r.name),description:t("SERVICE_TYPE_".concat(n.toUpperCase()))}),f.default.createElement(m.default,{title:"".concat(r.name,".").concat(r.namespace,".svc"),description:t("INTERNAL_DOMAIN_NAME_SCAP")}),f.default.createElement(m.default,{title:r.clusterIP,description:t("VIRTUAL_IP_ADDRESS")}))}}]),a}(f.Component);r.default=y},3467:function(e,t,r){e.exports={wrapper:"_31OJuz5r5AHhbccBVYa6H5"}},3468:function(e,t,r){e.exports={cluster:"_2BNy9Cg2ZRIap12UQoiAE1",content:"_1rbLrTDiFx5rAIDJqkd_qJ",empty:"ZbMlb4dh66orSttwdSUBZ"}},3469:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,c=a(r(12)),o=a(r(13)),u=a(r(19)),l=a(r(20)),i=a(r(18)),s=a(r(0)),f=r(70),d=a(r(3470));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var m=(0,f.inject)("detailStore")(n=(0,f.observer)(n=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var a;return(0,c.default)(this,r),(a=t.call(this,e)).store=e.detailStore,a}return(0,o.default)(r,[{key:"render",value:function(){var e=this,t=this.props.match.params.workspace,r=this.store.detail,a=r.clusters,n=r.namespace;return a.map((function(r){return s.default.createElement(d.default,{key:r.name,cluster:r.name,namespace:n,workspace:t,detail:e.store.detail})}))}}]),r}(s.default.Component))||n)||n;t.default=m},3470:function(e,r,a){"use strict";var n=a(6),c=a(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=n(a(49)),l=n(a(50)),i=n(a(12)),s=n(a(13)),f=n(a(19)),d=n(a(20)),p=n(a(18)),m=c(a(0)),h=n(a(290)),v=n(a(32)),y=a(70),g=a(37),E=a(25),_=n(a(723)),S=n(a(275)),O=n(a(749)),k=n(a(767)),b=n(a(855)),C=n(a(3471)),R=n(a(3474));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var P=(0,y.inject)("projectStore")(o=(0,y.observer)(o=function(e){(0,f.default)(c,e);var r,a,n=T(c);function c(){var e;(0,i.default)(this,c);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))).gatewayStore=new k.default,e.ingressStore=new b.default,e.state={gateway:{}},e}return(0,s.default)(c,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:(a=(0,l.default)(u.default.mark((function e(){var t,r,a,n,c,o;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.cluster,a=t.namespace,n=t.detail,(c=n.selector)&&(o={cluster:r,namespace:a,labelSelector:(0,g.joinSelector)(c)},this.ingressStore.fetchListByK8s(o)),e.next=5,this.getGateway();case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getGateway",value:(r=(0,l.default)(u.default.mark((function e(){var t,r,a,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.cluster,a=t.namespace,e.next=3,this.gatewayStore.getGatewayByProject({cluster:r,namespace:a});case 3:n=e.sent,this.setState({gateway:n[1]||n[0]});case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getNodePorts",value:function(e){return e.ports?e.ports.map((function(e){return"".concat(e.name.toUpperCase(),": ").concat(e.nodePort)})).join("/"):"-"}},{key:"getExternalIP",value:function(e){var t="-";return(0,v.default)(e.loadBalancerIngress)?(0,v.default)(e.externalIPs)||(t=e.externalIPs.join("; ")):t=e.loadBalancerIngress.join("; "),t}},{key:"render",value:function(){var e=this,r=this.props.cluster,a=this.ingressStore.list,n=a.data,c=a.isLoading,o=(0,h.default)(this.props.projectStore.detail.clusters,"name"),u=this.state.gateway||{};return m.default.createElement(_.default,null,m.default.createElement("div",{className:R.default.header},m.default.createElement("div",{className:R.default.cluster},m.default.createElement(O.default,{cluster:o[r],theme:"light",tagClass:"float-right"})),m.default.createElement(S.default,{icon:"eip-pool",title:u.type,description:t("GATEWAY_ACCESS_MODE")}),"NodePort"===u.type?m.default.createElement(m.default.Fragment,null,m.default.createElement(S.default,{title:u.loadBalancerIngress||"-",description:t("GATEWAY_IP_ADDRESS")}),m.default.createElement(S.default,{title:this.getNodePorts(u),description:t("NODE_PORTS_SCAP")})):m.default.createElement(S.default,{title:this.getExternalIP(u),description:t("LOAD_BALANCER_SCAP")})),m.default.createElement("div",{className:R.default.content},m.default.createElement(E.Loading,{spinning:c},m.default.createElement(m.default.Fragment,null,n.map((function(t){return m.default.createElement(C.default,{key:t.name,detail:t,prefix:e.prefix,gateway:u})}))))))}},{key:"prefix",get:function(){var e=this.props,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r)}}]),c}(m.Component))||o)||o;r.default=P},3471:function(e,t,r){"use strict";var a=r(72),n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(r(12)),o=n(r(13)),u=n(r(19)),l=n(r(20)),i=n(r(18)),s=a(r(0)),f=n(r(32)),d=n(r(1509)),p=n(r(3473));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var h=function(e){(0,u.default)(r,e);var t=m(r);function r(){return(0,c.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,t=e.prefix,r=e.gateway,a=e.detail,n=a.tls||[];return(0,f.default)(a.rules)?null:s.default.createElement("div",{className:p.default.wrapper},a.rules.map((function(e){return s.default.createElement(d.default,{key:e.host,tls:n,rule:e,gateway:r,prefix:t})})))}}]),r}(s.Component);t.default=h},3472:function(e,t,r){e.exports={card:"_3wmUeEURYvA5xtwTXjVHRT",content:"_3jNrdQ3d7V_wvVOr60E7xz",path:"_3l9pH5J25i4CyckpZ8-NCs",access:"_3VXXBX7de0ACzsnT4tO93F",tip:"n2-K-kA40a2F9ikKcSTbB"}},3473:function(e,t,r){e.exports={wrapper:"_1jxGr6tCLB26gXUGEygyp1"}},3474:function(e,t,r){e.exports={header:"_1Hq3ZUKxyIGwPN95tbYvFw",more:"IOiz0R3Znlki4BfPZ9-4r",cluster:"_1SQ_xP5Rc1PTPxVQJxR35j",content:"_766CB2j_qtHIG_WF7UTpG"}},3475:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(56)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(32)),p=n(a(16)),m=n(a(0)),h=a(70),v=a(25),y=n(a(1500)),g=n(a(751)),E=n(a(1510)),_=n(a(891)),S=a(768),O=n(a(3477));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var b=(0,h.inject)("detailStore","projectStore")(c=(0,h.observer)(c=function(e){(0,i.default)(a,e);var r=k(a);function a(e){var n;(0,u.default)(this,a),(n=r.call(this,e)).handleRefresh=function(){n.getData()},n.handleClusterChange=function(e){n.setState({cluster:e},(function(){n.getData()}))},n.handleAutoFetch=function(){var e=n.state.autoFetch;n.setState({autoFetch:!e},(function(){n.state.autoFetch?n.interval=setInterval((function(){n.getData()}),1e4):n.interval&&clearInterval(n.interval)}))},n.handleLookbackChange=function(e){var t=e.step,r=e.times,a=(0,o.default)(e,["step","times"]),c=(0,S.getTimeRange)({step:(0,S.getMinuteValue)(t),times:r}),u=c.start,l=c.end,i=a.start||u,s=a.end||l,f=Math.floor(s-i);n.setState({duration:f},(function(){n.getData()}))},n.operations=function(){var e=n.state.autoFetch;return m.default.createElement("div",{className:O.default.operations},m.default.createElement(_.default,{className:O.default.timeSelect,onChange:n.handleLookbackChange,showStep:!1,dark:!0,arrowIcon:"chevron-down",step:"1m",times:1}),m.default.createElement(v.Button,{type:"flat",icon:e?"pause":"start",onClick:n.handleAutoFetch}),m.default.createElement(v.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh}))},n.renderHeader=function(){return m.default.createElement("div",{className:O.default.cardHeader},n.operations(),t("TRAFFIC_MONITORING"))},n.renderMicroServiceTip=function(e){var r=(0,p.default)(e,"configz.servicemesh");return m.default.createElement("span",{className:O.default.tag},m.default.createElement(v.Icon,{name:r?"success":"exclamation",color:r?{primary:"#00aa72",secondary:"#90e0c5"}:{primary:"#d0a406",secondary:"#f0c426"}})," ",m.default.createElement("span",null,r?t("APPLICATION_GOVERNANCE_ENABLED"):t("APPLICATION_GOVERNANCE_DISABLED")))};var c=(0,p.default)(n.props.projectStore,"detail.clusters",[]),l=c.find((function(e){return(0,p.default)(e,"configz.servicemesh")}))||c[0]||{};return n.state={cluster:l,isGraphLoading:!0,duration:60,autoFetch:!1},n.store=e.detailStore,n.module=e.module,n}return(0,l.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.getData()}),1e4),this.getData()}},{key:"componentWillUnmount",value:function(){this.unmount=!0,this.interval&&clearInterval(this.interval)}},{key:"getData",value:function(){var e=this,t=this.store.detail.selector,r=this.props.match.params.namespace,a=this.state,n=a.cluster,c=a.duration;n&&(0,p.default)(n,"configz.servicemesh")&&t&&(this.setState({isGraphLoading:!0}),this.store.resourceStore.fetchGraph({cluster:n.name,namespace:r,selector:t,duration:c}).then((function(){e.unmount||e.setState({isGraphLoading:!1})})))}},{key:"renderContent",value:function(){var e=this.state,r=e.isGraphLoading,a=e.cluster,n=this.store.resourceStore.graph,c=n.data,o=n.health;return a&&(0,p.default)(a,"configz.servicemesh")?(0,d.default)(c)||(0,d.default)(c.nodes)?r?m.default.createElement(v.Loading,{className:O.default.loading}):m.default.createElement(g.default,{image:"/assets/traffic-management.svg",title:t("NO_DATA"),desc:t("TRAFFIC_MONITORING_UNAVAILABLE_DESC"),actions:m.default.createElement(v.Button,{onClick:this.handleRefresh},t("Refresh"))}):m.default.createElement("div",{className:O.default.main},m.default.createElement(y.default,{data:c,health:o,store:this.store.resourceStore,loading:r,onFetch:this.handleRefresh})):m.default.createElement(g.default,{image:"/assets/traffic-management.svg",title:t("NO_DATA"),desc:t("TRAFFIC_MANAGEMENT_NO_MICROSERVICE_TIP")})}},{key:"render",value:function(){var e=this.props.projectStore.detail.clusters;return m.default.createElement("div",null,m.default.createElement(E.default,{value:this.state.cluster,options:e,onChange:this.handleClusterChange,extra:this.renderMicroServiceTip}),this.renderHeader(),this.renderContent())}}]),a}(m.default.Component))||c)||c;r.default=b},3476:function(e,t,r){e.exports={wrapper:"_yrS4mpDD17eVrLFVo423",name:"hdUK_2xviMy_yssn3iCip",options:"_3shur80ViRlCoFi-pmKPuf",option:"_18gh_7CC4MN2fi8DcjaJLC",indicator:"rQf5ufF7H8AvO2rPG2nRX"}},3477:function(e,t,r){e.exports={main:"_1fa3VMP8C8ZSul8tBwMN62",loading:"_2zBr9xlut9cRpsys4HZOdF",tag:"_2NvG0X9ZEkRQC4EuGS87HJ",cardHeader:"_23xEZfpVkA0aQEoQX1gkTt",operations:"Ik7Mp90rKsS8V-lG71sT6",timeSelect:"_2e783591o4U507-s5muwJg"}},3478:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(56)),u=n(a(21)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(32)),m=n(a(16)),h=n(a(0)),v=a(5),y=a(70),g=a(279),E=a(37),_=a(25),S=n(a(751)),O=n(a(1503)),k=n(a(1505)),b=n(a(1510)),C=n(a(891)),R=a(768),T=n(a(748)),P=n(a(3479));function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var N=(0,y.inject)("detailStore","projectStore")(c=(0,y.observer)(c=function(e){(0,s.default)(a,e);var r=A(a);function a(e){var n;(0,l.default)(this,a),(n=r.call(this,e)).fetchTracing=function(){var e=(0,v.toJS)(n.detailStore.detail).namespace,t=n.state.cluster;if(t&&(0,m.default)(t,"configz.servicemesh")){var r=w({namespace:e,cluster:t.name,service:n.state.serviceName},n.state.query);n.resourceStore.fetchTracing(r)}},n.showDetailModal=function(e){n.setState({showDetailModal:!0,selectItem:e})},n.hideDetailModal=function(){n.setState({showDetailModal:!1,selectItem:{}})},n.handleClusterChange=function(e){n.setState({cluster:e},(function(){n.getData()}))},n.handleServiceChange=function(e){n.setState({serviceName:e},(function(){n.fetchTracing()}))},n.handleRefresh=function(){n.fetchTracing()},n.handleLookbackChange=function(e){var t=e.step,r=e.times,a=(0,o.default)(e,["step","times"]),c=(0,R.getTimeRange)({step:(0,R.getMinuteValue)(t),times:r}),u=c.start,l=c.end,i=1e3*(a.start||u),s=1e3*(a.end||l);n.setState((function(e){return{query:w(w({},e.query),{},{start:i,end:s})}}),(function(){return n.fetchTracing()}))},n.handleLimitChange=function(e){n.setState((function(t){return{query:w(w({},t.query),{},{limit:e})}}),(function(){return n.fetchTracing()}))},n.serviceRenderer=function(e){return h.default.createElement("span",null,t("SERVICE_VALUE",{value:e.label}))},n.renderMicroServiceTip=function(e){var r=(0,m.default)(e,"configz.servicemesh");return h.default.createElement("span",{className:P.default.tag},h.default.createElement(_.Icon,{name:r?"success":"exclamation",color:r?{primary:"#00aa72",secondary:"#90e0c5"}:{primary:"#d0a406",secondary:"#f0c426"}})," ",h.default.createElement("span",null,r?t("APPLICATION_GOVERNANCE_ENABLED"):t("APPLICATION_GOVERNANCE_DISABLED")))},n.detailStore=e.detailStore,n.resourceStore=n.detailStore.resourceStore,n.serviceStore=new T.default;var c=(0,g.parse)(location.search.slice(1)),u=(0,m.default)(n.props.projectStore,"detail.clusters",[]),i=u.find((function(e){return(0,m.default)(e,"configz.servicemesh")}))||u[0]||{},s=(0,R.getTimeRange)({step:(0,R.getMinuteValue)("5m"),times:60}),f=s.start,d=s.end;return n.state={cluster:i,showDetailModal:!1,selectItem:{},serviceName:"",query:{limit:5,start:1e3*f,end:1e3*d},defaultService:c.service},n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this,t=this.detailStore.detail,r=t.selector,a=t.namespace,n=this.state.cluster;if(n&&(0,m.default)(n,"configz.servicemesh")&&r){var c={namespace:a,cluster:n.name,labelSelector:(0,E.joinSelector)(r)};this.serviceStore.fetchListByK8s(c).then((function(){var t=(0,v.toJS)(e.serviceStore.list.data);t.length>0&&e.setState({serviceName:t[0].name},(function(){return e.fetchTracing()}))}))}}},{key:"renderOperations",value:function(){var e=this.state.query;return h.default.createElement("div",{className:P.default.operations},h.default.createElement(_.Select,{options:this.services,value:this.state.serviceName,prefixIcon:h.default.createElement(_.Icon,{name:"appcenter"}),onChange:this.handleServiceChange,valueRenderer:this.serviceRenderer}),h.default.createElement(C.default,{className:P.default.timeSelect,dark:!0,onChange:this.handleLookbackChange,showStep:!1,arrowIcon:"chevron-down"}),h.default.createElement(_.Select,{value:e.limit,options:this.limitOptions,onChange:this.handleLimitChange}),h.default.createElement(_.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh}))}},{key:"renderTracing",value:function(){var e=this.state.cluster,r=this.resourceStore,a=r.tracing,n=r.isTracingLoading,c=this.serviceStore.list,o=c.isLoading,u=c.data;return e&&(0,m.default)(e,"configz.servicemesh")?!o&&(0,p.default)(u)?null:h.default.createElement(O.default,{loading:n,data:a.data,operations:this.renderOperations(),onItemClick:this.showDetailModal}):h.default.createElement(S.default,{image:"/assets/traffic-management.svg",title:t("TRACING_UNAVAILABLE"),desc:t("TRACING_NO_MICROSERVICE_TIP")})}},{key:"render",value:function(){var e=this.props.projectStore.detail.clusters;return h.default.createElement("div",null,h.default.createElement(b.default,{value:this.state.cluster,options:e,onChange:this.handleClusterChange,extra:this.renderMicroServiceTip}),this.renderTracing(),h.default.createElement(k.default,{detail:this.state.selectItem,visible:this.state.showDetailModal,onCancel:this.hideDetailModal}))}},{key:"limitOptions",get:function(){return[{label:t("LAST_NUM_RECORDS",{num:5}),value:5},{label:t("LAST_NUM_RECORDS",{num:10}),value:10},{label:t("LAST_NUM_RECORDS",{num:20}),value:20},{label:t("LAST_NUM_RECORDS",{num:50}),value:50}]}},{key:"services",get:function(){return this.serviceStore.list.data.map((function(e){return{label:e.name,value:e.name,type:e.type}}))}}]),a}(h.default.Component))||c)||c;r.default=N},3479:function(e,t,r){e.exports={operations:"_2fBARiAJfc0bUaFE4VVXcr",timeSelect:"_7qmxRpeY2a6F31i4lij_w",tag:"_3CFHSBCbScJIVlfHH4u_w7"}},3480:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(49)),l=n(a(21)),i=n(a(50)),s=n(a(12)),f=n(a(13)),d=n(a(19)),p=n(a(20)),m=n(a(18)),h=n(a(0)),v=a(5),y=a(70),g=n(a(32)),E=a(25),_=a(37),S=a(635),O=n(a(736)),k=n(a(737)),b=n(a(744)),C=n(a(3481));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var D=(0,y.inject)("rootStore","projectStore")(c=(0,y.observer)(c=(0,S.trigger)(c=function(e){(0,d.default)(a,e);var r=P(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).store=new k.default(new O.default(e.module)),e.fetchData=(0,i.default)(u.default.mark((function t(){var r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.fetchDetail(r);case 3:return t.next=5,e.store.fetchResources(T(T({},r),{},{clusters:e.store.detail.clusters.map((function(e){return e.name}))}));case 5:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,v.toJS)(e.store.detail),success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("federated.workload.template.edit",T(T({detail:e.store.detail,projectDetail:e.props.projectStore.detail,module:e.module},e.props.match.params),{},{success:e.fetchData,isFederated:!0,supportGpuSelect:!0}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,v.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,g.default)(r))return[{name:t("PROJECT"),value:a},{name:t("APP"),value:r.app},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,_.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return h.default.createElement(E.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,_.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("DEPLOYMENT_PL"),url:this.listUrl}]};return h.default.createElement(b.default,(0,o.default)({stores:e},r,{routes:(0,C.default)(this.props.match.path)}))}},{key:"module",get:function(){return"deployments"}},{key:"name",get:function(){return"DEPLOYMENT"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(h.default.Component))||c)||c)||c;r.default=D},3481:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(634),c=a(r(762)),o=a(r(765)),u=a(r(1511)),l=a(r(1513));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:u.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:l.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:c.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},3482:function(e,t,r){"use strict";var a=r(6),n=r(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,o=a(r(49)),u=a(r(50)),l=a(r(12)),i=a(r(13)),s=a(r(19)),f=a(r(20)),d=a(r(18)),p=n(r(0)),m=r(5),h=r(70),v=a(r(16)),y=a(r(650)),g=r(25),E=a(r(749)),_=a(r(755)),S=r(289),O=a(r(657)),k=a(r(1035));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,h.observer)(c=function(e){(0,s.default)(r,e);var t=b(r);function r(){var e;(0,l.default)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).websocket=new O.default,e.state={replicas:(0,v.default)(e.props,"workload.podNums",0)},e.triggerReplicasChange=(0,y.default)((0,u.default)(o.default.mark((function t(){var r,a,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.cluster,n=r.onReplicasChange,t.next=3,n(a.name,e.state.replicas);case 3:case"end":return t.stop()}}),t)}))),1e3),e.handleAdd=function(){e.setState((function(e){return{replicas:e.replicas+1}}),e.triggerReplicasChange)},e.handleSubStract=function(){e.setState((function(e){var t=e.replicas;return{replicas:Math.max(t-1,0)}}),e.triggerReplicasChange)},e}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){(0,v.default)(this.props.workload,"name")!==(0,v.default)(e.workload,"name")&&(this.setState({replicas:(0,v.default)(this.props,"workload.podNums",0)}),this.unInitWebsocket(),this.initWebsocket())}},{key:"componentDidMount",value:function(){this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.unInitWebsocket()}},{key:"initWebsocket",value:function(){var e=this,t=this.props,r=t.workload,a=t.store,n=a.resourceStore.getWatchUrl(r);r&&n&&(this.websocket.watch(n),this.disposer=(0,m.reaction)((function(){return e.websocket.message}),(function(e){"MODIFIED"===e.type&&a.updateResource(r.cluster,e.object)})))}},{key:"unInitWebsocket",value:function(){this.disposer&&this.disposer(),this.websocket.close()}},{key:"render",value:function(){var e=this.props,t=e.cluster,r=e.workload,a=void 0===r?{}:r,n=e.store,c=e.onReplicasChange,o=this.state.replicas,u=a.podNums,l=void 0===u?0:u,i=a.readyPodNums,s=void 0===i?0:i,f=l-s,d=(0,S.getWorkloadStatus)(a,n.resourceStore.module),m=d.status,h=d.reason;return p.default.createElement("div",{className:k.default.cluster},p.default.createElement(E.default,{cluster:t,tagClass:"float-right",theme:"light"}),p.default.createElement("div",{className:k.default.bottom},p.default.createElement("div",{className:k.default.replicas},p.default.createElement("span",null,s)," / ",p.default.createElement("span",null,o)," ",h&&p.default.createElement(_.default,{status:m,data:a})),p.default.createElement("div",{className:k.default.pods},Array(Math.min(l,6)).fill("").map((function(e,t){return p.default.createElement("img",{key:t,src:t<f?"/assets/pod-waiting.svg":"/assets/pod-ready.svg",alt:""})})),l>6&&p.default.createElement(g.Icon,{name:"more",className:k.default.more,size:28,color:f>6?{primary:"#f5a623",secondary:"#f5a623"}:{primary:"#479e88",secondary:"#479e88"}})),c&&p.default.createElement("div",{className:k.default.control},p.default.createElement(g.Icon,{name:"add",type:"light",size:24,clickable:!0,onClick:this.handleAdd}),p.default.createElement(g.Icon,{name:"substract",type:"light",size:24,clickable:!0,onClick:this.handleSubStract}))))}}]),r}(p.Component))||c;t.default=C},3483:function(e,r,a){"use strict";var n=a(6),c=a(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=n(a(49)),l=n(a(50)),i=n(a(12)),s=n(a(13)),f=n(a(19)),d=n(a(20)),p=n(a(18)),m=c(a(0)),h=a(5),v=a(70),y=n(a(16)),g=n(a(650)),E=a(25),_=n(a(749)),S=n(a(755)),O=a(289),k=n(a(657)),b=n(a(3)),C=n(a(1035));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var T=(0,v.observer)(o=function(e){(0,f.default)(a,e);var r=R(a);function a(){var e;(0,i.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).websocket=new k.default,e.state={replicas:(0,y.default)(e.props,"workload.podNums",0),weight:e.getWeight},e.triggerWeightChange=(0,g.default)((0,l.default)(u.default.mark((function t(){var r,a,n,c;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.cluster,n=r.onWeightChange,c=e.state.weight,t.next=4,n(a.name,c);case 4:case"end":return t.stop()}}),t)}))),1e3),e.handleAdd=function(){e.setState((function(e){return{weight:e.weight+1}}),e.triggerWeightChange)},e.handleSubStract=function(){e.setState((function(e){var t=e.weight;return{weight:Math.max(t-1,0)}}),e.triggerWeightChange)},e}return(0,s.default)(a,[{key:"componentDidUpdate",value:function(e){(0,y.default)(this.props.workload,"name")===(0,y.default)(e.workload,"name")&&(0,y.default)(this.props.workload,"podNums")===(0,y.default)(e.workload,"podNums")||(this.setState({replicas:(0,y.default)(this.props,"workload.podNums",0)}),this.unInitWebsocket(),this.initWebsocket())}},{key:"componentDidMount",value:function(){this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.unInitWebsocket()}},{key:"initWebsocket",value:function(){var e=this,t=this.props,r=t.workload,a=t.store,n=a.resourceStore.getWatchUrl(r);r&&n&&(this.websocket.watch(n),this.disposer=(0,h.reaction)((function(){return e.websocket.message}),(function(e){"MODIFIED"===e.type&&a.updateResource(r.cluster,e.object)})))}},{key:"unInitWebsocket",value:function(){this.disposer&&this.disposer(),this.websocket.close()}},{key:"render",value:function(){var e=this.props,r=e.cluster,a=e.workload,n=void 0===a?{}:a,c=e.store,o=this.state.replicas,u=n.podNums,l=void 0===u?0:u,i=n.readyPodNums,s=void 0===i?0:i,f=l-s,d=(0,O.getWorkloadStatus)(n,c.resourceStore.module),p=d.status,h=d.reason;return m.default.createElement("div",{className:(0,b.default)(C.default.scheduleCluster)},m.default.createElement(_.default,{cluster:r,tagClass:"float-right",theme:"light"}),m.default.createElement("div",{className:C.default.bottom},m.default.createElement("div",{className:C.default.replicas},m.default.createElement("span",null,s)," / ",m.default.createElement("span",null,o)," ",h&&m.default.createElement(S.default,{status:p,data:n})),m.default.createElement("div",{className:C.default.pods},Array(Math.min(l,6)).fill("").map((function(e,t){return m.default.createElement("img",{key:t,src:t<f?"/assets/pod-waiting.svg":"/assets/pod-ready.svg",alt:""})})),l>6&&m.default.createElement(E.Icon,{name:"more",className:C.default.more,size:28,color:f>6?{primary:"#f5a623",secondary:"#f5a623"}:{primary:"#479e88",secondary:"#479e88"}}))),m.default.createElement("div",{className:C.default.weight,onClick:this.stopPropagation},m.default.createElement(E.Icon,{name:"add",type:"light",size:20,clickable:!0,onClick:this.handleAdd}),m.default.createElement("span",{className:C.default.value},m.default.createElement("span",{className:C.default.spanText},this.getWeight),m.default.createElement("span",{className:C.default.subText}," ",t("WEIGHT"))),m.default.createElement(E.Icon,{name:"substract",type:"light",size:20,clickable:!0,onClick:this.handleSubStract})))}},{key:"getWeight",get:function(){var e=this.props,t=e.store,r=e.cluster;return(0,y.default)(t.deployedScheduleTemplate,"spec.clusters.".concat(r.name,".weight"),0)}}]),a}(m.Component))||o;r.default=T},3484:function(e,r,a){"use strict";var n=a(72),c=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=c(a(12)),u=c(a(13)),l=c(a(19)),i=c(a(20)),s=c(a(18)),f=n(a(0)),d=c(a(1014)),p=c(a(1035));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var h=function(e){(0,l.default)(a,e);var r=m(a);function a(e){var t;(0,o.default)(this,a),(t=r.call(this,e)).handleScale=function(e){var r=e.target.value;(/^\+?[1-9][0-9]*$/.test(r)||""===r)&&t.setState({desire:r,seconds:5},(function(){t.showConfirm()}))},t.showConfirm=function(){t.setState({showConfirm:!0},(function(){t.startTimer()}))},t.startTimer=function(){t.timer&&t.stopTimer(),t.updateTime()},t.stopTimer=function(){clearTimeout(t.timer),t.timer=null},t.updateTime=function(){var e=t.state.seconds;t.timer=setTimeout((function(){e>0?t.setState({seconds:e-1},(function(){t.updateTime()})):(t.handleConfirm(),t.handleCancel())}),1e3)},t.handleConfirm=function(){t.props.onChange(t.state.desire),t.hideConfirm()},t.handleCancel=function(){t.setState({desire:t.props.desire},(function(){t.hideConfirm()}))},t.hideConfirm=function(){t.setState({showConfirm:!1},(function(){t.stopTimer()}))};var n=e.desire;return t.state={prevPropDesire:n,desire:n,seconds:5,showConfirm:!1},t}return(0,u.default)(a,[{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){var e=this.props.name,r=this.state,a=r.desire,n=r.showConfirm,c=r.seconds;return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:p.default.replicasInput},f.default.createElement("input",{name:e,value:a,onChange:this.handleScale})),f.default.createElement(d.default,{visible:n,width:400,title:t("ADJUST_REPLICAS"),content:t.html("REPLICAS_SCALE_NOTIFY_CONTENT",{num:Number(a)}),cancelText:t("REPLICAS_SCALE_NOTIFY_CANCEL"),confirmText:t("REPLICAS_SCALE_NOTIFY_CONFIRM",{seconds:c}),onCancel:this.handleCancel,onConfirm:this.handleConfirm}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.desire!==t.prevPropDesire){var r=(a=e.desire,Number(a||0));return{prevPropDesire:r,desire:r}}var a;return null}}]),a}(f.Component);r.default=h},3485:function(e,t,r){e.exports={deployment_codeResource:"_2v3CnaMI4WQFjBr1rH10IK"}},3486:function(e,t,r){e.exports={item:"_3xQ6tn2XzgaF-fxJRZeGll",more:"_2kE7aMEkAa23Y-oMSAo89T"}},3487:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(49)),l=n(a(21)),i=n(a(50)),s=n(a(12)),f=n(a(13)),d=n(a(19)),p=n(a(20)),m=n(a(18)),h=n(a(0)),v=a(5),y=a(70),g=n(a(32)),E=a(25),_=a(37),S=a(635),O=n(a(736)),k=n(a(737)),b=n(a(744)),C=n(a(3488));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var D=(0,y.inject)("rootStore","projectStore")(c=(0,y.observer)(c=(0,S.trigger)(c=function(e){(0,d.default)(a,e);var r=P(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).store=new k.default(new O.default(e.module)),e.fetchData=(0,i.default)(u.default.mark((function t(){var r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.fetchDetail(r);case 3:return t.next=5,e.store.fetchResources(T(T({},r),{},{clusters:e.store.detail.clusters.map((function(e){return e.name}))}));case 5:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,v.toJS)(e.store.detail),success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("federated.workload.template.edit",T(T({detail:e.store.detail,projectDetail:e.props.projectStore.detail,module:e.module},e.props.match.params),{},{success:e.fetchData,isFederated:!0}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,v.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,g.default)(r))return[{name:t("PROJECT"),value:a},{name:t("APP"),value:r.app},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,_.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return h.default.createElement(E.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,_.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("STATEFULSET_PL"),url:this.listUrl}]};return h.default.createElement(b.default,(0,o.default)({stores:e},r,{routes:(0,C.default)(this.props.match.path)}))}},{key:"module",get:function(){return"statefulsets"}},{key:"name",get:function(){return"STATEFULSET"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(h.default.Component))||c)||c)||c;r.default=D},3488:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(634),c=a(r(762)),o=a(r(765)),u=a(r(1513)),l=a(r(3489));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:l.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:c.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},3489:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,c=a(r(49)),o=a(r(50)),u=a(r(12)),l=a(r(13)),i=a(r(19)),s=a(r(20)),f=a(r(18)),d=a(r(0)),p=r(70),m=a(r(16)),h=r(1511),v=a(r(737)),y=a(r(3490));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var E=(0,p.inject)("projectStore","detailStore")(n=(0,p.observer)(n=function(e){(0,i.default)(r,e);var t=g(r);function r(){var e;(0,u.default)(this,r);for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).serviceStore=new v.default({module:"services"}),e.fetchService=(0,o.default)(c.default.mark((function t(){var r,a,n,o;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store.detail,a=r.namespace,n=r.template,o=(0,m.default)(n,"spec.serviceName",""),t.next=4,e.serviceStore.checkName({name:o,namespace:a});case 4:if(!t.sent.exist){t.next=8;break}return t.next=8,e.serviceStore.fetchDetail({name:o,namespace:a});case 8:case"end":return t.stop()}}),t)}))),e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchService()}},{key:"renderServices",value:function(){var e=this.serviceStore,t=e.detail,r=e.isLoading,a=this.props.match.params.workspace;return t.name?d.default.createElement(y.default,{service:t,workspace:a,loading:r}):null}},{key:"renderContent",value:function(){return d.default.createElement("div",null,this.renderReplicaInfo(),this.renderServices(),this.renderContainerPorts(),this.renderPods())}}]),r}(h.Component))||n)||n;t.default=E},3490:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(a(12)),o=n(a(13)),u=n(a(19)),l=n(a(20)),i=n(a(18)),s=n(a(0)),f=a(276),d=n(a(1)),p=n(a(3)),m=n(a(32)),h=n(a(16)),v=a(58),y=n(a(723)),g=n(a(275)),E=n(a(3491));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var S=function(e){(0,u.default)(a,e);var r=_(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,o.default)(a,[{key:"renderContent",value:function(){var e=this.props,r=e.service,a=e.workspace;if((0,m.default)(r))return null;var n=r.name,c=r.namespace;return s.default.createElement("div",{className:E.default.item},s.default.createElement(g.default,{icon:v.ICON_TYPES.services,title:s.default.createElement(f.Link,{to:"/".concat(a,"/federatedprojects/").concat(c,"/services/").concat(n)},n),description:t(r.type)}))}},{key:"render",value:function(){var e=this.props.className,r=this.props.title||t("SERVICE_PL");return s.default.createElement(y.default,{className:(0,p.default)(E.default.main,e),title:r},this.renderContent())}},{key:"ports",get:function(){return(0,h.default)(this.props.service,"ports",[]).map((function(e){var t=e.targetPort?":".concat(e.targetPort):"";return"".concat(e.port).concat(t,"/").concat(e.protocol)}))}}]),a}(s.default.Component);r.default=S,S.propTypes={className:d.default.string,title:d.default.string,service:d.default.object,loading:d.default.bool},S.defaultProps={service:{},loading:!0}},3491:function(e,t,r){e.exports={item:"_1PQmBPdox2JqW3SmBv5687",info:"_11C0kbv64rWlWaLgQxMISN",record:"_2Jz3fdG2xJbV9Rhnq2hW_s",text:"_3M8bcgDVHqm5yDxsiosn2v",base:"_1kgonhTfjWg8Iwy7F9DQpf"}},3492:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(49)),l=n(a(21)),i=n(a(50)),s=n(a(12)),f=n(a(13)),d=n(a(19)),p=n(a(20)),m=n(a(18)),h=n(a(0)),v=a(5),y=a(70),g=n(a(16)),E=n(a(32)),_=a(25),S=a(37),O=a(635),k=n(a(748)),b=n(a(737)),C=n(a(744)),R=n(a(3493));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var w=(0,y.inject)("rootStore","projectStore")(c=(0,y.observer)(c=(0,O.trigger)(c=function(e){(0,d.default)(a,e);var r=D(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).store=new b.default(new k.default),e.fetchData=(0,i.default)(u.default.mark((function t(){var r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.fetchDetail(r);case 3:return t.next=5,e.store.fetchResources(P(P({},r),{},{clusters:e.store.detail.clusters.map((function(e){return e.name}))}));case 5:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:e.store.detail,success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("federated.workload.template.edit",P(P({detail:e.store.detail,projectDetail:e.props.projectStore.detail,module:"service"},e.props.match.params),{},{success:e.fetchData,isFederated:!0,withService:!0}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,v.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,E.default)(r)){var n=(0,g.default)(r,'annotations["kubesphere.io/serviceType"]');return[{name:t("PROJECT"),value:a},{name:t("TYPE"),value:h.default.createElement("span",null,"".concat(n?t("SERVICE_TYPE_".concat(n.toUpperCase())):t("CUSTOM_SERVICE")),h.default.createElement("span",{className:"text-desc"}," (",t(r.type),")"))},{name:t("APP"),value:r.app},{name:t("CREATION_TIME_TCAP"),value:(0,S.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,S.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]}},e}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return h.default.createElement(_.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,S.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return h.default.createElement(C.default,(0,o.default)({stores:e},r,{routes:(0,R.default)(this.props.match.path,this.store.detail)}))}},{key:"module",get:function(){return"services"}},{key:"name",get:function(){return"SERVICE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(h.default.Component))||c)||c)||c;r.default=w},3493:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(109)),c=r(634),o=a(r(762)),u=a(r(765)),l=a(r(3494)),i=a(r(3496));t.default=function(e,t){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:l.default,exact:!0}].concat((0,n.default)(t.isFedManaged?[{path:"".concat(e,"/access"),title:"ACCESS_INFORMATION",component:i.default,exact:!0}]:[]),[{path:"".concat(e,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,c.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})])}},3494:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,c=a(r(49)),o=a(r(50)),u=a(r(12)),l=a(r(13)),i=a(r(19)),s=a(r(20)),f=a(r(18)),d=a(r(0)),p=r(5),m=r(70),h=a(r(16)),v=a(r(290)),y=a(r(736)),g=a(r(737)),E=a(r(806)),_=a(r(1512)),S=a(r(3495));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var k=(0,m.inject)("detailStore","projectStore")(n=(0,m.observer)(n=function(e){(0,i.default)(r,e);var t=O(r);function r(e){var a;(0,u.default)(this,r),(a=t.call(this,e)).fetchData=(0,o.default)(c.default.mark((function e(){var t,r,n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params.namespace,r=a.state.workloadName,n=a.store.detail.clusters.map((function(e){return e.name})),e.next=5,a.workloadStore.checkName({name:r,namespace:t});case 5:e.sent.exist?(a.workloadStore.fetchDetail({name:r,namespace:t}),a.workloadStore.fetchResources({name:r,namespace:t,clusters:n}),a.setState({workloadExist:!0})):a.setState({workloadExist:!1});case 7:case"end":return e.stop()}}),e)}))),a.store=e.detailStore,a.state={workloadExist:!0,workloadName:(0,h.default)(a.store.detail.annotations,'["kubesphere.io/workloadName"]')};var n=(0,h.default)(a.store.detail.annotations,'["kubesphere.io/workloadModule"]',"deployments");return a.workloadStore=new g.default(new y.default(n)),a}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.detailStore.detail,a=t.workloadName,n=(0,h.default)(r,'annotations["kubesphere.io/workloadName"]');a!==n&&(this.setState({workloadName:n}),this.fetchData())}},{key:"renderReplicaInfo",value:function(){var e=(this.store.detail||{}).clusters,t=this.workloadStore,r=t.detail,a=t.resources,n=t.isResourcesLoading,c=(0,v.default)(this.props.projectStore.detail.clusters,"name");return d.default.createElement(_.default,{module:this.workloadStore.module,store:this.workloadStore,detail:r,resources:a,clusters:e,clustersDetail:c,isLoading:n,canEdit:this.enabledActions.includes("edit")})}},{key:"renderWorkloadPods",value:function(){var e=this.workloadStore.resources,t=this.store.detail.clusters.map((function(e){return e.name}));return d.default.createElement(E.default,{prefix:this.prefix,details:(0,p.toJS)(e),clusters:t,isFederated:!0})}},{key:"renderPods",value:function(){var e=this.store,t=e.resources,r=e.isResourcesLoading,a=this.store.detail.clusters.map((function(e){return e.name}));return d.default.createElement(E.default,{prefix:this.prefix,details:(0,p.toJS)(t),clusters:a,isLoading:r,isFederated:!0})}},{key:"renderContent",value:function(){var e=this.state,t=e.workloadName,r=e.workloadExist;return t&&r?d.default.createElement("div",null,this.renderReplicaInfo(),this.renderWorkloadPods()):this.renderPods()}},{key:"render",value:function(){return d.default.createElement("div",{className:S.default.main},this.renderContent())}},{key:"enabledActions",get:function(){return globals.app.getActions({module:this.store.module,project:this.props.match.params.namespace})}},{key:"prefix",get:function(){var e=this.props.match.params.workspace;return e?"/".concat(e):""}}]),r}(d.default.Component))||n)||n;t.default=k},3495:function(e,t,r){e.exports={access:"_1bjGKOVZKOXRIF6nQlyOhA"}},3496:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(56)),u=n(a(21)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(0)),m=n(a(290)),h=a(70),v=a(25),y=a(635),g=a(5),E=n(a(3497)),_=n(a(3502));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var b=(0,h.inject)("rootStore","detailStore","projectStore")(c=(0,h.observer)(c=(0,y.trigger)(c=function(e){(0,s.default)(a,e);var r=k(a);function a(){var e;(0,l.default)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).store=e.props.detailStore,e.fetchData=function(){var t=e.props.match.params,r=e.store.detail.clusters.map((function(e){return e.name}));e.store.fetchDetail(t),e.store.fetchResources(O(O({},t),{},{clusters:r}))},e.handleUpdateService=function(t){var r=e.store,a=r.detail,n=r.resources;e.trigger("fedservice.gateway.edit",{cluster:t,detail:(0,g.toJS)(a),resources:(0,g.toJS)(n),success:e.fetchData})},e}return(0,i.default)(a,[{key:"renderServiceAccess",value:function(){var e=this,r=this.store,a=r.resources,n=void 0===a?[]:a,c=r.isResourcesLoading,o=(0,m.default)(this.props.projectStore.detail.clusters,"name");return p.default.createElement(v.Loading,{spinning:c},p.default.createElement("div",null,p.default.createElement("div",{className:_.default.title},t("ACCESS_INFORMATION")),Object.keys(n).map((function(t){return p.default.createElement(E.default,{key:t,store:e.store,detail:n[t],cluster:o[t],enabledActions:e.enabledActions,updateService:e.handleUpdateService})}))))}},{key:"render",value:function(){return p.default.createElement("div",{className:_.default.main},this.renderServiceAccess())}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.namespace,r=(0,o.default)(e,["namespace"]);return globals.app.getActions(O(O({module:"services"},r),{},{project:t}))}}]),a}(p.default.Component))||c)||c)||c;r.default=b},3497:function(e,r,a){"use strict";var n=a(6),c=a(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=n(a(49)),l=n(a(50)),i=n(a(12)),s=n(a(13)),f=n(a(19)),d=n(a(20)),p=n(a(18)),m=c(a(0)),h=a(70),v=n(a(767)),y=n(a(723)),g=n(a(275)),E=n(a(749)),_=n(a(3498)),S=n(a(16)),O=n(a(3499)),k=n(a(3501));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var C=(0,h.inject)("rootStore")(o=(0,h.observer)(o=function(e){(0,f.default)(a,e);var r=b(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).gatewayStore=new v.default,e.state={gateway:{}},e.getProjectGateway=function(){var t=e.props.detail.namespace;return e.gatewayStore.getGatewayByProject({namespace:t,cluster:e.cluster})},e.getInitGateway=function(){var t=(0,l.default)(u.default.mark((function t(r){var a,n;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProjectGateway(r);case 2:a=t.sent,n=a[1]||a[0],e.setState({gateway:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getOperations=function(){return[{key:"editGateway",icon:"ip",text:t("EDIT_EXTERNAL_ACCESS"),action:"edit",onClick:function(){return e.props.updateService(e.cluster)}}]},e.getEnabledOperations=function(){return(e.isStateless?e.getOperations():[]).filter((function(t){return!t.action||e.props.enabledActions.includes(t.action)}))},e}return(0,s.default)(a,[{key:"componentDidMount",value:function(){this.getInitGateway()}},{key:"renderPorts",value:function(){var e=this.props.detail,t=this.state.gateway;return m.default.createElement(O.default,{gateway:t,detail:e})}},{key:"render",value:function(){var e=this.props,r=e.cluster,a=e.detail;return m.default.createElement(y.default,null,m.default.createElement("div",{className:k.default.header},m.default.createElement("div",{className:k.default.cluster},m.default.createElement(E.default,{cluster:r,theme:"light",tagClass:"float-right"})),m.default.createElement(g.default,{icon:"eip-pool",title:"".concat(a.name,".").concat(a.namespace,".svc"),description:t("INTERNAL_DOMAIN_NAME_SCAP")}),m.default.createElement(g.default,{title:a.clusterIP,description:t("VIRTUAL_IP_ADDRESS")}),m.default.createElement(_.default,{className:k.default.more,options:this.getEnabledOperations()})),m.default.createElement("div",{className:k.default.content},this.renderPorts()))}},{key:"cluster",get:function(){return this.props.cluster.name}},{key:"isStateless",get:function(){return"statelessservice"===(0,S.default)(this.props.store.detail,'annotations["kubesphere.io/serviceType"]')}}]),a}(m.Component))||o)||o;r.default=C},3498:function(e,t,r){"use strict";var a=r(72),n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(r(56)),o=n(r(12)),u=n(r(13)),l=n(r(19)),i=n(r(20)),s=n(r(18)),f=a(r(0)),d=n(r(1)),p=n(r(32)),m=r(25);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var v=function(e){(0,l.default)(r,e);var t=h(r);function r(){var e;(0,o.default)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleMoreClick=function(t,r){var a=e.props.options.find((function(e){return e.key===r})).onClick;a&&a()},e}return(0,u.default)(r,[{key:"renderMoreOptions",value:function(){var e=this.props.options.map((function(e){var t=e.icon,r=e.text,a=e.show,n=void 0===a||a,o=(0,c.default)(e,["icon","text","show"]);return n?f.default.createElement(m.Menu.MenuItem,o,t&&f.default.createElement(m.Icon,{name:t,type:"light"})," ",f.default.createElement("span",{"data-test":"detail-".concat(o.key)},r)):null}));return e.every((function(e){return null===e}))?null:f.default.createElement(m.Menu,{onClick:this.handleMoreClick},e)}},{key:"render",value:function(){var e=this.props,t=e.options,r=e.className;if((0,p.default)(t))return null;var a=this.renderMoreOptions();return a?f.default.createElement(m.Dropdown,{theme:"dark",content:a},f.default.createElement(m.Button,{className:r,type:"flat",icon:"more"})):null}}]),r}(f.Component);t.default=v,v.propTypes={className:d.default.string,options:d.default.array},v.defaultProps={options:[]}},3499:function(e,r,a){"use strict";var n=a(72),c=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=c(a(12)),u=c(a(13)),l=c(a(19)),i=c(a(20)),s=c(a(18)),f=n(a(0)),d=a(25),p=c(a(32)),m=c(a(3500));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var v=function(e){(0,l.default)(a,e);var r=h(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,r=e.detail,a=e.gateway;return(0,p.default)(r.ports)?null:f.default.createElement("div",{className:m.default.portsWrapper},r.ports.map((function(e,r){return f.default.createElement("div",{key:r,className:m.default.ports},f.default.createElement(d.Icon,{name:"pod",size:40}),f.default.createElement("div",{className:m.default.port},f.default.createElement("p",null,f.default.createElement("strong",null,e.targetPort)),f.default.createElement("p",null,t("CONTAINER_PORT_SCAP"))),f.default.createElement("div",{className:m.default.protocol},"→ ",e.protocol," → "),f.default.createElement(d.Icon,{name:"network-router",size:40}),f.default.createElement("div",{className:m.default.port},f.default.createElement("p",null,f.default.createElement("strong",null,e.port)),f.default.createElement("p",null,t("SERVICE_PORT_SCAP"))),e.nodePort&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:m.default.protocol},"→ ",e.protocol," → "),f.default.createElement(d.Icon,{name:"nodes",size:40}),f.default.createElement("div",{className:m.default.port},f.default.createElement("p",null,f.default.createElement("strong",null,e.nodePort)),f.default.createElement("div",null,t("NODE_PORT_SCAP"),f.default.createElement(d.Tooltip,{content:t("SERVICE_NODE_PORT_DESC"),trigger:"hover"},f.default.createElement(d.Icon,{name:"information"})))),a&&a.defaultIngress&&f.default.createElement("a",{href:"http://".concat(a.defaultIngress,":").concat(e.nodePort),target:"_blank",rel:"noreferrer noopener"},f.default.createElement(d.Button,{className:m.default.access},t("ACCESS_SERVICE")))))})))}}]),a}(f.Component);r.default=v},3500:function(e,t,r){e.exports={portsWrapper:"_1Pcu-345c_wl9yf38ivhQo",ports:"LDS1ia--XQVpIU-3yHPn5",port:"_1zJo48cJRGI6RNUL5es3tt",protocol:"_18xFWD0Op7w-JssVhsXPea",access:"VDdVC7yvlMXTJWX89VPiu"}},3501:function(e,t,r){e.exports={header:"_2wGtWVSqTnbMZptbrMvl8t",more:"_3nn1DlOJ8i93Lx92yk96rg",cluster:"dj9gdTQUx6gxxPOYtRxfg",icon:"_1JDtWb_pMP87aE1hTCyDVp",indicator:"_1C_oKLQioGrnjsLHfgKJZ",content:"_1-RHEin7EVlSnYzIKUJx_Q",group:"or5rEBIKrfmFv3_DJ4syj"}},3502:function(e,t,r){e.exports={title:"_3U-BsUjQkTwiUO_R0nKbi0"}},3503:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(21)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(0)),m=a(5),h=a(70),v=n(a(32)),y=a(25),g=a(37),E=a(635),_=n(a(737)),S=n(a(855)),O=n(a(744)),k=n(a(3504));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var T=(0,h.inject)("rootStore","projectStore")(c=(0,h.observer)(c=(0,E.trigger)(c=function(e){(0,s.default)(a,e);var r=R(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).store=new _.default(new S.default),e.fetchData=function(){var t=e.props.match.params,r=e.props.projectStore.detail.clusters.map((function(e){return e.name}));e.store.fetchDetail(t),e.store.fetchResources(C(C({},t),{},{clusters:r}))},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,m.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editRules",icon:"firewall",text:t("EDIT_ROUTING_RULES"),action:"edit",onClick:function(){return e.trigger("fedproject.router.rules.edit",{isFederated:!0,detail:e.store.detail,projectDetail:(0,m.toJS)(e.props.projectStore.detail),success:e.fetchData})}},{key:"editAnnotations",icon:"firewall",text:t("EDIT_ANNOTATIONS"),action:"edit",onClick:function(){return e.trigger("router.annotations.edit",{detail:(0,m.toJS)(e.store.detail),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,m.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,v.default)(r))return[{name:t("PROJECT"),value:a},{name:t("APP"),value:r.app},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return p.default.createElement(O.default,(0,o.default)({stores:e},r,{routes:(0,k.default)(this.props.match.path)}))}},{key:"module",get:function(){return"ingresses"}},{key:"name",get:function(){return"ROUTE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(p.default.Component))||c)||c)||c;r.default=T},3504:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(634),c=a(r(762)),o=a(r(765)),u=a(r(3505));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:u.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:c.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},3505:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,c=a(r(71)),o=a(r(12)),u=a(r(13)),l=a(r(19)),i=a(r(20)),s=a(r(18)),f=a(r(0)),d=a(r(290)),p=r(70),m=r(25),h=a(r(3506));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var y=(0,p.inject)("detailStore","projectStore")(n=(0,p.observer)(n=function(e){(0,l.default)(r,e);var t=v(r);function r(){var e;(0,o.default)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).store=e.props.detailStore,e}return(0,u.default)(r,[{key:"render",value:function(){var e=this,t=this.store,r=t.detail,a=t.resources,n=void 0===a?{}:a,o=t.isResourcesLoading,u=(0,d.default)(this.props.projectStore.detail.clusters,"name");return f.default.createElement(m.Loading,{spinning:o},f.default.createElement("div",null,r.clusters.map((function(t){return f.default.createElement(h.default,(0,c.default)({key:t.name},e.props.match.params,{detail:n[t.name],cluster:u[t.name]}))}))))}}]),r}(f.default.Component))||n)||n;t.default=y},3506:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(49)),u=n(a(50)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=n(a(190)),m=n(a(32)),h=n(a(0)),v=a(5),y=a(70),g=n(a(723)),E=n(a(275)),_=n(a(749)),S=n(a(3507)),O=n(a(767)),k=n(a(1509)),b=n(a(3509));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var R=(0,y.observer)(c=function(e){(0,s.default)(n,e);var r,a=C(n);function n(){var e;(0,l.default)(this,n);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).store=new O.default,e.state={gateway:{}},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.getGateway()}},{key:"getGateway",value:(r=(0,u.default)(o.default.mark((function e(){var t,r,a,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.cluster,a=t.namespace,e.next=3,this.store.getGatewayByProject({cluster:r.name,namespace:a});case 3:n=e.sent,this.setState({gateway:n[1]||n[0]});case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getNodePorts",value:function(e){return e.ports?e.ports.map((function(e){return"".concat(e.name.toUpperCase(),": ").concat(e.nodePort)})).join("/"):"-"}},{key:"getExternalIP",value:function(e){var t="-";return(0,m.default)(e.loadBalancerIngress)?(0,m.default)(e.externalIPs)||(t=e.externalIPs.join("; ")):t=e.loadBalancerIngress.join("; "),t||"-"}},{key:"renderRules",value:function(){var e=this.props,r=e.workspace,a=e.namespace,n=e.detail,c=(0,v.toJS)(this.state.gateway)||{};if(!n||(0,m.default)(n.rules))return t("NO_DATA");var o=n.tls||[];return h.default.createElement("div",{className:b.default.rules},n.rules.map((function(e){return h.default.createElement(k.default,{key:e.host,tls:o,rule:e,gateway:c,prefix:"/".concat(r,"/federatedprojects/").concat(a)})})))}},{key:"renderAnnotations",value:function(){var e=this.props.detail;return e?h.default.createElement(S.default,{data:(0,p.default)(e.annotations,["displayName","desc","creator"])}):null}},{key:"render",value:function(){var e=this.props.cluster,r=(0,v.toJS)(this.state.gateway)||{};return h.default.createElement(g.default,null,h.default.createElement("div",{className:b.default.header},h.default.createElement("div",{className:b.default.cluster},h.default.createElement(_.default,{cluster:e,theme:"light",tagClass:"float-right"})),h.default.createElement(E.default,{icon:"eip-pool",title:r.type,description:t("GATEWAY_ACCESS_MODE")}),"NodePort"===r.type?h.default.createElement(h.default.Fragment,null,h.default.createElement(E.default,{title:r.loadBalancerIngress||"-",description:t("GATEWAY_IP_ADDRESS")}),h.default.createElement(E.default,{title:this.getNodePorts(r),description:t("NODE_PORTS_SCAP")})):h.default.createElement(E.default,{title:this.getExternalIP(r),description:t("EXTERNAL_IP_ADDRESS")})),h.default.createElement("div",{className:b.default.content},this.renderRules(),this.renderAnnotations()))}}]),n}(h.default.Component))||c;r.default=R},3507:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=n(a(12)),o=n(a(13)),u=n(a(19)),l=n(a(20)),i=n(a(18)),s=n(a(0)),f=n(a(1)),d=n(a(32)),p=a(25),m=n(a(741)),h=n(a(3508));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var y=function(e){(0,u.default)(a,e);var r=v(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,r=e.className,a=e.data;return(0,d.default)(a)?null:s.default.createElement(m.default,{className:r,title:t("ANNOTATION_PL")},s.default.createElement("ul",{className:h.default.annotations},Object.keys(a).filter((function(e){return!(0,d.default)(a[e])})).map((function(e){return s.default.createElement("li",{key:e},s.default.createElement(p.Columns,null,s.default.createElement(p.Column,{className:"is-narrow"},s.default.createElement("p",{style:{width:317}},e)),s.default.createElement(p.Column,null,s.default.createElement("p",null,a[e]))))}))))}}]),a}(s.default.Component);r.default=y,y.propTypes={className:f.default.string,data:f.default.object},y.defaultProps={data:{}}},3508:function(e,t,r){e.exports={annotations:"_2_w63cUNkbWlOS0ZfqQkUh"}},3509:function(e,t,r){e.exports={header:"_2cRBeNhJ-QdGg_gm6Odlxt",more:"_2wydp9JkD2wSruuza5W-jL",cluster:"_2JQdd4abYvPgPiCpTe_tDE",icon:"_1wTNTYrqEQ2DbwCADkOyII",indicator:"_3ydyXdOIJE8B8VMPMX2bdU",content:"_1E9FTzaLJLWLHtCczzZhqj",rules:"_3spDU78xh15rAxlioee3wW"}},3510:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(49)),l=n(a(21)),i=n(a(50)),s=n(a(12)),f=n(a(13)),d=n(a(19)),p=n(a(20)),m=n(a(18)),h=n(a(0)),v=n(a(32)),y=a(70),g=a(25),E=a(37),_=a(635),S=a(5),O=n(a(763)),k=n(a(737)),b=n(a(873)),C=n(a(744)),R=n(a(3511));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var w=(0,y.inject)("rootStore","projectStore")(c=(0,y.observer)(c=(0,_.trigger)(c=function(e){(0,d.default)(a,e);var r=D(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).store=new k.default(new O.default),e.storageclass=new b.default,e.fetchData=(0,i.default)(u.default.mark((function t(){var r,a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.match.params,a=e.props.projectStore.detail.clusters.map((function(e){return e.name})),e.store.fetchDetail(r),e.store.fetchResources(P(P({},r),{},{clusters:a}));case 4:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,S.toJS)(e.store.detail),success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("volume.template.edit",P(P({module:e.module,detail:e.store.detail},e.props.match.params),{},{success:e.fetchData,isFederated:!0,projectDetail:e.props.projectStore.detail}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:(0,S.toJS)(e.store.detail),success:e.returnTolist})}}]},e.getAttrs=function(){var r=e.store.detail,a=void 0===r?{}:r;if((0,v.default)(a))return null;var n=a.createTime,c=a.creator,o=a.namespace,u=a.capacity,l=a.accessMode,i=a.storageClassName,s=a.annotations,f=void 0===s?{}:s;return[{name:t("PROJECT"),value:o},{name:t("CAPACITY"),value:u},{name:t("ACCESS_MODE_TCAP"),value:l},{name:t("STORAGE_CLASS"),value:i||f["volume.beta.kubernetes.io/storage-class"]},{name:t("PROVISIONER"),value:f["volume.beta.kubernetes.io/storage-provisioner"]||"-"},{name:t("CREATION_TIME_TCAP"),value:(0,E.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:c}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return h.default.createElement(g.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),operations:this.getOperations(),icon:"storage",breadcrumbs:[{label:t("PERSISTENT_VOLUME_CLAIM_PL"),url:this.listUrl}]};return h.default.createElement(C.default,(0,o.default)({stores:e},r,{routes:(0,R.default)(this.props.match.path)}))}},{key:"name",get:function(){return"PERSISTENT_VOLUME_CLAIM"}},{key:"module",get:function(){return"volumes"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(h.default.Component))||c)||c)||c;r.default=w},3511:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(634),c=a(r(762)),o=a(r(765)),u=a(r(3512)),l=a(r(3516));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",exact:!0,component:u.default},{path:"".concat(e,"/volume-mounts"),title:"MOUNT_INFORMATION",exact:!0,component:l.default},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",exact:!0,component:c.default},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},3512:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(12)),u=n(a(13)),l=n(a(19)),i=n(a(20)),s=n(a(18)),f=n(a(0)),d=a(70),p=n(a(290)),m=a(25),h=n(a(3513)),v=n(a(3515));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var g=(0,d.inject)("detailStore","projectStore")(c=(0,d.observer)(c=function(e){(0,l.default)(a,e);var r=y(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this,r=this.store.detail.clusters;return f.default.createElement("div",{className:v.default.main},f.default.createElement(m.Alert,{type:"info",className:"margin-b12",message:t.html("VOLUME_MONITORING_TIP")}),r.map((function(t){return f.default.createElement(h.default,{key:t.name,match:e.props.match,cluster:e.clusterMap[t.name]||t})})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"clusterMap",get:function(){return(0,p.default)(this.props.projectStore.detail.clusters,"name")}}]),a}(f.default.Component))||c)||c;r.default=g},3513:function(e,r,a){"use strict";var n=a(6),c=a(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=n(a(71)),l=n(a(12)),i=n(a(13)),s=n(a(19)),f=n(a(20)),d=n(a(18)),p=c(a(0)),m=a(70),h=a(25),v=n(a(16)),y=a(725),g=n(a(1446)),E=n(a(785)),_=n(a(723)),S=a(735),O=n(a(749)),k=n(a(1445)),b=n(a(3514));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var R={inodeUsage:"pvc_inodes_used",inodeTotal:"pvc_inodes_total",inodeUtilisation:"pvc_inodes_utilisation",capacityAvailable:"pvc_bytes_available",capacityTotal:"pvc_bytes_total",capacityUtilisation:"pvc_bytes_utilisation"},T=(0,m.observer)(o=function(e){(0,s.default)(a,e);var r=C(a);function a(e){var t;(0,l.default)(this,a);var n=(t=r.call(this,e)).props.match.params,c=n.namespace,o=n.name,u=t.props.cluster;return t.monitor=new k.default({cluster:u.name,namespace:c,pvc:o}),t}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.timer=this.monitor.monitoringMetrics({step:"1m",times:60,metrics:Object.values(R)},{interval:6e4})}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"parseMetrics",value:function(e,t){var r=(0,y.getSuitableUnit)(e,t);return{unit:r,count:(0,y.getValueByUnit)(e,r)}}},{key:"render",value:function(){var e=this.monitor,t=e.isLoading,r=e.isRefreshing;return p.default.createElement(_.default,null,p.default.createElement(h.Loading,{spinning:t},p.default.createElement("div",{"data-refreshing":r},this.renderStatus(),this.renderMonitor())))}},{key:"renderStatus",value:function(){var e=this.props.cluster,r=this.monitor.data,a=(0,y.getLastMonitoringData)(r),n=(0,v.default)(a,"".concat(R.capacityAvailable,".value[1]"),0),c=(0,v.default)(a,"".concat(R.capacityTotal,".value[1]"),0),o=this.parseMetrics(n,"memory"),u=this.parseMetrics(c,"memory"),l=(0,v.default)(a,"".concat(R.capacityUtilisation,".value[1]"),0);return p.default.createElement("header",{className:b.default.header},p.default.createElement("div",{className:b.default.cluster},p.default.createElement(O.default,{cluster:e,theme:"light",tagClass:"float-right"})),p.default.createElement("div",{className:b.default.space}),p.default.createElement("div",{className:b.default.card},p.default.createElement(g.default,{rate:Number(l)})),p.default.createElement("div",{className:b.default.description},p.default.createElement("h3",null,o.count,p.default.createElement("small",null,o.unit)),p.default.createElement("p",null,t("AVAILABLE_CAPACITY"))),p.default.createElement("div",{className:b.default.description},p.default.createElement("h3",null,u.count,p.default.createElement("small",null,u.unit)),p.default.createElement("p",null,t("TOTAL_CAPACITY"))))}},{key:"renderMonitor",value:function(){var e=this.monitor.data,r=(0,v.default)(e,"".concat(R.inodeUtilisation,".data.result")),a=(0,v.default)(e,"".concat(R.inodeUsage,".data.result[0].values"),[]),n=(0,v.default)(e,"".concat(R.inodeTotal,".data.result[0].values"),[]),c=(0,y.getAreaChartOps)({title:t("INODE_USAGE"),unit:"%",legend:["USAGE"],data:r,renderTooltip:function(){var e=(0,y.getChartData)({unit:"",legend:["USAGE"],valuesData:[a]}),t=(0,y.getChartData)({unit:"",legend:["USAGE"],valuesData:[n]});return p.default.createElement(E.default,{usageData:e,totalData:t})}});return p.default.createElement(S.SimpleArea,(0,u.default)({width:"100%",theme:"dark"},c))}}]),a}(p.Component))||o;r.default=T},3514:function(e,t,r){e.exports={header:"_3Z4KUGmNUgVr4-y-komZ9K",space:"_2H48QuNUOvOnGq50OPjASq",description:"_3p6pmqlaHGqn0QYisabFSf",card:"_3fv7ZUwuOo2YeImgsK-K5a",cluster:"SWO2uJpaFLpUCiYol7TtI"}},3515:function(e,t,r){e.exports={ports:"_3b2RR6bcGe40UHeXGC9Br0",card:"_1EGCXddyEqqsPWIeiIdsg4",content:"_2XcnUCITfye82yE9ZTWKZB",title:"zeaK6s92HSCAqhu-YYqlZ",path:"_2C-Kf038TvUyk7wvxs1_AR",access:"_3yZMwNYFSKHnpiWv7qAqC3"}},3516:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,c=a(r(12)),o=a(r(13)),u=a(r(19)),l=a(r(20)),i=a(r(18)),s=a(r(0)),f=r(70),d=a(r(290)),p=a(r(3517)),m=a(r(3519));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var v=(0,f.inject)("detailStore","projectStore")(n=(0,f.observer)(n=function(e){(0,u.default)(r,e);var t=h(r);function r(){return(0,c.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this,t=this.store.detail.clusters;return s.default.createElement("div",{className:m.default.main},t.map((function(t){return s.default.createElement(p.default,{key:t.name,match:e.props.match,cluster:e.clusterMap[t.name]||t})})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"clusterMap",get:function(){return(0,d.default)(this.props.projectStore.detail.clusters,"name")}}]),r}(s.default.Component))||n)||n;t.default=v},3517:function(e,t,r){"use strict";var a=r(72),n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(r(12)),o=n(r(13)),u=n(r(19)),l=n(r(20)),i=n(r(18)),s=a(r(0)),f=n(r(723)),d=n(r(806)),p=n(r(749)),m=n(r(3518));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var v=function(e){(0,u.default)(r,e);var t=h(r);function r(){return(0,c.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.cluster,t=this.props.match.params,r=t.namespace,a=t.workspace,n=t.name,c={kind:"PVC",cluster:e.name,namespace:r,workspace:a,name:n};return s.default.createElement(f.default,null,s.default.createElement("div",{className:m.default.cluster},s.default.createElement(p.default,{cluster:e,theme:"light",tagClass:"float-right"})),s.default.createElement("div",{className:m.default.content},s.default.createElement(d.default,{detail:c,hideHeader:!0,hideFooter:!0,noWrapper:!0})))}},{key:"prefix",get:function(){return"/".concat(this.props.match.params.workspace)}}]),r}(s.Component);t.default=v},3518:function(e,t,r){e.exports={cluster:"_1KjuQ8goIKUHRa3R-iuBX4",content:"_3XpAsS8jkQ4Fw6ny0rzFEZ"}},3519:function(e,t,r){e.exports={ports:"_1W6aOQmbR_TDUl-4XI5cqb",card:"eXYzvyUJJVLQJMgIXqDJX",content:"ANDh5NFl5HpZ-esvdF1mg",title:"_3MWtGl2UjycAya8PZmy1Q-",path:"_2loC4j2Lt1B_2UqWFzCvrn",access:"_19sCDCBcH0h9bYP-ViNz9Y"}},3520:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=a(5),m=a(70),h=n(a(32)),v=a(25),y=a(37),g=a(635),E=a(58),_=n(a(737)),S=n(a(744)),O=n(a(3521));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var b=(0,m.inject)("rootStore")(c=(0,m.observer)(c=(0,g.trigger)(c=function(e){(0,i.default)(a,e);var r=k(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).store=new _.default({module:e.module}),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("secret.edit",{detail:e.store.detail,success:e.fetchData,isFederated:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,h.default)(r)){var n=r.type;return[{name:t("PROJECT"),value:a},{name:t("TYPE"),value:t(E.SECRET_TYPES[n]||n)},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,y.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]}},e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("SECRET_PL"),url:this.listUrl}]};return d.default.createElement(S.default,(0,o.default)({stores:e},r,{routes:(0,O.default)(this.props.match.path)}))}},{key:"module",get:function(){return"secrets"}},{key:"name",get:function(){return"SECRET"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(d.default.Component))||c)||c)||c;r.default=b},3521:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(634),c=a(r(3522));t.default=function(e){return[{path:"".concat(e,"/detail"),title:"DATA",component:c.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/detail"),exact:!0})]}},3522:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(136)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=a(70),m=a(25),h=n(a(741)),v=a(292),y=n(a(3523));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var E=(0,p.inject)("detailStore")(c=(0,p.observer)(c=function(e){(0,i.default)(a,e);var r=g(a);function a(e){var t;return(0,u.default)(this,a),(t=r.call(this,e)).convert=function(e){return t.state.showSecret?e:(0,v.safeBtoa)(e)},t.changeSecretState=function(){t.setState((function(e){return{showSecret:!e.showSecret}}))},t.store=e.detailStore,t.module=e.module,t.state={showSecret:!1},t}return(0,l.default)(a,[{key:"renderTLS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:y.default.tlsWrapper},d.default.createElement("div",{className:y.default.tlsItem},d.default.createElement("div",{className:"h6"},t("CREDENTIAL_SI")),d.default.createElement("pre",null,this.convert(e["tls.crt"]))),d.default.createElement("div",{className:y.default.tlsItem},d.default.createElement("div",{className:"h6"},t("PRIVATE_KEY_TCAP")),d.default.createElement("pre",null,this.convert(e["tls.key"]))))}},{key:"renderImageRepositorySecret",value:function(e){var t=this,r=e[".dockerconfigjson"];return r&&r.auths?d.default.createElement("div",{className:y.default.imageWrapper},d.default.createElement("ul",null,Object.entries(r.auths).map((function(e){var r=(0,o.default)(e,2),a=r[0],n=r[1];return d.default.createElement("li",{key:a},d.default.createElement("div",{className:"h6"},d.default.createElement(m.Icon,{name:"earth"}),a),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement("span",null,"Username:"),d.default.createElement("span",null,t.convert(n.username))),d.default.createElement("li",null,d.default.createElement("span",null,"Password:"),d.default.createElement("span",null,t.convert(n.password))),n.email&&d.default.createElement("li",null,d.default.createElement("span",null,"Email:"),d.default.createElement("span",null,t.convert(n.email)))))})))):null}},{key:"renderDefault",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:y.default.defaultWrapper},d.default.createElement("ul",null,Object.entries(t).map((function(t){var r=(0,o.default)(t,2),a=r[0],n=r[1];return d.default.createElement("li",{key:a},d.default.createElement("span",null,a,":"),d.default.createElement("span",null,d.default.createElement("pre",null,e.convert(n))))}))))}},{key:"renderBasicAuth",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:y.default.defaultWrapper},d.default.createElement("ul",null,Object.entries(r).map((function(r){var a=(0,o.default)(r,2),n=a[0],c=a[1];return d.default.createElement("li",{key:n},d.default.createElement("span",null,t(n.toUpperCase()),":"),d.default.createElement("span",null,d.default.createElement("pre",null,e.convert(c))))}))))}},{key:"renderContent",value:function(e){if(!e.type)return null;var t=null;switch(e.type){case"kubernetes.io/tls":t=this.renderTLS(e.data);break;case"kubernetes.io/dockerconfigjson":t=this.renderImageRepositorySecret(e.data);break;case"kubernetes.io/basic-auth":t=this.renderBasicAuth(e.data);break;default:t=this.renderDefault(e.data)}return t}},{key:"renderOperations",value:function(){var e=this.state.showSecret;return d.default.createElement(m.Button,{type:"flat",icon:e?"eye-closed":"eye",onClick:this.changeSecretState})}},{key:"render",value:function(){var e=this.store.detail,r=void 0===e?{}:e;return d.default.createElement(h.default,{title:t("DATA"),operations:this.renderOperations()},this.renderContent(r))}}]),a}(d.default.Component))||c)||c;r.default=E},3523:function(e,t,r){e.exports={defaultWrapper:"_2dy4CtwnVPBdVDSZHW9BOl",tlsWrapper:"iJYavjSaC9ppprl7BQSi8",tlsItem:"_2v7AIMJ0uI9fm8cKo5w1-x",imageWrapper:"_1Uipq-ALr1lKHarcyPzNTP"}},3524:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(71)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=a(5),m=a(70),h=n(a(32)),v=a(25),y=a(37),g=a(635),E=n(a(737)),_=n(a(744)),S=n(a(3525));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var k=(0,m.inject)("rootStore")(c=(0,m.observer)(c=(0,g.trigger)(c=function(e){(0,i.default)(a,e);var r=O(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=r.call.apply(r,[this].concat(c))).store=new E.default({module:e.module}),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("configmap.edit",{detail:e.store.detail,success:e.fetchData,isFederated:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,h.default)(r))return[{name:t("PROJECT"),value:a},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CONFIGMAP_PL"),url:this.listUrl}]};return d.default.createElement(_.default,(0,o.default)({stores:e},r,{routes:(0,S.default)(this.props.match.path)}))}},{key:"module",get:function(){return"configmaps"}},{key:"name",get:function(){return"CONFIGMAP"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(d.default.Component))||c)||c)||c;r.default=k},3525:function(e,t,r){"use strict";var a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(634),c=a(r(3526));t.default=function(e){return[{path:"".concat(e,"/detail"),title:"DATA",component:c.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/detail"),exact:!0})]}},3526:function(e,r,a){"use strict";var n=a(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,o=n(a(136)),u=n(a(12)),l=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=n(a(0)),p=a(70),m=n(a(741)),h=n(a(3527));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var y=(0,p.inject)("detailStore")(c=(0,p.observer)(c=function(e){(0,i.default)(a,e);var r=v(a);function a(e){var t;return(0,u.default)(this,a),(t=r.call(this,e)).store=e.detailStore,t.module=e.module,t}return(0,l.default)(a,[{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:h.default.wrapper},d.default.createElement("ul",null,Object.entries(e).map((function(e){var t=(0,o.default)(e,2),r=t[0],a=t[1];return d.default.createElement("li",{key:r},d.default.createElement("div",{className:"h6"},r),d.default.createElement("pre",{className:h.default.value},a))}))))}},{key:"render",value:function(){var e=this.store,r=e.detail,a=e.isLoading;return d.default.createElement(m.default,{title:t("DATA"),loading:a},this.renderContent(r.data))}}]),a}(d.default.Component))||c)||c;r.default=y},3527:function(e,t,r){e.exports={wrapper:"_28vsYz12ZPwpoPNgzqPOo9",value:"-jWVKnn0uXD_hecvNvLnq"}},720:function(e,t,r){"use strict";var a=r(6),n=r(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,o=a(r(49)),u=a(r(21)),l=a(r(50)),i=a(r(12)),s=a(r(13)),f=a(r(19)),d=a(r(20)),p=a(r(18)),m=n(r(0)),h=a(r(73)),v=r(5),y=r(70),g=r(25),E=r(634),_=a(r(737)),S=a(r(637)),O=a(r(3415));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var R=(0,y.inject)("rootStore")(c=(0,y.observer)(c=function(e){(0,f.default)(a,e);var t,r=C(a);function a(e){var t;return(0,i.default)(this,a),(t=r.call(this,e)).store=new _.default({module:"namespaces"}),t.clusterStore=new S.default,t.init(e.match.params),t}return(0,s.default)(a,[{key:"componentDidUpdate",value:function(e){this.project!==e.match.params.namespace&&this.init(this.props.match.params)}},{key:"init",value:(t=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,Promise.all([this.store.fetchDetail(b(b({},t),{},{name:t.namespace})),this.props.rootStore.getRules({workspace:t.workspace})]);case 3:return e.next=5,this.props.rootStore.getRules(t);case 5:return e.next=7,this.clusterStore.fetchList({names:this.store.detail.clusters.map((function(e){return e.name})).join(","),sortBy:"createTime",ascending:!0,limit:-1});case 7:this.store.detail.clusters=(0,v.toJS)(this.clusterStore.list.data),this.store.detail.clusters.forEach((function(e){(0,h.default)(globals,"clusterConfig.".concat(e.name),e.configz)})),globals.app.cacheHistory(this.props.match.url,{type:"Multi-cluster Project",name:this.store.detail.name,aliasName:this.store.detail.aliasName,isFedManaged:!0}),this.store.initializing=!1;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?m.default.createElement(g.Loading,{className:"ks-page-loading"}):m.default.createElement(y.Provider,{projectStore:this.store},(0,E.renderRoutes)(O.default))}},{key:"project",get:function(){return this.props.match.params.namespace}}]),a}(m.Component))||c)||c;t.default=R}}]);