(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1155:function(e,t,r){e.exports={formWrapper:"_1pBRQd8MUROqFmxPfuRYp4",form:"_3JzFPoQ34lgmNVkSRMBVIj",footer:"_2dvsRov11uCxYPRe1gYh4",selectWrapper:"_3BCOXYnEfkLvOAaUpEiz04",tip:"_2k3-LCgSYKTYu6hfQCCzYR"}},1462:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TreeNode",{enumerable:!0,get:function(){return o.default}}),t.default=void 0;var a=n(r(3093)),o=n(r(1463));a.default.TreeNode=o.default;var c=a.default;t.default=c},1463:function(e,t,r){"use strict";var n=r(72),a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(21)),c=a(r(12)),u=a(r(13)),l=a(r(135)),s=a(r(19)),i=a(r(20)),f=a(r(18)),d=n(r(0)),p=a(r(1)),m=a(r(3)),h=a(r(298)),v=r(25),y=a(r(1464)),g=a(r(1465)),E=r(1466);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var S=function(e){(0,s.default)(r,e);var t=b(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getNodeChildren=function(){var t=e.props.children,r=(0,E.toArray)(t).filter((function(e){return e}));return(0,E.getNodeChildren)(r)},e.isLeaf=function(){var t=e.props.isLeaf,r=0!==e.getNodeChildren().length;return!1!==t&&(t||!r)},e.isDisabled=function(){var t=e.props.disabled,r=e.context.tree.disabled;return!1!==t&&!(!r&&!t)},e.onExpand=function(t){(0,e.context.tree.onNodeExpand)(t,(0,l.default)(e))},e.onSelect=function(t){if(!e.isDisabled()){var r=e.context.tree.onNodeSelect;t.preventDefault(),r(t,(0,l.default)(e))}},e.onSelectorClick=function(t){(0,e.context.tree.onNodeClick)(t,(0,l.default)(e)),e.onSelect(t)},e.renderSelector=function(){var t=e.props,r=t.title,n=t.selected;return d.default.createElement("div",{className:(0,m.default)(g.default.treeContent,n&&g.default.selected),onClick:e.onSelectorClick},r)},e.renderSwitcher=function(){var t=e.props.expanded,r=e.isLeaf();return d.default.createElement("span",{className:(0,m.default)(g.default.treeSwitch,t?g.default.open:g.default.close,r&&g.default.noop)},d.default.createElement(v.Icon,{onClick:r?h.default:e.onExpand,name:"triangle-right",size:16,type:"dark"}))},e.renderChildren=function(){var t=e.props,r=t.expanded,n=t.pos,a=e.context.tree.renderTreeNode,o=e.getNodeChildren();return r&&d.default.createElement("ul",{className:(0,m.default)(g.default.treeChildren,r&&g.default.open)},(0,E.mapChildren)(o,(function(e,t){return a(e,t,n)})))},e}return(0,u.default)(r,[{key:"getChildContext",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.context)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.selected,n=this.isDisabled();return d.default.createElement("li",{className:(0,m.default)(g.default.treeNode,t)},d.default.createElement("div",{className:(0,m.default)(g.default.treeNodeWrap,!n&&r&&g.default.selected,n&&g.default.disabled)},this.renderSwitcher(),this.renderSelector()),this.renderChildren())}}]),r}(d.Component);t.default=S,S.isTreeNode=!0,S.propTypes={eventKey:p.default.string,className:p.default.string,style:p.default.object,root:p.default.object,isLeaf:p.default.bool,onSelect:p.default.func,expanded:p.default.bool,selected:p.default.bool,children:p.default.node,title:p.default.node,pos:p.default.string,disabled:p.default.bool},S.contextTypes=y.default,S.childContextTypes=y.default,S.defaultProps={title:"---"}},1464:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1)),o={tree:a.default.shape({disabled:a.default.bool,onNodeClick:a.default.func,onNodeExpand:a.default.func,onNodeSelect:a.default.func})};t.default=o},1465:function(e,t,r){e.exports={tree:"_2iR3_B67AK8wTsW8XlU6CJ",treeNode:"_1gVuXvLPfQKYkr7_rsG-kT",treeChildren:"_1fKRWcElGHwByUJSVwVQyL",treeNodeWrap:"EQ6h8y47L5gzxnGy4JtFd",disabled:"U8QsDfwAsL0nqHBKIYV97",treeContent:"_2-IH7XvhLc_Guza4AaoCJ_",selected:"_38P9-lalO-DKNLVEr5nAwf",treeSwitch:"_10aJkrX4ji6C11I_WM7Og8",open:"_4C6_lJrd94tk1oaI0QIee",close:"XPBaBcTE8W6gn1gXjlLYc",noop:"_1pilQ6urMDMxl-tE-Jc7SL",showLine:"O-GDVrOhmQJ3ruI8ul438"}},1466:function(e,t,r){"use strict";var n=r(72);Object.defineProperty(t,"__esModule",{value:!0}),t.getDataAndAria=t.conductExpandParent=t.convertTreeToEntities=t.calcSelectedKeys=t.mapChildren=t.traverseTreeNodes=t.getNodeChildren=t.isTreeNode=t.getPosition=t.posToArr=t.arrAdd=t.arrDel=t.toArray=void 0;var a=n(r(0)),o=function(e){var t=[];return a.default.Children.forEach(e,(function(e){t.push(e)})),t};t.toArray=o;t.arrDel=function(e,t){var r=e.slice(),n=r.indexOf(t);return n>=0&&r.splice(n,1),r};t.arrAdd=function(e,t){var r=e.slice();return-1===r.indexOf(t)&&r.push(t),r};t.posToArr=function(e){return e.split("-")};var c=function(e,t){return"".concat(e,"-").concat(t)};t.getPosition=c;var u=function(e){return e&&e.type&&e.type.isTreeNode};t.isTreeNode=u;var l=function(e){return o(e).filter(u)};t.getNodeChildren=l;var s=function(e,t){!function r(n,o,u){var s=n?n.props.children:e,i=n?c(u.pos,o):0,f=l(s);if(n){var d={node:n,index:o,pos:i,key:n.key||i,parentPos:u.node?u.pos:null};t(d)}a.Children.forEach(f,(function(e,t){r(e,t,{node:n,pos:i})}))}(null)};t.traverseTreeNodes=s;t.mapChildren=function(e,t){var r=o(e).map(t);return 1===r.length?r[0]:r};t.calcSelectedKeys=function(e,t){if(e)return t.multiple?e.slice():e.length?[e[0]]:e};t.convertTreeToEntities=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.initWrapper,n=t.processEntity,a=t.onProcessFinished,o={},c={},u={posEntities:o,keyEntities:c};return r&&(u=r(u)||u),s(e,(function(e){var t=e.node,r=e.index,a=e.pos,l=e.key,s=e.parentPos,i={node:t,index:r,key:l,pos:a};o[a]=i,c[l]=i,i.parent=o[s],i.parent&&(i.parent.children=i.parent.children||[],i.parent.children.push(i)),n&&n(i,u)})),a&&a(u),u};t.conductExpandParent=function(e,t){var r={};return(e||[]).forEach((function(e){!function e(n){if(!r[n]){var a=t[n];if(a){r[n]=!0;var o=a.parent;o&&e(o.key)}}}(e)})),Object.keys(r)};t.getDataAndAria=function(e){return Object.keys(e).reduce((function(t,r){var n=t;return"data-"!==r.substr(0,5)&&"aria-"!==r.substr(0,5)||(n[r]=e[r]),n}),{})}},1467:function(e,t,r){e.exports={userWrapper:"_1_DSXUIddmrce317bVesnR",scrollWrapper:"_3RmABpydi_HaIsEVQPfv7O",empty:"_3IRiVwO3Ga_hzwmja9vZkn",item:"_2R1k6eZF5XuN5Z_VYNSrnv",avatar:"_3Haf5uSfbNIZvhOiTYU_wQ",text:"_2rKvqdP00-aDZ26saG7UJl",tabPanel:"_3fckqAKJLvfi_g7Zecc65O",active:"Kan_4CNGC_U5jWhmFgUK3"}},3071:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(109)),o=n(r(3072)),c=n(r(3079)),u=n(r(3082)),l=n(r(3088)),s=n(r(3089)),i=n(r(3090)),f=n(r(3108)),d=n(r(3110)),p=n(r(3111)),m=n(r(3112)),h=n(r(3114)),v=n(r(3115)),y=n(r(3151)),g="/workspaces/:workspace",E=[].concat((0,a.default)(v.default),[{path:g,component:o.default,routes:[].concat((0,a.default)(y.default),[{path:"".concat(g,"/federatedprojects"),component:d.default,exact:!0},{path:"".concat(g,"/projects"),component:f.default,exact:!0},{path:"".concat(g,"/devops"),component:p.default,exact:!0},{path:"".concat(g,"/apps"),component:m.default,exact:!0},{path:"".concat(g,"/base-info"),component:c.default,exact:!0},{path:"".concat(g,"/repos"),component:h.default,exact:!0},{path:"".concat(g,"/quota"),component:u.default,exact:!0},{path:"".concat(g,"/roles"),component:l.default,exact:!0},{path:"".concat(g,"/members"),component:s.default,exact:!0},{path:"".concat(g,"/groups"),component:i.default,exact:!0}])}]);t.default=E},3072:function(e,t,r){"use strict";var n=r(6),a=r(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,c=n(r(109)),u=n(r(49)),l=n(r(50)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=a(r(0)),h=r(70),v=n(r(16)),y=r(634),g=r(656),E=n(r(3073));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var b=(0,h.inject)("rootStore","workspaceStore")(o=(0,h.observer)(o=function(e){(0,f.default)(r,e);var t=k(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).enterWorkspace=function(){var t=(0,l.default)(u.default.mark((function t(r){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.routing.push("/workspaces/".concat(r,"/")));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,t=e.match,r=e.location,n=e.route,a=n.routes,o=void 0===a?[]:a,u=n.path,l=this.props.workspaceStore.detail,s=globals.app.getWorkspaceNavs(this.workspace),i=(0,v.default)(s,"[0].items[0].name");return m.default.createElement("div",{className:"ks-page"},m.default.createElement("div",{className:"ks-page-side"},m.default.createElement(E.default,{icon:l.logo,detail:l,onChange:this.enterWorkspace}),m.default.createElement(g.Nav,{className:"ks-page-nav",navs:s,location:r,match:t})),m.default.createElement("div",{className:"ks-page-main"},i&&(0,y.renderRoutes)([].concat((0,c.default)(o),[(0,y.getIndexRoute)({path:u,to:"".concat(u,"/").concat(i),exact:!0}),(0,y.getIndexRoute)({path:"*",to:"/404",exact:!0})]))))}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(m.Component))||o)||o;t.default=b},3073:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(12)),c=a(n(13)),u=a(n(19)),l=a(n(20)),s=a(n(18)),i=a(n(0)),f=a(n(1)),d=a(n(3)),p=n(25),m=a(n(3074)),h=a(n(3078));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var y=function(e){(0,u.default)(n,e);var r=v(n);function n(e){var t;return(0,o.default)(this,n),(t=r.call(this,e)).showSelect=function(){t.setState({showSelect:!0})},t.hideSelect=function(){t.setState({showSelect:!1})},t.handleSelect=function(e){var r=t.props.onChange;t.hideSelect(),r(e)},t.state={showSelect:!1},t}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props.detail,r=this.state.showSelect;return i.default.createElement("div",null,i.default.createElement("div",{className:(0,d.default)(h.default.titleWrapper,"pointer"),onClick:this.showSelect},i.default.createElement("div",{className:h.default.icon},i.default.createElement(p.Icon,{name:"enterprise",size:40,type:"light"})),i.default.createElement("div",{className:h.default.text},i.default.createElement(p.Tooltip,{content:e.name},i.default.createElement("div",{className:"h6"},e.name)),i.default.createElement("p",null,e.description||t("WORKSPACE")))),i.default.createElement(m.default,{visible:r,onChange:this.handleSelect,onCancel:this.hideSelect}))}}]),n}(i.default.Component);r.default=y,y.propTypes={detail:f.default.object,onChange:f.default.func},y.defaultProps={detail:{},onChange:function(){}}},3074:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c,u=a(n(21)),l=a(n(12)),s=a(n(13)),i=a(n(19)),f=a(n(20)),d=a(n(18)),p=a(n(74)),m=a(n(0)),h=a(n(16)),v=n(5),y=n(70),g=n(25),E=a(n(274)),k=a(n(826)),b=a(n(770)),S=a(n(637)),_=a(n(3075)),O=a(n(3077));function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,y.inject)("rootStore")(o=(0,y.observer)((c=function(e){(0,i.default)(n,e);var r=P(n);function n(e){var t;return(0,l.default)(this,n),(t=r.call(this,e)).fetchData=function(e){t.store.fetchList(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))},t.handleSearch=function(e){t.fetchData({name:e})},t.handleRefresh=function(){t.fetchData()},t.handleOnEnter=function(e){var r=t.props.onChange;localStorage.setItem("".concat(globals.user.username,"-workspace"),e),r&&r(e)},t.showCreate=function(){t.props.rootStore.triggerAction("workspace.create",{store:t.store,success:t.fetchData})},t.store=new b.default,t.clusterStore=new S.default,t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.clusterStore.fetchList({limit:-1})}},{key:"render",value:function(){var e=this,r=this.props,n=r.visible,a=r.onCancel,o=(0,v.toJS)(this.store.list),c=o.data,u=o.total,l=o.page,s=o.isLoading,i=(0,h.default)(this.store.list,"filters.name"),f=globals.app.getActions({module:"workspaces"}).includes("manage");return m.default.createElement(E.default,{bodyClassName:O.default.body,visible:n,onCancel:a,width:960,icon:"enterprise",title:t("WORKSPACE_PL"),description:t("WORKSPACE_DESC"),hideFooter:!0},m.default.createElement("div",{className:O.default.bar},m.default.createElement(g.Columns,null,m.default.createElement(g.Column,null,m.default.createElement(g.InputSearch,{value:i,placeholder:t("SEARCH_BY_NAME"),onSearch:this.handleSearch})),m.default.createElement(g.Column,{className:"is-narrow"},m.default.createElement("div",null,m.default.createElement(g.Button,{icon:"refresh",type:"flat",onClick:this.handleRefresh}),f&&m.default.createElement(g.Button,{type:"control",onClick:this.showCreate},t("CREATE_WORKSPACE")))))),m.default.createElement("div",{className:O.default.list},m.default.createElement(k.default,{wrapperClassName:O.default.listWrapper,data:(0,v.toJS)(c),total:u,page:l,loading:s,onFetch:this.fetchData},c.map((function(t){return m.default.createElement(_.default,{key:t.uid,data:t,clustersDetail:e.clusters,onEnter:e.handleOnEnter})})))))}},{key:"clusters",get:function(){return this.clusterStore.list.data}}]),n}(m.default.Component),(0,p.default)(c.prototype,"clusters",[v.computed],Object.getOwnPropertyDescriptor(c.prototype,"clusters"),c.prototype),o=c))||o)||o;r.default=C},3075:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(12)),c=a(n(13)),u=a(n(19)),l=a(n(20)),s=a(n(18)),i=a(n(32)),f=a(n(0)),d=a(n(652)),p=a(n(901)),m=n(37),h=a(n(3076));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var y=function(e){(0,u.default)(n,e);var r=v(n);function n(){var e;(0,o.default)(this,n);for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return(e=r.call.apply(r,[this].concat(a))).handleClick=function(){var t=e.props,r=t.data,n=t.onEnter;n&&n(r.name)},e}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props,r=e.data,n=e.clustersDetail,a=[{title:(0,i.default)(r.clusters)?"-":f.default.createElement(p.default,{clusters:r.clusters,clustersDetail:n}),className:h.default.clusters,description:t("CLUSTER_INFORMATION")},{title:r.createTime?(0,m.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss"):"-",description:t("CREATION_TIME_TCAP")}];return f.default.createElement(d.default.Item,{icon:"enterprise",className:h.default.wrapper,titleClass:h.default.title,title:f.default.createElement("a",null,r.name),description:r.description||"-",details:a,onClick:this.handleClick})}}]),n}(f.default.Component);r.default=y},3076:function(e,t,r){e.exports={wrapper:"_33ES29TqP_1994rRsVt9rL",title:"_2NSnnMedyVQXkM6HlCh4x2",name:"flQl4up68sLVQYV9DukYP",clusters:"mJOJ6unQxGHvet8MhWY3a"}},3077:function(e,t,r){e.exports={body:"_3bje0kJI-KW2qtYqzs7W37",bar:"_1JJWum7q_jV24Xlxb-rYAX",list:"_2Fq_oG5KkuLdzWBf5tXWI6",listWrapper:"_2cP_ykfnPk4q-GGH5-L6I-"}},3078:function(e,t,r){e.exports={titleWrapper:"_1pcudZRzPutn_D41MB-25t",icon:"QSnicfCDkquV1nGkwxJ1G",text:"_3_sdPPd3EsBeZy7-Jth4RT"}},3079:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(136)),u=a(n(12)),l=a(n(13)),s=a(n(19)),i=a(n(20)),f=a(n(18)),d=a(n(0)),p=a(n(16)),m=a(n(32)),h=a(n(73)),v=n(5),y=n(70),g=n(25),E=a(n(275)),k=a(n(723)),b=a(n(808)),S=a(n(724)),_=a(n(3080)),O=a(n(749)),w=a(n(1026)),P=n(37),C=n(635),R=a(n(963)),D=a(n(3081));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var A=(0,y.inject)("rootStore","workspaceStore")(o=(0,y.observer)(o=(0,C.trigger)(o=function(e){(0,s.default)(n,e);var r=T(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=r.call.apply(r,[this].concat(o))).monitorStore=new R.default,e.getMetrics=function(){var t=(0,v.toJS)(e.monitorStore.statistics.data),r={};return Object.entries(t).forEach((function(e){var t=(0,c.default)(e,2),n=t[0],a=t[1];r[n]=(0,p.default)(a,"data.result[0].value[1]",0)})),r},e.fetchMetrics=function(){e.monitorStore.fetchStatistics(e.workspace)},e.fetchDetail=function(){e.store.fetchDetail({workspace:e.workspace})},e.showEdit=function(){e.trigger("resource.baseinfo.edit",{detail:(0,v.toJS)(e.store.detail),modal:_.default,success:e.fetchDetail})},e.handleNetworkChange=function(t){return function(){var r=(0,v.toJS)(e.store.detail),n=r.overrides,a=n.find((function(e){return e.clusterName===t}));a||(a={clusterName:t,clusterOverrides:[]},n.push(a));var o=a.clusterOverrides.find((function(e){return"/spec/networkIsolation"===e.path}));o||(o={path:"/spec/networkIsolation"},a.clusterOverrides.push(o)),o.value=!(0,p.default)(r,"clusterTemplates[".concat(t,"].spec.networkIsolation")),e.store.patch(r,{metadata:{name:r.name},spec:{overrides:n}}).then((function(){return e.fetchDetail()}))}},e.handleSingleClusterNetworkChange=function(){var t=(0,v.toJS)(e.store.detail),r={};(0,h.default)(r,"spec.template.spec.networkIsolation",!t.networkIsolation),e.store.patch(t,r).then((function(){return e.fetchDetail()}))},e.handleDelete=function(){var t=e.store.detail;e.trigger("workspace.delete",{type:"WORKSPACE",resource:t.name,detail:t,success:function(){return e.props.rootStore.routing.push("/")}})},e.getResourceOptions=function(){var r=e.getMetrics();return[{name:"1"===r.workspace_namespace_count?t("PROJECT"):t("PROJECTS"),icon:"project",value:r.workspace_namespace_count},{name:"1"===r.workspace_devops_project_count?t("DEVOPS_PROJECT_LOW"):t("DEVOPS_PROJECT_LOW_PL"),icon:"strategy-group",value:r.workspace_devops_project_count,hidden:!globals.app.hasKSModule("devops")},{name:"1"===r.workspace_member_count?t("WS_MEMBER_SCAP"):t("WS_MEMBER_SCAP_PL"),icon:"human",value:r.workspace_member_count}]},e.manageButtonClick=function(t,r){var n=e.enableManageAction.filter((function(e){return e.actionName===r}))[0];n&&n.onClick()},e.renderManageButton=function(){var t=e.enableManageAction,r=d.default.createElement(g.Menu,{onClick:e.manageButtonClick},t.map((function(e){return d.default.createElement(g.Menu.MenuItem,{key:e.actionName},d.default.createElement(g.Icon,{name:e.icon,type:"light"}),e.text)})));return t.length>0&&d.default.createElement(w.default,{className:D.default.manage,content:r})},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.canViewWorkspaceProjects&&this.fetchMetrics()}},{key:"renderBaseInfo",value:function(){var e=this.store.detail,r=this.getResourceOptions();return d.default.createElement(k.default,{title:t("WORKSPACE_INFO")},d.default.createElement("div",{className:D.default.header},d.default.createElement(E.default,{className:D.default.title,icon:"enterprise",title:e.name,description:e.description||t("WORKSPACE"),ellipsis:!0}),d.default.createElement(E.default,{title:e.manager,description:t("MANAGER")}),d.default.createElement(E.default,{title:(0,P.getLocalTime)(e.createTime).format("YYYY-MM-DD HH:mm:ss"),description:t("CREATION_TIME")}),this.renderManageButton()),this.canViewWorkspaceProjects&&d.default.createElement("div",{className:D.default.content},r.filter((function(e){return!e.hidden})).map((function(e){return d.default.createElement(E.default,{key:e.name,icon:e.icon,title:e.value,description:t(e.name)})}))))}},{key:"renderNetwork",value:function(){var e=this,r=this.store.detail;if(!globals.app.isMultiCluster){if(!globals.app.hasKSModule("network"))return null;var n=r.networkIsolation||!1;return d.default.createElement(k.default,{className:D.default.network,title:t("NETWORK_ISOLATION")},d.default.createElement("div",{className:D.default.item},d.default.createElement(E.default,{icon:"firewall",title:t(n?"ON":"OFF"),description:t("WS_NETWORK_ISOLATION")}),this.enabledActions.includes("manage")&&d.default.createElement(b.default,{className:D.default.switch,text:t(n?"ON":"OFF"),onChange:this.handleSingleClusterNetworkChange,checked:n})))}var a=(0,v.toJS)(this.store.clusters),o=a.data,c=a.isLoading;return d.default.createElement(k.default,{className:D.default.network,title:t("NETWORK_ISOLATION")},(0,m.default)(o)&&!c&&d.default.createElement("div",{className:D.default.empty},t("NO_AVAILABLE_CLUSTER")),o.map((function(n){var a=(0,p.default)(r,"clusterTemplates[".concat(n.name,"]"))||{},o=(0,p.default)(a,"spec.networkIsolation",r.networkIsolation)||!1;return d.default.createElement("div",{className:D.default.item,key:n.name},d.default.createElement(O.default,{cluster:n,className:D.default.clusterTitle}),d.default.createElement(E.default,{icon:"firewall",title:t(o?"ON":"OFF"),description:t("WS_NETWORK_ISOLATION")}),e.enabledActions.includes("manage")&&((0,p.default)(n,"configz.network")?d.default.createElement(b.default,{className:D.default.switch,text:t(o?"ON":"OFF"),onChange:e.handleNetworkChange(n.name),checked:o}):d.default.createElement("span",{className:D.default.noModule},t("NETWORK_POLICY_UNINSATLLED_DESC"))))})))}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement(S.default,{title:t("BASIC_INFORMATION"),icon:"cdn",description:t("WORKSPACE_BASIC_INFO_DESC"),tips:this.tips,module:this.module}),this.renderBaseInfo(),this.renderNetwork())}},{key:"store",get:function(){return this.props.workspaceStore}},{key:"module",get:function(){return"BaseInfo"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"isMultiCluster",get:function(){return!(0,m.default)(this.store.detail.clusters)}},{key:"tips",get:function(){return[{title:t("WORKSPACE_BASE_INFO_Q1"),description:t("WORKSPACE_BASE_INFO_A1")}]}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"workspace-settings",workspace:this.workspace})}},{key:"canViewWorkspaceProjects",get:function(){return globals.app.hasPermission({module:"projects",action:"view",workspace:this.workspace})}},{key:"enableManageAction",get:function(){var e=this.enabledActions,r=[];return e.includes("manage")&&r.push({actionName:"resource.baseinfo.edit",onClick:this.showEdit,icon:"pen",text:t("EDIT_INFORMATION")}),e.includes("manage")&&"member"!==globals.clusterRole&&r.push({actionName:"workspace.delete",onClick:this.handleDelete,icon:"trash",text:t("DELETE_WORKSPACE")}),r}}]),n}(d.default.Component))||o)||o)||o;r.default=A},3080:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c,u,l=a(n(21)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(0)),h=a(n(1)),v=a(n(833)),y=n(70),g=a(n(16)),E=a(n(650)),k=a(n(191)),b=a(n(738)),S=n(25),_=a(n(274)),O=a(n(278));function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var C=(0,y.observer)((u=c=function(e){(0,f.default)(n,e);var r=P(n);function n(e){var t;return(0,s.default)(this,n),(t=r.call(this,e)).fetchUsers=function(e){return t.userStore.fetchList(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))},t.handleOk=function(e){var r=t.props.onOk;(0,b.default)(e,"spec.clusters"),r(e)},t.handleScrollToBottom=function(){!t.scrolling&&t.userStore.list.total>t.userStore.list.data.length&&(t.scrolling=!0,t.userStore.fetchList({more:!0,page:t.userStore.list.page+1}).then((function(){t.scrolling=!1})))},t.handleInputChange=(0,E.default)((function(e){e||!t._select?(t._search=!0,t.userStore.fetchList({name:e})):t._select=!1}),300),t.handleChange=function(e){t._select=!0,!e&&t._search&&(t.userStore.fetchList(),t._search=!1)},t.state={formData:(0,v.default)(e.detail._originData)},t.userStore=new O.default,t.fetchUsers(),t}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,r=e.visible,n=e.isSubmitting,a=e.onCancel,o=this.state.formData;return m.default.createElement(_.default.Form,{data:o,width:691,title:t("EDIT_INFORMATION"),icon:"enterprise",onOk:this.handleOk,okText:t("OK"),onCancel:a,visible:r,isSubmitting:n},m.default.createElement(S.Form.Item,{label:t("Workspace Name"),desc:t("NAME_DESC")},m.default.createElement(S.Input,{name:"metadata.name",disabled:!0})),m.default.createElement(S.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},m.default.createElement(S.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),m.default.createElement(S.Form.Item,{label:t("ADMINISTRATOR")},m.default.createElement(S.Select,{name:"spec.template.spec.manager",options:this.users,pagination:(0,k.default)(this.userStore.list,["page","limit","total"]),isLoading:this.userStore.list.isLoading,onFetch:this.fetchUsers,defaultValue:globals.user.username,onChange:this.handleChange,searchable:!0})),m.default.createElement(S.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},m.default.createElement(S.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256,rows:"3"})))}},{key:"users",get:function(){var e=(0,g.default)(this.props.detail,"spec.template.spec.manager"),t=this.userStore.list.data.map((function(e){return{label:e.username,value:e.username}}));return t.every((function(t){return t.value!==e}))&&t.unshift({label:e,value:e}),t}}]),n}(m.default.Component),c.propTypes={detail:h.default.object,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func,isSubmitting:h.default.bool},c.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1},o=u))||o;r.default=C},3081:function(e,t,r){e.exports={header:"ySm_ubJyVUm8S8LbY2yIF",content:"_139KIcEdEKcJdiKUxOqkBa",tip:"_2Nsgzcsm1k-rqXu_VCsTgU",unbind:"_3Xy-as7N1JZ76WQrIXW9F1",action:"_1k9OCp058x4lIqafSr3xeN",item:"_3nvLCxrnjQ0KCiQeasoj7e",network:"_1jG_6R5BVNP1PJv9PQ6lh_",switch:"_2yn3vw2Pw0_JHStn5v03Hx",clusterTitle:"_2CKiDprsEk_4HcVvgH0rU3",empty:"_2f9pUp6DAKwVHDHqrnBOrX",title:"tvu2xaZOvMMQGFltqJ7xT",noModule:"_2uWU6vMT5mcHI5dpr1JJ4P",manage:"_3d5Sr8q7rZjE2qXijscb7s"}},3082:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),u=a(n(12)),l=a(n(13)),s=a(n(19)),i=a(n(20)),f=a(n(18)),d=a(n(0)),p=n(5),m=n(70),h=a(n(16)),v=a(n(724)),y=a(n(3083)),g=a(n(3087));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var k=(0,m.inject)("workspaceStore")(o=function(e){(0,s.default)(n,e);var r=E(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).getData=function(){e.store.fetchDetail(e.params)},e.handleMoreMenuClick=function(t,r){var n=e.enabledItemActions.find((function(e){return e.key===r}));n&&n.onClick&&n.onClick()},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this,r=(0,p.toJS)(this.store.clusters.data);return d.default.createElement("div",null,d.default.createElement(v.default,{icon:"cdn",title:t("WORKSPACE_QUOTA_PL"),description:t("WORKSPACE_QUOTAS_DESC")}),d.default.createElement("div",{className:g.default.title},t("RESOURCE_QUOTA_PL")),r.map((function(t){return d.default.createElement(y.default,(0,c.default)({key:t.name,cluster:t},e.props.match.params,{canEdit:e.canEdit}))})))}},{key:"store",get:function(){return this.props.workspaceStore}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"workspace-settings",workspace:this.params.workspace})}},{key:"canEdit",get:function(){return this.enabledActions.includes("edit")}}]),n}(d.default.Component))||o;r.default=k},3083:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(136)),u=a(n(12)),l=a(n(13)),s=a(n(19)),i=a(n(20)),f=a(n(18)),d=a(n(0)),p=n(5),m=n(70),h=a(n(16)),v=n(25),y=n(37),g=n(58),E=a(n(723)),k=a(n(749)),b=n(635),S=a(n(853)),_=a(n(3084)),O=a(n(3086));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var P=["limits.cpu","limits.memory"],C=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,b.trigger)(o=function(e){(0,s.default)(n,e);var r=w(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).store=new S.default,e.showEdit=function(){var t=e.props,r=t.workspace,n=t.cluster;e.trigger("workspace.quota.edit",{detail:{name:r,workspace:r,cluster:n.name},success:e.fetchData,isFederated:!0})},e.fetchData=function(){var t=e.props,r=t.workspace,n=t.cluster;t.needUpgrade||e.store.fetchDetail({workspace:r,name:r,cluster:n.name})},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props,r=e.cluster,n=e.canEdit;if(this.needUpgrade)return d.default.createElement(E.default,null,d.default.createElement("div",{className:O.default.cluster},d.default.createElement(k.default,{cluster:r,theme:"light",noStatus:!globals.app.isMultiCluster})),d.default.createElement("div",{className:O.default.disabledTip},t("CLUSTER_UPGRADE_REQUIRED",{version:this.requiredVersion})));var a=this.items;return d.default.createElement(E.default,null,d.default.createElement("div",{className:O.default.cluster},d.default.createElement(k.default,{cluster:r,theme:"light",noStatus:!globals.app.isMultiCluster})),n&&d.default.createElement("div",{className:O.default.actions},d.default.createElement(v.Button,{onClick:this.showEdit},t("EDIT_QUOTAS"))),d.default.createElement("div",{className:O.default.content},a.map((function(e){return d.default.createElement(_.default,e)}))))}},{key:"requiredVersion",get:function(){return"v3.1.0"}},{key:"needUpgrade",get:function(){return(0,y.compareVersion)(globals.app.isMultiCluster?this.props.cluster.configz.ksVersion:(0,h.default)(globals,"ksConfig.ksVersion"),this.requiredVersion)<0}},{key:"items",get:function(){var e=(0,p.toJS)(this.store.detail);return Object.entries(g.WORKSPACE_QUOTAS_MAP).map((function(t){var r=(0,c.default)(t,2),n=r[0],a=r[1];return{key:n,name:n,total:(0,h.default)(e,'spec.quota.hard["'.concat(a.name,'"]')),used:(0,h.default)(e,'status.total.used["'.concat(a.name,'"]'),0)}})).filter((function(e){var t=e.total,r=e.used,n=e.name;return!(!t&&!Number(r)&&-1===P.indexOf(n))}))}}]),n}(d.default.Component))||o)||o)||o;r.default=C},3084:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(0)),c=a(n(68)),u=n(25),l=a(n(1151)),s=n(37),i=n(58),f=a(n(3085)),d=function(e){var r=e.name,n=e.total,a=e.used,d=0;"limits.cpu"===r||"requests.cpu"===r?n&&(d=Number((0,s.cpuFormat)(a))/Number((0,s.cpuFormat)(n)),a="".concat((0,s.cpuFormat)(a)," Core"),n="".concat((0,s.cpuFormat)(n)," Core")):"limits.memory"===r||"requests.memory"===r?n&&(d=Number((0,s.memoryFormat)(a))/Number((0,s.memoryFormat)(n)),a="".concat((0,s.memoryFormat)(a,"Gi")," Gi"),n="".concat((0,s.memoryFormat)(n,"Gi")," Gi")):n&&(d=Number(a)/Number(n)),d=Math.min(Math.max(d,0),1);var p=r.indexOf("gpu")>-1?"gpu":r,m="gpu"===p?"".concat(p,".limit"):p;return o.default.createElement("div",{className:f.default.quota},o.default.createElement(u.Icon,{name:i.ICON_TYPES[p]||"resource",size:40}),o.default.createElement("div",{className:f.default.item},o.default.createElement("div",null,t(m.replace(/[. ]/g,"_").toUpperCase())),o.default.createElement("p",null,t("RESOURCE_TYPE_SCAP"))),o.default.createElement("div",{className:f.default.item},o.default.createElement("div",null,a),o.default.createElement("p",null,t("USED"))),o.default.createElement("div",{className:f.default.item},o.default.createElement("div",null,(0,c.default)(n)?t("NO_LIMIT"):n),o.default.createElement("p",null,t("RESOURCE_LIMIT"))),o.default.createElement("div",{className:f.default.item,style:{flex:3}},o.default.createElement("div",null,t("USAGE")),o.default.createElement(l.default,{value:Math.min(d,1),className:f.default.bar,rightText:n?"":t("NO_LIMIT"),text:t("USED_PERCENT",{percent:Number((100*d).toFixed(2))})})))};r.default=d},3085:function(e,t,r){e.exports={quota:"j_jIuTBmQIJCHq9iJUPCU",item:"_19YZe4YP-4n3v2b_sZUbmz",bar:"_2a14fJwRKjewBNftJGp2R-"}},3086:function(e,t,r){e.exports={cluster:"_33bgBT87JaEVqJ0uzIjyFv",content:"_26wvITmEcN_9yGRcxyHvtB",actions:"FTCmPDXSK-8qQ7nF3OPEd",disabledTip:"_174Yw8pkPiTR9UrQjf7p84"}},3087:function(e,t,r){e.exports={title:"_2EN2HBaXv57LG6KaZxnUk0"}},3088:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u=a(n(21)),l=a(n(71)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(0)),h=n(5),v=a(n(727)),y=a(n(724)),g=a(n(728)),E=o(n(726)),k=n(37),b=n(58),S=a(n(747));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var P=(0,E.default)({store:new S.default("workspaceroles"),module:"workspaceroles",authKey:"roles",name:"WORKSPACE_ROLE"})(c=function(e){(0,f.default)(n,e);var r=w(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).showAction=function(t){return!globals.config.presetWorkspaceRoles.includes(t.name.slice(e.workspace.length+1))},e.getColumns=function(){var r=e.props.getSortOrder,n=e.props.match.params.workspace;return[{title:t("NAME"),dataIndex:"name",width:"25%",render:function(t,r){return m.default.createElement(v.default,{icon:b.ICON_TYPES[e.module],to:"/workspaces/".concat(n,"/roles/").concat(t),title:(0,k.getDisplayName)(r)})}},{title:t("DESCRIPTION"),key:"description",dataIndex:"description",isHideable:!0,width:"55%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:"19%",render:function(e){return(0,k.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var r=e.props,n=r.match,a=r.store,o=r.trigger,c=r.getData;return o("role.create",{title:t("CREATE_WORKSPACE_ROLE"),roleTemplates:(0,h.toJS)(a.roleTemplates.data),workspace:n.params.workspace,success:c})},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.props.store.fetchRoleTemplates(this.props.match.params)}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps;return m.default.createElement(E.ListPage,(0,l.default)({},this.props,{noWatch:!0}),m.default.createElement(y.default,(0,l.default)({},r,{tabs:this.tabs,title:t("WORKSPACE_ROLE_PL")})),m.default.createElement(g.default,(0,l.default)({},n,{emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.store,o=r.name,c=r.module,u=r.routing;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e,success:u.query})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:this.showAction,onClick:function(e){return n("role.edit",{module:c,detail:e,roleTemplates:(0,h.toJS)(a.roleTemplates.data),success:u.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return n("role.delete",{detail:t,type:o,workspace:e.props.match.params.workspace,success:u.query})}}]}},{key:"tableActions",get:function(){return O(O({},this.props.tableProps.tableActions),{},{onCreate:this.showCreate,selectActions:[]})}},{key:"emptyProps",get:function(){return{desc:t("WORKSPACE_ROLE_EMPTY_DESC")}}}]),n}(m.default.Component))||c;r.default=P},3089:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u=a(n(71)),l=a(n(21)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(0)),h=n(5),v=a(n(278)),y=a(n(747)),g=a(n(727)),E=a(n(729)),k=a(n(724)),b=a(n(728)),S=o(n(726)),_=n(37);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var C=(0,S.default)({store:new v.default,module:"users",authKey:"members",name:"WORKSPACE_MEMBER"})(c=function(e){(0,f.default)(n,e);var r=P(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).roleStore=new y.default("workspaceroles"),e.getColumns=function(){var r=e.props.prefix;return[{title:t("USERNAME"),dataIndex:"username",width:"40%",render:function(e,t){return m.default.createElement(g.default,{to:"".concat(r,"/").concat(e),avatar:t.avatar_url||"/assets/default-user.svg",title:e,desc:t.email})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"19%",render:function(e){return m.default.createElement(E.default,{type:e,name:t("USER_".concat(e.toUpperCase()))})}},{title:t("ROLE"),dataIndex:"workspacerole",isHideable:!0,width:"19%"},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",isHideable:!0,width:"19%",render:function(e){return m.default.createElement("p",null,e?(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET"))}}]},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.canViewRoles&&this.roleStore.fetchList(w(w({},this.props.match.params),{},{limit:-1}))}},{key:"showAction",value:function(e){return globals.user.username!==e.name}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps;return m.default.createElement(S.ListPage,(0,u.default)({},this.props,{noWatch:!0}),m.default.createElement(k.default,(0,u.default)({},r,{tabs:this.tabs,title:t("WORKSPACE_MEMBERS"),description:t("WORKSPACE_MEMBER_DESC")})),m.default.createElement(b.default,(0,u.default)({},n,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"canViewRoles",get:function(){var e=this.props.match.params.workspace;return globals.app.hasPermission({workspace:e,module:"roles",action:"view"})}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.getData;return[{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",show:this.showAction,onClick:function(t){return n("member.edit",w(w({detail:t},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),role:t.workspacerole,success:a}))}},{key:"delete",icon:"trash",text:t("REMOVE"),action:"delete",show:this.showAction,onClick:function(t){return n("member.remove",w({detail:t,success:a},e.props.match.params))}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.tableProps,a=r.routing,o=r.getData,c=r.trigger;return w(w({},n.tableActions),{},{actions:[{key:"invite",type:"control",text:t("INVITE"),action:"create",onClick:function(){return c("member.invite",w(w({},e.props.match.params),{},{roleModule:e.roleStore.module,roles:(0,h.toJS)(e.roleStore.list.data),title:t("INVITE_MEMBER"),desc:t("INVITE_WORKSPACE_MEMBER_DESC"),searchPlaceholder:t("SEARCH_BY_NAME"),success:a.query}))}}],selectActions:[{key:"delete",type:"danger",text:t("REMOVE"),action:"delete",onClick:function(){return c("member.remove.batch",w(w({},e.props.match.params),{},{success:o}))}}],getCheckboxProps:function(t){return{disabled:!e.showAction(t),name:t.name}},emptyProps:{desc:t("WORKSPACE_MEMBER_EMPTY_DESC")}})}}]),n}(m.default.Component))||c;r.default=C},3090:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),u=a(n(109)),l=a(n(21)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(0)),h=n(70),v=n(5),y=a(n(3)),g=a(n(16)),E=a(n(650)),k=a(n(820)),b=n(25),S=a(n(724)),_=a(n(657)),O=a(n(278)),w=a(n(1341)),P=a(n(3091)),C=a(n(3103)),R=a(n(3105)),D=a(n(3107));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var N=(0,h.inject)("rootStore","workspaceStore")(o=(0,h.observer)(o=function(e){(0,f.default)(n,e);var r=A(n);function n(e){var a;return(0,s.default)(this,n),(a=r.call(this,e)).initWebsocket=function(){var e=a.store.getWatchListUrl(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a.props.match.params));if(e){a.websocket.watch(e);var t=(0,E.default)(a.fetchGroup,1e3);a.disposer=(0,v.reaction)((function(){return a.websocket.message}),(function(e){a.silentLoading=!0,"MODIFIED"!==e.type&&"ADDED"!==e.type||t(),"DELETED"===e.type&&t(!0)}))}},a.fetchGroup=function(e){var t=a.props.match.params.workspace;a.store.fetchGroup({workspace:t}).then((function(){if(!a.unmount&&e){var t=a.store.treeData;a.setState((function(e){return{refreshFlag:!e.refrseshFlag,group:(0,g.default)(t[0],"children[0].key",""),groupTitle:(0,g.default)(t[0],"children[0].group_name","")}}))}}))},a.handleRefresh=(0,k.default)((function(){a.fetchGroup(!0)}),1e3),a.handleSelectTree=function(e,t){var r=t.selectedNodes;a.setState({group:e[0],groupTitle:r[0].props.title,selectUserKeys:[]})},a.handleSelectUser=function(e){a.setState((function(t){return{selectUserKeys:[].concat((0,u.default)(t.selectUserKeys),[e.name])}}))},a.handleCancelSelect=function(){a.setState({selectUserKeys:[]})},a.handleAddGroup=function(){var e=a.props.match.params.workspace,r=a.state,n=r.selectUserKeys,o=r.group,c=n.map((function(e){return{userName:e,groupName:o}}));a.store.addGroupBinding(c,{workspace:e}).then((function(){b.Notify.success({content:"".concat(t("ADDED_SUCCESS_DESC"))}),a.setState((function(e){return{refreshFlag:!e.refreshFlag,selectUserKeys:[]}}))}))},a.showEditModal=function(){a.setState({showModal:!0})},a.hideModal=function(){a.setState({showModal:!1})},a.store=new w.default,a.userStore=new O.default,a.websocket=new _.default,a.silentLoading=!1,a.state={group:"",groupTitle:"",selectUserKeys:[],refreshFlag:!1,showModal:!1},a}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.fetchGroup(!0),this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.unmount=!0,this.websocket.close(),this.disposer&&this.disposer()}},{key:"renderBanner",value:function(){return m.default.createElement(S.default,{icon:"group",title:t("DEPARTMENT_PL"),description:t("DEPARTMENT_DESC")})}},{key:"renderTitle",value:function(){var e=this.state.selectUserKeys.length>0;return this.enabledActions.includes("manage")?m.default.createElement("div",{className:(0,y.default)(D.default.contentHeader,e&&D.default.hasSelected)},e?this.renderSelectedTitle():this.renderToolBar()):null}},{key:"renderToolBar",value:function(){return m.default.createElement(b.Level,null,m.default.createElement(b.LevelLeft,null),m.default.createElement(b.LevelRight,null,m.default.createElement(b.Button,{type:"flat",onClick:this.handleRefresh},m.default.createElement(b.Icon,{name:"refresh"})),m.default.createElement(b.Button,{type:"control",onClick:this.showEditModal},t("SET_DEPARTMENTS"))))}},{key:"renderSelectedTitle",value:function(){return m.default.createElement(b.Level,null,m.default.createElement(b.LevelLeft,null,1===this.state.selectUserKeys.length?t.html("ADD_MEMBER_TIP_SI",{group:this.state.groupTitle}):t.html("ADD_MEMBER_TIP_PL",{group:this.state.groupTitle})),m.default.createElement(b.LevelRight,null,m.default.createElement(b.Button,{type:"primary",onClick:this.handleAddGroup},t("OK")),m.default.createElement(b.Button,{onClick:this.handleCancelSelect},t("CANCEL"))))}},{key:"render",value:function(){var e=(0,v.toJS)(this.store),r=e.treeData,n=e.rowTreeData,a=e.total,o=e.isLoading,u=this.state,l=u.group,s=u.selectUserKeys,i=u.refreshFlag,f=u.showModal;return m.default.createElement(m.default.Fragment,null,this.renderBanner(),m.default.createElement("div",{className:D.default.wrapper},this.renderTitle(),m.default.createElement("div",{className:D.default.content},m.default.createElement("div",{className:D.default.container},m.default.createElement(C.default,{treeData:r,group:l,total:a,isLoading:!this.silentLoading&&o,onSelect:this.handleSelectTree}),m.default.createElement(R.default,(0,c.default)({groupStore:this.store,userStore:this.userStore,group:l,refreshFlag:i,selectedKeys:s,onSelect:this.handleSelectUser,enabledActions:this.enabledActions},this.props))))),f&&m.default.createElement(P.default,(0,c.default)({visible:f,title:t("SET_DEPARTMENTS"),treeData:r,rowTreeData:n,store:this.store,workspaceStore:this.props.workspaceStore,onCancel:this.hideModal},this.props.match.params)))}},{key:"enabledActions",get:function(){var e=this.props.match.params.workspace;return globals.app.getActions({module:"groups",workspace:e})}}]),n}(m.default.Component))||o)||o;r.default=N},3091:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c,u,l=a(n(71)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(0)),h=a(n(1)),v=n(70),y=a(n(16)),g=a(n(274)),E=a(n(3092)),k=a(n(3095)),b=a(n(3102));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var _=(0,v.observer)((u=c=function(e){(0,f.default)(n,e);var r=S(n);function n(e){var t;return(0,s.default)(this,n),(t=r.call(this,e)).toggleForm=function(){t.setState((function(e){return{showForm:!e.showForm}}))},t.handleSelect=function(e){t.setState({showForm:!1,groupId:e[0],treeNodeId:e[0]})},t.handleTreeNodeIdChange=function(e){t.setState({treeNodeId:e})},t.store=e.store,t.state={showForm:!1,groupId:"",treeNodeId:"root"},t}return(0,i.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.treeData;(0,y.default)(e[0],"children").length>0?this.setState({groupId:e[0].group_id}):this.setState({showForm:!0})}},{key:"render",value:function(){var e=this.props,r=e.visible,n=e.title,a=e.onCancel,o=e.treeData,c=this.state,u=c.showForm,s=c.groupId,i=c.treeNodeId;return m.default.createElement(g.default,{width:1162,title:n,closable:!1,cancelText:t("CLOSE"),visible:r,onCancel:a,bodyClassName:b.default.modalBody,footerClassName:b.default.modalFooter},m.default.createElement("div",{className:b.default.content},m.default.createElement(E.default,{treeData:o,groupId:this.groupId,onSelect:this.handleSelect}),m.default.createElement(k.default,(0,l.default)({},this.props,{showForm:u,toggleForm:this.toggleForm,onChange:this.handleTreeNodeIdChange,groupId:s,treeNodeId:i}))))}}]),n}(m.default.Component),c.propTypes={visible:h.default.bool,title:h.default.string,onCancel:h.default.func},c.defaultProps={visible:!1},o=u))||o;r.default=_},3092:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c,u,l=a(n(12)),s=a(n(13)),i=a(n(19)),f=a(n(20)),d=a(n(18)),p=a(n(0)),m=a(n(1)),h=n(70),v=a(n(1462)),y=a(n(3094));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var E=(0,h.observer)((u=c=function(e){(0,i.default)(n,e);var r=g(n);function n(){return(0,l.default)(this,n),r.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,r=e.treeData,n=e.groupId,a=e.onSelect;return p.default.createElement("div",{className:y.default.wrapper},p.default.createElement("div",{className:y.default.treeWrapper},r[0].children.length>0?p.default.createElement(v.default,{className:y.default.tree,showLine:!0,defaultExpandedKeys:[n||"root"],defaultSelectedKeys:[n||"root"],onSelect:a,treeData:r}):p.default.createElement("p",null,t("NO_DEPARTMENT_TIP"))))}}]),n}(p.default.Component),c.propTypes={treeData:m.default.array},o=u))||o;r.default=E},3093:function(e,t,r){"use strict";var n=r(72),a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(71)),c=a(r(21)),u=a(r(12)),l=a(r(13)),s=a(r(19)),i=a(r(20)),f=a(r(18)),d=a(r(56)),p=n(r(0)),m=a(r(1)),h=a(r(3)),v=a(r(1463)),y=a(r(1464)),g=r(1466),E=a(r(1465));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var b=function(e){(0,s.default)(r,e);var t=k(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={keyEntities:{},treeNode:[],selectedKeys:[]},e.setUncontrolledState=function(t,r){var n=!1,a={};Object.keys(t).forEach((function(r){r in e.props||(n=!0,a[r]=t[r])})),n&&e.setState(a,r)},e.onNodeClick=function(t,r){var n=e.props.onClick;n&&n(t,r)},e.onNodeSelect=function(t,r){var n=e.state.selectedKeys,a=e.state.keyEntities,o=e.props,c=o.toggleNodeSelect,u=o.onSelect,l=r.props,s=l.selected,i=l.eventKey,f=!s,d=(n=!f&&c?(0,g.arrDel)(n,i):[i]).map((function(e){var t=a[e];return t?t.node:null})).filter((function(e){return e}));(e.setUncontrolledState({selectedKeys:n}),u)&&u(n,{event:"select",selected:f,node:r,selectedNodes:d,nativeEvent:t.nativeEvent})},e.getTreeNodes=function(t){return e.state.keyEntities[t].node},e.onNodeExpand=function(t,r){var n=e.state.expandedKeys,a=e.props.onExpand,o=r.props,c=o.eventKey,u=!o.expanded;return n=u?(0,g.arrAdd)(n,c):(0,g.arrDel)(n,c),e.setUncontrolledState({expandedKeys:n}),a&&a(n,{node:r,expanded:u,nativeEvent:t.nativeEvent}),null},e.renderTreeNode=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=e.state,o=a.keyEntities,c=a.expandedKeys,u=void 0===c?[]:c,l=a.selectedKeys,s=void 0===l?[]:l,i=(0,g.getPosition)(n,r),f=t.key||i;return o[f]?p.default.cloneElement(t,{key:f,eventKey:f,pos:i,expanded:-1!==u.indexOf(f),selected:-1!==s.indexOf(f)}):null},e}return(0,l.default)(r,[{key:"getChildContext",value:function(){return{tree:{disabled:this.props.disabled,renderTreeNode:this.renderTreeNode,onNodeClick:this.onNodeClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect}}}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,n=t.showLine,a=this.state.treeNode,u=(0,g.getDataAndAria)(this.props);return p.default.createElement("ul",(0,o.default)({},u,{className:(0,h.default)(E.default.tree,r,(0,c.default)({},E.default.showLine,n)),role:"tree",unselectable:"on"}),(0,g.mapChildren)(a,(function(t,r){return e.renderTreeNode(t,r)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevProps,n=e.expandedKeys,a=e.defaultExpandedKeys,o={prevProps:e},c=function(t){return!r&&t in e||!(!r||r[t]===e[t])},u=null;if(c("treeData")?u=function e(t,r){if(!t)return[];var n=(r||{}).processProps,a=void 0===n?function(e){return e}:n;return(Array.isArray(t)?t:[t]).map((function(t){var n=t.children,o=(0,d.default)(t,["children"]),c=e(n,r);return p.default.createElement(v.default,a(o),c)}))}(e.treeData):c("children")&&(u=(0,g.toArray)(e.children)),u){o.treeNode=u;var l=(0,g.convertTreeToEntities)(u);o.posEntities=l.posEntities,o.keyEntities=l.keyEntities}var s=o.keyEntities||t.keyEntities;return c("expandedKeys")?o.expandedKeys=r?n:(0,g.conductExpandParent)(n,s):r||(o.expandedKeys=(0,g.conductExpandParent)(a,s)),c("selectedKeys")?o.selectedKeys=(0,g.calcSelectedKeys)(e.selectedKeys,e):!r&&e.defaultSelectedKeys&&(o.selectedKeys=(0,g.calcSelectedKeys)(e.defaultSelectedKeys,e)),o}}]),r}(p.Component);t.default=b,b.popTypes={className:m.default.className,treeData:m.default.array,showLine:m.default.bool,children:m.default.any,defaultExpandedKeys:m.default.arrayOf(m.default.string),defaultSelectedKeys:m.default.arrayOf(m.default.string),toggleNodeSelect:m.default.bool,onSelect:m.default.func,onClick:m.default.func,onExpand:m.default.func,disabled:m.default.bool},b.DefaultProps={showLine:!1,disabled:!1,toggleNodeSelect:!1,defaultExpandedKeys:[],defaultSelectedKeys:[]},b.contextTypes=y.default,b.childContextTypes=y.default},3094:function(e,t,r){e.exports={wrapper:"XWdVrGyDyVjTP6y5MMGS-",treeWrapper:"_2Vpq9xIPtc8ByYb17OEYOB"}},3095:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u,l,s=a(n(71)),i=a(n(21)),f=a(n(49)),d=a(n(109)),p=a(n(50)),m=a(n(12)),h=a(n(13)),v=a(n(19)),y=a(n(20)),g=a(n(18)),E=o(n(0)),k=a(n(1)),b=n(70),S=a(n(16)),_=a(n(73)),O=a(n(185)),w=a(n(281)),P=a(n(297)),C=a(n(32)),R=n(25),D=a(n(760)),T=n(37),A=n(1342),N=a(n(3096)),j=a(n(3099)),I=a(n(3101));function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,g.default)(e);if(t){var a=(0,g.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.default)(this,r)}}var U=(0,b.observer)((l=u=function(e){(0,v.default)(n,e);var r=M(n);function n(e){var a;return(0,m.default)(this,n),(a=r.call(this,e)).handleAdd=function(){a.setState({mode:"create",formTemplate:(0,O.default)(a.initialFormTemplate)}),a.props.toggleForm()},a.handleDelete=function(e){a.setState({showConfirm:!0,resource:e})},a.handleConfirm=function(){var e=a.props.workspace,r=a.state.resource.group_id;a.store.deleteGroup(r,{workspace:e}).then((function(){a.setState({showConfirm:!1,deleteKeys:[r]}),R.Notify.success({content:t("DELETE_SUCCESSFUL")})}))},a.hideConfirm=function(){a.setState({showConfirm:!1})},a.handleEdit=function(){var e=(0,p.default)(f.default.mark((function e(t){var r,n,o,c,u,l;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,O.default)(t._originData),n=(0,T.safeParseJSON)((0,S.default)(r,'metadata.annotations["kubesphere.io/project-roles"]',[])),o=(0,T.safeParseJSON)((0,S.default)(r,'metadata.annotations["kubesphere.io/devops-roles"]',[])),c=a.props.workspace,u=(0,w.default)([].concat((0,d.default)(n),(0,d.default)(o)).map((function(e){return e.cluster}))),e.next=7,a.store.fetchRoleBinding(t.group_id,{workspace:c,clusters:u});case 7:l=e.sent,(0,_.default)(r,'metadata.annotations["kubesphere.io/project-roles"]',a.getRoleJSON(n,l)),(0,_.default)(r,'metadata.annotations["kubesphere.io/devops-roles"]',a.getRoleJSON(o,l)),a.setState({mode:"edit",formTemplate:r}),a.props.onChange(t.group_id),a.props.toggleForm();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSave=function(){var e=(0,p.default)(f.default.mark((function e(r,n){var o;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.props.workspace,!n){e.next=7;break}return e.next=4,a.store.update(r,n,{workspace:o});case 4:R.Notify.success({content:t("UPDATE_SUCCESSFUL")}),e.next=10;break;case 7:return e.next=9,a.store.createGroup(r,{workspace:o});case 9:R.Notify.success({content:"".concat(t("ADDED_SUCCESS_DESC"))});case 10:a.props.toggleForm();case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),a.handleCancel=function(){var e=a.props,t=e.onChange,r=e.toggleForm,n=e.onCancel,o=a.getTreeNode(a.props);a.isEmptyTreeNode(o)?n():(t(a.props.groupId),r())},a.store=e.store,a.initialFormTemplate={apiVersion:"iam.kubesphere.io/v1alpha2",kind:"Group",metadata:{annotations:{"kubesphere.io/workspace-role":"".concat(e.workspace,"-regular")},labels:{"kubesphere.io/workspace":"wsp1"}}},a.state={treeNode:a.getTreeNode(e),mode:"create",formTemplate:(0,O.default)(a.initialFormTemplate),showConfirm:!1,resource:"",deleteKeys:[]},a}return(0,h.default)(n,[{key:"componentDidUpdate",value:function(e){this.props.treeNodeId===e.treeNodeId&&this.props.rowTreeData===e.rowTreeData||this.setState({treeNode:this.getTreeNode(this.props)})}},{key:"getTreeNode",value:function(e){var t=e.treeNodeId;return e.rowTreeData[t]||{}}},{key:"isEmptyTreeNode",value:function(e){return!e.group_id||"root"===e.group_id&&!e.children.length}},{key:"getRoleJSON",value:function(e,t){return e.map((function(e){var r=(0,P.default)(t).find((function(t){return(0,S.default)(t,"metadata.namespace")===e.namespace&&(0,S.default)(t,"roleRef.name")===e.role}));return L(L({},e),{},{name:(0,S.default)(r,"metadata.name"),disabled:!0})}))}},{key:"renderBreadcrumbs",value:function(){var e=this.props,r=e.showForm,n=e.treeNodeId,a=this.state.mode,o=(0,A.getBreadCrumbData)(n,this.props.rowTreeData).map((function(e){return e.group_name}));return r&&"create"===a&&(o=[].concat((0,d.default)(o),[t("CREATE_DEPARTMENT")])),E.default.createElement("ul",{className:I.default.breadcrumbs},o.map((function(e,t){return E.default.createElement("li",{key:"".concat(e,"-").concat(t)},E.default.createElement("span",null,e),t!==o.length-1&&E.default.createElement("span",{className:I.default.separator},">"))})))}},{key:"render",value:function(){var e=this.state,r=e.formTemplate,n=e.mode,a=e.showConfirm,o=e.resource,c=o.group_name,u=o.children,l=e.treeNode,i=e.deleteKeys,f=this.props,d=f.groupId,p=f.showForm,m=(0,C.default)(u)?t.html("DELETE_GROUP_TIP",{group_name:c}):t.html("DELETE_PARENT_GROUP_TIP",{group_name:c});return E.default.createElement("div",{className:I.default.detailWrapper},this.renderBreadcrumbs(),p?E.default.createElement(N.default,(0,s.default)({},this.props,{formTemplate:r,mode:n,groupId:d,onCancel:this.handleCancel,onSave:this.handleSave})):E.default.createElement(j.default,{treeNode:l,deleteKeys:i,onAdd:this.handleAdd,onEdit:this.handleEdit,onDelete:this.handleDelete}),E.default.createElement(D.default,{visible:a,onOk:this.handleConfirm,onCancel:this.hideConfirm,resource:c,desc:m}))}}]),n}(E.Component),u.propTypes={rowTreeData:k.default.object,groupId:k.default.string},c=l))||c;r.default=U},3096:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c,u,l,s=a(n(71)),i=a(n(12)),f=a(n(13)),d=a(n(19)),p=a(n(20)),m=a(n(18)),h=a(n(74)),v=a(n(0)),y=a(n(1)),g=n(5),E=n(70),k=a(n(185)),b=a(n(73)),S=a(n(16)),_=n(25),O=a(n(761)),w=n(37),P=n(58),C=a(n(747)),R=a(n(3097)),D=a(n(3098)),T=a(n(1155));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var N=(0,E.observer)((l=u=function(e){(0,d.default)(n,e);var r=A(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).nameValidator=function(e,r,n){var o=a.props,c=o.workspace,u=o.mode;if(!r||"edit"===u)return n();a.props.store.checkName({name:r,workspace:c}).then((function(r){if(r.exist)return n({message:t("NAME_EXIST_DESC"),field:e.field});n()}))},a.checkItemValid=function(e){return e.role},a.handleSave=function(){var e=a.props,t=e.onSave,r=e.groupId,n=e.mode,o=(0,k.default)(a.state.formTemplate),c=a.formRef.current;c&&c.validate((function(){r&&(0,b.default)(o,'metadata.labels["iam.kubesphere.io/group-parent"]',r),"edit"===n?t(o,a.props.formTemplate):t(o)}))},a.formRef=v.default.createRef(),a.workspaceStore=e.workspaceStore,a.workspaceRoleStore=new C.default("workspaceroles"),a.state={formTemplate:(0,k.default)(e.formTemplate)},a}return(0,f.default)(n,[{key:"componentDidUpdate",value:function(e){this.props.formTemplate!==e.formTemplate&&this.setState({formTemplate:(0,k.default)(this.props.formTemplate)})}},{key:"componentDidMount",value:function(){this.fetchWorkspaceRoles()}},{key:"fetchWorkspaceRoles",value:function(){this.workspaceRoleStore.fetchList({workspace:this.props.workspace,limit:-1,sortBy:"createTime"})}},{key:"render",value:function(){var e=this.props,r=e.onCancel,n=e.mode,a=this.state.formTemplate;return v.default.createElement("div",{className:T.default.formWrapper},v.default.createElement(_.Form,{data:a,className:T.default.form,ref:this.formRef},v.default.createElement(_.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:P.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},v.default.createElement(_.Input,{name:"metadata.generateName",autoFocus:!0,maxLength:63,autoComplete:"off",disabled:"edit"===n})),v.default.createElement(_.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},v.default.createElement(_.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63,autoComplete:"off"})),v.default.createElement(_.Form.Item,{label:t("WORKSPACE_ROLE"),desc:t("GROUP_WORKSPACE_ROLE_DESC")+(this.needUpgrade?t("MEMBER_CLUSTER_UPGRADE_TIP",{version:"v3.1.0"}):"")},v.default.createElement(_.Select,{name:"metadata.annotations['kubesphere.io/workspace-role']",options:this.workspaceRoles,onChange:this.handleRolesChange})),v.default.createElement(_.Form.Group,{label:t("PROJECT_ROLE")},v.default.createElement(_.Form.Item,null,v.default.createElement(O.default,{name:"metadata.annotations['kubesphere.io/project-roles']",itemType:"object",addText:t("ADD_PROJECT"),checkItemValid:this.checkItemValid},v.default.createElement(R.default,(0,s.default)({clusters:this.clusters,showClusterSelect:globals.app.isMultiCluster},this.props))))),globals.app.hasKSModule("devops")&&v.default.createElement(_.Form.Group,{label:t("DEVOPS_PROJECT_ROLE")},v.default.createElement(_.Form.Item,null,v.default.createElement(O.default,{name:"metadata.annotations['kubesphere.io/devops-roles']",itemType:"object",addText:t("ADD_DEVOPS_PROJECT"),checkItemValid:this.checkItemValid},v.default.createElement(D.default,(0,s.default)({clusters:this.clusters,showClusterSelect:globals.app.isMultiCluster},this.props)))))),v.default.createElement("div",{className:T.default.footer},v.default.createElement(_.Button,{onClick:r},t("CANCEL")),v.default.createElement(_.Button,{type:"primary",onClick:this.handleSave},t("OK"))))}},{key:"needUpgrade",get:function(){return this.workspaceStore.clusters.data.some((function(e){return(0,w.compareVersion)(globals.app.isMultiCluster?(0,S.default)(e,"configz.ksVersion",""):(0,S.default)(globals,"ksConfig.ksVersion"),"v3.1.0")<0}))}},{key:"workspaceRoles",get:function(){return this.workspaceRoleStore.list.data.map((function(e){return{label:e.name,value:e.name,item:e}}))}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){var t=(0,w.compareVersion)(globals.app.isMultiCluster?(0,S.default)(e,"configz.ksVersion",""):(0,S.default)(globals,"ksConfig.ksVersion"),"v3.1.0")<0;return{label:e.name,value:e.name,disabled:!e.isReady||t,needUpgrade:t,item:e}}))}}]),n}(v.default.Component),u.propTypes={workspace:y.default.string,groupId:y.default.string},c=l,(0,h.default)(c.prototype,"workspaceRoles",[g.computed],Object.getOwnPropertyDescriptor(c.prototype,"workspaceRoles"),c.prototype),(0,h.default)(c.prototype,"clusters",[g.computed],Object.getOwnPropertyDescriptor(c.prototype,"clusters"),c.prototype),o=c))||o;r.default=N},3097:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u,l,s,i=a(n(12)),f=a(n(13)),d=a(n(19)),p=a(n(20)),m=a(n(18)),h=a(n(74)),v=o(n(0)),y=a(n(1)),g=n(5),E=n(70),k=a(n(745)),b=a(n(32)),S=n(25),_=a(n(747)),O=a(n(753)),w=a(n(1155));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var C=(0,E.observer)((s=l=function(e){(0,d.default)(n,e);var r=P(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).handleChange=function(){var e=a.state,t=e.cluster,r=e.namespace,n=e.role;a.props.onChange({cluster:t,namespace:r,role:n})},a.handleClusterChange=function(e){a.setState({cluster:e,namespace:"",role:""},(function(){a.handleChange(),a.fetchProjects(),a.roleStore.list.update({data:[]})}))},a.handleProjectsChange=function(e){a.setState({namespace:e,role:""},(function(){a.handleChange(),a.fetchRoles()}))},a.handleRoleChange=function(e){a.setState({role:e},(function(){return a.handleChange()}))},a.clusterRenderer=function(e){return v.default.createElement("span",null,v.default.createElement("span",null,e.value),e.needUpgrade&&v.default.createElement(S.Tooltip,{content:t("CLUSTER_UPGRADE_REQUIRED",{version:"v3.1.0"}),placement:"bottom"},v.default.createElement(S.Icon,{name:"update",className:w.default.tip,color:{primary:"#ffc781",secondary:"#f5a623"}})))},a.workspaceStore=e.workspaceStore,a.projectStore=new O.default,a.roleStore=new _.default,a.state={cluster:(0,b.default)(e.value)?"":e.value.cluster,namespace:(0,b.default)(e.value)?"":e.value.namespace,role:(0,b.default)(e.value)?"":e.value.role},a}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.fetchProjects(),this.fetchRoles()}},{key:"componentDidUpdate",value:function(e){var t=this;(0,k.default)(e.value,this.props.value)||this.setState({cluster:this.props.value.cluster||"",namespace:this.props.value.namespace||"",role:this.props.value.role||""},(function(){t.fetchProjects(),t.fetchRoles()}))}},{key:"fetchProjects",value:function(){var e=this.state.cluster,t=this.props.showClusterSelect;!e&&t||this.projectStore.fetchList({workspace:this.props.workspace,cluster:e,labelSelector:"kubefed.io/managed!=true, kubesphere.io/kubefed-host-namespace!=true",limit:-1,sortBy:"createTime"})}},{key:"fetchRoles",value:function(){var e=this.state,t=e.cluster,r=e.namespace;r&&this.roleStore.fetchList({workspace:this.props.workspace,cluster:t,namespace:r,limit:-1,sortBy:"createTime"})}},{key:"render",value:function(){var e=this.props,r=e.clusters,n=e.value,a=e.showClusterSelect,o=this.state,c=o.cluster,u=o.namespace,l=o.role,s=!(0,b.default)(n)&&n.disabled;return v.default.createElement("div",{className:w.default.selectWrapper},a&&v.default.createElement(S.Select,{name:"cluster",value:c,disabled:s,options:r,placeholder:t("CLUSTER"),valueRenderer:function(e){return t("CLUSTER_VALUE",{value:e.value})},optionRenderer:this.clusterRenderer,prefixIcon:v.default.createElement(S.Icon,{name:"cluster",size:16}),onChange:this.handleClusterChange}),v.default.createElement(S.Select,{name:"namespace",value:u,disabled:s,options:this.projects,placeholder:t("PROJECT"),valueRenderer:function(e){return t("PROJECT_VALUE",{value:e.value})},prefixIcon:v.default.createElement(S.Icon,{name:"project",size:16}),onChange:this.handleProjectsChange}),v.default.createElement(S.Select,{name:"role",value:l,disabled:s,options:this.roles,valueRenderer:function(e){return t("PROJECT_ROLE_VALUE",{value:e.value})},prefixIcon:v.default.createElement(S.Icon,{name:"role",size:16}),placeholder:t("ROLE"),onChange:this.handleRoleChange}))}},{key:"projects",get:function(){var e=this,t=this.props.arrayValue,r=void 0===t?[]:t;return this.projectStore.list.data.filter((function(t){return r.every((function(r){return r.cluster!==e.state.cluster||r.namespace!==t.name}))})).map((function(e){return{label:e.name,value:e.name,item:e}}))}},{key:"roles",get:function(){return this.roleStore.list.data.map((function(e){return{label:e.name,value:e.name,item:e}}))}}]),n}(v.Component),l.propTypes={clusters:y.default.array},u=s,(0,h.default)(u.prototype,"projects",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"projects"),u.prototype),(0,h.default)(u.prototype,"roles",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"roles"),u.prototype),c=u))||c;r.default=C},3098:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u,l,s,i=a(n(12)),f=a(n(13)),d=a(n(19)),p=a(n(20)),m=a(n(18)),h=a(n(74)),v=o(n(0)),y=a(n(1)),g=n(5),E=n(70),k=a(n(745)),b=a(n(32)),S=n(25),_=a(n(747)),O=a(n(788)),w=a(n(1155));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var C=(0,E.observer)((s=l=function(e){(0,d.default)(n,e);var r=P(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).handleChange=function(){var e=a.state,t=e.cluster,r=e.namespace,n=e.role;a.props.onChange({cluster:t,namespace:r,role:n})},a.handleClusterChange=function(e){a.setState({cluster:e,namespace:"",role:""},(function(){a.handleChange(),a.fetchDevops(),a.devopsRoleStore.list.update({data:[]})}))},a.handleDevopsChange=function(e){a.setState({namespace:e,role:""},(function(){a.handleChange(),a.fetchDevopsRoles()}))},a.handleRoleChange=function(e){a.setState({role:e},(function(){return a.handleChange()}))},a.clusterRenderer=function(e){return v.default.createElement("span",null,v.default.createElement("span",null,e.value),e.needUpgrade&&v.default.createElement(S.Tooltip,{content:t("CLUSTER_UPGRADE_REQUIRED",{version:"v3.1.0"}),placement:"bottom"},v.default.createElement(S.Icon,{name:"update",className:w.default.tip,color:{primary:"#ffc781",secondary:"#f5a623"}})))},a.devopsStore=new O.default,a.devopsRoleStore=new _.default,a.state={cluster:(0,b.default)(e.value)?"":e.value.cluster,namespace:(0,b.default)(e.value)?"":e.value.namespace,role:(0,b.default)(e.value)?"":e.value.role},a}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.fetchDevops(),this.fetchDevopsRoles()}},{key:"componentDidUpdate",value:function(e){var t=this;(0,k.default)(e.value,this.props.value)||this.setState({cluster:this.props.value.cluster||"",namespace:this.props.value.namespace||"",role:this.props.value.role||""},(function(){t.fetchDevops(),t.fetchDevopsRoles()}))}},{key:"fetchDevops",value:function(){var e=this.state.cluster,t=this.props.showClusterSelect;!e&&t||this.devopsStore.fetchList({workspace:this.props.workspace,cluster:e,limit:-1,sortBy:"createTime"})}},{key:"fetchDevopsRoles",value:function(){var e=this.state,t=e.cluster,r=e.namespace;r&&this.devopsRoleStore.fetchList({devops:r,cluster:t,limit:-1,sortBy:"createTime"})}},{key:"render",value:function(){var e=this.props,r=e.clusters,n=e.value,a=e.showClusterSelect,o=this.state,c=o.cluster,u=o.namespace,l=o.role,s=!(0,b.default)(n)&&n.disabled;return v.default.createElement("div",{className:w.default.selectWrapper},a&&v.default.createElement(S.Select,{name:"cluster",value:c,disabled:s,options:r,placeholder:t("CLUSTER"),valueRenderer:function(e){return t("CLUSTER_VALUE",{value:e.value})},optionRenderer:this.clusterRenderer,prefixIcon:v.default.createElement(S.Icon,{name:"cluster",size:16}),onChange:this.handleClusterChange}),v.default.createElement(S.Select,{name:"namespace",value:u,disabled:s,options:this.devops,placeholder:" ",valueRenderer:function(e){return t("DEVOPS_VALUE",{value:e.value})},prefixIcon:v.default.createElement(S.Icon,{name:"strategy-group",size:16}),onChange:this.handleDevopsChange}),v.default.createElement(S.Select,{name:"role",value:l,disabled:s,options:this.roles,valueRenderer:function(e){return t("DEVOPS_PROJECT_ROLES_VALUE",{value:e.value})},prefixIcon:v.default.createElement(S.Icon,{name:"role",size:16}),placeholder:t("ROLE"),onChange:this.handleRoleChange}))}},{key:"devops",get:function(){var e=this,t=this.props.arrayValue,r=void 0===t?[]:t;return(0,g.toJS)(this.devopsStore.list).data.filter((function(t){return r.every((function(r){return r.cluster!==e.state.cluster||r.namespace!==t.devops}))})).map((function(e){return{label:e.devops,value:e.devops,item:e}}))}},{key:"roles",get:function(){return this.devopsRoleStore.list.data.map((function(e){return{label:e.name,value:e.name,item:e}}))}}]),n}(v.Component),l.propTypes={clusters:y.default.array},u=s,(0,h.default)(u.prototype,"devops",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"devops"),u.prototype),(0,h.default)(u.prototype,"roles",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"roles"),u.prototype),c=u))||c;r.default=C},3099:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(12)),c=a(n(13)),u=a(n(19)),l=a(n(20)),s=a(n(18)),i=a(n(0)),f=a(n(1)),d=a(n(16)),p=n(25),m=a(n(727)),h=n(37),v=a(n(3100));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var g=function(e){(0,u.default)(n,e);var r=y(n);function n(){return(0,o.default)(this,n),r.apply(this,arguments)}return(0,c.default)(n,[{key:"renderContent",value:function(){var e=this.props,r=e.treeNode.children,n=void 0===r?[]:r,a=e.deleteKeys,o=e.onEdit,c=e.onDelete;if(n.length>0)return n.map((function(e){var r=e.props||e;return i.default.createElement("div",{className:v.default.item,key:r.group_id},i.default.createElement(m.default,{className:v.default.avatar,icon:"group",iconSize:32,title:(0,h.getDisplayName)({name:r.group_name,aliasName:r.alias_name}),desc:(0,d.default)(r._originData,'metadata.annotations.["kubesphere.io/workspace-role"]')}),i.default.createElement("div",null,i.default.createElement("span",{className:"text-second padding-20"},a.includes(r.group_id)&&t("deleting")),i.default.createElement(p.Button,{icon:"pen",type:"flat",onClick:function(){return o(r)}}),i.default.createElement(p.Button,{icon:"trash",type:"flat",onClick:function(){return c(r)}})))}))}},{key:"render",value:function(){var e=this.props.onAdd;return i.default.createElement("div",{className:v.default.cardWrapper},this.renderContent(),i.default.createElement("div",{className:v.default.empty,onClick:e},i.default.createElement("span",{className:v.default.icon}),i.default.createElement("span",null,t("CREATE_DEPARTMENT"))))}}]),n}(i.default.Component);r.default=g,g.propTypes={treeNode:f.default.object,onAdd:f.default.func,onEdit:f.default.func,onDelete:f.default.func}},3100:function(e,t,r){e.exports={cardWrapper:"_3wF5NYA-Pi8X_0xsiht8V9",item:"_1qqN7IfnNUInTkOWcdk8ey",avatar:"_3xx69JpMHTSALna5hG8YmR",empty:"_3bZ6AeTCOSxEEm34n0HTdu",icon:"_2F7y69hUXoCD7F961yZ0S5"}},3101:function(e,t,r){e.exports={detailWrapper:"_1S1C__bXDtYMZ6xPU4u9FD",breadcrumbs:"sXboNxn0VlO0e8ZxzvJ9m",separator:"_2KeuD0ObNijSwq5odIg9DE"}},3102:function(e,t,r){e.exports={modalBody:"_3-5Nz5JgV2fPz1zNyGcO5c",content:"_3EgUH5MLx3S1cM-9DVdDVC",modalFooter:"_3_Z5HTlLEz3aoecExFXAxd"}},3103:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u,l,s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=o(n(0)),h=a(n(1)),v=n(70),y=a(n(73)),g=a(n(16)),E=a(n(185)),k=n(25),b=a(n(1462)),S=a(n(3104));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var O=(0,v.observer)((l=u=function(e){(0,f.default)(n,e);var r=_(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).renderTree=function(){var t=e.props,r=t.treeData,n=t.onSelect,a=t.group,o=(0,y.default)((0,E.default)(r)[0],"disabled",!0),c=(0,g.default)(r[0].children[0],"key","root");return m.default.createElement("div",{className:S.default.treeWrapper},m.default.createElement(b.default,{showLine:!0,defaultExpandedKeys:[c],defaultSelectedKeys:[c],treeData:o,selectedKeys:[a],onSelect:n}))},e.renderPlaceHolder=function(){return m.default.createElement("div",{className:S.default.empty},t("DEPARTMENT_EMPTY_DESC"))},e}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,t=e.isLoading,r=e.total;return m.default.createElement("div",{className:S.default.wrapper},t&&m.default.createElement("div",{className:S.default.loading},m.default.createElement(k.Loading,{spinning:t})),0===r&&!t&&this.renderPlaceHolder(),r>0&&this.renderTree())}}]),n}(m.Component),u.propTypes={treeData:h.default.array,total:h.default.number,isLoading:h.default.bool,onSelect:h.default.func},c=l))||c;r.default=O},3104:function(e,t,r){e.exports={wrapper:"_2iCTOipXFP82e41v-tZzEf",empty:"_3DQ5W3kiOrYnwnIm04s7WS",loading:"_3428Y_KBOws7FcaUlX1sks",treeWrapper:"m0r6YLradu_GH2NXkD7sy"}},3105:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u,l,s=a(n(21)),i=a(n(12)),f=a(n(13)),d=a(n(19)),p=a(n(20)),m=a(n(18)),h=o(n(0)),v=a(n(1)),y=n(70),g=a(n(3)),E=n(5),k=n(25),b=a(n(826)),S=n(635),_=a(n(3106)),O=a(n(1467));function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var R=(0,y.inject)("rootStore")(c=(0,y.observer)(c=(0,S.trigger)((l=u=function(e){(0,d.default)(n,e);var r=C(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).getConfigs=function(){return[{type:"notingroup",title:t("NOT_ASSIGNED_TCAP"),onFetch:"fetchNotingroupData"},{type:"ingroup",title:t("ASSIGNED"),onFetch:"fetchIngroupData"}]},a.getCount=function(e){return a.userStore[e].total||0},a.getColor=function(e){return e===a.state.type?"#55bc8a":"#c1c9d1"},a.fetchNotingroupData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.state,r=t.group,n=t.search;a.userStore.fetchGroupUser(P(P({},e),{},{notingroup:r,name:n,type:"notingroup",limit:10}))},a.fetchIngroupData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.state,r=t.group,n=t.search;a.userStore.fetchGroupUser(P(P({},e),{},{ingroup:r,name:n,type:"ingroup",limit:10}))},a.handleTypeChange=function(e){a.setState({type:e})},a.handleSearch=function(e){a.setState({search:e},(function(){a.fetchIngroupData(),a.fetchNotingroupData()}))},a.handleSelect=function(e){a.props.onSelect(e)},a.handleDelete=function(e){a.trigger("group.user.remove",P({store:a.props.groupStore,detail:(0,E.toJS)(P(P({},e),{},{group:a.state.group})),success:function(){a.fetchIngroupData({page:1}),a.fetchNotingroupData({page:1})}},a.props.match.params))},a.renderPlaceHolder=function(){return h.default.createElement("div",{className:O.default.item},t("DEPARTMENT_EMPTY_DESC"))},a.userStore=e.userStore,a.groupStore=e.groupStore,a.state={type:"ingroup",group:e.group,search:""},a.configs=a.getConfigs(),a}return(0,f.default)(n,[{key:"componentDidUpdate",value:function(e){var t=this;e.refreshFlag===this.props.refreshFlag&&e.group===this.props.group||this.setState({group:this.props.group},(function(){t.fetchIngroupData(),t.fetchNotingroupData()}))}},{key:"renderToolBar",value:function(){var e=this;return h.default.createElement("div",{className:"level"},h.default.createElement("div",{className:"level-left"},h.default.createElement(k.RadioGroup,{mode:"button",value:this.state.type,onChange:this.handleTypeChange},this.configs.map((function(t){var r=t.type,n=t.title;return h.default.createElement(k.RadioButton,{key:r,value:r},n,h.default.createElement(k.Tag,{color:e.getColor(r)},e.getCount(r)))}))),this.state.group&&h.default.createElement(k.InputSearch,{className:O.default.search,onSearch:this.handleSearch,placeholder:t("SEARCH_BY_NAME")})))}},{key:"renderUserItem",value:function(e){var t=this,r=e.type,n=e.onFetch,a=(0,E.toJS)(this.userStore[r]),o=a.data,c=void 0===o?[]:o,u=a.total,l=a.page,s=a.isLoading,i=this.props,f=i.selectedKeys,d=i.enabledActions,p=this.state.group;return p||"ingroup"!==r?h.default.createElement(b.default,{data:c,total:u,page:l,loading:s,onFetch:this[n]},c.map((function(e){return h.default.createElement(_.default,{key:"".concat(r,"-").concat(e.name),type:r,user:e,group:p,groupStore:t.groupStore,enabledActions:d,selected:f.includes(e.name),onSelect:function(){return t.handleSelect(e)},onDelete:function(){return t.handleDelete(e)}})}))):this.renderPlaceHolder()}},{key:"render",value:function(){var e=this,t=this.state.type;return h.default.createElement("div",{className:O.default.userWrapper},this.renderToolBar(),h.default.createElement("div",{className:O.default.scrollWrapper},this.configs.map((function(r){return h.default.createElement("div",{className:(0,g.default)(O.default.tabPanel,t===r.type&&O.default.active),key:r.type},e.renderUserItem(r))}))))}}]),n}(h.Component),u.propTypes={group:v.default.string,enabledActions:v.default.array,selectedKeys:v.default.array,refreshFlag:v.default.bool,onSelect:v.default.func},c=l))||c)||c)||c;r.default=R},3106:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(12)),c=a(n(13)),u=a(n(19)),l=a(n(20)),s=a(n(18)),i=a(n(0)),f=a(n(1)),d=n(5),p=a(n(16)),m=n(25),h=a(n(727)),v=a(n(275)),y=a(n(1467));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var E=function(e){(0,u.default)(n,e);var r=g(n);function n(){var e;(0,o.default)(this,n);for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return(e=r.call.apply(r,[this].concat(a))).getGroupName=function(t){var r=(0,d.toJS)(e.props.groupStore.list).data,n=void 0===r?[]:r;return t.map((function(e){return(0,p.default)(n.find((function(t){return t.group_id===e})),"group_name","")})).filter((function(e){return e})).join(", ")},e}return(0,c.default)(n,[{key:"renderButton",value:function(){var e=this.props,t=e.enabledActions,r=e.group,n=e.type,a=e.onDelete;return t.includes("manage")&&r?"notingroup"===n?this.renderSelectedButton():i.default.createElement(m.Button,{type:"flat",onClick:a},i.default.createElement(m.Icon,{name:"trash",size:16})):null}},{key:"renderSelectedButton",value:function(){var e=this.props,t=e.selected,r=e.onSelect;return t?i.default.createElement(m.Button,{type:"flat",icon:"check",disabled:!0}):i.default.createElement(m.Button,{type:"control",icon:"add",iconType:"light",onClick:r})}},{key:"render",value:function(){var e=this.props,r=e.user,n=e.type;return i.default.createElement("div",{className:y.default.item,"data-user":r.username},i.default.createElement(h.default,{className:y.default.avatar,avatar:r.avatar_url||"/assets/default-user.svg",iconSize:32,title:r.name,desc:r.email}),"ingroup"===n&&i.default.createElement(v.default,{className:y.default.text,title:this.getGroupName(r.groups),description:t("DEPARTMENT")}),this.renderButton())}}]),n}(i.default.Component);r.default=E,E.propTypes={user:f.default.object,enabledActions:f.default.array,selected:f.default.bool,onSelect:f.default.func,onDelete:f.default.func}},3107:function(e,t,r){e.exports={wrapper:"_1yXwqB3fw3UDOjtZGaGmR0",contentHeader:"_3-bnIfVfDnD-ZVmgIyAL_9",hasSelected:"qeVmvDg0ZbuDwMxIi8GEj",content:"_1ZvzvmRjazeU28M2k50fck",container:"_2H3fqMFGgZ8y3cCUPvF74K"}},3108:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u,l=a(n(71)),s=a(n(49)),i=a(n(21)),f=a(n(56)),d=a(n(50)),p=a(n(12)),m=a(n(13)),h=a(n(19)),v=a(n(20)),y=a(n(18)),g=a(n(74)),E=a(n(0)),k=n(5),b=a(n(16)),S=n(25),_=a(n(727)),O=a(n(729)),w=a(n(724)),P=a(n(968)),C=o(n(726)),R=n(37),D=n(725),T=a(n(753)),A=a(n(1025));function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,y.default)(e);if(t){var a=(0,y.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,v.default)(this,r)}}var x={cpu:"namespace_cpu_usage",memory:"namespace_memory_usage_wo_cache",pod:"namespace_pod_count"},L=(0,C.default)({store:new T.default,name:"PROJECT",module:"projects",injectStores:["rootStore","workspaceStore"]})((u=function(e){(0,h.default)(n,e);var r=I(n);function n(){var e;(0,p.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).workspaceStore=e.props.workspaceStore,e.monitoringStore=new A.default,e.handleTabChange=function(t){var r=e.props.match.params.workspace;e.props.routing.push("/workspaces/".concat(r,"/").concat(t))},e.handleClusterChange=function(t){e.workspaceStore.selectCluster(t)},e.getData=(0,d.default)(s.default.mark((function t(){var r,n,a,o,c,u,l=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.length>0&&void 0!==l[0]?l[0]:{},n=r.silent,a=(0,f.default)(r,["silent"]),o=e.props.store,n&&(o.list.silent=!0),!(c=e.workspaceStore.cluster)){t.next=11;break}return t.next=7,o.fetchList(j(j(j({cluster:c},e.props.match.params),a),{},{labelSelector:"kubefed.io/managed!=true, kubesphere.io/kubefed-host-namespace!=true"}));case 7:if(!((u=o.list.data.map((function(e){return e.name}))).length>0)){t.next=11;break}return t.next=11,e.monitoringStore.fetchMetrics(j(j({cluster:c,resources:u},e.props.match.params),{},{metrics:Object.values(x),last:!0}));case 11:o.list.silent=!1;case 12:case"end":return t.stop()}}),t)}))),e.getLastValue=function(t,r,n){var a=e.monitoringStore.data,o=((0,b.default)(a,"".concat(r,".data.result"))||[]).find((function(e){return(0,b.default)(e,"metric.namespace")===t.name}));return(0,D.getValueByUnit)((0,b.default)(o,"value[1]",0),n)},e.getCheckboxProps=function(e){return{disabled:"Terminating"===e.status,name:e.name}},e.getColumns=function(){var r=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,r){return E.default.createElement(_.default,{to:"Terminating"===r.status||r.isFedHostNamespace?null:"/".concat(e.workspace,"/clusters/").concat(r.cluster,"/projects/").concat(t),icon:"project",iconSize:40,desc:r.description||"-",title:e.renderTitle(r)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(e){return E.default.createElement(O.default,{type:e,name:t(e),flicker:!0})}},{title:t("CPU_USAGE"),key:"namespace_cpu_usage",isHideable:!0,render:function(t){return(0,D.getSuitableValue)(e.getLastValue(t,x.cpu),"cpu","-")}},{title:t("MEMORY_USAGE"),key:"namespace_memory_usage_wo_cache",isHideable:!0,render:function(t){return(0,D.getSuitableValue)(e.getLastValue(t,x.memory),"memory","-")}},{title:t("POD_COUNT"),key:"namespace_pod_count",isHideable:!0,render:function(t){return e.getLastValue(t,x.pod)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,sorter:!0,render:function(e){return(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){return e.props.trigger("project.create",j(j({},e.props.match.params),{},{defaultCluster:e.workspaceStore.cluster,success:function(t){t&&e.workspaceStore.selectCluster(t),e.getData({silent:!0})}}))},e}return(0,m.default)(n,[{key:"renderTitle",value:function(e){return e.isFedHostNamespace?E.default.createElement("span",null,E.default.createElement("span",{className:"margin-r8"},(0,R.getDisplayName)(e)),E.default.createElement(S.Tooltip,{content:t("FED_HOST_NAMESPACE_TIP")},E.default.createElement(S.Icon,{name:"information"}))):(0,R.getDisplayName)(e)}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.bannerProps,n=e.tableProps,a=j(j({},t),{},{params:j(j({},t.params),{},{cluster:this.workspaceStore.cluster})}),o=this.monitoringStore.isLoading;return E.default.createElement(C.ListPage,(0,l.default)({},this.props,{match:a,getData:this.getData,module:"namespaces"}),E.default.createElement(w.default,(0,l.default)({},r,{tabs:this.showFederated?this.tabs:{}})),E.default.createElement(P.default,(0,l.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"},this.clusterProps,{isLoading:n.isLoading||o,getCheckboxProps:this.getCheckboxProps})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"projects",label:t("PROJECT_PL")},{value:"federatedprojects",label:t("MULTI_CLUSTER_PROJECT_PL")}]}}},{key:"showFederated",get:function(){return globals.app.isMultiCluster}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,disabled:!e.isReady,cluster:e}}))}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"clusterProps",get:function(){return{clusters:this.clusters,cluster:this.workspaceStore.cluster,onClusterChange:this.handleClusterChange,showClusterSelect:globals.app.isMultiCluster}}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"quotaEdit",icon:"pen",text:t("EDIT_QUOTAS"),action:"edit",onClick:function(e){return r("project.quota.edit",{type:t("PROJECT"),detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),n}(E.default.Component),(0,g.default)(u.prototype,"clusters",[k.computed],Object.getOwnPropertyDescriptor(u.prototype,"clusters"),u.prototype),c=u))||c;r.default=L},3110:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u,l=a(n(71)),s=a(n(21)),i=a(n(12)),f=a(n(13)),d=a(n(19)),p=a(n(20)),m=a(n(18)),h=a(n(74)),v=a(n(0)),y=n(5),g=a(n(727)),E=a(n(729)),k=a(n(724)),b=a(n(968)),S=o(n(726)),_=a(n(901)),O=n(37),w=a(n(1469)),P=a(n(753));function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var T=(0,S.default)({store:new w.default({module:"namespaces"}),name:"MULTI_CLUSTER_PROJECT",module:"projects",injectStores:["rootStore","workspaceStore"]})((u=function(e){(0,d.default)(n,e);var r=D(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).projectStore=new P.default,e.handleTabChange=function(t){var r=e.props.match.params.workspace;e.props.routing.push("/workspaces/".concat(r,"/").concat(t))},e.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return v.default.createElement(g.default,{to:r.deletionTime?null:"/".concat(e.workspace,"/federatedprojects/").concat(t),icon:"project",iconSize:40,isMultiCluster:!0,desc:r.description||"-",title:(0,O.getDisplayName)(r)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(e){return v.default.createElement(E.default,{type:e,name:t(e),flicker:!0})}},{title:t("CLUSTER"),dataIndex:"clusters",isHideable:!0,render:function(t){return v.default.createElement(_.default,{clusters:t,clustersDetail:e.clusters})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,sorter:!0,width:"20%",render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){return e.props.trigger("federated.project.create",R(R({},e.props.match.params),{},{store:e.projectStore,clusters:e.clusters.slice(),success:function(){return e.props.getData()}}))},e}return(0,f.default)(n,[{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps;return v.default.createElement(S.ListPage,(0,l.default)({},this.props,{module:"namespaces",isFederated:!0}),v.default.createElement(k.default,(0,l.default)({},r,{tabs:this.tabs,icon:"project",title:t("PROJECT_PL"),description:t("PROJECT_DESC")})),v.default.createElement(b.default,(0,l.default)({},n,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name",clusters:this.clusters})))}},{key:"clusters",get:function(){return this.props.workspaceStore.clusters.data}},{key:"tabs",get:function(){return{value:"federatedprojects",onChange:this.handleTabChange,options:[{value:"projects",label:t("PROJECT_PL")},{value:"federatedprojects",label:t("MULTI_CLUSTER_PROJECT_PL")}]}}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.store;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"add",icon:"add",text:t("ADD_CLUSTER"),action:"edit",onClick:function(t){return n("federated.project.add.cluster",{detail:t,store:a,clusters:e.clusters,success:function(){return e.props.getData()}})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("federated.project.delete",{detail:e})}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.name,a=r.trigger,o=r.getData;return R(R({},r.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),onClick:function(){return a("federated.project.delete.batch",R({type:n,success:o,rowKey:"name"},e.props.match.params))}}],getCheckboxProps:function(e){return{disabled:e.deletionTime,name:e.name}}})}}]),n}(v.default.Component),(0,h.default)(u.prototype,"clusters",[y.computed],Object.getOwnPropertyDescriptor(u.prototype,"clusters"),u.prototype),c=u))||c;r.default=T},3111:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u,l=a(n(71)),s=a(n(49)),i=a(n(21)),f=a(n(56)),d=a(n(50)),p=a(n(12)),m=a(n(13)),h=a(n(19)),v=a(n(20)),y=a(n(18)),g=a(n(74)),E=a(n(0)),k=n(5),b=a(n(727)),S=a(n(729)),_=a(n(724)),O=a(n(968)),w=o(n(726)),P=n(37),C=a(n(788));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,y.default)(e);if(t){var a=(0,y.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,v.default)(this,r)}}var A=(0,w.default)({store:new C.default,name:"DEVOPS_PROJECT",module:"devops",rowKey:"namespace",injectStores:["rootStore","workspaceStore"]})((u=function(e){(0,h.default)(n,e);var r=T(n);function n(){var e;(0,p.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).workspaceStore=e.props.workspaceStore,e.handleClusterChange=function(t){e.workspaceStore.selectCluster(t),e.getData()},e.getData=(0,d.default)(s.default.mark((function t(){var r,n,a,o,c,u=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=u.length>0&&void 0!==u[0]?u[0]:{},n=r.silent,a=(0,f.default)(r,["silent"]),o=e.props.store,n&&(o.list.silent=!0),!(c=e.workspaceStore.cluster)){t.next=7;break}return t.next=7,o.fetchList(D(D({cluster:c},e.props.match.params),a));case 7:o.list.silent=!1;case 8:case"end":return t.stop()}}),t)}))),e.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",render:function(t,r){var n="Terminating"===r.status;return E.default.createElement(E.default.Fragment,null,E.default.createElement(b.default,{icon:"strategy-group",iconSize:40,to:r.namespace&&r.cluster&&!n?"/".concat(e.workspace,"/clusters/").concat(r.cluster,"/devops/").concat(r.namespace):null,desc:r.description||"-",title:(0,P.getDisplayName)(r)}))}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(e){return E.default.createElement(S.default,{type:e,name:t(e),flicker:!0})}},{title:t("CREATOR"),dataIndex:"creator",isHideable:!0,render:function(e){return e||"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,sorter:!0,render:function(e){return(0,P.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){return e.props.trigger("devops.create",D(D({},e.props.match.params),{},{cluster:e.workspaceStore.cluster,success:function(t){t&&e.workspaceStore.selectCluster(t),e.getData({silent:!0})}}))},e.getCheckboxProps=function(e){return{disabled:"Terminating"===e.status,name:e.name}},e}return(0,m.default)(n,[{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps,a=e.match,o=D(D({},a),{},{params:D(D({},a.params),{},{cluster:this.workspaceStore.cluster})});return E.default.createElement(w.ListPage,(0,l.default)({},this.props,{getData:this.getData,match:o}),E.default.createElement(_.default,(0,l.default)({},r,{description:t("DEVOPS_DESCRIPTION"),tips:this.tips})),E.default.createElement(O.default,(0,l.default)({},n,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name",isLoading:n.isLoading},this.clusterProps,{getCheckboxProps:this.getCheckboxProps})))}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(e){return r("devops.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){r("resource.delete",{title:t("DELETE_DEVOPS_PROJECT"),desc:t.html("DELETE_DEVOPS_PROJECT_TIP",{resource:e.name}),type:n,resource:e.name,detail:e})}}]}},{key:"tips",get:function(){return[{title:t("DEVOPS_TIP_GITOPS_Q"),description:t("DEVOPS_TIP_GITOPS_A")},{title:t("DEVOPS_TIP_TYPE_Q"),description:t("DEVOPS_TIP_TYPE_A")}]}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,disabled:!e.isReady,cluster:e}}))}},{key:"clusterProps",get:function(){return{clusters:this.clusters,cluster:this.workspaceStore.cluster,onClusterChange:this.handleClusterChange,showClusterSelect:globals.app.isMultiCluster}}},{key:"tableActions",get:function(){var e=this.props,r=e.tableProps,n=e.trigger;return D(D({},r.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){n("devops.batch.delete",{type:r.name,rowKey:r.rowKey})}}]})}}]),n}(E.default.Component),(0,g.default)(u.prototype,"clusters",[k.computed],Object.getOwnPropertyDescriptor(u.prototype,"clusters"),u.prototype),c=u))||c;r.default=A},3112:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u=a(n(71)),l=a(n(21)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(0)),h=n(25),v=a(n(729)),y=a(n(925)),g=a(n(724)),E=a(n(728)),k=o(n(726)),b=n(37),S=n(813),_=a(n(862));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var C=(0,k.default)({store:new _.default,module:"apps",authKey:"app-templates",name:"APP_TEMPLATE",rowKey:"app_id"})(c=function(e){(0,f.default)(n,e);var r=P(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).getData=function(t){e.props.store.fetchList(w({workspace:e.workspace,statistics:!0},t))},e.showCreate=function(){e.props.trigger("openpitrix.template.create",{success:e.showUpload})},e.showUpload=function(){e.props.trigger("openpitrix.template.upload",{workspace:e.workspace,success:e.props.routing.query})},e.getColumns=function(){return[{title:t("NAME"),dataIndex:"app_id",render:function(t,r){var n=e.getAvatar(r.icon);return m.default.createElement(y.default,{isApp:!0,to:"/workspaces/".concat(e.workspace,"/apps/").concat(t),avatarType:"appIcon",avatar:n,iconLetter:r.name,iconSize:40,title:(0,b.getDisplayName)(r),desc:r.description})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"20%",render:function(e){return m.default.createElement(v.default,{type:e,name:(0,S.transferAppStatus)(e)})}},{title:t("LATEST_VERSION"),dataIndex:"latest_app_version.name",isHideable:!0,width:"20%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"update_time",isHideable:!0,width:"120",render:function(e,t){return(0,b.getLocalTime)(e||t.status_time).fromNow()}}]},e.getAvatar=function(t){var r=e.props.store.baseUrl;return String(t).startsWith("att-")?"/".concat(r,"/attachments/").concat(t,"?filename=raw"):t},e}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return m.default.createElement(k.ListPage,(0,u.default)({},this.props,{getData:this.getData,noWatch:!0}),m.default.createElement(g.default,(0,u.default)({},t,{tips:this.tips})),m.default.createElement(E.default,(0,u.default)({},r,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"keyword"})))}},{key:"tips",get:function(){var e=this.props.enabledActions;return[{title:t("DEVELOP_APP_TITLE"),description:t("DEVELOP_APP_DESC"),operation:e.includes("create")?m.default.createElement(h.Button,{type:"flat",onClick:this.showUpload},t("UPLOAD_TEMPLATE")):null,closable:!1},{title:t("HOW_PUBLISH_APP_TITLE"),description:t("HOW_PUBLISH_APP_DESC")}]}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"itemActions",get:function(){return[]}},{key:"tableActions",get:function(){return w(w({},this.props.tableProps.tableActions),{},{onCreate:this.showCreate,selectActions:[]})}}]),n}(m.default.Component))||c;r.default=C},3114:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,u=a(n(71)),l=a(n(21)),s=a(n(49)),i=a(n(50)),f=a(n(12)),d=a(n(13)),p=a(n(19)),m=a(n(20)),h=a(n(18)),v=a(n(0)),y=n(279),g=a(n(650)),E=n(25),k=a(n(727)),b=a(n(729)),S=a(n(724)),_=a(n(728)),O=o(n(726)),w=a(n(1113));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var D=(0,O.default)({store:new w.default,module:"repos",authKey:"app-repos",name:"APP_REPOSITORY",rowKey:"repo_id"})(c=function(e){(0,p.default)(n,e);var r=R(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).handleIndex=(0,i.default)(s.default.mark((function r(){return s.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all(e.props.store.list.selectedRowKeys.map(function(){var r=(0,i.default)(s.default.mark((function r(n){var a;return s.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.props.store.index({repo_id:n,workspace:e.workspace});case 2:a=r.sent,"success"===a.message&&E.Notify.success(t("UPDATE_SUCCESSFUL"));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()));case 2:e.props.store.setSelectRowKeys([]);case 3:case"end":return r.stop()}}),r)}))),e.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",width:"25%",render:function(t,r){return v.default.createElement(k.default,{icon:"catalog",iconSize:40,title:t,desc:r.description||"-",to:"".concat(e.props.match.url,"/").concat(r.repo_id)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"15%",render:function(e){return v.default.createElement(b.default,{type:e,name:t("APP_REPO_STATUS_".concat(e.toUpperCase())),flicker:!0})}},{title:t("URL"),dataIndex:"url"}]},e.handleFetch=(0,g.default)((function(t){var r=e.props,n=r.store,a=r.getData;if(!n.list.isLoading)return a(C(C(C({},(0,y.parse)(location.search.slice(1))),t),{},{silent:!0}))}),1e3),e.handleWatch=function(t){"HelmRepo"===t.object.kind&&["MODIFIED","DELETED","ADDED"].includes(t.type)&&e.handleFetch()},e}return(0,d.default)(n,[{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps;return v.default.createElement(O.ListPage,(0,u.default)({},this.props,{onMessage:this.handleWatch}),v.default.createElement(S.default,(0,u.default)({},r,{tips:this.tips,title:t("APP_REPO"),description:t("APP_REPO_DESC")})),v.default.createElement(_.default,(0,u.default)({},n,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"keyword"})))}},{key:"tips",get:function(){return[{title:t("HOW_TO_USE_APP_REPO_Q"),description:t.html("HOW_TO_USE_APP_REPO_A")}]}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.name,o=r.routing;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){return n("openpitrix.repo.edit",{detail:t,workspace:e.workspace,success:o.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("resource.delete",{detail:e,type:a,success:o.query})}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.routing;return C(C({},r.tableProps.tableActions),{},{searchType:"keyword",actions:[{key:"create",type:"control",text:t("ADD"),action:"manage",onClick:function(){return n("openpitrix.repo.add",{workspace:e.workspace,success:a.query})}}],selectActions:[{key:"index",type:"primary",text:t("SYNC"),action:"manage",onClick:this.handleIndex}]})}}]),n}(v.default.Component))||c;r.default=D},3115:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(3116)),o=n(r(3122)),c=n(r(3124)),u=n(r(3147)),l="/workspaces/:workspace",s=[{path:"".concat(l,"/members/:name"),component:a.default},{path:"".concat(l,"/roles/:name"),component:o.default},{path:"".concat(l,"/apps/:appId"),component:c.default},{path:"".concat(l,"/repos/:repo_id"),component:u.default}];t.default=s},3116:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),u=a(n(21)),l=a(n(12)),s=a(n(13)),i=a(n(19)),f=a(n(20)),d=a(n(18)),p=a(n(0)),m=n(5),h=n(70),v=a(n(32)),y=n(25),g=n(635),E=a(n(278)),k=a(n(770)),b=a(n(815)),S=a(n(3117));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var P=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,g.trigger)(o=function(e){(0,i.default)(n,e);var r=w(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new E.default,e.workspaceStore=new k.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"delete",icon:"trash",text:t("REMOVE"),action:"delete",type:"danger",show:e.store.detail.name!==globals.user.username,onClick:function(){return e.trigger("member.remove",O({detail:(0,m.toJS)(e.store.detail),success:function(){return e.routing.push(e.listUrl)}},e.props.match.params))}}]},e.getAttrs=function(){var r=(0,m.toJS)(e.store.detail);if(!(0,v.default)(r))return[{name:t("WORKSPACE"),value:e.workspace},{name:t("WORKSPACE_ROLE"),value:r.workspacerole},{name:t("EMAIL"),value:r.email}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store,workspaceStore:this.workspaceStore};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:this.store.detail.name,desc:this.store.detail.email,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("WORKSPACE_MEMBER_PL"),url:this.listUrl}]};return p.default.createElement(b.default,(0,c.default)({stores:e,routes:S.default},r))}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"members"}},{key:"name",get:function(){return"WORKSPACE_MEMBER"}},{key:"listUrl",get:function(){return"/workspaces/".concat(this.workspace,"/members")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),n}(p.default.Component))||o)||o)||o;r.default=P},3117:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(3118)),c=n(r(3120)),u="/workspaces/:workspace/members/:name",l=[{path:"".concat(u,"/projects"),title:"Projects",component:o.default,exact:!0},{path:"".concat(u,"/devops"),title:"DevOps Projects",component:c.default,ksModule:"devops",exact:!0},(0,a.getIndexRoute)({path:u,to:"".concat(u,"/projects"),exact:!0})];t.default=l},3118:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c,u=a(n(71)),l=a(n(21)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(74)),h=a(n(0)),v=n(5),y=n(70),g=n(37),E=a(n(968)),k=a(n(741)),b=a(n(753)),S=a(n(3119));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var P=(0,y.inject)("detailStore","workspaceStore")(o=(0,y.observer)((c=function(e){(0,f.default)(n,e);var r=w(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).projectStore=new b.default,e.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",width:"33%",render:function(e,t){return(0,g.getDisplayName)(t)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:"33%",render:function(e){return h.default.createElement("p",null,(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"))}}]},e.getData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.projectStore.fetchListByUser(O({workspace:e.workspace,cluster:e.workspaceStore.cluster,username:e.props.detailStore.detail.name},t))},e.handleClusterChange=function(t){e.workspaceStore.selectCluster(t),e.getData()},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.workspaceStore.fetchClusters({workspace:this.workspace,limit:-1}).then((function(){e.getData()}))}},{key:"render",value:function(){var e=(0,v.toJS)(this.projectStore.list),r=e.data,n=e.page,a=e.limit,o=e.total,c=e.isLoading,l={page:n,limit:a,total:o};return h.default.createElement(k.default,{title:t("PROJECTS")},h.default.createElement(E.default,(0,u.default)({className:S.default.table,data:r,columns:this.getColumns(),isLoading:c||this.workspaceStore.clusters.isLoading,onFetch:this.getData,pagination:l},this.clusterProps,{name:"PROJECT",hideSearch:!0,hideCustom:!0})))}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,disabled:!e.isReady,cluster:e}}))}},{key:"workspaceStore",get:function(){return this.props.workspaceStore}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"clusterProps",get:function(){return{clusters:this.clusters,cluster:this.workspaceStore.cluster,onClusterChange:this.handleClusterChange,showClusterSelect:globals.app.isMultiCluster}}}]),n}(h.default.Component),(0,m.default)(c.prototype,"clusters",[v.computed],Object.getOwnPropertyDescriptor(c.prototype,"clusters"),c.prototype),o=c))||o)||o;r.default=P},3119:function(e,t,r){e.exports={table:"WRBc98bwWPsApBMpVDYJk"}},3120:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c,u=a(n(71)),l=a(n(21)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(74)),h=a(n(0)),v=n(5),y=n(70),g=n(37),E=a(n(968)),k=a(n(741)),b=a(n(788)),S=a(n(3121));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var P=(0,y.inject)("detailStore","workspaceStore")(o=(0,y.observer)((c=function(e){(0,f.default)(n,e);var r=w(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).devopsStore=new b.default,e.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",width:"33%",render:function(e,t){return(0,g.getDisplayName)(t)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:"33%",render:function(e){return h.default.createElement("p",null,(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"))}}]},e.getData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.devopsStore.fetchListByUser(O({workspace:e.workspace,cluster:e.workspaceStore.cluster,username:e.props.detailStore.detail.name},t))},e.handleClusterChange=function(t){e.workspaceStore.selectCluster(t),e.getData()},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.workspaceStore.fetchClusters({workspace:this.workspace,limit:-1}).then((function(){e.getData()}))}},{key:"render",value:function(){var e=(0,v.toJS)(this.devopsStore.list),r=e.data,n=e.isLoading,a={page:e.page,limit:e.limit,total:e.total};return h.default.createElement(k.default,{title:t("DEVOPS_PROJECTS")},h.default.createElement(E.default,(0,u.default)({className:S.default.table,data:r,columns:this.getColumns(),isLoading:n,onFetch:this.getData},this.clusterProps,{pagination:a,name:"DEVOPS_PROJECT",hideSearch:!0,hideCustom:!0})))}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,disabled:!e.isReady,cluster:e}}))}},{key:"workspaceStore",get:function(){return this.props.workspaceStore}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"clusterProps",get:function(){return{clusters:this.clusters,cluster:this.workspaceStore.cluster,onClusterChange:this.handleClusterChange,showClusterSelect:globals.app.isMultiCluster}}}]),n}(h.default.Component),(0,m.default)(c.prototype,"clusters",[v.computed],Object.getOwnPropertyDescriptor(c.prototype,"clusters"),c.prototype),o=c))||o)||o;r.default=P},3121:function(e,t,r){e.exports={table:"_1igO6MeCqz0zQKLfLayoUI"}},3122:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),u=a(n(12)),l=a(n(13)),s=a(n(19)),i=a(n(20)),f=a(n(18)),d=a(n(0)),p=n(5),m=n(70),h=a(n(32)),v=n(25),y=n(37),g=n(635),E=a(n(747)),k=a(n(815)),b=a(n(3123));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var _=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,g.trigger)(o=function(e){(0,s.default)(n,e);var r=S(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new E.default("workspaceroles"),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("role.edit",{module:e.module,detail:(0,p.toJS)(e.store.detail),roleTemplates:(0,p.toJS)(e.store.roleTemplates.data),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("role.delete",{type:e.name,detail:(0,p.toJS)(e.store.detail),workspace:e.props.match.params.workspace,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,h.default)(r))return[{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(),this.store.fetchRoleTemplates(this.props.match.params)}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:this.store.detail.name,desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("WORKSPACE_ROLE_PL"),url:this.listUrl}]};return d.default.createElement(k.default,(0,c.default)({stores:e,routes:b.default},r))}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"roles"}},{key:"name",get:function(){return"WORKSPACE_ROLE"}},{key:"listUrl",get:function(){var e=this.props.match.params.workspace;return"/workspaces/".concat(e,"/roles")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"showEdit",get:function(){var e=this.props.match.params,t=e.workspace,r=e.name;return!globals.config.presetWorkspaceRoles.includes(r.slice(t.length+1))}}]),n}(d.default.Component))||o)||o)||o;r.default=_},3123:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(965)),c=n(r(966)),u="/workspaces/:workspace/roles/:name",l=[{path:"".concat(u,"/authorizations"),title:"PERMISSION_PL",component:o.default,exact:!0},{path:"".concat(u,"/users"),title:"AUTHORIZED_USER_PL",component:c.default,exact:!0},(0,a.getIndexRoute)({path:u,to:"".concat(u,"/authorizations"),exact:!0})];t.default=l},3124:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),u=a(n(21)),l=a(n(12)),s=a(n(13)),i=a(n(19)),f=a(n(20)),d=a(n(18)),p=a(n(0)),m=n(5),h=n(70),v=a(n(16)),y=n(25),g=n(635),E=a(n(815)),k=a(n(293)),b=a(n(862)),S=a(n(814)),_=n(813),O=n(37),w=a(n(3125)),P=a(n(3146));function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var T=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,g.trigger)(o=function(e){(0,i.default)(n,e);var r=D(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new b.default,e.versionStore=new S.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){var r=(0,m.toJS)(e.store.detail);return[{key:"editApp",type:"control",text:t("EDIT"),action:"manage",onClick:function(){return e.trigger("openpitrix.template.edit",{detail:r,title:t("EDIT_INFORMATION"),description:t("EDIT_APP_DESC"),icon:"pen",success:function(){return e.fetchData()}})}},{key:"appDeploy",icon:"snapshot",text:t("INSTALL"),action:"manage",onClick:function(){return e.trigger("openpitrix.template.deploy",R(R({},e.props.match.params),{},{app:r}))}},{key:"addVersion",icon:"tag",text:t("UPLOAD_NEW_VERSION"),action:"manage",onClick:function(){return e.trigger("openpitrix.template.addVersion",{title:t("UPLOAD_NEW_VERSION"),description:t("UPLOAD_NEW_VERSION_DESC"),icon:"templet",appId:r.app_id,type:"ADD_VERSION",workspace:r.workspace,versionStore:e.versionStore,success:function(){return e.fetchData()}})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"manage",onClick:function(){return e.trigger("openpitrix.template.delete",{detail:r,versions:e.versionStore.list.data,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,m.toJS)(e.store.detail),n=(0,v.default)(r,"create_time",new Date);return[{name:t("STATUS"),value:(0,_.transferAppStatus)(r.status)},{name:t("TYPE"),value:(0,_.getVersionTypesName)((0,v.default)(r,"app_version_types",""))},{name:t("CATEGORY"),value:t("APP_CATE_".concat((0,_.getAppCategoryNames)((0,v.default)(r,"category_set",[])).toUpperCase().replace(/[^A-Z]+/g,"_")),{defaultValue:(0,_.getAppCategoryNames)((0,v.default)(r,"category_set",[]))})},{name:t("WORKSPACE"),value:(0,v.default)(r,"isv","-")},{name:t("CREATION_TIME_TCAP"),value:(0,O.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")}]},e.renderIcon=function(){var t=e.store.detail;return p.default.createElement("div",{className:P.default.appName},p.default.createElement(k.default,{iconSize:32,iconLetter:t.name,src:t.icon,alt:""}))},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store,versionStore:this.versionStore};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(y.Loading,{className:"ks-page-loading"});var r={icon:this.renderIcon(),module:this.module,authKey:this.authKey,name:this.store.detail.name,desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("APP_TEMPLATE_PL"),url:this.listUrl}]};return p.default.createElement(E.default,(0,c.default)({stores:e,routes:w.default},r))}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"app-templates"}},{key:"name",get:function(){return"APP"}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"listUrl",get:function(){return"/workspaces/".concat(this.workspace,"/apps")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),n}(p.default.Component))||o)||o)||o;r.default=T},3125:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(1470)),c=n(r(1472)),u=n(r(3131)),l=n(r(3145)),s="/workspaces/:workspace/apps/:appId",i=[{path:"".concat(s,"/versions"),title:"VERSIONS",component:u.default,exact:!0},{path:"".concat(s,"/app-information"),title:"APP_INFORMATION",component:o.default,exact:!0},{path:"".concat(s,"/audit-records"),title:"APP_REVIEW",component:c.default,exact:!0},{path:"".concat(s,"/app-instances"),title:"APP_INSTANCES",component:l.default,exact:!0},(0,a.getIndexRoute)({path:s,to:"".concat(s,"/versions"),exact:!0})];t.default=i},3131:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=n(r(12)),c=n(r(13)),u=n(r(19)),l=n(r(20)),s=n(r(18)),i=n(r(0)),f=r(70),d=n(r(1474));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var m=(0,f.inject)("detailStore","versionStore","workspaceStore")(a=function(e){(0,u.default)(r,e);var t=p(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,t=e.detailStore,r=e.versionStore,n=e.workspaceStore,a=e.match;return i.default.createElement(d.default,{appStore:t,versionStore:r,clusters:n.clusters.data,match:a})}}]),r}(i.default.Component))||a;t.default=m},3145:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=n(r(12)),c=n(r(13)),u=n(r(19)),l=n(r(20)),s=n(r(18)),i=n(r(0)),f=r(70),d=n(r(1157));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var m=(0,f.inject)("workspaceStore")(a=function(e){(0,u.default)(r,e);var t=p(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.workspaceStore,t=this.props.match.params,r=t.appId,n=t.workspace;return i.default.createElement(d.default,{appId:r,workspace:n,clusters:e.clusters.data})}}]),r}(i.default.Component))||a;t.default=m},3146:function(e,t,r){e.exports={appName:"GsJ7ssUa6T4vB2JYEwVn4"}},3147:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),u=a(n(12)),l=a(n(13)),s=a(n(19)),i=a(n(20)),f=a(n(18)),d=a(n(0)),p=n(5),m=n(70),h=a(n(32)),v=n(25),y=n(37),g=n(635),E=a(n(1113)),k=a(n(815)),b=a(n(3148));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var _=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,g.trigger)(o=function(e){(0,s.default)(n,e);var r=S(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new E.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",type:"control",text:t("EDIT"),action:"edit",onClick:function(){return e.trigger("openpitrix.repo.edit",{detail:(0,p.toJS)(e.store.detail),workspace:e.workspace,success:e.fetchData})}},{key:"delete",icon:"trash",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,h.default)(r))return[{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:this.store.detail.name,desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("APP_REPOSITORY_PL"),url:this.listUrl}]};return d.default.createElement(k.default,(0,c.default)({stores:e,routes:b.default},r))}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"app-repos"}},{key:"name",get:function(){return"APP_REPOSITORY"}},{key:"listUrl",get:function(){var e=this.props.match.params.workspace;return"/workspaces/".concat(e,"/repos")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"showEdit",get:function(){var e=this.props.match.params,t=e.workspace,r=e.name;return!globals.config.presetWorkspaceRoles.includes(r.slice(t.length+1))}},{key:"workspace",get:function(){return this.props.match.params.workspace}}]),n}(d.default.Component))||o)||o)||o;r.default=_},3148:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(3149)),c="/workspaces/:workspace/repos/:repo_id",u=[{path:"".concat(c,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,a.getIndexRoute)({path:c,to:"".concat(c,"/events"),exact:!0})];t.default=u},3149:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(21)),u=a(n(12)),l=a(n(13)),s=a(n(19)),i=a(n(20)),f=a(n(18)),d=a(n(0)),p=n(5),m=n(70),h=n(25),v=a(n(723)),y=a(n(729)),g=n(37),E=a(n(3150));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var S=(0,m.inject)("detailStore")(o=(0,m.observer)(o=function(e){(0,s.default)(n,e);var r=b(n);function n(e){var a;return(0,u.default)(this,n),(a=r.call(this,e)).getColumns=function(){return[{title:t("CREATION_TIME_TCAP"),dataIndex:"create_time",width:"24%",render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}},{title:t("STATUS"),dataIndex:"status",width:"16%",render:function(e){return d.default.createElement(y.default,{type:e,name:t(e)})}},{title:t("MESSAGE"),dataIndex:"result",render:function(e){return e||"-"}}]},a.store=e.detailStore,a}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){this.store.fetchEvents(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props.match.params))}},{key:"render",value:function(){var e=this.store.events,r=e.data,n=e.isLoading;return d.default.createElement(v.default,{title:t("Events")},d.default.createElement(h.Table,{className:E.default.table,dataSource:(0,p.toJS)(r),columns:this.getColumns(),loading:n,rowKey:"create_time"}))}}]),n}(d.default.Component))||o)||o;r.default=S},3150:function(e,t,r){e.exports={table:"_3Csg6xeDZoaKp2IqfgJf9v"}},3151:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(3152)),c=n(r(3154)),u=n(r(3162)),l=n(r(3164)),s="/workspaces/:workspace/overview",i=[{name:"usage",title:"RESOURCE_USAGE",component:c.default},{name:"ranking",title:"USAGE_RANKING",component:u.default},{name:"clusters",title:"CLUSTER_INFORMATION",component:l.default,multiCluster:!0}],f=[{path:s,component:o.default,routes:(0,a.getChildRoutes)(i.filter((function(e){return!e.multiCluster||globals.app.isMultiCluster})),s)}];t.default=f},3152:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(12)),u=a(n(13)),l=a(n(19)),s=a(n(20)),i=a(n(18)),f=a(n(0)),d=n(70),p=n(634),m=a(n(724)),h=a(n(3153));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var y=(0,d.inject)("rootStore")(o=(0,d.observer)(o=function(e){(0,l.default)(n,e);var r=v(n);function n(){return(0,c.default)(this,n),r.apply(this,arguments)}return(0,u.default)(n,[{key:"renderBanner",value:function(){var e=this.props.route;return f.default.createElement("div",{className:h.default.banner},f.default.createElement(m.default,{className:h.default.header,icon:"dashboard",title:t("OVERVIEW"),description:t("WORKSPACE_OVERVIEW_DESC"),module:this.module,routes:e.routes,tips:globals.app.isMultiCluster?this.tips:[]}))}},{key:"render",value:function(){var e=this.props.route;return f.default.createElement("div",{className:h.default.wrapper},this.renderBanner(),f.default.createElement("div",{className:h.default.main},(0,p.renderRoutes)(e.routes)))}},{key:"tips",get:function(){return[{title:t("HOW_TO_APPLY_MORE_CLUSTER_Q"),description:t("HOW_TO_APPLY_MORE_CLUSTER_A")}]}}]),n}(f.default.Component))||o)||o;r.default=y},3153:function(e,t,r){e.exports={banner:"_3M6mEQMl67G4LdDB4x_1QL",main:"_34tJ8qtGKb0zosyG14u9HN"}},3154:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),u=a(n(12)),l=a(n(13)),s=a(n(19)),i=a(n(20)),f=a(n(18)),d=a(n(0)),p=n(70),m=a(n(751)),h=a(n(940)),v=a(n(3155)),y=a(n(3159)),g=a(n(3160)),E=a(n(3161));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var b=(0,p.inject)("rootStore","workspaceStore")(o=(0,p.observer)(o=function(e){(0,s.default)(n,e);var r=k(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).workspaceStore=e.props.workspaceStore,e.valueRenderer=function(e){return t("CLUSTER_VALUE",{value:e.value})},e.optionRenderer=function(e){return d.default.createElement("div",null,d.default.createElement("div",null,e.value),!e.cluster.isReady&&d.default.createElement("div",null,d.default.createElement(h.default,{data:e.cluster,noTip:!0})))},e.handleClusterChange=function(t){e.workspaceStore.selectCluster(t)},e}return(0,l.default)(n,[{key:"renderEmpty",value:function(){return d.default.createElement(m.default,{icon:"cluster",title:t("NO_AVAILABLE_CLUSTER"),desc:t("WORKSPACE_NO_CLUSTER_TIP")})}},{key:"render",value:function(){return d.default.createElement("div",null,!globals.app.isMultiCluster&&d.default.createElement(v.default,{workspace:this.workspace}),this.props.workspaceStore.clusters.data.length>0?d.default.createElement(d.default.Fragment,null,d.default.createElement(y.default,(0,c.default)({workspace:this.workspace},this.clusterProps)),d.default.createElement(g.default,(0,c.default)({workspace:this.workspace},this.clusterProps))):this.renderEmpty())}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data}},{key:"clustersOpts",get:function(){return this.clusters.map((function(e){return{label:e.name,value:e.name,disabled:!e.isReady,cluster:e}}))}},{key:"clusterProps",get:function(){return{className:E.default.clusterSelector,cluster:this.workspaceStore.cluster,options:this.clustersOpts,onChange:this.handleClusterChange,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,workspaceStore:this.workspaceStore}}}]),n}(d.default.Component))||o)||o;r.default=b},3155:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(136)),u=a(n(49)),l=a(n(50)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(0)),h=n(5),v=n(70),y=a(n(16)),g=n(58),E=a(n(963)),k=n(25),b=a(n(741)),S=a(n(3156)),_=a(n(3158));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var w=(0,v.inject)("rootStore")(o=(0,v.observer)(o=function(e){(0,f.default)(n,e);var r=O(n);function n(e){var t;return(0,s.default)(this,n),(t=r.call(this,e)).fetchData=(0,l.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.monitorStore.fetchStatistics(t.workspace);case 1:case"end":return e.stop()}}),e)}))),t.getLink=function(e){var r=globals.app.getActions({module:e,workspace:t.workspace});return r.includes("view")||r.includes("manage")?"/workspaces/".concat(t.workspace,"/").concat(e):null},t.getMetrics=function(){var e=(0,h.toJS)(t.monitorStore.statistics.data),r={};return Object.entries(e).forEach((function(e){var t=(0,c.default)(e,2),n=t[0],a=t[1];r[n]=(0,y.default)(a,"data.result[0].value[1]",0)})),r},t.workspace=e.workspace,t.monitorStore=new E.default,t.fetchData(),t}return(0,i.default)(n,[{key:"render",value:function(){var e=this.monitorStore.statistics.isLoading,r=this.getMetrics();return m.default.createElement(k.Loading,{spinning:e},m.default.createElement(b.default,{className:_.default.card},m.default.createElement(k.Columns,null,m.default.createElement(k.Column,null,m.default.createElement(S.default,{icon:g.ICON_TYPES.projects,desc:"1"===r.workspace_namespace_count?t("PROJECT"):t("PROJECT_PL"),title:r.workspace_namespace_count,url:this.getLink("projects"),size:"large"})),globals.app.hasKSModule("devops")&&m.default.createElement(k.Column,null,m.default.createElement(S.default,{icon:g.ICON_TYPES.devops,desc:"1"===r.workspace_devops_project_count?t("DEVOPS_PROJECT_TCAP"):t("DEVOPS_PROJECT_TCAP_PL"),title:r.workspace_devops_project_count,url:this.getLink("devops"),size:"large"})),m.default.createElement(k.Column,null,m.default.createElement(S.default,{icon:g.ICON_TYPES.roles,desc:"1"===r.workspace_role_count?t("ROLE"):t("ROLE_PL"),title:r.workspace_role_count,url:this.getLink("roles"),size:"large"})),m.default.createElement(k.Column,null,m.default.createElement(S.default,{icon:g.ICON_TYPES.members,desc:"1"===r.workspace_member_count?t("WORKSPACE_MEMBER_TCAP"):t("WORKSPACE_MEMBER_TCAP_PL"),title:r.workspace_member_count,url:this.getLink("members"),size:"large"})))))}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),n}(m.default.Component))||o)||o;r.default=w},3156:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(71)),o=n(r(12)),c=n(r(13)),u=n(r(19)),l=n(r(20)),s=n(r(18)),i=n(r(0)),f=n(r(1)),d=n(r(3)),p=r(276),m=r(25),h=n(r(3157));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var y=function(e){(0,u.default)(r,e);var t=v(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"renderContent",value:function(){var e=this.props,t=e.icon,r=e.iconProps,n=e.image,o=e.title,c=e.desc,u=e.extra;return i.default.createElement("div",null,i.default.createElement("div",{className:h.default.icon},n?i.default.createElement("img",{src:n,alt:""}):i.default.createElement(m.Icon,(0,a.default)({name:t,size:40,type:"dark"},r))),i.default.createElement("div",{className:h.default.text},i.default.createElement("div",null,o),i.default.createElement("p",null,c)),u)}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.size,n=e.className;return t?i.default.createElement(p.Link,{className:(0,d.default)(h.default.info,h.default.link,h.default[r],n),to:t},this.renderContent()):i.default.createElement("div",{className:(0,d.default)(h.default.info,h.default[r],n)},this.renderContent())}}]),r}(i.default.Component);t.default=y,y.propTypes={icon:f.default.string,iconProps:f.default.object,image:f.default.string,title:f.default.any,desc:f.default.any,size:f.default.string,width:f.default.number,url:f.default.string},y.defaultProps={icon:"",iconProps:{},title:"",desc:"",size:"default",width:0}},3157:function(e,t,r){e.exports={info:"_19mYgWKuxc3opetAtSpZ8s",icon:"qxkZsU9tqSvifJxefLtUx",text:"-inyb5ARVzbHUbOax0Rz8",link:"_22Id0T409og0B_FDFhNx9P",large:"_1qTjUUGzpX3FNb9rnveJzC"}},3158:function(e,t,r){e.exports={card:"_2Mzfc-V26H6p6iBCIfz7hD"}},3159:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),u=a(n(56)),l=a(n(21)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=n(70),h=a(n(16)),v=a(n(0)),y=n(25),g=a(n(963)),E=n(1399);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var _={cpu_usage:"workspace_cpu_usage",memory_usage:"workspace_memory_usage_wo_cache",disk_usage:"workspace_disk_size_usage"},O=(0,m.inject)("rootStore")(o=(0,m.observer)(o=function(e){(0,f.default)(n,e);var r=S(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU_USAGE",unitType:"cpu",legend:["CPU"],metricType:_.cpu_usage},{type:"memory",title:"MEMORY_USAGE",unitType:"memory",legend:["MEMORY"],metricType:_.memory_usage}]},e.getControllerProps=function(){return{title:t("PHYSICAL_RESOURCES"),createTime:e.createTime,customAction:e.renderClusters()}},e.fetchData=function(t){e.monitorStore.cluster=e.props.cluster,e.monitorStore.fetchMetrics(b({workspace:e.workspace,metrics:Object.values(_)},t))},e}return(0,i.default)(n,[{key:"componentDidUpdate",value:function(e){e.cluster!==this.props.cluster&&this.fetchData()}},{key:"init",value:function(){this.monitorStore=new g.default}},{key:"renderClusters",value:function(){var e=this.props,t=(e.workspace,e.cluster),r=(0,u.default)(e,["workspace","cluster"]);if(r.options.length)return v.default.createElement(y.Select,(0,c.default)({value:t},r))}},{key:"workspace",get:function(){return this.props.workspace}},{key:"createTime",get:function(){return(0,h.default)(this.props.rootStore,"workspace.detail.createTime")}}]),n}(E.Component))||o)||o;r.default=O},3160:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),u=a(n(56)),l=a(n(21)),s=a(n(12)),i=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),m=a(n(0)),h=n(70),v=a(n(16)),y=n(25),g=a(n(963)),E=n(1402);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var _={deployment_count:"workspace_deployment_count",statefulset_count:"workspace_statefulset_count",daemonset_count:"workspace_daemonset_count",job_count:"workspace_job_count",cronjob_count:"workspace_cronjob_count",pvc_count:"workspace_pvc_count",service_count:"workspace_service_count",route_count:"workspace_ingresses_extensions_count",pod_running_count:"workspace_pod_running_count"},O=(0,h.inject)("rootStore")(o=(0,h.observer)(o=function(e){(0,f.default)(n,e);var r=S(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).getMonitoringCfgs=function(){return[{type:"deployment",title:"DEPLOYMENT",legend:["DEPLOYMENT_PL"],metricType:_.deployment_count},{type:"statefulset",title:"STATEFULSET",legend:["STATEFULSET_PL"],metricType:_.statefulset_count},{type:"daemonset",title:"DAEMONSET",legend:["DAEMONSET_PL"],metricType:_.daemonset_count},{type:"job",title:"JOB",legend:["JOB_PL"],metricType:_.job_count},{type:"cronjob",title:"CRONJOB",legend:["CRONJOB_PL"],metricType:_.cronjob_count},{type:"pvc",title:"PERSISTENT_VOLUME_CLAIM",legend:["PERSISTENT_VOLUME_CLAIM_PL"],metricType:_.pvc_count},{type:"service",title:"SERVICE",legend:["SERVICE_PL"],metricType:_.service_count},{type:"routes",title:"ROUTE",legend:["ROUTE_PL"],metricType:_.route_count},{type:"pod",title:"POD",legend:["RUNNING_PODS"],metricType:_.pod_running_count}]},e.getControllerProps=function(){return{title:t("APPLICATION_RESOURCE_PL"),createTime:e.createTime,customAction:e.renderClusters()}},e.fetchData=function(t){e.monitorStore.cluster=e.props.cluster,e.monitorStore.fetchMetrics(b({workspace:e.workspace,metrics:Object.values(_)},t))},e}return(0,i.default)(n,[{key:"componentDidUpdate",value:function(e){e.cluster!==this.props.cluster&&this.fetchData()}},{key:"init",value:function(){this.monitorStore=new g.default}},{key:"renderClusters",value:function(){var e=this.props,t=(e.workspace,e.cluster),r=(0,u.default)(e,["workspace","cluster"]);if(r.options.length)return m.default.createElement(y.Select,(0,c.default)({value:t},r))}},{key:"workspace",get:function(){return this.props.workspace}},{key:"createTime",get:function(){return(0,v.default)(this.props.rootStore,"workspace.detail.createTime")}}]),n}(E.Component))||o)||o;r.default=O},3161:function(e,t,r){e.exports={clusterSelector:"_2CN59clY1qGTKeYHNEaPKx"}},3162:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(12)),u=a(n(13)),l=a(n(19)),s=a(n(20)),i=a(n(18)),f=a(n(0)),d=n(70),p=a(n(3)),m=a(n(16)),h=a(n(1403)),v=n(25),y=a(n(751)),g=a(n(1404)),E=a(n(940)),k=a(n(3163));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var S=(0,d.inject)("rootStore","workspaceStore")(o=(0,d.observer)(o=function(e){(0,l.default)(n,e);var r=b(n);function n(e){var a;return(0,c.default)(this,n),(a=r.call(this,e)).valueRenderer=function(e){return t("CLUSTER_VALUE",{value:e.value})},a.optionRenderer=function(e){return f.default.createElement("div",null,f.default.createElement("div",null,e.value),!e.cluster.isReady&&f.default.createElement("div",null,f.default.createElement(E.default,{data:e.cluster,noTip:!0})))},a.export=function(){a.store.download("project.usage.rank.json")},a.fetchMetrics=function(){a.workspaceStore.cluster&&(a.store.cluster=a.workspaceStore.cluster,a.store.fetchAll())},a.handleClusterChange=function(e){a.workspaceStore.selectCluster(e),a.fetchMetrics()},a.store=new h.default({workspace:a.workspace,limit:10,sort_type:"desc"}),a.workspaceStore=a.props.workspaceStore,a}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.fetchMetrics()}},{key:"render",value:function(){return this.workspaceStore.clusters.data.length>0?f.default.createElement("div",{className:k.default.wrapper},this.renderToolbar(),this.renderList()):f.default.createElement(y.default,{icon:"cluster",title:t("NO_AVAILABLE_CLUSTER"),desc:t("WORKSPACE_NO_CLUSTER_TIP")})}},{key:"renderToolbar",value:function(){return f.default.createElement("div",{className:(0,p.default)(k.default.toolbar,k.default.pane__toolbar,k.default.pane)},f.default.createElement("div",{className:k.default.toolbar_filter},f.default.createElement(v.Select,{options:this.clusters,value:this.workspaceStore.cluster,onChange:this.handleClusterChange,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer}),f.default.createElement(v.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}),f.default.createElement("span",{className:k.default.sort_button},f.default.createElement(v.Icon,{name:"desc"===this.store.sort_type?"sort-descending":"sort-ascending",type:"coloured",size:"small",onClick:this.store.changeSortType}))),f.default.createElement("div",{className:k.default.toolbar_buttons},f.default.createElement(v.Button,{onClick:this.export},t("EXPORT"))))}},{key:"renderList",value:function(){return f.default.createElement(v.Loading,{spinning:this.store.isLoading},f.default.createElement("div",null,f.default.createElement(g.default,{store:this.store,cluster:this.workspaceStore.cluster,workspace:this.workspace}),this.renderPagination()))}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,r=e.total_page,n=this.store.limit;return f.default.createElement("div",{className:(0,p.default)(k.default.pane,k.default.pane__pagination)},f.default.createElement(v.Level,null,f.default.createElement(v.LevelLeft,null),f.default.createElement(v.LevelRight,null,f.default.createElement(v.Pagination,{page:t,total:r,limit:n,onChange:this.store.changePagination}))))}},{key:"workspace",get:function(){return(0,m.default)(this.props,"match.params.workspace")}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,disabled:!e.isReady,cluster:e}}))}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),n}(f.default.Component))||o)||o;r.default=S},3163:function(e,t,r){e.exports={wrapper:"XOE-cnCpkLiQnK1LYj76R",pane:"_4eoZyoK8wFINAqkdJQ85x",pane__toolbar:"_3ogot8SmW5Z_9xeDNnNw8J",pane__pagination:"_2-8FIJLuwzuIKSrqxMesHO",title:"_2qPKz_yI2dQANE7cinRpOJ",toolbar:"_2RBEsIiZKKZgDZ3u7LiRAo",toolbar_buttons:"_2GVcDXuuqPn-Rp4lv0T62i",toolbar_filter:"_3bcXJxC0OcAscveuS8z8n-",sort_button:"_1GoQ0ktQ1tHaIYZStCYuNK",table:"_3wbjOUhTYzkXtBKPWT2gII",table_rank:"_3nh1u6G_H7ukc5exwtqOVD",table_no_border:"_33558CkQNEGbVwy7lI_Qpn",rankList_row:"_3VpL4zRLxPNKDne3b1JfS5",rankLink__sort_col:"FenZscoqAaPoaSyYYOCPb"}},3164:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(12)),u=a(n(13)),l=a(n(19)),s=a(n(20)),i=a(n(18)),f=a(n(0)),d=a(n(32)),p=n(5),m=n(70),h=a(n(751)),v=a(n(845)),y=a(n(3165));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var E=(0,m.inject)("rootStore","workspaceStore")(o=(0,m.observer)(o=function(e){(0,l.default)(n,e);var r=g(n);function n(){var e;(0,c.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).monitorStore=new v.default,e.state={confirm:!1,workspaces:{}},e}return(0,u.default)(n,[{key:"render",value:function(){if(!globals.app.isMultiCluster)return null;var e=(0,p.toJS)(this.store.clusters),r=e.data,n=e.isLoading;return(0,d.default)(r)&&!n?f.default.createElement(h.default,{icon:"cluster",title:t("NO_AVAILABLE_CLUSTER"),desc:t("WORKSPACE_NO_CLUSTER_TIP")}):r.map((function(e){return f.default.createElement(y.default,{key:e.name,cluster:e})}))}},{key:"store",get:function(){return this.props.workspaceStore}},{key:"module",get:function(){return"BaseInfo"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"workspace",get:function(){return this.props.match.params.workspace}}]),n}(f.default.Component))||o)||o;r.default=E},3165:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=a(n(71)),u=a(n(12)),l=a(n(13)),s=a(n(19)),i=a(n(20)),f=a(n(18)),d=o(n(0)),p=n(70),m=a(n(16)),h=n(25);n(1059);var v,y=a(n(989)),g=a(n(988)),E=a(n(1391)),k=a(n(1392)),b=a(n(1135)),S=a(n(275)),_=a(n(723)),O=a(n(749)),w=a(n(1393)),P=a(n(845)),C=n(725),R=a(n(3166));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var T={cpu_usage:"cluster_cpu_usage",cpu_total:"cluster_cpu_total",memory_usage:"cluster_memory_usage_wo_cache",memory_total:"cluster_memory_total",disk_size_usage:"cluster_disk_size_usage",disk_size_capacity:"cluster_disk_size_capacity",pod_count:"cluster_pod_running_count",pod_capacity:"cluster_pod_quota"},A=(0,p.observer)(v=function(e){(0,s.default)(n,e);var r=D(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).monitorStore=new P.default({cluster:e.props.cluster.name}),e.getValue=function(e){return(0,m.default)(e,"value[1]",0)},e.fetchData=function(){e.isReady?e.monitorStore.fetchMetrics({metrics:Object.values(T),last:!0}):e.monitorStore.isLoading=!1},e.getResourceOptions=function(){var t=(0,C.getLastMonitoringData)(e.metrics);return[{name:"CPU",unitType:"cpu",used:e.getValue(t[T.cpu_usage]),total:e.getValue(t[T.cpu_total])},{name:"MEMORY",unitType:"memory",used:e.getValue(t[T.memory_usage]),total:e.getValue(t[T.memory_total])},{name:"POD",unitType:"",used:e.getValue(t[T.pod_count]),total:e.getValue(t[T.pod_capacity])},{name:"DISK",unitType:"disk",used:e.getValue(t[T.disk_size_usage]),total:e.getValue(t[T.disk_size_capacity])}]},e.getRadarOptions=function(e){return e.map((function(e){return{name:t(e.name),usage:Math.round(100*e.used/(e.total||e.used))}}))},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props.cluster,r=this.getResourceOptions(),n=this.getRadarOptions(r);return d.default.createElement(_.default,{key:e.name},d.default.createElement(h.Loading,{spinning:this.monitorStore.isLoading},d.default.createElement("div",{className:R.default.cluster},d.default.createElement("div",{className:R.default.info},d.default.createElement("div",{className:R.default.title},d.default.createElement(O.default,{cluster:e})),d.default.createElement("div",{className:R.default.desc},d.default.createElement(S.default,{title:e.kubernetesVersion,description:t("KUBERNETES_VERSION")}),d.default.createElement(S.default,{title:e.provider||"-",description:t("PROVIDER")})),this.isReady&&d.default.createElement("div",{className:R.default.chart},d.default.createElement(k.default,{cx:200,cy:100,width:400,height:200,data:n},d.default.createElement(E.default,{gridType:"circle"}),d.default.createElement(g.default,{dataKey:"name"}),d.default.createElement(y.default,{domain:[0,100]}),d.default.createElement(b.default,{dataKey:"usage",stroke:"#345681",fill:"#1c2d4267"}))),d.default.createElement(h.Icon,{name:"cluster",size:200,className:R.default.cornerIcon})),this.isReady&&d.default.createElement("div",{className:R.default.monitor},r.map((function(e){return d.default.createElement(w.default,(0,c.default)({key:e.name},e))}))))))}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"isReady",get:function(){return this.props.cluster.isReady}}]),n}(d.Component))||v;r.default=A},3166:function(e,t,r){e.exports={cluster:"eIIpL5gXsD7eYCN4jObmc",info:"_1SeIIfdo7pfeyRVJA_rTXY",title:"_11TQrQLFxw07VUuS6Ml-Jg",desc:"_1SEi1Y-s-7o5h5MTWWWd8Z",cornerIcon:"_337F40HqvDwpzPZ7SW0wPc",chart:"hMmFTXs1YpaU1RsZsL23Q",monitor:"_3YJouPHvRAOZLmlSQsKIUv"}},718:function(e,t,r){"use strict";var n=r(6),a=r(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,c=n(r(49)),u=n(r(21)),l=n(r(50)),s=n(r(12)),i=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=a(r(0)),h=r(70),v=n(r(16)),y=n(r(73)),g=n(r(191)),E=r(25),k=r(634),b=n(r(770)),S=n(r(3071));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var P=(0,h.inject)("rootStore")(o=(0,h.observer)(o=function(e){(0,f.default)(n,e);var t,r=w(n);function n(e){var t;return(0,s.default)(this,n),(t=r.call(this,e)).store=new b.default,t.init(e.match.params),t}return(0,i.default)(n,[{key:"componentDidUpdate",value:function(e){e.match.params.workspace!==this.workspace&&this.init(this.props.match.params)}},{key:"init",value:(t=(0,l.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,Promise.all([this.store.fetchDetail(t),this.store.fetchClusters(O(O({},t),{},{limit:-1})),this.props.rootStore.getRules(t)]);case 3:globals.app.isMultiCluster&&(0,y.default)(globals.ksConfig,"devops",this.store.clusters.data.some((function(e){return(0,v.default)(e,"configz.devops")}))),globals.app.cacheHistory(this.props.match.url,O({type:"Workspace"},(0,g.default)(this.store.detail,["name","aliasName"]))),this.store.initializing=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?m.default.createElement(E.Loading,{className:"ks-page-loading"}):m.default.createElement(h.Provider,{workspaceStore:this.store},(0,k.renderRoutes)(S.default))}},{key:"workspace",get:function(){return this.props.match.params.workspace}}]),n}(m.Component))||o)||o;t.default=P},968:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(71)),c=a(n(12)),u=a(n(13)),l=a(n(19)),s=a(n(20)),i=a(n(18)),f=a(n(0)),d=a(n(32)),p=a(n(835)),m=a(n(751)),h=a(n(1133)),v=a(n(1468));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var g=function(e){(0,l.default)(n,e);var r=y(n);function n(){return(0,c.default)(this,n),r.apply(this,arguments)}return(0,u.default)(n,[{key:"renderCustomFilter",value:function(){var e=this.props,t=e.showClusterSelect,r=e.clusters,n=e.cluster,a=e.onClusterChange;return t?f.default.createElement(v.default,{clusters:r,cluster:n,onChange:a}):null}},{key:"render",value:function(){var e=this.props.clusters;return globals.app.isMultiCluster&&(0,d.default)(e)?f.default.createElement(m.default,{icon:"cluster",title:t("NO_AVAILABLE_CLUSTER"),desc:t("WORKSPACE_NO_CLUSTER_TIP")}):f.default.createElement(p.default,(0,o.default)({customFilter:this.renderCustomFilter()},this.props))}}]),n}(f.default.Component),E=(0,h.default)(g);r.default=E}}]);