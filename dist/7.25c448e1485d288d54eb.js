(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1036:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(12)),u=a(n(13)),l=a(n(19)),s=a(n(20)),i=a(n(18)),c=a(n(0)),d=a(n(3)),f=a(n(3533));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var m=function(e){(0,l.default)(n,e);var r=p(n);function n(){return(0,o.default)(this,n),r.apply(this,arguments)}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props,r=e.score,n=e.className;return void 0===r?c.default.createElement("span",null,c.default.createElement("span",{className:(0,d.default)(f.default.icon,f.default.nostatus,n)}),t("NO_STATUS")):r<=30?c.default.createElement("span",null,c.default.createElement("span",{className:(0,d.default)(f.default.icon,f.default.error,n)}),t("WARNING")):r>30&&r<=80?c.default.createElement("span",null,c.default.createElement("span",{className:(0,d.default)(f.default.icon,f.default.subhealth,n)}),t("SUB_HEALTHY")):c.default.createElement("span",null,c.default.createElement("span",{className:(0,d.default)(f.default.icon,f.default.health,n)}),t("HEALTHY"))}}]),n}(c.default.Component);r.default=m},1169:function(e,r,n){"use strict";var a=n(72),o=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=o(n(21)),l=o(n(12)),s=o(n(13)),i=o(n(19)),c=o(n(20)),d=o(n(18)),f=a(n(0)),p=o(n(1)),m=o(n(3)),h=o(n(3536));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var g=function(e){(0,i.default)(n,e);var r=v(n);function n(){return(0,l.default)(this,n),r.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,r=e.className,n=e.type,a=e.label,o=e.hasLabel,l=e.noBolder;return n?f.default.createElement("span",{className:(0,m.default)(h.default.status,(0,u.default)({},h.default.noBolder,l))},f.default.createElement("span",{className:(0,m.default)(h.default.status_icon,h.default[n.toLowerCase()],r)}),o&&t(a.toUpperCase())):"-"}}]),n}(f.PureComponent);r.default=g,g.propTypes={label:p.default.string,className:p.default.string,type:p.default.string,hasLabel:p.default.bool},g.defaultProps={type:"",label:"",hasLabel:!0}},1170:function(e,t,r){e.exports={blocker:"_13DzfBLFOcl0PkbaYOX_IL",rotate:"Qt2BndoO7EUdKwtN-hOtc",critical:"_34RT_yUY674mzuDu7R7SnE",info:"_293s8VCmuIgat-ocKVjiz8",major:"II1m5ywwwPjr4B9x4osmH",minor:"_1vir6Nk49PjpnZlBgElG-m",codeStatus:"_3vyWO-g1aIhi8WEUkqeDoi",status:"_2nb5BAvBLIBf1XeSRTohxv",type:"RSzYbc7X9wi3VPpAnBKvl",header:"_21iug7B2oBnbaMYUk1cbE-",title:"_3HJdy7bqoFMJ9OL9oD6fme",details:"_1EFtU6SxsqVpw9uEq6R7yq",content:"A-eoLIpA2_gligbYaPB7S",fileTitle:"nIhyXf2HKwkqzKczKwmLl",errorCard:"_3p5QrKOD_gQ7OYFVdM2p43",message:"_30aQZH0JvWk6-pz3ASP2ED","card-blocker":"_10H_dISVCyQUnX7DzaCw5t","card-critical":"_8-u2ig-VJ7fMfEopMHsl0","card-minor":"_3bLDFrnmI5omxaXpuslvI","card-info":"Dz7-_HLWnP9yOJx6SSb6H",titleShowMore:"_35etf_t4zY_L3qi074fSZV",displayAll:"_21pNhW5rKygDrZfFUrzhbB"}},1514:function(e,t,r){"use strict";var n=r(72),a=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(12)),u=a(r(13)),l=a(r(19)),s=a(r(20)),i=a(r(18)),c=n(r(0)),d=r(25),f=a(r(290)),p=r(58),m=r(37),h=a(r(3535));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var g=function(e){(0,l.default)(r,e);var t=v(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=(0,f.default)(this.props.clustersDetail,"name"),t=this.props.destination,r=void 0===t?{}:t,n=e[(0,m.inCluster2Default)(r.name)]||{},a=r.namespace||"";return c.default.createElement("div",{className:h.default.wrapper},c.default.createElement("div",{className:h.default.tags},c.default.createElement(d.Tag,{key:n.name,type:p.CLUSTER_GROUP_TAG_TYPE[n.group]},c.default.createElement(d.Icon,{name:p.CLUSTER_PROVIDER_ICON[n.provider]||"kubernetes",size:16,type:"light"}),n.name||"default"),c.default.createElement("span",null,c.default.createElement(d.Icon,{name:"project",size:16,type:"dark"}),a)))}}]),r}(c.Component);t.default=g},1515:function(e,t,r){e.exports={table:"_2kRLkEVOqCUKzBIAdE_83T",card_content:"_3kRPEz6by7LmYIGQYPiu1y",icon:"_1SjrfgQTyLeQm9FP_xJP27",info:"_3HKXpm5f2PQvmQUhwyH_WF",name:"_2fx0MeyPaBwvI7QGcSuPS_",desc:"_3ReQfIWiUSifiPUFAe05f0"}},1516:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,u,l,s=n(r(49)),i=n(r(50)),c=n(r(91)),d=n(r(12)),f=n(r(135)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(74)),g=(n(r(92)),n(r(23))),y=r(5),E=n(r(186));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var S=(a=function(e){(0,p.default)(r,e);var t=b(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,c.default)(e,"detail",o,(0,f.default)(e)),(0,c.default)(e,"isLoading",u,(0,f.default)(e)),(0,c.default)(e,"fetchDetail",l,(0,f.default)(e)),e}return r}(n(r(788)).default),o=(0,v.default)(a.prototype,"detail",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,v.default)(a.prototype,"isLoading",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=(0,v.default)(a.prototype,"fetchDetail",[y.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,i.default)(s.default.mark((function t(r){var n,a,o,u,l,i,c;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.devops,a=r.branch,o=r.name,u=r.cluster,l="",l=a?"".concat(e.getDevopsUrlV2({cluster:u,devops:n}),"pipelines/").concat(o,"/branches/").concat(encodeURIComponent(a),"/sonarstatus "):"".concat(e.getDevopsUrlV2({cluster:u,devops:n}),"pipelines/").concat(o,"/sonarstatus"),e.isLoading=!0,t.next=6,request.get(l,null,null,(function(){return"no  sonarqube"})).finally((function(){e.isLoading=!1}));case 6:i=t.sent,c=(0,g.default)(i)?i:[],e.detail=c.length?c.map(E.default.codequality)[0]:{};case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),a);t.default=S},1517:function(e,r,n){"use strict";var a=n(72),o=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=o(n(12)),l=o(n(13)),s=o(n(19)),i=o(n(20)),c=o(n(18)),d=a(n(0)),f=n(5),p=n(70),m=n(276),h=n(25),v=o(n(1036)),g=n(973),y=o(n(3560));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var b=function(e){(0,s.default)(n,e);var r=E(n);function n(){return(0,u.default)(this,n),r.apply(this,arguments)}return(0,l.default)(n,[{key:"renderBaseInfo",value:function(){var e=this.props.detailStore.detail;return d.default.createElement(h.Columns,{className:y.default.baseInfo},d.default.createElement(h.Column,{className:y.default.baseInfo__item},d.default.createElement("div",{className:y.default.dashboardValue},d.default.createElement(v.default,{score:e.weatherScore})),d.default.createElement("div",{className:y.default.dashboardLable},t("HEALTH_STATUS_SCAP"))),this.isMultibranch?d.default.createElement(h.Column,{className:y.default.baseInfo__item},d.default.createElement("div",{className:y.default.dashboardValue},d.default.createElement(g.ReactComponent,{style:{width:"20px",height:"20px"}})," ",e.totalNumberOfBranches||"-"),d.default.createElement("div",{className:y.default.dashboardLable},e.totalNumberOfBranches&&1===e.totalNumberOfBranches?t("BRANCH_SI"):t("BRANCH_PL"))):null,d.default.createElement(h.Column,{className:y.default.baseInfo__item}))}},{key:"renderNavLink",value:function(e){var r=e.name,n=e.title,a=this.props,o=a.detailStore,u=a.sonarqubeStore,l=this.enabledActions.includes("edit");if(!r)return null;if(o&&u){if((!l||this.isMultibranch)&&"pipeline"===r)return null;if(!u.detail.totalStatus&&"code-quality"===r)return null;if(!this.isMultibranch&&"branch"===r)return null;if(!o.detail.totalNumberOfPullRequests&&"pull-request"===r)return null}return d.default.createElement(m.NavLink,{key:r,className:y.default.navItem,activeClassName:y.default.active,to:"".concat(this.props.match.url,"/").concat(r)},t(n))}},{key:"render",value:function(){var e=this,t=this.props.route;return d.default.createElement(d.default.Fragment,null,this.renderBaseInfo(),d.default.createElement("div",{className:y.default.nav},t.routes.map((function(t){return e.renderNavLink(t)}))))}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,r=e.devops;return globals.app.getActions({module:"pipelines",cluster:t,devops:r})}},{key:"isMultibranch",get:function(){var e=this.props.detailStore;return(0,f.toJS)(e.detail.isMultiBranch)}}]),n}(d.Component);b.defaultProps={module:""};var S=(0,p.inject)("rootStore")((0,p.observer)(b));r.default=S},1518:function(e,t,r){e.exports={branchIcon:"_24Aiyvv5IBkO77t2wEOSLk",loading:"_2b9DaSPDyZsY6mK-iSVHXW"}},1519:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l,s,i,c,d,f,p,m,h=a(n(21)),v=a(n(49)),g=a(n(56)),y=a(n(50)),E=a(n(91)),b=a(n(12)),S=a(n(13)),_=a(n(135)),D=a(n(19)),O=a(n(20)),k=a(n(18)),R=a(n(74)),N=(a(n(92)),a(n(190))),P=a(n(23)),I=a(n(16)),w=a(n(32)),C=n(821),T=n(5),L=n(25),A=n(37),x=a(n(788)),j=a(n(883));function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,k.default)(e);if(t){var a=(0,k.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,O.default)(this,r)}}var H=(o=function(e){(0,D.default)(H,e);var r,n,a,o,h,O,k,R,x,M=Y(H);function H(){var e;return(0,b.default)(this,H),e=M.call(this),(0,E.default)(e,"detail",u,(0,_.default)(e)),(0,E.default)(e,"devops",l,(0,_.default)(e)),(0,E.default)(e,"commitsList",s,(0,_.default)(e)),(0,E.default)(e,"artifactsList",i,(0,_.default)(e)),(0,E.default)(e,"isLoading",c,(0,_.default)(e)),(0,E.default)(e,"getNodesStatusLoading",d,(0,_.default)(e)),(0,E.default)(e,"nodesStatus",f,(0,_.default)(e)),(0,E.default)(e,"runDetail",p,(0,_.default)(e)),(0,E.default)(e,"runDetailLogs",m,(0,_.default)(e)),e.saveAsFile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default.txt",r=new Blob([e],{type:"text/plain;charset=utf-8"});(0,C.saveAs)(r,t)},e.pipelineStore=new j.default,e}return(0,S.default)(H,[{key:"getUrl",value:function(e){var t=e.cluster,r=e.devops,n=e.name;return"".concat(this.getDevopsUrlV2({cluster:t,devops:r}),"pipelines/").concat(decodeURIComponent(n),"/")}},{key:"getRunUrl",value:function(e){var t=e.cluster,r=e.devops,n=e.name,a=e.branch,o=e.runId;return"".concat(this.getUrl({cluster:t,devops:r,name:n})).concat(a?"branches/".concat(encodeURIComponent(a),"/"):"","runs/").concat(o,"/")}},{key:"getCommits",value:(x=(0,y.default)(v.default.mark((function e(t){var r,n,a,o,u,l,s,i,c,d;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,n=t.branch,a=t.runName,o=t.devops,t.workspace,u=t.cluster,l=(0,g.default)(t,["name","branch","runName","devops","workspace","cluster"]),r=decodeURIComponent(r),s=l.page,this.runDetail.id){e.next=6;break}return e.next=6,this.getRunDetail({devops:o,cluster:u,runName:a});case 6:return this.commitsList.isLoading=!0,e.next=9,request.get("".concat(this.getRunUrl({cluster:u,devops:o,name:r,branch:n,runId:this.runDetail.id})),{start:10*(s-1)||0,limit:10});case 9:i=e.sent,c=[],i.changeSet&&(0,P.default)(i.changeSet)?c=i.changeSet.map((function(e){return{commitId:(0,I.default)(e,"commitId"),startTime:(0,I.default)(e,"timestamp"),url:(0,I.default)(e,"url"),author:(0,I.default)(e,"author.fullName"),title:(0,I.default)(e,"msg")}})):i.pullRequest&&(d={commitId:(0,I.default)(i,"commitId"),startTime:(0,I.default)(i,"startTime"),url:(0,I.default)(i,"pullRequest.url"),author:(0,I.default)(i,"pullRequest.author"),title:(0,I.default)(i,"pullRequest.title")},c.push(d)),this.commitsList={data:c,limit:10,total:c.length,page:parseInt(s,10)||1,filters:(0,N.default)(l,"devops"),isLoading:!1,selectedRowKeys:[]};case 13:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"getArtifacts",value:(R=(0,y.default)(v.default.mark((function e(t){var r,n,a,o,u,l,s,i;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.devops,n=t.name,a=t.runName,o=t.branch,u=t.cluster,t.workspace,l=(0,g.default)(t,["devops","name","runName","branch","cluster","workspace"]),n=decodeURIComponent(n),s=l.page,this.runDetail.id){e.next=6;break}return e.next=6,this.getRunDetail({devops:r,cluster:u,runName:a});case 6:return this.artifactsList.isLoading=!0,e.next=9,request.get("".concat(this.getRunUrl({cluster:u,devops:r,name:n,branch:o,runId:this.runDetail.id}),"artifacts/"),{start:10*(s-1)||0,limit:10});case 9:i=e.sent,this.artifactsList={data:i||[],pipeline:n,pipelineRun:a,total:i.length,limit:10,page:parseInt(s,10)||1,filters:(0,N.default)(l,"devops"),isLoading:!1,selectedRowKeys:[]};case 11:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"getNodesStatus",value:(k=(0,y.default)(v.default.mark((function e(t){var r,n,a,o,u,l,s=this;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.devops,n=t.name,a=t.branch,o=t.cluster,n=decodeURIComponent(n),this.getNodesStatusLoading=!0,e.next=5,request.get("".concat(this.getBaseUrl({cluster:o,namespace:r}),"pipelineruns/").concat(this.runDetail.name,"/nodedetails"));case 5:if(u=e.sent,(0,P.default)(u)){e.next=9;break}return this.getNodesStatusLoading=!1,e.abrupt("return");case 9:l=!(0,w.default)(u),this.nodesStatus=l?u.reduce((function(e,t,r){if(t.causeOfBlockage=s.runDetail.causeOfBlockage,"STAGE"===t.type){if(u[r+1]&&"PARALLEL"===u[r+1].type)return e.push([]),e;e.push(t)}else Array.isArray(e[e.length-1])?e[e.length-1].push(t):e.push([t]);return e}),[]):[],(!u||u.length<1)&&this.getRunStatusLogs({devops:r,name:n,branch:a,runId:this.runDetail.id,cluster:o}),this.getNodesStatusLoading=!1;case 13:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"getRunDetail",value:(O=(0,y.default)(v.default.mark((function e(t){var r,n,a,o,u=this;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.devops,n=t.cluster,a=t.runName,e.next=3,request.get("".concat(this.getBaseUrl({cluster:n,namespace:r}),"pipelineruns/").concat(a),null,null,function(){var e=(0,y.default)(v.default.mark((function e(r){var n;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(404!==r.status){e.next=6;break}return e.next=3,u.pipelineStore.fetchDetail(t);case 3:return n=e.sent,u.runDetail=n.latestRun||{},e.abrupt("return",(0,T.toJS)(u.runDetail));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:o=e.sent,this.runDetail=U(U({},(0,A.safeParseJSON)((0,I.default)(o,"metadata.annotations.['devops.kubesphere.io/jenkins-pipelinerun-status']"))),{},{name:(0,I.default)(o,"metadata.name"),_originData:o}),this.isLoading=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"replay",value:(h=(0,y.default)(v.default.mark((function e(t,r){var n,a,o,u;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.devops,a=t.name,o=t.branch,u=t.cluster,e.next=3,request.post("".concat(this.getRunUrl({cluster:u,devops:n,name:a,branch:o,runId:r||this.runDetail.id}),"replay"));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"getRunStatusLogs",value:(o=(0,y.default)(v.default.mark((function e(t){var r,n,a,o,u,l;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.devops,n=t.name,a=t.branch,o=t.runId,u=t.cluster,e.next=3,request.get("".concat(this.getRunUrl({cluster:u,devops:r,name:n,branch:a,runId:o}),"log/?start=0"));case 3:l=e.sent,this.runDetailLogs=l;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"handleDownloadLogs",value:(a=(0,y.default)(v.default.mark((function e(t){var r,n,a,o;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.devops,n=t.name,a=t.branch,o=t.cluster,n=decodeURIComponent(n),e.next=4,this.getRunStatusLogs({devops:r,name:n,branch:a,runId:this.runDetail.id,cluster:o});case 4:this.saveAsFile(this.runDetailLogs,"log.txt");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"handleProceed",value:(n=(0,y.default)(v.default.mark((function e(r){var n,a,o,u,l,s,i,c;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.parameters,a=r.devops,o=r.name,u=r.nodeId,l=r.branch,s=r.cluster,i=r.stepId,c=r.inputId,e.next=3,request.post("".concat(this.getRunUrl({cluster:s,devops:a,name:o,branch:l,runId:this.runDetail.id}),"nodes/").concat(u,"/steps/").concat(i,"/"),{id:c,parameters:n},null,(function(e){if(400===e.status)return L.Notify.error({content:t("Sorry, you don't have the permission to do this.")}),!0}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleBreak",value:(r=(0,y.default)(v.default.mark((function e(t){var r,n,a,o,u,l,s;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.devops,n=t.name,a=t.nodeId,o=t.branch,u=t.stepId,l=t.inputId,s=t.cluster,e.next=3,request.post("".concat(this.getRunUrl({cluster:s,devops:r,name:n,branch:o,runId:this.runDetail.id}),"nodes/").concat(a,"/steps/").concat(u,"/"),{id:l,abort:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),H}(x.default),u=(0,R.default)(o.prototype,"detail",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=(0,R.default)(o.prototype,"devops",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=(0,R.default)(o.prototype,"commitsList",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,order:"",reverse:!1,filters:{},isLoading:!0}}}),i=(0,R.default)(o.prototype,"artifactsList",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,order:"",reverse:!1,filters:{},isLoading:!0}}}),c=(0,R.default)(o.prototype,"isLoading",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=(0,R.default)(o.prototype,"getNodesStatusLoading",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,R.default)(o.prototype,"nodesStatus",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=(0,R.default)(o.prototype,"runDetail",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=(0,R.default)(o.prototype,"runDetailLogs",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,R.default)(o.prototype,"getCommits",[T.action],Object.getOwnPropertyDescriptor(o.prototype,"getCommits"),o.prototype),(0,R.default)(o.prototype,"getArtifacts",[T.action],Object.getOwnPropertyDescriptor(o.prototype,"getArtifacts"),o.prototype),(0,R.default)(o.prototype,"getNodesStatus",[T.action],Object.getOwnPropertyDescriptor(o.prototype,"getNodesStatus"),o.prototype),(0,R.default)(o.prototype,"getRunDetail",[T.action],Object.getOwnPropertyDescriptor(o.prototype,"getRunDetail"),o.prototype),(0,R.default)(o.prototype,"getRunStatusLogs",[T.action],Object.getOwnPropertyDescriptor(o.prototype,"getRunStatusLogs"),o.prototype),o);r.default=H},1520:function(e,t,r){e.exports={container:"_35WQzILk2k5A-TNfwYc_Yu",dialogTitle:"_1HnTmMa63mLPJxN-kG6XQ8",left:"_2XPYd3NGh15jZRYWm5MNuU",right:"_3bKVu0q_0smLvLQ_xG_Cv5",cutTitle:"ujjupzCK4LMn0keQ15_R8",leftTab:"_1kG5fSh5j7HcCSYKps6oTh",leftTab__active:"_1IuH08t3ULSDQt0OqOGwBK",header:"_2Tookjj2Zw9AgDikbYKJgg",stageContainer:"_3GP4euDRBvjXvD0nK9K-r_",logContainer:"onNirjkuD2zuU4-stBH7e",LogItem:"_1HiUEMOLNi-k2C1DaLfIDk",LogItem__title:"_3Mx5xDEpJpN64NOn7P22sS",logitem_status:"wuI80Au-XWNGZUq-w40Ws",LogItem_content:"lOqJTK8ZNeB12AT7uaQXu",logs_container:"_2Vmm2M8PYlz2yPzrtbc7b"}},1521:function(e,t,r){e.exports={content:"_2GZWNwDmCMaUPILAUqPNQf",totalResult:"NBt7KR1xy9O8EawT3vX2",icon:"bz27u9MKO5MCTXeL-tJVR",otherCards:"_1rtnO6pnjP7HJRT0QGouIq",resultCard:"_15y85A7WyXG0tLQtqF7fax",title:"_2m2EwcYwfu9p6-CO4u0fah",value:"_2fh_XN43MPIMM0V9x1RSAV",unit:"_3bIiaxdLQLPwa4eam-lmZ_",success:"z32XC06-_4svuDjqBkmAz",error:"_1knC_oFwHb1CGb5_vEcgo9",A:"_1SiVVmpdCPUHST_165zQf9",B:"_2PpecDw-rYu6sMpW5eRcV",C:"_1cGPrOnT-V5vNe6maN_jp6",D:"_152jN-TAnzt_qQbaldEyqd",logo:"_25dzrJDupH8xequ0ccrNoC"}},1522:function(e,r,n){"use strict";var a=n(72),o=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=o(n(12)),l=o(n(13)),s=o(n(19)),i=o(n(20)),c=o(n(18)),d=a(n(0)),f=o(n(1)),p=o(n(3)),m=o(n(1170));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var v=function(e){(0,s.default)(n,e);var r=h(n);function n(){return(0,u.default)(this,n),r.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,r=e.errorClass,n=e.className;return d.default.createElement("span",{className:m.default.codeStatus},d.default.createElement("span",{className:(0,p.default)("codequality-icon",m.default[r],n)}),t(r.toUpperCase()))}}]),n}(d.PureComponent);r.default=v,v.propTypes={errorClass:f.default.string,className:f.default.string},v.defaultProps={errorClass:"",className:""}},3528:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(109)),o=r(634),u=n(r(3529)),l=n(r(3530)),s=n(r(3532)),i=n(r(3534)),c=n(r(3540)),d=n(r(3542)),f=n(r(3545)),p=n(r(3546)),m=n(r(3547)),h=n(r(3549)),v="/:workspace/clusters/:cluster/devops/:devops",g=[{path:v,component:u.default,routes:[].concat((0,a.default)(h.default),[{path:v,component:l.default,routes:[{path:"".concat(v,"/pipelines"),component:s.default,exact:!0},{path:"".concat(v,"/cd"),component:i.default,exact:!0},{path:"".concat(v,"/code-repo"),component:c.default,exact:!0},{path:"".concat(v,"/base-info"),component:d.default,exact:!0},{path:"".concat(v,"/roles"),component:f.default,exact:!0},{path:"".concat(v,"/members"),component:p.default,exact:!0},{path:"".concat(v,"/credentials"),component:m.default,exact:!0}]},(0,o.getIndexRoute)({path:"*",to:"/404",exact:!0})])}];t.default=g},3529:function(e,t,r){"use strict";var n=r(6),a=r(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=n(r(49)),l=n(r(50)),s=n(r(12)),i=n(r(13)),c=n(r(19)),d=n(r(20)),f=n(r(18)),p=a(r(0)),m=n(r(191)),h=n(r(73)),v=r(70),g=r(25),y=r(5),E=r(634),b=n(r(788)),S=n(r(637));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var D=(0,v.inject)("rootStore")(o=(0,v.observer)(o=function(e){(0,c.default)(n,e);var t,r=_(n);function n(e){var t;return(0,s.default)(this,n),(t=r.call(this,e)).getHostCluster=(0,l.default)(u.default.mark((function e(){var r,n,a,o;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.clusterStore.fetchList({labelSelector:"cluster-role.kubesphere.io/host=",limit:-1});case 2:a=e.sent,o=(0,y.toJS)(a).filter((function(e){return Object.keys(e.labels).some((function(e){return e.endsWith("cluster-role.kubesphere.io/host")}))})),t.store.hostName=null!==(r=null===(n=o[0])||void 0===n?void 0:n.name)&&void 0!==r?r:"host";case 5:case"end":return e.stop()}}),e)}))),t.store=new b.default,t.clusterStore=new S.default,t}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e){e.match.params.cluster===this.cluster&&e.match.params.devops===this.devops||this.init()}},{key:"init",value:(t=(0,l.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,t={cluster:this.cluster,devops:this.devops,workspace:this.workspace},e.next=4,Promise.all([this.store.fetchDetail(t),this.clusterStore.fetchDetail({name:t.cluster}),this.props.rootStore.getRules({workspace:this.workspace}),this.getHostCluster()]);case 4:return e.next=6,this.props.rootStore.getRules(t);case 6:(0,h.default)(globals,"clusterConfig.".concat(t.cluster),this.clusterStore.detail.configz),globals.app.cacheHistory(this.props.match.url,{type:"DevOps",name:this.devops,aliasName:this.store.data.aliasName,cluster:(0,m.default)(this.clusterStore.detail,["name","aliasName","group","provider"])}),this.store.initializing=!1;case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?p.default.createElement(g.Loading,{className:"ks-page-loading"}):p.default.createElement(v.Provider,{devopsStore:this.store},(0,E.renderRoutes)(this.props.route.routes))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"devops",get:function(){return this.props.match.params.devops}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),n}(p.Component))||o)||o;t.default=D},3530:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,l=a(n(109)),s=a(n(12)),i=a(n(13)),c=a(n(19)),d=a(n(20)),f=a(n(18)),p=o(n(0)),m=n(70),h=n(25),v=a(n(16)),g=n(634),y=n(656),E=a(n(1158)),b=a(n(3531));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var _=(0,m.inject)("rootStore","devopsStore")(u=(0,m.observer)(u=function(e){(0,c.default)(n,e);var r=S(n);function n(){var e;(0,s.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).handleChange=function(t){return e.routing.push(t)},e}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,r=e.match,n=e.route,a=e.location,o=this.props.devopsStore,u=o.initializing,s=o.detail,i=globals.app.getDevOpsNavs({devops:this.devops,cluster:this.cluster,workspace:this.workspace}),c=this.isHostCluster?i:i.map((function(e){var t=e.items.filter((function(e){return"cd"!==e.name&&"code-repo"!==e.name}));return e.items=t,e})),d=(0,v.default)(c,"[0].items[0].name","management"),f="management"===d?"base-info":d;return u?p.default.createElement(h.Loading,{className:b.default.loading}):p.default.createElement("div",{className:"ks-page"},p.default.createElement("div",{className:"ks-page-side"},p.default.createElement(E.default,{type:"devops",title:t("DEVOPS_PROJECT_LOW"),detail:s,onChange:this.handleChange,workspace:this.workspace,cluster:this.cluster}),p.default.createElement(y.Nav,{className:"ks-page-nav",navs:c,location:a,match:r})),p.default.createElement("div",{className:"ks-page-main"},(0,g.renderRoutes)([].concat((0,l.default)(n.routes),[(0,g.getIndexRoute)({path:n.path,to:"".concat(n.path,"/").concat(f),exact:!0})]))))}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"devops",get:function(){return this.props.match.params.devops}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"isHostCluster",get:function(){return!globals.app.isMultiCluster||this.cluster===this.props.devopsStore.hostName}}]),n}(p.Component))||u)||u;r.default=_},3531:function(e,t,r){e.exports={avatar:"_3TKi0Q5Bxum0Ec5SHNSp3Y",bannerIcon:"_3Ije7cozVOJv_F7JGXxSYG",loading:"_3c1wvmQdtajc5fBMugbx8f"}},3532:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(71)),l=a(n(49)),s=a(n(50)),i=a(n(21)),c=a(n(12)),d=a(n(13)),f=a(n(19)),p=a(n(20)),m=a(n(18)),h=a(n(0)),v=n(5),g=a(n(185)),y=a(n(16)),E=a(n(32)),b=a(n(190)),S=n(25),_=a(n(727)),D=a(n(724)),O=a(n(883)),k=a(n(728)),R=a(n(1132)),N=a(n(1036)),P=n(726);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var T=(0,P.withDevOpsList)({store:new O.default,module:"pipelines",name:"PIPELINE",rowKey:"name"})(o=function(e){(0,f.default)(a,e);var r,n=C(a);function a(e){var r;return(0,c.default)(this,a),(r=n.call(this,e)).refreshHandler=function(){r.isRuning?r.getData({silent:!0}):(clearInterval(r.refreshTimer),r.refreshTimer=null)},r.getData=function(e){r.props.store.fetchList(w(w({devops:r.devops,devopsName:r.devopsName},r.props.match.params),e))},r.handleFetch=function(e,t){r.routing.query(e,t)},r.handleCreate=function(){var e=r.props;(0,e.trigger)("pipeline.create",{module:e.module,title:t("CREATE_PIPELINE"),formTemplate:r.formTemplate,devops:r.devops,cluster:r.cluster,noCodeEdit:!0,success:function(){r.getData()}})},r.handleCopy=function(){var e=(0,s.default)(l.default.mark((function e(n){var a,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props.trigger,e.next=3,r.getCRDDetail(n);case 3:o=e.sent,a("pipeline.copy",{title:t("COPY_PIPELINE"),formTemplate:o,devops:r.devops,cluster:r.cluster,success:function(){r.getData()}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getCRDDetail=function(){var e=(0,s.default)(l.default.mark((function e(t){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.store.fetchDetail({cluster:r.cluster,name:t,devops:r.devops});case 2:return(n=(0,g.default)(r.props.store.getPipeLineConfig())).devops=r.devops,n.cluster=r.cluster,n.devopsName=r.devopsName,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleAdvanceEdit=function(){var e=(0,s.default)(l.default.mark((function e(n){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getCRDDetail(n);case 2:a=e.sent,r.props.trigger("pipeline.advance.edit",{title:t("EDIT_PIPELINE"),formTemplate:a,cluster:r.cluster,devops:r.devops,success:function(){r.handleFetch()}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",width:"20%",render:function(e,t){var n="failed"!==t.status&&"successful"!==t.status,a="/".concat(r.workspace,"/clusters/").concat(r.cluster,"/devops/").concat(r.devops,"/pipelines/").concat(encodeURIComponent(t.name)).concat(t.isMultiBranch?"/activity":"");return h.default.createElement(_.default,{to:n?null:a,title:e})}},{title:t("HEALTH"),dataIndex:"weatherScore",width:"30%",isHideable:!0,render:function(e){return h.default.createElement(N.default,{score:e})}},{title:t("BRANCH_COUNT"),dataIndex:"totalNumberOfBranches",width:"25%",isHideable:!0,render:function(e,t){return void 0===e||!t.isMultiBranch&&0===e?"-":e}},{title:t("PULL_REQUEST_COUNT"),dataIndex:"totalNumberOfPullRequests",width:"20%",isHideable:!0,render:function(e){return void 0===e?"-":e}}]},r.handleMultiBatchRun=function(){var e=(0,v.toJS)(r.props.store.list),n=e.selectedRowKeys,a=e.data,o=n.filter((function(e){return a.find((function(t){return t.name===e})).totalNumberOfBranches}));if(!(0,E.default)(o))return S.Notify.error(t("BATCH_RUN_UNSUPPORTED_DESC")),!1;r.props.trigger("pipeline.batch.run",{type:t("PIPELINE"),rowKey:"name",devops:r.devops,cluster:r.cluster,success:function(){setTimeout((function(){r.handleFetch()}),1e3)}})},r.formTemplate={devopsName:r.devopsName,cluster:r.cluster,devops:r.devops,enable_timer_trigger:!1,enable_discarder:!0},r.refreshTimer=setInterval((function(){return r.refreshHandler()}),4e3),r}return(0,d.default)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.match.params,r=e.match.params;t.devops!==r.devops&&this.getData(r)}},{key:"componentDidUpdate",value:function(){var e=this;null===this.refreshTimer&&this.isRuning&&(this.refreshTimer=setInterval((function(){return e.refreshHandler()}),4e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshTimer),this.unsubscribe&&this.unsubscribe()}},{key:"handleRun",value:(r=(0,s.default)(l.default.mark((function e(t){var r,n,a,o,u=this;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.branchNames&&t.branchNames.length,n=t.parameters&&t.parameters.length,a=this.props.trigger,o=this.props.match.params,!r&&!n){e.next=8;break}a("pipeline.params",{devops:this.devops,cluster:this.cluster,branches:t.branchNames,parameters:t.parameters,params:w(w({},o),{},{name:(0,y.default)(t,"name","")}),success:function(e){u.props.rootStore.routing.push("".concat(u.prefix,"/").concat(encodeURIComponent(t.name),"/").concat(e?"branch/".concat(e,"/"):"","activity"))}}),e.next=11;break;case 8:return e.next=10,this.props.store.runBranch({cluster:o.cluster,devops:o.devops,name:t.name});case 10:this.props.rootStore.routing.push("".concat(this.prefix,"/").concat(encodeURIComponent(t.name),"/activity"));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"renderContent",value:function(){var e=this,r=(0,v.toJS)(this.props.store.list),n=r.data,a=void 0===n?[]:n,o=r.filters,u=r.isLoading,l=r.total,s=r.page,i=r.limit,c=r.selectedRowKeys,d=!1===u&&0===l,f=(0,b.default)(o,["limit","page"]),p=this.enabledActions.includes("create")?this.handleCreate:null;if(d&&Object.keys(f).length<=0)return h.default.createElement(R.default,{name:"PIPELINE",action:p?h.default.createElement(S.Button,{onClick:p,type:"control"},t("CREATE")):null});var m={total:l,page:s,limit:i},g={hideCustom:!1,onSelectRowKeys:this.props.store.setSelectRowKeys,selectedRowKeys:c,selectActions:[{key:"run",type:"primary",text:t("RUN"),action:"delete",onClick:this.handleMultiBatchRun},{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return e.props.trigger("pipeline.batch.delete",{type:"PIPELINE",rowKey:"name",devops:e.devops,cluster:e.cluster,success:function(){setTimeout((function(){e.handleFetch()}),1e3)}})}}]};return h.default.createElement(k.default,{rowKey:"name",data:a,columns:this.getColumns(),filters:f,pagination:m,isLoading:u,onFetch:this.handleFetch,onCreate:p,searchType:"name",tableActions:g,itemActions:this.itemActions,enabledActions:this.enabledActions})}},{key:"render",value:function(){var e=this.props.bannerProps;return h.default.createElement(P.ListPage,(0,u.default)({getData:this.getData},this.props),h.default.createElement(D.default,e),this.renderContent())}},{key:"isRuning",get:function(){var e=(0,v.toJS)(this.props.store.list).data.filter((function(e){return"failed"!==e.status&&"successful"!==e.status}));return!(0,E.default)(e)}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"pipelines",cluster:this.props.match.params.cluster,devops:this.devops})}},{key:"devops",get:function(){return this.props.match.params.devops}},{key:"devopsName",get:function(){return this.props.devopsStore.devopsName}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"prefix",get:function(){return this.props.match.url.endsWith("/"),this.props.match.url}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.name;return[{key:"run",icon:"triangle-right",text:t("RUN"),action:"edit",onClick:function(t){e.handleRun(t)}},{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){e.handleAdvanceEdit(t.name)}},{key:"copy",icon:"copy",text:t("COPY"),action:"edit",onClick:function(t){e.handleCopy(t.name)}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){n("resource.delete",{type:a,resource:t.name,detail:{name:t.name,devops:e.devops,cluster:e.cluster},success:function(){e.handleFetch()}})}}]}}]),a}(h.default.Component))||o;r.default=T},3533:function(e,t,r){e.exports={icon:"UDqBeGFlpz310vVgYNlM6",health:"_3uWI1sadR_NQXaSek9qSHz",subhealth:"_1v4YbBQ-ihXlEUsK2GscD5",error:"LJ7DoUDDxsUl0O96H4-rt",nostatus:"_2bafMFLN3XqDxFJ4xf8HTv"}},3534:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,l,s=a(n(71)),i=a(n(49)),c=a(n(21)),d=a(n(50)),f=a(n(12)),p=a(n(13)),m=a(n(19)),h=a(n(20)),v=a(n(18)),g=a(n(74)),y=a(n(0)),E=n(5),b=n(37),S=a(n(727)),_=a(n(724)),D=a(n(1010)),O=a(n(728)),k=a(n(637)),R=o(n(726)),N=n(58),P=a(n(190)),I=a(n(16)),w=a(n(191)),C=a(n(1514)),T=a(n(1169)),L=a(n(3537)),A=a(n(3539));function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,v.default)(e);if(t){var a=(0,v.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,h.default)(this,r)}}var U=(0,R.default)({store:new D.default,module:"cds",name:"CONTINUOUS_DEPLOYMENT",rowKey:"name",authKey:"applications"})((l=function(e){(0,m.default)(n,e);var r=M(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).clusterStore=new k.default,e.getData=function(){var t=(0,d.default)(i.default.mark((function t(r){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.store.fetchList(j(j({devops:e.devops},e.props.match.params),r));case 2:return t.next=4,e.props.store.fetchStatusSummary({devops:e.devops,cluster:e.cluster});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFetch=function(t,r){e.routing.query(t,r)},e.handleCreate=function(){(0,e.props.trigger)("cd.create",{title:t("CREATE_CONTINUOUS_DEPLOYMENT"),devops:e.devops,cluster:e.cluster,module:"cds",noCodeEdit:!0,success:e.getData})},e.handleSync=function(r){var n=e.props;(0,n.trigger)("cd.sync",{module:n.module,title:t("SYNC_RESOURCE"),formTemplate:(0,w.default)(r,"repoSource"),devops:e.devops,cluster:e.cluster,application:r.name,noCodeEdit:!0,success:e.getData})},e.getWeatherStatus=function(){return N.CD_WEATHER_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))},e.getSyncStatus=function(){return N.CD_SYNC_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",width:"20%",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,r){return y.default.createElement(S.default,{to:"".concat(e.prefix,"/").concat(t),desc:r.description,title:(0,b.getDisplayName)(r)})}},{title:t("HEALTH_STATUS"),dataIndex:"healthStatus",width:"20%",filters:e.getWeatherStatus(),filteredValue:a("healthStatus"),search:!0,render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown";return y.default.createElement(T.default,{type:e,label:t(e)})}},{title:t("SYNC_STATUS"),dataIndex:"syncStatus",filters:e.getSyncStatus(),filteredValue:a("syncStatus"),search:!0,width:"20%",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown";return y.default.createElement(T.default,{type:e,label:e})}},{title:t("DEPLOY_LOCATION"),dataIndex:"destination",isHideable:!0,width:"20%",render:function(t){return y.default.createElement(C.default,{destination:t,clustersDetail:e.clusters})}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",sorter:!0,sortOrder:n("updateTime"),isHideable:!0,width:"20%",render:function(e,t){var r=(0,I.default)(t,"status.reconciledAt");return r?(0,b.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss"):"-"}}]},e.handleFilter=function(t){var r=e.props.store.list.filters;Object.keys(r).forEach((function(e){Object.values(t).includes(r[e])&&(t[e]="")})),e.handleFetch(t)},e.renderStatusCard=function(){var t=e.props.store.list.filters,r=e.props.store.summary,n=r.total,a=void 0===n?0:n,o=r.healthStatus,u=void 0===o?{}:o,l=[{title:"HEALTHY",color:"#55BC8A",used:u.Healthy||0,total:a,icon:"/assets/cd/health.svg",label:"HEALTH_STATUS"},{title:"DEGRADED",color:"#CA2621",used:u.Degraded||0,total:a,icon:"/assets/cd/degraded.svg",label:"HEALTH_STATUS"},{title:"PROGRESSING",color:"#F5A623",used:u.Progressing||0,total:a,icon:"/assets/cd/progressing.svg",label:"HEALTH_STATUS"}];return y.default.createElement("div",{className:A.default.warper__item},l.map((function(r){return y.default.createElement(L.default,{item:r,key:r.title,type:"healthStatus",click:e.handleFilter,label:r.label,filters:t})})))},e.renderSyncStatusCard=function(){var t=e.props.store.list.filters,r=e.props.store.summary,n=r.total,a=void 0===n?0:n,o=r.syncStatus,u=void 0===o?{}:o,l=[{title:"SYNCED",color:"#55BC8A",used:u.Synced||0,total:a,icon:"/assets/cd/synced.svg",label:"SYNC_STATUS"},{title:"OUTOFSYNC",filterValue:"OutOfSync",color:"#F5A623",used:u.OutOfSync||0,total:a,icon:"/assets/cd/outofsync.svg",label:"SYNC_STATUS"},{title:"UNKNOWN",color:"#36435C",used:u.Unknown||0,total:a,icon:"/assets/cd/unknown.svg",label:"SYNC_STATUS"}];return y.default.createElement("div",{className:A.default.warper__item},l.map((function(r){return y.default.createElement(L.default,{item:r,type:"syncStatus",key:r.title,click:e.handleFilter,label:r.label,filters:t})})))},e}return(0,p.default)(n,[{key:"componentDidMount",value:function(){this.clusterStore.fetchList({limit:-1}),this.getData()}},{key:"renderContent",value:function(){var e=this,r=this.props.tableProps,n=(0,E.toJS)(this.props.store.list),a=n.filters,o=n.selectedRowKeys,u=n.isLoading,l=n.total,i=(0,P.default)(a,["limit","page"]),c={onSelectRowKeys:this.props.store.setSelectRowKeys,selectedRowKeys:o,selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return e.props.trigger("cd.batch.delete",{rowKey:"name",devops:e.devops,cluster:e.cluster,success:function(){setTimeout((function(){e.handleFetch()}),1e3)}})}}]},d=this.enabledActions.includes("create")?this.handleCreate:null,f=!1===u&&0===l&&Object.keys(i).length<=0;return y.default.createElement(O.default,(0,s.default)({rowKey:"name"},r,{columns:this.getColumns(),onCreate:d,onFetch:this.handleFetch,tableActions:c,itemActions:this.itemActions,isLoading:u,showEmpty:f,enabledActions:this.enabledActions}))}},{key:"render",value:function(){var e=this.props.bannerProps;return y.default.createElement(R.ListPage,(0,s.default)({},this.props,{getData:this.getData}),y.default.createElement(_.default,e),y.default.createElement("div",null,!this.hideSummary&&y.default.createElement("div",{className:A.default.status__container},y.default.createElement("div",{className:A.default.warper__container},this.renderStatusCard()),y.default.createElement("div",{className:A.default.warper__container},this.renderSyncStatusCard())),this.renderContent()))}},{key:"clusters",get:function(){return this.clusterStore.list.data}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"applications",cluster:this.cluster,devops:this.devops})}},{key:"devops",get:function(){return this.props.match.params.devops}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"prefix",get:function(){return this.props.match.url.endsWith("/"),this.props.match.url}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"hideSummary",get:function(){var e=(0,E.toJS)(this.props.store.summary),t=e.healthStatus,r=void 0===t?{}:t,n=e.syncStatus,a=void 0===n?{}:n;return[].concat(Object.values(r)).concat(Object.values(a)).every((function(e){return!e}))}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.routing;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){n("resource.baseinfo.edit",{detail:j(j({},t),{},{cluster:e.cluster}),success:a.query})}},{key:"yaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(t){n("resource.yaml.edit",{detail:j(j({},t),{},{cluster:e.cluster}),success:a.query})}},{key:"sync",icon:"changing-over",text:t("SYNC"),action:"edit",onClick:function(t){e.handleSync(t)}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){n("cd.delete",{type:"CONTINUOUS_DEPLOYMENT",detail:t,cluster:e.cluster,success:a.query})}}]}}]),n}(y.default.Component),(0,g.default)(l.prototype,"clusters",[E.computed],Object.getOwnPropertyDescriptor(l.prototype,"clusters"),l.prototype),u=l))||u;r.default=U},3535:function(e,t,r){e.exports={tags:"rXo5-VrF2SoJPw4YTJ49n"}},3536:function(e,t,r){e.exports={status:"_1i44s-mkio269MZkQooCA-",noBolder:"_1PYdlTizmu4a-7vtA3SGVB",status_icon:"_1Fc4a9R1_fpPTYh8ZZCnsL",synced:"EHypTO3aVqoSZHjqxFeRM",pruneskipped:"_1y3YUdYQhmCrRQEQC3Vbro",outofsync:"_3PatraCDMneKvGdCyDMvqF",syncfailed:"ArN9LRm53CRNjkzXWoe4Y",unknown:"_1KFsPRlIVt0iTX2q-SlIex",healthy:"_38Bn86ot3T09d_CEbksKAi",degraded:"ulbHb6MIg2KuMGDWUcPdF",progressing:"_2LgiBXp2kDTVB1L8CeNBkz",suspended:"TAPJ97Ue7MfgbqW9_GmVG",missing:"_2-RicBgupjxvlNMuDmPIKT"}},3537:function(e,r,n){"use strict";var a=n(72),o=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var r=e.click,n=e.item,a=e.type,o=e.filters,h=(0,s.useState)(!1),v=(0,l.default)(h,2),g=v[0],y=v[1],E=n.title,b=n.color,S=n.filterValue,_=n.used,D=n.total,O=n.icon,k=n.label;return(0,s.useEffect)((function(){(0,f.default)(o)?y(!1):(y(!1),Object.keys(o).forEach((function(e){a===e&&o[e]===(S||(0,p.capitalize)(E))&&y(!0)})))}),[o]),s.default.createElement("div",{className:(0,d.default)(m.default.content,(0,u.default)({},m.default["content--checked"],g)),onClick:function(){y(!g),r((0,u.default)({},a,S||(0,p.capitalize)(E)))}},s.default.createElement("div",{className:m.default.chart},s.default.createElement(i.PieChart,{width:64,height:64,innerRadius:"75%",outerRadius:"115%",data:[{name:"Used",itemStyle:{fill:b},value:_},{name:"Left",itemStyle:{fill:"#0d6c2c12"},value:D-_}]}),s.default.createElement("img",{className:m.default.innerIcon,src:O,alt:""})),s.default.createElement("div",{className:m.default.info},s.default.createElement("p",{className:m.default.label},t("".concat(k))),s.default.createElement(c.Radio,{className:(0,d.default)(m.default.radio,(0,u.default)({},m.default["radio--show"],g)),checked:g}),s.default.createElement("p",{className:m.default.type},t(E)),s.default.createElement("p",{className:m.default.number},s.default.createElement("span",{className:m.default.master},_),"/",s.default.createElement("span",null,D))))};var u=o(n(21)),l=o(n(136)),s=a(n(0)),i=n(735),c=n(25),d=o(n(3)),f=o(n(32)),p=n(37),m=o(n(3538))},3538:function(e,t,r){e.exports={content:"_3rbvLxgxar-1IXEnt7uXsv",info:"_1aKSZORI6fIwi-0XcGTt4g",radio:"_31WiuV5i5qqd7huDXoSta2","content--checked":"_2ck3PC62TuQ0VBCr4wT0Lq",chart:"t9qyn804bLHyqbuqqIVpF",innerIcon:"_1RoP3whI8yVaFftrDDDcGK","radio--show":"_3wu35PWdBZIS8LYSksbZVA",label:"_1MMJ5AoDMc--UUq3xm-ng4",type:"UCNB0wUPam3YH8CCM7lEd",number:"-qfmbebzKsuh_9f9pXzkS",master:"_2OvbKVu7MWU8S_Xmelk71f"}},3539:function(e,t,r){e.exports={status__container:"DSexb7d0T5aof2FHL0GTJ",warper__container:"_3T1AJfVjhTgE_eU2vFnMj1",warper__item:"_1kKcKpGvcV2eck1NGzsmYf"}},3540:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,l=a(n(71)),s=a(n(49)),i=a(n(21)),c=a(n(50)),d=a(n(12)),f=a(n(13)),p=a(n(19)),m=a(n(20)),h=a(n(18)),v=a(n(0)),g=n(5),y=o(n(726)),E=a(n(727)),b=a(n(724)),S=a(n(1080)),_=a(n(728)),D=n(37),O=a(n(190)),k=a(n(3541));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var I=(0,y.default)({store:new S.default,module:"codeRepos",name:"CODE_REPO",rowKey:"name",authKey:"gitrepositories"})(u=function(e){(0,p.default)(n,e);var r=P(n);function n(){var e;(0,d.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).getData=function(){var t=(0,c.default)(s.default.mark((function t(r){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.store.fetchList(N(N({devops:e.devops},e.props.match.params),r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFetch=function(t,r){e.routing.query(t,r)},e.handleCreate=function(){(0,e.props.trigger)("codeRepo.create",{title:t("IMPORT_CODE_REPO"),devops:e.devops,cluster:e.cluster,module:"codeRepos",noCodeEdit:!0,success:e.getData})},e.getColumns=function(){var r=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",width:"20%",sorter:!0,sortOrder:r("name"),search:!0,render:function(e,t){return v.default.createElement(E.default,{className:k.default.avatar,to:"",icon:"bitbucket_server"===t.provider?"bitbucket":t.provider,iconSize:40,desc:t.description,title:(0,D.getDisplayName)(t)})}},{title:t("SOURCE"),dataIndex:"provider",isHideable:!0,width:"20%",render:function(e){return(0,D.capitalize)("bitbucket_server"===e?"bitbucket":e)}},{title:t("CODE_REPOSITORY_ADDRESS"),dataIndex:"repoURL",isHideable:!0,width:"40%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:"20%",render:function(e){return(0,D.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,f.default)(n,[{key:"renderContent",value:function(){var e=this.props.tableProps,t=(0,g.toJS)(this.props.store.list),r=t.filters,n=t.isLoading,a=t.total,o=(0,O.default)(r,["limit","page"]),u=this.enabledActions.includes("create")?this.handleCreate:null,s=!1===n&&0===a&&Object.keys(o).length<=0;return v.default.createElement(_.default,(0,l.default)({rowKey:"name"},e,{columns:this.getColumns(),onCreate:u,onFetch:this.handleFetch,tableActions:{},itemActions:this.itemActions,isLoading:n,showEmpty:s,enabledActions:this.enabledActions,createText:"Import"}))}},{key:"render",value:function(){var e=this.props.bannerProps;return v.default.createElement(y.ListPage,(0,l.default)({getData:this.getData},this.props),v.default.createElement(b.default,e),this.renderContent())}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"gitrepositories",cluster:this.props.match.params.cluster,devops:this.devops})}},{key:"devops",get:function(){return this.props.match.params.devops}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"prefix",get:function(){return this.props.match.url.endsWith("/"),this.props.match.url}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.routing;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(r){n("codeRepo.edit",{title:t("EDIT_CODE_REPO"),devops:e.devops,cluster:e.cluster,module:"codeRepos",detail:r,noCodeEdit:!0,success:e.getData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(t){n("resource.yaml.edit",{detail:N(N({},t),{},{devops:e.devops,cluster:e.cluster}),success:a.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){n("codeRepo.delete",{type:"CODE_REPO",detail:t,devops:e.devops,cluster:e.cluster,success:a.query})}}]}}]),n}(v.default.Component))||u;r.default=I},3541:function(e,t,r){e.exports={avatar:"_2TafwQR5abike0Mb02nAVw"}},3542:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(49)),l=a(n(50)),s=a(n(21)),i=a(n(56)),c=a(n(12)),d=a(n(13)),f=a(n(19)),p=a(n(20)),m=a(n(18)),h=a(n(16)),v=a(n(32)),g=a(n(185)),y=a(n(24)),E=a(n(73)),b=a(n(0)),S=n(276),_=a(n(3)),D=n(5),O=n(70),k=n(25),R=a(n(723)),N=a(n(727)),P=a(n(760)),I=a(n(724)),w=a(n(1132)),C=n(37),T=a(n(3543)),L=n(635),A=a(n(278)),x=a(n(747)),j=a(n(3544));function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var H=(0,O.inject)("rootStore","devopsStore")(o=(0,O.observer)(o=(0,L.trigger)(o=function(e){(0,f.default)(n,e);var r=Y(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=r.call.apply(r,[this].concat(o))).state={showEdit:!1,showDelete:!1,opened:!1},e.roleStore=new x.default,e.memberStore=new A.default,e.hideEdit=function(){e.setState({showEdit:!1})},e.handleEdit=function(r){var n=r.devops,a=(0,i.default)(r,["devops"]);e.store.update({devops:n,cluster:e.cluster,workspace:e.workspace},a,!0).then((function(){e.hideEdit(),k.Notify.success({content:t("UPDATE_SUCCESSFUL")}),e.store.fetchDetail(U({workspace:e.workspace},e.props.match.params))}))},e.hideDelete=function(){e.setState({showDelete:!1})},e.handleDelete=function(){e.store.delete({devops:e.devops,cluster:e.cluster,workspace:e.workspace}).then((function(){e.routing.push("/")}))},e.handleMoreMenuClick=function(t,r){switch(r){case"edit":e.setState({showEdit:!0});break;case"delete":e.setState({showDelete:!0})}},e.handleEditAllowlist=function(){var t;e.trigger("devops.edit.allowlist",{devops:e.devops,store:e.store,cluster:e.cluster,workspace:e.workspace,detail:e.detail,success:(t=(0,l.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchDetail(U({workspace:e.workspace},e.props.match.params));case 2:e.setState({opened:!((0,v.default)(e.detail.sourceRepos)&&(0,v.default)(e.detail.destinations))});case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})})},e.toggle=(0,l.default)(u.default.mark((function t(){var r,n;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.state.opened)){t.next=9;break}return n=(0,h.default)((0,g.default)((0,D.toJS)(e.detail)),"_originData.spec",{}),(0,E.default)(n,"argo.destinations",[]),(0,E.default)(n,"argo.sourceRepos",[]),t.next=7,e.store.editAllowlist(e.store.data,{spec:n});case 7:return t.next=9,e.store.fetchDetail(U({workspace:e.workspace},e.props.match.params));case 9:e.setState({opened:!r});case 10:case"end":return t.stop()}}),t)}))),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.canViewMembers&&this.canViewRoles&&(this.memberStore.fetchList({devops:this.devops,cluster:this.cluster}),this.roleStore.fetchList({devops:this.devops,cluster:this.cluster})),this.setState({opened:!((0,v.default)(this.detail.sourceRepos)&&(0,v.default)(this.detail.destinations))})}},{key:"renderMoreMenu",value:function(){return b.default.createElement(k.Menu,{onClick:this.handleMoreMenuClick},this.enabledItemActions.map((function(e){return b.default.createElement(k.Menu.MenuItem,{key:e.key},b.default.createElement(k.Icon,{name:e.icon})," ",e.text)})))}},{key:"renderBaseInfo",value:function(){var e=this.roleStore.list.total,r=this.memberStore.list.total;return b.default.createElement(R.default,{className:j.default.wrapper,title:t("BASIC_INFORMATION")},b.default.createElement("div",{className:j.default.header},b.default.createElement(k.Icon,{name:"strategy-group",size:40}),b.default.createElement("div",{className:j.default.item},b.default.createElement("div",null,(0,C.getDisplayName)(this.detail)),b.default.createElement("p",null,t("DEVOPS_PROJECT_SCAP"))),b.default.createElement("div",{className:j.default.item},b.default.createElement("div",null,b.default.createElement(S.Link,{to:"/workspaces/".concat(this.workspace)},this.workspace)),b.default.createElement("p",null,t("WORKSPACE"))),b.default.createElement("div",{className:j.default.item},b.default.createElement("div",null,this.detail.creator||"-"),b.default.createElement("p",null,t("CREATOR"))),b.default.createElement("div",{className:j.default.item},b.default.createElement("div",null,(0,C.getLocalTime)(this.detail.createTime).format("YYYY-MM-DD HH:mm:ss")),b.default.createElement("p",null,t("CREATION_TIME"))),!(0,v.default)(this.enabledItemActions)&&b.default.createElement("div",{className:(0,_.default)(j.default.item,"text-right")},b.default.createElement(k.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},b.default.createElement(k.Button,null,t("MANAGE"))))),this.canViewRoles&&this.canViewMembers&&b.default.createElement("div",{className:j.default.content},b.default.createElement("div",{className:j.default.contentItem},b.default.createElement(k.Icon,{name:"role",size:40}),b.default.createElement("div",{className:j.default.item},b.default.createElement("div",null,e),b.default.createElement("p",null,1===e?t("DEVOPS_PROJECT_ROLE_SCAP"):t("DEVOPS_PROJECT_ROLE_PL_SCAP")))),b.default.createElement("div",{className:j.default.contentItem},b.default.createElement(k.Icon,{name:"group",size:40}),b.default.createElement("div",{className:j.default.item},b.default.createElement("div",null,r),b.default.createElement("p",null,1===r?t("DEVOPS_PROJECT_MEMBER_SCAP"):t("DEVOPS_PROJECT_MEMBER_PL_SCAP"))))))}},{key:"renderEmptyCD",value:function(){return b.default.createElement("div",{className:j.default.empty},b.default.createElement(w.default,{name:"ALLOWLIST",module:"allowlists",title:t("EMPTY_ALLOWLIST_TITLE"),action:!(0,v.default)(this.enabledItemActions)&&b.default.createElement(k.Button,{onClick:this.handleEditAllowlist,type:"control"},t("ENABLE_ALLOWLIST"))}))}},{key:"renderItem",value:function(e){var r=this.detail[e];return(0,v.default)(r)?b.default.createElement("div",{className:j.default.item_tag},"sourceRepos"===e?t("CODE_REPOSITORY_NOT_SELECTED"):t("RESOURCE_DEPLOYMENT_LOCATION_NOT_SELECTED")):1===r.length&&r.every((function(e){return(0,y.default)(e)?Object.keys(e).every((function(t){return"*"===e[t]})):"*"===e}))?b.default.createElement("div",{className:j.default.item_tag},"sourceRepos"===e?t("ALL_CODE_REPOSITORIES"):t("ALL_RESOURCE_DEPLOYMENT_LOCATIONS")):"sourceRepos"===e?b.default.createElement("div",{className:j.default.items},this.detail.sourceRepos.map((function(e){return b.default.createElement("div",{key:e,className:j.default.item},"*"===e?t("All"):e)}))):b.default.createElement("div",{className:j.default.items},this.detail.destinations.map((function(e,r){return b.default.createElement("div",{key:r,className:"".concat(j.default.item," ").concat(j.default.item_flex)},b.default.createElement("div",null,b.default.createElement(k.Icon,{name:"cluster",size:20}),b.default.createElement("b",null,"*"===e.name?t("All"):(0,C.inCluster2Default)(e.name)),"*"!==(null==e?void 0:e.name)&&b.default.createElement("span",null,"(",null==e?void 0:e.server,")")),b.default.createElement("div",null,b.default.createElement(k.Icon,{name:"enterprise",size:20}),b.default.createElement("b",null,"*"===(null==e?void 0:e.namespace)?t("All"):null==e?void 0:e.namespace)))})))}},{key:"renderCD",value:function(){var e=this.state.opened;return b.default.createElement(R.default,{className:j.default.wrapper,title:t("CD_ALLOWLIST")},(0,v.default)(this.detail.sourceRepos)&&(0,v.default)(this.detail.destinations)?this.renderEmptyCD():b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:j.default.cd_header},b.default.createElement(N.default,{icon:"allowlist",iconSize:40,title:e?t("ENABLED"):t("DISABLED"),desc:t("CD_ALLOWLIST_SCAP")}),!(0,v.default)(this.enabledItemActions)&&b.default.createElement("div",{className:(0,_.default)(j.default.item,"text-right")},b.default.createElement("div",{className:(0,_.default)(j.default.toggle,e?"":j.default.closed),onClick:this.toggle},b.default.createElement("span",null,e?t("ENABLED"):t("DISABLED")),b.default.createElement("label",{className:j.default.toggleop})),b.default.createElement(k.Button,{onClick:this.handleEditAllowlist},t("EDIT_ALLOWLIST")))),b.default.createElement("div",{className:j.default.content_CD},b.default.createElement("div",{className:j.default.content_item},b.default.createElement("div",{className:j.default.content_item_title},t("CODE_REPO_PL")),this.renderItem("sourceRepos")),b.default.createElement("div",{className:j.default.content_item},b.default.createElement("div",{className:j.default.content_item_title},t("DEPLOYMENT_LOCATION_PL")),this.renderItem("destinations")))))}},{key:"render",value:function(){var e=(0,D.toJS)(this.store).data;return b.default.createElement("div",null,b.default.createElement(I.default,{title:t("BASIC_INFORMATION"),icon:"cdn",description:t("DEVOPS_DESCRIPTION"),module:this.module}),this.renderBaseInfo(),this.isNeedHide?null:this.renderCD(),b.default.createElement(T.default,{detail:e,workspace:this.workspace,visible:this.state.showEdit,onOk:this.handleEdit,onCancel:this.hideEdit,isSubmitting:this.store.isSubmitting}),b.default.createElement(P.default,{detail:e,title:t("DELETE_DEVOPS_PROJECT"),desc:t.html("DELETE_DEVOPS_PROJECT_TIP",{resource:e.name}),resource:e.name,visible:this.state.showDelete,onOk:this.handleDelete,onCancel:this.hideDelete,isSubmitting:this.store.isSubmitting}))}},{key:"isMultiCluster",get:function(){return globals.ksConfig.multicluster}},{key:"clusterVersion",get:function(){return this.isMultiCluster?(0,h.default)(globals,"clusterConfig.".concat(this.cluster,".ksVersion")):(0,h.default)(globals,"ksConfig.ksVersion")}},{key:"isNeedHide",get:function(){return(0,C.compareVersion)(this.clusterVersion,"3.3.0")<0||!this.isHostCluster}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"store",get:function(){return this.props.devopsStore}},{key:"devops",get:function(){return this.props.match.params.devops}},{key:"devopsName",get:function(){return this.store.devopsName}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"isHostCluster",get:function(){return!globals.app.isMultiCluster||this.cluster===this.props.devopsStore.hostName}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"devops-settings",cluster:this.cluster,devops:this.devops})}},{key:"canViewRoles",get:function(){return globals.app.hasPermission({module:"roles",action:"view",cluster:this.cluster,devops:this.devops})}},{key:"canViewMembers",get:function(){return globals.app.hasPermission({module:"members",action:"view",cluster:this.cluster,devops:this.devops})}},{key:"itemActions",get:function(){return[{key:"edit",icon:"pen",action:"edit",text:t("EDIT")},{key:"delete",icon:"trash",action:"delete",text:t("DELETE")}]}},{key:"enabledItemActions",get:function(){var e=this;return this.itemActions.filter((function(t){return!t.action||e.enabledActions.includes(t.action)}))}},{key:"detail",get:function(){return this.store.data}}]),n}(b.default.Component))||o)||o)||o;r.default=H},3543:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l,s=a(n(12)),i=a(n(13)),c=a(n(19)),d=a(n(20)),f=a(n(18)),p=a(n(16)),m=a(n(0)),h=a(n(1)),v=n(70),g=n(25),y=a(n(274)),E=n(58),b=a(n(278));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var _=(0,v.observer)((l=u=function(e){(0,c.default)(n,e);var r=S(n);function n(e){var t;return(0,s.default)(this,n),(t=r.call(this,e)).handleOk=function(e){(0,t.props.onOk)(e)},t.form=m.default.createRef(),t.store=new b.default,e.workspace&&t.store.fetchList({limit:1/0,workspace:e.workspace}),t}return(0,i.default)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.detail,n=t.workspace;r.name&&r.name!==(0,p.default)(e,"detail.name")&&this.store.fetchList({limit:1/0,workspace:n})}},{key:"render",value:function(){var e=this.props,r=e.detail,n=e.visible,a=e.onCancel,o=e.isSubmitting;return m.default.createElement(y.default.Form,{width:691,title:t("EDIT_INFORMATION"),icon:"pen",data:r,onOk:this.handleOk,onCancel:a,isSubmitting:o,visible:n},m.default.createElement(g.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:E.PATTERN_NAME,message:t("PATTERN_NAME_INVALID_TIP")}]},m.default.createElement(g.Input,{name:"name",disabled:!0})),m.default.createElement(g.Form.Item,{label:t("CREATOR"),desc:t("DEVOPS_ADMIN_DESC")},m.default.createElement(g.Input,{name:"creator",disabled:!0})),m.default.createElement(g.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},m.default.createElement(g.Input,{name:"aliasName",maxLength:63})),m.default.createElement(g.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},m.default.createElement(g.TextArea,{maxLength:256,name:"description"})))}}]),n}(m.default.Component),u.propTypes={detail:h.default.object,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func,isSubmitting:h.default.bool},u.defaultProps={visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}},o=l))||o;r.default=_},3544:function(e,t,r){e.exports={wrapper:"AvCNLmmummi1Y-_fnmHT2",single:"IvKIl2CA6fNLZpCp933UF",header:"_14DZlEuo1ZgK7eEn1jYkZ4",item:"_14a_u6eMcfCaM7McJoNQoN",cd_header:"_1-HmRYSXwmLf9pyHqaOK4W",toggle:"_1JPgnoBVYniMYLIGiwcz4W",toggleop:"_3YEPQk84WwYod_EZNfCddB",closed:"_2mlb46kkbTNzmeDWLYCIQA",content:"_1wMCCc2addUq6t0pcJXL7t",contentItem:"_3jG2mXohN1BEiII1FG6II0",content_CD:"_1VxF39p6qu0AlIQY0c70tx",content_item:"_2MHVaF4a2B8MYul7bGrfPh",content_item_title:"_1z31nQgJnfhe3yn2Yb4eEU",content_item_desc:"_3aGTPi0vNt-0rDXAjvFjeE",item_tag:"_3kwg6-inB6vL4ahscTjgTe",items:"_3fjVCs4pUKQCZHYz5MtZR2",item_flex:"_1lwASLSidQdgvVHhiSXmbt",empty:"_1jddbgu4u8A5t2kjJ_5Jyf"}},3545:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,l=a(n(71)),s=a(n(21)),i=a(n(12)),c=a(n(13)),d=a(n(19)),f=a(n(20)),p=a(n(18)),m=a(n(0)),h=n(5),v=a(n(727)),g=a(n(724)),y=o(n(726)),E=a(n(728)),b=n(37),S=n(58),_=a(n(747));function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var R=(0,y.default)({store:new _.default,module:"roles",name:"DEVOPS_PROJECT_ROLE",injectStores:["rootStore","devopsStore"]})(u=function(e){(0,d.default)(n,e);var r=k(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).showAction=function(e){return!globals.config.presetDevOpsRoles.includes(e.name)},e.getData=function(t){var r=Object.assign({},t);e.props.store.fetchList(O({devops:e.devops,cluster:e.cluster},r))},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(t){return m.default.createElement(v.default,{icon:S.ICON_TYPES[a],title:t,to:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("DESCRIPTION"),key:"description",dataIndex:"description",isHideable:!0,width:"40%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){return e.props.trigger("role.create",{module:"devopsroles",devops:e.devops,namespace:e.devops,cluster:e.cluster,roleTemplates:(0,h.toJS)(e.props.store.roleTemplates.data),success:e.getData})},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.props.store.fetchRoleTemplates({devops:this.devops,cluster:this.cluster})}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps;return m.default.createElement(y.ListPage,(0,l.default)({},this.props,{getData:this.getData,noWatch:!0}),m.default.createElement(g.default,(0,l.default)({},r,{tabs:this.tabs,description:t("DEVOPS_PROJECT_ROLES_DESC")})),m.default.createElement(E.default,(0,l.default)({},n,{enabledActions:this.enabledActions,emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"devops",get:function(){return this.props.devopsStore.devops}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"roles",devops:this.devops,cluster:this.cluster})}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.routing,a=r.trigger,o=r.store,u=r.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.baseinfo.edit",{detail:e,success:n.query})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:this.showAction,onClick:function(e){return a("role.edit",{module:"devopsroles",detail:e,roleTemplates:(0,h.toJS)(o.roleTemplates.data),success:n.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return a("role.delete",{detail:t,type:u,namespace:e.devops,cluster:e.cluster,success:n.query})}}]}},{key:"tableActions",get:function(){return O(O({},this.props.tableProps.tableActions),{},{onCreate:this.showCreate,selectActions:[]})}},{key:"emptyProps",get:function(){return{desc:t("DEVOPS_PROJECT_ROLE_EMPTY_DESC")}}}]),n}(m.default.Component))||u;r.default=R},3546:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,l=a(n(71)),s=a(n(21)),i=a(n(12)),c=a(n(13)),d=a(n(19)),f=a(n(20)),p=a(n(18)),m=a(n(0)),h=n(5),v=a(n(727)),g=a(n(729)),y=a(n(724)),E=o(n(726)),b=a(n(728)),S=n(37),_=a(n(278)),D=a(n(747));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var N=(0,E.default)({store:new _.default,module:"users",name:"DEVOPS_PROJECT_MEMBER",rowKey:"username",injectStores:["rootStore","devopsStore"]})(u=function(e){(0,d.default)(n,e);var r=R(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).roleStore=new D.default,e.getData=function(t){var r=Object.assign({},t);e.props.store.fetchList(k({devops:e.devops,cluster:e.cluster},r))},e.getColumns=function(){return[{title:t("NAME"),dataIndex:"username",sorter:!0,render:function(e,t){return m.default.createElement(v.default,{avatar:t.avatar_url||"/assets/default-user.svg",title:e,desc:t.email||"-",noLink:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"19%",render:function(e){return m.default.createElement(g.default,{type:e,name:e?t("USER_".concat(e.toUpperCase())):""})}},{title:t("ROLE"),dataIndex:"role",isHideable:!0,width:"19%"},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",isHideable:!0,width:150,render:function(e){return m.default.createElement("p",null,e?(0,S.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET"))}}]},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.canViewRoles&&this.roleStore.fetchList({devops:this.devops,cluster:this.cluster,limit:-1})}},{key:"showAction",value:function(e){return globals.user.username!==e.name}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps;return m.default.createElement(E.ListPage,(0,l.default)({},this.props,{getData:this.getData,noWatch:!0}),m.default.createElement(y.default,(0,l.default)({},r,{tabs:this.tabs,description:t("DEVOPS_PROJECT_MEM_DESC")})),m.default.createElement(b.default,(0,l.default)({},n,{searchType:"name",enabledActions:this.enabledActions,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns()})))}},{key:"canViewRoles",get:function(){return globals.app.hasPermission(k(k({},this.props.match.params),{},{devops:this.devops,module:"roles",action:"view"}))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"devops",get:function(){return this.props.devopsStore.devops}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"tips",get:function(){return[{title:t("HOW_TO_INVITE_MEMBER_Q"),description:t("HOW_TO_INVITE_MEMBER_A")}]}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"members",devops:this.devops,cluster:this.cluster})}},{key:"itemActions",get:function(){var e=this,r=this.props.trigger;return[{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",show:this.showAction,onClick:function(t){return r("member.edit",k(k({detail:t},e.props.match.params),{},{devops:e.devops,roles:(0,h.toJS)(e.roleStore.list.data),role:t.role,success:e.getData}))}},{key:"delete",icon:"trash",text:t("REMOVE"),action:"delete",show:this.showAction,onClick:function(t){return r("member.remove",k({detail:t,devops:e.devops,success:e.getData},e.props.match.params))}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.trigger;return k(k({},r.tableProps.tableActions),{},{actions:[{key:"invite",type:"control",text:t("INVITE"),action:"create",onClick:function(){return n("member.invite",{devops:e.devops,workspace:e.workspace,cluster:e.cluster,roles:(0,h.toJS)(e.roleStore.list.data),roleModule:e.roleStore.module,title:t("INVITE_MEMBER"),desc:t("INVITE_MEMBER_DESC_DEVOPS"),searchPlaceholder:t("SEARCH_BY_NAME"),success:e.getData})}}],selectActions:[{key:"delete",type:"danger",text:t("REMOVE"),action:"delete",onClick:function(){return n("member.remove.batch",k({success:e.getData,devops:e.devops},e.props.match.params))}}],getCheckboxProps:function(t){return{disabled:!e.showAction(t),name:t.name}},emptyProps:{desc:t("INVITE_MEMBER_DESC_DEVOPS")}})}}]),n}(m.default.Component))||u;r.default=N},3547:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(21)),l=a(n(12)),s=a(n(13)),i=a(n(19)),c=a(n(20)),d=a(n(18)),f=a(n(0)),p=n(70),m=n(5),h=n(279),v=a(n(190)),g=a(n(941)),y=n(635),E=n(37),b=a(n(727)),S=a(n(724)),_=a(n(835)),D=a(n(3548));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var N=(0,p.inject)("rootStore","devopsStore")(o=(0,p.observer)(o=(0,y.trigger)(o=function(e){(0,i.default)(n,e);var r=R(n);function n(e){var a;return(0,l.default)(this,n),(a=r.call(this,e)).handleFetch=function(e,t){a.routing.query(e,t)},a.handleCreate=function(){var e=a.props.match.params,t=e.devops,r=e.cluster;a.trigger("devops.credential.create",{devops:t,cluster:r,success:function(){a.getData()}})},a.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",width:"35%",render:function(e){var t="".concat(a.prefix,"/").concat(encodeURIComponent(e));return f.default.createElement(b.default,{to:a.isRuning?null:t,title:e})}},{title:t("TYPE"),dataIndex:"type",width:"25%",render:function(e){return t("CREDENTIAL_TYPE_".concat(e.toUpperCase()))}},{title:t("DESCRIPTION"),dataIndex:"description",render:function(e){return e},width:"25%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:"20%",render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},a.store=new g.default,a.formTemplate={},a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=this.routing.history.subscribe((function(t){var r=(0,h.parse)(t.search.slice(1)),n=e.props.match.params,a=n.devops,o=n.cluster;e.store.fetchList(k({devops:a,cluster:o},r))}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"getData",value:function(){var e=this.props.match.params,t=e.devops,r=e.cluster,n=(0,h.parse)(location.search.slice(1));this.store.fetchList(k({devops:t,cluster:r},n))}},{key:"renderContent",value:function(){var e=(0,m.toJS)(this.store.list),t=e.data,r=e.filters,n=e.isLoading,a=e.total,o=e.page,u=e.limit,l=this.enabledActions.includes("create")?this.handleCreate:null,s=(0,v.default)(r,["page","limit","sortBy"]),i={total:a,page:o,limit:u};return f.default.createElement(_.default,{data:t,columns:this.getColumns(),filters:s,pagination:i,rowKey:"uid",isLoading:n,onFetch:this.handleFetch,onCreate:l,searchType:"name",module:this.module,name:this.name})}},{key:"render",value:function(){return f.default.createElement("div",{className:D.default.wrapper},f.default.createElement(S.default,{title:t("CREDENTIAL_PL"),icon:"key",description:t("DEVOPS_CREDENTIALS_DESC"),module:this.module}),this.renderContent())}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"credentials",cluster:this.props.match.params.cluster,devops:this.props.devopsStore.devops})}},{key:"prefix",get:function(){return this.props.match.url.endsWith("/")?this.props.match.url.slice(0,-1):this.props.match.url}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"module",get:function(){return"cridentials"}},{key:"name",get:function(){return"CREDENTIAL"}}]),n}(f.default.Component))||o)||o)||o;r.default=N},3548:function(e,t,r){e.exports={desc:"_2Nbe5kqKE56uXkL5hPraaF",narrowItem:"_9SO50PB09H5PAtUZqbsTX"}},3549:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(3550)),o=n(r(3552)),u=n(r(3557)),l=n(r(3592)),s="/:workspace/clusters/:cluster/devops",i=[{path:"".concat(s,"/:devops/pipelines/:name"),component:u.default},{path:"".concat(s,"/:devops/credentials/:credential_id"),component:o.default},{path:"".concat(s,"/:devops/cd/:cd"),component:l.default},{path:"".concat(s,"/:namespace/roles/:name"),component:a.default}];t.default=i},3550:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(71)),l=a(n(12)),s=a(n(13)),i=a(n(19)),c=a(n(20)),d=a(n(18)),f=a(n(0)),p=n(5),m=n(70),h=a(n(32)),v=n(25),g=n(37),y=n(635),E=a(n(747)),b=a(n(815)),S=a(n(3551));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var D=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,y.trigger)(o=function(e){(0,i.default)(n,e);var r=_(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new E.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){var r=e.store.detail;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("role.edit",{module:"devopsroles",detail:(0,p.toJS)(e.store.detail),roleTemplates:(0,p.toJS)(e.store.roleTemplates.data),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("role.delete",{detail:r,type:e.name,cluster:e.props.match.params.cluster,namespace:e.props.match.params.namespace,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail),n=e.props.match.params,a=n.cluster,o=n.namespace;if(!(0,h.default)(r))return[{name:t("CLUSTER"),value:a},{name:t("DEVOPS_PROJECT"),value:o},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,g.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(),this.store.fetchRoleTemplates(this.props.match.params)}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(v.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("DEVOPS_PROJECT_ROLE_PL"),url:this.listUrl}]};return f.default.createElement(b.default,(0,u.default)({stores:e},r,{routes:(0,S.default)(this.props.match.path)}))}},{key:"module",get:function(){return"roles"}},{key:"name",get:function(){return"DEVOPS_PROJECT_ROLE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,n=e.namespace;return"/".concat(t,"/clusters/").concat(r,"/devops/").concat(n,"/").concat(this.module)}},{key:"showEdit",get:function(){var e=this.props.match.params.name;return!globals.config.presetDevOpsRoles.includes(e)}}]),n}(f.default.Component))||o)||o)||o;r.default=D},3551:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(965)),u=n(r(966));t.default=function(e){return[{path:"".concat(e,"/authorizations"),title:"PERMISSION_PL",component:o.default,exact:!0},{path:"".concat(e,"/users"),title:"AUTHORIZED_USER_PL",component:u.default,exact:!0},(0,a.getIndexRoute)({path:e,to:"".concat(e,"/authorizations"),exact:!0})]}},3552:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(71)),l=a(n(21)),s=a(n(12)),i=a(n(13)),c=a(n(19)),d=a(n(20)),f=a(n(18)),p=a(n(0)),m=n(70),h=a(n(941)),v=a(n(818)),g=a(n(972)),y=n(635),E=a(n(16)),b=a(n(3554));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var O=(0,m.inject)("rootStore","devopsStore")(o=(0,m.observer)(o=(0,y.trigger)(o=function(e){(0,c.default)(n,e);var r=D(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).state={showEdit:!1,showYamlEdit:!1,deleteModule:!1,isLoading:!0},e.refreshTimer=setInterval((function(){return e.refreshHandler()}),4e3),e.store=new h.default(e.module),e.refreshHandler=function(){e.isRuning?e.store.fetchDetail():(clearInterval(e.refreshTimer),e.refreshTimer=null)},e.fetchData=function(){var t=e.props.match.params;e.store.setParams(t),e.store.fetchDetail()},e.getOperations=function(){return[{key:"edit",type:"control",text:t("EDIT"),action:"edit",onClick:function(){e.trigger("devops.credential.edit",{title:t("Edit Credential"),formTemplate:e.store.detail,cluster:e.cluster,devops:e.devops,isEditMode:!0,success:function(){e.store.fetchDetail()}})}},{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){e.trigger("resource.delete",{type:"CREDENTIAL",detail:e.store.detail,success:function(){var t=e.props.match.params,r=t.devops,n=t.workspace,a=t.cluster;e.routing.push("/".concat(n,"/clusters/").concat(a,"/devops/").concat(r,"/").concat(e.module))}})}}]},e.getPipelineStatus=function(e){return _({},{failed:{type:"failure",label:t("FAILED")},pending:{type:"running",label:t("RUNNING")},working:{type:"running",label:t("RUNNING")},successful:{type:"success",label:t("SUCCESSFUL")}}[e])},e.getAttrs=function(){var r=e.store.detail,n=(0,E.default)(r,'annotations["credential.devops.kubesphere.io/syncstatus"]');return[{name:t("TYPE"),value:t(r.type)},{name:t("DESCRIPTION"),value:r.description},{name:t("SYNC_STATUS"),value:p.default.createElement(v.default,e.getPipelineStatus(n))}]},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(){var e=this;null===this.refreshTimer&&this.isRuning&&(this.refreshTimer=setInterval((function(){return e.refreshHandler()}),4e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshTimer)}},{key:"render",value:function(){var e=this.store.detail,r={detailStore:this.store},n={module:this.module,name:e.id,desc:e.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CREDENTIAL_PL"),url:this.listUrl}]};return p.default.createElement(g.default,(0,u.default)({routes:b.default},n,{stores:r}))}},{key:"module",get:function(){return"credentials"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.devops,n=e.cluster;return"/".concat(t,"/clusters/").concat(n,"/devops/").concat(r,"/credentials")}},{key:"devops",get:function(){return this.props.match.params.devops}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"isRuning",get:function(){var e=this.store.detail,t=(0,E.default)(e,'annotations["credential.devops.kubesphere.io/syncstatus"]');return"pending"===t||"working"===t}}]),n}(p.default.Component))||o)||o)||o;r.default=O},3553:function(e,t,r){e.exports={queued:"_3se7nCtPLY6n0pkWGH_lYi",running:"_3G5m5sJ-coNDKwgZtZlkO5",rotate:"_3n_f3D8x6uIUF6Yh1gj3D",warning:"-fgozp6KbnCWsbI1KcZed",unstable:"_1CwDF8qY2OOhdQbKbGlKRN",failure:"_3RqPGj6-roxFkDQJQFe-kA",error:"_36tdcxdV2LsY3perjvtUlL",aborted:"_1hJsxFgNQmx8-m-TRAk81-",nostatus:"_1_ElD-OOp8geasJyoMh252",success:"_1kNC2aetySWqUnFNDJNoSz",paused:"_3ny_p1tgooD5iQ4tI8cz9L"}},3554:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(3555)),u=n(r(3556)),l="/:workspace/clusters/:cluster/devops/:devops/credentials/:credential_id",s=[{path:"".concat(l,"/detail"),title:"DETAILS",component:o.default,exact:!0},{path:"".concat(l,"/activity"),title:"EVENT_PL",component:u.default,exact:!0},(0,a.getIndexRoute)({path:l,to:"".concat(l,"/detail"),exact:!0})];t.default=s},3555:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l,s=a(n(12)),i=a(n(13)),c=a(n(19)),d=a(n(20)),f=a(n(18)),p=a(n(0)),m=a(n(1)),h=n(70),v=n(25),g=a(n(741)),y=a(n(1515));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var b=(0,h.inject)("detailStore")(o=(0,h.observer)((l=u=function(e){(0,c.default)(n,e);var r=E(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).getColumns=function(){return[{title:t("NAME"),dataIndex:"name",width:"50%"},{title:t("RECORD"),dataIndex:"record",width:"50%"}]},e}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props.detailStore.detail;return p.default.createElement(g.default,{title:t("CREDENTIAL")},p.default.createElement("div",{className:y.default.card_content},p.default.createElement("div",{className:y.default.icon},p.default.createElement(v.Icon,{name:"key",size:40})),p.default.createElement("div",{className:y.default.info},p.default.createElement("div",{className:y.default.name},e.id||"-"),p.default.createElement("div",{className:y.default.desc},t("TYPE_VALUE",{value:t(e.type&&"CREDENTIAL_TYPE_".concat(e.type.toUpperCase()))})))))}}]),n}(p.default.Component),u.propTypes={data:m.default.array,loading:m.default.bool},o=l))||o)||o;r.default=b},3556:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l,s=a(n(12)),i=a(n(13)),c=a(n(19)),d=a(n(20)),f=a(n(18)),p=a(n(0)),m=n(276),h=n(70),v=a(n(16)),g=n(5),y=a(n(1)),E=n(25),b=a(n(741)),S=a(n(1515));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var D=(0,h.inject)("detailStore")(o=(0,h.observer)((l=u=function(e){(0,c.default)(n,e);var r=_(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).getColumns=function(){return[{title:t("NAME"),dataIndex:"name",width:"50%"},{title:t("RECORD"),width:"50%",render:function(t){if(t.ranges){var r=t.name.split("/"),n="/".concat(e.workspace,"/clusters/").concat(e.cluster,"/devops/").concat(r[0],"/pipelines/").concat(r[1]).concat(r[2]?"/branch/".concat(r[2]):"","/activity");return p.default.createElement("span",null,t.ranges.ranges.map((function(e){return p.default.createElement(m.Link,{to:n,key:"".concat(e.start).concat(e.end)},"#",e.start,"-#",e.end,"")})))}return"-"}}]},e}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props.detailStore,r=e.usage,n=e.isLoading;return p.default.createElement(b.default,{title:t("EVENT_PL")},p.default.createElement(E.Table,{className:S.default.table,dataSource:(0,g.toJS)((0,v.default)(r,"fingerprint.usage",[]))||[],rowKey:"name",columns:this.getColumns(),loading:n}))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"workspace",get:function(){return this.props.match.params.workspace}}]),n}(p.default.Component),u.propTypes={data:y.default.array,loading:y.default.bool},o=l))||o)||o;r.default=D},3557:function(e,t,r){"use strict";var n=r(6),a=r(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,u=n(r(49)),l=n(r(50)),s=n(r(12)),i=n(r(13)),c=n(r(19)),d=n(r(20)),f=n(r(18)),p=a(r(0)),m=r(70),h=r(25),v=r(634),g=n(r(883)),y=n(r(3558));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var b=(0,m.inject)("rootStore","devopsStore")(o=(0,m.observer)(o=function(e){(0,c.default)(n,e);var t,r=E(n);function n(e){var t;return(0,s.default)(this,n),(t=r.call(this,e)).store=new g.default,t.init(e.match.params),t}return(0,i.default)(n,[{key:"init",value:(t=(0,l.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,Promise.all([this.props.devopsStore.fetchDetail(t),this.store.fetchDetail(t),this.props.rootStore.getRules({workspace:t.workspace})]);case 3:return e.next=5,this.props.rootStore.getRules({cluster:t.cluster,workspace:t.workspace,devops:t.devops});case 5:this.store.initializing=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?p.default.createElement(h.Loading,{className:"ks-page-loading"}):p.default.createElement(m.Provider,{pipelineStore:this.store},(0,v.renderRoutes)(y.default))}}]),n}(p.Component))||o)||o;t.default=b},3558:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(3559)),u=n(r(3561)),l=n(r(3562)),s=r(3563),i="/:workspace/clusters/:cluster/devops/:devops/pipelines/:name",c="".concat(i,"/branch/:branch"),d="".concat(c,"/run/:runName"),f="".concat(i,"/run/:runName"),p=[{name:"pipeline",title:"TASK_STATUS",component:s.Pipeline},{name:"code-quality",title:"CODE_CHECK",component:s.CodeQuality},{name:"activity",title:"RUN_RECORDS",component:s.Activity},{name:"branch",title:"BRANCH_PL",component:s.Branch},{name:"pull-request",title:"PULL_REQUEST_PL",component:s.PullRequest}],m=[{name:"activity",title:"RUN_RECORDS",component:s.Activity},{name:"code-quality",title:"CODE_CHECK",component:s.CodeQuality}],h=[{name:"task-status",title:"TASK_STATUS",component:s.TaskStatus},{name:"commit",title:"COMMIT_PL",component:s.Commit},{name:"artifacts",title:"ARTIFACT_PL",component:s.Artifacts},{name:"events",title:"EVENT_PL",component:s.Events}],v=[{path:d,component:l.default,routes:(0,a.getChildRoutes)(h,d)},{path:f,component:l.default,routes:(0,a.getChildRoutes)(h,f)},{path:c,component:u.default,routes:(0,a.getChildRoutes)(m,c)},{path:i,component:o.default,routes:(0,a.getChildRoutes)(p,i)}];t.default=v},3559:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(71)),l=a(n(109)),s=a(n(21)),i=a(n(49)),c=a(n(50)),d=a(n(12)),f=a(n(13)),p=a(n(19)),m=a(n(20)),h=a(n(18)),v=a(n(0)),g=n(5),y=n(70),E=a(n(137)),b=a(n(16)),S=a(n(32)),_=a(n(291)),D=a(n(23)),O=a(n(295)),k=n(25),R=a(n(818)),N=a(n(1516)),P=a(n(972)),I=n(289),w=n(635),C=a(n(1517));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}n(1518);var x=(0,y.inject)("rootStore","devopsStore","pipelineStore")(o=(0,y.observer)(o=(0,w.trigger)(o=function(e){(0,p.default)(n,e);var r=A(n);function n(){var e;(0,d.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).sonarqubeStore=new N.default,e.state={formTemplate:e.store.pipeLineConfig},e.module="pipelines",e.fetchData=(0,c.default)(i.default.mark((function t(){var r,n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,n=e.store.detail,t.next=4,e.store.fetchDetail(r);case 4:e.setBranchNames((0,g.toJS)(n.branchNames),r),e.getPipeLineConfig(),e.getSonarqube();case 7:case"end":return t.stop()}}),t)}))),e.getPipeLineConfig=(0,c.default)(i.default.mark((function t(){var r,n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.getPipeLineConfig();case 3:(n=t.sent).devops=r.devops,n.cluster=r.cluster,n.devopsName=e.props.devopsStore.devopsName,e.setState({formTemplate:n});case 8:case"end":return t.stop()}}),t)}))),e.setBranchNames=function(e,t){(0,D.default)(e)&&!(0,S.default)(e)&&(t.branch=e[0])},e.getSonarqube=function(){if((0,b.default)(globals,"config.devops.sonarqubeURL")){var t=e.props.match.params;e.sonarqubeStore.fetchDetail(t)}},e.getUpTime=function(){var t=e.store.activityList,r=(0,b.default)((0,g.toJS)(t.data),"[0].startTime","");return r?(0,E.default)(r).format("YYYY-MM-DD HH:mm:ss"):"-"},e.fetchPipelineConfig=(0,c.default)(i.default.mark((function t(){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.fetchDetail(L(L({},r),{},{isSilent:!0}));case 3:return t.next=5,e.getPipeLineConfig();case 5:case"end":return t.stop()}}),t)}))),e.getOperations=function(){var r,n=(0,g.toJS)(e.store).detail,a=e.props.match.params,o=a.devops,u=a.cluster,s=a.workspace,d=a.name;return[{key:"edit",type:"control",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("pipeline.edit",{devops:o,cluster:u,formTemplate:e.state.formTemplate,success:e.fetchData,handleScanRepository:e.handleScanRepository})}},{key:"editConfig",type:"control",text:t("EDIT_SETTINGS"),action:"edit",onClick:(r=(0,c.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPipelineConfig();case 2:e.trigger("pipeline.advance.edit",{devops:o,cluster:u,formTemplate:e.state.formTemplate,success:e.fetchData,handleScanRepository:e.handleScanRepository});case 3:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}].concat((0,l.default)(n.isMultiBranch?[{key:"scan",text:t("SCAN_REPOSITORY"),action:"edit",onClick:e.handleScanRepository},{key:"scanLogs",text:t("VIEW_SCAN_LOGS"),action:"edit",onClick:function(){e.trigger("pipeline.scanRepositoryLogs",{params:{devops:o,cluster:u,workspace:s,name:d},handleScanRepository:e.handleScanRepository})}}]:[]),[{key:"delete",text:t("DELETE"),action:"delete",onClick:function(){e.trigger("resource.delete",{devops:o,cluster:u,type:e.name,detail:{devops:o,cluster:u,name:e.store.detail.name},success:function(){e.routing.push("/".concat(s,"/clusters/").concat(u,"/devops/").concat(o,"/pipelines"))}})}}])},e.getCurrentState=function(){var t=e.store,r=t.activityList,n=t.branchList,a=t.pullRequestList,o={activity:(0,b.default)((0,g.toJS)(r),"data[0]",{}),branch:(0,b.default)((0,g.toJS)(n),"data[0].latestRun",{}),"pull-request":(0,b.default)((0,g.toJS)(a),"data[0].latestRun",{})};return o[(0,O.default)(e.props.location.pathname.split("/"))]||o.activity},e.getPipelineStatus=function(e){return L({},{failed:{type:"failure",label:t("FAILED")},pending:{type:"running",label:t("RUNNING")},working:{type:"running",label:t("RUNNING")},successful:{type:"success",label:t("SUCCESSFUL")}}[e])},e.getAttrs=function(){var r=e.props.devopsStore.devopsName,n=(0,b.default)(e.store.pipelineConfig,'metadata.annotations["pipeline.devops.kubesphere.io/syncstatus"]');return[{name:t("DEVOPS_PROJECT"),value:r},{name:t("TASK_STATUS"),value:v.default.createElement(R.default,(0,I.getPipelineStatus)(e.getCurrentState()))},{name:t("SYNC_STATUS"),value:v.default.createElement(R.default,e.getPipelineStatus(n))},{name:t("UPDATE_TIME_TCAP"),value:e.getUpTime()}]},e.handleScanRepository=(0,c.default)(i.default.mark((function r(){var n,a;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.props.match.params,a=e.store.detail,r.next=4,e.store.scanRepository({devops:n.devops,name:a.name,cluster:n.cluster});case 4:k.Notify.success({content:t("SCAN_REPO_SUCCESSFUL")}),e.store.fetchDetail(n);case 6:case"end":return r.stop()}}),r)}))),e.renderNav=function(){return v.default.createElement(C.default,{sonarqubeStore:e.sonarqubeStore,detailStore:e.store,route:e.props.route,match:e.props.match})},e}return(0,f.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=this.store.detail;this.setBranchNames((0,g.toJS)(t.branchNames),e),this.getPipeLineConfig(),this.getSonarqube()}},{key:"render",value:function(){var e=this,r={detailStore:this.store,sonarqubeStore:this.sonarqubeStore},n=this.getOperations().filter((function(t){return e.enabledActions.includes(t.action)})),a=this.state.formTemplate,o=(0,_.default)(a,"pipeline")?"pipeline.description":"multi_branch_pipeline.description",l=(0,b.default)(a,o,"-"),s=this.props.match.params,i=s.devops,c=s.cluster,d=s.workspace,f={module:this.module,name:(0,b.default)(this.store.detail,"name"),desc:l,operations:n,attrs:this.getAttrs(),labels:this.store.detail.labels,breadcrumbs:[{label:t("PIPELINE_PL"),url:"/".concat(d,"/clusters/").concat(c,"/devops/").concat(i,"/pipelines")}]};return v.default.createElement(P.default,(0,u.default)({routes:this.props.route.routes,stores:r,nav:this.renderNav()},f))}},{key:"store",get:function(){return this.props.pipelineStore}},{key:"name",get:function(){return"PIPELINE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,r=e.devops;return globals.app.getActions({module:this.module,cluster:t,devops:r})}}]),n}(v.default.Component))||o)||o)||o;r.default=x},3560:function(e,t,r){e.exports={baseInfo:"_3HQJmf6iSZPlK8nYquzZhi",baseInfo__item:"_21f4U9zLDoThPP1XVcjrtN",nav:"_1zmZlvZRZpKK0iFQUK4SUS",navItem:"_1qxNj_W4v125O6nycDNJsO",active:"aoFngF_r7TXaP9bczwBXT",loading:"_3rfEP-DWJqUbeEoW_wkgNb",dashboardLable:"OUIocWs0_2aT0fv9yabY9",dashboardValue:"_1LaE4jPHTXp8dZPg_BkotN"}},3561:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(71)),l=a(n(49)),s=a(n(50)),i=a(n(12)),c=a(n(13)),d=a(n(19)),f=a(n(20)),p=a(n(18)),m=a(n(0)),h=n(25),v=n(5),g=n(70),y=a(n(137)),E=a(n(16)),b=a(n(650)),S=a(n(32)),_=a(n(818)),D=a(n(1516)),O=a(n(972)),k=a(n(1517)),R=n(973),N=n(289),P=n(635);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}n(1518);var w=(0,g.inject)("rootStore","devopsStore","pipelineStore")(o=(0,g.observer)(o=(0,P.trigger)(o=function(e){(0,d.default)(n,e);var r=I(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).sonarqubeStore=new D.default,e.module="pipelineruns",e.fetchData=function(){var t=e.props.match.params;e.store.setDevops(t.devops),e.store.getBranchDetail(t),e.getSonarqube()},e.getSonarqube=function(){if((0,E.default)(globals,"config.devops.sonarqubeURL")){var t=e.props.match.params;e.sonarqubeStore.fetchDetail(t)}},e.getOperations=function(){return[{key:"run",type:"control",text:t("RUN"),action:"edit",onClick:e.handleRun}]},e.getAttrs=function(){var r=e.store,n=r.detail,a=r.activityList,o=e.props.devopsStore.devopsName,u=e.props.match.params.branch;return[{name:t("DEVOPS_PROJECT"),value:o},{name:t("PIPELINE"),value:"".concat(n.name,"/").concat(decodeURIComponent(u))},{name:t("TASK_STATUS"),value:m.default.createElement(_.default,(0,N.getPipelineStatus)((0,E.default)((0,v.toJS)(a.data),"[0]",{})))},{name:t("UPDATE_TIME_TCAP"),value:e.updateTime}]},e.handleRun=(0,b.default)((0,s.default)(l.default.mark((function r(){var n,a,o,u;return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.store.branchDetail,a=e.props.match.params,o=!(0,S.default)((0,v.toJS)(n.branchNames)),u=!(0,S.default)((0,v.toJS)(n.parameters)),!o&&!u){r.next=8;break}e.trigger("pipeline.params",{devops:a.devops,cluster:a.cluster,params:a,branches:e.isAtBranchDetailPage?null:[(0,v.toJS)(n.name)],parameters:(0,v.toJS)(n.parameters),success:function(){h.Notify.success({content:t("PIPELINE_RUN_START_SI")}),e.handleFetch()}}),r.next=12;break;case 8:return h.Notify.success({content:t("PIPELINE_RUN_START_SI")}),r.next=11,e.store.runBranch(a);case 11:e.handleFetch();case 12:case"end":return r.stop()}}),r)}))),500),e.handleFetch=function(t,r){e.routing.query(t,r)},e.renderNav=function(){return m.default.createElement(k.default,{sonarqubeStore:e.sonarqubeStore,detailStore:e.store,route:e.props.route,match:e.props.match})},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,r={detailStore:this.store,sonarqubeStore:this.sonarqubeStore},n=this.props.match.params.branch,a=this.getOperations().filter((function(t){return e.enabledActions.includes(t.action)})),o=this.props.match.params,l=o.devops,s=o.cluster,i=o.workspace,c=o.name,d={icon:m.default.createElement("span",{className:"icon",style:{width:"20px",height:"20px"}},m.default.createElement(R.ReactComponent,null)),name:decodeURIComponent(n),operations:a,attrs:this.getAttrs(),module:this.module,breadcrumbs:[{label:t("BRANCH_PL"),url:"/".concat(i,"/clusters/").concat(s,"/devops/").concat(l,"/pipelines/").concat(c,"/branch")}]};return m.default.createElement(O.default,(0,u.default)({routes:this.props.route.routes,stores:r,nav:this.renderNav()},d))}},{key:"store",get:function(){return this.props.pipelineStore}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"isAtBranchDetailPage",get:function(){return this.props.match.params.branch}},{key:"createTime",get:function(){return(0,y.default)(this.store.detail.createTime).format("YYYY-MM-DD HH:mm:ss")}},{key:"updateTime",get:function(){var e=this.store.activityList,t=(0,E.default)((0,v.toJS)(e.data),"[0].startTime","");return t?(0,y.default)(t).format("YYYY-MM-DD HH:mm:ss"):"-"}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,r=e.devops;return globals.app.getActions({module:this.module,cluster:t,devops:r})}}]),n}(m.default.Component))||o)||o)||o;r.default=w},3562:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l,s=a(n(71)),i=a(n(91)),c=a(n(49)),d=a(n(50)),f=a(n(12)),p=a(n(13)),m=a(n(135)),h=a(n(19)),v=a(n(20)),g=a(n(18)),y=a(n(74)),E=(a(n(92)),a(n(0))),b=n(5),S=n(70),_=a(n(137)),D=a(n(16)),O=n(289),k=a(n(818)),R=a(n(1519)),N=n(635),P=n(25),I=a(n(972));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,g.default)(e);if(t){var a=(0,g.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,v.default)(this,r)}}var C=(0,S.inject)("rootStore","devopsStore","pipelineStore")(o=(0,S.observer)(o=(0,N.trigger)((u=function(e){(0,h.default)(n,e);var r=w(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new R.default,e.module="pipelines",e.state={showEdit:!1,showYamlEdit:!1,isLoading:!0},e.refreshTimer=setInterval((function(){return e.refreshHandler()}),4e3),e.refreshHandler=function(){var t=e.props.match.params;e.store.runDetail.message||(e.hasRuning?e.store.getRunDetail(t):(clearInterval(e.refreshTimer),e.refreshTimer=null))},e.fetchData=function(){var t=e.props.match.params;e.store.getRunDetail(t)},e.getRunName=(0,d.default)(c.default.mark((function t(){var r;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.getRunName(r);case 3:case"end":return t.stop()}}),t)}))),(0,i.default)(e,"rePlay",l,(0,m.default)(e)),e.getOperations=function(){return[{key:"rerun",type:"control",text:t("RERUN"),action:"edit",onClick:function(){return e.rePlay()}}]},e.getAttrs=function(){var r=e.store.runDetail;return[{name:t("RUN_ID"),value:r.id},{name:t("TASK_STATUS"),value:E.default.createElement(k.default,(0,O.getPipelineStatus)(r))},{name:t("UPDATE_TIME_TCAP"),value:e.updateTime}]},e}return(0,p.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.store.runDetail,r=this.props.match.params,n=r.devops,a=r.runName,o=r.branch,u=r.workspace,l=r.cluster;a!==e.match.params.runName&&(clearInterval(this.refreshTimer),this.refreshTimer=setInterval(this.refreshHandler,4e3)),t.name&&t.name!==a&&this.routing.push("/".concat(u,"/clusters/").concat(l,"devops/").concat(n,"/pipelines/").concat(name).concat(o?"/branch/".concat(o):"","/run/").concat(t.name)),!this.refreshTimer&&this.hasRuning&&(this.refreshTimer=setInterval(this.refreshHandler,4e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshTimer)}},{key:"render",value:function(){var e=this,r=this.store.runDetail,n=r.id,a=r.annotations,o=r.labels,u=this.props.match.params,l=u.branch,i=u.name,c=u.runId,d={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return E.default.createElement(P.Loading,{className:"ks-page-loading"});var f={name:n,operations:this.getOperations().filter((function(t){return e.enabledActions.includes(t.action)})),attrs:this.getAttrs(),desc:(0,D.default)(a,"desc"),labels:o,module:this.module,breadcrumbs:[{label:l&&c?t("BRANCH_PL"):t("RUN_RECORDS"),url:l?"".concat(this.listUrl,"/").concat(i,"/branch/").concat(l,"/activity"):"".concat(this.listUrl,"/").concat(i,"/activity")}]};return E.default.createElement(I.default,(0,s.default)({routes:this.props.route.routes,stores:d},f))}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.devops,n=e.cluster;return"/".concat(t,"/clusters/").concat(n,"/devops/").concat(r,"/pipelines")}},{key:"hasRuning",get:function(){var e=this.store.runDetail,t=(0,D.default)(e,"state");return t&&"FINISHED"!==t&&"PAUSED"!==t}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"creator",get:function(){return(0,D.default)(this.store.detail,"creator",t("unknown"))}},{key:"createTime",get:function(){return(0,_.default)(this.store.detail.createTime).format("YYYY-MM-DD HH:mm:ss")}},{key:"updateTime",get:function(){var e=this.store.runDetail,t=(0,D.default)(e,"startTime","");return t?(0,_.default)(t).format("YYYY-MM-DD HH:mm:ss"):"-"}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,r=e.devops;return globals.app.getActions({module:this.module,cluster:t,devops:r})}}]),n}(E.default.Component),l=(0,y.default)(u.prototype,"rePlay",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,d.default)(c.default.mark((function t(){var r,n;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.replay(r);case 3:n=t.sent,e.routing.push("/".concat(r.workspace,"/clusters/").concat(r.cluster,"/devops/").concat(r.devops,"/pipelines/").concat(r.name).concat(r.branch?"/branch/".concat(r.branch):"","/activity")),n.id&&(e.store.runDetail=n);case 6:case"end":return t.stop()}}),t)})))}}),o=u))||o)||o)||o;r.default=C},3563:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Branch",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"PullRequest",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Activity",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"TaskStatus",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Commit",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Artifacts",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"CodeQuality",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Events",{enumerable:!0,get:function(){return f.default}});var a=n(r(3564)),o=n(r(3567)),u=n(r(3569)),l=n(r(3571)),s=n(r(3572)),i=n(r(3584)),c=n(r(3585)),d=n(r(3586)),f=n(r(3591))},3564:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(21)),l=a(n(49)),s=a(n(50)),i=a(n(12)),c=a(n(13)),d=a(n(19)),f=a(n(20)),p=a(n(18)),m=a(n(3565)),h=a(n(16)),v=a(n(190)),g=a(n(32)),y=a(n(0)),E=n(5),b=n(70),S=n(279),_=a(n(662)),D=n(25),O=a(n(818)),k=a(n(1036)),R=n(37),N=n(289),P=n(973),I=a(n(728)),w=a(n(893)),C=a(n(3)),T=a(n(3566));function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var j=(0,b.inject)("rootStore","detailStore")(o=(0,b.observer)(o=function(e){(0,d.default)(n,e);var r=x(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).name="branch",e.store=e.props.detailStore||{},e.refreshTimer=setInterval((function(){return e.getData()}),4e3),e.refreshHandler=function(){e.isRuning?e.getData():(clearInterval(e.refreshTimer),e.refreshTimer=null)},e.handleFetch=function(t,r){e.routing.query(t,r)},e.handleScanRepository=(0,s.default)(l.default.mark((function r(){var n,a;return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.props.match.params,a=e.props.detailStore.detail,r.next=4,e.props.detailStore.scanRepository({devops:n.devops,cluster:n.cluster,name:a.name});case 4:e.store.fetchDetail(n),D.Notify.success({content:t("SCAN_REPO_SUCCESSFUL")});case 6:case"end":return r.stop()}}),r)}))),e.getColumns=function(){return[{title:t("STATUS"),dataIndex:"status",width:"20%",render:function(e,t){return y.default.createElement(O.default,(0,N.getPipelineStatus)((0,h.default)(t,"latestRun",{})))}},{title:t("NAME"),dataIndex:"name",width:"20%",render:function(t,r){return y.default.createElement(_.default,{className:(0,C.default)("item-name",(0,u.default)({},T.default.itemNameDisabled,r.disabled)),to:"".concat(e.prefix,"/").concat(t,"/activity"),disabled:r.disabled},y.default.createElement(P.ReactComponent,{style:{width:"20px",height:"20px"}}),decodeURIComponent(t))}},{title:t("HEALTH_STATUS"),dataIndex:"weatherScore",width:"20%",render:function(e){return y.default.createElement(k.default,{score:e})}},{title:t("LAST_MESSAGE"),dataIndex:"latestRun",width:"20%",render:function(e){return(0,m.default)(e,"causes[0].shortDescription","-")}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",width:"20%",render:function(e,t){var r;return(null==t||null===(r=t.latestRun)||void 0===r?void 0:r.startTime)?(0,R.getLocalTime)(t.latestRun.startTime).format("YYYY-MM-DD HH:mm:ss"):"-"}}]},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;this.unsubscribe=this.routing.history.subscribe((function(r){if(r.pathname===e.props.match.url){var n=(0,S.parse)(r.search.slice(1));e.store.getBranches(A(A({},t),n))}}))}},{key:"componentDidUpdate",value:function(){var e=this;null===this.refreshTimer&&this.isRuning&&(this.refreshTimer=setInterval((function(){return e.refreshHandler()}),4e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshTimer),this.unsubscribe&&this.unsubscribe()}},{key:"getData",value:function(){var e=this.props.match.params,t=(0,S.parse)(location.search.slice(1));this.store.getBranches(A(A({},e),t))}},{key:"render",value:function(){var e=(0,E.toJS)(this.store.branchList),r=e.data,n=e.filters,a=e.isLoading,o=e.total,u=e.page,l=e.limit,s=!1===a&&0===o,i=(0,v.default)(n,"page","workspace"),c=this.enabledActions.includes("edit"),d={total:o,page:u,limit:l};return s&&!n.page?y.default.createElement(w.default,{desc:t("NO_BRANCHES_FOUND")},c&&y.default.createElement(D.Button,{type:"control",onClick:this.handleScanRepository},t("SCAN_REPOSITORY"))):y.default.createElement(I.default,{rowKey:"displayName",data:r,columns:this.getColumns(),filters:i,pagination:d,isLoading:a,onFetch:this.handleFetch,hideSearch:!0})}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,r=e.devops;return globals.app.getActions({module:"pipelines",cluster:t,devops:r})}},{key:"isRuning",get:function(){var e=(0,h.default)((0,E.toJS)(this.store),"branchList.data",[]).filter((function(e){var t=(0,h.default)(e,"latestRun.state");return t&&"FINISHED"!==t&&"PAUSED"!==t}));return!(0,g.default)(e)}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"prefix",get:function(){return this.props.match.url}}]),n}(y.default.Component))||o)||o;r.default=j},3566:function(e,t,r){e.exports={itemNameDisabled:"_3GGTJV-JpH1VfUsS2ZJj6v"}},3567:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(49)),l=a(n(50)),s=a(n(12)),i=a(n(13)),c=a(n(19)),d=a(n(20)),f=a(n(18)),p=a(n(0)),m=n(25),h=n(5),v=n(70),g=a(n(32)),y=a(n(650)),E=a(n(1120)),b=n(635),S=a(n(893)),_=a(n(3568));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var O=(0,v.inject)("rootStore","detailStore")(o=(0,v.observer)(o=(0,b.trigger)(o=function(e){(0,c.default)(n,e);var r=D(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))).store=e.props.detailStore||{},e.formTemplate={},e.handlePipelineModal=function(){var r=e.store.pipelineJsonData,n=e.props.match.params;e.trigger("pipeline.pipelineTemplate",{store:e.store,jsonData:(0,h.toJS)(r.pipelineJson),formTemplate:e.formTemplate,title:t("CREATE_PIPELINE"),imageIcon:"/assets/pipeline/pipeline-icon-dark.svg",description:t("CREATE_PIPELINE_DESC"),width:"960px",contentWidth:"960px",noCodeEdit:!0,params:n,success:function(t){e.trigger("pipeline.pipelineCreate",{store:e.store,jsonData:t,params:n,success:function(){var t=n.devops,r=n.name;localStorage.removeItem("".concat(globals.user.username,"-").concat(t,"-").concat(r)),e.handleRefresh()}})}})},e.handleEditorPipelineModal=function(){var t=e.store.pipelineJsonData,r=e.props.match.params;e.trigger("pipeline.pipelineCreate",{store:e.store,jsonData:(0,h.toJS)(t.pipelineJson),params:r,success:function(){var t=r.devops,n=r.name;localStorage.removeItem("".concat(globals.user.username,"-").concat(t,"-").concat(n)),e.handleRefresh()}})},e.handleJenkinsFileModal=function(){var t=e.store.jenkinsfile,r=e.props.match.params;e.trigger("pipeline.jenkins",{store:e.store,defaultValue:(0,h.toJS)(t),params:r,success:function(){var t=r.devops,n=r.name;localStorage.removeItem("".concat(globals.user.username,"-").concat(t,"-").concat(n)),e.handleRefresh()}})},e.getData=(0,l.default)(u.default.mark((function t(){var r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.getJenkinsFile(r);case 3:e.store.getActivities(r);case 4:case"end":return t.stop()}}),t)}))),e.handleRefresh=function(){var t=e.props.match.params;e.store.getJenkinsFile(t)},e.handleRunning=(0,y.default)((function(){var t=e.store.detail,r=!(0,g.default)((0,h.toJS)(t.branchNames)),n=!(0,g.default)((0,h.toJS)(t.parameters)),a=e.props.match.params;r||n?e.trigger("pipeline.params",{devops:a.devops,cluster:a.cluster,params:a,branches:(0,h.toJS)(t.branchNames),parameters:(0,h.toJS)(t.parameters),success:function(){e.props.rootStore.routing.push("./activity")}}):e.handleRunSubmit()}),500),e.handleRunSubmit=function(){var t=(0,l.default)(u.default.mark((function t(r,n){var a,o,l,s;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.store.detail,o=e.props.match.params,l=o.devops,s=o.cluster,t.next=4,e.store.runBranch({name:a.name,branch:n,parameters:r,cluster:s,devops:l});case 4:e.props.rootStore.routing.push("./activity");case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){!this.isMultibranch&&this.enabledActions.includes("edit")?this.getData():this.props.rootStore.routing.push("./activity")}},{key:"renderBtnGroup",value:function(){var e=this.enabledActions.includes("edit");return p.default.createElement("div",{className:_.default.pipelineCard__btnGroup},e&&p.default.createElement(m.Button,{onClick:this.handleJenkinsFileModal},t("EDIT_JENKINSFILE")),e&&p.default.createElement(m.Button,{onClick:this.handleEditorPipelineModal},t("EDIT_PIPELINE")),e&&p.default.createElement(m.Button,{type:"control",onClick:this.handleRunning},t("RUN")))}},{key:"renderPipeLineContent",value:function(){var e=this.store.pipelineJsonData,r=e.pipelineJson,n=e.isLoading,a=this.enabledActions.includes("edit");return n?p.default.createElement(m.Loading,{spinning:!0},p.default.createElement("div",{className:_.default.pipelineCard})):(0,g.default)((0,h.toJS)(r))?p.default.createElement(S.default,{desc:t("NO_PIPELINE_CONFIG_FILE_TIP")},a&&p.default.createElement(m.Button,{type:"control",onClick:this.handlePipelineModal},t("EDIT_PIPELINE")),a&&p.default.createElement(m.Button,{onClick:this.handleJenkinsFileModal},t("EDIT_JENKINSFILE"))):"failure"===r.result?p.default.createElement(S.default,{desc:t("INVALID_JENKINSFILE_TIP")},a&&p.default.createElement(m.Button,{onClick:this.handleJenkinsFileModal},t("EDIT_JENKINSFILE")),a&&p.default.createElement(m.Button,{type:"control",onClick:this.handleRunning},t("RUN"))):p.default.createElement("div",{className:_.default.pipelineCard},p.default.createElement("div",{className:_.default.pipelineCard__toolbar},this.renderBtnGroup()),p.default.createElement("div",{className:_.default.pipelineCard__main},p.default.createElement(E.default,{jsonData:r})))}},{key:"render",value:function(){return p.default.createElement("div",null,this.renderPipeLineContent())}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,r=e.devops;return globals.app.getActions({module:"pipelines",cluster:t,devops:r})}},{key:"isMultibranch",get:function(){var e=this.props.detailStore;return(0,h.toJS)(e.detail.isMultiBranch)}}]),n}(p.default.Component))||o)||o)||o;r.default=O},3568:function(e,t,r){e.exports={pipelineCard:"_1QFjNwGDuN8t9MAIvO2DoY",pipelineCard__toolbar:"_1fCHzREeVMKbCgIC2LzrXb",icon:"_3lL8K1nNCnwDbe_zgSfsdL",pipelineCard__btnGroup:"_2Q4jPcuRq7sl6FH05oON1Q",pipelineCard__main:"zhBNotW1xoiqvp-fuAnWt"}},3569:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(21)),l=a(n(12)),s=a(n(13)),i=a(n(19)),c=a(n(20)),d=a(n(18)),f=a(n(0)),p=a(n(16)),m=a(n(190)),h=a(n(32)),v=n(5),g=n(70),y=n(279),E=n(37),b=a(n(818)),S=n(289),_=a(n(1036)),D=a(n(3)),O=a(n(662)),k=a(n(728)),R=a(n(893)),N=a(n(3570));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var C=(0,g.inject)("rootStore","detailStore")(o=(0,g.observer)(o=function(e){(0,i.default)(n,e);var r=w(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=r.call.apply(r,[this].concat(o))).name="PullRequest",e.store=e.props.detailStore||{},e.refreshTimer=setInterval((function(){return e.getData()}),4e3),e.refreshHandler=function(){e.isRuning?e.getData():(clearInterval(e.refreshTimer),e.refreshTimer=null)},e.getData=function(){var t=e.props.match.params,r=(0,y.parse)(location.search.slice(1));e.store.getPullRequest(I(I({},t),r))},e.handleFetch=function(t,r){e.routing.query(t,r)},e.getFilteredValue=function(t){return e.store.list.filters[t]},e.getColumns=function(){return[{title:t("STATUS"),width:"15%",render:function(e){return f.default.createElement(b.default,(0,S.getPipelineStatus)((0,p.default)(e,"latestRun",{})))}},{title:t("NAME"),dataIndex:"name",width:"15%",render:function(t,r){return f.default.createElement(O.default,{className:(0,D.default)("item-name",(0,u.default)({},N.default.itemNameDisabled,r.disabled)),to:"".concat(e.prefix,"/branch/").concat(t,"/"),disabled:r.disabled},t)}},{title:t("HEALTH_STATUS"),dataIndex:"weatherScore",width:"15%",render:function(e){return f.default.createElement(_.default,{score:e})}},{title:t("LAST_MESSAGE"),width:"20%",render:function(e){return(0,p.default)(e,"pullRequest.title","")}},{title:t("AUTHOR"),width:"15%",render:function(e){return(0,p.default)(e,"pullRequest.author","")}},{title:t("TIME"),dataIndex:"latestRun",width:"20%",render:function(e){return(0,E.getLocalTime)(e.startTime).format("YYYY-MM-DD HH:mm:ss")}}]},e.getRowKey=function(e){return e.enQueueTime},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;this.unsubscribe=this.routing.history.subscribe((function(r){if(r.pathname===e.props.match.url){var n=(0,y.parse)(r.search.slice(1));e.store.getPullRequest(I(I({},t),n))}}))}},{key:"componentDidUpdate",value:function(){var e=this;null===this.refreshTimer&&this.isRuning&&(this.refreshTimer=setInterval((function(){return e.refreshHandler()}),4e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshTimer),this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=this.store.pullRequestList,t=e.data,r=e.isLoading,n=e.total,a=e.page,o=e.limit,u=e.filters,l=!1===r&&0===n&&t.length>0,s={total:n,page:a,limit:o},i=(0,m.default)(u,"page","workspace");return l&&!u.page?f.default.createElement(R.default,{name:this.name}):f.default.createElement(k.default,{data:(0,v.toJS)(t),columns:this.getColumns(),rowKey:"displayName",filters:i,pagination:s,isLoading:r,onFetch:this.handleFetch,hideSearch:!0})}},{key:"isRuning",get:function(){var e=(0,p.default)((0,v.toJS)(this.store),"pullRequestList.data",[]).filter((function(e){var t=(0,p.default)(e,"latestRun.state");return t&&"FINISHED"!==t&&"PAUSED"!==t}));return!(0,h.default)(e)}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,r=e.devops,n=e.name,a=e.cluster;return"/".concat(t,"/clusters/").concat(a,"/devops/").concat(r,"/pipelines/").concat(n)}}]),n}(f.default.Component))||o)||o;r.default=C},3570:function(e,t,r){e.exports={itemNameDisabled:"_1imWThkNtbXZSBAEQgwMK"}},3571:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(109)),l=a(n(49)),s=a(n(50)),i=a(n(21)),c=a(n(12)),d=a(n(13)),f=a(n(19)),p=a(n(20)),m=a(n(18)),h=a(n(0)),v=a(n(16)),g=a(n(190)),y=a(n(650)),E=a(n(32)),b=n(276),S=n(5),_=n(279),D=n(70),O=n(25),k=n(37),R=a(n(818)),N=n(289),P=n(973),I=n(635),w=a(n(728)),C=a(n(893));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var x=(0,D.inject)("rootStore","detailStore")(o=(0,D.observer)(o=(0,I.trigger)(o=function(e){(0,f.default)(n,e);var r=A(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))).name="Activity",e.store=e.props.detailStore||{},e.refreshTimer=setInterval((function(){return e.getData()}),4e3),e.getData=function(){var t=e.props.match.params,r=(0,_.parse)(location.search.slice(1));e.store.getActivities(L(L({},t),r))},e.refreshHandler=function(){e.isRuning?e.getData():(clearInterval(e.refreshTimer),e.refreshTimer=null)},e.handleRunning=(0,y.default)((0,s.default)(l.default.mark((function r(){var n,a,o;return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.store.detail,a=e.props.match.params,o=!(0,E.default)((0,S.toJS)(n.parameters)),!!(0,E.default)((0,S.toJS)(n.branchNames))&&!o){r.next=8;break}e.trigger("pipeline.params",{devops:a.devops,cluster:a.cluster,params:a,branches:(0,S.toJS)(n.branchNames),parameters:(0,S.toJS)(n.parameters),success:function(){O.Notify.success({content:"".concat(t("PIPELINE_RUN_START_SI"))}),e.handleFetch()}}),r.next=12;break;case 8:return O.Notify.success({content:"".concat(t("PIPELINE_RUN_START_SI"))}),r.next=11,e.props.detailStore.runBranch(a);case 11:e.handleFetch();case 12:case"end":return r.stop()}}),r)}))),500),e.handleFetch=function(t,r){e.routing.query(t,r)},e.handleReplay=function(r){return(0,s.default)(l.default.mark((function n(){var a;return l.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.props.match.params,n.next=3,e.props.detailStore.handleActivityReplay(L(L({},a),{},{url:e.getActivityDetailLinks(r)}));case 3:O.Notify.success({content:"".concat(t("PIPELINE_RUN_START_SI"))}),e.handleFetch();case 5:case"end":return n.stop()}}),n)})))},e.handleScanRepository=(0,s.default)(l.default.mark((function r(){var n,a;return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.props.match.params,a=e.props.detailStore.detail,r.next=4,e.props.detailStore.scanRepository({devops:n.devops,name:a.name,cluster:n.cluster});case 4:e.store.fetchDetail(n),O.Notify.success({content:t("SCAN_REPO_SUCCESSFUL")}),e.handleFetch();case 7:case"end":return r.stop()}}),r)}))),e.handleStop=function(r){return(0,s.default)(l.default.mark((function n(){var a;return l.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.props.match.params,n.next=3,e.props.detailStore.handleActivityStop(L({url:e.getActivityDetailLinks(r)},a));case 3:O.Notify.success({content:t("STOP_PIPELINE_SUCCESSFUL")}),e.handleFetch();case 5:case"end":return n.stop()}}),n)})))},e.getActivityDetailLinks=function(e){var t=(0,v.default)(e,"_originData.spec.scm.refName");return t?"branches/".concat(encodeURIComponent(t),"/runs/").concat(e.id):"runs/".concat(e.id)},e.getRunhref=function(t){var r=(0,v.default)(t,"_originData.spec.scm.refName"),n=(0,v.default)(t,"_originData.metadata.name");return r&&!e.isAtBranchDetailPage?"".concat(e.prefix,"/branch/").concat(t.pipeline,"/run/").concat(n):"".concat(e.prefix,"/run/").concat(n)},e.getColumns=function(){return[{title:t("STATUS"),width:"15%",key:"status",render:function(t){return"ABORTED"!==t.result&&t.result?h.default.createElement(b.Link,{className:"item-name",to:e.getRunhref(t)},h.default.createElement(R.default,(0,N.getPipelineStatus)(t))):h.default.createElement(R.default,(0,N.getPipelineStatus)(t))}},{title:t("RUN_ID"),width:"10%",key:"run",render:function(t){return"ABORTED"!==t.result&&t.result?h.default.createElement(b.Link,{className:"item-name",to:e.getRunhref(t)},t.id):h.default.createElement("span",null,t.id)}},{title:t("COMMIT"),dataIndex:"commitId",width:"10%",render:function(e){return e&&e.slice(0,6)||"-"}}].concat((0,u.default)(e.isAtBranchDetailPage||!e.isMultiBranch?[]:[{title:t("BRANCH_SI"),width:"15%",key:"branch",render:function(t){var r=(0,v.default)(t,"_originData.spec.scm.refName","");return r?h.default.createElement(b.Link,{className:"item-name",to:"".concat(e.prefix,"/branch/").concat(r,"/activity")},h.default.createElement(P.ReactComponent,{style:{width:"20px",height:"20px"}})," ",decodeURIComponent(r)):"-"}}]),[{title:t("LAST_MESSAGE"),dataIndex:"causes",width:"25%",render:function(e){return(0,v.default)(e,"[0].shortDescription","")}},{title:t("DURATION"),dataIndex:"durationInMillis",width:"10%",render:function(e){return e?(0,k.formatUsedTime)(e):"-"}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"startTime",width:"20%",render:function(e){return e?(0,k.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}},{isHideable:!1,width:"10%",key:"action",render:function(t){return t.branch&&!t.commitId||!e.enabledActions.includes("edit")||!t.id?null:"FINISHED"===t.state?h.default.createElement(O.Button,{onClick:e.handleReplay(t),icon:"restart",type:"flat"}):h.default.createElement(O.Button,{onClick:e.handleStop(t),icon:"stop",type:"flat"})}}])},e.getActions=function(){return e.isAtBranchDetailPage?null:[{type:"control",key:"run",text:t("RUN"),action:"edit",onClick:e.handleRunning}]},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;this.unsubscribe=this.routing.history.subscribe((function(r){if(r.pathname===e.props.match.url){var n=(0,_.parse)(r.search.slice(1));e.store.getActivities(L(L({},t),n))}}))}},{key:"componentDidUpdate",value:function(){var e=this;null===this.refreshTimer&&this.isRuning&&(this.refreshTimer=setInterval((function(){return e.refreshHandler()}),4e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshTimer),this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=this.store.activityList,r=e.data,n=e.isLoading,a=e.total,o=e.page,u=e.limit,l=e.filters,s=(0,g.default)(l,"page","workspace"),i={total:a,page:o,limit:u};if(0===a){var c=this.store.detail,d=this.enabledActions.includes("edit"),f=!(0,E.default)((0,S.toJS)(c.branchNames)),p=(0,v.default)(this.props,"match.params.branch");return!f||(0,E.default)(f)||p?h.default.createElement(C.default,{desc:t("ACTIVITY_EMPTY_TIP")},d&&h.default.createElement(O.Button,{type:"control",onClick:this.handleRunning},t("RUN"))):h.default.createElement(C.default,{desc:t("NO_PIPELINE_CONFIG_FILE_TIP")},d&&h.default.createElement(O.Button,{type:"control",onClick:this.handleScanRepository},t("SCAN_REPOSITORY")))}return h.default.createElement(w.default,{data:(0,S.toJS)(r),columns:this.getColumns(),rowKey:"uid",filters:s,pagination:i,isLoading:n,onFetch:this.handleFetch,actions:this.getActions(),hideSearch:!0,enabledActions:this.enabledActions})}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.devops,r=e.cluster;return globals.app.getActions({module:"pipelineruns",cluster:r,devops:t})}},{key:"isRuning",get:function(){var e=(0,v.default)((0,S.toJS)(this.store),"activityList.data",[]).filter((function(e){return"FINISHED"!==e.state&&"PAUSED"!==e.state}));return!(0,E.default)(e)}},{key:"isAtBranchDetailPage",get:function(){return this.props.match.params.branch}},{key:"isMultiBranch",get:function(){return!(0,E.default)((0,S.toJS)(this.store.detail.branchNames))}},{key:"prefix",get:function(){var e=this.props.match.url.split("/");return e.pop(),e.join("/")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),n}(h.default.Component))||o)||o)||o;r.default=x},3572:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l,s=a(n(71)),i=a(n(49)),c=a(n(21)),d=a(n(50)),f=a(n(12)),p=a(n(13)),m=a(n(19)),h=a(n(20)),v=a(n(18)),g=a(n(0)),y=a(n(1)),E=a(n(3)),b=n(70),S=n(5),_=a(n(16)),D=a(n(32)),O=n(25),k=n(638),R=a(n(274)),N=a(n(818)),P=n(289),I=a(n(3573)),w=a(n(3578)),C=a(n(3583));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,v.default)(e);if(t){var a=(0,v.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,h.default)(this,r)}}var x=(0,b.inject)("rootStore","detailStore")(o=(0,b.observer)((l=u=function(e){(0,m.default)(n,e);var r=A(n);function n(e){var a;return(0,f.default)(this,n),(a=r.call(this,e)).handleFetch=function(){var e=a.store.runDetail;if(!(0,D.default)((0,S.toJS)(e))&&!a.isQueued){var t=a.props.match.params;a.store.getNodesStatus(t)}},a.toggleFullScreenState=function(){var e=a.state.isFullScreen;a.setState({isFullScreen:!e})},a.handleEnterFullScreen=function(){(0,k.enterFullScreen)(a.container),a.setState({isFullScreen:!0})},a.showLog=function(){a.setState({showLog:!0})},a.showErrorLog=function(){a.setState({showErrorLog:!0})},a.hideLog=function(){a.setState({showLog:!1})},a.handleDownloadLogs=function(){var e=a.props.match.params;a.store.handleDownloadLogs(e)},a.handleProceed=function(){var e=(0,d.default)(i.default.mark((function e(t,r){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.props.match.params,e.next=4,a.store.handleProceed(L(L({},t),n));case 4:return e.next=6,a.store.getRunDetail(n);case 6:return e.prev=6,r&&r(),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})));return function(t,r){return e.apply(this,arguments)}}(),a.handleBreak=function(){var e=(0,d.default)(i.default.mark((function e(t,r){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.props.match.params,e.next=4,a.store.handleBreak(L(L({},t),n));case 4:return e.next=6,a.store.getRunDetail(n);case 6:return e.prev=6,r&&r(),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})));return function(t,r){return e.apply(this,arguments)}}(),a.renderLoadingCard=function(){return g.default.createElement("div",{className:C.default.card},g.default.createElement("div",null,g.default.createElement("span",{className:(0,E.default)(C.default.runningIcon,C.default.icon)})),g.default.createElement("div",{className:C.default.title},t("INITIALIZING_PIPELINE")),g.default.createElement("div",{className:C.default.desc},t("INITIALIZING_PIPELINE_DESC")),g.default.createElement("div",{className:C.default.btn},g.default.createElement(O.Button,{onClick:a.showErrorLog},t("VIEW_LOGS"))))},a.renderQueuedCard=function(e){return g.default.createElement("div",{className:C.default.card},g.default.createElement("div",null,g.default.createElement("span",{className:(0,E.default)(C.default.QueuedIcon,C.default.icon)})),g.default.createElement("div",{className:C.default.title},t("PIPELINE_QUEUED_TITLE")),g.default.createElement("div",{className:C.default.desc},(0,_.default)(e,"causeOfBlockage")||t("INITIALIZING_PIPELINE_DESC")))},a.state={isFullScreen:!1,showLog:!1,showErrorLog:!1},a.store=e.detailStore||{},a.updateReaction=(0,S.reaction)((function(){return a.store.runDetail}),a.handleFetch),a}return(0,p.default)(n,[{key:"componentDidMount",value:function(){this.handleFetch(),(0,k.addFullScreenChangeEvents)(this.toggleFullScreenState)}},{key:"componentWillUnmount",value:function(){this.updateReaction(),(0,k.removeFullScreenChangeEvents)(this.toggleFullScreenState)}},{key:"getChildContext",value:function(){return{onProceed:this.handleProceed,onBreak:this.handleBreak,result:this.store.runDetail.result}}},{key:"renderBtnGroup",value:function(){return g.default.createElement("div",{className:C.default.pipelineCard__btnGroup},g.default.createElement("span",{onClick:this.handleEnterFullScreen},g.default.createElement(O.Button,{icon:"maximize",type:"flat"})),g.default.createElement(O.Button,{onClick:this.showLog},t("VIEW_LOGS")))}},{key:"render",value:function(){var e=this,r=this.state,n=r.showLog,a=r.showErrorLog,o=this.store,u=o.nodesStatus,l=o.runDetailLogs,i=o.runDetail;return 0===u.length?this.isQueued?this.renderQueuedCard(i):this.hasRuning&&!a?this.renderLoadingCard():g.default.createElement("div",{className:C.default.pipelineCard},g.default.createElement("div",{className:C.default.pipelineCard__toolbar},this.hasRuning?g.default.createElement("span",{className:C.default.running_tips},g.default.createElement(N.default,(0,s.default)({hasLabel:!1},(0,P.getPipelineStatus)(i))),t("PIPELINE_PREPARE_DESC")):null,g.default.createElement("div",{className:C.default.pipelineCard__btnGroup},g.default.createElement(O.Button,{onClick:this.handleDownloadLogs},t("DOWNLOAD_LOGS")))),g.default.createElement("div",{className:C.default.pipelineCard__main,ref:function(t){e.container=t}},g.default.createElement("pre",null,l))):g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:C.default.pipelineCard},g.default.createElement("div",{className:C.default.pipelineCard__toolbar},this.renderBtnGroup()),g.default.createElement("div",{className:C.default.pipelineCard__main,ref:function(t){e.container=t}},g.default.createElement(I.default,{jsonData:u}))),g.default.createElement(R.default,{width:1162,onCancel:this.hideLog,title:t("PIPELINE_RUN_LOGS"),visible:n,closable:!1,cancelText:t("CLOSE")},g.default.createElement(w.default,{handleDownloadLogs:this.handleDownloadLogs,params:this.props.match.params,runId:this.store.runDetail.id,nodes:u})))}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,r=e.devops;return globals.app.getActions({module:"pipelines",cluster:t,devops:r})}},{key:"hasRuning",get:function(){var e=this.store.runDetail,t=(0,_.default)(e,"state");return t&&"FINISHED"!==t&&"PAUSED"!==t}},{key:"isQueued",get:function(){var e=this.store.runDetail;return"QUEUED"===(0,_.default)(e,"state","")}}]),n}(g.default.Component),u.childContextTypes={onProceed:y.default.func,onBreak:y.default.func,result:y.default.string},o=l))||o)||o;r.default=x},3573:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,u,l,s,i,c,d,f,p=n(r(49)),m=n(r(21)),h=n(r(50)),v=n(r(56)),g=n(r(91)),y=n(r(12)),E=n(r(13)),b=n(r(135)),S=n(r(19)),_=n(r(20)),D=n(r(18)),O=n(r(74)),k=(n(r(92)),n(r(0))),R=r(70),N=n(r(32)),P=r(5),I=n(r(1)),w=n(r(1121)),C=n(r(1330)),T=n(r(3574)),L=n(r(3577));function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,D.default)(e);if(t){var a=(0,D.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,_.default)(this,r)}}var M=(0,R.observer)((f=d=function(e){(0,S.default)(r,e);var t=j(r);function r(e){var n;return(0,y.default)(this,r),n=t.call(this,e),(0,g.default)(n,"isUserMoved",u,(0,b.default)(n)),(0,g.default)(n,"parameters",l,(0,b.default)(n)),(0,g.default)(n,"showParamsModal",s,(0,b.default)(n)),(0,g.default)(n,"handleRefresh",i,(0,b.default)(n)),(0,g.default)(n,"handleProceed",c,(0,b.default)(n)),n.handelShowProceedModal=function(e,t){var r=e.parameters,a=(0,v.default)(e,["parameters"]);n.parameters=r,n.elseParams=a,(0,N.default)(r)?n.handleProceed(r,t):n.showParamsModal=!0},n.hideProceedModal=function(){n.showParamsModal=!1},n.draggerCref=k.default.createRef(),n}return(0,E.default)(r,[{key:"componentDidUpdate",value:function(){this.draggerCref.current&&!this.draggerCref.current.isMoved&&this.draggerCref.current.initialComponent&&this.draggerCref.current.initialComponent()}},{key:"render",value:function(){var e=this.props,t=e.isEditMode,r=e.jsonData;return k.default.createElement(k.default.Fragment,null,k.default.createElement(w.default,{ref:this.draggerCref,className:L.default.container,enableToggleFullScreen:!0,XOffset:30,YOffset:60},k.default.createElement(T.default,{isEditMode:t,stages:r,onProceed:this.handelShowProceedModal,onBreak:this.context.onBreak})),k.default.createElement(C.default,{visible:this.showParamsModal,parameters:(0,P.toJS)(this.parameters),onCancel:this.hideProceedModal,onOk:this.handleProceed}))}}]),r}(k.default.Component),d.contextTypes={onProceed:I.default.func,onBreak:I.default.func},o=f,u=(0,O.default)(o.prototype,"isUserMoved",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=(0,O.default)(o.prototype,"parameters",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,O.default)(o.prototype,"showParamsModal",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,O.default)(o.prototype,"handleRefresh",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.scale=1,e.translateX=0,e.translateY=0}}}),c=(0,O.default)(o.prototype,"handleProceed",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,h.default)(p.default.mark((function t(r,n){return p.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.context.onProceed(x({parameters:r},e.elseParams),"function"==typeof n?n:void 0);case 2:e.showParamsModal=!1;case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),a=o))||a;t.default=M},3574:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,u,l,s=n(r(109)),i=n(r(91)),c=n(r(12)),d=n(r(13)),f=n(r(135)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(74)),g=(n(r(92)),n(r(0))),y=r(5),E=r(70),b=n(r(3575)),S=n(r(1332));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var D=(0,E.observer)((o=function(e){(0,p.default)(r,e);var t=_(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,i.default)(e,"heights",u,(0,f.default)(e)),(0,i.default)(e,"setHeight",l,(0,f.default)(e)),e}return(0,d.default)(r,[{key:"render",value:function(){var e=this,t=this.props.stages;return g.default.createElement(g.default.Fragment,null,g.default.createElement(S.default,{index:-1,heights:this.sumHeights}),t.map((function(t,r){return g.default.createElement(g.default.Fragment,{key:JSON.stringify(t)},g.default.createElement(b.default,{nodes:(0,y.toJS)(t),index:r,setHeight:e.setHeight(r),onProceed:e.props.onProceed,onBreak:e.props.onBreak}),g.default.createElement(S.default,{index:r,heights:e.sumHeights}))})))}},{key:"sumHeights",get:function(){var e=this.props.stages,t=void 0===e?[]:e;return this.heights.slice(0,t.length).map((function(e){var t=0;return e.map((function(e){return t+=e}))}))}}]),r}(g.default.Component),u=(0,v.default)(o.prototype,"heights",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,v.default)(o.prototype,"sumHeights",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"sumHeights"),o.prototype),l=(0,v.default)(o.prototype,"setHeight",[y.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return function(r){var n=(0,s.default)(e.heights);n[t]=r,e.heights=n}}}}),a=o))||a;t.default=D},3575:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(71)),u=a(n(21)),l=a(n(12)),s=a(n(13)),i=a(n(19)),c=a(n(20)),d=a(n(18)),f=a(n(0)),p=a(n(3)),m=a(n(1)),h=a(n(16)),v=n(25),g=n(289),y=a(n(818)),E=a(n(3576));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var S=function(e){(0,i.default)(n,e);var r=b(n);function n(e){var t;return(0,l.default)(this,n),(t=r.call(this,e)).handleProceed=function(e,r){return function(){t.setState({runLoading:!0}),t.props.onProceed({parameters:e.input.parameters,nodeId:r,stepId:e.id,inputId:e.input.id},(function(){t.setState({runLoading:!1})}))}},t.handleBreak=function(e,r){return function(){t.setState({runLoading:!0}),t.props.onBreak({nodeId:r,stepId:e.id,inputId:e.input.id},(function(){t.setState({runLoading:!1})}))}},t.domTree=[],t.state={runLoading:!1},t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.calculateHeight()}},{key:"calculateHeight",value:function(){this.heights=this.domTree.map((function(e){return e.clientHeight})),this.props.setHeight(this.heights)}},{key:"renderCard",value:function(e){var r,n,a=e.steps,l=void 0===a?[]:a,s="",i=l.find((function(e,t){var r="FINISHED"===e.state&&"SUCCESS"!==e.result;return r||(s=t),r?e:null})),c=("ABORTED"===this.context.result||"FAILURE"===this.context.result)&&!e.result,d=!(c||e.state&&"QUEUED"!==e.state),m=e.state&&"PAUSED"===e.state;if(c)return f.default.createElement("div",{className:(0,p.default)(E.default.pipelineCard)},f.default.createElement("div",{className:E.default.pipelineCard__title},e.displayName),f.default.createElement("div",{className:E.default.pipelineCard__content},f.default.createElement("div",{className:E.default.pipelineCard__item},f.default.createElement("div",{className:(0,p.default)(E.default.content__status,E.default.content__status__quene)},t("ABORTED")))));if(m){var b=e.steps.find((function(e){return e.input}));if("FAILURE"===this.context.result)return f.default.createElement("div",{className:(0,p.default)(E.default.pipelineCard,E.default["pipelineCard--paused"])},f.default.createElement("div",{className:E.default.pipelineCard__title},e.displayName),f.default.createElement("div",{className:E.default.pipelineCard__content},f.default.createElement("div",{className:E.default.pipelineCard__item},f.default.createElement("p",{className:E.default.content__title__paused},t("WAITING_FOR_INPUT")),f.default.createElement("div",{className:(0,p.default)(E.default.content__status,E.default.content__status__quene)},t("TASK_FAILED_NOT_OPERATIONAL")))));var S=(0,h.default)(b,"approvable");return f.default.createElement("div",{className:(0,p.default)(E.default.pipelineCard,E.default["pipelineCard--paused"])},f.default.createElement("div",{className:E.default.pipelineCard__title},e.displayName),f.default.createElement("div",{className:E.default.pipelineCard__content},f.default.createElement("div",{className:E.default.pipelineCard__item},f.default.createElement("p",{className:E.default.content__title__paused},t("WAITING_FOR_INPUT")),f.default.createElement("p",{className:E.default.content__title__paused},(0,h.default)(b,"input.message")),f.default.createElement("div",{className:(0,p.default)(E.default.content__status,E.default.content__status__quene)},f.default.createElement(f.default.Fragment,null,f.default.createElement(v.Button,{size:"small",type:"primary",loading:this.state.runLoading,onClick:this.handleProceed(b,e.id),disabled:!S},t((0,h.default)(b,"input.ok")||"PROCEED")),f.default.createElement(v.Button,{size:"small",type:"danger",loading:this.state.runLoading,onClick:this.handleBreak(b,e.id),disabled:!S},t("BREAK")))))))}return f.default.createElement("div",{className:(0,p.default)(E.default.pipelineCard,(r={},(0,u.default)(r,E.default["pipelineCard--error"],i),(0,u.default)(r,E.default["pipelineCard--queue"],d),r))},f.default.createElement("div",{className:E.default.pipelineCard__title},e.displayName),f.default.createElement("div",{className:E.default.pipelineCard__content},f.default.createElement("div",{className:E.default.pipelineCard__item},d?null:f.default.createElement("div",{className:E.default.content__title},t("STEPS_COMPLETE_TOTAL",{complete:""===s?0:s+1,total:l.length})),d&&e.causeOfBlockage?f.default.createElement("p",{className:E.default.errorMessage},e.causeOfBlockage):null,f.default.createElement("div",{className:(0,p.default)(E.default.content__status,(n={},(0,u.default)(n,E.default.content__status__error,i),(0,u.default)(n,E.default.content__status__quene,d),n))},d?null:f.default.createElement(y.default,(0,o.default)({},(0,g.getPipelineStatus)(e),{hasLabel:!1})),this.renderStatus(e,i)))))}},{key:"renderStatus",value:function(e,r){if(!e.state||"QUEUED"===e.state)return t("QUEUED");if("NOT_BUILT"===e.state)return t("NOT_BUILT");if("SKIPPED"===e.state)return t("SKIPPED");if("PAUSED"===e.state)return t("PAUSED");if("ABORTED"===e.result)return t("ABORTED");if(r||"FAILURE"===e.result){var n=(0,h.default)(r,"displayName","");return"Wait for interactive input"===n?f.default.createElement("span",{className:E.default.errorMessage},t("CANCELLED_IN_REVIEW")):n||f.default.createElement("span",{className:E.default.errorMessage},t("FAILED"))}return"FINISHED"!==e.state?t("RUNNING"):t("SUCCESSFUL")}},{key:"render",value:function(){var e=this,t=this.props.nodes;return Array.isArray(t)?f.default.createElement("div",{className:E.default.pipeline_column},t.map((function(t,r){return f.default.createElement("div",{key:JSON.stringify(t),ref:function(t){r?e.domTree[r]=t:e.domTree=[t]}},e.renderCard(t,r))}))):f.default.createElement("div",{className:E.default.pipeline_column},f.default.createElement("div",{ref:function(t){e.domTree=[t]}},this.renderCard(t)))}}]),n}(f.default.Component);r.default=S,S.contextTypes={result:m.default.string}},3576:function(e,t,r){e.exports={pipelineCard:"_2eHBzosCxbgtloqHDn1-Ex","pipelineCard--error":"_2a6xR8GNuS0WVUKb19NUNR",pipelineCard__title:"_2jIhkiVtLET_xvuGZ-0M-6",pipelineCard__content:"_2T51miiusy8tWiUZmCux0q","pipelineCard--queue":"_3VZzEVJYHZPMpNZ4eDRXss","pipelineCard--paused":"v22GI6pGaLWAoWVvxwD5c",content__title__paused:"Pnq2vGrXWut7p-pStLEub",pipelineCard__item:"SR1CpCBrPBNkI7Ul2_EDK",content__title:"_2cmMrQLyRDmg3OHpHuBbIm",content__detail:"iwd1h6uag7bPGEDdkNh1_",content__status:"_1lkOPUVjrmRUkQA0p7w858",content__status__error:"_2IiISSMW_ulN17yQJlI8uU",content__status__quene:"_30zBiI2PKLrxdi9m930M3g",errorMessage:"_2A_dHZbdDPFnx0KKnRZY7Y",pipeline_column:"_1O8inhZFVScpzI2D4NJS5C"}},3577:function(e,t,r){e.exports={pipeline_column:"_20jzi3f52Hrb5pgs-646AE",container:"_3xW8vKI_CL7cAuQZ9TwYGQ",controls:"_2jEekIW0yyt9loU5COPCDB",control:"VAw4xLNG7YiUysd4l1e7a","slider-wrapper":"_2Q30NeHKzFm0-m0p7oEjhs"}},3578:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l,s,i,c,d=a(n(71)),f=a(n(21)),p=a(n(49)),m=a(n(50)),h=a(n(91)),v=a(n(12)),g=a(n(13)),y=a(n(135)),E=a(n(19)),b=a(n(20)),S=a(n(18)),_=a(n(74)),D=(a(n(92)),a(n(0))),O=a(n(3)),k=a(n(820)),R=a(n(32)),N=a(n(23)),P=n(5),I=n(70),w=n(25),C=a(n(818)),T=n(289),L=n(37),A=a(n(1519)),x=a(n(3579)),j=a(n(1520)),M=a(n(3581));function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,S.default)(e);if(t){var a=(0,S.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,b.default)(this,r)}}var F=(0,I.observer)((u=function(e){(0,E.default)(o,e);var r,n,a=H(o);function o(e){var t;return(0,v.default)(this,o),t=a.call(this,e),(0,h.default)(t,"isShowLog",l,(0,y.default)(t)),(0,h.default)(t,"activeNodeIndex",s,(0,y.default)(t)),(0,h.default)(t,"refreshFlag",i,(0,y.default)(t)),t.logRefresh=null,(0,h.default)(t,"updateActiveTabs",c,(0,y.default)(t)),t.handleDownloadLogs=function(){t.props.handleDownloadLogs()},t.handleExpandErrorStep=function(){var e=(0,P.toJS)(t.props.nodes),r=[0];(0,N.default)(e)&&e.forEach((function(e,t){if((0,N.default)(e)){var n=e.findIndex((function(e){return"SUCCESS"!==e.result}));return r[0]=t,r[1]=n>-1?n:0,!1}if("SUCCESS"!==e.result)return r[0]=t,!1})),t.activeNodeIndex=[].concat(r)},t.handleRefresh=(0,k.default)((function(){t.refreshFlag=!t.refreshFlag}),1e3),t.handleVisableLog=function(){t.isShowLog=!t.isShowLog},t.store=new A.default,t.reaction=(0,P.reaction)((function(){return t.isEmptySteps}),(function(){clearInterval(t.getIndexLogInterval),t.isEmptySteps&&Array.isArray(t.activeStage.steps)&&(t.getIndexLogInterval=setInterval(t.getPipelineIndexLog,4e3))})),t}return(0,g.default)(o,[{key:"componentDidMount",value:(n=(0,m.default)(p.default.mark((function e(){return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPipelineIndexLog();case 2:this.handleExpandErrorStep();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getPipelineIndexLog",value:(r=(0,m.default)(p.default.mark((function e(){return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.getRunStatusLogs(this.params);case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"renderLeftTab",value:function(e,r){var n,a=this;return Array.isArray(e)?D.default.createElement("div",(n={key:e.id},(0,f.default)(n,"key",r),(0,f.default)(n,"className",j.default.stageContainer),n),D.default.createElement("div",{className:j.default.cutTitle},t("STAGE")),e.map((function(e,t){return D.default.createElement("div",{key:e.id,onClick:a.updateActiveTabs(r,t),className:(0,O.default)(j.default.leftTab,(0,f.default)({},j.default.leftTab__active,a.activeNodeIndex[0]===r&&a.activeNodeIndex[1]===t))},D.default.createElement(C.default,(0,d.default)({},(0,T.getPipelineStatus)(e),{hasLabel:!1})),e.displayName)}))):D.default.createElement("div",{key:e.id,className:j.default.stageContainer},D.default.createElement("div",{className:j.default.cutTitle},t("STAGE")),D.default.createElement("div",{className:(0,O.default)(j.default.leftTab,(0,f.default)({},j.default.leftTab__active,this.activeNodeIndex[0]===r)),onClick:this.updateActiveTabs(r,0)},D.default.createElement(C.default,(0,d.default)({},(0,T.getPipelineStatus)(e),{hasLabel:!1})),e.displayName))}},{key:"renderLogContent",value:function(){var e=this,t=this.store.runDetailLogs;return this.isEmptySteps?"FINISHED"!==this.activeStage.state?null:D.default.createElement("pre",{className:j.default.LogItem_content},t):this.activeStage.steps.map((function(t){return D.default.createElement(x.default,{key:t.id,step:t,nodeId:e.activeStage.id,params:e.params,refreshFlag:e.refreshFlag})}))}},{key:"render",value:function(){var e,r,n=this,a=this.props.nodes,o=(0,P.toJS)(a);if(this.isShowLog)return D.default.createElement(M.default,{store:this.store,isShowLog:this.isShowLog,params:this.params,handleVisableLog:this.handleVisableLog});var u=null!==(e=null===(r=this.activeStage)||void 0===r?void 0:r.durationInMillis)&&void 0!==e?e:"";return D.default.createElement("div",{className:j.default.container},D.default.createElement("div",{className:j.default.left},o.map((function(e,t){return n.renderLeftTab(e,t)}))),D.default.createElement("div",{className:j.default.right},D.default.createElement("div",{className:j.default.header},D.default.createElement("span",null,t("DURATION_VALUE",{value:u?(0,L.formatUsedTime)(u):"-"})),D.default.createElement(w.Button,{onClick:this.handleDownloadLogs},t("DOWNLOAD_LOGS")),D.default.createElement(w.Button,{onClick:this.handleVisableLog},t("VIEW_LOGS")),D.default.createElement(w.Button,{onClick:this.handleRefresh},t("REFRESH"))),D.default.createElement("div",{className:j.default.logContainer},this.renderLogContent())))}},{key:"activeStage",get:function(){var e=this.props.nodes,t=(0,P.toJS)(e[this.activeNodeIndex[0]]);return(0,N.default)(t)&&!(0,R.default)(t)?t[this.activeNodeIndex[1]]:t}},{key:"isEmptySteps",get:function(){return(0,R.default)(this.activeStage.steps)}},{key:"params",get:function(){var e=this.props,t=e.params,r=e.runId;return Y(Y({},t),{},{runId:r})}}]),o}(D.default.Component),l=(0,_.default)(u.prototype,"isShowLog",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,_.default)(u.prototype,"activeStage",[P.computed],Object.getOwnPropertyDescriptor(u.prototype,"activeStage"),u.prototype),(0,_.default)(u.prototype,"isEmptySteps",[P.computed],Object.getOwnPropertyDescriptor(u.prototype,"isEmptySteps"),u.prototype),s=(0,_.default)(u.prototype,"activeNodeIndex",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[0,0]}}),i=(0,_.default)(u.prototype,"refreshFlag",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c=(0,_.default)(u.prototype,"updateActiveTabs",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){return function(){e.activeNodeIndex=[t,r]}}}}),(0,_.default)(u.prototype,"getPipelineIndexLog",[P.action],Object.getOwnPropertyDescriptor(u.prototype,"getPipelineIndexLog"),u.prototype),o=u))||o;r.default=F},3579:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,u=n(r(21)),l=n(r(12)),s=n(r(13)),i=n(r(19)),c=n(r(20)),d=n(r(18)),f=n(r(74)),p=n(r(0)),m=n(r(3)),h=r(25),v=r(5),g=r(70),y=n(r(818)),E=r(289),b=n(r(3580)),S=r(37),_=n(r(1520));function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var R=(0,g.observer)((o=function(e){(0,i.default)(r,e);var t=k(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).handleExpandByFail=function(){var e=n.props.step;e&&"SUCCESS"!==e.result&&n.toggleExpand()},n.handleRefresh=function(){var e=n.props.step,t=n.store.stepLogData.hasMore;n.state.isExpand&&(t||"FINISHED"!==e.state)&&n.getLog()},n.toggleExpand=function(){var e=n.store.stepLogData.log,t=n.state.isExpand;t||e||n.getLog(),n.setState({isExpand:!t})},n.state={isExpand:!1},n.store=new b.default,n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.timer=setInterval(this.handleRefresh,4e3),this.handleExpandByFail()}},{key:"componentDidUpdate",value:function(e){this.state.isExpand&&e.refreshFlag!==this.props.refreshFlag&&(this.store.handleResetStepLog(),this.getLog())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"getLog",value:function(){var e=this.props,t=e.step,r=e.params,n=e.nodeId;this.store.getStepLog(O(O({},r),{},{nodeId:n,stepId:t.id}))}},{key:"render",value:function(){var e=this.props.step,t=this.store.stepLogData.log;return p.default.createElement("div",{className:_.default.LogItem},p.default.createElement("div",{className:(0,m.default)(_.default.LogItem__title),onClick:this.toggleExpand},p.default.createElement(h.Icon,{name:this.state.isExpand?"caret-down":"caret-right",size:16}),e.displayName,p.default.createElement("span",{className:_.default.logitem_status},p.default.createElement("span",null,e.durationInMillis?(0,S.formatUsedTime)(e.durationInMillis):"-"),p.default.createElement(y.default,(0,E.getPipelineStatus)(e)))),p.default.createElement("div",null,this.state.isExpand?p.default.createElement("pre",{className:_.default.LogItem_content},t):null))}}]),r}(p.default.Component),(0,f.default)(o.prototype,"getLog",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"getLog"),o.prototype),a=o))||a;t.default=R},3580:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,u,l=n(r(49)),s=n(r(50)),i=n(r(91)),c=n(r(12)),d=n(r(13)),f=n(r(135)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(74)),g=(n(r(92)),n(r(16))),y=r(5);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var b=(a=function(e){(0,p.default)(n,e);var t,r=E(n);function n(){var e;(0,c.default)(this,n);for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return e=r.call.apply(r,[this].concat(a)),(0,i.default)(e,"stepLogData",o,(0,f.default)(e)),(0,i.default)(e,"handleResetStepLog",u,(0,f.default)(e)),e}return(0,d.default)(n,[{key:"getStepLog",value:(t=(0,s.default)(l.default.mark((function e(t){var r,n,a,o,u,s,i,c,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.devops,n=t.cluster,a=t.name,o=t.branch,u=t.runId,s=t.nodeId,i=t.stepId,e.next=3,request.defaults({url:"".concat(this.getDevopsUrlV2({cluster:n,devops:r}),"pipelines/").concat(decodeURIComponent(a)).concat(o?"/branches/".concat(encodeURIComponent(o)):"","/runs/").concat(u,"/nodes/").concat(s,"/steps/").concat(i,"/log/?start=").concat(this.stepLogData.start||0),handler:function(e){if(200===e.status)return e.text().then((function(t){return{data:t,headers:e.headers}}))}});case 3:c=e.sent,d=this.stepLogData.log,this.stepLogData={log:d+(0,g.default)(c,"data",""),start:c.headers.get("x-text-size"),hasMore:Boolean(c.headers.get("x-more-data"))};case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}(n(r(788)).default),o=(0,v.default)(a.prototype,"stepLogData",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{log:"",start:0,hasMore:!1}}}),u=(0,v.default)(a.prototype,"handleResetStepLog",[y.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.stepLogData={log:"",start:0,hasMore:!1}}}}),a);t.default=b},3581:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l=a(n(49)),s=a(n(50)),i=a(n(12)),c=a(n(13)),d=a(n(19)),f=a(n(20)),p=a(n(18)),m=a(n(74)),h=a(n(0)),v=n(5),g=n(70),y=n(25),E=a(n(3582));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var S=(0,g.observer)((u=function(e){(0,d.default)(n,e);var r=b(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).ref=h.default.createRef(),e.store=e.props.store,e.logRefreshInterval=null,e.state={isRealtime:!1,isDownloading:!1},e.scrollToBottom=function(){var t=e.ref.current;t&&(t.scrollTop=t.scrollHeight)},e.handleGetLogs=(0,s.default)(l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPipelineIndexLog();case 2:e.handleAutoRefreshLogs();case 3:case"end":return t.stop()}}),t)}))),e.handleDownload=(0,s.default)(l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isDownloading:!0}),t.next=3,e.store.handleDownloadLogs(e.props.params);case 3:e.setState({isDownloading:!1});case 4:case"end":return t.stop()}}),t)}))),e.handleRefreshLogs=(0,s.default)(l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPipelineIndexLog();case 2:e.scrollToBottom();case 3:case"end":return t.stop()}}),t)}))),e.handleSetLogsInterval=function(t){e.logRefreshInterval=setInterval((0,s.default)(l.default.mark((function r(){return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getPipelineIndexLog();case 2:e.scrollToBottom(),e.isLogFinish&&(clearInterval(e.logRefreshInterval),t&&t());case 4:case"end":return r.stop()}}),r)}))),2e3)},e.handleRealtime=function(){e.state.isRealtime?(clearInterval(e.logRefreshInterval),e.setState({isRealtime:!1})):(e.setState({isRealtime:!0}),e.handleSetLogsInterval((function(){e.setState({isRealtime:!1})})))},e.handleAutoRefreshLogs=function(){e.isLogFinish||e.logRefreshInterval||(e.setState({isRealtime:!0}),e.handleSetLogsInterval((function(){e.setState({isRealtime:!1})}))),e.isLogFinish&&e.scrollToBottom()},e.renderOperations=function(){var r=e.state,n=r.isRealtime,a=r.isDownloading;return h.default.createElement("div",{className:E.default.operations},h.default.createElement(y.Tooltip,{content:t("BACK")},h.default.createElement(y.Icon,{name:"return",color:{primary:"#fff",secondary:"#fff"},size:20,onClick:e.props.handleVisableLog,clickable:!0,changeable:!0})),h.default.createElement("span",{className:E.default.split},"|"),h.default.createElement(y.Tooltip,{content:t(n?"STOP_REAL_TIME_LOG":"START_REAL_TIME_LOG")},h.default.createElement(y.Icon,{name:n?"stop":"start",color:{primary:"#fff",secondary:"#fff"},size:20,onClick:e.handleRealtime,clickable:!0,changeable:!0})),h.default.createElement("span",{className:E.default.split},"|"),h.default.createElement(y.Tooltip,{content:t("REFRESH")},h.default.createElement(y.Icon,{name:"refresh",color:{primary:"#fff",secondary:"#fff"},size:20,onClick:n?null:e.handleRefreshLogs,clickable:!0,changeable:!0,disabled:n})),h.default.createElement("span",{className:E.default.split},"|"),h.default.createElement(y.Tooltip,{content:t("DOWNLOAD")},a?h.default.createElement(y.Loading,{size:16}):h.default.createElement(y.Icon,{name:"download",color:{primary:"#fff",secondary:"#fff"},size:20,onClick:e.handleDownload,clickable:!0,changeable:!0})))},e}return(0,c.default)(n,[{key:"getPipelineIndexLog",value:function(){var e=this.props.params;this.store.getRunStatusLogs(e)}},{key:"componentDidMount",value:function(){this.handleGetLogs()}},{key:"componentWillUnmount",value:function(){clearInterval(this.logRefreshInterval)}},{key:"render",value:function(){var e=this.store.runDetailLogs;return h.default.createElement("div",{className:E.default.logs_container},h.default.createElement("div",{className:E.default.log,ref:this.ref},this.renderOperations(),h.default.createElement("pre",{className:E.default.LogItem_content},e)))}},{key:"isLogFinish",get:function(){for(var e=this.store.runDetailLogs.split("\n"),t=e.length-1,r=0,n=!1;r<2;)n=e[t]&&e[t].indexOf("Finished")>-1,t--,r++;return n}}]),n}(h.default.Component),(0,m.default)(u.prototype,"getPipelineIndexLog",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"getPipelineIndexLog"),u.prototype),(0,m.default)(u.prototype,"isLogFinish",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"isLogFinish"),u.prototype),o=u))||o;r.default=S},3582:function(e,t,r){e.exports={logs_container:"_1a-zP9_2YDUkWD-6LJkS9c",log:"_7SKszFrl5ToySuqKb58u_",operations:"QVvKuNdaSqvfGkf6g4REX",split:"q-xnWS4mmEgTxiHJB-Mje"}},3583:function(e,t,r){e.exports={pipelineCard:"_15Io83PX3ThKRG-aELylW-",pipelineCard__toolbar:"_2-2rg2XNK4zLkGIDllkyh",icon:"_3Kbhn58kNwzcDj56uGaotu",pipelineCard__btnGroup:"_1s6pPyPc-w54dHQomyI86W",pipelineCard__main:"_2jX4VRaYREStNMY3wXj5EN",footer:"_2trt1J67jrYmriGPqLKZDV",running_tips:"_2KW8xeUQEVlEv60ExnekFN",runningIcon:"_1UVLjnaxVf-hr4kl8rQxkm",rotate:"Dacx0RATJmtvUY10xbkIq",QueuedIcon:"_2RuQE76Kv9oKvrUnVEZMkX",breath:"_1GD36aiJGyeNr3qUQuodKa",card:"_118Qk5exDgXSaS3rqlSgX0",title:"CqPIRnLO2E1dTMGYHHyNQ",desc:"_2SC0de7wLtaphQs2_5YQYo"}},3584:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(21)),l=a(n(12)),s=a(n(13)),i=a(n(19)),c=a(n(20)),d=a(n(18)),f=a(n(0)),p=a(n(190)),m=n(5),h=n(70),v=n(279),g=n(37),y=a(n(728)),E=a(n(893));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var D=(0,h.inject)("rootStore","detailStore")(o=(0,h.observer)(o=function(e){(0,i.default)(n,e);var r=_(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=e.props.detailStore||{},e.name="Commit",e.handleFetch=function(t,r){e.routing.query(t,r)},e.getFilteredValue=function(t){return e.store.list.filters[t]},e.getColumns=function(){return[{title:t("COMMIT"),dataIndex:"commitId",width:"20%",render:function(e,t){return f.default.createElement("a",{href:t.url,target:"_blank",rel:"noreferrer noopener"},e&&e.slice(0,6))}},{title:t("AUTHOR"),dataIndex:"author",width:"20%",render:function(e){return e||"-"}},{title:t("MESSAGE"),dataIndex:"title",width:"40%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"startTime",isHideable:!0,width:"15%",render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;this.unsubscribe=this.routing.history.subscribe((function(r){if(r.pathname===e.props.match.url){var n=(0,v.parse)(r.search.slice(1));e.getData(S(S({},t),n))}}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"getData",value:function(e){this.store.getCommits(S({},e))}},{key:"render",value:function(){var e=(0,m.toJS)(this.store.commitsList),r=e.data,n=e.filters,a=e.selectedRowKeys,o=e.isLoading,u=e.total,l=e.page,s=e.limit,i=!1===o&&0===u,c=(0,p.default)(n,"page");if(i&&!n.page)return f.default.createElement(E.default,{desc:t("NO_COMMIT_FOUND")});var d={total:u,page:l,limit:s};return f.default.createElement(y.default,{data:r,rowKey:"commitId",columns:this.getColumns(),filters:c,pagination:d,isLoading:o,selectedRowKeys:a,onFetch:this.handleFetch,hideSearch:!0})}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),n}(f.default.Component))||o)||o;r.default=D},3585:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=a(n(21)),l=a(n(12)),s=a(n(13)),i=a(n(19)),c=a(n(20)),d=a(n(18)),f=a(n(0)),p=n(5),m=n(70),h=n(279),v=a(n(190)),g=n(25),y=n(37),E=a(n(728)),b=a(n(893));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var O=(0,m.inject)("rootStore","detailStore")(o=(0,m.observer)(o=function(e){(0,i.default)(n,e);var r=D(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).name="Artifacts",e.store=e.props.detailStore||{},e.handleFetch=function(t,r){e.routing.query(t,r)},e.getDownloadUrl=function(t,r,n){var a=e.props.match.params;return"default"!==a.cluster&&a.cluster?"/kapis/clusters/".concat(a.cluster,"/devops.kubesphere.io/v1alpha3/namespaces/").concat(a.devops,"/pipelineruns/").concat(r,"/artifacts/download?filename=").concat(n):"/kapis/devops.kubesphere.io/v1alpha3/namespaces/".concat(a.devops,"/pipelineruns/").concat(r,"/artifacts/download?filename=").concat(n)},e.getFilteredValue=function(t){return e.store.list.filters[t]},e.getColumns=function(r,n){return[{title:t("NAME"),dataIndex:"path",width:"40%",render:function(t){return f.default.createElement("a",{href:e.getDownloadUrl(r,n,t),target:"_blank",download:!0,rel:"noreferrer noopener"},t)}},{title:t("SIZE"),dataIndex:"size",width:"40%",render:function(e){return(0,y.formatSize)(e)}},{title:t("DOWNLOAD"),width:"20%",key:"download",render:function(t){return f.default.createElement("a",{href:e.getDownloadUrl(r,n,t),target:"_blank",download:!0,rel:"noreferrer noopener"},f.default.createElement(g.Icon,{name:"download"}))}}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;this.unsubscribe=this.routing.history.subscribe((function(r){if(r.pathname===e.props.match.url){var n=(0,h.parse)(r.search.slice(1));e.getData(_(_({},t),n))}}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"getData",value:function(e){this.store.getArtifacts(_({},e))}},{key:"render",value:function(){var e=(0,p.toJS)(this.store.artifactsList),r=e.data,n=e.pipeline,a=e.pipelineRun,o=e.filters,u=e.isLoading,l=e.total,s=e.page,i=e.limit,c=0===l,d=(0,v.default)(o,"page","workspace");if(c&&!o.page)return f.default.createElement(b.default,{desc:t("NO_ARTIFACT_FOUND_TIP")});var m={total:l,page:s,limit:i};return f.default.createElement(E.default,{data:r,columns:this.getColumns(n,a),filters:d,rowKey:"path",pagination:m,isLoading:u,onFetch:this.handleFetch,hideSearch:!0})}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"prefix",get:function(){return this.props.match.url}}]),n}(f.default.Component))||o)||o;r.default=O},3586:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=n(r(12)),u=n(r(13)),l=n(r(19)),s=n(r(20)),i=n(r(18)),c=n(r(0)),d=r(5),f=r(70),p=n(r(3587)),m=n(r(3589));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var v=(0,f.inject)("rootStore","sonarqubeStore")(a=(0,f.observer)(a=function(e){(0,l.default)(r,e);var t=h(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a))).renderResult=function(){var t=e.props.sonarqubeStore,r=t.detail,n=void 0===r?{}:r,a=t.isLoading;return c.default.createElement(p.default,{detail:n,loading:a})},e.renderIssues=function(){var t=e.props.sonarqubeStore,r=t.detail,n=void 0===r?{}:r,a=t.isLoading;return c.default.createElement(m.default,{detail:n,issues:(0,d.toJS)(n.issues),loading:a})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.sonarqubeStore,t=e.detail,r=void 0===t?{}:t,n=e.isLoading;r.totalStatus||n||this.props.rootStore.routing.push("./activity")}},{key:"render",value:function(){return c.default.createElement("div",null,this.renderResult(),this.renderIssues())}}]),r}(c.default.Component))||a)||a;t.default=v},3587:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(21)),u=a(n(12)),l=a(n(13)),s=a(n(19)),i=a(n(20)),c=a(n(18)),d=a(n(0)),f=a(n(1)),p=a(n(3)),m=a(n(16)),h=a(n(741)),v=n(25),g=n(37),y=a(n(3588)),E=a(n(1521));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var S=function(e){(0,s.default)(n,e);var r=b(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(e=r.call.apply(r,[this].concat(l))).goToSonarqube=function(){var t=e.props.detail.sonarqubeDashboardUrl,r=(0,m.default)(globals,"config.devops.sonarqubeURL");if(r){var n=(0,g.parseUrl)(t),a=r+(0,m.default)(n,"pathname","")+(0,m.default)(n,"search","");window.open(a)}else window.open(t)},e.renderTotalResult=function(){var r,n="ERROR"!==e.props.detail.totalStatus;return d.default.createElement("div",{className:(0,p.default)(E.default.totalResult,(r={},(0,o.default)(r,E.default.success,n),(0,o.default)(r,E.default.error,!n),r))},d.default.createElement(v.Icon,{name:n?"check":"close",className:E.default.icon,size:24,color:{primary:"#ffffff",secondary:"#ffffff"}}),d.default.createElement("p",null,t("CODE_CHECK")),d.default.createElement("p",null,n?t("PASSED"):t("FAILED")))},e.renderOtherResults=function(){var r=e.props.detail,n=r.bugRating,a=r.bugs,o=r.securityRating,u=r.vulnerabilities,l=r.codeSmells,s=r.coverage,i=r.key,c=r.totalCode>1e3?parseFloat(r.totalCode/1e3).toFixed(2):r.totalCode,f=r.totalCode>1e3?"K":"";return d.default.createElement("div",{className:E.default.otherCards},d.default.createElement(y.default,{title:t("CODE_LINE_COUNT"),value:c,unit:f,url:"".concat(e.sonarqubeOrigin,"/component_measures?id=").concat(i,"&metric=ncloc")}),d.default.createElement(y.default,{hasIcon:!0,title:t("BUG_PL"),value:a,unit:"",resultClass:n,url:"".concat(e.sonarqubeOrigin,"/project/issues?id=").concat(i,"&resolved=false&types=BUG")}),d.default.createElement(y.default,{hasIcon:!0,title:t("VULNERABILITY_PL"),value:u,unit:"",resultClass:o,url:"".concat(e.sonarqubeOrigin,"/project/issues?id=").concat(i,"&resolved=false&types=VULNERABILITY")}),d.default.createElement(y.default,{hasIcon:!0,title:t("CODE_SMELL_PL"),value:l,unit:"",url:"".concat(e.sonarqubeOrigin,"/project/issues?id=").concat(i,"&resolved=false&types=CODE_SMELL")}),d.default.createElement(y.default,{hasIcon:!0,title:t("COVERAGE"),value:s,unit:"%",url:"".concat(e.sonarqubeOrigin,"/component_measures?id=").concat(i,"&metric=coverage")}))},e.renderLogo=function(){return d.default.createElement("span",{onClick:e.goToSonarqube,className:E.default.logo})},e}return(0,l.default)(n,[{key:"render",value:function(){return this.props.loading?null:d.default.createElement(h.default,{title:t("TEST_RESULTS"),operations:this.renderLogo()},d.default.createElement("div",{className:E.default.content},this.renderTotalResult(),this.renderOtherResults()))}},{key:"sonarqubeOrigin",get:function(){var e=this.props.detail.sonarqubeDashboardUrl;return(0,m.default)(globals,"config.devops.sonarqubeURL")||(0,g.parseUrl)(e).origin}}]),n}(d.default.Component);S.propTypes={detail:f.default.object,loading:f.default.bool};var _=S;r.default=_},3588:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(12)),o=n(r(13)),u=n(r(19)),l=n(r(20)),s=n(r(18)),i=n(r(0)),c=r(25),d=n(r(1521));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var p=["A","B","C","D"],m=function(e){(0,u.default)(r,e);var t=f(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,t=e.hasIcon,r=e.title,n=e.value,a=e.resultClass,o=e.unit,u=e.url,l=p[parseInt(a,10)-1];return i.default.createElement("div",{className:d.default.resultCard},i.default.createElement("p",{className:d.default.title},t?i.default.createElement(c.Icon,{name:"debug",size:20}):null,r,a?i.default.createElement("span",{className:d.default[l]},l):null),i.default.createElement("p",{className:d.default.value},u?i.default.createElement("a",{href:u,target:"_blank",rel:"noreferrer noopener"},i.default.createElement("span",null,n)):i.default.createElement("span",null,n),i.default.createElement("span",{className:d.default.unit},o)))}}]),r}(i.default.PureComponent);t.default=m,m.defaultProps={hasIcon:!1,title:"-",value:0,url:""}},3589:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(12)),u=a(n(13)),l=a(n(19)),s=a(n(20)),i=a(n(18)),c=a(n(0)),d=a(n(1)),f=a(n(16)),p=a(n(741)),m=n(37),h=a(n(3590)),v=a(n(1522)),g=a(n(1170));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var E=function(e){(0,l.default)(n,e);var r=y(n);function n(e){var a;(0,o.default)(this,n),(a=r.call(this,e)).showMore=function(){a.setState({showMore:!0})},a.renderTitle=function(){var e=a.props.detail,r=e.critical,n=e.major,o=e.minor,u=e.info,l=e.blocker;return c.default.createElement("div",{className:g.default.header},c.default.createElement("span",{className:g.default.title},t("ISSUE_PL")),c.default.createElement("div",{className:g.default.details},c.default.createElement("span",null,c.default.createElement(v.default,{errorClass:"blocker"}),l||0),c.default.createElement("span",null,c.default.createElement(v.default,{errorClass:"critical"}),r||0),c.default.createElement("span",null,c.default.createElement(v.default,{errorClass:"major"}),n||0),c.default.createElement("span",null,c.default.createElement(v.default,{errorClass:"minor"}),o||0),c.default.createElement("span",null,c.default.createElement(v.default,{errorClass:"info"}),u||0)))},a.renderIssue=function(e,t){var r=a.props.issues;if(a.state.showMore&&t>10)return null;var n=0===t||e.component!==r[t-1].component;return c.default.createElement(h.default,{key:t,hasTitle:n,issue:e,origin:a.sonarqubeOrigin})},a.renderMoreBtn=function(){return a.state.showMore?null:c.default.createElement("p",{className:g.default.titleShowMore},t("DISPLAY_ONLY_LAST_TEN"),",",c.default.createElement("span",{onClick:a.showMore},t("DISPLAY_ALL")))};var u=e.issues.length<=10;return a.state={showMore:u},a}return(0,u.default)(n,[{key:"sonarqubeOrigin",get:function(){var e=this.props.detail.sonarqubeDashboardUrl;return(0,f.default)(globals,"config.devops.sonarqubeURL")||(0,m.parseUrl)(e).origin}}]),(0,u.default)(n,[{key:"render",value:function(){var e=this,r=this.props,n=r.loading,a=r.issues;return n?null:a.length?c.default.createElement(p.default,{title:this.renderTitle(),operations:this.renderMoreBtn()},c.default.createElement("div",{className:g.default.content},a.map((function(t,r){return e.renderIssue(t,r)})),this.state.showMore?null:c.default.createElement("div",{className:g.default.displayAll,onClick:this.showMore},t("DISPLAY_ALL")))):null}}]),n}(c.default.Component);E.propTypes={issues:d.default.array,loading:d.default.bool},E.defaultProps={issues:[]};var b=E;r.default=b},3590:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(12)),u=a(n(13)),l=a(n(19)),s=a(n(20)),i=a(n(18)),c=a(n(0)),d=a(n(1)),f=a(n(3)),p=n(25),m=a(n(1522)),h=a(n(1170));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var g=function(e){(0,l.default)(n,e);var r=v(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return(e=r.call.apply(r,[this].concat(u))).renderErrorCode=function(r){var n=e.props.origin,a=(r.severity||"").toLocaleLowerCase();return c.default.createElement("a",{key:r.line,href:"".concat(n,"/project/issues?id=").concat(r.project,"&open=").concat(r.key),target:"_blank",rel:"noreferrer noopener"},c.default.createElement("div",{className:(0,f.default)(h.default.errorCard,h.default["card-".concat(a)]),onClick:e.handleGoToDetail},c.default.createElement("p",{className:h.default.message},r.message),c.default.createElement("div",{className:h.default.status},c.default.createElement(m.default,{errorClass:a}),c.default.createElement("span",{className:h.default.type},c.default.createElement(p.Icon,{name:"debug",size:20}),t(r.type.toUpperCase())),c.default.createElement("span",null,t("LINE_VALUE",{value:r.line})))))},e}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props,t=e.issue;return e.hasTitle?c.default.createElement(c.default.Fragment,null,c.default.createElement("p",{key:t.component,className:h.default.fileTitle},t.component),this.renderErrorCode(t)):this.renderErrorCode(t)}}]),n}(c.default.PureComponent);g.propTypes={issues:d.default.array,index:d.default.number},g.defaultProps={issues:[]};var y=g;r.default=y},3591:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.default=void 0;var a=n(r(49)),o=n(r(50)),u=n(r(12)),l=n(r(13)),s=n(r(19)),i=n(r(20)),c=n(r(18)),d=n(r(0)),f=r(5),p=r(70),m=r(37),h=n(r(1142)),v=n(r(16)),g=n(r(1143));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var E=function(e){(0,s.default)(n,e);var t,r=y(n);function n(e){var t;return(0,u.default)(this,n),(t=r.call(this,e)).eventStore=new h.default,t}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:(t=(0,o.default)(a.default.mark((function e(){var t,r,n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.store.runDetail._originData,r=void 0===t?{}:t,n=(0,v.default)(r,"metadata.namespace",""),o={"involvedObject.name":(0,v.default)(r,"metadata.name",""),"involvedObject.namespace":n,"involvedObject.kind":r.kind,"involvedObject.uid":(0,v.default)(r,"metadata.uid","")},this.eventStore.fetchList({namespace:n,cluster:this.cluster,fieldSelector:(0,m.joinSelector)(o)});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=(0,f.toJS)(this.eventStore.list),t=e.data,r=e.isLoading;return d.default.createElement(g.default,{data:t,loading:r})}},{key:"store",get:function(){return this.props.detailStore}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"module",get:function(){return this.store.module}}]),n}(d.default.Component),b=(0,p.inject)("detailStore")((0,p.observer)(E));t.default=b;var S=E;t.Component=S},3592:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l=a(n(71)),s=a(n(21)),i=a(n(12)),c=a(n(13)),d=a(n(19)),f=a(n(20)),p=a(n(18)),m=a(n(74)),h=a(n(0)),v=a(n(972)),g=n(635),y=a(n(1010)),E=n(70),b=a(n(16)),S=a(n(191)),_=n(37),D=n(5),O=a(n(637)),k=a(n(3593)),R=a(n(1169)),N=a(n(1514));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,E.inject)("rootStore")(o=(0,E.observer)(o=(0,g.trigger)((u=function(e){(0,d.default)(n,e);var r=w(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).state={showEdit:!1,showYamlEdit:!1,deleteModule:!1,isLoading:!0},e.store=new y.default,e.clusterStore=new O.default,e.fetchData=function(){var t=e.props.match.params;e.store.fetchDetail({name:t.cd,devops:e.devops,cluster:e.cluster})},e.getOperations=function(){return[{key:"edit",type:"control",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){e.trigger("resource.baseinfo.edit",{formTemplate:e.store.detail,detail:I(I({},e.store.detail),{},{cluster:e.cluster}),success:e.fetchData})}},{key:"sync",icon:"changing-over",text:t("SYNC"),action:"edit",onClick:function(){e.trigger("cd.sync",{title:t("SYNC_RESOURCE"),formTemplate:(0,S.default)((0,D.toJS)(e.store.detail),"repoSource"),devops:e.devops,cluster:e.cluster,noCodeEdit:!0,application:e.store.detail.name,success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){e.trigger("resource.yaml.edit",{detail:I(I({},e.store.detail),{},{cluster:e.cluster}),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){e.trigger("cd.delete",{type:"CONTINUOUS_DEPLOYMENT",detail:I(I({},e.store.detail),{},{cluster:e.cluster}),success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=e.store.detail,n=(0,b.default)(r,"status.reconciledAt");return[{name:t("HEALTH_STATUS"),value:h.default.createElement(R.default,{type:r.healthStatus,label:r.healthStatus,noBolder:!0})},{name:t("DEPLOY_LOCATION"),value:h.default.createElement(N.default,{destination:r.destination,clustersDetail:e.clusters})},{name:t("CODE_REPOSITORY_URL"),value:(0,b.default)(r,"repoSource.repoURL","-")},{name:t("REVISION"),value:(0,b.default)(r,"repoSource.targetRevision","-")},{name:t("CODE_RELATIVE_PATH"),value:(0,b.default)(r,"repoSource.path","-")},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:n?(0,_.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss"):"-"},{name:t("CREATOR"),value:r.creator}]},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(),this.clusterStore.fetchList({limit:-1})}},{key:"render",value:function(){var e=this.store.detail,r={detailStore:this.store},n={module:"applications",name:(0,_.getDisplayName)(e),desc:e.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CONTINUOUS_DEPLOYMENT_PL"),url:this.listUrl}]};return h.default.createElement(v.default,(0,l.default)({routes:k.default},n,{stores:r}))}},{key:"clusters",get:function(){return this.clusterStore.list.data}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,n=e.devops;return"/".concat(t,"/clusters/").concat(r,"/devops/").concat(n,"/cd")}},{key:"devops",get:function(){return this.props.match.params.devops}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),n}(h.default.Component),(0,m.default)(u.prototype,"clusters",[D.computed],Object.getOwnPropertyDescriptor(u.prototype,"clusters"),u.prototype),o=u))||o)||o)||o;r.default=C},3593:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(3594)),u="/:workspace/clusters/:cluster/devops/:devops/cd/:cd",l=[{path:"".concat(u,"/syncStatus"),title:"SYNC_STATUS",component:o.default},(0,a.getIndexRoute)({path:u,to:"".concat(u,"/syncStatus"),exact:!0})];t.default=l},3594:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u,l,s=a(n(12)),i=a(n(13)),c=a(n(19)),d=a(n(20)),f=a(n(18)),p=a(n(0)),m=n(70),h=n(5),v=a(n(1)),g=a(n(728)),y=a(n(16)),E=a(n(32)),b=n(25),S=n(973),_=n(37),D=a(n(3595)),O=a(n(1169));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var R=(0,m.inject)("detailStore")(o=(0,m.observer)((l=u=function(e){(0,c.default)(n,e);var r=k(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).refreshTimer=setInterval((function(){return e.getDetail()}),4e3),e.getDetail=function(){var t=e.props.match.params;e.props.detailStore.fetchDetail({name:t.cd,devops:t.devops,cluster:t.cluster})},e.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",width:"20%"},{title:t("TYPE"),dataIndex:"kind",width:"20%"},{title:t("PROJECT_PL"),dataIndex:"namespace",width:"15%"},{title:t("SYNC_STATUS"),dataIndex:"status",width:"10%",render:function(e){return p.default.createElement(O.default,{type:e,label:e})}},{title:t("MESSAGE"),dataIndex:"message"}]},e.renderTable=function(){var t=(0,y.default)(e.detail,"status.operationState.syncResult.resources",[]);return p.default.createElement(g.default,{hideHeader:!0,hideFooter:!0,rowKey:"name",data:t,showEmpty:0===t.length,columns:e.getColumns(),name:"sync_result"})},e.renderSyncTip=function(){var t=(0,y.default)(e.detail,"status.conditions[0]",{}),r=p.default.createElement("div",{className:D.default.statusTip},p.default.createElement("strong",null,t.type),p.default.createElement("p",null,"Last Transition Time: ",(0,_.getLocalTime)(t.lastTransitionTime).format("YYYY-MM-DD HH:mm:ss")),p.default.createElement("p",null,t.message));return(0,E.default)(t)?p.default.createElement("div",{className:D.default.syncStatus},p.default.createElement(b.Icon,{name:"rocket",size:40}),p.default.createElement("span",{className:D.default.syncStatus_icon},p.default.createElement(O.default,{type:e.detail.syncStatus,hasLabel:!1}))):p.default.createElement(b.Tooltip,{content:r},p.default.createElement("div",{className:D.default.syncStatus},p.default.createElement(b.Icon,{name:"rocket",size:40}),p.default.createElement("span",{className:D.default.syncStatus_icon},p.default.createElement(O.default,{type:e.detail.syncStatus,hasLabel:!1}))))},e}return(0,i.default)(n,[{key:"componentWillUnmount",value:function(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null)}},{key:"render",value:function(){var e=(0,y.default)(this.detail,"status.sync.revision");e=e?e.slice(0,6):"-";var r=(0,y.default)(this.detail,"status.operationState.startedAt"),n=(0,y.default)(this.detail,"status.operationState.finishedAt"),a=new Date(n)-new Date(r),o=isNaN(a)?"-":(0,_.formatUsedTime)(a);return p.default.createElement("div",{className:D.default.container},p.default.createElement("div",{className:D.default.sync_info},p.default.createElement("h3",null,t("SYNC_STATUS")),p.default.createElement("div",{className:D.default.info_card},p.default.createElement("div",{className:D.default.wrapper},p.default.createElement("div",{className:D.default.wrapper_icon},this.renderSyncTip(),p.default.createElement("div",null,p.default.createElement("h4",null,this.detail.syncStatus),p.default.createElement("p",null,t("CURRENT_SYNC_STATUS")))),p.default.createElement("div",null,p.default.createElement("div",null,p.default.createElement("h4",null,r?(0,_.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss"):"-"),p.default.createElement("p",null,t("START_TIME_SCAP")))),p.default.createElement("div",null,p.default.createElement("div",null,p.default.createElement("h4",null,n?(0,_.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss"):"-"),p.default.createElement("p",null,t("END_TIME_SCAP"))))),p.default.createElement("div",{className:D.default.wrapper},p.default.createElement("div",{className:D.default.wrapper_gray},p.default.createElement(b.Icon,{name:"timed-task",size:40}),p.default.createElement("div",null,p.default.createElement("h4",null,"automated"===this.detail.syncType?t("AUTO_SYNC"):t("MANUAL_SYNC")),p.default.createElement("p",null,t("SYNC_STRATEGY")))),p.default.createElement("div",{className:D.default.wrapper_gray},p.default.createElement(S.ReactComponent,{style:{width:"40px",height:"40px"}}),p.default.createElement("div",null,p.default.createElement("h4",null,e),p.default.createElement("p",null,t("REVISION")))),p.default.createElement("div",{className:D.default.wrapper_gray},p.default.createElement(b.Icon,{name:"druration",size:40}),p.default.createElement("div",null,p.default.createElement("h4",null,o),p.default.createElement("p",null,t("DURATION"))))))),p.default.createElement("div",{className:D.default.sync_result},p.default.createElement("h3",null,t("SYNC_RESULT_PL")),this.renderTable()))}},{key:"detail",get:function(){return(0,h.toJS)(this.props.detailStore.detail)}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"workspace",get:function(){return this.props.match.params.workspace}}]),n}(p.default.Component),u.propTypes={data:v.default.array,loading:v.default.bool},o=l))||o)||o;r.default=R},3595:function(e,t,r){e.exports={sync_info:"P1_DMGCjflKvs2nDETVPp",wrapper:"O2yabE09ScoqgxEEPzkjT",wrapper_icon:"_298y9CFoE0vFZU5RbJX98v",wrapper_gray:"gPtAa_GbDy0pH07Qts0Qz",syncStatus:"D2ZeglI_nUBTcs0zqqC8Y",syncStatus_icon:"_27kGQtFFuQL9CM6S0uyD2k",info_card:"j4sgr02RRxHbSrZCy2rnX",sync_result:"ElQE6OWLJ5fyWrKN1eHoR",statusTip:"_25-wMvCf6ZCnomDV0kUfDA"}},721:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(634),o=n(r(3528)),u=function(){return(0,a.renderRoutes)(o.default)};t.default=u},818:function(e,r,n){"use strict";var a=n(72),o=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=o(n(12)),l=o(n(13)),s=o(n(19)),i=o(n(20)),c=o(n(18)),d=a(n(0)),f=o(n(1)),p=o(n(3)),m=o(n(3553));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var v=function(e){(0,s.default)(n,e);var r=h(n);function n(){return(0,u.default)(this,n),r.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,r=e.className,n=e.type,a=e.label,o=e.hasLabel;return d.default.createElement("span",null,d.default.createElement("span",{className:(0,p.default)("pipeline_status_icon",m.default[n.toLowerCase()],r)}),o&&(a||t(n.toLowerCase())))}}]),n}(d.PureComponent);r.default=v,v.propTypes={label:f.default.string,className:f.default.string,type:f.default.string,hasLabel:f.default.bool},v.defaultProps={type:"",label:"",hasLabel:!0}},972:function(e,t,r){"use strict";var n=r(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,u=n(r(12)),l=n(r(13)),s=n(r(19)),i=n(r(20)),c=n(r(18)),d=r(276),f=r(70),p=r(815);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var h=(a=(0,f.inject)("rootStore"),(0,d.withRouter)(o=a(o=function(e){(0,s.default)(r,e);var t=m(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,l.default)(r,[{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,r=e.devops;return globals.app.getActions({module:this.props.module,cluster:t,devops:r})}}]),r}(p.Component))||o)||o);t.default=h},973:function(e,t,r){"use strict";r.r(t),r.d(t,"ReactComponent",(function(){return s}));var n=r(71),a=r.n(n),o=r(0),u=r.n(o),l=u.a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19 8.143a2.577 2.577 0 00-2.6-2.572 2.586 2.586 0 00-2.509 1.898 2.55 2.55 0 001.209 2.885v.386c-.026.669-.299 1.26-.819 1.774-.52.515-1.118.785-1.794.81-1.079.026-1.924.206-2.6.579v-6.12a2.55 2.55 0 001.209-2.886A2.586 2.586 0 008.587 3 2.566 2.566 0 006 5.571c.006.914.5 1.755 1.3 2.212v8.434c-.767.45-1.3 1.273-1.3 2.212A2.577 2.577 0 008.6 21c1.443 0 2.6-1.144 2.6-2.571 0-.682-.26-1.286-.689-1.749.117-.077.624-.527.767-.604.325-.142.728-.219 1.222-.219 1.365-.064 2.535-.578 3.575-1.607s1.56-2.546 1.625-3.883h-.026C18.467 9.904 19 9.081 19 8.143zM8.6 4.029c.858 0 1.56.707 1.56 1.542 0 .836-.715 1.543-1.56 1.543-.845 0-1.56-.707-1.56-1.543 0-.835.715-1.542 1.56-1.542zm0 15.955c-.858 0-1.56-.707-1.56-1.543 0-.835.715-1.542 1.56-1.542.845 0 1.56.707 1.56 1.542 0 .836-.715 1.543-1.56 1.543zM16.4 9.7c-.858 0-1.56-.708-1.56-1.543 0-.836.715-1.543 1.56-1.543.845 0 1.56.707 1.56 1.543 0 .835-.715 1.543-1.56 1.543z"}),s=function(e){return u.a.createElement("svg",a()({viewBox:"0 0 24 24",width:"1em",height:"1em"},e),l)};t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkgOC4xNDNhMi41NzcgMi41NzcgMCAwIDAtMi42LTIuNTcyIDIuNTg2IDIuNTg2IDAgMCAwLTIuNTA5IDEuODk4IDIuNTUgMi41NSAwIDAgMCAxLjIwOSAyLjg4NXYuMzg2Yy0uMDI2LjY2OS0uMjk5IDEuMjYtLjgxOSAxLjc3NC0uNTIuNTE1LTEuMTE4Ljc4NS0xLjc5NC44MS0xLjA3OS4wMjYtMS45MjQuMjA2LTIuNi41Nzl2LTYuMTJhMi41NSAyLjU1IDAgMCAwIDEuMjA5LTIuODg2QTIuNTg2IDIuNTg2IDAgMCAwIDguNTg3IDMgMi41NjYgMi41NjYgMCAwIDAgNiA1LjU3MWMuMDA2LjkxNC41IDEuNzU1IDEuMyAyLjIxMnY4LjQzNGMtLjc2Ny40NS0xLjMgMS4yNzMtMS4zIDIuMjEyQTIuNTc3IDIuNTc3IDAgMCAwIDguNiAyMWMxLjQ0MyAwIDIuNi0xLjE0NCAyLjYtMi41NzEgMC0uNjgyLS4yNi0xLjI4Ni0uNjg5LTEuNzQ5LjExNy0uMDc3LjYyNC0uNTI3Ljc2Ny0uNjA0LjMyNS0uMTQyLjcyOC0uMjE5IDEuMjIyLS4yMTkgMS4zNjUtLjA2NCAyLjUzNS0uNTc4IDMuNTc1LTEuNjA3czEuNTYtMi41NDYgMS42MjUtMy44ODNoLS4wMjZDMTguNDY3IDkuOTA0IDE5IDkuMDgxIDE5IDguMTQzek04LjYgNC4wMjljLjg1OCAwIDEuNTYuNzA3IDEuNTYgMS41NDIgMCAuODM2LS43MTUgMS41NDMtMS41NiAxLjU0My0uODQ1IDAtMS41Ni0uNzA3LTEuNTYtMS41NDMgMC0uODM1LjcxNS0xLjU0MiAxLjU2LTEuNTQyem0wIDE1Ljk1NWMtLjg1OCAwLTEuNTYtLjcwNy0xLjU2LTEuNTQzIDAtLjgzNS43MTUtMS41NDIgMS41Ni0xLjU0Mi44NDUgMCAxLjU2LjcwNyAxLjU2IDEuNTQyIDAgLjgzNi0uNzE1IDEuNTQzLTEuNTYgMS41NDN6TTE2LjQgOS43Yy0uODU4IDAtMS41Ni0uNzA4LTEuNTYtMS41NDMgMC0uODM2LjcxNS0xLjU0MyAxLjU2LTEuNTQzLjg0NSAwIDEuNTYuNzA3IDEuNTYgMS41NDMgMCAuODM1LS43MTUgMS41NDMtMS41NiAxLjU0M3oiLz4KPC9zdmc+Cg=="}}]);