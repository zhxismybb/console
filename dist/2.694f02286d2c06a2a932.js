(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{3023:function(t,e,r){"use strict";var n=r(6);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(109)),o=n(r(3024)),c=n(r(3026)),i=n(r(3027)),s=n(r(3028)),u=n(r(3029)),l="/access",f=[].concat((0,a.default)(u.default),[{path:l,component:o.default,routes:[{path:"".concat(l,"/accounts"),component:c.default,exact:!0},{path:"".concat(l,"/roles"),component:i.default,exact:!0},{path:"".concat(l,"/workspaces"),component:s.default,exact:!0}]}]);e.default=f},3024:function(e,r,n){"use strict";var a=n(72),o=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=o(n(109)),i=o(n(12)),s=o(n(13)),u=o(n(19)),l=o(n(20)),f=o(n(18)),d=a(n(0)),p=o(n(16)),h=n(634),m=n(656),y=n(25),g=o(n(3025));function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var b=function(e){(0,u.default)(n,e);var r=v(n);function n(){return(0,i.default)(this,n),r.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,r=e.match,n=e.route,a=e.location,o=globals.app.getAccessNavs(),i=(0,p.default)(o,"[0].items[0].name");return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:"ks-page-side"},d.default.createElement("div",{className:g.default.titleWrapper},d.default.createElement("div",{className:g.default.icon},d.default.createElement(y.Icon,{name:"key",size:40,type:"light"})),d.default.createElement("div",{className:g.default.text},d.default.createElement("div",{className:"h6"},t("ACCESS_CONTROL")))),d.default.createElement(m.Nav,{className:"ks-page-nav",navs:o,location:a,match:r})),d.default.createElement("div",{className:"ks-page-main"},(0,h.renderRoutes)([].concat((0,c.default)(n.routes),[(0,h.getIndexRoute)({path:n.path,to:"".concat(n.path,"/").concat(i),exact:!0})]))))}}]),n}(d.Component);r.default=b},3025:function(t,e,r){t.exports={titleWrapper:"_2adpYWeRak0FrcqKrz3smo",icon:"_2qvGJPBfPdvhB7ZEApDrml",text:"dc4ENhhIri-ghqJz_Y-DY"}},3026:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,i=a(n(109)),s=a(n(21)),u=a(n(71)),l=a(n(49)),f=a(n(50)),d=a(n(12)),p=a(n(13)),h=a(n(19)),m=a(n(20)),y=a(n(18)),g=a(n(0)),v=a(n(278)),b=n(25),O=a(n(727)),E=a(n(729)),w=a(n(724)),S=a(n(728)),P=o(n(726)),k=a(n(16)),D=n(37);function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){(0,s.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,y.default)(t);if(e){var a=(0,y.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var C=(0,P.default)({store:new v.default,module:"users",name:"USER"})(c=function(e){(0,h.default)(n,e);var r=T(n);function n(){var e;(0,d.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).handleStatus=function(){var r=(0,f.default)(l.default.mark((function r(n){var a,o,c;return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.props,o=a.routing,c=a.store,r.next=3,c.handlechangeStatus(n);case 3:b.Notify.success({content:t("UPDATE_SUCCESSFUL")}),o.query();case 5:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),e.handleBatchOperation=function(){var r=(0,f.default)(l.default.mark((function r(n){var a,o,c;return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.props,o=a.store,c=a.routing,r.next=3,o.batchChangeStatus(n);case 3:b.Notify.success({content:t("UPDATE_SUCCESSFUL")}),c.query();case 5:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),e.handledisabled=function(){var t=e.props.tableProps,r=t.selectedRowKeys,n=t.data.filter((function(t){return r.includes(t.name)}));return n.every((function(t){return"Active"===t.status}))?{activeStatus:!0,disabledStatus:!1}:n.every((function(t){return"Disabled"===t.status}))?{activeStatus:!1,disabledStatus:!0}:{activeStatus:!1,disabledStatus:!1}},e.getColumns=function(){return[{title:t("NAME"),dataIndex:"username",render:function(t,e){return g.default.createElement(O.default,{avatar:e.avatar_url||"/assets/default-user.svg",title:t,desc:e.email,to:"/access/accounts/".concat(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"20%",render:function(e){return g.default.createElement(E.default,{type:e,name:t("USER_".concat(e.toUpperCase()))})}},{title:t("PLATFORM_ROLE"),dataIndex:"globalrole",isHideable:!0,width:"20%",render:function(t){return t||"-"}},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",isHideable:!0,width:"20%",render:function(e){return e?(0,D.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET")}}]},e.showCreate=function(){return e.props.trigger("user.create",{success:e.props.getData})},e}return(0,p.default)(n,[{key:"showAction",value:function(t){return!globals.config.presetUsers.includes(t.name)&&globals.user.username!==t.name}},{key:"render",value:function(){var t=this.props,e=t.bannerProps,r=t.tableProps;return g.default.createElement(P.ListPage,this.props,g.default.createElement(w.default,(0,u.default)({},e,{tabs:this.tabs})),g.default.createElement(S.default,(0,u.default)({},r,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,r=e.name,n=e.trigger,a=e.getData,o=e.routing;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",show:this.showAction,onClick:function(t){return n("user.edit",{detail:t,success:a})}},{key:"status",icon:function(t){return"Active"===t.status?"stop":"start"},text:function(e){return"Active"===e.status?t("DISABLE"):t("ENABLE")},action:"edit",show:this.showAction,onClick:this.handleStatus},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return n("resource.delete",{type:r,resource:t.username,detail:t,success:o.query})}}]}},{key:"tableActions",get:function(){var e=this,r=this.props.tableProps,n=this.handledisabled(),a=n.activeStatus,o=n.disabledStatus;return R(R({},r.tableActions),{},{onCreate:this.showCreate,selectActions:[].concat((0,i.default)((0,k.default)(r,"tableActions.selectActions",{})),[{key:"active",type:"default",text:t("ENABLE"),action:"edit",disabled:a,onClick:function(){e.handleBatchOperation("active")}},{key:"disabled",type:"default",text:t("DISABLE"),action:"edit",disabled:o,onClick:function(){e.handleBatchOperation("disabled")}}]),getCheckboxProps:function(t){return{disabled:!e.showAction(t),name:t.name}}})}}]),n}(g.default.Component))||c;r.default=C},3027:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,i=a(n(21)),s=a(n(71)),u=a(n(12)),l=a(n(13)),f=a(n(19)),d=a(n(20)),p=a(n(18)),h=a(n(0)),m=n(5),y=a(n(727)),g=a(n(724)),v=a(n(728)),b=o(n(726)),O=n(37),E=n(58),w=a(n(747));function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){(0,i.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,p.default)(t);if(e){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var D=(0,b.default)({store:new w.default("globalroles"),module:"globalroles",authKey:"roles",name:"PLATFORM_ROLE"})(c=function(e){(0,f.default)(n,e);var r=k(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).showAction=function(t){return!globals.config.presetGlobalRoles.includes(t.name)},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.module;return[{title:t("NAME"),dataIndex:"name",width:"25%",render:function(t,e){return h.default.createElement(y.default,{icon:E.ICON_TYPES[a],to:"/access/roles/".concat(t),title:t,desc:e.aliasName})}},{title:t("DESCRIPTION"),key:"description",dataIndex:"description",isHideable:!0,width:"55%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:"19%",render:function(t){return(0,O.getLocalTime)(t).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var r=e.props,n=r.store,a=r.trigger,o=r.getData;return a("role.create",{title:t("CREATE_PLATFORM_ROLE"),roleTemplates:(0,m.toJS)(n.roleTemplates.data),success:o})},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.props.store.fetchRoleTemplates(this.props.match.params)}},{key:"render",value:function(){var t=this.props,e=t.bannerProps,r=t.tableProps;return h.default.createElement(b.ListPage,(0,s.default)({},this.props,{noWatch:!0}),h.default.createElement(g.default,(0,s.default)({},e,{tabs:this.tabs})),h.default.createElement(v.default,(0,s.default)({},r,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.store,a=e.name,o=e.module,c=e.routing;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(t){return r("resource.baseinfo.edit",{detail:t,success:c.query})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:this.showAction,onClick:function(t){return r("role.edit",{module:o,detail:t,roleTemplates:(0,m.toJS)(n.roleTemplates.data),success:c.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return r("role.delete",{detail:t,type:a,success:c.query})}}]}},{key:"tableActions",get:function(){return P(P({},this.props.tableProps.tableActions),{},{onCreate:this.showCreate,selectActions:[]})}}]),n}(h.default.Component))||c;r.default=D},3028:function(e,r,n){"use strict";var a=n(6),o=n(72);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c,i,s=a(n(21)),u=a(n(71)),l=a(n(12)),f=a(n(13)),d=a(n(19)),p=a(n(20)),h=a(n(18)),m=a(n(74)),y=a(n(0)),g=n(5),v=a(n(727)),b=a(n(724)),O=o(n(726)),E=a(n(728)),w=a(n(901)),S=n(37),P=a(n(770)),k=a(n(637));function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){(0,s.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,h.default)(t);if(e){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var T=(0,O.default)({store:new P.default,module:"workspaces",name:"WORKSPACE"})((i=function(e){(0,d.default)(n,e);var r=R(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).clusterStore=new k.default,e.getColumns=function(){var r=e.props.getSortOrder,n=[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,e){return y.default.createElement(v.default,{icon:"enterprise",iconSize:40,title:(0,S.getDisplayName)(e),desc:e.description||"-",to:"/workspaces/".concat(t)})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:250,render:function(t){return(0,S.getLocalTime)(t).format("YYYY-MM-DD HH:mm:ss")}}];return globals.app.isMultiCluster&&n.splice(1,0,{title:t("CLUSTER_PL"),dataIndex:"clusters",width:"30%",render:function(t){return y.default.createElement(w.default,{clusters:t,clustersDetail:e.clusters})}}),n},e.showCreate=function(){var t=e.props.getData;return e.props.trigger("workspace.create",{success:t})},e}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.clusterStore.fetchList({limit:-1})}},{key:"showAction",value:function(t){return globals.config.systemWorkspace!==t.name}},{key:"render",value:function(){var t=this.props,e=t.bannerProps,r=t.tableProps,n=this.clusterStore.list.isLoading;return y.default.createElement(O.ListPage,this.props,y.default.createElement(b.default,e),y.default.createElement(E.default,(0,u.default)({},r,{columns:this.getColumns(),itemActions:this.itemActions,tableActions:this.tableActions,onCreate:this.showCreate,isLoading:r.isLoading||n,searchType:"name"})))}},{key:"clusters",get:function(){return this.clusterStore.list.data}},{key:"itemActions",get:function(){var e=this.props,r=e.name,n=e.routing,a=e.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(t){return a("resource.baseinfo.edit",{detail:t,success:n.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return a("workspace.delete",{type:r,resource:t.name,detail:t,success:n.query})}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.tableProps,a=r.trigger,o=r.name;return A(A({},n.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return a("workspace.batch.delete",{type:o,rowKey:"name"})}}],getCheckboxProps:function(t){return{disabled:!e.showAction(t),name:t.name}}})}}]),n}(y.default.Component),(0,m.default)(i.prototype,"clusters",[g.computed],Object.getOwnPropertyDescriptor(i.prototype,"clusters"),i.prototype),c=i))||c;r.default=T},3029:function(t,e,r){"use strict";var n=r(6);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(3030)),o=n(r(3034)),c=[{path:"".concat("/access","/accounts/:name"),component:a.default},{path:"".concat("/access","/roles/:name"),component:o.default}];e.default=c},3030:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),i=a(n(12)),s=a(n(13)),u=a(n(19)),l=a(n(20)),f=a(n(18)),d=a(n(0)),p=n(5),h=n(70),m=a(n(16)),y=a(n(32)),g=n(25),v=n(37),b=n(635),O=a(n(278)),E=a(n(815)),w=a(n(3031));function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var P=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,b.trigger)(o=function(e){(0,u.default)(n,e);var r=S(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new O.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("user.edit",{detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"modifyPassword",icon:"pen",text:t("CHANGE_PASSWORD"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("user.modifypassword",{detail:(0,p.toJS)(e.store.detail)})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("resource.delete",{type:"USER",resource:e.store.detail.username,detail:(0,p.toJS)(e.store.detail),success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,y.default)(r))return[{name:t("PLATFORM_ROLE"),value:r.globalrole},{name:t("EMAIL"),value:r.email},{name:t("LAST_LOGIN"),value:r.lastLoginTime?(0,v.getLocalTime)(r.lastLoginTime).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET")}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.username)return d.default.createElement(g.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:(0,m.default)(this.store.detail,"username"),desc:this.detailDesc,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("USER_PL"),url:this.listUrl}]};return d.default.createElement(E.default,(0,c.default)({stores:e,routes:w.default},r))}},{key:"module",get:function(){return"accounts"}},{key:"authKey",get:function(){return"users"}},{key:"name",get:function(){return"USER"}},{key:"listUrl",get:function(){return"/access/accounts"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"detailDesc",get:function(){return globals.config.presetUsers.includes("admin")?t((0,m.default)(this.store.detail,"description")):(0,m.default)(this.store.detail,"description")}},{key:"showEdit",get:function(){var t=this.store.detail.name;return!globals.config.presetUsers.includes(t)}}]),n}(d.default.Component))||o)||o)||o;r.default=P},3031:function(t,e,r){"use strict";var n=r(6);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(634),o=n(r(3032)),c="/access/accounts/:name",i=[{path:"".concat(c,"/login-history"),title:"Login History",component:o.default,exact:!0},(0,a.getIndexRoute)({path:c,to:"".concat(c,"/login-history"),exact:!0})];e.default=i},3032:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(21)),i=a(n(12)),s=a(n(13)),u=a(n(19)),l=a(n(20)),f=a(n(18)),d=a(n(0)),p=n(5),h=n(70),m=n(25),y=a(n(741)),g=a(n(653)),v=n(37),b=a(n(3033));function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){(0,c.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var S=(0,h.inject)("rootStore","detailStore")(o=(0,h.observer)(o=function(e){(0,u.default)(n,e);var r=w(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).fetchData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.store.detail.name;e.store.fetchLoginRecords(E({name:r},t))},e.handlePagination=function(t){e.fetchData({page:t})},e.getColumns=function(){return[{title:t("TIME"),dataIndex:"createTime",render:function(t){return(0,v.getLocalTime)(t).format("YYYY-MM-DD HH:mm:ss")}},{title:t("STATUS"),dataIndex:"spec.success",render:function(e){return d.default.createElement("div",{className:b.default.status},d.default.createElement(g.default,{type:e?"success":"failed"})," ",d.default.createElement("span",null,e?t("SUCCESSFUL"):t("FAILED")))}},{title:t("SOURCE_IP_ADDRESS"),dataIndex:"spec.sourceIP"},{title:t("REASON"),dataIndex:"spec.reason"}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderContent",value:function(){var t=(0,p.toJS)(this.store.records).data;return d.default.createElement(m.Table,{className:b.default.table,dataSource:t,rowKey:"login_time",columns:this.getColumns()})}},{key:"render",value:function(){var e=this.store.records,r=e.page,n=e.total,a=e.limit;return d.default.createElement(y.default,{title:t("LOGIN_HISTORY"),empty:t("NO_LOGIN_HISTORY")},this.renderContent(),n>a&&d.default.createElement("div",{className:"margin-t12 text-right"},d.default.createElement(m.Pagination,{page:r,total:n,limit:a,onChange:this.handlePagination})))}},{key:"store",get:function(){return this.props.detailStore}}]),n}(d.default.Component))||o)||o;r.default=S},3033:function(t,e,r){t.exports={table:"_3ImdJfx5RMcfYKur4H9XOG",status:"_2Vvekd1YEzb-HeO8sQFK8a"}},3034:function(e,r,n){"use strict";var a=n(6);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,c=a(n(71)),i=a(n(12)),s=a(n(13)),u=a(n(19)),l=a(n(20)),f=a(n(18)),d=a(n(0)),p=n(5),h=n(70),m=a(n(32)),y=n(25),g=n(37),v=n(635),b=a(n(747)),O=a(n(815)),E=a(n(3035));function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var S=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,v.trigger)(o=function(e){(0,u.default)(n,e);var r=w(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new b.default("globalroles"),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("role.edit",{module:e.module,detail:(0,p.toJS)(e.store.detail),roleTemplates:(0,p.toJS)(e.store.roleTemplates.data),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("role.delete",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,m.default)(r))return[{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(),this.store.fetchRoleTemplates(this.props.match.params)}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("PLATFORM_ROLE_PL"),url:this.listUrl}]};return d.default.createElement(O.default,(0,c.default)({stores:e,routes:E.default},r))}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"roles"}},{key:"name",get:function(){return"PLATFORM_ROLE"}},{key:"listUrl",get:function(){return"/access/roles"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"showEdit",get:function(){var t=this.props.match.params.name;return!globals.config.presetGlobalRoles.includes(t)}}]),n}(d.default.Component))||o)||o)||o;r.default=S},3035:function(t,e,r){"use strict";var n=r(6);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(634),o=n(r(965)),c=n(r(966)),i="/access/roles/:name",s=[{path:"".concat(i,"/authorizations"),title:"PERMISSION_PL",component:o.default,exact:!0},{path:"".concat(i,"/users"),title:"AUTHORIZED_USER_PL",component:c.default,exact:!0},(0,a.getIndexRoute)({path:i,to:"".concat(i,"/authorizations"),exact:!0})];e.default=s},716:function(t,e,r){"use strict";var n=r(6);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(70),o=r(634),c=n(r(3023)),i=(0,a.inject)("rootStore")((function(){return(0,o.renderRoutes)(c.default)}));e.default=i}}]);