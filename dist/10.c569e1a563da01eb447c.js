(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1165:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o,l,c=r(a(49)),u=r(a(21)),i=r(a(56)),s=r(a(50)),f=r(a(91)),d=r(a(12)),p=r(a(13)),m=r(a(135)),h=r(a(19)),v=r(a(20)),y=r(a(18)),g=r(a(74)),E=(r(a(92)),r(a(16))),b=r(a(73)),O=r(a(291)),_=r(a(32)),S=r(a(849)),R=r(a(990)),C=a(5),k=a(37),T=a(58),w=r(a(186));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var A=(n=function(e){(0,h.default)(n,e);var t,a,r=N(n);function n(){var e;(0,d.default)(this,n);for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return e=r.call.apply(r,[this].concat(a)),(0,f.default)(e,"isComponentsLoading",o,(0,m.default)(e)),(0,f.default)(e,"components",l,(0,m.default)(e)),e.module="strategies",e}return(0,p.default)(n,[{key:"fetchList",value:(a=(0,s.default)(c.default.mark((function e(t){var a,r,n,o,l,u,s=this;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.cluster,r=t.namespace,n=t.selector,o=(0,i.default)(t,["cluster","namespace","selector"]),this.list.isLoading=!0,r){e.next=5;break}return this.list.isLoading=!1,e.abrupt("return");case 5:return l=o,(0,_.default)(n)||(l.labelSelector=(0,k.joinSelector)(n)),e.next=9,request.get(this.getListUrl({cluster:a,namespace:r}),l);case 9:u=e.sent,this.list.update({data:u.items.map((function(e){return D(D({},s.mapper(e)),{},{cluster:a})})),total:u.items.length,isLoading:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchMetrics",value:function(e){var t=e.cluster,a=e.namespace,r=e.newWorkloadName,n=e.oldWorkloadName,o=e.protocol,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=Math.floor((new Date).getTime()/1e3),u=D({queryTime:c,duration:300,step:30,rateInterval:"30s","filters[]":["request_count","request_duration","request_error_count","tcp_sent","tcp_received"],direction:"inbound",reporter:"destination"},l);return"http"===o&&(u.requestProtocol="http"),Promise.all([request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:t,namespace:a}),"/workloads/").concat(r,"/metrics"),u),request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:t,namespace:a}),"/workloads/").concat(n,"/metrics"),u)])}},{key:"fetchHealth",value:function(e){var t=e.cluster,a=e.namespace,r=e.newWorkloadName,n=e.oldWorkloadName,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=D({rateInterval:"30s"},o);return Promise.all([request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:t,namespace:a}),"/workloads/").concat(r,"/health"),l),request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:t,namespace:a}),"/workloads/").concat(n,"/health"),l)])}},{key:"fetchComponents",value:(t=(0,s.default)(c.default.mark((function e(t){var a,r,n,o,l,s,f,d,p,m,h,v,y,g,E;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.cluster,n=t.namespace,o=t.labelSelector,l=t.newVersion,s=t.oldVersion,f=t.service,d=t.silent,p=(0,i.default)(t,["cluster","namespace","labelSelector","newVersion","oldVersion","service","silent"]),!d&&(this.isComponentsLoading=!0),n){e.next=5;break}return this.isComponentsLoading=!1,e.abrupt("return");case 5:return m=p,(0,_.default)(o)||(m.labelSelector=o),e.next=9,request.get("api/v1".concat(this.getPath({cluster:r,namespace:n}),"/pods"),m);case 9:h=e.sent,v=h.items.map(w.default.pods),y=(0,S.default)(v,"labels.version"),g=y[l]||[],E=y[s]||[],this.components.data=(a={},(0,u.default)(a,l,{name:f,version:l,pods:g,desire:g.length,available:g.filter((function(e){return"Running"===e.status.phase})).length}),(0,u.default)(a,s,{name:f,version:s,pods:E,desire:E.length,available:E.filter((function(e){return"Running"===e.status.phase})).length}),a),this.isComponentsLoading=!1;case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"create",value:function(e,t){var a,r=t.cluster,n=t.namespace;if((0,O.default)(e,"strategy")&&(a=request.post(this.getListUrl({cluster:r,namespace:n}),e.strategy)),(0,O.default)(e,"workload")){var o=(0,E.default)(e,"workload.kind","Deployment"),l=(0,R.default)(T.MODULE_KIND_MAP,(function(e){return e===o}))||"deployments";a.then(request.post("apis/apps/v1".concat(this.getPath({cluster:r,namespace:n}),"/").concat(l),e.workload))}return this.submitting(a)}},{key:"update",value:function(e,t){var a=e.name,r=e.cluster,n=e.namespace,o=e.newWorkloadName,l=e.newVersion,c=e.resourceVersion,u=[],i="";if((0,O.default)(t,"workload")){var s=(0,E.default)(t,"workload.kind","Deployment"),f=(0,R.default)(T.MODULE_KIND_MAP,(function(e){return e===s}))||"deployments";if((i=(0,E.default)(t.workload,"metadata.labels.version"))===l){var d=(0,E.default)(t.workload,"metadata.name");u.push(request.put("apis/apps/v1".concat(this.getPath({cluster:r,namespace:n}),"/").concat(f,"/").concat(d),t.workload))}else u.push(request.delete("apis/apps/v1".concat(this.getPath({cluster:r,namespace:n}),"/").concat(f,"/").concat(o)),request.post("apis/apps/v1".concat(this.getPath({cluster:r,namespace:n}),"/").concat(f),t.workload))}if((0,O.default)(t,"strategy")){if((0,b.default)(t.strategy,"metadata.resourceVersion",c),i&&i!==l)(0,E.default)(t.strategy,"spec.governor")===l&&(0,b.default)(t.strategy,"spec.governor",i),((0,E.default)(t.strategy,"spec.template.spec.http")||(0,E.default)(t.strategy,"spec.template.spec.tcp",[])).forEach((function(e){e.route&&e.route.length>0&&e.route.forEach((function(e){(0,E.default)(e,"destination.subset")===l&&(0,b.default)(e,"destination.subset",i)})),e.mirror&&e.mirror.subset===l&&(e.mirror.subset=i)}));u.push(request.put(this.getDetailUrl({name:a,cluster:r,namespace:n}),t.strategy))}return this.submitting(Promise.all(u))}}]),n}(r(a(277)).default),o=(0,g.default)(n.prototype,"isComponentsLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=(0,g.default)(n.prototype,"components",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{}}}}),(0,g.default)(n.prototype,"fetchList",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,g.default)(n.prototype,"fetchMetrics",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchMetrics"),n.prototype),(0,g.default)(n.prototype,"fetchHealth",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchHealth"),n.prototype),(0,g.default)(n.prototype,"fetchComponents",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchComponents"),n.prototype),(0,g.default)(n.prototype,"create",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"create"),n.prototype),(0,g.default)(n.prototype,"update",[C.action],Object.getOwnPropertyDescriptor(n.prototype,"update"),n.prototype),n);t.default=A},1166:function(e,t,a){e.exports={tag:"_3TU-AgwZKhTYBj4DFyGaYd",title:"_369ph_E2DAX2y_NpgwxabT",chart:"_277fRQi2DOGBy4yI3roVrO",chartDetail:"U6o8umlM6uCM_XaU0JaNm",circle:"_1xjLL8SyJTU8mVCMJafm71",leftPane:"_3De3dzq3-ZtBdXNIpWKeK7",selected:"_1Rq06DmTF8zwtDrYhm_Jm4",tip:"_2_wSsLRObqXFZ_kT0eXPhg"}},1167:function(e,t,a){e.exports={wrapper:"NIYOp_3ZpxtucxFOhGDxS",image:"_12zpgu_3ah3oONNKLDWl4c",footer:"_2R2JnOZA8qwhANxwDqziDW",items:"_3HAAkylLBWtyi2Ulicm5mP",item:"_3ap2A7wsdNinxlpfOJWRN8",icon:"_1dvmRmxMSb9SuqZATuQ3M4",iconExtra:"-pMYsB5LXpaiC807PW5sd",title:"_33LJI1QvrcWsEKm2a6JbX1",left:"_3u7seBT_Bxszz6-KADL9rG",right:"_1CV-q62afWGICi54uwkQM-",versions:"_1N38nS5eFjvxklmLdiNBJi",tag:"_10BSpN1wSXatPsR4gumtiH",loading:"_3oncm8IhLXZJiwMH55s8mf",chart:"_20slDQ31DTSOgN5QFZMsWa",chartDetail:"bGmKWnw69cnOMBg1gKklH",circle:"_2au74k5NIUPy1uZMIhmp4j",tip:"_6o9I9WEuv9Q3iooA87p-2"}},1478:function(e,a,r){"use strict";var n=r(6),o=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,c=n(r(71)),u=n(r(21)),i=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=o(r(0)),h=r(25),v=n(r(724)),y=r(635),g=r(70),E=n(r(865));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var S=(0,g.inject)("rootStore","projectStore")(l=(0,g.observer)(l=(0,y.trigger)(l=function(e){(0,f.default)(r,e);var a=_(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).store=new E.default,e.handleTabChange=function(t){var a=e.props.match.params,r=a.workspace,n=a.cluster,o=a.namespace;e.props.rootStore.routing.push("/".concat(r,"/clusters/").concat(n,"/projects/").concat(o,"/applications/").concat(t))},e.showDeploySampleApp=function(){var t=e.props,a=t.rootStore,r=t.projectStore,n=t.match;e.trigger("crd.app.create",O(O({sampleApp:"bookinfo",module:"applications"},n.params),{},{store:e.store,projectDetail:r.detail,success:function(e){return a.routing.push(e)}}))},e}return(0,s.default)(r,[{key:"render",value:function(){return m.default.createElement(v.default,(0,c.default)({},this.props,{description:t("APPLICATIONS_DESC"),tabs:globals.app.hasKSModule("openpitrix")?this.tabs:void 0,tips:this.tips}))}},{key:"canDeployComposingApp",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace,n=globals.app.getActions({workspace:t,cluster:a,project:r,module:"deployments"}).includes("create"),o=globals.app.getActions({workspace:t,cluster:a,project:r,module:"services"}).includes("create");return n&&o}},{key:"tabs",get:function(){return{value:this.props.type,onChange:this.handleTabChange,options:[{value:"template",label:t("TEMPLATE_BASED_APP_PL")},{value:"composing",label:t("COMPOSED_APP_PL")}]}}},{key:"tips",get:function(){return[{title:t("APP_TYPES_Q"),description:t("APP_TYPES_A")},{title:t("HOW_TO_USE_APP_GOVERN_Q"),description:t("HOW_TO_USE_APP_GOVERN_A"),operation:this.canDeployComposingApp?m.default.createElement(h.Button,{onClick:this.showDeploySampleApp},t("DEPLOY_SAMPLE_APP")):null,closable:!1}]}}]),r}(m.Component))||l)||l)||l;a.default=S},1489:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(0)),p=r(70),m=r(37),h=r(634),v=n(r(865)),y=n(r(724)),g=n(r(1213));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,u.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={showDeployApp:!1,sampleApp:""},e.store=new v.default,e.hideDeployAppModal=function(){e.setState({showDeployApp:!1,sampleApp:""})},e.handleDeployApp=function(t){var a=e.props.match.params,r=a.workspace,n=a.cluster,o=a.namespace;e.store.create(t).then((function(){e.hideDeployAppModal(),e.routing.push("/".concat(r,"/clusters/").concat(n,"/projects/").concat(o,"/applications/composing/").concat((0,f.default)(t,"application.metadata.name")))}))},e.showDeploySampleApp=function(){e.setState({showDeployApp:!0,sampleApp:"bookinfo"})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.route,a=this.state,r=a.showDeployApp,n=a.sampleApp,o=this.props.match.params,l=o.cluster,c=o.namespace;return d.default.createElement("div",null,d.default.createElement(y.default,{icon:"bird",module:"grayrelease",title:t("GRAYSCALE_RELEASE"),description:t("GRAYSCALE_RELEASE_DESC"),tips:this.tips,routes:e.routes}),(0,h.renderRoutes)(e.routes),d.default.createElement(g.default,{store:this.store,visible:r,namespace:c,cluster:l,sampleApp:n,onOk:this.handleDeployApp,onCancel:this.hideDeployAppModal,isSubmitting:this.store.isSubmitting}))}},{key:"tips",get:function(){return[{title:t("PREREQUEST_FOR_USE_GRAYRELEASE_Q"),description:t("PREREQUEST_FOR_USE_GRAYRELEASE_A"),more:(0,m.getDocsUrl)("composingapps")}]}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(d.default.Component))||o)||o;a.default=b},1490:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(16)),p=n(r(73)),m=n(r(650)),h=n(r(0)),v=r(70),y=r(25),g=n(r(1302)),E=n(r(875)),b=n(r(736)),O=r(37),_=r(58),S=n(r(3308)),R=n(r(3310));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,v.observer)(o=function(e){(0,i.default)(r,e);var a=C(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).versionValidator=function(e,a,r){if(!a)return r();var o=(0,d.default)(n.formTemplate,"metadata.labels.app",""),l="".concat(o,"-").concat(a);n.workloadStore.checkName({name:l,namespace:n.namespace,cluster:n.props.cluster}).then((function(a){if(a.exist)return r({message:t("NEW_VERSION_NUMBER_EXIST_DESC",{name:l}),field:e.field});r()}))},n.handleVersionChange=(0,m.default)((function(e){var t=(0,d.default)(n.formTemplate,"metadata.labels.app",""),a="".concat(t,"-").concat(e);(0,p.default)(n.formTemplate,"metadata.name",a),(0,O.mergeLabels)(n.formTemplate,{version:e}),(0,p.default)(n.props.formTemplate,'strategy.metadata.annotations["servicemesh.kubesphere.io/newWorkloadName"]',a)}),200),n.module=(0,d.default)(e.formTemplate,'strategy.metadata.annotations["servicemesh.kubesphere.io/workloadType"]',"deployments"),n.workloadStore=new b.default(n.module),n}return(0,u.default)(r,[{key:"renderReplicasControl",value:function(){return h.default.createElement(y.Column,{className:"is-narrow"},h.default.createElement(y.Form.Item,{className:R.default.narrow,label:t("NEW_VERSION_NUMBER"),desc:t("NEW_VERSION_NUMBER_DESC"),rules:[{required:!0,message:t("NEW_VERSION_NUMBER_EMPTY_DESC")},{pattern:_.PATTERN_COMPONENT_VERSION,message:t("NEW_VERSION_NUMBER_INVALID_DESC")},{validator:this.versionValidator}]},h.default.createElement(y.Input,{name:"metadata.labels.version",onChange:this.handleVersionChange,disabled:this.isEdit,maxLength:16})),h.default.createElement("div",{className:R.default.specify},h.default.createElement(y.Form.Item,null,h.default.createElement(g.default,{name:"spec.replicas"}))))}},{key:"renderContainerList",value:function(){var e=(0,d.default)(this.formTemplate,"".concat(this.prefix,"spec"));return h.default.createElement(y.Column,null,h.default.createElement(y.Form.Item,{rules:[{validator:this.containersValidator}]},h.default.createElement(S.default,{className:R.default.containers,name:"".concat(this.prefix,"spec.containers"),onShow:this.showContainer,onDelete:this.handleDelete,specTemplate:e,disabled:this.isEdit})))}},{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formProps,r=this.state,n=r.showContainer,o=r.selectContainer;return n?this.renderContainerForm(o):h.default.createElement(y.Form,(0,l.default)({data:this.formTemplate,ref:t},a),h.default.createElement(y.Columns,null,this.renderReplicasControl(),this.renderContainerList()))}},{key:"formTemplate",get:function(){return this.props.formTemplate.workload||{}}},{key:"namespace",get:function(){return(0,d.default)(this.formTemplate,"metadata.namespace")}}]),r}(E.default))||o;a.default=k},1491:function(e,t,a){e.exports={list:"_1y7srBKDMimPCBz1ivcnXL",card:"_1CNnvTpcwGUSGgDJtaTxgE",inputs:"_3JM-KVcZd0CJ9NCBQTJ3r",limits:"_36BBL6z_siYtS2MY-CTltL",limit:"qFBDqsZYRUQVnqH4lnOAL"}},1492:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(a(71)),l=r(a(12)),c=r(a(13)),u=r(a(19)),i=r(a(20)),s=r(a(18)),f=r(a(0)),d=a(70),p=r(a(16)),m=r(a(3311)),h=r(a(3322)),v=r(a(3326));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g={Canary:m.default,Bluegreen:h.default,Mirror:v.default},E=(0,d.observer)(n=function(e){(0,u.default)(a,e);var t=y(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formProps,r=g[this.strategyType];return r?f.default.createElement(r,(0,o.default)({formRef:t,formTemplate:this.formTemplate},a)):null}},{key:"strategyType",get:function(){return(0,p.default)(this.formTemplate,"strategy.spec.type","")}},{key:"formTemplate",get:function(){return this.props.formTemplate}}]),a}(f.default.Component))||n;t.default=E},1493:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0;var o=n(r(21)),l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(32)),d=n(r(0)),p=r(25),m=r(70),h=n(r(751)),v=n(r(3328)),y=n(r(1165)),g=n(r(3338)),E=n(r(1167));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,u.default)(r,e);var a=_(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).showDetail=function(e){n.setState({showDetailModal:!0,selectItem:O(O({},e),{},{workspace:n.workspace})})},n.hideDetail=function(){n.setState({showDetailModal:!1,selectItem:{}},(function(){n.getData()}))},n.handleDelete=function(){n.store.delete(n.state.selectItem).then((function(){p.Notify.success({content:"".concat(t("JOB_OFFLINE_SUCCESSFULLY"))}),n.hideDetail()}))},n.showCreateGrayReleaseJob=function(){var e=n.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;n.props.rootStore.routing.push("/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/grayrelease/cates"))},n.state={showDetailModal:!1,selectItem:{}},n.store=new y.default,n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){this.store.fetchList({namespace:this.namespace,cluster:this.cluster})}},{key:"renderHeader",value:function(){return null}},{key:"renderEmpty",value:function(){return d.default.createElement(h.default,{icon:"istio",title:t("NO_GRAYSCALE_RELEASE_JOB_FOUND"),desc:t("NO_GRAYSCALE_RELEASE_TASK_FOUND_DESC"),actions:this.canCreate?d.default.createElement(p.Button,{type:"control",onClick:this.showCreateGrayReleaseJob},t("CREATE")):null})}},{key:"renderContent",value:function(){var e=this,t=this.store.list,a=t.data;return t.isLoading?d.default.createElement(p.Loading,{className:E.default.loading}):(0,f.default)(a)?this.renderEmpty():d.default.createElement("div",{className:E.default.items},a.map((function(t){return d.default.createElement(g.default,{key:t.name,data:t,onClick:e.showDetail,store:e.store})})))}},{key:"renderFooter",value:function(){var e=this.store.list.total;return d.default.createElement("div",{className:E.default.footer},d.default.createElement("p",null,t("TOTAL_ITEMS",{num:e})))}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderHeader(),this.renderContent(),this.renderFooter(),d.default.createElement(v.default,{detail:this.state.selectItem,visible:this.state.showDetailModal,onCancel:this.hideDetail,onDelete:this.handleDelete}))}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return globals.app.getActions({cluster:t,workspace:a,project:r,module:"applications"}).includes("edit")&&this.serviceMeshEnable}},{key:"serviceMeshEnable",get:function(){return globals.app.hasClusterModule(this.cluster,"servicemesh")}}]),r}(d.default.Component),R=(0,m.inject)("rootStore")((0,m.observer)(S));a.default=R;var C=S;a.Component=C},1494:function(e,t,a){e.exports={wrapper:"_1FRrrBxl8UqvsswigK4p6Z",header:"_17yDbHoZkGlCh5TkvVpYH0",title:"_1ND4Co3PGwICLYv_4P9q5o",right:"_3DW67iu4ZbODnkFe0_ZzTW",pods:"_2dJagf8ndTpszvQ1fnOpg_",metric:"_3MWAAAkSCUGt62thgWlL4o",icon:"_22V6MJt30xmcn4CU7xZ5Es",status:"_22doJB7j2BHvCiBEcyoKJO",running:"_3UPN8mbj93pxkXP4kJvdXs",updating:"S6AbHUgraNCIVXqWPgLCD",offline:"_15G7mRB5qpNeQrLLnQFLb5"}},1495:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l,c,u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(32)),v=r(70),y=r(25),g=n(r(723)),E=n(r(748)),b=r(37),O=n(r(3344)),_=n(r(1496));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,v.observer)((c=l=function(e){(0,s.default)(r,e);var a=S(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).store=new E.default,e.getData=function(){var t=e.props,a=t.selector,r=t.cluster,n=t.namespace;(0,h.default)(a)||e.store.fetchListByK8s({cluster:r,namespace:n,labelSelector:(0,b.joinSelector)(a)})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"renderContent",value:function(){var e=this.props.prefix,a=this.store.list,r=a.data,n=a.isLoading;return(0,h.default)(r)&&!n?p.default.createElement("div",{className:_.default.empty},t("EMPTY_WRAPPER",{resource:t("SERVICE")})):p.default.createElement(y.Loading,{spinning:n},p.default.createElement("div",{className:_.default.content},r.map((function(t){return p.default.createElement(O.default,{key:t.uid,prefix:e,detail:t})}))))}},{key:"render",value:function(){var e=this.props.className;return p.default.createElement(g.default,{className:e,title:t("Services")},this.renderContent())}}]),r}(p.default.Component),l.propTypes={className:m.default.string,prefix:m.default.string,selector:m.default.object},l.defaultProps={prefix:"",selector:{}},o=c))||o;a.default=R},1496:function(e,t,a){e.exports={content:"s1iKHdiKYS2KAnOGr2xOi",item:"_3B11hCO238i0BN6mQcovhe"}},1497:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l,c,u=n(r(49)),i=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=n(r(1)),y=r(70),g=n(r(32)),E=n(r(723)),b=r(37),O=n(r(855)),_=n(r(767)),S=n(r(3346));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(0,y.observer)((c=l=function(e){(0,d.default)(r,e);var a=R(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={gateway:{}},e.store=new O.default,e.gatewayStore=new _.default,e.getData=(0,i.default)(u.default.mark((function t(){var a,r,n,o,l,c;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.cluster,n=a.namespace,o=a.selector,(0,g.default)(o)){t.next=8;break}return l={cluster:r,namespace:n,labelSelector:(0,b.joinSelector)(o)},t.next=5,Promise.all([e.gatewayStore.getGateway({cluster:r}),e.gatewayStore.getGateway({cluster:r,namespace:n})]);case 5:c=t.sent,e.setState({gateway:c[1]||c[0]}),e.store.fetchListByK8s(l);case 8:case"end":return t.stop()}}),t)}))),e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"renderContent",value:function(){var e=this.props.prefix,t=this.store.list.data,a=this.state.gateway;return(0,g.default)(t)?null:t.map((function(t){return h.default.createElement(S.default,{key:t.name,prefix:e,detail:t,gateway:a})}))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=this.renderContent();return n?h.default.createElement(E.default,{className:a,title:r||t("Routes")},n):null}}]),r}(h.default.Component),l.propTypes={className:v.default.string,prefix:v.default.string,selector:v.default.object,title:v.default.string},l.defaultProps={prefix:""},o=c))||o;a.default=C},1498:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l,c,u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(1)),h=n(r(32)),v=r(70),y=n(r(763)),g=n(r(723)),E=r(37),b=n(r(3348)),O=n(r(1499));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=(0,v.observer)((c=l=function(e){(0,s.default)(r,e);var a=_(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).store=new y.default,e.getData=function(){var t=e.props,a=t.selector,r=t.cluster,n=t.namespace;(0,h.default)(a)||e.store.fetchListByK8s({cluster:r,namespace:n,labelSelector:(0,E.joinSelector)(a)})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"renderContent",value:function(){var e=this.props.prefix,t=this.store.list.data;return(0,h.default)(t)?null:p.default.createElement("div",{className:O.default.content},t.map((function(t,a){return p.default.createElement(b.default,{key:a,volume:t,prefix:e})})))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=this.renderContent();return n?p.default.createElement(g.default,{className:a,title:r||t("Volumes")},n):null}}]),r}(p.default.Component),l.propTypes={className:m.default.string,title:m.default.string,selector:m.default.object},l.defaultProps={className:""},o=c))||o;a.default=S},1499:function(e,t,a){e.exports={content:"_3EopWXM9d6_WAtA5H6rBsx",item:"DU1A13TYH9JFcLds2K7oM"}},1507:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l,c,u=n(r(49)),i=n(r(21)),s=n(r(50)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(0)),y=r(70),g=n(r(1)),E=n(r(3)),b=n(r(32)),O=n(r(927)),_=r(25),S=n(r(3401)),R=n(r(3403));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var w=(0,y.observer)((c=l=function(e){(0,p.default)(r,e);var a=T(r);function r(e){var n;return(0,f.default)(this,r),(n=a.call(this,e)).setAutoRefresh=function(){var e=n.store.list.data;clearInterval(n.timer),e.some((function(e){return!["successful","failed"].includes(e.status)||(0,b.default)(e.status)}))&&(n.timer=setInterval(n.fetchData,4e3))},n.fetchData=(0,s.default)(u.default.mark((function e(){var t,a,r,o,l=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},a=n.props,r=a.limit,o=a.params,e.next=4,n.store.fetchS2IRunRecords(k(k({limit:r},o),t));case 4:n.setAutoRefresh();case 5:case"end":return e.stop()}}),e)}))),n.getPagination=function(){var e=n.store.list;return{page:e.page,limit:e.limit,total:e.total}},n.handleSearch=function(e){n.searchValue=e,n.fetchData({name:e}).then((function(){n.props.onSearch(e)}))},n.handlePage=function(e){n.fetchData({page:e}).then((function(){n.props.onPage(e)}))},n.renderFooter=function(){var e=n.getPagination(),a=e.total,r=e.page,o=e.limit;return v.default.createElement(_.Level,{className:R.default.footer},v.default.createElement(_.LevelLeft,null,t("TOTAL_ITEMS",{num:a})),v.default.createElement(_.LevelRight,null,v.default.createElement(_.Pagination,{page:r,total:a,limit:o,onChange:n.handlePage})))},n.store=new O.default,n}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderContent",value:function(){var e=this,a=this.store.list,r=a.data,n=a.isLoading,o=v.default.createElement("div",{className:R.default.body},(0,b.default)(r)?v.default.createElement("div",{className:R.default.empty},t("NO_DATA")):r.map((function(t){return e.renderItem(t)})));return this.isTable?v.default.createElement(_.Loading,{spinning:n},o):o}},{key:"renderItem",value:function(e){var t=this.store.list.isLoading;return v.default.createElement(S.default,{key:e.name,runDetail:e,loading:t,store:this.store,isB2i:this.props.isB2i})}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.hideFooter;return v.default.createElement("div",{className:(0,E.default)(t,R.default.content)},this.renderContent(),!a&&this.renderFooter())}},{key:"isTable",get:function(){var e=this.props,t=e.hideHeader,a=e.hideFooter;return!t||!a}}]),r}(v.default.Component),l.propTypes={prefix:g.default.string,title:g.default.string,detail:g.default.object,hideHeader:g.default.bool,hideFooter:g.default.bool,onSearch:g.default.func,onRefresh:g.default.func,onPage:g.default.func,limit:g.default.number},l.defaultProps={isB2i:!1,detail:{},hideHeader:!1,hideFooter:!1,onSearch:function(){},onRefresh:function(){},onPage:function(){}},o=c))||o;a.default=w},3167:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(109)),o=a(634),l=r(a(3168)),c=r(a(3176)),u=r(a(3189)),i=r(a(3190)),s=r(a(3191)),f=r(a(3192)),d=r(a(3193)),p=r(a(3194)),m=r(a(3196)),h=r(a(3197)),v=r(a(3198)),y=r(a(3199)),g=r(a(1489)),E=r(a(3272)),b=r(a(3274)),O=r(a(3276)),_=r(a(3278)),S=r(a(3281)),R=r(a(3282)),C=r(a(3283)),k=r(a(3284)),T=r(a(3285)),w=r(a(3286)),P=r(a(1387)),D=r(a(1384)),N=r(a(3289)),A=r(a(3292)),j=r(a(3298)),I=r(a(3340)),M=r(a(3413)),L="/:workspace/clusters/:cluster/projects/:namespace",x=[].concat((0,n.default)((0,I.default)(L)),[{path:L,component:l.default,routes:[].concat((0,n.default)(j.default),[{path:"".concat(L,"/overview"),component:c.default,exact:!0},{path:"".concat(L,"/applications/composing"),component:u.default,exact:!0},{path:"".concat(L,"/applications/template"),component:i.default,exact:!0},{path:"".concat(L,"/deployments"),component:s.default,exact:!0},{path:"".concat(L,"/statefulsets"),component:f.default,exact:!0},{path:"".concat(L,"/daemonsets"),component:d.default,exact:!0},{path:"".concat(L,"/pods"),component:p.default,exact:!0},{path:"".concat(L,"/jobs"),component:m.default,exact:!0},{path:"".concat(L,"/s2ibuilders"),component:h.default,exact:!0},{path:"".concat(L,"/cronjobs"),component:v.default,exact:!0},{path:"".concat(L,"/services"),component:y.default,exact:!0},{path:"".concat(L,"/grayrelease"),component:g.default,exact:!0},{path:"".concat(L,"/ingresses"),component:E.default,exact:!0},{path:"".concat(L,"/volumes"),component:b.default,exact:!0},{path:"".concat(L,"/volume-snapshots"),component:O.default,exact:!0},{path:"".concat(L,"/base-info"),component:_.default,exact:!0},{path:"".concat(L,"/networkpolicies"),component:A.default,exact:!0},{path:"".concat(L,"/configmaps"),component:S.default,exact:!0},{path:"".concat(L,"/serviceaccounts"),component:R.default,exact:!0},{path:"".concat(L,"/secrets"),component:C.default,exact:!0},{path:"".concat(L,"/roles"),component:k.default,exact:!0},{path:"".concat(L,"/members"),component:T.default,exact:!0},{path:"".concat(L,"/log-collections"),component:w.default,exact:!0},{path:"".concat(L,"/gateways"),component:M.default,exact:!0},{path:"".concat(L,"/alert-rules"),component:P.default,exact:!0},{path:"".concat(L,"/alerts"),component:D.default,exact:!0},{path:"".concat(L,"/custom-monitoring"),component:N.default,exact:!0},(0,o.getIndexRoute)({path:"".concat(L,"/workloads"),to:"".concat(L,"/deployments"),exact:!0}),(0,o.getIndexRoute)({path:"".concat(L,"/applications"),to:"".concat(L,"/applications/").concat(globals.app.hasKSModule("openpitrix")?"template":"composing"),exact:!0}),(0,o.getIndexRoute)({path:L,to:"".concat(L,"/overview"),exact:!0}),(0,o.getIndexRoute)({path:"*",to:"/404",exact:!0})])}]);t.default=x},3168:function(e,a,r){"use strict";var n=r(6),o=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=o(r(0)),p=r(70),m=n(r(16)),h=r(634),v=r(656),y=n(r(1158));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=(0,p.inject)("rootStore","projectStore")(l=(0,p.observer)(l=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t){return e.props.rootStore.routing.push(t)},e}return(0,u.default)(r,[{key:"getRoutes",value:function(e){var t=this.props.route,a=t.routes,r=t.path,n=(0,m.default)(e,"[0].items[0]",{}),o=(0,m.default)(n.children,"[0].name")||n.name;return o?(a&&a.forEach((function(e){e.path===r&&e.redirect&&(e.redirect.to="".concat(r,"/").concat(o))})),a):[]}},{key:"render",value:function(){var e=this.props,a=e.match,r=e.location,n=a.params,o=n.workspace,l=n.cluster,c=n.namespace,u=this.props.projectStore.detail,i=globals.app.getProjectNavs({cluster:l,workspace:o,project:c});return d.default.createElement("div",{className:"ks-page"},d.default.createElement("div",{className:"ks-page-side"},d.default.createElement(y.default,{title:t("PROJECT"),detail:u,onChange:this.handleChange}),d.default.createElement(v.Nav,{className:"ks-page-nav",navs:i,location:r,match:a})),d.default.createElement("div",{className:"ks-page-main"},(0,h.renderRoutes)(this.getRoutes(i))))}}]),r}(d.Component))||l)||l;a.default=E},3176:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(70),m=r(25),h=n(r(16)),v=n(r(3177)),y=n(r(3179)),g=n(r(1450)),E=n(r(3181)),b=n(r(3183)),O=n(r(3185)),_=n(r(3187));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,p.inject)("rootStore","projectStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=C(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.project.detail;return d.default.createElement("div",null,d.default.createElement("div",{className:"h3 margin-b12"},t("OVERVIEW")),d.default.createElement(m.Columns,null,d.default.createElement(m.Column,{className:"is-8"},d.default.createElement(v.default,{className:"margin-b12",detail:e}),this.enabledActions.includes("edit")&&d.default.createElement(d.default.Fragment,null,d.default.createElement(O.default,{match:this.props.match}),d.default.createElement(_.default,{match:this.props.match})),globals.app.hasKSModule("openpitrix")&&d.default.createElement(y.default,{className:"margin-b12",match:this.props.match}),d.default.createElement(g.default,{match:this.props.match})),d.default.createElement(m.Column,{className:"is-4"},d.default.createElement(b.default,{className:"margin-b12"}),d.default.createElement(E.default,{match:this.props.match}))))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"namespace",get:function(){return(0,h.default)(this.props.match,"params.namespace")}},{key:"project",get:function(){return this.props.projectStore}},{key:"enabledActions",get:function(){return globals.app.getActions(R(R({module:"project-settings"},this.props.match.params),{},{project:this.namespace}))}}]),r}(d.default.Component))||o)||o;a.default=k},3177:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(0)),f=n(r(3)),d=r(276),p=r(25),m=r(37),h=n(r(3178));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.detail,n=void 0===r?{}:r;return s.default.createElement("div",{className:(0,f.default)(h.default.wrapper,a)},s.default.createElement("div",{className:h.default.header},s.default.createElement(p.Icon,{name:"project",size:40}),s.default.createElement("div",{className:h.default.text},s.default.createElement("div",null,(0,m.getDisplayName)(n)),s.default.createElement("p",null,n.description||"-"))),s.default.createElement("div",{className:h.default.content},globals.app.isMultiCluster&&s.default.createElement("div",{className:h.default.text},s.default.createElement("div",null,n.cluster||"-"),s.default.createElement("p",null,t("CLUSTER"))),s.default.createElement("div",{className:h.default.text},s.default.createElement("div",null,n.workspace?s.default.createElement(d.Link,{to:"/workspaces/".concat(n.workspace,"/overview")},n.workspace):"-"),s.default.createElement("p",null,t("WORKSPACE"))),s.default.createElement("div",{className:h.default.text},s.default.createElement("div",null,n.creator||"-"),s.default.createElement("p",null,t("CREATOR")))),s.default.createElement("img",{className:h.default.background,src:"/assets/project-overview.svg"}))}}]),r}(s.default.Component);a.default=y},3178:function(e,t,a){e.exports={wrapper:"_3krx7rpQbk7J9P3x6V9xc7",header:"_1yX2Zr69asT3KEERbB2lgG",text:"j5DVVp4LaRGIfr1uYxeNt",content:"JgySaCSUzjxdMRSTvyDYm",background:"_27rJHXPcM3Z3XJMokqpXIr"}},3179:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=r(276),v=n(r(16)),y=n(r(32)),g=r(25),E=n(r(723)),b=n(r(293)),O=n(r(960)),_=n(r(3180));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,m.inject)("rootStore")(o=(0,m.observer)(o=function(e){(0,i.default)(r,e);var a=C(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleClickApp=function(e){var a=e.currentTarget.dataset.app,r=t.props.match.params,n=r.workspace,o=r.cluster,l=r.namespace;t.routing.push("/".concat(n,"/clusters/").concat(o,"/projects/").concat(l,"/applications/template/").concat(a))},t.handleImageOnError=function(e){"/assets/default-app.svg"!==e.target.src&&(e.target.src="/assets/default-app.svg")},t.store=new O.default,t}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){this.store.fetchList(R(R({},this.props.match.params),{},{limit:3}))}},{key:"renderExtras",value:function(){var e=this.props.match.params,a=e.workspace,r=e.cluster,n=e.namespace;return d.default.createElement(h.Link,{className:_.default.more,to:"/".concat(a,"/clusters/").concat(r,"/projects/").concat(n,"/applications/template")},t("VIEW_MORE"))}},{key:"render",value:function(){var e=this,a=(0,p.toJS)(this.store.list).data;return(0,y.default)(a)?null:d.default.createElement(E.default,{className:_.default.apps,title:t("INSTALLED_APPS"),extras:this.renderExtras()},d.default.createElement(g.Columns,{className:"is-variable is-1"},a.map((function(t){var a=(0,v.default)(t,"app.icon"),r=(0,v.default)(t,"app.name");return d.default.createElement(g.Column,{key:t.cluster_id,className:"is-4"},d.default.createElement("div",{className:_.default.app,"data-app":t.cluster_id,onClick:e.handleClickApp},d.default.createElement("label",{className:_.default.icon},d.default.createElement(b.default,{iconLetter:r,iconSize:40,src:a,onError:e.handleImageOnError})),d.default.createElement("div",{className:_.default.title},d.default.createElement("div",null,t.name),d.default.createElement("p",{title:t.description},t.description||"-"))))}))))}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(d.default.Component))||o)||o;a.default=k},3180:function(e,t,a){e.exports={apps:"_1_49QCI-gEQrWg86_Qr5AW",app:"_1y-1rI8vZRAMmbLC1g1zr3",icon:"_2lmmIpoT0aC9psxznmh7y9",title:"_1ai8RLjMQAwzV9Ayec4Cgu",more:"_3ewq7qXqAzjJdKfpLsLPVn"}},3181:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(5),p=r(70),m=n(r(16)),h=n(r(32)),v=r(276),y=r(25),g=n(r(723)),E=r(725),b=n(r(1477)),O=n(r(3182));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S={workload_cpu_usage:"cpu",workload_memory_usage_wo_cache:"memory",workload_net_bytes_transmitted:"bandwidth",workload_net_bytes_received:"bandwidth"},R=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,u.default)(r,e);var a=_(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).store=new b.default({cluster:(0,m.default)(e.match,"params.cluster"),namespaces:(0,m.default)(e.match,"params.namespace")}),t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"getWorkloadLink",value:function(e){var t=e.owner_kind;if("Pod"!==t){var a=e.workload,r=(void 0===a?"":a).replace(/\w+:/,""),n=this.props.match.params,o=n.workspace,l=n.cluster,c=n.namespace,u="".concat(o?"/".concat(o):"","/clusters/").concat(l,"/projects/").concat(c);return{Deployment:"".concat(u,"/deployments/").concat(r),StatefulSet:"".concat(u,"/statefulsets/").concat(r),DaemonSet:"".concat(u,"/daemonsets/").concat(r)}[t]}}},{key:"renderHeader",value:function(){return f.default.createElement("div",{className:O.default.header},f.default.createElement("div",{className:O.default.title},t("RESOURCE_NAME")),f.default.createElement(y.Select,{className:O.default.select,value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}))}},{key:"renderEmpty",value:function(){return f.default.createElement("div",{className:O.default.empty},f.default.createElement(y.Icon,{name:"backup",size:32}),f.default.createElement("div",null,t("NO_DATA")))}},{key:"renderContent",value:function(){var e=this,a=(0,d.toJS)(this.store.data);return!this.store.isLoading&&(0,h.default)(a)?this.renderEmpty():f.default.createElement("div",{className:O.default.content},a.slice(0,5).map((function(r){var n={Deployment:"backup",StatefulSet:"stateful-set",DaemonSet:"deamon-set",Pod:"pod",Default:"backup"},o=e.getWorkloadLink(r),l=r.workload.replace(/\w+:/,""),c=100*r[e.store.sort_metric]/a[0][e.store.sort_metric],u=(0,E.getSuitableUnit)(r[e.store.sort_metric],S[e.store.sort_metric]);return f.default.createElement("div",{className:O.default.app,key:l},f.default.createElement("div",{className:O.default.appContent},f.default.createElement(y.Icon,{name:n[r.owner_kind]||n.Default,type:"dark",size:40}),f.default.createElement("div",{className:O.default.text},f.default.createElement("div",{className:"relative","data-tooltip":l},f.default.createElement("div",null,o?f.default.createElement(v.Link,{to:o},l):l)),f.default.createElement("p",null,t(r.owner_kind))),f.default.createElement("div",{className:O.default.value},(0,E.getValueByUnit)(r[e.store.sort_metric],u)||0,f.default.createElement("span",{style:{fontSize:12}}," ",u))),f.default.createElement("div",{className:O.default.background,style:{width:"".concat(c.toFixed(2),"%")}}))})))}},{key:"render",value:function(){return f.default.createElement(g.default,{className:O.default.wrapper,title:t("TOP_5_FOR_RESOURCE_USAGE")},this.renderHeader(),this.renderContent())}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),r}(f.default.Component))||o)||o;a.default=R},3182:function(e,t,a){e.exports={wrapper:"_1UALyvGHii-1cfo4FoEYIO",header:"_3DIgkOu1Z8XQBOuX5B5BmC",title:"MNoZg4Uw3ghathQUO2qdn",select:"_1uhE3pKI5LOTwAz5aKaXut",app:"_3xSZJeGtYhB57023OcZAN-",value:"_2sWPILeIkmIMZ614Daucl7",appContent:"_1XzM6chk-SmYXMvZFNQ1Bu",text:"_1WsQhhK0Q2NkjFsa4sUdHf",background:"_3m6WyhdakVE2Q_uGbDY7SS",empty:"_3YrK_5QBlrp3c1Oa4h5Zxe"}},3183:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(0)),f=n(r(3)),d=r(25),p=r(37),m=n(r(3184));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=h(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props.className;return s.default.createElement("div",{className:(0,f.default)(m.default.wrapper,e)},s.default.createElement("div",{className:m.default.header},s.default.createElement(d.Icon,{name:"question",size:24}),t("TIPS")),s.default.createElement("div",{className:m.default.tip},s.default.createElement("a",{href:(0,p.getDocsUrl)("project_members"),target:"_blank",rel:"noreferrer noopener"},"💁 ",t("HOW_TO_INVITE_USERS"))),s.default.createElement("div",{className:m.default.tip},s.default.createElement("a",{href:(0,p.getDocsUrl)("internet"),target:"_blank",rel:"noreferrer noopener"},"💁 ",t("HOW_TO_SET_PROJECT_GATEWAY"))))}}]),r}(s.default.Component);a.default=v},3184:function(e,t,a){e.exports={wrapper:"_3y0CtGdYgG4rFw1deNbO6q",header:"_1pRslBEhgNdpLi2JjnZKnM",tip:"vebuYIqys5CVWeKiw_UO4"}},3185:function(e,a,r){"use strict";var n=r(6),o=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=o(r(0)),p=r(70),m=n(r(16)),h=r(25),v=n(r(275)),y=n(r(723)),g=n(r(811)),E=r(635),b=n(r(3186));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=(0,p.inject)("rootStore","projectStore")(l=(0,p.observer)(l=(0,E.trigger)(l=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={showTip:!1},e.store=new g.default,e.showSetting=function(){e.trigger("project.quota.edit",{detail:e.props.projectStore.detail,success:function(){return e.setState({showTip:!1})}})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.store.fetchListByK8s(this.params).then((function(){var t=e.store.list.total;e.setState({showTip:0===t})}))}},{key:"render",value:function(){return this.state.showTip?d.default.createElement(y.default,{className:b.default.wrapper},d.default.createElement(v.default,{className:b.default.text,icon:"exclamation",title:t("PROJECT_QUOTAS_NOT_SET"),description:t("PROJECT_QUOTAS_DESC")}),d.default.createElement(h.Button,{type:"control",onClick:this.showSetting},t("EDIT_QUOTAS"))):null}},{key:"params",get:function(){return(0,m.default)(this.props.match,"params",{})}}]),r}(d.Component))||l)||l)||l;a.default=_},3186:function(e,t,a){e.exports={wrapper:"zr84jQQBAUTnqwdnfqSXt",text:"_2JbaypfUGluDfzJJsg4t_5"}},3187:function(e,a,r){"use strict";var n=r(6),o=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,c=n(r(21)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=o(r(0)),m=r(70),h=n(r(16)),v=r(25),y=n(r(275)),g=n(r(723)),E=n(r(937)),b=r(635),O=n(r(3188));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,m.inject)("rootStore","projectStore")(l=(0,m.observer)(l=(0,b.trigger)(l=function(e){(0,s.default)(r,e);var a=R(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={showTip:!1},e.store=new E.default,e.showSetting=function(){var t=e.store.list.data;e.trigger("project.default.resource",S(S({},e.params),{},{detail:t[0],success:function(){return e.setState({showTip:!1})}}))},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.store.fetchListByK8s(this.params).then((function(){var t=e.store.list.total;e.setState({showTip:0===t})}))}},{key:"render",value:function(){return this.state.showTip?p.default.createElement(g.default,{className:O.default.wrapper},p.default.createElement(y.default,{className:O.default.text,icon:"exclamation",title:t("DEFAULT_CONTAINER_QUOTAS_NOT_SET"),description:t("DEFAULT_CONTAINER_QUOTAS_DESC")}),p.default.createElement(v.Button,{type:"control",onClick:this.showSetting},t("EDIT_QUOTAS"))):null}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}}]),r}(p.Component))||l)||l)||l;a.default=C},3188:function(e,t,a){e.exports={wrapper:"_3oxl-jUOc3HrBEM_1dTUe",text:"_1RJvyaqwA38H1fOcL4oZyS"}},3189:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(21)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(16)),h=n(r(729)),v=n(r(925)),y=r(726),g=n(r(728)),E=r(37),b=n(r(865)),O=n(r(1478));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,y.withProjectList)({store:new b.default,module:"applications",name:"APP"})(o=function(e){(0,s.default)(r,e);var a=R(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).type="composing",e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),search:!0,render:function(t,a){return p.default.createElement(v.default,{title:(0,E.getDisplayName)(a),avatar:a.icon||"/assets/default-app.svg",to:"".concat(e.props.match.url,"/").concat(t),desc:(0,m.default)(a,'annotations["kubesphere.io/description"]',"-")})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"20%",render:function(e){return p.default.createElement(h.default,{name:t(e),type:e,flicker:!0})}},{title:t("VERSION"),dataIndex:"version",isHideable:!0,width:"20%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:a("createTime"),isHideable:!0,width:180,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore,o=t.getData;return e.props.trigger("crd.app.create",S(S({module:r},a.params),{},{projectDetail:n.detail,success:o}))},e}return(0,i.default)(r,[{key:"getTableProps",value:function(){var e=this.props.tableProps,a=this.canCreate?[{key:"create",type:"control",text:t("CREATE"),onClick:this.showCreate}]:[];return{tableActions:S(S({},e.tableActions),{},{actions:a,onCreate:null}),emptyProps:{title:t("NO_COMPOSED_APP_FOUND"),desc:t("COMPOSED_APP_EMPTY_DESC")},searchType:"name"}}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=e.match;return p.default.createElement(y.ListPage,this.props,p.default.createElement(O.default,(0,l.default)({},t,{match:r,type:this.type})),p.default.createElement(g.default,(0,l.default)({},a,this.getTableProps(),{columns:this.getColumns()})))}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace,n=globals.app.getActions({workspace:t,cluster:a,project:r,module:"deployments"}).includes("create"),o=globals.app.getActions({workspace:t,cluster:a,project:r,module:"services"}).includes("create");return n&&o}}]),r}(p.default.Component))||o;a.default=C},3190:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(21)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(279),h=n(r(650)),v=n(r(16)),y=r(276),g=r(25),E=n(r(729)),b=n(r(925)),O=r(726),_=n(r(728)),S=r(37),R=n(r(960)),C=n(r(1478));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=(0,O.withProjectList)({store:new R.default,module:"applications",name:"APP"})(o=function(e){(0,s.default)(r,e);var a=w(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).type="template",e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",render:function(t,a){return p.default.createElement(b.default,{isApp:!0,to:"".concat(e.prefix,"/").concat(a.cluster_id),avatar:(0,v.default)(a,"app.icon"),iconLetter:t,iconSize:40,title:t,desc:a.description})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"16%",render:e.renderStatus},{title:t("APP"),dataIndex:"app.name",isHideable:!0,width:"16%",render:function(e,t){return p.default.createElement(y.Link,{to:"/apps/".concat((0,v.default)(t,"version.app_id"))},e)}},{title:t("VERSION"),dataIndex:"version.name",isHideable:!0,width:"16%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"status_time",sorter:!0,sortOrder:a("status_time"),isHideable:!0,width:180,render:function(e,t){return(0,S.getLocalTime)(t.update_time||t.status_time).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderStatus=function(e,a){return a.additional_info?p.default.createElement(g.Tooltip,{content:a.additional_info},p.default.createElement(E.default,{name:t(e),type:e,flicker:!0})):p.default.createElement(E.default,{name:t(e),type:e,flicker:!0})},e.showDeploy=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore,o=t.trigger;return e.props.trigger("app.deploy",{module:r,namespace:a.params.namespace,cluster:a.params.cluster,workspace:(0,v.default)(n,"detail.workspace"),routing:e.props.rootStore.routing,trigger:o})},e.handleFetch=(0,h.default)((function(t){var a=e.props,r=a.store,n=a.getData;if(!r.list.isLoading)return n(T(T(T({},(0,m.parse)(location.search.slice(1))),t),{},{silent:!0}))}),1e3),e.handleWatch=function(t){"HelmRelease"===t.object.kind&&["MODIFIED","DELETED","ADDED"].includes(t.type)&&e.handleFetch()},e}return(0,i.default)(r,[{key:"getTableProps",value:function(){var e=this.props.tableProps,a=this.canCreate?[{key:"deploy",type:"control",text:t("CREATE"),onClick:this.showDeploy}]:[];return{tableActions:T(T({},e.tableActions),{},{actions:a,onCreate:null}),emptyProps:{title:t("NO_TEMPLATE_BASED_APP_FOUND"),desc:t("TEMPLATE_BASED_APP_EMPTY_DESC")},searchType:"keyword"}}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=e.match;return p.default.createElement(O.ListPage,(0,l.default)({},this.props,{onMessage:this.handleWatch}),p.default.createElement(C.default,(0,l.default)({},t,{match:r,type:this.type})),p.default.createElement(_.default,(0,l.default)({},a,this.getTableProps(),{itemActions:this.itemActions,columns:this.getColumns()})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/applications/").concat(this.type)}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return globals.app.hasKSModule("openpitrix")&&globals.app.hasPermission({cluster:t,project:a,module:"applications",action:"create"})}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(e){return a("openpitrix.app.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(p.default.Component))||o;a.default=P},3191:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(71)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(727)),h=n(r(724)),v=r(726),y=n(r(890)),g=n(r(755)),E=n(r(728)),b=r(37),O=r(289),_=r(58),S=n(r(736));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,v.withProjectList)({store:new S.default("deployments"),module:"deployments",name:"WORKLOAD"})(o=function(e){(0,s.default)(r,e);var a=k(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.getItemDesc=function(a){var r=(0,O.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?p.default.createElement(g.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return p.default.createElement(m.default,{icon:_.ICON_TYPES[o],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return p.default.createElement(y.default,{data:t,module:o})}},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"22%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",sorter:!0,sortOrder:r("updateTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,supportGpuSelect:!0})},e}return(0,i.default)(r,[{key:"getStatus",value:function(){return _.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return p.default.createElement(v.ListPage,this.props,p.default.createElement(h.default,(0,c.default)({},t,{tabs:this.tabs})),p.default.createElement(E.default,(0,c.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"itemActions",get:function(){var e=this.props,a=e.module,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(e){return r("workload.redeploy",{module:a,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("workload.delete",{type:n,detail:e})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.trigger,r=e.name,n=e.rowKey;return C(C({},e.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return a("workload.batch.delete",{type:r,rowKey:n})}}]})}}]),r}(p.default.Component))||o;a.default=T},3192:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(71)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(727)),h=n(r(724)),v=r(726),y=n(r(890)),g=n(r(755)),E=n(r(728)),b=r(37),O=r(289),_=r(58),S=n(r(736));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,v.withProjectList)({store:new S.default("statefulsets"),module:"statefulsets",name:"WORKLOAD"})(o=function(e){(0,s.default)(r,e);var a=k(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.getItemDesc=function(a){var r=(0,O.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?p.default.createElement(g.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return p.default.createElement(m.default,{icon:_.ICON_TYPES[o],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return p.default.createElement(y.default,{data:t,module:o})}},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"22%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,i.default)(r,[{key:"getStatus",value:function(){return _.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return p.default.createElement(v.ListPage,this.props,p.default.createElement(h.default,(0,c.default)({},t,{tabs:this.tabs})),p.default.createElement(E.default,(0,c.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"itemActions",get:function(){var e=this.props,a=e.module,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(e){return r("workload.redeploy",{module:a,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("workload.delete",{type:n,detail:e})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.trigger,r=e.name,n=e.rowKey;return C(C({},e.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return a("workload.batch.delete",{type:r,rowKey:n})}}]})}}]),r}(p.default.Component))||o;a.default=T},3193:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(71)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(727)),h=n(r(724)),v=r(726),y=n(r(890)),g=n(r(755)),E=n(r(728)),b=r(37),O=r(289),_=r(58),S=n(r(736));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,v.withProjectList)({store:new S.default("daemonsets"),module:"daemonsets",name:"WORKLOAD"})(o=function(e){(0,s.default)(r,e);var a=k(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.getItemDesc=function(a){var r=(0,O.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?p.default.createElement(g.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return p.default.createElement(m.default,{icon:_.ICON_TYPES[o],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return p.default.createElement(y.default,{data:t,module:o})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,i.default)(r,[{key:"getStatus",value:function(){return _.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return p.default.createElement(v.ListPage,this.props,p.default.createElement(h.default,(0,c.default)({},t,{tabs:this.tabs})),p.default.createElement(E.default,(0,c.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"itemActions",get:function(){var e=this.props,a=e.module,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(e){return r("workload.redeploy",{module:a,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.trigger,r=e.name,n=e.rowKey;return C(C({},e.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return a("workload.batch.delete",{type:r,rowKey:n})}}]})}}]),r}(p.default.Component))||o;a.default=T},3194:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(276),m=r(25),h=n(r(653)),v=n(r(724)),y=n(r(728)),g=r(726),E=n(r(755)),b=r(37),O=r(58),_=n(r(654)),S=n(r(3195));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,g.withProjectList)({store:new _.default,module:"pods",name:"POD"})(o=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).getItemDesc=function(e){var a=e.podStatus,r=a.status,n=a.type;return"running"!==n&&"completed"!==n?d.default.createElement(E.default,{status:n,reason:t(r),data:e,type:"pod"}):t(n)},e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),search:!0,render:e.renderAvatar},{title:t("STATUS"),dataIndex:"status",filters:e.getPodsStatus(),isHideable:!0,search:!0,render:function(e,a){var r=a.podStatus;return d.default.createElement("span",null,t(r.type.toUpperCase()))}},{title:t("NODE"),dataIndex:"node",isHideable:!0,width:"18%",render:e.renderNode},{title:t("POD_IP_ADDRESS"),dataIndex:"podIp",isHideable:!0,width:"15%"},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"15%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"startTime",sorter:!0,sortOrder:a("startTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderAvatar=function(t,a){var r=e.props.module,n=e.props.match.params,o=n.workspace,l=n.cluster,c=n.namespace,u=a.podStatus;return d.default.createElement("div",{className:S.default.avatar},d.default.createElement("div",{className:S.default.icon},d.default.createElement(m.Icon,{name:O.ICON_TYPES[r],size:40}),d.default.createElement(h.default,{className:S.default.indicator,type:u.type,flicker:!0})),d.default.createElement("div",null,d.default.createElement(p.Link,{className:S.default.title,to:"/".concat(o,"/clusters/").concat(l,"/projects/").concat(c,"/").concat(r,"/").concat(t)},t),d.default.createElement("div",{className:S.default.desc},e.getItemDesc(a))))},e.renderNode=function(a,r){var n=e.props.match.params.cluster,o=r.node,l=r.nodeIp;if(!o)return"-";var c=t("NODE_IP",{node:o,ip:l});return d.default.createElement(p.Link,{to:"/clusters/".concat(n,"/nodes/").concat(o)},c)},e.renderStatus=function(e){return d.default.createElement(Status,{type:e.type,name:t(e.type),flicker:!0})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){localStorage.setItem("pod-detail-referrer",location.pathname)}},{key:"getStatus",value:function(){return O.POD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getPodsStatus",value:function(){return O.PODS_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return d.default.createElement(g.ListPage,this.props,d.default.createElement(v.default,t),d.default.createElement(y.default,(0,l.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),hideColumn:["status"],onCreate:null})))}},{key:"itemActions",get:function(){var e=this.props,a=e.getData,r=e.trigger,n=e.name;return[{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(e){return r("resource.yaml.edit",{detail:e,readOnly:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e,success:a})}}]}}]),r}(d.default.Component))||o;a.default=C},3195:function(e,t,a){e.exports={avatar:"_18wjE6YwKuGCc6QtMtarcr",icon:"asHVqalQGd7LEpy4uq86g",indicator:"Hf_3Y6V-3PISqkpZmPeSG",title:"_3C8yRkma8RNtyONr5I2J0t",desc:"_2Xm1Gh4UKoaBZc2amYMF34"}},3196:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(727)),m=n(r(724)),h=r(726),v=n(r(1137)),y=n(r(755)),g=n(r(728)),E=r(37),b=r(289),O=r(58),_=n(r(736));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var R=(0,h.withProjectList)({store:new _.default("jobs"),module:"jobs",name:"JOB"})(o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.getItemDesc=function(a){var r=(0,b.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?d.default.createElement(y.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return d.default.createElement(p.default,{icon:O.ICON_TYPES[o],iconSize:40,title:(0,E.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"20%",render:function(e,t){return d.default.createElement(v.default,{data:t,module:o})}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",sorter:!0,sortOrder:r("updateTime"),isHideable:!0,width:"20%",render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,supportGpuSelect:!0})},e}return(0,u.default)(r,[{key:"getStatus",value:function(){return O.JOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return d.default.createElement(h.ListPage,this.props,d.default.createElement(m.default,(0,l.default)({},t,{tabs:this.tabs})),d.default.createElement(g.default,(0,l.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.store,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"rerun",icon:"refresh",text:t("RERUN"),action:"edit",onClick:function(e){return r.rerun(e)}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(e){return a("resource.delete",{type:n,detail:e})}}]}}]),r}(d.default.Component))||o;a.default=R},3197:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(276),h=n(r(16)),v=n(r(727)),y=n(r(729)),g=n(r(724)),E=r(726),b=n(r(728)),O=r(37),_=r(58),S=n(r(823));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,E.withProjectList)({store:new S.default("s2ibuilders"),module:"s2ibuilders",name:"IMAGE_BUILDER"})(o=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).getColumns=function(){var a=e.props,r=a.prefix,n=a.module;return[{title:t("NAME"),dataIndex:"name",render:function(e,a){return d.default.createElement(v.default,{icon:_.ICON_TYPES[n],iconSize:40,title:(0,O.getDisplayName)(a),desc:a.serviceName?t("BUILD_IMAGE_FOR_SERVICE",{service:a.serviceName}):"-",to:"".concat(r,"/").concat(e)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"15%",render:function(e){var a=(0,h.default)(e,"lastRunState","");return a="Running"===a?"Building":a,d.default.createElement(y.default,{name:t(a||"NOT_RUNNING_YET"),type:a||"Unknown",flicker:!0})}},{title:t("TYPE"),dataIndex:"type",isHideable:!0,width:"15%",render:function(e){return t(e)}},{title:t("SERVICE"),dataIndex:"serviceName",isHideable:!0,width:"15%",render:function(e){return e?d.default.createElement(m.Link,{to:"./services/".concat(e,"/")},e):"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("imagebuilder.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.freshDisposer=(0,p.reaction)((function(){return e.store.list.isLoading}),(function(){var t=e.store.list.data.some((function(e){return"Running"===(0,h.default)(e,"status.lastRunState","Running")}));clearTimeout(e.freshTimer),t&&(e.freshTimer=setTimeout(e.handleFresh,4e3))}),{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.freshDisposer&&this.freshDisposer(),clearTimeout(this.freshTimer)}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return d.default.createElement(E.ListPage,this.props,d.default.createElement(g.default,(0,l.default)({},a,{description:t("IMAGE_BUILDER_DESC")})),d.default.createElement(b.default,(0,l.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"store",get:function(){return this.props.store}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(d.default.Component))||o;a.default=C},3198:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(727)),m=n(r(729)),h=n(r(724)),v=r(726),y=n(r(755)),g=n(r(728)),E=r(37),b=r(289),O=r(58),_=n(r(736));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var R=(0,v.withProjectList)({store:new _.default("cronjobs"),module:"cronjobs",name:"CRONJOB"})(o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.handleSwitch=function(t){return function(a){e.props.store.switch(a,t).then((function(){e.props.routing.query()}))}},e.getItemDesc=function(a){var r=(0,b.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?d.default.createElement(y.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return d.default.createElement(p.default,{icon:O.ICON_TYPES[o],iconSize:40,title:(0,E.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"15%",render:function(e,a){var r=(0,b.getWorkloadStatus)(a,o).status;return d.default.createElement(m.default,{type:r,name:t(r)})}},{title:t("SCHEDULE"),dataIndex:"spec.schedule",isHideable:!0,width:"15%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,supportGpuSelect:!0})},e}return(0,u.default)(r,[{key:"getStatus",value:function(){return O.CRONJOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return d.default.createElement(v.ListPage,this.props,d.default.createElement(h.default,(0,l.default)({},t,{tabs:this.tabs})),d.default.createElement(g.default,(0,l.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{show:function(e){return e.suspend},key:"start",icon:"start",text:t("START"),action:"edit",onClick:this.handleSwitch(!0)},{show:function(e){return!e.suspend},key:"pause",icon:"stop",text:t("PAUSE"),action:"edit",onClick:this.handleSwitch(!1)},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(d.default.Component))||o;a.default=R},3199:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(71)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(727)),h=n(r(275)),v=n(r(724)),y=r(726),g=n(r(728)),E=r(37),b=r(58),O=n(r(748)),_=n(r(3200));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=(0,y.withProjectList)({store:new O.default,module:"services",name:"SERVICE",searchByApp:!0})(o=function(e){(0,s.default)(r,e);var a=C(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).state={type:"list"},e.handleTabChange=function(t){e.setState({type:t})},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,width:"20%",render:function(t,a){return p.default.createElement(m.default,{icon:b.ICON_TYPES[n],iconSize:40,title:(0,E.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("SERVICE_TYPE_TCAP"),dataIndex:'annotations["kubesphere.io/serviceType"]',isHideable:!0,width:"15%",render:function(e,a){return p.default.createElement(h.default,{title:e?t("SERVICE_TYPE_".concat(e.toUpperCase())):t("CUSTOM_SERVICE"),description:t(a.type)||"-"})}},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"15%"},{title:t("INTERNAL_ACCESS_PL"),dataIndex:"clusterIP",isHideable:!0,width:"15%",render:function(e,a){return p.default.createElement(h.default,{title:a.clusterIP||"",description:t("".concat(a.type))})}},{title:t("EXTERNAL_ACCESS"),dataIndex:"specType",isHideable:!0,width:"20%",render:function(t,a){return e.renderExternalService(a)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:"15%",render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderExternalService=function(e){var a={des:"-",title:"-"};return"NodePort"===e.specType&&(a.des=t("NODE_PORTS_SCAP"),a.title=e.ports.filter((function(e){return e.nodePort})).map((function(e){return"".concat(e.nodePort,"/").concat(e.protocol)})).join("; ")),"LoadBalancer"===e.specType&&(a.des=e.loadBalancerIngress.length>1?t("LOAD_BALANCERS_SCAP"):t("LOAD_BALANCER_SCAP"),a.title=e.loadBalancerIngress.join("; ")),e.externalName?p.default.createElement(h.default,{description:a.des,title:function(){return p.default.createElement(Tooltip,{content:e.externalName},p.default.createElement("span",null,a.title))}}):p.default.createElement(h.default,{description:t("".concat(a.des)),title:a.title})},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("service.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.state.type,t=this.props,a=t.bannerProps,r=t.tableProps,n=t.match;return p.default.createElement(y.ListPage,this.props,p.default.createElement(v.default,(0,c.default)({},a,{tabs:this.tabs,tips:this.tips})),"topology"===e?p.default.createElement(_.default,{match:n}):p.default.createElement(g.default,(0,c.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"tabs",get:function(){var e=this.props.match.params.cluster;return globals.app.hasClusterModule(e,"network.topology")?{value:this.state.type,onChange:this.handleTabChange,options:[{value:"list",label:t("SERVICE_LIST")},{value:"topology",label:t("SERVICE_TOPOLOGY")}]}:{}}},{key:"tips",get:function(){return[{title:t("SERVICE_TYPES_Q"),description:t("SERVICE_TYPES_A")},{title:t("SCENARIOS_FOR_SERVICES_Q"),description:t("SCENARIOS_FOR_SERVICES_A")}]}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editService",icon:"network-router",text:t("EDIT_SERVICE"),action:"edit",onClick:function(e){return a("service.edit",{detail:e})}},{key:"editGateway",icon:"ip",text:t("EDIT_EXTERNAL_ACCESS"),action:"edit",show:function(e){return e.type===b.SERVICE_TYPES.VirtualIP},onClick:function(e){return a("service.gateway.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("service.delete",{type:r,detail:e})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.tableProps,r=e.name,n=e.rowKey,o=e.trigger;return R(R({},a.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return o("service.batch.delete",{type:r,rowKey:n})}}]})}}]),r}(p.default.Component))||o;a.default=k},3200:function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l=r(a(21)),c=r(a(12)),u=r(a(13)),i=r(a(135)),s=r(a(19)),f=r(a(20)),d=r(a(18)),p=n(a(0)),m=r(a(3)),h=a(70),v=a(25),y=a(3673),g=a(793),E=r(a(723)),b=r(a(3201)),O=a(725),_=r(a(3251)),S=r(a(3253)),R=r(a(3255)),C=r(a(3257)),k=r(a(3271));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D=(0,h.observer)(o=function(e){(0,s.default)(a,e);var t=P(a);function a(){var e;(0,c.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={type:"pause",selectService:null,fullscreen:!1},e.store=new b.default,e.handleZoom=function(){var t=g.event.transform;e.transPan.attr("transform","scale(".concat(t.k,") translate(").concat(t.x/t.k,", ").concat(t.y/t.k,")"))},e.fetchData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.store.fetchList(w(w({},e.props.match.params),t))},e.handleChange=function(t){e.setState({type:t},(function(){"auto"===e.state.type?(0,O.startAutoRefresh)((0,i.default)(e),{method:"fetchData",leading:!1,interval:1e4}):(0,O.stopAutoRefresh)((0,i.default)(e))}))},e.handleRefresh=function(){e.fetchData()},e.handleServiceClick=function(t){e.setState((function(e){var a=e.selectService;return{selectService:a&&a.id===t.id?null:t}}))},e.handleDetailClose=function(){e.setState({selectService:null})},e.toggleFullscreen=function(){e.setState((function(e){return{fullscreen:!e.fullscreen}}))},e}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this.fetchData(),this.svg=(0,g.select)("#canvas").call((0,y.zoom)().extent([[0,0],[9999,9999]]).scaleExtent([.1,1.5]).on("zoom",this.handleZoom)),this.transPan=this.svg.select("g.transform")}},{key:"componentWillUnmount",value:function(){(0,O.stopAutoRefresh)(this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.type,r=t.fullscreen,n=t.selectService,o=this.store,c=o.topologies,u=c.nodes,i=void 0===u?[]:u,s=c.edges,f=void 0===s?[]:s,d=o.isLoading;return p.default.createElement(E.default,{className:(0,m.default)((0,l.default)({},k.default.fullscreen,r))},p.default.createElement("div",{className:k.default.toolbar},p.default.createElement(_.default,{value:a,options:this.options,onChange:this.handleChange}),p.default.createElement("div",{className:k.default.right},p.default.createElement(v.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh}),p.default.createElement(v.Button,{type:"flat",icon:r?"minimize":"maximize",onClick:this.toggleFullscreen}))),p.default.createElement("div",{className:k.default.content},p.default.createElement("svg",{id:"canvas"},p.default.createElement("g",{className:"transform"},p.default.createElement("g",{className:"chart"},f.map((function(e){return p.default.createElement(R.default,{key:e.v+e.w,data:e})})),i.map((function(t){return p.default.createElement(S.default,{key:t.id,data:t,isSelected:n&&n.id===t.id,onClick:e.handleServiceClick})}))))),d&&p.default.createElement(v.Loading,{className:k.default.loading}),!!n&&p.default.createElement(C.default,{data:n,store:this.store,match:this.props.match,onClose:this.handleDetailClose})))}},{key:"options",get:function(){return[{label:"AUTO_REFRESH",icon:"start",value:"auto"},{label:"PAUSE",icon:"pause",value:"pause"}]}}]),a}(p.Component))||o;t.default=D},3201:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o,l,c,u=r(a(49)),i=r(a(50)),s=r(a(91)),f=r(a(12)),d=r(a(13)),p=r(a(74)),m=(r(a(92)),r(a(16))),h=a(5),v=a(3202),y=(n=function(){function e(t){var a=this;(0,f.default)(this,e),this.topologies={},(0,s.default)(this,"detail",o,this),(0,s.default)(this,"isLoading",l,this),(0,s.default)(this,"isSubmitting",c,this),this.getListUrl=function(e){return"kapis/network.kubesphere.io/v1alpha2".concat(a.getPath(e),"/topology")},this.getDetailUrl=function(e){return"".concat(a.getListUrl(e),"/").concat(e.name)},this.module=t}var t,a;return(0,d.default)(e,[{key:"getPath",value:function(e){var t=e.cluster,a=e.namespace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"fetchList",value:(a=(0,i.default)(u.default.mark((function e(t){var a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getListUrl(t),t);case 3:a=e.sent,this.topologies=(0,v.processTopology)((0,m.default)(a,"nodes",{})),this.isLoading=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchDetail",value:(t=(0,i.default)(u.default.mark((function e(t){var a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getDetailUrl(t));case 3:a=e.sent,this.detail=a,this.isLoading=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),o=(0,p.default)(n.prototype,"detail",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=(0,p.default)(n.prototype,"isLoading",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c=(0,p.default)(n.prototype,"isSubmitting",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,p.default)(n.prototype,"fetchList",[h.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchList"),n.prototype),(0,p.default)(n.prototype,"fetchDetail",[h.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchDetail"),n.prototype),n);t.default=y},3202:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.processTopology=void 0;var n=r(a(21)),o=r(a(1481)),l=r(a(1206)),c=r(a(1061)),u=r(a(294));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.processTopology=function(e){var t=new o.default.graphlib.Graph;t.setGraph({ranksep:"100",marginx:20,marginy:20}),t.setDefaultEdgeLabel((function(){return{}})),Object.keys(e).forEach((function(a){t.setNode(a,{label:e[a].label,width:150,height:100}),e[a].adjacency&&e[a].adjacency.forEach((function(e){var r=a===e?1:0;t.setEdge(a,e,{id:"".concat(a,"-").concat(e),minlen:r})}))})),o.default.layout(t),t.nodes().forEach((function(a){var r=t.node(a);e[a].x=r.x,e[a].y=r.y,e[a].degree=0})),t.edges().forEach((function(t){t.v===t.w?e[t.v].degree+=1:(e[t.v].degree+=1,e[t.w].degree+=1)}));var a=t.edges().map((function(e){var a=t.edge(e).points;return s(s({},e),{},{points:a})})),r=t.graph(),n=r.width,i=r.height,f={width:n,height:i,gWidth:n,gHeight:i,nodes:Object.values(e),edges:a};return f=function(e){var t=s({},e),a=0,r=0,n=e.gHeight||e.height,o=e.gWidth||e.width,i=n?o/n:1,f=e.nodes,d=f.filter((function(e){return 0===e.degree}));if(d.length){var p,m,h=f.filter((function(e){return 0!==e.degree}));h.length>0&&(i<1?(p=(0,l.default)(h,(function(e){return e.x})).x,m=(0,c.default)(h,(function(e){return e.y})).y,p&&(p+=200)):(p=(0,c.default)(h,(function(e){return e.x})).x,(m=(0,l.default)(h,(function(e){return e.y})).y)&&(m+=150))),p=p||(a+150)/2,m=m||(r+100)/2;var v,y,g=Math.ceil(Math.sqrt(d.length)),E=0,b=0;f=(f=(0,u.default)(f,(function(e){return e.rank}))).map((function(e){return d.find((function(t){return t.id===e.id}))?(b===g&&(b=0,E+=1),v=200*b+p,y=150*E+m,b+=1,Object.assign(e,{x:v,y:y})):e})),t.width=Math.max(e.width,v+75+50),t.height=Math.max(e.height,y+50+50),t.nodes=f}return t}(f)}},3251:function(e,a,r){"use strict";var n=r(72),o=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=o(r(12)),c=o(r(13)),u=o(r(19)),i=o(r(20)),s=o(r(18)),f=n(r(0)),d=r(25),p=o(r(3252));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(t){e.props.onChange(t.currentTarget.dataset.value)},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.value,n=a.options;return f.default.createElement("div",{className:p.default.buttons},n.map((function(a){return f.default.createElement(d.Button,{key:a.value,icon:a.icon,iconType:r===a.value?"light":"dark",type:r===a.value?"control":"default","data-value":a.value,onClick:e.handleClick},t(a.label))})))}}]),r}(f.Component);a.default=h},3252:function(e,t,a){e.exports={buttons:"_3ikNc9_I9L02SEeuiDIB8K"}},3253:function(e,a,r){"use strict";var n=r(72),o=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=o(r(21)),c=o(r(12)),u=o(r(13)),i=o(r(19)),s=o(r(20)),f=o(r(18)),d=n(r(0)),p=o(r(3)),m=r(25),h=o(r(3254));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y={cloud:"cloud",heptagon:"appcenter"},g=function(e){(0,i.default)(r,e);var a=v(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props;(0,t.onClick)(t.data)},e}return(0,u.default)(r,[{key:"render",value:function(){var e,a=this.props,r=a.data,n=a.isSelected,o=r.label,c=r.labelMinor,u=r.x,i=r.y;if(r&&r.metadata){var s=r.metadata.find((function(e){return"kubernetes_ip"===e.id}));s&&(e=s.value)}return d.default.createElement("g",{className:h.default.wrapper,transform:"translate(".concat(u-75,", ").concat(i-50,")")},d.default.createElement("rect",{width:150,height:100,rx:4}),d.default.createElement("foreignObject",{width:150,height:100},d.default.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",className:(0,p.default)(h.default.service,(0,l.default)({},h.default.selected,n)),onClick:this.handleClick},d.default.createElement("div",{className:h.default.header},d.default.createElement("div",{className:h.default.icon},d.default.createElement(m.Icon,{name:y[r.shape],size:40})),d.default.createElement("div",{className:h.default.text},d.default.createElement("div",{className:h.default.title,title:o},o),d.default.createElement("div",{className:h.default.description},t("POD_COUNT_VALUE",{value:c.replace(/[ a-z]/g,"")})))),d.default.createElement("div",{className:h.default.footer},e?t(e.toUpperCase()):o))))}}]),r}(d.Component);a.default=g},3254:function(e,t,a){e.exports={wrapper:"_2mbWHDU8BXHZcz5hAFRFT9",service:"cDzX6CWqX8JTPvK7XG_V-",selected:"_17O1b_bi1TWkvP4qUDXe-l",footer:"_1snnFCQH5RtnJZWYAqZUcF",header:"_2SWMK_i9x7vbpLW_jXhnsr",icon:"_3ymyQLD4nmoQzxCPoBEAlA",text:"_3TjppLQqLTe5Q1mwo9qwg9",title:"_31AGol0Nr3rJCWoc_NeyPk",description:"_2rjNLpcCtfELHU6J_2NRp-"}},3255:function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(12)),l=n(a(13)),c=n(a(19)),u=n(a(20)),i=n(a(18)),s=r(a(0)),f=a(1041),d=n(a(3256));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var m=function(e){(0,c.default)(a,e);var t=p(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props.data,t=void 0===e?{}:e,a=(0,f.line)().curve(f.curveBasis).x((function(e){return e.x})).y((function(e){return e.y})),r=t.v+t.w;return s.default.createElement("g",{className:d.default.wrapper},s.default.createElement("defs",null,s.default.createElement("marker",{id:"triangle-".concat(r),viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse"},s.default.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"}))),s.default.createElement("path",{d:a(t.points),markerEnd:"url(#triangle-".concat(r,")")}))}}]),a}(s.Component);t.default=m},3256:function(e,t,a){e.exports={wrapper:"_3Q_ifBkTTIHEBmNsHEApJj"}},3257:function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,c,u=r(a(12)),i=r(a(13)),s=r(a(19)),f=r(a(20)),d=r(a(18)),p=n(a(0)),m=a(5),h=a(70),v=a(25),y=r(a(3258)),g=r(a(3260)),E=r(a(3263)),b=r(a(3266)),O=r(a(3268)),_=r(a(3270));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=v.Collapse.CollapseItem,C=(0,h.observer)((c=l=function(e){(0,s.default)(a,e);var t=S(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={activeKey:["Info"]},e.handleJump=function(t){e.fetchDetail(t.id)},e.handleCollapseChange=function(t){e.setState({activeKey:t})},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.fetchDetail(this.props.data.id)}},{key:"componentDidUpdate",value:function(e){e.data.id!==this.props.data.id&&this.fetchDetail(this.props.data.id)}},{key:"fetchDetail",value:function(e){var t=this.props,a=t.store,r=t.match.params,n=r.cluster,o=r.namespace;e&&a.fetchDetail({cluster:n,namespace:o,name:e})}},{key:"render",value:function(){var e=this.props.onClose,t=(0,m.toJS)(this.props.store.detail).node,a=void 0===t?{}:t,r=this.props.match;return p.default.createElement("div",{className:_.default.wrapper},p.default.createElement("div",{className:_.default.header},p.default.createElement("div",{className:_.default.icon},p.default.createElement(v.Icon,{name:"appcenter",size:40})),p.default.createElement("div",{className:_.default.title},a.label),p.default.createElement(v.Button,{className:_.default.close,icon:"close",iconType:"light",type:"control",onClick:e,"data-test":"modal-close"})),p.default.createElement("div",{className:_.default.content},p.default.createElement(v.Collapse,{activeKey:this.state.activeKey,onChange:this.handleCollapseChange,accordion:!0},p.default.createElement(R,{label:"info",key:"info"},p.default.createElement(y.default,{detail:a})),p.default.createElement(R,{label:"Traffic",key:"traffic"},p.default.createElement(g.default,{detail:a,jumpTo:this.handleJump})),p.default.createElement(R,{label:"Pods",key:"pods"},p.default.createElement(E.default,{detail:a})),p.default.createElement(R,{label:"Containers",key:"containers"},p.default.createElement(b.default,{detail:a,match:r})),p.default.createElement(R,{label:"Kubernetes labels",key:"labels"},p.default.createElement(O.default,{detail:a})))))}}]),a}(p.Component),l.defaultProps={data:{}},o=c))||o;t.default=C},3258:function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(12)),l=n(a(13)),c=n(a(19)),u=n(a(20)),i=n(a(18)),s=r(a(0)),f=n(a(16)),d=n(a(32)),p=a(37),m=n(a(3259));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var v=function(e){(0,c.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"getValue",value:function(e){return"datetime"===e.type?(0,p.getLocalTime)(e.value).format("YYYY-MM-DD HH:mm:ss"):e.value}},{key:"render",value:function(){var e=this,t=(0,f.default)(this.props.detail,"metadata",[]);return(0,d.default)(t)?null:(t.forEach((function(e){"Created"===e.label&&(e.value=(0,p.getLocalTime)(e.value).format("YYYY-MM-DD HH:mm:ss")),"pod"===e.id&&(e.label=e.label.replace(/#/g,"").trim())})),s.default.createElement("div",{className:m.default.info},t.map((function(t){return s.default.createElement("dl",{key:t.id},s.default.createElement("dd",null,t.label,":"),s.default.createElement("dd",null,e.getValue(t)))}))))}}]),a}(s.Component);t.default=v},3259:function(e,t,a){e.exports={info:"_1VN50mOqkK2M8SD1iavjaj"}},3260:function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(21)),l=n(a(109)),c=n(a(12)),u=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(16)),m=n(a(32)),h=n(a(3261));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,i.default)(a,e);var t=g(a);function a(){var e;(0,c.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).format=function(e){return"number"!==e.dataType&&"count"!==e.id&&"port"!==e.id||(e.value=Number(e.value)),e},e}return(0,u.default)(a,[{key:"getColumns",value:function(e){var t=this.props.jumpTo;return[{id:"label",label:e.label,defaultSort:!1,render:function(e,a){return d.default.createElement("a",{onClick:function(){return t(a)}},e)}}].concat((0,l.default)(e.columns))}},{key:"getData",value:function(e){var t=this;return e.connections.map((function(e){return y({id:e.nodeId,label:{value:e.label}},e.metadata.reduce((function(e,a){return y(y({},e),{},(0,o.default)({},a.id,t.format(a)))}),{}))}))}},{key:"render",value:function(){var e=this,t=(0,p.default)(this.props.detail,"connections",[]);return(0,m.default)(t)?null:t.map((function(t){return d.default.createElement(h.default,{key:t.id,columns:e.getColumns(t),data:e.getData(t)})}))}}]),a}(d.Component);t.default=E},3261:function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(12)),l=n(a(13)),c=n(a(19)),u=n(a(20)),i=n(a(18)),s=n(a(294)),f=n(a(32)),d=r(a(0)),p=a(25),m=a(725),h=n(a(3262));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var y=function(e){(0,c.default)(a,e);var t=v(a);function a(e){var r;(0,o.default)(this,a),(r=t.call(this,e)).handleTitleClick=function(e){var t=e.currentTarget.dataset.id;r.setState((function(e){var a=e.sortKey,r=e.order;return{sortKey:t,order:a!==t?"asc":"asc"===r?"desc":"asc"}}))};var n=r.props.columns.find((function(e){return e.defaultSort}));return r.state={sortKey:n?n.id:"",order:"asc"},r}return(0,l.default)(a,[{key:"componentDidUpdate",value:function(e,t){if(!t.sortKey&&e.columns!==this.props.columns){var a=this.props.columns.find((function(e){return e.defaultSort}));a&&this.setState({sortKey:a.id,order:"asc"})}}},{key:"getValue",value:function(e){return(0,f.default)(e)?"":"percent"===e.format?"".concat(e.value,"%"):"filesize"===e.format?"".concat((0,m.getSuitableValue)(e.value,"disk")):e.value}},{key:"render",value:function(){var e=this,t=this.props,a=t.columns,r=t.data,n=this.state,o=n.sortKey,l=n.order,c=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!t)return e;var r=(0,s.default)(e,"".concat(t,".value"));return"asc"===a&&(r=r.reverse()),r}(r,o,l);return d.default.createElement("table",{className:h.default.table},d.default.createElement("thead",null,d.default.createElement("tr",null,a.map((function(t){return d.default.createElement("th",{key:t.id,title:t.label,"data-id":t.id,onClick:e.handleTitleClick},"number"===t.dataType&&t.label.startsWith("#")?"#":t.label,o===t.id&&d.default.createElement(p.Icon,{name:"asc"===l?"caret-down":"caret-up"}))})))),d.default.createElement("tbody",null,c.map((function(t,r){return d.default.createElement("tr",{key:"".concat(t.id,"-").concat(r)},a.map((function(a){var r=e.getValue(t[a.id]);return d.default.createElement("td",{key:a.id,title:r},a.render?a.render(r,t):r)})))}))))}}]),a}(d.Component);t.default=y},3262:function(e,t,a){e.exports={table:"_3_MT8fZBjSbHX5gZjAySbf"}},3263:function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(21)),l=n(a(109)),c=n(a(12)),u=n(a(13)),i=n(a(19)),s=n(a(20)),f=n(a(18)),d=r(a(0)),p=n(a(16)),m=n(a(32)),h=n(a(3264));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,i.default)(a,e);var t=g(a);function a(){var e;(0,c.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).format=function(e){return"number"!==e.dataType&&"count"!==e.id&&"port"!==e.id||(e.value=Number(e.value)),e},e}return(0,u.default)(a,[{key:"getColumns",value:function(e){return[{id:"label",label:e.label,defaultSort:!1,render:function(e){return d.default.createElement("strong",null,e)}}].concat((0,l.default)(e.columns))}},{key:"getData",value:function(e){var t=this;return e.nodes.map((function(e){return y({id:e.id,label:{value:e.label}},[].concat((0,l.default)(e.metadata||[]),(0,l.default)(e.metrics||[])).reduce((function(e,a){return y(y({},e),{},(0,o.default)({},a.id,t.format(a)))}),{}))}))}},{key:"render",value:function(){var e=this,t=(0,p.default)(this.props.detail,"children",[]);return(0,m.default)(t)?null:t.filter((function(e){return"Pods"===e.label})).map((function(t){return d.default.createElement(h.default,{key:t.topologyId,data:e.getData(t)})}))}}]),a}(d.Component);t.default=E},3264:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),o=r(a(13)),l=r(a(19)),c=r(a(20)),u=r(a(18)),i=r(a(0)),s=r(a(652)),f=r(a(3265));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=function(e){(0,l.default)(a,e);var t=d(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"getDetails",value:function(e){return[{title:this.props.data.length,description:"Count",className:f.default.texts},{title:e.kubernetes_ip.value||"-",description:"IP",className:f.default.texts}]}},{key:"render",value:function(){var e=this,t=this.props.data;return i.default.createElement(s.default,null,t.map((function(t){return i.default.createElement(s.default.Item,{key:t.id,className:f.default.wrapper,titleClass:f.default.title,icon:"pod",status:t.kubernetes_state.value,title:t.label.value,description:t.kubernetes_state.value,details:e.getDetails(t)})})))}}]),a}(i.default.PureComponent);t.default=p},3265:function(e,t,a){e.exports={wrapper:"_3SzOUWHncKQV9RIjkdt7-i",title:"_25QmO4RglXBi95C7a6fl1M",texts:"_3kLVYFdpQWZpML2WX7CNie"}},3266:function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l=r(a(109)),c=r(a(12)),u=r(a(13)),i=r(a(19)),s=r(a(20)),f=r(a(18)),d=n(a(0)),p=r(a(16)),m=a(25),h=r(a(1443)),v=a(70),y=r(a(3267)),g=r(a(1452));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b={cpu_usage:"container_cpu_usage",memory_usage:"container_memory_usage_wo_cache"},O=(0,v.observer)(o=function(e){(0,i.default)(a,e);var t=E(a);function a(e){var r;return(0,c.default)(this,a),(r=t.call(this,e)).fetchData=function(){var e=r.state.containerName,t=r.props.match.params,a=t.cluster,n=t.namespace;r.monitorStore.fetchMetrics({cluster:a,namespace:n,container:e,podName:r.podName,metrics:Object.values(b)})},r.handleContainerChange=function(e){r.setState({containerName:e},(function(){r.fetchData()}))},r.state={podsId:"",containerName:""},r.monitorStore=new h.default,r}return(0,u.default)(a,[{key:"getOptions",value:function(e){if(e.length>0){var t=["POD"];e[0].nodes=e[0].nodes.filter((function(e){return-1===t.indexOf(e.label)}))}for(var a=e.length>0?(0,l.default)(e[0].nodes.map((function(e){return{label:e.label,value:e.label,icon:"docker"}}))):[],r=[],n={},o=0;o<a.length;o++)n[a[o].label]||(r.push(a[o]),n[a[o].label]=!0);return r}},{key:"render",value:function(){var e=this.monitorStore,t=e.isLoading,a=e.isRefreshing,r=this.state.containerName;return d.default.createElement("div",{className:y.default.container},d.default.createElement(m.Select,{className:y.default.containerSelect,options:this.getOptions(this.containers),onChange:this.handleContainerChange,value:r}),d.default.createElement("div",null,d.default.createElement(g.default,{type:"cpu",title:"CPU Usage(m)",metrics:this.cpuMetric,isLoading:t||a,showDay:172800}),d.default.createElement(g.default,{type:"memory",title:"Memory Usage(Mi)",metrics:this.memoryMetric,isLoading:t||a,showDay:172800})))}},{key:"podName",get:function(){var e=(0,p.default)(this.props.detail,"children",[]).filter((function(e){return"Pods"===e.label}));return e.length>0?e[0].nodes[0].label:""}},{key:"containers",get:function(){return(0,p.default)(this.props.detail,"children",[]).filter((function(e){return"Containers"===e.label}))}},{key:"cpuMetric",get:function(){var e=this.state.containerName,t=this.monitorStore.data;return""===e?[]:(0,p.default)(t,"".concat(b.cpu_usage,".data.result"))}},{key:"memoryMetric",get:function(){var e=this.state.containerName,t=this.monitorStore.data;return""===e?[]:(0,p.default)(t,"".concat(b.memory_usage,".data.result"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,p.default)(e.detail,"id","");return a!==t.podsId?{containerName:"",podsId:a}:null}}]),a}(d.Component))||o;t.default=O},3267:function(e,t,a){e.exports={container:"_1OCYhwQxIVBiwoZgjC9Vt2",containerSelect:"x2gN32eQq4Fk7DwDRYlMt"}},3268:function(e,t,a){"use strict";var r=a(72),n=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(12)),l=n(a(13)),c=n(a(19)),u=n(a(20)),i=n(a(18)),s=r(a(0)),f=n(a(16)),d=n(a(32)),p=n(a(1023)),m=n(a(3269));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var v=function(e){(0,c.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=(0,f.default)(this.props.detail,"tables",[]);return(0,d.default)(e)?null:e.map((function(e){return s.default.createElement("div",{key:e.id,className:m.default.info},e.rows.map((function(e){return s.default.createElement(p.default,{key:e.id,name:e.entries.label,value:e.entries.value})})))}))}}]),a}(s.Component);t.default=v},3269:function(e,t,a){e.exports={info:"_7d5WNeWa0X-J5GxQTmMvl"}},3270:function(e,t,a){e.exports={wrapper:"lu0R0_JuvYcj7r7Qy0otO",header:"_26TkzcTc5C6Em8vDEeBJEz",icon:"_1NAGSmlNiebgr8p6Cjjxsn",title:"_31yHnayK288K6G7r3t0WIm",close:"BBrUJQnPG4Qc4u1_NstsV",content:"_1SDKhZ-aItpEmZbrbTYtRJ"}},3271:function(e,t,a){e.exports={toolbar:"_2GsMGEQTK2HjeeJMHK207X",right:"_18ABRRL3yE8zHX7GNA-zgr",content:"_1SRN7Iw9zGbVNj2koryPUT",loading:"_3B7Ub5NbMtv9vH9XEk3Jyc",fullscreen:"_2ocL9fqKky1rPQumdGqZaN"}},3272:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(49)),u=n(r(136)),i=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=n(r(32)),y=r(25),g=n(r(727)),E=n(r(275)),b=n(r(723)),O=n(r(724)),_=n(r(728)),S=r(726),R=r(37),C=r(58),k=n(r(855)),T=n(r(767)),w=n(r(3273));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var D=(0,S.withProjectList)({store:new k.default,module:"ingresses",name:"ROUTE"})(o=function(e){(0,d.default)(r,e);var a=P(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).gatewayStore=new T.default,e.state={clusterGateway:"",projectGateway:""},e.getGateway=(0,i.default)(c.default.mark((function t(){var a,r,n,o,l,i,s;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,r=a.cluster,n=a.namespace,t.next=3,e.gatewayStore.getGatewayByProject({cluster:r,namespace:n});case 3:o=t.sent,l=(0,u.default)(o,2),i=l[0],s=l[1],e.setState({clusterGateway:i,projectGateway:s});case 8:case"end":return t.stop()}}),t)}))),e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return h.default.createElement(g.default,{icon:C.ICON_TYPES[n],iconSize:40,title:(0,R.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("GATEWAY_ADDRESS_TCAP"),dataIndex:"loadBalancerIngress",isHideable:!0,width:"22%",render:function(e){return e.join("; ")}},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"22%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("router.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e.showAddGateway=function(){var t=e.props,a=t.trigger,r=t.match;a("gateways.create",{name:"",namespace:r.params.namespace,cluster:r.params.cluster,store:e.gatewayStore,success:e.getGateway})},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.getGateway()}},{key:"renderCreateGateway",value:function(){return h.default.createElement(b.default,{className:"margin-t12 margin-b12"},h.default.createElement("div",{className:"flexbox"},h.default.createElement(y.Icon,{className:"margin-r12",name:"loadbalancer",size:40}),h.default.createElement(E.default,{className:w.default.text,title:t("GATEWAY_NOT_ENABLED"),description:t("ENABLE_GATEWAY_TIP")}),this.canSetGateway&&h.default.createElement(y.Button,{className:w.default.button,type:"control",onClick:this.showAddGateway},t("ENABLE_GATEWAY"))))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=this.state,n=r.clusterGateway,o=r.projectGateway;return h.default.createElement(S.ListPage,this.props,h.default.createElement(O.default,(0,l.default)({},t,{tips:this.tips})),(0,v.default)(n)&&(0,v.default)(o)&&this.renderCreateGateway(),h.default.createElement(_.default,(0,l.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"canSetGateway",get:function(){return globals.app.hasPermission({module:"project-settings",action:"manage",cluster:this.props.match.params.cluster,project:this.props.match.params.namespace})}},{key:"tips",get:function(){return[{title:t("PREREQUESTS_FOR_USE_ROUTE_Q"),description:t("PREREQUESTS_FOR_USE_ROUTE_A"),more:(0,R.getDocsUrl)("internet")},{title:t("ACCESS_TYPES_OF_ROUTE_Q"),description:t("ACCESS_TYPES_OF_ROUTE_A")}]}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name,n=this.props.match.params.namespace;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editRules",icon:"firewall",text:t("EDIT_ROUTING_RULES"),action:"edit",onClick:function(e){return a("router.rules.edit",{detail:e,namespace:n})}},{key:"editAnnotations",icon:"firewall",text:t("EDIT_ANNOTATIONS"),action:"edit",onClick:function(e){return a("router.annotations.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(h.default.Component))||o;a.default=D},3273:function(e,t,a){e.exports={text:"_2UwflePCO7DX0nbD3YecbW",button:"_3d_LjjEdrEtEXU2IB6YRTZ"}},3274:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(49)),u=n(r(50)),i=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(32)),v=r(726),y=n(r(728)),g=n(r(763)),E=r(37),b=r(289),O=r(58),_=r(25),S=r(276),R=n(r(962)),C=n(r(755)),k=n(r(727)),T=n(r(729)),w=n(r(724)),P=n(r(3275));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N=(0,v.withProjectList)({store:new g.default,module:"persistentvolumeclaims",authKey:"volumes",name:"PERSISTENT_VOLUME_CLAIM",rowKey:"uid"})(o=function(e){(0,f.default)(r,e);var a=D(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).pvStore=new R.default,e.getItemDesc=function(e){var t=(0,b.getVolumeStatus)(e);return(0,h.default)(t)?e.storageClassName||"-":m.default.createElement(C.default,{reason:t,data:e,type:"volume"})},e.renderAccessTitle=function(){var e=m.default.createElement("div",null,m.default.createElement("div",null,t("ACCESS_MODE_TCAP"),":"),m.default.createElement("div",null,"RWO (ReadWriteOnce): ",t("ACCESS_MODE_RWO")),m.default.createElement("div",null,"ROX (ReadOnlyMany): ",t("ACCESS_MODE_ROX")),m.default.createElement("div",null,"RWX (ReadWriteMany): ",t("ACCESS_MODE_RWX")));return m.default.createElement("div",{className:P.default.mode_title},t("ACCESS_MODE_TCAP"),m.default.createElement(_.Tooltip,{content:e},m.default.createElement(_.Icon,{name:"question",size:16,className:P.default.question})))},e.mapperAccessMode=function(e){var t=(0,E.map_accessModes)(e);return m.default.createElement("span",null,t.join(","))},e.pvYamlView=function(){var t=(0,u.default)(c.default.mark((function t(a){var r,n;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.spec.volumeName,n=e.props.match.params.cluster,t.next=4,e.pvStore.fetchDetail({cluster:n,name:r});case 4:return t.abrupt("return",e.props.trigger("resource.yaml.edit",{detail:e.pvStore.detail,yaml:e.pvStore.detail._originData,readOnly:!0}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("volume.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.props.store.getKsVersion(this.props.match.params)}},{key:"getStatus",value:function(){return O.VOLUME_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,a=this.props,r=a.getSortOrder,n=a.getFilteredValue,o=this.props.match.params.cluster,l={title:t("PERSISTENT_VOLUME"),dataIndex:"_originData",isHideable:!0,search:!1,width:"28.5%",render:function(a){return m.default.createElement("div",{id:"pvColumn",className:P.default.pv_content},m.default.createElement(S.Link,{to:"/clusters/".concat(o,"/pv/").concat(a.spec.volumeName)},a.spec.volumeName),a.spec.volumeName&&m.default.createElement(_.Tooltip,{content:t("VIEW_YAML")},m.default.createElement(_.Icon,{className:P.default.yaml,name:"log",size:20,onClick:function(){return e.pvYamlView(a)}})))}},c=[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),search:!0,sorter:!0,render:function(t,a){return m.default.createElement(k.default,{icon:"storage",iconSize:40,to:"".concat(e.props.match.url,"/").concat(t),desc:e.getItemDesc(a),title:(0,E.getDisplayName)(a)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,search:!0,filters:this.getStatus(),filteredValue:n("status"),width:"10.6%",render:function(e,a){var r=a.phase;return m.default.createElement(T.default,{type:r,className:P.default.status,name:t("VOLUME_STATUS_".concat(r.toUpperCase())),flicker:!0})}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,width:"12.3%",render:function(t){return e.mapperAccessMode(t)}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",isHideable:!0,width:"7.7%",render:function(e){return e?t("MOUNTED"):t("NOT_MOUNTED")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:140,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}];return this.props.store.ksVersion>=3.2&&c.splice(2,0,l),c}},{key:"render",value:function(){var e=this.props,t=e.query,a=e.match,r=e.bannerProps,n=e.tableProps;return m.default.createElement(v.ListPage,this.props,m.default.createElement(w.default,(0,l.default)({},r,{tips:this.tips})),m.default.createElement(y.default,(0,l.default)({},n,{itemActions:this.itemActions,namespace:t.namespace,columns:this.getColumns(),onCreate:this.showCreate,cluster:a.params.cluster})))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(m.default.Component))||o;a.default=N},3275:function(e,t,a){e.exports={capacity:"_243L3gRj5L4Y9ESqEZMwQ5",pv_content:"_3H1A5jhLvHEPU7G5_KY0o6",yaml:"_2OW8dgKGOIskdPsJxUWKrg",status:"_3XGLspL44wlb4JRFycBpB6"}},3276:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(32)),m=r(58),h=r(726),v=n(r(728)),y=n(r(854)),g=r(37),E=n(r(727)),b=n(r(729)),O=n(r(724)),_=r(25),S=n(r(3277));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,h.withProjectList)({store:new y.default,module:"volume-snapshots",name:"VOLUME_SNAPSHOT"})(o=function(e){(0,i.default)(r,e);var a=R(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"getStatus",value:function(){return m.VOLUME_SNAPSHOT_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,a=this.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sortOrder:a("name"),search:!0,sorter:!0,render:function(t,a){return d.default.createElement(E.default,{icon:"snapshot",iconSize:40,to:"".concat(e.props.match.url,"/").concat(t),title:t,desc:a.snapshotClassName})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,filters:this.getStatus(),search:!0,render:function(e,a){var r=a.errorMessage,n=a.backupStatus;return d.default.createElement("div",{className:S.default.status},d.default.createElement(b.default,{type:n,name:t("CREATE_STATUS_".concat(n.toUpperCase()))})," ",!(0,p.default)(r)&&d.default.createElement(_.Tooltip,{content:r},d.default.createElement(_.Icon,{name:"question"})))}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,render:function(e){return d.default.createElement("div",null,e)}},{title:t("CAPACITY"),dataIndex:"restoreSize",isHideable:!0,width:"20%",render:function(e){return e||"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,sorter:!0,sortOrder:a("createTime"),width:"20%",render:function(e){return e?(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return d.default.createElement(h.ListPage,(0,l.default)({},this.props,{noWatch:!0}),d.default.createElement(O.default,(0,l.default)({},t,{tabs:this.tabs})),d.default.createElement(v.default,(0,l.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.routing,n=e.name;return[{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:n,detail:e,success:r.query})}}]}}]),r}(d.default.Component))||o;a.default=C},3277:function(e,t,a){e.exports={taints:"_2vLaCVxzXLnnQ_T1ttX8Cg",overview:"_1Q_WW2VkvXhYbDUAhp48jH",namespaceFilter:"_2MbiUC9KKqCf8a9u_HI2bZ"}},3278:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=n(r(16)),v=n(r(747)),y=n(r(278)),g=n(r(811)),E=n(r(937)),b=r(635),O=n(r(724)),_=n(r(3279)),S=n(r(1454)),R=n(r(1453));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var w=(0,m.inject)("rootStore","projectStore")(o=(0,m.observer)(o=(0,b.trigger)(o=function(e){(0,i.default)(r,e);var a=T(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).roleStore=new v.default,e.memberStore=new y.default,e.quotaStore=new g.default,e.limitRangeStore=new E.default,e.state={showEdit:!1,showDelete:!1,showEditQuota:!1,showEditDefaultResource:!1},e.getData=function(){e.store.fetchDetail(e.params)},e.handleMoreMenuClick=function(t,a){var r=e.enabledItemActions.find((function(e){return e.key===a}));r&&r.onClick&&r.onClick()},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.canViewMembers&&this.memberStore.fetchList(this.params),this.canViewRoles&&this.roleStore.fetchList(this.params),this.quotaStore.fetch(this.params),this.limitRangeStore.fetchListByK8s(this.params)}},{key:"render",value:function(){var e=(0,p.toJS)(this.store.detail),a=this.roleStore.list.total,r=this.memberStore.list.total,n=(0,h.default)(this.quotaStore,'data.used["count/services"]',0),o=(0,p.toJS)(this.limitRangeStore.list.data)[0],l=(0,p.toJS)(this.quotaStore.data);return d.default.createElement("div",null,d.default.createElement(O.default,{icon:"cdn",title:t("BASIC_INFORMATION"),description:t("PROJECT_BASIC_INFO_DESC"),module:"project_base_info",tips:this.tips}),d.default.createElement(_.default,{detail:e,roleCount:a,memberCount:r,serviceCount:n,workspace:this.workspace,actions:this.enabledItemActions,onMenuClick:this.handleMoreMenuClick,showDetail:this.canViewMembers&&this.canViewRoles}),d.default.createElement(R.default,{detail:o}),d.default.createElement(S.default,{detail:l}))}},{key:"store",get:function(){return this.props.projectStore}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}},{key:"workspace",get:function(){return this.params.workspace}},{key:"tips",get:function(){return[{title:t("HOW_TO_USE_QUOTA_Q"),description:t.html("HOW_TO_USE_QUOTA_A")},{title:t("WHAT_ARE_DEFAULT_CONTAINER_QUOTAS_Q"),description:t("WHAT_ARE_DEFAULT_CONTAINER_QUOTAS_A")}]}},{key:"enabledActions",get:function(){return globals.app.getActions(k(k({module:"project-settings"},this.params),{},{project:this.params.namespace}))}},{key:"canViewRoles",get:function(){return globals.app.hasPermission(k(k({module:"roles",action:"view"},this.params),{},{project:this.params.namespace}))}},{key:"canViewMembers",get:function(){return globals.app.hasPermission(k(k({module:"members",action:"view"},this.params),{},{project:this.params.namespace}))}},{key:"itemActions",get:function(){var e=this,a=this.props.rootStore.routing,r=this.store.detail,n=this.limitRangeStore.list.data,o=[{key:"edit",icon:"pen",action:"edit",text:t("EDIT_INFORMATION"),onClick:function(){return e.trigger("resource.baseinfo.edit",{detail:r,success:e.getData})}},{key:"edit-default-resource",icon:"pen",action:"edit",text:t("EDIT_DEFAULT_CONTAINER_QUOTAS"),onClick:function(){return e.trigger("project.default.resource",k(k({},e.props.match.params),{},{store:e.limitRangeStore,detail:n[0],supportGpuSelect:!0,success:function(){return e.limitRangeStore.fetchListByK8s(e.params)}}))}},{key:"delete",icon:"trash",action:"delete",text:t("DELETE"),onClick:function(){return e.trigger("resource.delete",{detail:r,desc:t.html("DELETE_PROJECT_TIP",{resource:r.name}),success:function(){return a.push("/workspaces/".concat(e.params.workspace,"/projects"))}})}}];return globals.app.hasPermission({workspace:this.workspace,module:"projects",action:"manage"})&&o.splice(1,0,{key:"edit-quota",icon:"pen",action:"edit",text:t("EDIT_PROJECT_QUOTAS"),onClick:function(){return e.trigger("project.quota.edit",{detail:r,success:function(){return e.quotaStore.fetch(e.params)}})}}),o}},{key:"enabledItemActions",get:function(){var e=this;return this.itemActions.filter((function(t){return!t.action||e.enabledActions.includes(t.action)}))}}]),r}(d.default.Component))||o)||o)||o;a.default=w},3279:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(21)),l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(16)),p=n(r(32)),m=r(276),h=n(r(3)),v=r(25),y=r(37),g=n(r(723)),E=n(r(1026)),b=n(r(3280));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,u.default)(r,e);var a=O(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"renderMoreMenu",value:function(){var e=this.props,t=e.actions,a=e.onMenuClick;return f.default.createElement(v.Menu,{onClick:a},t.map((function(e){return f.default.createElement(v.Menu.MenuItem,{key:e.key},f.default.createElement(v.Icon,{name:e.icon,type:"light"})," ",e.text)})))}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.workspace,n=e.serviceCount,l=e.memberCount,c=e.roleCount,u=e.actions,i=e.showDetail;return f.default.createElement(g.default,{className:(0,h.default)(b.default.wrapper,(0,o.default)({},b.default.single,!i)),title:t("PROJECT_INFO")},f.default.createElement("div",{className:b.default.header},f.default.createElement(v.Icon,{name:"project",size:40}),f.default.createElement("div",{className:b.default.item},f.default.createElement("div",null,(0,y.getDisplayName)(a)),f.default.createElement("p",null,t("NAME"))),f.default.createElement("div",{className:b.default.item},f.default.createElement("div",null,f.default.createElement(m.Link,{to:"/workspaces/".concat(r)},r)),f.default.createElement("p",null,t("WORKSPACE"))),f.default.createElement("div",{className:b.default.item},f.default.createElement("div",null,(0,d.default)(a,"creator")||"-"),f.default.createElement("p",null,t("CREATOR"))),f.default.createElement("div",{className:b.default.item},f.default.createElement("div",null,(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")),f.default.createElement("p",null,t("CREATION_TIME"))),!(0,p.default)(u)&&f.default.createElement(E.default,{content:this.renderMoreMenu()})),i&&f.default.createElement("div",{className:b.default.content},f.default.createElement("div",{className:b.default.contentItem},f.default.createElement(v.Icon,{name:"appcenter",size:40}),f.default.createElement("div",{className:b.default.item},f.default.createElement("div",null,n),f.default.createElement("p",null,"1"===n?t("SERVICE"):t("SERVICE_PL")))),f.default.createElement("div",{className:b.default.contentItem},f.default.createElement(v.Icon,{name:"role",size:40}),f.default.createElement("div",{className:b.default.item},f.default.createElement("div",null,c),f.default.createElement("p",null,"1"===c?t("PROJECT_ROLE_SCAP"):t("PROJECT_ROLE_SCAP_PL")))),f.default.createElement("div",{className:b.default.contentItem},f.default.createElement(v.Icon,{name:"group",size:40}),f.default.createElement("div",{className:b.default.item},f.default.createElement("div",null,l),f.default.createElement("p",null,1===l?t("PROJECT_MEMBER_SCAP"):t("PROJECT_MEMBER_SCAP_PL"))))))}}]),r}(f.default.Component);a.default=_},3280:function(e,t,a){e.exports={wrapper:"y1eLrGpaohxMQDmsuRFMf",single:"_3rv-wCj02PzvuQG7qSSKZM",header:"_363Ff0hbZt6NBtRrxtkMAZ",item:"_2DA2psiwLtN9ceOhO9r16S",content:"nMtAhiQIHvZlW09dFBhY7",contentItem:"_2NiYmn1-SSZjJzHwbNSDOf",button:"_1mI2OrNuD9gi0be-QgMLGw"}},3281:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(727)),m=n(r(724)),h=r(726),v=n(r(728)),y=r(37),g=r(58),E=n(r(904));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,h.withProjectList)({store:new E.default,module:"configmaps",name:"CONFIGMAP"})(o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,a){return d.default.createElement(p.default,{icon:g.ICON_TYPES[n],iconSize:40,title:(0,y.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("FIELDS"),dataIndex:"data",isHideable:!0,width:"33%",render:function(e){return Object.keys(e).join(",")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("configmap.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return d.default.createElement(h.ListPage,this.props,d.default.createElement(m.default,(0,l.default)({},t,{tabs:this.tabs})),d.default.createElement(v.default,(0,l.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(e){return a("configmap.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(d.default.Component))||o;a.default=O},3282:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(71)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(276),h=n(r(727)),v=r(726),y=n(r(724)),g=n(r(728)),E=r(37),b=r(58),O=n(r(1139));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,v.withProjectList)({store:new O.default,module:"serviceaccounts",name:"SERVICE_ACCOUNT"})(o=function(e){(0,s.default)(r,e);var a=R(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,a){return p.default.createElement(h.default,{icon:b.ICON_TYPES[n],iconSize:40,title:(0,E.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("ROLE"),dataIndex:"role",isHideable:!0},{title:t("SECRET"),dataIndex:"secrets",isHideable:!0,render:function(t){return t.map((function(t){return p.default.createElement("div",null,p.default.createElement(m.Link,{to:"".concat(e.prefix,"/secrets/").concat(t.name)},t.name))}))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("serviceaccount.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return p.default.createElement(v.ListPage,this.props,p.default.createElement(y.default,t),p.default.createElement(g.default,(0,c.default)({},a,{columns:this.getColumns(),itemActions:this.itemActions,onCreate:this.showCreate,searchType:"name"})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return"".concat(a?"/".concat(a):"","/clusters/").concat(t,"/projects/").concat(r)}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){return r("serviceaccount.edit",S({detail:t},e.props.match.params))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",onClick:function(t){return r("serviceaccount.role.edit",S({detail:t},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),r}(p.default.Component))||o;a.default=C},3283:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(727)),m=n(r(724)),h=r(726),v=n(r(728)),y=r(37),g=r(58),E=n(r(773));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,h.withProjectList)({store:new E.default,module:"secrets",name:"SECRET"})(o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,a){return d.default.createElement(p.default,{icon:g.ICON_TYPES[n],iconSize:40,title:(0,y.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("TYPE"),dataIndex:"type",isHideable:!0,width:"24%",render:function(e){return g.SECRET_TYPES[e]?t(g.SECRET_TYPES[e]):e}},{title:t("SECRET_FIELD_COUNT"),dataIndex:"data",isHideable:!0,width:"20%",render:function(e){return Object.keys(e).length}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module;return e.props.trigger("secret.create",{module:r,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return d.default.createElement(h.ListPage,this.props,d.default.createElement(m.default,(0,l.default)({},t,{tabs:this.tabs})),d.default.createElement(v.default,(0,l.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,a=e.getData,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(e){return r("secret.edit",{detail:e,success:a})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),r}(d.default.Component))||o;a.default=O},3284:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(71)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(5),h=n(r(727)),v=n(r(724)),y=r(726),g=n(r(728)),E=r(37),b=r(58),O=n(r(747));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,y.withProjectList)({store:new O.default,module:"roles",name:"PROJECT_ROLE"})(o=function(e){(0,s.default)(r,e);var a=R(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!globals.config.presetRoles.includes(e.name)},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,a){return p.default.createElement(h.default,{icon:b.ICON_TYPES[n],title:t,desc:a.aliasName,to:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("DESCRIPTION"),key:"description",dataIndex:"description",isHideable:!0,width:"40%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.getData,n=t.store;return e.props.trigger("role.create",{namespace:a.params.namespace,cluster:a.params.cluster,roleTemplates:(0,m.toJS)(n.roleTemplates.data),success:r})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.props.store.fetchRoleTemplates(this.props.match.params)}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return p.default.createElement(y.ListPage,(0,c.default)({},this.props,{noWatch:!0}),p.default.createElement(v.default,(0,c.default)({},a,{tabs:this.tabs,description:t("PROJECT_ROLE_DESC")})),p.default.createElement(g.default,(0,c.default)({},r,{emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.routing,n=a.trigger,o=a.store,l=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e,success:r.query})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:this.showAction,onClick:function(e){return n("role.edit",{detail:e,roleTemplates:(0,m.toJS)(o.roleTemplates.data),success:r.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return n("role.delete",{detail:t,type:l,cluster:e.props.match.params.cluster,namespace:e.props.match.params.namespace,success:r.query})}}]}},{key:"tableActions",get:function(){return S(S({},this.props.tableProps.tableActions),{},{onCreate:this.showCreate,selectActions:[]})}},{key:"emptyProps",get:function(){return{desc:t("PROJECT_ROLE_EMPTY_DESC")}}}]),r}(p.default.Component))||o;a.default=C},3285:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(21)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(16)),h=r(5),v=n(r(727)),y=n(r(729)),g=n(r(724)),E=r(726),b=n(r(728)),O=r(37),_=n(r(278)),S=n(r(747));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,E.withProjectList)({store:new _.default,module:"users",authKey:"members",name:"PROJECT_MEMBER",rowKey:"username"})(o=function(e){(0,s.default)(r,e);var a=k(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).roleStore=new S.default,e.getColumns=function(){return[{title:t("NAME"),dataIndex:"username",sorter:!0,render:function(e,t){return p.default.createElement(v.default,{avatar:t.avatar_url||"/assets/default-user.svg",title:e,desc:t.email||"-",noLink:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"19%",render:function(e){return p.default.createElement(y.default,{type:e,name:t("USER_".concat(e.toUpperCase()))})}},{title:t("ROLE"),dataIndex:"role",isHideable:!0,width:"19%"},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",isHideable:!0,width:150,render:function(e){return p.default.createElement("p",null,e?(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET"))}}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.canViewRoles&&this.roleStore.fetchList(C(C({},this.props.match.params),{},{limit:-1}))}},{key:"showAction",value:function(e){return globals.user.username!==e.name}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return p.default.createElement(E.ListPage,(0,l.default)({},this.props,{noWatch:!0}),p.default.createElement(g.default,(0,l.default)({},a,{tabs:this.tabs,description:t("PROJECT_MEMBER_DESC")})),p.default.createElement(b.default,(0,l.default)({},r,{searchType:"name",tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns()})))}},{key:"canViewRoles",get:function(){return globals.app.hasPermission(C(C({},this.props.match.params),{},{project:this.props.match.params.namespace,module:"roles",action:"view"}))}},{key:"tips",get:function(){return[{title:t("HOW_TO_INVITE_MEMBER_Q"),description:t("HOW_TO_INVITE_MEMBER_A")}]}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.getData,n=a.trigger;return[{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",show:this.showAction,onClick:function(t){return n("member.edit",C(C({detail:t},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),role:t.role,success:r}))}},{key:"delete",icon:"trash",text:t("REMOVE"),action:"delete",show:this.showAction,onClick:function(t){return n("member.remove",C({detail:t,success:r},e.props.match.params))}}]}},{key:"tableActions",get:function(){var e=this,a=this.props,r=a.routing,n=a.getData,o=a.trigger;return C(C({},a.tableProps.tableActions),{},{actions:[{key:"invite",type:"control",text:t("INVITE"),action:"create",onClick:function(){return o("member.invite",C(C({},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),roleModule:e.roleStore.module,workspace:(0,m.default)(e.props,"projectStore.detail.workspace"),title:t("INVITE_MEMBER"),desc:t("INVITE_MEMBER_DESC"),searchPlaceholder:t("SEARCH_BY_NAME"),success:r.query}))}}],selectActions:[{key:"delete",type:"danger",text:t("REMOVE"),action:"delete",onClick:function(){return o("member.remove.batch",C({success:n},e.props.match.params))}}],getCheckboxProps:function(t){return{disabled:!e.showAction(t),name:t.name}},emptyProps:{desc:t("PROJECT_MEMBER_EMPTY_DESC")}})}}]),r}(p.default.Component))||o;a.default=T},3286:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(70),m=n(r(32)),h=n(r(724)),v=n(r(3287));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=(0,p.inject)("rootStore","projectStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=E(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement(h.default,{icon:"log",title:t("LOG_COLLECTION"),description:t("DISK_LOG_COLLECTION_DESC"),tips:this.tips}),globals.app.hasClusterModule(this.cluster,"logging")&&!this.disabledLoggingSideCar&&d.default.createElement(v.default,{store:this.store,actions:this.enableActions}))}},{key:"store",get:function(){return this.props.projectStore}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"enableActions",get:function(){return globals.app.getActions(g(g({module:"project-settings"},this.props.match.params),{},{project:this.namespace}))}},{key:"disabledLoggingSideCar",get:function(){return!(0,m.default)(globals.config.disabledLoggingSidecarNamespace)&&globals.config.disabledLoggingSidecarNamespace.includes(this.namespace)}},{key:"tips",get:function(){return[{title:t("COLLECT_LOGS_ON_VOLUMES_Q"),description:t("COLLECT_LOGS_ON_VOLUMES_A")}]}}]),r}(d.default.Component))||o)||o;a.default=b},3287:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(3)),p=n(r(16)),m=r(70),h=r(25),v=n(r(808)),y=n(r(723)),g=n(r(274)),E=n(r(3288));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=(0,m.observer)(o=function(e){(0,u.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={showCloseConfirm:!1},e.handleSwitch=function(){var t=e.props.store.detail;return"enabled"===(0,p.default)(t,'labels["logging.kubesphere.io/logsidecar-injection"]')?e.setState({showCloseConfirm:!0}):e.handleToggle()},e.handleToggle=function(){var t=e.props.store.detail,a="enabled"===(0,p.default)(t,'labels["logging.kubesphere.io/logsidecar-injection"]');e.props.store.patch(t,{metadata:{labels:{"logging.kubesphere.io/logsidecar-injection":a?"disabled":"enabled"}}}).then((function(){e.hideCloseConfirm(),e.props.store.fetchDetail({namespace:t.name,cluster:t.cluster})}))},e.hideCloseConfirm=function(){e.setState({showCloseConfirm:!1})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.state.showCloseConfirm,a=this.props.store.detail,r="enabled"===(0,p.default)(a,'labels["logging.kubesphere.io/logsidecar-injection"]');return f.default.createElement(f.default.Fragment,null,f.default.createElement(y.default,{title:t("COLLECT_LOGS_ON_VOLUMES")},f.default.createElement("div",{className:E.default.header},f.default.createElement(h.Icon,{name:"log",size:40}),f.default.createElement("div",{className:E.default.item},f.default.createElement("div",null,r?t("ENABLED"):t("DISABLED")),f.default.createElement("p",null,t("LOG_COLLECTION_ENABLED_DESC"))),this.canEdit&&f.default.createElement("div",{className:(0,d.default)(E.default.item,"text-right")},f.default.createElement(v.default,{type:"control",text:r?t("ENABLED"):t("DISABLED"),onChange:this.handleSwitch,checked:r})))),this.canEdit&&f.default.createElement(g.default,{visible:e,onOk:this.handleToggle,onCancel:this.hideCloseConfirm,width:520,hideHeader:!0},f.default.createElement("div",{className:E.default.modalHeader},f.default.createElement(h.Icon,{name:"question",size:40,color:{primary:"#fff",secondary:"#329dce"}}),f.default.createElement("div",{className:E.default.title},f.default.createElement("div",null,t("DISABLE_LOG_COLLECTION")))),f.default.createElement("div",null,t("DISABLE_LOG_COLLECTION_TIP"))))}},{key:"canEdit",get:function(){return this.props.actions.includes("manage")}}]),r}(f.default.Component))||o;a.default=O},3288:function(e,t,a){e.exports={header:"_36wPCvwx5H9-Cd8YZx_Use",item:"_1MsqwSMR161g7QxBAzfume",modalHeader:"_1kxSvzFA81yixs5Vc17WLk",title:"_38himUh0C_ehcUxRxRJzL-"}},3289:function(e,a,r){"use strict";var n=r(6),o=r(72);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,c=n(r(71)),u=n(r(21)),i=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(275)),v=n(r(724)),y=o(r(726)),g=n(r(728)),E=r(37),b=n(r(3290)),O=n(r(3291));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,y.default)({store:new b.default,module:"dashboards",authKey:"custom-monitoring",name:"CUSTOM_MONITORING_DASHBOARD"})(l=function(e){(0,f.default)(r,e);var a=R(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).showCreate=function(){e.props.trigger("custom.monitoring.create",S(S({},e.props.match.params),{},{module:"dashboards"}))},e.showEdit=function(t){e.props.trigger("custom.monitoring.edit",S(S({},e.props.match.params),{},{readOnly:!e.props.tableProps.enabledActions.includes("edit"),detail:t}))},e}return(0,s.default)(r,[{key:"getColumns",value:function(){var e=this;return[{title:t("NAME"),dataIndex:"title",render:function(t,a){return m.default.createElement(h.default,{title:m.default.createElement("div",{className:O.default.title,onClick:function(){return e.showEdit(a)}},(0,E.getDisplayName)(a)),description:a.description||"-"})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return m.default.createElement("div",null,m.default.createElement(y.ListPage,this.props,m.default.createElement(v.default,(0,c.default)({},t,{tabs:this.tabs})),m.default.createElement(g.default,(0,c.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"}))))}},{key:"itemActions",get:function(){var e=this.props,a=e.name,r=e.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:a,detail:e})}}]}}]),r}(m.default.Component))||l;a.default=C},3290:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(a(12)),l=r(a(13)),c=r(a(19)),u=r(a(20)),i=r(a(18)),s=r(a(74)),f=a(5);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var p=(n=function(e){(0,c.default)(a,e);var t=d(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).module="dashboards",e}return(0,l.default)(a,[{key:"createGrafana",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.submitting(request.post("/kapis/monitoring.kubesphere.io/v1alpha3/".concat(this.getPath(t),"/dashboards/").concat(e.grafanaDashboardName,"/template"),e))}}]),a}(r(a(277)).default),(0,s.default)(n.prototype,"createGrafana",[f.action],Object.getOwnPropertyDescriptor(n.prototype,"createGrafana"),n.prototype),n);t.default=p},3291:function(e,t,a){e.exports={title:"AB68PnUYdCxRDBPIEIYpP"}},3292:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(70),m=n(r(16)),h=n(r(73)),v=r(25),y=n(r(723)),g=n(r(724)),E=n(r(751)),b=r(58),O=n(r(3293)),_=n(r(3295)),S=n(r(3297));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,p.inject)("projectStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=k(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).name="NETWORK_ISOLATION",n.module="namespacenetworkpolicies",n.tips=[{title:t("NETWORK_ISOLATION_Q"),description:t.html("NETWORK_POLICY_A")},{title:t("NETWORK_ISOLATION_Q1"),description:t.html("NETWORK_POLICY_A1")}],n.toggleNetworkIsolate=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};(0,h.default)(t,'metadata.annotations["kubesphere.io/network-isolate"]',e?"enabled":""),n.projectStore.patch({name:n.namespace,cluster:n.cluster},t).then((function(){n.projectStore.fetchDetail(n.params)}))},n.handleEditNetworkIsolate=function(e){n.toggleNetworkIsolate(e)},n.projectStore=n.props.projectStore,n}return(0,u.default)(r,[{key:"render",value:function(){var e=this.module,a=this.name,r=this.tips,n=this.namespace,o=this.cluster,l=this.workspace,c=this.projectStore.isSubmitting,u="enabled"===(0,m.default)(this.projectStore,'detail.annotations["kubesphere.io/network-isolate"]'),i=this.enabledActions.includes("edit");return d.default.createElement("div",null,d.default.createElement(g.default,{module:e,className:"margin-b12",title:t(a),tips:r,description:t("NETWORK_ISOLATION_DESC")}),d.default.createElement("div",{className:S.default.subtitle},t(a)),u?d.default.createElement(y.default,{className:S.default.wrapper},d.default.createElement(_.default,{module:e,networkIsolate:u,onEdit:this.handleEditNetworkIsolate,canEdit:i}),d.default.createElement(O.default,{module:e,namespace:n,cluster:o,workspace:l,canEdit:i})):d.default.createElement(E.default,{icon:b.ICON_TYPES[e],title:t("NETWORK_POLICY_EMP_TITLE"),desc:t("NETWORK_POLICY_EMP_DESC"),className:S.default.eplist,actions:i&&d.default.createElement(v.Button,{type:"control",loading:c,onClick:this.toggleNetworkIsolate},t("ENABLE"))}))}},{key:"params",get:function(){return(0,m.default)(this.props.match,"params",{})}},{key:"namespace",get:function(){return(0,m.default)(this.params,"namespace")}},{key:"cluster",get:function(){return(0,m.default)(this.params,"cluster")}},{key:"workspace",get:function(){return(0,m.default)(this.projectStore,"detail.workspace","")}},{key:"enabledActions",get:function(){return globals.app.getActions(C(C({module:"project-settings"},this.params),{},{project:this.params.namespace}))}}]),r}(d.default.Component))||o)||o;a.default=T},3293:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(70),m=r(5),h=n(r(16)),v=n(r(32)),y=n(r(3)),g=r(25),E=r(635),b=n(r(748)),O=n(r(1141)),_=n(r(3294));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,p.inject)("rootStore")(o=(0,p.inject)("projectStore")(o=(0,E.trigger)(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=C(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchPolicies=function(){var e=t.props,a=e.cluster,r=e.namespace,n=e.workspace;t.store.fetchListByK8s({cluster:a,namespace:r,workspace:n,limit:-1})},t.addAllowList=function(){t.trigger("network.policies.add",R(R({},t.props),{},{success:t.fetchPolicies}))},t.addIpBlock=function(){t.trigger("network.policies.addIpBlock",R(R({},t.props),{},{success:t.fetchPolicies}))},t.handleDelete=function(e){t.trigger("network.policies.delete",R(R({},t.props),{},{ruleName:e,resource:e,type:"ALLOWLIST_ENTRY",success:t.fetchPolicies}))},t.getDiscription=function(e,a){var r="",n=(0,h.default)(e?t.projectStore:t.serviceStore,"list.data");if(n){var o=n.find((function(e){return e.name===a}));o&&(r=(0,h.default)(o,"description"))}return r},t.renderRules=function(e,a){return d.default.createElement(d.default.Fragment,null,e.map((function(e){return d.default.createElement("div",{key:(0,h.default)(e,"metadata.name"),className:_.default.row},d.default.createElement("div",{className:_.default.prow},(0,h.default)(e,"spec.".concat(a,"[0].").concat("egress"===a?"to":"from"),[]).map((function(a,r,n){var o=!!(0,h.default)(a,"namespace.name"),l=o?"project":"appcenter",c=o?(0,h.default)(a,"namespace.name"):(0,h.default)(a,"service.name"),u=t.getDiscription(o,c),i="";if(!o&&r+1===n.length){var s=(0,h.default)(a,"service.namespace"),f=t.getDiscription(!0,s);i=d.default.createElement("span",{className:_.default.pcell},d.default.createElement(g.Icon,{name:"project"}),d.default.createElement("b",null,s,d.default.createElement("span",null,"(",(0,h.default)(e,"metadata.name"),")")),d.default.createElement("label",null,!(0,v.default)(f)&&"(".concat(f,")")))}return d.default.createElement("span",{className:_.default.cell,key:c},d.default.createElement(g.Icon,{name:l}),d.default.createElement("b",null,c," (",d.default.createElement("span",null,(0,h.default)(e,"metadata.name")),")"),d.default.createElement("label",null,!(0,v.default)(u)&&"(".concat(u,")")),i)}))),t.props.canEdit&&d.default.createElement(g.Icon,{name:"trash",changeable:!0,onClick:function(){t.handleDelete((0,h.default)(e,"metadata.name"))}}))})))},t.renderIpRules=function(e,a){return d.default.createElement(d.default.Fragment,null,e.map((function(e){return d.default.createElement("div",{key:(0,h.default)(e,"metadata.name"),className:_.default.row},d.default.createElement("div",{className:_.default.prow},d.default.createElement("span",{className:_.default.cell},d.default.createElement(g.Icon,{name:"eip"}),d.default.createElement("b",null,(0,h.default)(e,"spec.".concat(a,"[0].").concat("egress"===a?"to":"from","[0].ipBlock.cidr")))),(0,h.default)(e,"spec.".concat(a,"[0].ports"),[]).map((function(e,t){var a="".concat(e.port,"/").concat(e.protocol);return d.default.createElement("label",{key:a},0===t&&d.default.createElement(g.Icon,{name:"port"}),d.default.createElement("span",{className:_.default.port},d.default.createElement("b",null,a)))}))),t.props.canEdit&&d.default.createElement(g.Icon,{name:"trash",changeable:!0,onClick:function(){t.handleDelete((0,h.default)(e,"metadata.name"))}}))})))},t.store=new O.default(e.module),t.projectStore=e.projectStore,t.serviceStore=new b.default,t.state={curTab:"inner"},t}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.fetchPolicies();var e=this.props,t=e.namespace,a={cluster:e.cluster,limit:-1};this.projectStore.fetchList(R({},a)),this.serviceStore.fetchList(R({namespace:t},a))}},{key:"renderTabs",value:function(){var e=this,a=this.state.curTab;return d.default.createElement("div",{className:_.default.tabs},d.default.createElement("div",{className:(0,y.default)(_.default.tab,"inner"===a&&_.default.on),onClick:function(){return e.setState({curTab:"inner"})}},d.default.createElement(g.Icon,{name:"eip-pool",size:40}),d.default.createElement("div",{className:_.default.disc},d.default.createElement("div",{className:_.default.dictitle},t("INTERNAL_ALLOWLIST")),d.default.createElement("div",null,t("INTERNAL_ALLOWLIST_DESC")))),d.default.createElement("div",{className:(0,y.default)(_.default.tab,"outer"===a&&_.default.on),onClick:function(){return e.setState({curTab:"outer"})}},d.default.createElement(g.Icon,{name:"eip",size:40}),d.default.createElement("div",{className:_.default.disc},d.default.createElement("div",{className:_.default.dictitle},t("EXTERNAL_ALLOWLIST")),d.default.createElement("div",null,t("EXTERNAL_ALLOWLIST_DESC")))))}},{key:"renderInner",value:function(){var e=this.props.canEdit,a=this.store.list,r=this.state.curTab,n=[],o=[],l=[],c=[];return a.data.forEach((function(e){var t=(0,h.default)((0,m.toJS)(e),"_originData");(0,v.default)((0,h.default)(t,"spec.egress[0].ports"))?(0,v.default)((0,h.default)(t,"spec.egress[0].to"))||((0,v.default)((0,h.default)(t,"spec.egress[0].to[0].ipBlock"))?n.push(t):l.push(t)):l.push(t),(0,v.default)((0,h.default)(t,"spec.ingress[0].ports"))?(0,v.default)((0,h.default)(t,"spec.ingress[0].from"))||((0,v.default)((0,h.default)(t,"spec.ingress[0].from[0].ipBlock"))?o.push(t):c.push(t)):c.push(t)})),d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:(0,y.default)({hide:"outer"===r})},d.default.createElement("div",{className:_.default.rulemenu},d.default.createElement("div",null,t("INTERNAL_ALLOWLIST_TIP")),e&&d.default.createElement(g.Button,{type:"control",onClick:this.addAllowList},t("ADD_ALLOWLIST_ENTRY"))),d.default.createElement("div",{className:_.default.rulebody},d.default.createElement("div",{className:(0,y.default)(_.default.rulegroup,{hide:0===n.length})},d.default.createElement("div",{className:_.default.subtitle},t("EGRESS")),d.default.createElement("div",{className:_.default.disp},t("INTERNAL_EGRESS_DESC")),this.renderRules(n,"egress")),d.default.createElement("div",{className:(0,y.default)(_.default.rulegroup,{hide:0===o.length})},d.default.createElement("div",{className:_.default.subtitle},t("INGRESS")),d.default.createElement("div",{className:_.default.disp},t("INTERNAL_INGRESS_DESC")),this.renderRules(o,"ingress")))),d.default.createElement("div",{className:(0,y.default)({hide:"inner"===r})},d.default.createElement("div",{className:_.default.rulemenu},d.default.createElement("div",null,t("EXTERNAL_ALLOWLIST_TIP")),e&&d.default.createElement(g.Button,{type:"control",onClick:this.addIpBlock},t("ADD_ALLOWLIST_ENTRY"))),d.default.createElement("div",{className:_.default.rulebody},d.default.createElement("div",{className:(0,y.default)(_.default.rulegroup,{hide:0===l.length})},d.default.createElement("div",{className:_.default.subtitle},t("EGRESS")),d.default.createElement("div",{className:_.default.disp},t("EXTERNAL_EGRESS_DESC")),this.renderIpRules(l,"egress")),d.default.createElement("div",{className:(0,y.default)(_.default.rulegroup,{hide:0===c.length})},d.default.createElement("div",{className:_.default.subtitle},t("INGRESS")),d.default.createElement("div",{className:_.default.disp},t("EXTERNAL_INGRESS_DESC")),this.renderIpRules(c,"ingress")))))}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},this.renderTabs(),this.renderInner())}}]),r}(d.default.Component))||o)||o)||o)||o;a.default=k},3294:function(e,t,a){e.exports={wrapper:"_1uaaKr3Qydwsg51ILBRYCg",tabs:"_3nJI9guJPMvk12Q7gjPZmU",tab:"_2O3IP_JlAV9AbTpuDHMXIl",on:"dtWNnffgqT6fXfJMluy0E",disc:"rNqC-zU5OV0lmTkB9WeqN",dictitle:"_26zXEdaVS1OkdX0T2prDH0",rulemenu:"_2hk_pGWlc9LZSlUNVZpB_L",rulebody:"_200wgR_dslfHnyTKUfp3CE",rulegroup:"_1aEBcghuz30TE0D3S8j9b1",subtitle:"_1o0TorXdL5BiqInf6gl9xV",disp:"_3gRCidjr27U-JF2kva4mez",row:"_2GRO4qEEEL8YVdvR1abyMa",prow:"_1ZcG7g_ZKJsG2z9VAyV3lg",cell:"_2L-swNbTQv9wN1kfqt6Onb",pcell:"_1y3YJPFi3g8WpOYzgcBbsx",port:"_3IK-Z28rsJJ9d3IbUC984X"}},3295:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(0)),f=r(25),d=n(r(3)),p=r(58),m=n(r(3296));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=h(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).toggle=function(){var e=t.state.opened;t.props.onEdit(!e),t.setState({opened:!e})},t.state={opened:e.networkIsolate},t}return(0,l.default)(r,[{key:"render",value:function(){var e=this.state.opened,a=this.props,r=a.module,n=a.canEdit;return s.default.createElement("div",{className:m.default.wrapper},s.default.createElement("div",{className:m.default.left},s.default.createElement(f.Icon,{name:p.ICON_TYPES[r],size:40,color:{primary:"#324558",secondary:"#f5a623"}}),s.default.createElement("div",{className:m.default.isolate},s.default.createElement("div",{className:m.default.isolatetitle},t("ENABLED")),s.default.createElement("div",null,t("PROJECT_NETWORK_ISOLATION")))),n&&s.default.createElement("div",{className:(0,d.default)(m.default.toggle,e?"":m.default.closed),onClick:this.toggle},s.default.createElement("span",null,e?t("ENABLED"):t("DISABLED")),s.default.createElement("label",{className:m.default.toggleop})))}}]),r}(s.default.Component);a.default=v},3296:function(e,t,a){e.exports={wrapper:"_2yyqmdLMQV7jExw4-99r2V",left:"_3NfpPZF4t2tLIAFo8aCkod",isolate:"_2Gn52m3ytjk9-uNyzg2pHS",isolatetitle:"_3A7x-YmULSD9DlRZAIcLO7",toggle:"_3oosIYPcKTPixa-JEZrH5P",toggleop:"_1Uk1oUlDQR3uU78YfEeLF7",closed:"_3_6jMXFc7csmAFGzKzRw30"}},3297:function(e,t,a){e.exports={wrapper:"ggsECpK2-iUDno_sJog6s",subtitle:"_2FnrF0AWM2BVASqvjWI14c",eplist:"_1_D3iOzFw4bLc5I38oh41Q"}},3298:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),o=r(a(1489)),l=r(a(3299)),c=r(a(1493)),u="/:workspace/clusters/:cluster/projects/:namespace/grayrelease",i=[{name:"cates",title:"RELEASE_MODE_PL",component:l.default},{name:"jobs",title:"RELEASE_JOBS",component:c.default}],s=[{path:u,component:o.default,routes:(0,n.getChildRoutes)(i,u)}];t.default=s},3299:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(70),p=r(25),m=n(r(766)),h=r(58),v=n(r(733)),y=n(r(822)),g=n(r(1165)),E=n(r(767)),b=n(r(3300)),O=n(r(3327));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=(0,d.inject)("rootStore")(o=(0,d.observer)(o=function(e){(0,u.default)(r,e);var a=_(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).showCreate=function(e){n.setState({showCreateModal:!0,selectType:e.currentTarget.dataset.type})},n.hideCreate=function(){n.setState({showCreateModal:!1,selectType:""})},n.handleCreate=function(e){var a=n.props.match.params,r=a.workspace,o=a.cluster,l=a.namespace;n.store.create(e,{cluster:o,namespace:l}).then((function(){n.hideCreate(),p.Notify.success({content:t("CREATE_SUCCESSFUL")}),n.routing.push("/".concat(r,"/clusters/").concat(o,"/projects/").concat(l,"/grayrelease/jobs")),y.default.delete("".concat(n.module,"_create_form"))}))},n.state={showCreateModal:!1,selectType:""},n.store=new g.default,n.gatewayStore=new E.default,n.module="strategies",n.namespace=n.props.match.params.namespace,n.cluster=n.props.match.params.cluster,n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.gatewayStore.getGateway(this.props.match.params)}},{key:"render",value:function(){var e=this,a=this.state,r=a.showCreateModal,n=a.selectType,o=h.GRAY_RELEASE_CATEGORIES.find((function(e){return e.type===n}))||{};return f.default.createElement("div",null,f.default.createElement("ul",{className:O.default.wrapper},h.GRAY_RELEASE_CATEGORIES.map((function(a){return f.default.createElement("li",{key:a.title},f.default.createElement("div",{className:O.default.content},f.default.createElement("div",{className:O.default.icon},f.default.createElement(p.Icon,{name:a.icon,size:24,type:"light"})),f.default.createElement("div",{className:O.default.text},f.default.createElement("div",{className:"h5"},t(a.title)),f.default.createElement("p",null,t.html(a.desc)))),f.default.createElement("div",{className:O.default.footer},e.canCreate&&f.default.createElement(p.Button,{type:"control","data-type":a.type,onClick:e.showCreate},t("CREATE"))))}))),f.default.createElement(m.default,{title:t("CREATE_".concat(o.title,"_JOB")),module:"grayreleases_".concat(o.type),formTemplate:this.formTemplate,cluster:this.cluster,namespace:this.namespace,store:this.store,visible:r,steps:this.steps,onCancel:this.hideCreate,onOk:this.handleCreate,closable:!0,noCodeEdit:!0}))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"formTemplate",get:function(){return{strategy:v.default[this.module]({namespace:this.namespace,type:this.state.selectType})}}},{key:"steps",get:function(){return b.default}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return globals.app.hasPermission({cluster:t,workspace:a,project:r,module:"grayscale-release",action:"create"})}}]),r}(f.default.Component))||o)||o;a.default=S},3300:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(3301)),o=r(a(3302)),l=r(a(1490)),c=r(a(1492)),u=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"SERVICE_SETTINGS",component:o.default,required:!0},{title:"NEW_VERSION_SETTINGS",component:l.default,required:!0},{title:"STRATEGY_SETTINGS",component:c.default,required:!0}];t.default=u},3301:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(16)),d=n(r(0)),p=r(70),m=r(58),h=r(25);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,p.observer)(o=function(e){(0,u.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,namespace:e.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return d.default.createElement(h.Form,{data:this.formTemplate,ref:e},d.default.createElement(h.Columns,null,d.default.createElement(h.Column,null,d.default.createElement(h.Form.Item,{label:t("NAME"),desc:t("LONG_NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:m.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("LONG_NAME_DESC")})},{validator:this.nameValidator}]},d.default.createElement(h.Input,{name:"metadata.name",maxLength:253}))),d.default.createElement(h.Column,null)))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"namespace",get:function(){return(0,f.default)(this.formTemplate,"metadata.namespace")}},{key:"strategyType",get:function(){return(0,f.default)(this.formTemplate,"spec.type")}}]),r}(d.default.Component))||o;a.default=y},3302:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(49)),u=n(r(50)),i=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(16)),h=n(r(32)),v=n(r(73)),y=n(r(738)),g=n(r(833)),E=n(r(0)),b=r(5),O=r(70),_=r(25),S=r(37),R=r(58),C=n(r(733)),k=n(r(865)),T=n(r(748)),w=n(r(3303)),P=n(r(3307));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var j=["http","http2","grpc"],I=(0,O.observer)(o=function(e){(0,f.default)(r,e);var a=A(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).valueRenderer=function(e){return E.default.createElement("p",{className:P.default.option},E.default.createElement("img",{src:e.icon||"/assets/default-app.svg",alt:""}),t("GRAY_APP_NAME",{name:e.name}),e.disabled&&E.default.createElement(_.Tooltip,{trigger:"click",content:t("NO_SERVICE_MESH_TIP")},E.default.createElement(_.Icon,{name:"question",className:"float-right"})))},n.optionRenderer=n.valueRenderer,n.updateAppInfo=function(e){(0,v.default)(n.formTemplate,"metadata.labels",e.selector),(0,v.default)(n.formTemplate,"spec.selector.matchLabels",e.selector),(0,v.default)(n.formTemplate,'metadata.annotations["app.kubernetes.io/icon"]',e.icon)},n.selectApp=function(){var e=(0,u.default)(c.default.mark((function e(t){var a;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.updateAppInfo(t),n.setState({isLoading:!0}),a={namespace:n.namespace,cluster:n.props.cluster,labelSelector:(0,S.joinSelector)(t.selector)},e.next=5,Promise.all([n.store.fetchList(a),n.serviceStore.fetchListByK8s(a),n.serviceStore.fetchWorkloads(a)]).then((function(){var e=(0,b.toJS)(n.serviceStore.list.data),t=(0,b.toJS)(n.serviceStore.workloads.data),a=(0,b.toJS)(n.store.list.data);(0,y.default)(n.formTemplate,"spec.hosts"),n.setState({components:e.map((function(e){e.workloads=[];var r=(0,m.default)(e,"labels.app");t.forEach((function(t){r===(0,m.default)(t,"labels.app")&&e.workloads.push(t)}));var n=(0,m.default)(e.workloads,"[0].type","");return e.workloadType=R.MODULE_KIND_MAP[n]||"",e.strategies=a.filter((function(t){return t.hosts.includes(e.name)}))||[],e})),isLoading:!1})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleAppChange=function(e){n.setState({selectApp:e},(function(){var t=(0,b.toJS)(n.appStore.list.data).find((function(t){return t.name===e}))||{};t.selector&&n.selectApp(t)}))},n.handleComponentSelect=function(e,t){var a=n.state.components.find((function(t){return t.name===e}))||{};if(!(0,h.default)(a.selector)){var r=(0,g.default)(a.workloads[0]),o=C.default[r.type]({namespace:n.namespace}),l=(0,m.default)(a,"ports[0].name",""),c=j.includes((l.split("-")[0]||"").toLowerCase())?"http":"tcp",u=r.labels.version;(0,v.default)(n.formTemplate,"metadata.labels.app",e),(0,v.default)(n.formTemplate,"spec.selector.matchLabels.app",e),(0,v.default)(n.formTemplate,"spec.template.spec",{hosts:[e]}),(0,v.default)(n.formTemplate,"spec.principal",u),(0,v.default)(n.formTemplate,"spec.protocol",c),(0,v.default)(n.formTemplate,'metadata.annotations["servicemesh.kubesphere.io/oldWorkloadName"]',r.name),(0,v.default)(n.formTemplate,'metadata.annotations["servicemesh.kubesphere.io/workloadType"]',r.type),(0,v.default)(n.formTemplate,'metadata.annotations["servicemesh.kubesphere.io/workloadReplicas"]',String(r.podNums)),n.props.formTemplate.workload={apiVersion:o.apiVersion,kind:o.kind,metadata:{name:"",namespace:r.namespace,labels:r.labels,annotations:r.annotations},spec:r.spec},(0,S.mergeLabels)(n.props.formTemplate.workload,{version:""})}t&&t(e)},n.handleIstioProxyChange=function(e){n.setState({istioProxyChecked:e})},n.state={istioProxyChecked:!0,selectApp:"",components:[],isLoading:!1},n.store=e.store,n.appStore=new k.default,n.serviceStore=new T.default,n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.appStore.fetchList({namespace:this.namespace,cluster:this.props.cluster,limit:-1}).then((function(){var t=(0,b.toJS)(e.appStore.list.data).find((function(e){return e.serviceMeshEnable}))||{};e.setState({selectApp:t.name}),t.selector&&e.selectApp(t)}))}},{key:"getApplications",value:function(){return(0,b.toJS)(this.appStore.list.data).map((function(e){return N(N({},e),{},{value:e.name,disabled:!e.serviceMeshEnable})}))}},{key:"renderForm",value:function(){var e=this.props.formRef,a=this.state,r=a.components,n=a.isLoading;return E.default.createElement(_.Form,{data:this.formTemplate,ref:e},E.default.createElement(_.Form.Item,{rules:[{required:!0,message:t("SELECT_GRAY_COMPONENT_TIP")}]},E.default.createElement(w.default,{name:"spec.hosts",data:r,loading:n,onSelect:this.handleComponentSelect})))}},{key:"render",value:function(){var e=this.state.selectApp;return E.default.createElement("div",null,E.default.createElement("div",{className:P.default.bar},E.default.createElement(_.Select,{value:e,onChange:this.handleAppChange,options:this.getApplications(),isLoading:this.appStore.list.isLoading,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,placeholder:" "})),E.default.createElement("div",{className:P.default.formWrapper},this.renderForm()))}},{key:"namespace",get:function(){return(0,m.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"strategyType",get:function(){return(0,m.default)(this.formTemplate,"spec.type")}}]),r}(E.default.Component))||o;a.default=I},3303:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),o=r(a(13)),l=r(a(19)),c=r(a(20)),u=r(a(18)),i=r(a(0)),s=r(a(1)),f=a(25),d=r(a(3304)),p=r(a(3306));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,l.default)(a,e);var t=m(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={loadingName:""},e.handleCardSelect=function(t,a){var r=e.props,n=r.onChange,o=r.onSelect;e.setState({loadingName:t.name}),o(a?t.name:"",(function(t){n(t),e.setState({loadingName:""})}))},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,r=t.value,n=t.loading,o=this.state.loadingName;return n?i.default.createElement("div",{className:"text-center margin-t12"},i.default.createElement(f.Loading,{spinning:!0})):i.default.createElement("div",{className:p.default.wrapper},a.map((function(t){return i.default.createElement(d.default,{key:t.name,component:t,value:t.name===r,loading:t.name===o,onSelect:e.handleCardSelect})})))}}]),a}(i.default.Component);t.default=h,h.propTypes={data:s.default.array,value:s.default.string,onChange:s.default.func,onSelect:s.default.func},h.defaultProps={data:[],value:"",onChange:function(){},onSelect:function(){}}},3304:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(16)),p=n(r(32)),m=r(25),h=n(r(3305));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props,a=t.value,r=t.component;(0,t.onSelect)(r,!a)},e}return(0,l.default)(r,[{key:"renderActions",value:function(){var e=this.props,a=e.value,r=e.component,n=e.loading;return r.workloads.length<=0?s.default.createElement("span",{className:h.default.right},t("NO_WORKLOAD_FOUND_TIP")):"Deployment"!==r.workloadType?s.default.createElement("span",{className:h.default.right},t("UNSUPPORTED_WORKLOAD_TYPE")):r.strategies.length>0?s.default.createElement("span",{className:h.default.right},t("UNFINISHED_GRAY_JOB")):s.default.createElement(m.Button,{className:h.default.right,type:a?"control":"default",loading:n,onClick:this.handleClick},a?t("DESELECT"):t("SELECT"))}},{key:"render",value:function(){var e=this.props.component,a=e.workloads.map((function(e){return(0,d.default)(e,"labels.version")})).filter((function(e){return!(0,p.default)(e)})),r="true"===(0,d.default)(e,'annotations["servicemesh.kubesphere.io/enabled"]');return s.default.createElement("div",{className:h.default.card},s.default.createElement("div",{className:h.default.icon},s.default.createElement(m.Icon,{name:"network-router",size:40}),r&&s.default.createElement("span",{className:h.default.istio},s.default.createElement(m.Icon,{name:"istio",size:16,color:{primary:"#329dce"}}))),s.default.createElement("div",{className:h.default.text},s.default.createElement("div",{className:"h6"},e.name),s.default.createElement("p",null,e.workloadType?t("TYPE_SERVICE_".concat(e.workloadType.toUpperCase())):"")),s.default.createElement("div",{className:h.default.version},s.default.createElement("strong",null,a.join(", ")||"-"),s.default.createElement("p",null,1===a.length?t("VERSION"):t("VERSIONS"))),this.renderActions())}}]),r}(s.default.PureComponent);a.default=y,y.propTypes={component:f.default.object,value:f.default.bool,loading:f.default.bool,onSelect:f.default.func},y.defaultProps={component:{},value:!1,loading:!1,onSelect:function(){}}},3305:function(e,t,a){e.exports={card:"_3vdiLN4Az6-6fCKu8ttzIa",text:"_2C5MPZP86Hmq9uLh1-prt5",version:"_3BdnFvaVFC2V8wsrWb3j1F",right:"_22_hdrLm_dtJeJueL5yCgt",icon:"NrHNPh-9ONr5JnVvXUTCp",istio:"QsKsUbWftNYVLE1oT6Mc"}},3306:function(e,t,a){e.exports={wrapper:"_3jlq6ji_fVJNJXEVJYPoTi"}},3307:function(e,t,a){e.exports={bar:"j7RcImezSmT-OprCulkMk",checkbox:"ZE5YWXYsULV5eiGXfcYP7",formWrapper:"_3ytQ7Vaf_iycMg_bFmBAUm",option:"_34g2-hBf74QtaHOUh6qYBM"}},3308:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),o=r(a(13)),l=r(a(939)),c=r(a(19)),u=r(a(20)),i=r(a(18)),s=r(a(0)),f=r(a(1228)),d=r(a(3309)),p=r(a(1491));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var h=function(e){(0,c.default)(a,e);var t=m(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"renderEmpty",value:function(){return null}},{key:"renderContainers",value:function(){var e=this,t=this.props,a=t.value,r=t.disabled;return s.default.createElement("ul",{className:p.default.list},a.map((function(t){return s.default.createElement(d.default,{container:t,key:t.name,onEdit:e.handleEdit,onDelete:e.handleDelete,disabled:r})})))}},{key:"renderInitContainers",value:function(){var e=this,t=this.props,a=t.specTemplate.initContainers,r=void 0===a?[]:a,n=t.disabled;return r.map((function(t){return s.default.createElement(d.default,{container:t,key:t.name,type:"init",onEdit:e.handleEdit,onDelete:e.handleDelete,disabled:n})}))}},{key:"renderAdd",value:function(){return this.props.disabled?null:(0,l.default)((0,i.default)(a.prototype),"renderAdd",this).call(this)}}]),a}(f.default);t.default=h},3309:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(21)),l=n(r(0)),c=n(r(1)),u=r(25),i=n(r(652)),s=n(r(1491));function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=function(e){var a=e.type,r=void 0===a?"worker":a,n=e.container,o=e.onEdit,c=e.onDelete,f=e.disabled,p=l.default.createElement("div",{className:s.default.inputs},l.default.createElement(u.Input,{defaultValue:n.image,onChange:function(e,t){n.image=t},disabled:f})),m="init"===r?l.default.createElement("span",null,n.name,l.default.createElement(u.Tag,{className:"margin-l8",type:"warning"},t("INIT_CONTAINER"))):n.name;return l.default.createElement(i.default.Item,{icon:"docker",title:m,className:s.default.card,description:t("GRAYSCALE_IMAGE",{image:n.image}),extras:p,onDelete:!f&&function(){return c(d({type:r},n))},onEdit:!f&&function(){return o(d({type:r},n))}})};p.propTypes={container:c.default.object};var m=p;a.default=m},3310:function(e,t,a){e.exports={narrow:"_3MyIBanS39Yy2xFvGvD2Ax",specify:"_2_94GzmKeNJkOU-YlzOdQX",containers:"_2WkVQ3Y2P9QTDsKKkqH3gR"}},3311:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(16)),f=n(r(73)),d=n(r(32)),p=n(r(833)),m=n(r(0)),h=r(25),v=n(r(3312)),y=n(r(3314)),g=n(r(3321));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var b=function(e){(0,c.default)(r,e);var a=E(r);function r(e){var t;(0,o.default)(this,r),(t=a.call(this,e)).initFormTemplate=function(e){var a=t.props.formTemplate,r=(0,s.default)(a,"strategy.spec.template.spec.hosts[0]"),n=(0,s.default)(a,"strategy.spec.principal"),o=(0,s.default)(a,"workload.metadata.labels.version"),l="traffic"===e?[{route:[{destination:{subset:n,host:r}},{destination:{subset:o,host:r}}]}]:[{route:[{destination:{subset:o,host:r},weight:100}]},{route:[{destination:{subset:n,host:r},weight:100}]}];if(t.oldHttpData&&(1===t.oldHttpData.length&&"traffic"===e||2===t.oldHttpData.length&&"content"===e))if("traffic"===e){var c=(0,s.default)(t.oldHttpData,"[0].route",[]),u=c.find((function(e){return(0,s.default)(e,"destination.subset")===n})),i=c.find((function(e){return(0,s.default)(e,"destination.subset")===o}));u&&i&&((0,f.default)(l[0],"route[0].weight",u.weight),(0,f.default)(l[0],"route[1].weight",i.weight))}else{var d=t.oldHttpData.find((function(e){return!!e.match}));(0,f.default)(l[0],"match",d.match)}"tcp"===t.protocol&&l.forEach((function(e){e.match=e.match||[]})),(0,f.default)(t.formTemplate,t.strategyPath,l)},t.handleModeChange=function(e){t.initFormTemplate(e),t.setState({mode:e})};var n=(0,s.default)(t.formTemplate,t.strategyPath,[]);return t.state={mode:n.some((function(e){return!(0,d.default)(e.match)}))?"content":"traffic"},t.oldHttpData=(0,p.default)(n),t.initFormTemplate(t.state.mode),t}return(0,l.default)(r,[{key:"renderContent",value:function(){return"traffic"===this.state.mode?m.default.createElement(v.default,this.props):m.default.createElement(y.default,this.props)}},{key:"render",value:function(){return m.default.createElement("div",{className:g.default.wrapper},m.default.createElement("div",{className:g.default.bar},m.default.createElement(h.RadioGroup,{mode:"button",value:this.state.mode,onChange:this.handleModeChange,size:"small"},m.default.createElement(h.RadioButton,{value:"traffic"},t("SPECIFY_TRAFFIC_DISTRIBUTION")),m.default.createElement(h.RadioButton,{value:"content",disabled:"http"!==this.protocol},t("SPECIFY_REQUEST_PARAMETERS"))),this.protocol&&m.default.createElement(h.Tooltip,{content:t("POLICY_REQUEST_CONTENT_TIP")},m.default.createElement(h.Icon,{className:g.default.tip,name:"question"}))),m.default.createElement("div",{className:g.default.contentWrapper},this.renderContent()))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"protocol",get:function(){return(0,s.default)(this.formTemplate,"spec.protocol","http")}},{key:"strategyPath",get:function(){return"spec.template.spec.".concat(this.protocol)}}]),r}(m.default.Component);a.default=b},3312:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(71)),l=n(r(56)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(16)),p=n(r(73)),m=n(r(68)),h=n(r(0)),v=r(25),y=n(r(1107)),g=n(r(3313));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=E(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleRatioChange=function(e){t.setState({ratio:e},(function(){(0,p.default)(t.oldRoute,"weight",100-e)}))},t.state={ratio:(0,d.default)(t.newRoute,"weight",50)},t}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=(0,d.default)(this.oldRoute,"weight"),t=(0,d.default)(this.newRoute,"weight");(0,m.default)(e)&&(0,p.default)(this.oldRoute,"weight",100-this.state.ratio),(0,m.default)(t)&&(0,p.default)(this.newRoute,"weight",this.state.ratio)}},{key:"render",value:function(){var e=this.state.ratio,a=this.props,r=a.formRef,n=(a.formTemplate,(0,l.default)(a,["formRef","formTemplate"])),c=(0,d.default)(this.formTemplate,"spec.template.spec.hosts[0]"),u=(0,d.default)(this.newRoute,"destination.subset"),i=(0,d.default)(this.oldRoute,"destination.subset"),s="".concat(u," ").concat(t("TRAFFIC_LOW")),f="".concat(i," ").concat(t("TRAFFIC_LOW"));return h.default.createElement("div",{className:g.default.wrapper},h.default.createElement("div",{className:g.default.item},h.default.createElement(v.Alert,{type:"info",message:t.html("CANARY_BY_TRAFFIC_DESC",{ratio:e,component:c,newVersion:u})})),h.default.createElement("div",{className:g.default.item},h.default.createElement("div",{className:g.default.title},t("TRAFFIC_DISTRIBUTION")),h.default.createElement(v.Form,(0,o.default)({ref:r,data:this.formTemplate},n),h.default.createElement(v.Form.Item,null,h.default.createElement(y.default,{name:"".concat(this.strategyPath,"[0].route[1].weight"),min:0,max:100,leftContent:s,rightContent:f,onChange:this.handleRatioChange})))))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"strategyPath",get:function(){var e=(0,d.default)(this.formTemplate,"spec.protocol","http");return"spec.template.spec.".concat(e)}},{key:"oldRoute",get:function(){return(0,d.default)(this.formTemplate,"".concat(this.strategyPath,"[0].route[0]"),{})}},{key:"newRoute",get:function(){return(0,d.default)(this.formTemplate,"".concat(this.strategyPath,"[0].route[1]"),{})}}]),r}(h.default.Component);a.default=b},3313:function(e,t,a){e.exports={wrapper:"nETb4KMOztrWN5hml6q98",title:"_1rwGy_A6FaU6W5jHRrwFlf",item:"_383D6mqvtF_Sw426o7q_GW"}},3314:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(71)),l=n(r(56)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(16)),p=n(r(32)),m=n(r(738)),h=n(r(0)),v=r(25),y=r(58),g=n(r(3315)),E=n(r(3317)),b=n(r(3319)),O=n(r(3320));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,i.default)(r,e);var a=_(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleCookieChange=function(t){e.setState({cookie:t})},e.handleFormChange=function(t,a){t==="".concat(e.prefix,".match[0].headers.cookie")?(0,p.default)(Object.values(a)[0])&&(0,m.default)(e.formTemplate,t):t==="".concat(e.prefix,".match[0].headers")?(0,p.default)(Object.keys(a)[0])&&(0,m.default)(e.formTemplate,t):t==="".concat(e.prefix,".match[0].uri")?(0,p.default)(Object.values(a)[0])&&(0,m.default)(e.formTemplate,t):t==="".concat(e.prefix,".match[0].headers['User-Agent'].regex")&&(0,p.default)(a)&&(0,m.default)(e.formTemplate,"".concat(e.prefix,".match[0].headers['User-Agent']"))},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=(e.formTemplate,(0,l.default)(e,["formRef","formTemplate"]));return h.default.createElement("div",{className:O.default.wrapper},h.default.createElement("div",{className:O.default.item},h.default.createElement(v.Alert,{type:"info",message:t("SPECIFY_REQUEST_PARAMETERS_DESC")})),h.default.createElement("div",{className:O.default.item},h.default.createElement("div",{className:O.default.title},t("REQUEST_PARAMETERS")),h.default.createElement(v.Form,(0,o.default)({ref:a,data:this.formTemplate,onChange:this.handleFormChange},r),h.default.createElement(v.Form.Item,{label:t("COOKIE")},h.default.createElement(g.default,{name:"".concat(this.prefix,".match[0].headers.cookie"),onChange:this.handleCookieChange,placeholder:t("KEY_EQ_VALUE")})),h.default.createElement(v.Form.Item,{label:t("HEADER")},h.default.createElement(E.default,{name:"".concat(this.prefix,".match[0].headers")})),h.default.createElement(v.Form.Item,{label:"URL"},h.default.createElement(g.default,{name:"".concat(this.prefix,".match[0].uri"),placeholder:"URL",matchTypes:["prefix","regex"]})),h.default.createElement(v.Form.Item,{label:t("CLIENT_OS")},h.default.createElement(b.default,{name:"".concat(this.prefix,".match[0].headers['User-Agent'].regex"),options:y.GRAY_RELEASE_CANARY_CONTENT})))))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"prefix",get:function(){var e=(0,d.default)(this.formTemplate,"spec.protocol","http");return"spec.template.spec.".concat(e,"[0]")}}]),r}(h.default.Component);a.default=S},3315:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(21)),l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(650)),m=r(25),h=n(r(3316));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=v(r);function r(e){var t;(0,l.default)(this,r),(t=a.call(this,e)).triggerChange=(0,p.default)((function(){var e=t.state,a=e.match,r=e.value,n=t.props.onChange;a&&n((0,o.default)({},a,r||""))}),200),t.handleMatchChange=function(e){t.setState({match:e},(function(){t.triggerChange()}))},t.handleValueChange=function(e,a){t.setState({value:a},(function(){t.triggerChange()}))};var n=Object.keys(e.value)[0]||t.matchTypes[0].value;return t.state={match:n,value:e.value[n]||""},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.state,a=e.match,r=e.value;return f.default.createElement("div",{className:h.default.match},f.default.createElement(m.Select,{value:a,options:this.matchTypes,onChange:this.handleMatchChange}),f.default.createElement(m.Input,{value:r,placeholder:this.props.placeholder||t("KEY_EQ_VALUE"),onChange:this.handleValueChange}))}},{key:"matchTypes",get:function(){var e=this.props.matchTypes;return[{label:t("EXACT_MATCH"),value:"exact"},{label:t("PREFIX_MATCH"),value:"prefix"},{label:t("REGEX_MATCH"),value:"regex"}].filter((function(t){var a=t.value;return e.includes(a)}))}}]),r}(f.default.Component);a.default=y,y.propTypes={value:d.default.object,onChange:d.default.func,matchTypes:d.default.array},y.defaultProps={value:{},onChange:function(){},matchTypes:["exact","regex"]}},3316:function(e,t,a){e.exports={match:"_1NxalZ4Q_iF0oawMFUygN8"}},3317:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(21)),l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(650)),m=n(r(191)),h=r(25),v=n(r(3318));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=["cookie","User-Agent"],b=function(e){(0,u.default)(r,e);var a=g(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).triggerChange=(0,p.default)((function(){var e=t.state,a=e.match,r=e.key,n=e.value,l=t.props,c=l.onChange,u=l.value;c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}((0,o.default)({},r,(0,o.default)({},a,n)),(0,m.default)(u,E)))}),200),t.handleMatchChange=function(e){t.setState({match:e},(function(){t.triggerChange()}))},t.handleKeyChange=function(e,a){t.setState({key:a},(function(){t.triggerChange()}))},t.handleValueChange=function(e,a){t.setState({value:a},(function(){t.triggerChange()}))},t.state=function(e){var t=Object.keys(e.value).filter((function(e){return!E.includes(e)}))[0];return{key:t,match:(t?Object.keys(e.value[t])[0]:"exact")||"exact",value:(t?Object.values(e.value[t])[0]:"")||""}}(e),t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.state,a=e.match,r=e.key,n=e.value;return f.default.createElement("div",{className:v.default.match},f.default.createElement(h.Select,{value:a,defaultValue:"exact",options:this.matchTypes,onChange:this.handleMatchChange}),f.default.createElement(h.Input,{value:r,placeholder:t("KEY"),onChange:this.handleKeyChange}),f.default.createElement(h.Input,{value:n,placeholder:t("VALUE"),onChange:this.handleValueChange}))}},{key:"matchTypes",get:function(){return[{label:t("EXACT_MATCH"),value:"exact"},{label:t("REGEX_MATCH"),value:"regex"}]}}]),r}(f.default.Component);a.default=b,b.propTypes={value:d.default.object,onChange:d.default.func},b.defaultProps={value:{},onChange:function(){}}},3318:function(e,t,a){e.exports={match:"_38Cti3g5qY_E84pX1BMFTq"}},3319:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),o=r(a(12)),l=r(a(13)),c=r(a(19)),u=r(a(20)),i=r(a(18)),s=r(a(0)),f=r(a(1301)),d=r(a(32));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var m=function(e){(0,c.default)(a,e);var t=p(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getValueFromProps=function(e){return e.value?e.value.slice(3,e.value.length-3).split("|"):[]},e.handleChange=function(t){var a=e.props.onChange;(0,d.default)(t)?a&&a(""):a&&a(".*(".concat(t.join("|"),").*"))},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.getValueFromProps(this.props);return s.default.createElement(f.default,(0,n.default)({},this.props,{value:e,onChange:this.handleChange}))}}]),a}(s.default.Component);t.default=m},3320:function(e,t,a){e.exports={wrapper:"_1aRgespwFUWU9GqbQKeG92",title:"_3z2kLZ8Z3DiGGoAJcdF4mK",item:"dfPzevqogHOiFt1iKPbzS"}},3321:function(e,t,a){e.exports={wrapper:"-dBWXCBE13eJRQLETuS_r",bar:"_1sECNuIPwCvR2dUOMjhl4R",contentWrapper:"_3b2bEEWVzoUh58GIlURRy6",tip:"_2hEEnwJXIG-QlbIGZ8yWGY"}},3322:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(71)),l=n(r(56)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(16)),m=n(r(73)),h=n(r(32)),v=r(25),y=n(r(3323)),g=n(r(3325));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=E(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={versions:[]},e.handleVersionChange=function(t){(0,p.default)(e.formTemplate,"spec.principal")===t?((0,m.default)(e.formTemplate,"".concat(e.strategyPath,"[0].route[0].weight"),100),(0,m.default)(e.formTemplate,"".concat(e.strategyPath,"[0].route[1].weight"),0)):((0,m.default)(e.formTemplate,"".concat(e.strategyPath,"[0].route[0].weight"),0),(0,m.default)(e.formTemplate,"".concat(e.strategyPath,"[0].route[1].weight"),100))},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.formTemplate,t=(0,p.default)(e,"strategy.spec.template.spec.hosts[0]"),a=(0,p.default)(e,"strategy.spec.principal"),r=(0,p.default)(e,"workload.metadata.labels.version"),n=(0,p.default)(e,"workload.spec.replicas"),o=(0,p.default)(e,'strategy.metadata.annotations["servicemesh.kubesphere.io/workloadReplicas"]',0),l=[{route:[{destination:{subset:a,host:t},weight:100},{destination:{subset:r,host:t},weight:0}]}];"tcp"===this.protocol&&l.forEach((function(e){e.match=e.match||[]})),(0,h.default)((0,p.default)(this.formTemplate,"spec.governor"))&&(0,m.default)(this.formTemplate,"spec.governor",a),(0,h.default)((0,p.default)(this.formTemplate,this.strategyPath))&&(0,m.default)(this.formTemplate,this.strategyPath,l),this.setState({versions:[{name:a,replicas:o},{name:r,replicas:n}]})}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=(e.formTemplate,(0,l.default)(e,["formRef","formTemplate"]));return d.default.createElement("div",{className:g.default.wrapper},d.default.createElement("div",{className:g.default.item},d.default.createElement("p",null,t("BLUE_GREEN_STRATEGY_DESC"))),d.default.createElement("div",{className:g.default.item},d.default.createElement("div",{className:g.default.title},t("SELECT_VERSION")),d.default.createElement(v.Form,(0,o.default)({ref:a,data:this.formTemplate},r),d.default.createElement(v.Form.Item,null,d.default.createElement(y.default,{name:"spec.governor",options:this.state.versions,onChange:this.handleVersionChange})))))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"protocol",get:function(){return(0,p.default)(this.formTemplate,"spec.protocol","http")}},{key:"strategyPath",get:function(){return"spec.template.spec.".concat(this.protocol)}}]),r}(d.default.Component);a.default=b},3323:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(21)),l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(1)),p=n(r(3)),m=r(25),h=n(r(3324));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleTakeOver=function(t){e.props.onChange(t.currentTarget.dataset.version)},e.handleOffline=function(t){var a=e.props,r=a.onChange,n=a.options,o=t.currentTarget.dataset.version,l=n.find((function(e){return e.name!==o}));l&&r(l.name)},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.value,n=a.options;return f.default.createElement("ul",{className:h.default.wrapper},n.map((function(a){return f.default.createElement("li",{key:a.name,className:(0,p.default)((0,o.default)({},h.default.selected,r===a.name))},f.default.createElement(m.Icon,{name:"appcenter",size:40}),f.default.createElement("div",{className:h.default.text},f.default.createElement("p",null,t("GRAYSCALE_VERSION",{version:a.name})),f.default.createElement("p",null,1===a.replicas?t("GRAYSCALE_REPLICA_SI",{count:a.replicas}):t("GRAYSCALE_REPLICA_PL",{count:a.replicas}))),r!==a.name?f.default.createElement(m.Button,{className:h.default.button,type:"control","data-version":a.name,onClick:e.handleTakeOver},t("TAKE_OVER")):f.default.createElement(m.Button,{className:h.default.button,"data-version":a.name,onClick:e.handleOffline},t("TAKE_OFFLINE")))})))}}]),r}(f.default.Component);a.default=y,y.propTypes={value:d.default.string,options:d.default.array,onChange:d.default.func},y.defaultProps={value:"",options:[],onChange:function(){}}},3324:function(e,t,a){e.exports={wrapper:"_3XscnuxSwuZleg8ScGet9M",selected:"pu6IlaTV5o0udnBBkp9Ff",text:"_3EXmNHMRGFVnK-HPq3geRQ",button:"_1Y__cTEragjsYM7DeIP9FS"}},3325:function(e,t,a){e.exports={wrapper:"fPQ8Td9R5A7pYRg5B86NM",title:"_65t8-S2AxDctXS8qxxP-X",item:"hyg1hbrClRD8y-DIg_jOm"}},3326:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(0)),f=n(r(16)),d=n(r(73)),p=n(r(32)),m=r(25);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=h(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,l.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.formTemplate,t=(0,f.default)(e,"strategy.spec.template.spec.hosts[0]"),a=[{route:[{destination:{subset:(0,f.default)(e,"strategy.spec.principal"),host:t},weight:100}],mirror:{host:t,subset:(0,f.default)(e,"workload.metadata.labels.version")}}];"tcp"===this.protocol&&a.forEach((function(e){e.match=e.match||[]})),(0,p.default)((0,f.default)(this.formTemplate,this.strategyPath))&&(0,d.default)(this.formTemplate,this.strategyPath,a)}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return s.default.createElement(m.Form,{ref:a,data:r},s.default.createElement(m.Alert,{type:"info",message:t("MIRROR_POLICY_DESC")}))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"protocol",get:function(){return(0,f.default)(this.formTemplate,"spec.protocol","http")}},{key:"strategyPath",get:function(){return"spec.template.spec.".concat(this.protocol)}}]),r}(s.default.Component);a.default=v},3327:function(e,t,a){e.exports={wrapper:"_2dK7FFyZnKdm4m4h3RFFUY",footer:"_1eOm_TZRHzjXGWKYjHLQKX",content:"_2nDIfLTPkKJn_3gV0fCjJk",icon:"_2PXqSpZYeiJuiswouqxw1n",text:"_29dUSJM-WzbeMs4Rz22dHw"}},3328:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l,c,u=n(r(71)),i=n(r(56)),s=n(r(21)),f=n(r(12)),d=n(r(13)),p=n(r(19)),m=n(r(20)),h=n(r(18)),v=n(r(16)),y=n(r(73)),g=n(r(738)),E=n(r(32)),b=n(r(290)),O=n(r(820)),_=n(r(0)),S=n(r(1)),R=n(r(3)),C=r(5),k=r(70),T=r(25),w=n(r(274)),P=n(r(1014)),D=n(r(1107)),N=n(r(1165)),A=n(r(736)),j=r(37),I=r(58),M=n(r(733)),L=n(r(3329)),x=n(r(3331)),U=n(r(3334)),Y=n(r(3337));function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var H={exact:"EXACT_MATCH",prefix:"PREFIX_MATCH",regex:"REGEX_MATCH"},G=(0,b.default)(I.GRAY_RELEASE_CANARY_CONTENT,"value"),W=(0,k.inject)("rootStore")(o=(0,k.observer)((c=l=function(e){(0,p.default)(r,e);var a=B(r);function r(e){var n;return(0,f.default)(this,r),(n=a.call(this,e)).updateTipInfo=function(){var e=(0,C.toJS)(n.store.detail),a=e.governor,r=e.newVersion,o=e.oldVersion;a?n.setState({tipType:"info",tipInfo:a===o?t.html("OLD_VERSION_TAKEOVER_DESC",{newVersion:r,oldVersion:o}):t.html("NEW_VERSION_TAKEOVER_DESC",{newVersion:r,oldVersion:o})}):n.setState({tipInfo:""})},n.handlePatch=function(e){var t=(0,C.toJS)(n.store.detail);n.store.patch(t,e).then((function(){n.store.fetchDetail(t).then((function(){var e=(0,C.toJS)(n.store.detail);if("Canary"===e.type&&!e.byContent){var t=(0,v.default)(e,"newRoute.weight",50);n.setState({ratio:t})}n.updateTipInfo()}))}))},n.handleRatioChange=function(e){n.setState({ratio:e})},n.handleConfirmSaveRatio=function(){var e=n.state.ratio;n.handleSaveRatio(e)},n.handleSaveRatio=function(e){var t=(0,C.toJS)(n.store.detail),a=t.oldRoute,r=t.oldVersion,o=t.newRoute,l=t.newVersion,c=t.protocol,u={};(0,y.default)(u,"spec.template.spec.".concat(c,"[0].route"),[F(F({},a),{},{weight:100-e}),F(F({},o),{},{weight:e})]),"tcp"===c&&(0,y.default)(u,"spec.template.spec.".concat(c,"[0].match"),[]),100===e?(0,y.default)(u,"spec.governor",l):0===e?(0,y.default)(u,"spec.governor",r):(0,y.default)(u,"spec.governor",""),n.handlePatch(u)},n.handleResetRatio=function(){var e=(0,C.toJS)(n.store.detail),t=(0,v.default)(e,"newRoute.weight");n.setState({ratio:t})},n.showEditModal=function(){n.setState({showEditModal:!0})},n.hideEditModal=function(){n.setState({showEditModal:!1})},n.updateStrategy=function(e){var t=(0,v.default)(e,"spec.protocol","http"),a="spec.template.spec.".concat(t,"[0]"),r=(0,v.default)(e,"".concat(a,".match[0].headers.cookie"));r&&(0,E.default)(Object.values(r)[0])&&(0,g.default)(e,"".concat(a,".match[0].headers.cookie"));var n=(0,v.default)(e,"".concat(a,".match[0].headers"));n&&Object.keys(n).forEach((function(t){(0,E.default)(t)&&(0,g.default)(e,"".concat(a,".match[0].headers.").concat(t))}));var o=(0,v.default)(e,"".concat(a,".match[0].uri"));o&&(0,E.default)(Object.values(o)[0])&&(0,g.default)(e,"".concat(a,".match[0].uri"));var l=(0,v.default)(e,"".concat(a,".match[0].headers['User-Agent'].regex"));return l&&(0,E.default)(Object.values(l)[0])&&(0,g.default)(e,"".concat(a,".match[0].headers['User-Agent'].regex")),e},n.handleComponentEdit=function(e,t){var a=(0,C.toJS)(n.store.detail),r={};t.includes("grayReleaseStrategy")&&(r.strategy=n.updateStrategy(e.strategy)),t.includes("grayReleaseComponent")&&(r.workload=e.workload),n.store.update(a,r).then((function(){n.store.fetchDetail(a).then((function(){n.hideEditModal();var e=(0,C.toJS)(n.store.detail);if("Canary"===e.type&&!e.byContent){var t=(0,v.default)(e,"newRoute.weight",50);n.setState({ratio:t})}n.updateTipInfo()}))}))},n.handleOffline=function(){var e=(0,C.toJS)(n.store.detail),a=e.type,r=e.cluster,o=e.namespace,l=e.governor,c=e.oldVersion,u=e.oldWorkloadName,i=e.newWorkloadName;if(l){var s=n.props.onDelete,f=l===c?i:u;f&&(n.workloadStore.delete({name:f,cluster:r,namespace:o}),s())}else if("Mirror"!==a)n.setState({tipType:"warning",tipInfo:t("DELETE_GRAYSCALE_RELEASE_JOB_DESC")});else{var d=n.props.onDelete;i&&(n.workloadStore.delete({name:i,cluster:r,namespace:o}),d())}},n.handleTakeover=function(e){var t=(0,C.toJS)(n.store.detail);"Canary"===t.type?t.byContent?n.handlePatch({spec:{governor:"new"===e?t.newVersion:t.oldVersion}}):n.handleSaveRatio("new"===e?100:0):"Bluegreen"===t.type&&n.handlePatch({spec:{governor:"new"===e?t.newVersion:t.oldVersion}})},n.handleRecover=function(){n.handlePatch({spec:{governor:""}})},n.state={tipType:"",tipInfo:"",ratio:50,showEditModal:!1},n.store=new N.default,n.workloadType=(0,v.default)(e.detail,'annotations["servicemesh.kubesphere.io/workloadType"]',"deployments"),n.workloadStore=new A.default(n.workloadType),e.visible&&(n.getData(e.detail),n.getWorkLoadDetail(e.detail)),n}return(0,d.default)(r,[{key:"initWebsocket",value:function(e){var t=this,a=e||{},r=a.cluster,n=a.namespace,o=a.selector,l="api/v1/watch/".concat(r?"klusters/".concat(r,"/"):"","namespaces/").concat(n,"/pods?labelSelector=").concat((0,j.joinSelector)(o));l&&n&&o&&(this.websocket.watch(l),this.getWorkLoadDetail=(0,O.default)(this.getWorkLoadDetail,2e3),this.disposer=(0,C.reaction)((function(){return t.websocket.message}),(function(a){"Pod"===a.object.kind&&"ADDED"!==a.type&&t.getWorkLoadDetail(F(F({},e),{},{silent:!0}))})))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.detail;a&&a!==e.visible&&(this.getData(r),this.getWorkLoadDetail(r))}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer(),this.websocket.close()}},{key:"getData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.name&&t.namespace&&this.store.fetchDetail(t).then((function(){var t=(0,C.toJS)(e.store.detail);if("Canary"===t.type&&!t.byContent){var a=(0,v.default)(t,"newRoute.weight",50);e.setState({ratio:a})}e.initWebsocket(t),e.updateTipInfo()}))}},{key:"getWorkLoadDetail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.silent,a=(0,i.default)(e,["silent"]),r=a.cluster,n=a.namespace,o=a.selector,l=a.hosts,c=a.newVersion,u=a.oldVersion;if(n&&o){var s=(0,j.joinSelector)(o);this.workloadStore.fetchListByK8s({cluster:r,namespace:n,labelSelector:s}),this.store.fetchComponents({cluster:r,namespace:n,service:l,labelSelector:s,newVersion:c,oldVersion:u,silent:t})}}},{key:"renderTitle",value:function(){var e=(0,C.toJS)(this.store.detail),a=I.GRAY_RELEASE_CATEGORIES.find((function(t){return t.type===e.type}))||{};return _.default.createElement("div",{className:Y.default.title},_.default.createElement("img",{src:"/assets/default-app.svg",alt:""}),_.default.createElement("div",{className:Y.default.text},_.default.createElement("div",{className:"h4"},e.name),_.default.createElement("p",null,t("RELEASE_MODE"),": ",_.default.createElement("strong",null,t("".concat(a.title,"_LOW"))))),_.default.createElement(T.Button,{onClick:this.handleOffline},t("DELETE")))}},{key:"renderComponents",value:function(){var e=(0,C.toJS)(this.store.detail),a=this.store.components.data,r=this.store.isComponentsLoading;if(r)return _.default.createElement("div",null,_.default.createElement("div",{className:Y.default.sectionTitle},_.default.createElement("div",null,t("VERSIONS")),_.default.createElement("p",null,t("GRAY_COMPONENT_DESC"))),_.default.createElement(T.Loading,{spinning:r,className:Y.default.loading}));var n={showEditModal:this.showEditModal,onTakeover:"Mirror"!==e.type?this.handleTakeover:null,namespace:this.props.detail.namespace,cluster:this.props.detail.cluster,workspace:this.props.detail.workspace,maxLength:Math.min(Math.max((0,v.default)(a,"[".concat(e.newVersion,"].pods.length"),0),(0,v.default)(a,"[".concat(e.oldVersion,"].pods.length"),0)),3),jobDetail:e,workloadType:this.workloadType};return _.default.createElement("div",null,_.default.createElement("div",{className:Y.default.sectionTitle},_.default.createElement("div",null,t("VERSIONS")),_.default.createElement("p",null,t("GRAY_COMPONENT_DESC"))),_.default.createElement(T.Columns,null,_.default.createElement(T.Column,null,_.default.createElement(L.default,(0,u.default)({data:a[e.newVersion],pods:(0,C.toJS)((0,v.default)(a,"[".concat(e.newVersion,"].pods"),[])),type:"new",isGovernor:e.governor===e.newVersion},n))),_.default.createElement(T.Column,null,_.default.createElement(L.default,(0,u.default)({data:a[e.oldVersion],pods:(0,C.toJS)((0,v.default)(a,"[".concat(e.oldVersion,"].pods"),[])),type:"old",isGovernor:e.governor===e.oldVersion},n)))))}},{key:"renderTraffic",value:function(){var e=(0,C.toJS)(this.store.detail),a=this.state.ratio,r=(0,v.default)(e,"newRoute.weight");return _.default.createElement(_.default.Fragment,null,_.default.createElement("div",{className:Y.default.sectionTitle},_.default.createElement("div",null,t("TRAFFIC_DISTRIBUTION")),_.default.createElement("p",null,t("ALLOCATE_TRAFFIC_DESC"))),_.default.createElement(D.default,{min:0,max:100,value:a,leftContent:e.newVersion,rightContent:e.oldVersion,onChange:this.handleRatioChange}),_.default.createElement(P.default,{visible:a!==r,width:400,title:t("ADJUST_TRAFFIC_DISTRIBUTION"),content:t.html("ADJUST_TRAFFIC_DISTRIBUTION_DESC",{newVersion:e.newVersion,oldVersion:e.oldVersion,ratioNew:a,ratioOld:100-a}),cancelText:t("CANCEL"),confirmText:t("OK"),isSubmitting:this.store.isSubmitting,onCancel:this.handleResetRatio,onConfirm:this.handleConfirmSaveRatio}))}},{key:"renderBluegreen",value:function(){var e=(0,C.toJS)(this.store.detail),a=e.governor||(100===e.oldRoute.weight?e.oldVersion:e.newVersion);return _.default.createElement(_.default.Fragment,null,_.default.createElement("div",{className:Y.default.sectionTitle},_.default.createElement("div",null,t("TRAFFIC_DISTRIBUTION")),_.default.createElement("p",null,t("BLUE_GREEN_TRAFFIC_DISTRI_DESC"))),_.default.createElement("div",{className:Y.default.barWrapper},_.default.createElement("div",{className:Y.default.bar},t("VERSION_TRAFFIC_PERCENT",{version:a,percent:"100"}))))}},{key:"renderMirror",value:function(){var e=(0,C.toJS)(this.store.detail),a=e.governor||(100===e.oldRoute.weight?e.oldVersion:e.newVersion);return _.default.createElement(_.default.Fragment,null,_.default.createElement("div",{className:Y.default.sectionTitle},_.default.createElement("div",null,t("TRAFFIC_DISTRIBUTION")),_.default.createElement("p",null,t("TRAFFIC_MIRRORING_TRAFFIC_DISTRI_DESC"))),_.default.createElement("div",{className:Y.default.mirror},_.default.createElement("div",{className:Y.default.barWrapper},_.default.createElement("div",{className:(0,R.default)(Y.default.bar,(0,s.default)({},Y.default.mirrorBar,a!==e.newVersion))},t("VERSION_TRAFFIC_PERCENT",{version:e.newVersion,percent:"100"}))),_.default.createElement("div",{className:(0,R.default)(Y.default.mirrorIcon,(0,s.default)({},Y.default.revertMirrorIcon,a===e.oldVersion))},_.default.createElement("img",{src:"/assets/mirror.svg",alt:""})),_.default.createElement("div",{className:Y.default.barWrapper},_.default.createElement("div",{className:(0,R.default)(Y.default.bar,(0,s.default)({},Y.default.mirrorBar,a!==e.oldVersion))},t("VERSION_TRAFFIC_PERCENT",{version:e.oldVersion,percent:"100"})))))}},{key:"renderContentMatch",value:function(){var e=(0,C.toJS)(this.store.detail),a=this.store.components.data,r=this.store.isComponentsLoading;if(r)return _.default.createElement("div",null,_.default.createElement("div",{className:Y.default.sectionTitle},_.default.createElement("div",null,t("REQUEST_PARAMETERS")),_.default.createElement("p",null,t("SPECIFY_REQUEST_PARAMETERS_DESC"))),_.default.createElement(T.Loading,{spinning:r,className:Y.default.loading}));var n=(0,v.default)(e,"newRoute.match[0]"),o=a[e.newVersion]||{};if(!n)return null;var l=(0,v.default)(n,"uri",{}),c=(0,v.default)(n,"headers",{}),u=Object.keys(l)[0]||"",i=l[u]||"-",s=c.cookie||{},f=Object.keys(s)[0]||"",d=s[f]||"-",p=c["User-Agent"]||{},m=p.regex&&p.regex.slice(3,p.regex.length-3).split("|").map((function(e){return G[e]?G[e].label:e})).join(", ")||"-",h=Object.keys(c).find((function(e){return!["cookie","User-Agent"].includes(e)})),y=c[h]||{},g=Object.keys(y)[0]||"",E=y[g]||"-";return _.default.createElement(_.default.Fragment,null,_.default.createElement("div",{className:Y.default.sectionTitle},_.default.createElement("div",null,t("REQUEST_PARAMETERS")),_.default.createElement("p",null,t("SPECIFY_REQUEST_PARAMETERS_DESC"))),_.default.createElement("div",{className:Y.default.matchWrapper},e.governor&&_.default.createElement("div",{className:Y.default.governor},_.default.createElement("div",null,_.default.createElement("div",null,_.default.createElement(T.Icon,{name:"appcenter",size:40})),_.default.createElement("div",null,t.html("SERVICE_VERSION_RECEIVE_ALL_TRAFFIC",{version:e.governor})),_.default.createElement("div",null,_.default.createElement(T.Button,{onClick:this.handleRecover},t("RESTORE"))))),_.default.createElement(T.Columns,null,_.default.createElement(T.Column,null,_.default.createElement("ul",null,_.default.createElement("li",null,_.default.createElement(T.Icon,{name:"earth",size:24}),_.default.createElement("strong",null,f?t("COOKIE_".concat(H[f])):t("COOKIE")),d),_.default.createElement("li",null,_.default.createElement(T.Icon,{name:"image",size:24}),_.default.createElement("strong",null,t("OS")),m),_.default.createElement("li",null,_.default.createElement(T.Icon,{name:"pen",size:24}),_.default.createElement("strong",null,g?t("HEADER_".concat(H[g])):t("HEADER")),h?"".concat(h,": ").concat(E):""),_.default.createElement("li",null,_.default.createElement(T.Icon,{name:"ip",size:24}),_.default.createElement("strong",null,u?t("URL_".concat(H[u])):t("URL")),i))),_.default.createElement(T.Column,{className:"is-narrow"},_.default.createElement("div",{className:Y.default.matchArrow},_.default.createElement(T.Icon,{name:"update",color:{primary:"#329dce"},size:24}))),_.default.createElement(T.Column,{className:"is-narrow"},_.default.createElement("div",{className:Y.default.matchVersion},_.default.createElement("div",null,_.default.createElement("div",null,_.default.createElement(T.Icon,{name:"appcenter",size:40})),_.default.createElement("div",null,_.default.createElement("span",{className:"ks-tag"},e.newVersion)),_.default.createElement("div",null,_.default.createElement("strong",null,e.hosts)),_.default.createElement("p",null,t("REPLICA_COUNT"),": ",_.default.createElement("strong",null,o.available),"/",o.desire)))))))}},{key:"renderPolicy",value:function(){var e=(0,C.toJS)(this.store.detail);return"Canary"===e.type?_.default.createElement("div",{style:{marginTop:20}},e.byContent?this.renderContentMatch():this.renderTraffic()):"Bluegreen"===e.type?_.default.createElement("div",{style:{marginTop:20}},this.renderBluegreen()):"Mirror"===e.type?_.default.createElement("div",{style:{marginTop:20}},this.renderMirror()):null}},{key:"renderMonitor",value:function(){var e=(0,C.toJS)(this.store.detail);return _.default.createElement(x.default,{detail:e,store:this.store})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.state,o=n.showEditModal,l=n.tipInfo,c=n.tipType,u=(0,C.toJS)(this.store.detail);return _.default.createElement(w.default,{className:Y.default.modal,bodyClassName:Y.default.body,headerClassName:Y.default.header,title:t("JOB_STATUS"),cancelText:t("CLOSE"),onCancel:r,visible:a,fullScreen:!0},l&&_.default.createElement(T.Alert,{className:"margin-b8",type:c,message:l}),this.renderTitle(),_.default.createElement("div",{className:Y.default.wrapper},this.renderComponents(),this.renderPolicy()),_.default.createElement("div",{className:Y.default.monitor},this.renderMonitor()),_.default.createElement(U.default,{visible:o,module:"grayreleases",formData:this.formData,cluster:u.cluster,onOk:this.handleComponentEdit,onCancel:this.hideEditModal,isSubmitting:this.store.isSubmitting}))}},{key:"websocket",get:function(){return this.props.rootStore.websocket}},{key:"formData",get:function(){var e=(0,C.toJS)(this.store.detail),t="".concat(e.hosts,"-").concat(e.newVersion),a=(0,C.toJS)(this.workloadStore.list.data).find((function(e){return e.name===t}))||{},r=M.default[this.workloadType]({namespace:e.namespace}),n={strategy:(0,C.toJS)(e._originData),workload:{apiVersion:r.apiVersion,kind:r.kind,metadata:{name:t,namespace:a.namespace,labels:a.labels,annotations:a.annotations},spec:a.spec}};return(0,j.mergeLabels)(n.workload,{version:e.newVersion}),n}}]),r}(_.default.Component),l.propTypes={visible:S.default.bool,detail:S.default.object,onCancel:S.default.func,onDelete:S.default.func},l.defaultProps={visible:!1,detail:{},onCancel:function(){},onDelete:function(){}},o=c))||o)||o;a.default=W},3329:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(21)),l=n(r(136)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=n(r(1)),m=n(r(3)),h=r(276),v=n(r(651)),y=n(r(16)),g=n(r(32)),E=n(r(93)),b=r(5),O=r(25),_=n(r(920)),S=n(r(3330)),R=n(r(1494));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var w={cpu:"pod_cpu_usage",memory:"pod_memory_usage_wo_cache"},P=function(e){(0,i.default)(r,e);var a=T(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleMoreMenuClick=function(e,a){switch(a){case"edit":t.props.showEditModal();break;case"offline":t.props.onOffline(t.props.type);break;case"takeover":t.props.onTakeover(t.props.type)}},t.state={pods:e.pods||[]},t.monitorStore=new _.default,t.getData(e.pods),t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.pods;(0,v.default)(t,e.pods)||this.getData(t)}},{key:"getData",value:function(e){var t=this;(0,g.default)(e)||this.monitorStore.fetchMetrics({cluster:this.props.cluster,namespace:this.props.namespace,resources:e.map((function(e){return e.name})),metrics:Object.values(w),last:!0}).then((function(){var a=(0,b.toJS)(t.monitorStore.data);t.setState({pods:e.map((function(e){var t={};return Object.entries(w).forEach((function(r){var n=(0,l.default)(r,2),o=n[0],c=n[1],u=(0,y.default)(a,"".concat(c,".data.result"))||[];t[o]=u.find((function(t){return(0,y.default)(t,"metric.pod")===e.name}))})),k(k({},e),{},{metrics:t})}))})}))}},{key:"renderMoreMenu",value:function(){var e=this.props,a=e.type,r=e.isGovernor,n=e.onTakeover;return d.default.createElement(O.Menu,{onClick:this.handleMoreMenuClick},"new"===a&&d.default.createElement(O.Menu.MenuItem,{key:"edit"},d.default.createElement(O.Icon,{name:"update",type:"light"})," ",t("EDIT")),!r&&(0,E.default)(n)&&d.default.createElement(O.Menu.MenuItem,{key:"takeover"},d.default.createElement(O.Icon,{name:"linechart",type:"light"})," ",t("TAKE_OVER")))}},{key:"render",value:function(){var e=this,a=this.props,r=a.data,n=a.type,o=a.isGovernor,l=a.onTakeover,c=a.jobDetail,u=a.maxLength,i=a.workloadType,s=this.state.pods,f="new"!==n&&(o||!(0,E.default)(l)),p={minHeight:40*u+4*(u-1)},v=["Bluegreen","Mirror"].includes(c.type)&&!o;return d.default.createElement("div",{className:R.default.wrapper},d.default.createElement("div",{className:R.default.header},d.default.createElement(O.Icon,{name:"appcenter",size:40}),d.default.createElement("div",{className:R.default.title},d.default.createElement("div",{className:"h6"},d.default.createElement(h.Link,{to:"".concat(this.prefix,"/").concat(i,"/").concat(r.name,"-").concat(r.version)},r.name),"  ",d.default.createElement("span",{className:(0,m.default)("ks-tag",{"ks-tag-disable":v})},r.version),v&&d.default.createElement(O.Tooltip,{content:"Mirror"===c.type?t("Mirrored traffic is only receiving traffic, no service"):t("The current version is not online, you can let this version take over all traffic and bring it online.")},d.default.createElement("span",{className:"ks-tag ks-tag-disable"},"Mirror"===c.type?t("MIRRORED_TRAFFIC"):t("OFFLINE")))),d.default.createElement("p",null,t("REPLICA_COUNT"),": ",d.default.createElement("strong",null,r.available),"/",r.desire)),!f&&d.default.createElement("div",{className:R.default.right},d.default.createElement(O.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},d.default.createElement(O.Button,{icon:"more",type:"flat"})))),d.default.createElement("ul",{className:R.default.pods,style:p},s.map((function(t){return d.default.createElement(S.default,{data:t,key:t.uid,prefix:e.prefix})}))))}},{key:"prefix",get:function(){var e=this.props,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r)}}]),r}(d.default.Component);a.default=P,P.propTypes={namespace:p.default.string,data:p.default.object,isGovernor:p.default.bool,showEditModal:p.default.func,onTakeover:p.default.func},P.defaultProps={namespace:"",data:{},isGovernor:!0,maxLength:0,jobDetail:{},showEditModal:function(){}}},3330:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(12)),o=r(a(13)),l=r(a(19)),c=r(a(20)),u=r(a(18)),i=r(a(0)),s=a(276),f=r(a(16)),d=a(25),p=r(a(653)),m=a(725),h=r(a(1494));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,l.default)(a,e);var t=v(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.prefix,r=t.podStatus.type;return i.default.createElement("li",null,i.default.createElement("div",{className:h.default.icon},i.default.createElement(d.Icon,{name:"pod",size:24}),i.default.createElement(p.default,{type:r.toLowerCase(),className:h.default.status,flicker:!0})),i.default.createElement(s.Link,{to:"".concat(a,"/pods/").concat(t.name)},t.name),i.default.createElement("div",{className:h.default.metric},i.default.createElement(d.Icon,{name:"memory",size:20}),i.default.createElement("div",null,(0,m.getSuitableValue)((0,f.default)(t,"metrics.memory.value[1]"),"memory"))),i.default.createElement("div",{className:h.default.metric},i.default.createElement(d.Icon,{name:"cpu",size:20}),i.default.createElement("div",null,(0,m.getSuitableValue)((0,f.default)(t,"metrics.cpu.value[1]"),"cpu"))))}}]),a}(i.default.Component);t.default=y},3331:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(71)),l=n(r(21)),c=n(r(136)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=n(r(651)),h=n(r(16)),v=n(r(1)),y=n(r(3)),g=r(25),E=r(305),b=n(r(3332)),O=n(r(3333)),_=n(r(1166));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=function(e){(0,s.default)(r,e);var a=S(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).handleTypeChange=function(e){var a=e.currentTarget.dataset.type;t.setState({selectedType:a})},t.state={newMetrics:{},oldMetrics:{},selectedType:"traffic-in"},t.getData(),t}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){(0,m.default)(this.props.detail,e.detail)||this.getData(this.props)}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.getData()}),1e4)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"getData",value:function(e){var t=this,a=(e||this.props).detail;a&&a.namespace&&this.store.fetchMetrics(a,{duration:1800}).then((function(e){var a=(0,c.default)(e,2),r=a[0],n=a[1];t.setState({newMetrics:r,oldMetrics:n})}))}},{key:"render",value:function(){var e=this,t=this.state.selectedType,a="tcp"===this.props.detail.protocol?this.tcpMetrics:this.metrics,r=a.find((function(e){return e.type===t}));return p.default.createElement(g.Columns,null,p.default.createElement(g.Column,{className:"is-narrow"},p.default.createElement("ul",{className:_.default.leftPane},a.map((function(a){return p.default.createElement("li",{key:a.type,className:(0,y.default)((0,l.default)({},_.default.selected,a.type===t)),"data-type":a.type,onClick:e.handleTypeChange},p.default.createElement(b.default,(0,o.default)({},a,{whiteMode:a.type===t})))})))),p.default.createElement(g.Column,null,r&&p.default.createElement(O.default,r)))}},{key:"store",get:function(){return this.props.store}},{key:"metrics",get:function(){var e=this.props.detail;if(!e)return[];var a=this.state,r=a.newMetrics,n=a.oldMetrics,o=[(0,h.default)(r,"request_count[0].datapoints",[]),(0,h.default)(n,"request_count[0].datapoints",[])],l=[(0,h.default)(r,"request_error_count[0].datapoints",[]),(0,h.default)(n,"request_error_count[0].datapoints",[])],u=[o[0].map((function(e,t){return(0,E.getSuccessRate)(e,l[0][t])})),o[1].map((function(e,t){return(0,E.getSuccessRate)(e,l[1][t])}))],i=[(0,h.default)(r,"request_duration_millis[0].datapoints",[]).map((function(e){var t=(0,c.default)(e,2),a=t[0],r=t[1];return[a,parseFloat(r)/1e3]})),(0,h.default)(n,"request_duration_millis[0].datapoints",[]).map((function(e){var t=(0,c.default)(e,2),a=t[0],r=t[1];return[a,parseFloat(r)/1e3]}))];return[{type:"traffic-in",title:t("TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:o,unit:"RPS",tip:t("TRAFFIC_IN_LAST_FIVE_MINUTES")},{type:"request_success_rate",title:t("SUCCESSFUL_REQUEST_RATE"),legendData:[e.newVersion,e.oldVersion],data:u,unit:"%"},{type:"request_duration",title:t("REQUEST_LATENCY"),legendData:[e.newVersion,e.oldVersion],data:i,unit:"ms"}]}},{key:"tcpMetrics",get:function(){var e=this.props.detail;if(!e)return[];var a=this.state,r=a.newMetrics,n=a.oldMetrics,o=[(0,h.default)(r,"tcp_received[0].datapoints",[]),(0,h.default)(n,"tcp_received[0].datapoints",[])],l=[(0,h.default)(r,"tcp_sent[0].datapoints",[]),(0,h.default)(n,"tcp_sent[0].datapoints",[])];return[{type:"traffic-in",title:t("TCP_INBOUND_TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:o,unit:"B/s",icon:"next"},{type:"traffic-out",title:t("TCP_OUTBOUND_TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:l,unit:"B/s",icon:"previous"}]}}]),r}(p.default.Component);a.default=R,R.propTypes={detail:v.default.object,store:v.default.object}},3332:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(0)),f=n(r(1)),d=n(r(16)),p=r(25),m=r(735),h=r(725),v=n(r(1166));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).getSeriesData=function(){var t=e.props,a=t.data,r=t.legendData,n=t.whiteMode,o=a[0]?(0,d.default)(a[0],"[".concat(a[0].length-1,"].[1]"),NaN):NaN,l=a[1]?(0,d.default)(a[1],"[".concat(a[1].length-1,"].[1]"),NaN):NaN;return[{name:r[0],itemStyle:{fill:n?"#ffffff":"#329dce"},value:Number(o)},{name:r[1],itemStyle:{fill:n?"#6fbadc":"#c7deef"},value:Number(l)}]},e}return(0,l.default)(r,[{key:"renderTip",value:function(){var e=this.props,t=e.tip,a=e.whiteMode;return s.default.createElement(p.Tooltip,{content:t},s.default.createElement(p.Icon,{name:"information",className:v.default.tip,type:a?"light":"dark"}))}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.tip,n=e.data,o=e.unit,l=n[0]?(0,d.default)(n[0],"[".concat(n[0].length-1,"].[1]"),NaN):NaN,c=n[1]?(0,d.default)(n[1],"[".concat(n[1].length-1,"].[1]"),NaN):NaN;return s.default.createElement("div",{className:v.default.chart},s.default.createElement("div",{className:v.default.circle},s.default.createElement(m.PieChart,{width:40,height:40,data:this.getSeriesData()})),s.default.createElement("div",{className:v.default.chartDetail},s.default.createElement("div",{className:v.default.title},a," ",r&&this.renderTip()),s.default.createElement("div",null,s.default.createElement("span",{className:v.default.tag},isNaN(l)?t("NO_DATA_SCAP"):"".concat((0,h.getSuitableValue)(l,o)," ").concat(o)),s.default.createElement("span",{className:v.default.tag},isNaN(c)?t("NO_DATA_SCAP"):"".concat((0,h.getSuitableValue)(c,o)," ").concat(o)))))}}]),r}(s.default.Component);a.default=g,g.propTypes={title:f.default.string,unit:f.default.string,data:f.default.array,legendData:f.default.array,whiteMode:f.default.bool},g.defaultProps={title:"",data:[],legendData:[],whiteMode:!1}},3333:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(21)),o=r(a(56)),l=r(a(12)),c=r(a(13)),u=r(a(19)),i=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(1)),p=a(725),m=a(735),h=r(a(1166));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,u.default)(a,e);var t=y(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.legendData,r=(0,o.default)(e,["data","legendData"]),l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({width:"100%",legend:a,data:t.map((function(e){return{values:e}})),areaColors:["#329dce","#c7deef"]},r);return f.default.createElement("div",{className:h.default.chart},f.default.createElement(m.SimpleArea,(0,p.getAreaChartOps)(l)))}}]),a}(f.default.Component);t.default=g,g.propTypes={title:d.default.string,unit:d.default.string,data:d.default.array,legendData:d.default.array},g.defaultProps={title:"",data:[],legendData:[]}},3334:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(71)),o=r(a(56)),l=r(a(12)),c=r(a(13)),u=r(a(19)),i=r(a(20)),s=r(a(18)),f=r(a(0)),d=r(a(1)),p=r(a(1011)),m=r(a(3335));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,u.default)(a,e);var t=h(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.module,a=(0,o.default)(e,["module"]);return f.default.createElement(p.default,(0,n.default)({title:"EDIT_GRAYSCALE_RELEASE_JOB",icon:"components",module:t,forms:this.forms},a))}},{key:"forms",get:function(){return m.default}}]),a}(f.default.Component);t.default=v,v.propTypes={module:d.default.string},v.defaultProps={module:"grayreleases"}},3335:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(3336)),o=r(a(1492)),l=[{icon:"appcenter",name:"grayReleaseComponent",title:"NEW_VERSION_SETTINGS",component:n.default},{icon:"appcenter",name:"grayReleaseStrategy",title:"STRATEGY_SETTINGS",component:o.default}];t.default=l},3336:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(16));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var d=function(e){(0,c.default)(r,e);var a=f(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).versionValidator=function(a,r,n){if(!r)return n();if(r===(0,s.default)(e.formTemplate,'metadata.labels["version"]',""))return n();var o=(0,s.default)(e.formTemplate,"metadata.labels.app",""),l="".concat(o,"-").concat(r),c=e.workloadKind;e.workloadStore.checkName({name:l,namespace:e.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("".concat(t(c)," ").concat(l," ").concat(t("exists"),", ").concat(t("version number is invalid"))),field:a.field});n()}))},e}return(0,l.default)(r,[{key:"templatePrefix",get:function(){return"workload"}},{key:"isEdit",get:function(){return!0}}]),r}(n(r(1490)).default);a.default=d},3337:function(e,t,a){e.exports={modal:"_1YO6qAa4o5CIAXihai2gp7",header:"_2vVO-uv8lJHWqrVv11v0KR",body:"_2vJZEtSz_f9o_ieM2tvSDQ",title:"_31-lgqfez3yBbVlFo_tUcz",text:"_89vaF9RK4xiC6CTS8AMv7",wrapper:"_3rzjtTdrtDtIU3oXBYyX6A",loading:"lwBciOx7X_Aiezt5FYLpb",sectionTitle:"_3k9GdhtEu1-2BO5qFF2Mb0",matchWrapper:"_1pNGhihrUvVdQ5sBH7TTmb",matchArrow:"_3ruGexdrbaeOPbmO9YdgNM",matchVersion:"Q1EqkLXYIAMTFlJDYgV6b",governor:"_2MPS2QWyT6zjz7d2WTFE8Y",barWrapper:"_2NHJds2bdFgZ_CD9y4Ysvd",bar:"_1V8kzO-zzW71tEbOPLFeU3",mirrorBar:"pK-EmPX1F-LcM21gsSMZP",mirror:"_2r0HBgs_ICewriI-7OZBi8",mirrorIcon:"_25PLS8q5MC3mcxhp2UWRCA",revertMirrorIcon:"LxkxCr-ExgyPESSixjvSr",monitor:"_1DCVu0WUnzdaAxKRZ3yPPS"}},3338:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(71)),l=n(r(136)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(16)),p=n(r(0)),m=n(r(651)),h=r(25),v=r(305),y=r(58),g=n(r(3339)),E=n(r(1167));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=function(e){(0,i.default)(r,e);var a=b(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleClick=function(){var e=t.props,a=e.data;(0,e.onClick)(a)},t.state={newMetrics:{},oldMetrics:{},newHealth:{},oldHealth:{}},t}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){this.unmount=!0}},{key:"componentDidUpdate",value:function(e){(0,m.default)(this.props.data,e.data)||this.getData(this.props)}},{key:"getData",value:function(e){var t=this,a=(e||this.props).data;this.store.fetchMetrics(a).then((function(e){var a=(0,l.default)(e,2),r=a[0],n=a[1];t.unmount||t.setState({newMetrics:r,oldMetrics:n})})),this.store.fetchHealth(a).then((function(e){var a=(0,l.default)(e,2),r=a[0],n=a[1];t.unmount||t.setState({newHealth:r,oldHealth:n})}))}},{key:"render",value:function(){var e=this.props.data,a=this.state,r=a.newHealth,n=a.oldHealth,l=y.GRAY_RELEASE_CATEGORIES.find((function(t){return t.type===e.type}))||{},c="tcp"===e.protocol?this.tcpMetrics:this.metrics;return p.default.createElement("div",{className:E.default.item,onClick:this.handleClick},p.default.createElement("div",{className:E.default.left},p.default.createElement("div",{className:E.default.icon},p.default.createElement("img",{src:(0,d.default)(e,'annotations["app.kubernetes.io/icon"]',"/assets/default-app.svg"),alt:""}),p.default.createElement("div",{className:E.default.iconExtra},p.default.createElement(h.Icon,{name:l.icon,size:24,type:"light"}))),p.default.createElement("div",{className:E.default.title},p.default.createElement("div",{className:"h5"},e.name),p.default.createElement("p",null,p.default.createElement("span",null,t("APP")),":"," ",(0,d.default)(e,'labels["app.kubernetes.io/name"]')),p.default.createElement("p",null,p.default.createElement("span",null,t("RELEASE_MODE")),": ",t("".concat(l.title,"_LOW"))),p.default.createElement("p",null,p.default.createElement("span",null,t("SERVICE")),": ",e.hosts))),p.default.createElement("div",{className:E.default.right},p.default.createElement("div",{className:E.default.versions},p.default.createElement("p",null,p.default.createElement("strong",null,t("VERSIONS"))),p.default.createElement("p",{className:E.default.tag},e.newVersion," ",p.default.createElement("span",null,"(",t("REPLICA_COUNT_LOW"),":"," ",(0,d.default)(r,"workloadStatus.available")||(0,d.default)(r,"workloadStatus.availableReplicas"),"/",(0,d.default)(r,"workloadStatus.replicas")||(0,d.default)(r,"workloadStatus.desiredReplicas"),")")),p.default.createElement("p",{className:E.default.tag},e.oldVersion," ",p.default.createElement("span",null,"(",t("REPLICA_COUNT_LOW"),":"," ",(0,d.default)(n,"workloadStatus.available")||(0,d.default)(n,"workloadStatus.availableReplicas"),"/",(0,d.default)(n,"workloadStatus.replicas")||(0,d.default)(n,"workloadStatus.desiredReplicas"),")"))),c.map((function(e){return p.default.createElement(g.default,(0,o.default)({key:e.type},e))}))))}},{key:"store",get:function(){return this.props.store}},{key:"metrics",get:function(){var e=this.props.data;if(!e)return[];var a=this.state,r=a.newMetrics,n=a.oldMetrics,o=[(0,v.getMetricData)((0,d.default)(r,"request_count[0].datapoints",[]),0),(0,v.getMetricData)((0,d.default)(n,"request_count[0].datapoints",[]),0)],l=[(0,v.getMetricData)((0,d.default)(r,"request_error_count[0].datapoints",[]),0),(0,v.getMetricData)((0,d.default)(n,"request_error_count[0].datapoints",[]),0)],c=[o[0]>0?Number((100*(o[0]-l[0])/o[0]).toFixed(2)):NaN,o[1]>0?Number((100*(o[1]-l[1])/o[1]).toFixed(2)):NaN],u=[(0,v.getMetricData)((0,d.default)(r,"request_duration_millis[0].datapoints",[]),NaN),(0,v.getMetricData)((0,d.default)(n,"request_duration_millis[0].datapoints",[]),NaN)];return[{type:"traffic",name:t("TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:o,unit:"RPS",icon:"changing-over",tip:t("TRAFFIC_IN_LAST_FIVE_MINUTES")},{type:"request_success_rate",name:t("SUCCESSFUL_REQUEST_RATE"),legendData:[e.newVersion,e.oldVersion],data:c,icon:"check",unit:"%"},{type:"request_duration",name:t("REQUEST_LATENCY"),legendData:[e.newVersion,e.oldVersion],data:u,icon:"timed-task",unit:"ms"}]}},{key:"tcpMetrics",get:function(){var e=this.props.data;if(!e)return[];var a=this.state,r=a.newMetrics,n=a.oldMetrics,o=[(0,v.getMetricData)((0,d.default)(r,"tcp_received[0].datapoints",[]),0),(0,v.getMetricData)((0,d.default)(n,"tcp_received[0].datapoints",[]),0)],l=[(0,v.getMetricData)((0,d.default)(r,"tcp_sent[0].datapoints",[]),0),(0,v.getMetricData)((0,d.default)(n,"tcp_sent[0].datapoints",[]),0)];return[{type:"traffic-in",name:t("TCP_INBOUND_TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:o,unit:"B/s",icon:"next"},{type:"traffic-out",name:t("TCP_OUTBOUND_TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:l,unit:"B/s",icon:"previous"}]}}]),r}(p.default.Component);a.default=O},3339:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(0)),f=n(r(1)),d=r(25),p=r(735),m=n(r(1167));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=h(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).getSeriesData=function(){var t=e.props,a=t.data,r=t.legendData;return[{name:r[0],itemStyle:{fill:"#329dce"},value:a[0]||0},{name:r[1],itemStyle:{fill:"#c7deef"},value:a[1]||0}]},e}return(0,l.default)(r,[{key:"renderTip",value:function(){var e=this.props.tip;return s.default.createElement(d.Tooltip,{content:e},s.default.createElement(d.Icon,{name:"information",className:m.default.tip}))}},{key:"render",value:function(){var e=this.props,a=e.name,r=e.icon,n=e.data,o=e.unit,l=e.tip;return s.default.createElement("div",{className:m.default.chart},s.default.createElement("div",{className:m.default.circle},s.default.createElement(d.Icon,{name:r,size:20}),s.default.createElement(p.PieChart,{width:60,height:60,data:this.getSeriesData()})),s.default.createElement("div",{className:m.default.chartDetail},s.default.createElement("div",null,s.default.createElement("strong",null,a)," ",l&&this.renderTip()),s.default.createElement("p",{className:m.default.tag},isNaN(n[0])?t("NO_DATA_SCAP"):"".concat(n[0]," ").concat(o)),s.default.createElement("p",{className:m.default.tag},isNaN(n[1])?t("NO_DATA_SCAP"):"".concat(n[1]," ").concat(o))))}}]),r}(s.default.Component);a.default=v,v.propTypes={name:f.default.string,tip:f.default.string,unit:f.default.string,data:f.default.array,legendData:f.default.array},v.defaultProps={name:"",data:[],legendData:[]}},3340:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1152)),o=r(a(1410)),l=r(a(1423)),c=r(a(1424)),u=r(a(1425)),i=r(a(1427)),s=r(a(1437)),f=r(a(1442)),d=r(a(1428)),p=r(a(1431)),m=r(a(1444)),h=r(a(1447)),v=r(a(1433)),y=r(a(1434)),g=r(a(1435)),E=r(a(3341)),b=r(a(3386)),O=r(a(3394)),_=r(a(3396)),S=r(a(1448));t.default=function(e){return[{path:"".concat(e,"/deployments/:name"),component:o.default},{path:"".concat(e,"/statefulsets/:name"),component:l.default},{path:"".concat(e,"/daemonsets/:name"),component:c.default},{path:"".concat(e,"/jobs/:name"),component:u.default},{path:"".concat(e,"/cronjobs/:name"),component:i.default},{path:"".concat(e,"/pods/:podName/containers/:containerName"),component:f.default},{path:"".concat(e,"/pods/:podName"),component:s.default},{path:"".concat(e,"/services/:name"),component:d.default},{path:"".concat(e,"/ingresses/:name"),component:p.default},{path:"".concat(e,"/volumes/:name"),component:m.default},{path:"".concat(e,"/volume-snapshots/:name"),component:h.default},{path:"".concat(e,"/secrets/:name"),component:v.default},{path:"".concat(e,"/configmaps/:name"),component:y.default},{path:"".concat(e,"/serviceAccounts/:name"),component:g.default},{path:"".concat(e,"/applications/composing/:name"),component:E.default},{path:"".concat(e,"/applications/template/:id"),component:b.default},{path:"".concat(e,"/roles/:name"),component:O.default},{path:"".concat(e,"/s2ibuilders/:name"),component:_.default},{path:"".concat(e,"/gateways/:gatewayName"),component:n.default},{path:["".concat(e,"/alert-rules/builtin/:name"),"".concat(e,"/alert-rules/:name")],component:S.default}]}},3341:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(21)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(5),h=r(70),v=n(r(16)),y=n(r(32)),g=r(25),E=r(37),b=r(635),O=n(r(865)),_=n(r(729)),S=n(r(744)),R=n(r(3342));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var w=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,b.trigger)(o=function(e){(0,s.default)(r,e);var a=T(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).store=new O.default,e.fetchData=function(){var t=e.props.match.params;e.store.fetchDetail(t)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,m.toJS)(e.store.detail),success:e.fetchData})}},{key:"addComponent",icon:"add",text:t("ADD_SERVICE"),action:"edit",onClick:function(){return e.trigger("crd.app.addservice",k({success:e.fetchComponents,detail:(0,m.toJS)(e.store.detail)},e.props.match.params))}},{key:"addRoute",icon:"add",text:t("ADD_ROUTE"),action:"edit",onClick:function(){return e.trigger("crd.app.addroute",k({success:e.fetchData,detail:(0,m.toJS)(e.store.detail)},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,o=r.namespace;if(!(0,y.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:o},{name:t("STATUS"),value:p.default.createElement(_.default,{name:t(a.status),type:a.status})},{name:t("VERSION"),value:a.version},{name:t("CREATION_TIME_TCAP"),value:(0,E.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,E.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator},{name:t("APPLICATION_GOVERNANCE_SCAP"),value:"true"===(0,v.default)(a,'annotations["servicemesh.kubesphere.io/enabled"]')?t("ON"):t("OFF")}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(g.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("APP_PL"),url:this.listUrl}]};return p.default.createElement(S.default,(0,l.default)({stores:e},a,{routes:R.default}))}},{key:"module",get:function(){return"applications"}},{key:"name",get:function(){return"APP"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module,"/composing")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(p.default.Component))||o)||o)||o;a.default=w},3342:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),o=r(a(3343)),l=r(a(3350)),c=r(a(3373)),u=r(a(3375)),i="/:workspace/clusters/:cluster/projects/:namespace/applications/composing/:name",s=[{path:"".concat(i,"/components"),title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(i,"/traffic"),title:"TRAFFIC_MONITORING",component:l.default,clusterModule:"servicemesh",exact:!0},{path:"".concat(i,"/grayrelease"),title:"GRAYSCALE_RELEASE",component:c.default,clusterModule:"servicemesh",exact:!0},{path:"".concat(i,"/tracing"),title:"TRACING",component:u.default,clusterModule:"servicemesh",exact:!0},(0,n.getIndexRoute)({path:i,to:"".concat(i,"/components"),exact:!0})];t.default=s},3343:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(a(12)),l=r(a(13)),c=r(a(19)),u=r(a(20)),i=r(a(18)),s=r(a(0)),f=a(70),d=r(a(1495)),p=r(a(1150)),m=r(a(1497)),h=r(a(1498)),v=r(a(3349));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var g=(0,f.inject)("detailStore")(n=(0,f.observer)(n=function(e){(0,c.default)(a,e);var t=y(a);function a(e){var r;return(0,o.default)(this,a),(r=t.call(this,e)).store=e.detailStore,r.module=e.module,r}return(0,l.default)(a,[{key:"render",value:function(){var e=this.store.detail,t=e.cluster,a=e.namespace,r=e.selector;return s.default.createElement("div",{className:v.default.main},s.default.createElement(m.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),s.default.createElement(d.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),s.default.createElement(p.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),s.default.createElement(h.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r)}}]),a}(s.default.Component))||n)||n;t.default=g},3344:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(16)),f=n(r(0)),d=n(r(1)),p=r(276),m=n(r(3)),h=r(25),v=n(r(275)),y=n(r(3345)),g=r(37),E=n(r(1496));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var O=function(e){(0,c.default)(r,e);var a=b(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.detail,n=e.prefix;if(!r)return null;var o=(0,s.default)(r,"monitor.name"),l=(0,g.getDisplayName)(r);return f.default.createElement("div",{className:(0,m.default)(E.default.item,a)},f.default.createElement(v.default,{icon:"network-router",title:f.default.createElement(f.default.Fragment,null,f.default.createElement(p.Link,{to:"".concat(n,"/services/").concat(r.name)},l),o&&f.default.createElement(h.Tooltip,{content:t("MONITORING_EXPORTER_VALUE",{value:o})},f.default.createElement(h.Icon,{className:"margin-l8",name:"monitor",size:20}))),description:t(r.type)}),f.default.createElement(y.default,{data:r}))}}]),r}(f.default.Component);a.default=O,O.propTypes={className:d.default.string,prefix:d.default.string,detail:d.default.object},O.defaultProps={prefix:"",detail:{}}},3345:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.data;if("ClusterIP"===a.specType)return o.default.createElement(l.default,{description:t("VIRTUAL_IP_ADDRESS"),title:a.clusterIP});if("NodePort"===a.specType)return o.default.createElement(l.default,{description:t("PORT_PL"),title:a.ports.filter((function(e){return e.nodePort})).map((function(e){return"".concat(e.port,":").concat(e.nodePort,"/").concat(e.protocol)})).join("; ")});if("LoadBalancer"===a.specType)return o.default.createElement(l.default,{description:a.loadBalancerIngress.length>1?t("LOAD_BALANCERS_SCAP"):t("LOAD_BALANCER_SCAP"),title:a.loadBalancerIngress.join("; ")});return o.default.createElement(l.default,{description:a.specType,title:a.externalName})};var o=n(r(0)),l=n(r(275))},3346:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(32)),l=n(r(0)),c=n(r(1)),u=r(276),i=r(25),s=r(37),f=n(r(3347)),d=function(e){var a=e.detail,r=e.gateway,n=e.prefix,c={};if(r&&r.ports&&"NodePort"===r.type&&r.ports.forEach((function(e){"http"===e.name&&80!==e.nodePort&&(c.http=e.nodePort),"https"===e.name&&443!==e.nodePort&&(c.https=e.nodePort)})),(0,o.default)(a.rules))return null;var d=a.tls||[],p=(0,s.getDisplayName)(a);return l.default.createElement("div",{className:f.default.card},l.default.createElement("div",{className:f.default.content},l.default.createElement(i.Icon,{name:"loadbalancer",size:40}),l.default.createElement("div",{className:f.default.text},l.default.createElement(u.Link,{to:"".concat(n,"/ingresses/").concat(a.name)},p),l.default.createElement("p",null,t("DOMAIN_NAME_VALUE",{value:a.rules.map((function(e){return e.host})).join(", ")})))),l.default.createElement("ul",{className:f.default.rules},a.rules.map((function(e){var a=d.hosts&&d.hosts.includes(e.host)?"https":"http",r="".concat(a,"://").concat(e.host);return c[a]&&(r="".concat(r,":").concat(c[a])),e.http.paths.map((function(a){return l.default.createElement("li",{key:"".concat(e.host).concat(a.path)},l.default.createElement("span",null,"URL:  "),l.default.createElement("span",null,l.default.createElement("strong",null,r,a.path)),l.default.createElement("a",{href:"".concat(r).concat(a.path),target:"_blank",rel:"noreferrer noopener"},l.default.createElement(i.Button,{className:f.default.access},t("ACCESS_SERVICE"))))}))}))))};d.propTypes={rule:c.default.object};var p=d;a.default=p},3347:function(e,t,a){e.exports={card:"_1cG8fQKm3-Tkqa6zrOyoAt",content:"_2K1EVvQAkTRqBliWP9y_UW",text:"_1y1LWjMboGREreksS8-Bre",rules:"_2flmPvDu28-zUq_VX5ZqEy",access:"yZPxinr4XZvaHAzm7Wr-V",empty:"NmU26TG_b_FLHQfw9ynFW"}},3348:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(71)),l=n(r(16)),c=n(r(0)),u=n(r(1)),i=r(276),s=n(r(275)),f=n(r(1499)),d=function(e){var a=e.volume,r=e.prefix,n="".concat(t("Storage Classs"),": ").concat((0,l.default)(a,"storageClassName","-")),u=[{title:(0,l.default)(a,"capacity","-"),description:t("CAPACITY")},{title:(0,l.default)(a,"accessMode","-"),description:t("ACCESS_MODE_TCAP")}];return c.default.createElement("div",{className:f.default.item},c.default.createElement(s.default,{icon:"storage",title:c.default.createElement(i.Link,{to:"".concat(r,"/volumes/").concat(a.name)},a.name),description:n}),u.map((function(e,t){return c.default.createElement(s.default,(0,o.default)({key:t},e))})))};d.propTypes={container:u.default.object};var p=d;a.default=p},3349:function(e,t,a){e.exports={ports:"_1pZVLp9qAjWNtg0beO2Nnr",card:"_21H0IPfRMqfBUSQXZqjFaQ",content:"_1g_x-Rf6m671ilDIqQ7dij",title:"_3wM7e49lglrGDX6Nvyt8Fb",path:"_1AKuvdVsWBs2vcilYDQefn",access:"_2TU8aTcZX_e1mhZBihzVpA"}},3350:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(56)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(32)),p=n(r(0)),m=r(70),h=r(25),v=n(r(751)),y=n(r(891)),g=r(768),E=n(r(1500)),b=n(r(3372));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=(0,m.inject)("detailStore")(o=(0,m.observer)(o=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).handleRefresh=function(){n.getData()},n.handleAutoFetch=function(){var e=n.state.autoFetch;n.setState({autoFetch:!e},(function(){n.state.autoFetch?n.interval=setInterval((function(){n.getData()}),1e4):n.interval&&clearInterval(n.interval)}))},n.handleLookbackChange=function(e){var t=e.step,a=e.times,r=(0,l.default)(e,["step","times"]),o=(0,g.getTimeRange)({step:(0,g.getMinuteValue)(t),times:a}),c=o.start,u=o.end,i=r.start||c,s=r.end||u,f=Math.floor(s-i);n.setState({duration:f},(function(){n.getData()}))},n.operations=function(){var e=n.state.autoFetch;return p.default.createElement("div",{className:b.default.operations},p.default.createElement(y.default,{className:b.default.timeSelect,onChange:n.handleLookbackChange,showStep:!1,dark:!0,arrowIcon:"chevron-down",step:"1m",times:1}),p.default.createElement(h.Button,{type:"flat",icon:e?"pause":"start",onClick:n.handleAutoFetch}),p.default.createElement(h.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh}))},n.renderHeader=function(){return p.default.createElement("div",{className:b.default.cardHeader},n.operations(),t("TRAFFIC_MONITORING"))},n.state={isGraphLoading:!0,duration:60,autoFetch:!1},n.store=e.detailStore,n.module=e.module,n}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){this.unmount=!0,this.interval&&clearInterval(this.interval)}},{key:"getData",value:function(){var e=this,t=this.props.match.params,a=t.cluster,r=t.namespace,n=t.name,o=this.state.duration;this.setState({isGraphLoading:!0}),this.store.fetchGraph({cluster:a,namespace:r,app:n,duration:o}).then((function(){e.unmount||e.setState({isGraphLoading:!1})}))}},{key:"renderContent",value:function(){var e=this.state.isGraphLoading,a=this.store.graph,r=a.data,n=a.health;return(0,d.default)(r)||(0,d.default)(r.nodes)?e?p.default.createElement(h.Loading,{className:b.default.loading}):p.default.createElement(v.default,{className:b.default.emptyList,image:"/assets/traffic-management.svg",title:t("NO_DATA"),desc:t("TRAFFIC_MONITORING_UNAVAILABLE_DESC")}):p.default.createElement("div",{className:b.default.main},p.default.createElement(E.default,{className:b.default.graph,data:r,health:n,store:this.store,loading:e,onFetch:this.handleRefresh}))}},{key:"render",value:function(){return p.default.createElement(p.default.Fragment,null,this.renderHeader(),this.renderContent())}}]),r}(p.default.Component))||o)||o;a.default=_},3372:function(e,t,a){e.exports={main:"_2iPG6M7MGzMxbPdbDEWKTS",graph:"_1DNY4Ckxe-2VlpvOswSGWY",tracing:"_1U4YYpaZmy1CDP-SUtxJ2s",cardHeader:"_5WqgHfksXAkqCtNbKg2cp",operations:"_3j3KuCy2m-nw5bx3PSeVbs",timeSelect:"_3cUfdUjfIvXc4idqihXfUw",emptyList:"_1t2nghWnemmp2lgjyfQ4Ql",loading:"_1KcntxCOV8bBEr8KBomL9T"}},3373:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(32)),d=n(r(0)),p=r(276),m=r(25),h=r(5),v=r(70),y=r(37),g=n(r(751)),E=r(1493),b=n(r(3374));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=(0,v.inject)("detailStore")(o=(0,v.observer)(o=function(e){(0,u.default)(r,e);var a=O(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).detailStore=e.detailStore,t.module=e.module,t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.disposer=(0,h.when)((function(){return!(0,f.default)(e.detailStore.detail)}),(function(){return e.getData()}))}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer()}},{key:"getData",value:function(){var e=(0,h.toJS)(this.detailStore.detail).selector,t={namespace:this.namespace,cluster:this.cluster,labelSelector:(0,y.joinSelector)(e)};this.store.fetchList(t).then()}},{key:"renderEmpty",value:function(){return d.default.createElement(g.default,{icon:"istio",title:t("NO_GRAYSCALE_RELEASE_JOB_FOUND"),desc:t("NO_GRAYSCALE_RELEASE_TASK_FOUND_DESC")})}},{key:"renderHeader",value:function(){var e=this.props.match.params,a=e.cluster,r=e.workspace,n=e.namespace;return d.default.createElement("div",{className:b.default.header},d.default.createElement(m.Columns,null,d.default.createElement(m.Column,null,d.default.createElement("p",{className:b.default.headerTip},t("GRAYSCALE_RELEASE_DESC"))),d.default.createElement(m.Column,{className:"is-narrow"},d.default.createElement(p.Link,{to:"/".concat(r,"/clusters/").concat(a,"/projects/").concat(n,"/grayrelease/cates")},this.canCreate&&d.default.createElement(m.Button,{type:"control"},t("CREATE_GRAYSCALE_RELEASE_JOB"))))))}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return globals.app.hasPermission({cluster:t,workspace:a,project:r,module:"grayscale-release",action:"create"})}}]),r}(E.Component))||o)||o;a.default=_},3374:function(e,t,a){e.exports={header:"_1NlihNgeoVDB3R-HjKAgoV",headerTip:"_2ewkr_stwSEswFhRlWo0M8"}},3375:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(56)),c=n(r(21)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(32)),m=n(r(0)),h=r(5),v=r(70),y=r(37),g=r(25),E=n(r(1503)),b=n(r(1505)),O=n(r(891)),_=r(768),S=n(r(748)),R=n(r(3385));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var w=(0,v.inject)("detailStore")(o=(0,v.observer)(o=function(e){(0,s.default)(r,e);var a=T(r);function r(e){var n;(0,u.default)(this,r),(n=a.call(this,e)).fetchTracing=function(){var e=(0,h.toJS)(n.detailStore.detail),t=k({cluster:e.cluster,namespace:e.namespace,service:n.state.serviceName},n.state.query);n.detailStore.fetchTracing(t)},n.showDetailModal=function(e){n.setState({showDetailModal:!0,selectItem:e})},n.hideDetailModal=function(){n.setState({showDetailModal:!1,selectItem:{}})},n.handleServiceChange=function(e){n.setState({serviceName:e},(function(){n.fetchTracing()}))},n.handleRefresh=function(){n.fetchTracing()},n.handleLookbackChange=function(e){var t=e.step,a=e.times,r=(0,l.default)(e,["step","times"]),o=(0,_.getTimeRange)({step:(0,_.getMinuteValue)(t),times:a}),c=o.start,u=o.end,i=1e3*(r.start||c),s=1e3*(r.end||u);n.setState((function(e){return{query:k(k({},e.query),{},{start:i,end:s})}}),(function(){return n.fetchTracing()}))},n.handleLimitChange=function(e){n.setState((function(t){return{query:k(k({},t.query),{},{limit:e})}}),(function(){return n.fetchTracing()}))},n.serviceRenderer=function(e){return m.default.createElement("span",null,t("SERVICE_VALUE",{value:e.label}))},n.detailStore=e.detailStore,n.serviceStore=new S.default;var o=(0,_.getTimeRange)({step:(0,_.getMinuteValue)("5m"),times:60}),c=o.start,i=o.end;return n.state={showDetailModal:!1,selectItem:{},serviceName:"",query:{limit:5,start:1e3*c,end:1e3*i}},n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.disposer=(0,h.when)((function(){return!(0,p.default)(e.detailStore.detail)}),(function(){return e.getData()}))}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer()}},{key:"getData",value:function(){var e=this,t=(0,h.toJS)(this.detailStore.detail),a=t.selector,r=t.cluster,n=t.namespace;if(a){var o={cluster:r,namespace:n,labelSelector:(0,y.joinSelector)(a)};this.serviceStore.fetchListByK8s(o).then((function(){var t=(0,h.toJS)(e.serviceStore.list.data);t.length>0&&e.setState({serviceName:t[0].name},(function(){return e.fetchTracing()}))}))}}},{key:"renderOperations",value:function(){var e=this.state.query;return m.default.createElement("div",{className:R.default.operations},m.default.createElement(g.Select,{options:this.services,value:this.state.serviceName,prefixIcon:m.default.createElement(g.Icon,{name:"appcenter"}),onChange:this.handleServiceChange,valueRenderer:this.serviceRenderer}),m.default.createElement(O.default,{className:R.default.timeSelect,onChange:this.handleLookbackChange,showStep:!1,dark:!0,arrowIcon:"chevron-down"}),m.default.createElement(g.Select,{value:e.limit,options:this.limitOptions,onChange:this.handleLimitChange}),m.default.createElement(g.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh}))}},{key:"renderTracing",value:function(){var e=this.detailStore,t=e.tracing,a=e.isTracingLoading,r=this.serviceStore.list,n=r.isLoading,o=r.data;return!n&&(0,p.default)(o)?null:m.default.createElement(E.default,{loading:a,data:t.data,operations:this.renderOperations(),onItemClick:this.showDetailModal})}},{key:"render",value:function(){return m.default.createElement("div",null,this.renderTracing(),m.default.createElement(b.default,{detail:this.state.selectItem,visible:this.state.showDetailModal,onCancel:this.hideDetailModal}))}},{key:"limitOptions",get:function(){return[{label:t("LAST_NUM_RECORDS",{num:5}),value:5},{label:t("LAST_NUM_RECORDS",{num:10}),value:10},{label:t("LAST_NUM_RECORDS",{num:20}),value:20},{label:t("LAST_NUM_RECORDS",{num:50}),value:50}]}},{key:"services",get:function(){return this.serviceStore.list.data.map((function(e){return{label:e.name,value:e.name,type:e.type}}))}}]),r}(m.default.Component))||o)||o;a.default=w},3385:function(e,t,a){e.exports={operations:"_-15riN_1mHwid5aQz6xwZ",timeSelect:"_1jv6axOPYBWD4xXsZgGZBB"}},3386:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(21)),u=n(r(12)),i=n(r(13)),s=n(r(19)),f=n(r(20)),d=n(r(18)),p=n(r(0)),m=r(5),h=r(70),v=n(r(16)),y=n(r(32)),g=r(25),E=r(37),b=r(635),O=n(r(960)),_=n(r(293)),S=n(r(729)),R=n(r(744)),C=n(r(3387)),k=n(r(3393));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D=(0,h.inject)("rootStore","projectStore")(o=(0,h.observer)(o=(0,b.trigger)(o=function(e){(0,s.default)(r,e);var a=P(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).store=new O.default,e.fetchData=function(){var t=e.props.match.params;e.store.fetchDetail(t)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("openpitrix.app.edit",{type:e.name,detail:(0,m.toJS)(e.store.detail),success:e.fetchData})}},{key:"editTemplate",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("openpitrix.app.template.edit",w(w({},e.props.match.params),{},{detail:(0,m.toJS)(e.store.detail),success:e.fetchData}))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,o=r.namespace;if(!(0,y.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:o},{name:t("STATUS"),value:e.renderStatus()},{name:t("APP"),value:(0,v.default)(a,"app.name","-")},{name:t("VERSION"),value:(0,v.default)(a,"version.name","-")},{name:t("CREATION_TIME_TCAP"),value:(0,E.getLocalTime)((0,v.default)(a,"create_time")).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,E.getLocalTime)((0,v.default)(a,"status_time")).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.owner}]},e.renderStatus=function(){var a=(0,m.toJS)(e.store.detail),r=a.status;return a.additional_info?p.default.createElement(g.Tooltip,{content:a.additional_info},p.default.createElement(S.default,{name:t(r),type:r})):p.default.createElement(S.default,{name:t(r),type:r})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=(0,m.toJS)(this.store.detail),a={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(g.Loading,{className:"ks-page-loading"});var r={icon:p.default.createElement("label",{className:k.default.icon},p.default.createElement(_.default,{iconLetter:(0,v.default)(e,"app.name"),src:(0,v.default)(e,"app.icon"),alt:""})),module:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("APP_PL"),url:this.listUrl}]};return p.default.createElement(R.default,(0,l.default)({stores:a},r,{routes:C.default}))}},{key:"module",get:function(){return"applications"}},{key:"name",get:function(){return"APP"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return"/".concat(a,"/clusters/").concat(t,"/projects/").concat(r,"/").concat(this.module,"/template")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(p.default.Component))||o)||o)||o;a.default=D},3387:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),o=r(a(3388)),l=r(a(3389)),c=r(a(3391)),u="/:workspace/clusters/:cluster/projects/:namespace/applications/template/:id",i=[{path:"".concat(u,"/resource-status"),name:"resource-status",title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(u,"/template"),title:"APP_TEMPLATE",component:l.default,exact:!0},{path:"".concat(u,"/config"),title:"APP_SETTINGS",component:c.default,exact:!0},(0,n.getIndexRoute)({path:u,to:"".concat(u,"/resource-status"),exact:!0})];t.default=i},3388:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(a(12)),l=r(a(13)),c=r(a(19)),u=r(a(20)),i=r(a(18)),s=r(a(0)),f=a(70),d=r(a(1495)),p=r(a(1150)),m=r(a(1497)),h=r(a(1498));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var y=(0,f.inject)("detailStore")(n=(0,f.observer)(n=function(e){(0,c.default)(a,e);var t=v(a);function a(e){var r;return(0,o.default)(this,a),(r=t.call(this,e)).store=e.detailStore,r.module=e.module,r}return(0,l.default)(a,[{key:"render",value:function(){var e=this.store.detail,t=e.cluster,a=e.namespace,r=e.selector;return s.default.createElement(s.default.Fragment,null,s.default.createElement(m.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),s.default.createElement(d.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),s.default.createElement(p.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),s.default.createElement(h.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r)}}]),a}(s.default.Component))||n)||n;t.default=y},3389:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(32)),p=r(5),m=r(70),h=r(25),v=n(r(814)),y=n(r(832)),g=n(r(741)),E=n(r(953)),b=n(r(1320)),O=n(r(3390));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=h.Tabs.TabPanel,R=(0,m.inject)("detailStore")(o=(0,m.observer)(o=function(e){(0,u.default)(r,e);var a=_(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleTabChange=function(e){t.setState({tab:e})},t.state={tab:"readme"},t.store=e.detailStore,t.appVersionStore=new v.default,t.appFileStore=new y.default,(0,p.when)((function(){return!(0,d.default)(t.store.detail)}),(function(){return t.getData()})),t}return(0,c.default)(r,[{key:"getData",value:function(){var e=(0,p.toJS)(this.store).detail,t=e.app_id,a=e.version_id;this.appVersionStore.fetchList({app_id:t,status:"active"}),this.appFileStore.fetch({app_id:t,version_id:a})}},{key:"renderReadme",value:function(){var e=this.appFileStore.files;return e["README.md"]||this.appFileStore.isLoading?f.default.createElement(E.default,{source:e["README.md"],className:O.default.markdown}):f.default.createElement("p",null,t("NO_APP_DESC_FOUND"))}},{key:"renderSettings",value:function(){var e=this.appFileStore.files;return f.default.createElement(b.default,{files:e})}},{key:"render",value:function(){var e=this.state.tab;return f.default.createElement(g.default,{title:t("APP_TEMPLATE"),className:O.default.wrapper},f.default.createElement(h.Tabs,{type:"button",activeName:e,onChange:this.handleTabChange},f.default.createElement(S,{label:t("APP_DESCRIPTION"),name:"readme"},this.renderReadme()),f.default.createElement(S,{label:t("CHART_FILES"),name:"settings"},this.renderSettings())))}}]),r}(f.default.Component))||o)||o;a.default=R},3390:function(e,t,a){e.exports={wrapper:"_2pJacSa2ZXD7ds8HDYKw9l"}},3391:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(70),p=n(r(723)),m=n(r(795)),h=n(r(3392));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,d.inject)("rootStore","detailStore")(o=(0,d.observer)(o=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.store,a=e.isLoading,r=e.detail;return f.default.createElement(p.default,{title:t("APP_SETTINGS"),loading:a},f.default.createElement(m.default,{className:h.default.yaml,value:r.env||""}))}},{key:"store",get:function(){return this.props.detailStore}}]),r}(f.default.Component))||o)||o;a.default=y},3392:function(e,t,a){e.exports={yaml:"_2YSMOV4ZrOWlGFo_rsn-eF"}},3393:function(e,t,a){e.exports={icon:"_2hq_evgK9i1gndFgNOU-kf"}},3394:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(12)),u=n(r(13)),i=n(r(19)),s=n(r(20)),f=n(r(18)),d=n(r(0)),p=r(5),m=r(70),h=n(r(32)),v=r(25),y=r(37),g=r(635),E=n(r(747)),b=n(r(744)),O=n(r(3395));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,g.trigger)(o=function(e){(0,i.default)(r,e);var a=_(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).store=new E.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){var a=e.store.detail;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("role.edit",{module:e.module,detail:(0,p.toJS)(e.store.detail),roleTemplates:(0,p.toJS)(e.store.roleTemplates.data),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("role.delete",{detail:a,type:e.name,cluster:e.props.match.params.cluster,namespace:e.props.match.params.namespace,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,o=r.namespace;if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:o},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,y.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.store.fetchRoleTemplates(this.props.match.params)}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("PROJECT_ROLE_PL"),url:this.listUrl}]};return d.default.createElement(b.default,(0,l.default)({stores:e},a,{routes:(0,O.default)(this.props.match.path)}))}},{key:"module",get:function(){return"roles"}},{key:"name",get:function(){return"PROJECT_ROLE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module)}},{key:"showEdit",get:function(){var e=this.props.match.params.name;return!globals.config.presetRoles.includes(e)}}]),r}(d.default.Component))||o)||o)||o;a.default=S},3395:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),o=r(a(965)),l=r(a(966));t.default=function(e){return[{path:"".concat(e,"/authorizations"),title:"PERMISSION_PL",component:o.default,exact:!0},{path:"".concat(e,"/users"),title:"AUTHORIZED_USER_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/authorizations"),exact:!0})]}},3396:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(71)),c=n(r(49)),u=n(r(21)),i=n(r(50)),s=n(r(12)),f=n(r(13)),d=n(r(19)),p=n(r(20)),m=n(r(18)),h=n(r(0)),v=r(5),y=r(70),g=n(r(16)),E=n(r(23)),b=r(25),O=r(37),_=r(635),S=n(r(823)),R=n(r(927)),C=n(r(1149)),k=n(r(744)),T=r(1112),w=n(r(3397));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var A=(0,y.inject)("rootStore")(o=(0,y.observer)(o=(0,_.trigger)(o=function(e){(0,d.default)(r,e);var a=N(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).store=new S.default(e.module),e.resourceStore=new C.default(e.module),e.s2iRunStore=new R.default,e.fetchData=function(){var t=(0,i.default)(c.default.mark((function t(a){var r,n;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchDetail(e.params,a);case 2:return r=t.sent,t.next=5,e.s2iRunStore.fetchRunDetail(D(D({},e.params),{},{runName:(0,g.default)(r,"status.lastRunName","")}));case 5:return n=t.sent,t.next=8,e.s2iRunStore.fetchJobDetail(D(D({},e.params),{},{name:(0,g.default)(n,"_originData.status.kubernetesJobName","")}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleCopy=function(){b.Notify.success({content:t("COPIED_SUCCESSFUL")})},e.getOperations=function(){return[{key:"Run",text:t("RUN"),action:"edit",type:"control",onClick:function(){return e.trigger("imagebuilder.rerun",{detail:(0,v.toJS)(e.store.detail),success:e.fetchData})}},{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,v.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.pathAddCluster=function(e,t){var a=e.match(/(\/kapis|api|apis)(.*)/);return t&&"default"!==t&&(0,E.default)(a)?"".concat(a[1],"/clusters/").concat(t).concat(a[2]):e},e.getAttrs=function(){var a=(0,v.toJS)(e.store.detail),r=e.props.match.params.cluster,n=a.spec,o=void 0===n?{}:n,l=(0,g.default)(o,"config.isBinaryURL",""),c=e.s2iRunStore.runDetail.binaryName,u=(0,g.default)(o,"config.sourceUrl",""),i=(0,g.default)((0,O.parseUrl)(u),"pathname","/".concat(u)),s=e.pathAddCluster(i,r),f="".concat(window.location.protocol,"//").concat(window.location.host,"/b2i_download").concat(s),d=(0,g.default)(a,"spec.config.secretCode",""),p="http://s2ioperator-trigger-service.kubesphere-devops-system.svc/s2itrigger/v1alpha1/general/namespaces/".concat(a.namespace,"/s2ibuilders/").concat(a.name,"/").concat(d?"?secretCode=".concat(d):"");return[{name:t("NAME"),value:a.name},{name:t("PROJECT"),value:a.namespace},{name:t("TYPE"),value:t(a.type)},{name:t("BUILDER_IMAGE"),value:(0,g.default)(o,"config.builderImage","-")},{name:t("IMAGE_NAME"),value:(0,g.default)(o,"config.imageName","-")},{name:t("PULL_POLICY"),value:(0,g.default)(o,"config.builderPullPolicy","-")},{name:t("SOURCE_URL"),value:l?h.default.createElement("a",{href:f,download:!0},c):u},{name:t("REMOTE_TRIGGER"),value:h.default.createElement(h.default.Fragment,null,h.default.createElement("span",null,p),h.default.createElement(T.CopyToClipboard,{text:p,onCopy:e.handleCopy},h.default.createElement(b.Icon,{name:"copy",changeable:!0})))},{name:t("CREATION_TIME_TCAP"),value:(0,O.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store,s2iRunStore:this.s2iRunStore,resourceStore:this.resourceStore};if(this.store.isLoading||this.s2iRunStore.isLoading)return h.default.createElement(b.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,O.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("IMAGE_BUILDER_PL"),url:this.listUrl}]};return h.default.createElement(k.default,(0,l.default)({stores:e},a,{routes:(0,w.default)(this.props.match.path)}))}},{key:"module",get:function(){return"s2ibuilders"}},{key:"name",get:function(){return"IMAGE_BUILDER"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"params",get:function(){return this.props.match.params}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"".concat(t?"/".concat(t):"","/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module)}}]),r}(h.default.Component))||o)||o)||o;a.default=A},3397:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(634),o=r(a(3398)),l=r(a(3405)),c=r(a(3406)),u=r(a(3407)),i=r(a(3408));t.default=function(e){return[{path:"".concat(e,"/records"),title:"RUN_RECORDS",component:o.default,excat:!0},{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:l.default,excat:!0},{path:"".concat(e,"/image-artifacts"),title:"IMAGE_ARTIFACTS",component:i.default,excat:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:c.default,excat:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:u.default,excat:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/records"),exact:!0})]}},3398:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=n(r(16)),p=r(70),m=n(r(3399)),h=n(r(1507)),v=n(r(3404));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,p.inject)("detailStore","s2iRunStore")(o=(0,p.observer)(o=function(e){(0,u.default)(r,e);var a=y(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.match.params,a=this.props.s2iRunStore.runDetail;return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:v.default.title},t("LAST_BUILD_ENVIRONMENT")),f.default.createElement("div",{className:v.default.card},f.default.createElement(m.default,{isB2i:this.isB2i,runDetail:a,params:e})),f.default.createElement("div",{className:v.default.title},t("RUN_RECORDS")),f.default.createElement("div",{className:v.default.card},f.default.createElement(h.default,{isB2i:this.isB2i,params:e})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"isB2i",get:function(){return(0,d.default)(this.store.detail,"spec.config.isBinaryURL")}}]),r}(f.default.Component))||o)||o;a.default=g},3399:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(12)),l=n(r(13)),c=n(r(19)),u=n(r(20)),i=n(r(18)),s=n(r(0)),f=n(r(3)),d=r(25),p=n(r(16)),m=n(r(23)),h=r(37),v=n(r(3400));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).pathAddCluster=function(e,t){var a=e.match(/(\/kapis|api|apis)(.*)/);return t&&"default"!==t&&(0,m.default)(a)?"".concat(a[1],"/clusters/").concat(t).concat(a[2]):e},e}return(0,l.default)(r,[{key:"renderB2i",value:function(){var e=this.props,a=e.className,r=e.params,n=e.runDetail,o=n.builderImage,l=n.sourceUrl,c=n.binaryName,u=n.binarySize,i=n.status,m=r.cluster,y=(0,p.default)((0,h.parseUrl)(l),"pathname","/".concat(l)),g=this.pathAddCluster(y,m),E="".concat(window.location.protocol,"//").concat(window.location.host,"/b2i_download").concat(g);return s.default.createElement("ul",{className:(0,f.default)(v.default.builderContent,a)},s.default.createElement("li",null,s.default.createElement("span",{className:v.default.icon},s.default.createElement(d.Icon,{name:(0,h.getLanguageName)(o),size:40})),s.default.createElement("div",{className:v.default.info},s.default.createElement("p",{className:v.default.value,title:o},o),s.default.createElement("p",{className:v.default.name},t("BUILDER_IMAGE_SCAP")))),s.default.createElement("li",{className:v.default.downloadContent},s.default.createElement("a",{href:"Success"!==i?null:E,download:!0},s.default.createElement("span",{className:v.default.icon},s.default.createElement(d.Icon,{name:"resource",size:40})),s.default.createElement("div",{className:v.default.info},s.default.createElement("p",{className:v.default.value,title:c},c),s.default.createElement("p",{className:v.default.name},t("FILE_SIZE_VALUE",{value:(0,h.formatSize)(u)}))))))}},{key:"render",value:function(){var e=this.props,a=e.className;if(e.isB2i)return this.renderB2i();var r=this.props.runDetail,n=r.sourceUrl,o=r.builderImage,l=r.revisionId;return s.default.createElement("ul",{className:(0,f.default)(v.default.builderContent,a)},s.default.createElement("li",null,s.default.createElement("span",{className:v.default.icon,style:{backgroundImage:"url('/assets/".concat((0,h.getLanguageName)(o),".png')")}}),s.default.createElement("div",{className:v.default.info},s.default.createElement("p",{className:v.default.value,title:o},o),s.default.createElement("p",{className:v.default.name},t("BUILDER_IMAGE_SCAP")))),s.default.createElement("li",null,s.default.createElement("span",{className:v.default.icon},s.default.createElement(d.Icon,{name:"resource",size:40})),s.default.createElement("div",{className:v.default.info},s.default.createElement("p",{className:v.default.value,title:n},n),s.default.createElement("p",{className:v.default.name},t("SOURCE_URL")))),s.default.createElement("li",null,s.default.createElement(d.Icon,{name:"branch",className:v.default.icon}),s.default.createElement("div",{className:v.default.info},s.default.createElement("p",{className:v.default.value},l||"master"),s.default.createElement("p",{className:v.default.name},t("BRANCH_SI")))))}}]),r}(s.default.Component);a.default=g},3400:function(e,t,a){e.exports={builderContent:"BkSp13POZ-js2HUtWNRz0",icon:"Hd8bCjdE9-3_BACC2Bo_J",info:"_2WqRttYeptGxvqC17MIBCN",value:"J0OCuGgJwMRDp3cpr2zcL",name:"_2czgyMcWaHAVtdYdIG8PsL",downloadContent:"_1WjbXqIcDDGS8lq6Z4mPe7"}},3401:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(21)),c=n(r(49)),u=n(r(50)),i=n(r(12)),s=n(r(13)),f=n(r(19)),d=n(r(20)),p=n(r(18)),m=n(r(0)),h=n(r(3)),v=r(70),y=n(r(16)),g=n(r(23)),E=r(25),b=n(r(729)),O=r(37),_=n(r(3402));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R=(0,v.observer)(o=function(e){(0,f.default)(r,e);var a=S(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).toggleShowLog=function(){var e=n.state.showLog;e?clearTimeout(n.refreshTimer):globals.app.hasKSModule("logging")?(n.getLog(),n.setState({noModuleMsg:null})):(n.store.logData.isLoading=!1,n.setState({noModuleMsg:t("LOG_MODULE_NOT_INSTALLED")})),n.setState({showLog:!e})},n.getLog=(0,u.default)(c.default.mark((function e(){var t,a,r,o,l,u;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.runDetail,a=t.logURL,r=t.status,o=t.cluster,l=n.store.logData,u="Building"===r||"Unknown"===r,clearTimeout(n.refreshTimer),a){e.next=7;break}return n.refreshTimer=setTimeout(n.getLog,4e3),e.abrupt("return");case 7:return e.next=9,n.store.getLog(a,o);case 9:if(n.handleScrollToBottom(),!l.hasMore){e.next=13;break}return n.getLog(),e.abrupt("return");case 13:u&&(n.refreshTimer=setTimeout(n.getLog,4e3));case 14:case"end":return e.stop()}}),e)}))),n.handleScrollToBottom=function(){var e=n.LogContent.current;e&&(e.scrollTop=e.scrollHeight)},n.showLog=function(){n.setState({showLog:!0})},n.stopPropagation=function(e){e&&e.stopPropagation()},n.pathAddCluster=function(e,t){var a=e.match(/(\/kapis|api|apis)(.*)/);return t&&"default"!==t&&(0,g.default)(a)?"".concat(a[1],"/clusters/").concat(t).concat(a[2]):e},n.handleDownload=function(){var e=n.props.runDetail,t=e.sourceUrl,a=e.cluster,r=(0,y.default)((0,O.parseUrl)(t),"pathname","/".concat(t)),o=n.pathAddCluster(r,a),l="".concat(window.location.protocol,"//").concat(window.location.host,"/b2i_download").concat(o);window.open(l)},n.renderLog=function(){var e=n.store.logData,a=e.log,r=e.isLoading,o=n.state.noModuleMsg;return n.state.showLog?r?m.default.createElement("div",{className:_.default.logContent,onClick:n.stopPropagation},m.default.createElement(E.Loading,null)):m.default.createElement("div",{className:_.default.logContent,onClick:n.stopPropagation},m.default.createElement("pre",{ref:n.LogContent},o||a||t("LOADING_DOTS"))):null},n.renderDetailInfo=function(){var e=n.props.runDetail,a=e.imageName,r=e.branch,o=e.binaryName,l=e.binarySize,c=e.status;if(!n.props.isB2i)return m.default.createElement("span",{className:_.default.branchName},m.default.createElement(E.Icon,{name:"branch"}),m.default.createElement("span",null,r||"master"));var u=m.default.createElement("div",{className:_.default.artifactContent},m.default.createElement("p",{className:_.default.title},t("ARTIFACT_FILE")),m.default.createElement("div",{className:_.default.info},m.default.createElement(E.Icon,{name:"file"}),m.default.createElement("p",null,o," ",m.default.createElement("span",null,(0,O.formatSize)(l)))),m.default.createElement("div",{className:_.default.info},m.default.createElement(E.Icon,{name:"templet"}),m.default.createElement("p",null,a)),m.default.createElement(E.Button,{onClick:n.handleDownload,type:"primary",disabled:"Successful"!==c},t("DOWNLOAD_ARTIFACT")));return m.default.createElement(E.Tooltip,{className:_.default.tooltip,content:u,trigger:"hover"},m.default.createElement(E.Icon,{name:"file"}))},n.state={showLog:!1,noModuleMsg:null},n.LogContent=m.default.createRef(),n.store=e.store,n}return(0,s.default)(r,[{key:"componentWillUnmount",value:function(){clearTimeout(this.refreshTimer),this.setState({noModuleMsg:null})}},{key:"render",value:function(){var e=this.props.runDetail,a=e.count,r=e.status,n=e.imageName,o=e.startTime,c=e.name;return this.props.loading?null:m.default.createElement("ul",{className:(0,h.default)(_.default.item,(0,l.default)({},_.default.active,this.state.showLog)),onClick:this.toggleShowLog},m.default.createElement("li",null,m.default.createElement("div",{className:_.default.value},"#",a," ",this.renderDetailInfo()),m.default.createElement("div",{className:_.default.label},t("SERIAL_NUMBER"))),m.default.createElement("li",null,m.default.createElement("div",{className:_.default.value},m.default.createElement(b.default,{className:_.default.status,type:r,name:t(t(r)),flicker:!0})),m.default.createElement("div",{className:_.default.label},t("STATUS"))),m.default.createElement("li",null,m.default.createElement("div",{className:_.default.value},n),m.default.createElement("div",{className:_.default.label},t("IMAGE_NAME_SCAP"))),m.default.createElement("li",null,m.default.createElement("div",{className:_.default.value},(0,O.getLocalTime)(o).format("YYYY-MM-DD HH:mm:ss")),m.default.createElement("div",{className:_.default.label},t("START_TIME_SCAP"))),m.default.createElement("li",null,m.default.createElement("div",{className:_.default.value},t("IMAGE_NAME_".concat(r.toUpperCase()),{name:c})),m.default.createElement("div",{className:_.default.label},t("LAST_MESSAGE_SCAP"))),m.default.createElement(E.Icon,{className:_.default.icon,name:"chevron-down"}),this.renderLog())}}]),r}(m.default.Component))||o;a.default=R},3402:function(e,t,a){e.exports={item:"_3elQcs0a3jxkIwI3ZFGz_Q",value:"_3T4SMPwXMkA9bkeSRaiPDy",status:"_3SKf3UE7oGRjx5y36ufLXK",label:"oc_0Y06yilwcM1rPeAuLM",icon:"_1KE-WZA890ochiXMG_1CsK",branchName:"_3mBN7MemPAoSkAQ7aRCpd3",active:"AkkmSAa32PoBGb8x5Xva1",logContent:"x1_tdtG8vUDtmFG2c4NB9",tooltip:"_3YH0xMx3dBN7B0SttPsUkk",artifactContent:"_3IzWACmQ7p6fvAT9-WdUuE",title:"_30zaQHexLzCS9qKs8vmomE",info:"_2KW1j46oxR29q8pnufGWGt"}},3403:function(e,t,a){e.exports={content:"_1slgUd1teNIfY0n58nGO",header:"_33WAUE8MIh2OonzlUeXWfw",search:"_1R7RIjj9k5xB0OOtOnTZob",actions:"_1IG1p_n9Tvf8h2SYQTY35x"}},3404:function(e,t,a){e.exports={main:"_3cgE6f9b9x33gijePTtBOg",table:"_3j0UWPstvzLi3v0mSQm6PS",clickable:"_3h3VphlUJpSBWERve0cBEG",content:"_1qU2sf5wNS4NAGpul7wEmg",title:"uMJf_Dj6zXK_em4b4IvwU",card:"_iGPpNLR9zhNV2XUNi0K-"}},3405:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(a(21)),l=r(a(12)),c=r(a(13)),u=r(a(19)),i=r(a(20)),s=r(a(18)),f=r(a(0)),d=a(70),p=a(964),m=r(a(806)),h=a(25);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=(0,d.inject)("detailStore","s2iRunStore")(n=(0,d.observer)(n=function(e){(0,u.default)(a,e);var t=g(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"renderPods",value:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster;return f.default.createElement(m.default,{prefix:"/".concat(t?"/".concat(t):"","/clusters/").concat(a),detail:y({cluster:a},this.store.jobDetail)})}},{key:"renderContent",value:function(){return this.store.isLoading?f.default.createElement(h.Loading,null):f.default.createElement("div",null,this.renderContainerPorts(),this.renderPods())}},{key:"store",get:function(){return this.props.s2iRunStore}}]),a}(p.Component))||n)||n;t.default=E},3406:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(a(12)),l=r(a(13)),c=r(a(19)),u=r(a(20)),i=r(a(18)),s=r(a(0)),f=a(5),d=a(70),p=r(a(32)),m=r(a(16)),h=r(a(1413)),v=r(a(1414));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var g=(0,d.inject)("s2iRunStore")(n=(0,d.observer)(n=function(e){(0,c.default)(a,e);var t=y(a);function a(e){var r;return(0,o.default)(this,a),(r=t.call(this,e)).fetchData=function(){r.envStore.fetchList({cluster:r.cluster,namespace:r.namespace,containers:r.containers})},r.envStore=new h.default,r}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=(0,f.toJS)(this.envStore.list),t=e.data,a=e.isLoading;return s.default.createElement("div",null,t.map((function(e,t){return s.default.createElement(v.default,{key:t,detail:e,expand:0===t,loading:a})})))}},{key:"module",get:function(){return this.props.module}},{key:"store",get:function(){return this.props.s2iRunStore}},{key:"namespace",get:function(){return this.store.jobDetail.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"containers",get:function(){var e=(0,f.toJS)(this.store.jobDetail),t=e.spec,a=e.containers,r=void 0===a?[]:a;return"containers"===this.module?[e]:(0,p.default)(r)?(0,p.default)(t)?[]:(0,m.default)(t,"template.spec.containers",[]):r}},{key:"test",get:function(){return"2"}}]),a}(s.default.Component))||n)||n;t.default=g},3407:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.default=void 0;var n=r(a(12)),o=r(a(13)),l=r(a(19)),c=r(a(20)),u=r(a(18)),i=r(a(0)),s=a(5),f=a(70),d=a(37),p=r(a(1142)),m=r(a(1143));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,l.default)(a,e);var t=h(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).fetchData=function(){var e=r.store.jobDetail,t=e.uid,a=e.name,n=e.namespace,o=r.props.match.params.cluster,l={"involvedObject.name":a,"involvedObject.namespace":n,"involvedObject.kind":"Job","involvedObject.uid":t};r.eventStore.fetchList({cluster:o,namespace:r.namespace,fieldSelector:(0,d.joinSelector)(l)})},r.eventStore=new p.default,r.fetchData(),r}return(0,o.default)(a,[{key:"render",value:function(){var e=(0,s.toJS)(this.eventStore.list),t=e.data,a=e.isLoading;return i.default.createElement(m.default,{data:t,loading:a})}},{key:"store",get:function(){return this.props.s2iRunStore}},{key:"namespace",get:function(){return this.store.jobDetail.namespace}}]),a}(i.default.Component),y=(0,f.inject)("s2iRunStore")((0,f.observer)(v));t.default=y;var g=v;t.Component=g},3408:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(70),p=n(r(741)),m=n(r(3409)),h=n(r(3412));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,d.observer)(o=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.match.params;return f.default.createElement(p.default,{className:h.default.main,title:t("IMAGE_ARTIFACTS")},f.default.createElement(m.default,{params:e}))}}]),r}(f.default.Component))||o;a.default=y},3409:function(e,t,a){"use strict";var r=a(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(a(49)),l=r(a(21)),c=r(a(50)),u=r(a(12)),i=r(a(13)),s=r(a(19)),f=r(a(20)),d=r(a(18)),p=r(a(0)),m=a(70),h=r(a(1507)),v=r(a(3410));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=(0,m.observer)(n=function(e){(0,s.default)(a,e);var t=E(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).fetchData=(0,c.default)(o.default.mark((function t(){var a,r,n,l,c=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:{},r=e.props,n=r.limit,(l=r.params).status="Successful",t.next=5,e.store.fetchS2IRunRecords(g(g({limit:n},l),a));case 5:e.setAutoRefresh();case 6:case"end":return t.stop()}}),t)}))),e}return(0,i.default)(a,[{key:"renderItem",value:function(e){var t=this.store.list.isLoading;return p.default.createElement(v.default,{key:e.name,runDetail:e,loading:t,store:this.store})}}]),a}(h.default))||n;t.default=b},3410:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l=n(r(12)),c=n(r(13)),u=n(r(19)),i=n(r(20)),s=n(r(18)),f=n(r(0)),d=r(70),p=r(37),m=r(25),h=r(1112),v=n(r(3411));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,d.observer)(o=function(e){(0,u.default)(r,e);var a=y(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).handleCopy=function(){m.Notify.success({content:t("COPY_SUCCESSFUL")})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.runDetail,a=e.imageName,r=e.imageCreated,n=e.imageSize,o=e.commandPull;return this.props.loading?null:f.default.createElement("ul",{className:v.default.item},f.default.createElement(m.Icon,{name:"cdn",size:40}),f.default.createElement("li",null,f.default.createElement("div",{className:v.default.value},a),f.default.createElement("div",{className:v.default.label},t("IMAGE_NAME_SCAP"))),f.default.createElement("li",null,f.default.createElement("div",{className:v.default.value},(0,p.formatSize)(n)),f.default.createElement("div",{className:v.default.label},t("IMAGE_SIZE_SCAP"))),f.default.createElement("li",null,f.default.createElement("div",{className:v.default.value},o,f.default.createElement(h.CopyToClipboard,{text:o,onCopy:this.handleCopy},f.default.createElement(m.Icon,{className:v.default.copyIcon,name:"copy",changeable:!0}))),f.default.createElement("div",{className:v.default.label},t("PULL_COMMAND_SCAP"))),f.default.createElement("li",null,f.default.createElement("div",{className:v.default.value},(0,p.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss")),f.default.createElement("div",{className:v.default.label},t("RELEASE_TIME_SCAP"))))}}]),r}(f.default.Component))||o;a.default=g},3411:function(e,t,a){e.exports={item:"_1c8i_eoUlHMB2lYN5xgXvt",value:"_25Hi7XHKhZ1owsalTEwjnb",status:"_3SFV9llOs6oQvRXeuhE9Tc",label:"_2pypsciA7t2SNBk15A_i0Q",icon:"_2e4TfXHI2JnlLkg62MITNS",copyIcon:"_1HwMmSXmFXLnNvOlIBrqUP"}},3412:function(e,t,a){e.exports={table:"JkzBFOqQxJDXdFS8jg9xD"}},3413:function(e,a,r){"use strict";var n=r(6);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,l,c,u,i=n(r(71)),s=n(r(49)),f=n(r(50)),d=n(r(21)),p=n(r(91)),m=n(r(12)),h=n(r(13)),v=n(r(135)),y=n(r(19)),g=n(r(20)),E=n(r(18)),b=n(r(74)),O=(n(r(92)),n(r(0))),_=r(70),S=r(635),R=n(r(724)),C=n(r(1028)),k=r(25),T=n(r(767)),w=r(5),P=n(r(3414));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var j=(0,_.inject)("rootStore")(o=(0,_.observer)(o=(0,S.trigger)((l=function(e){(0,y.default)(r,e);var a=A(r);function r(){var e;(0,m.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).store=new T.default,(0,p.default)(e,"gatewayList",c,(0,v.default)(e)),(0,p.default)(e,"isLoading",u,(0,v.default)(e)),e.getProjectGateway=function(){var t=N({},e.props.match.params);return e.store.getGatewayByProject(N(N({},t),{},{cluster:e.cluster}))},e.getInitGateway=(0,f.default)(s.default.mark((function t(){var a;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.getProjectGateway();case 3:a=t.sent,e.gatewayList=a,e.isLoading=!1;case 6:case"end":return t.stop()}}),t)}))),e.renderClusterGatewayTitle=function(){return O.default.createElement("div",{className:P.default.title},O.default.createElement("span",null," ",t("CLUSTER_GATEWAY")),O.default.createElement(k.Tooltip,{content:t("CLUSTER_GATEWAY_GUIDE_DESC"),placement:"top"},O.default.createElement(k.Icon,{name:"question",size:20})))},e.renderProjectTitle=function(){return O.default.createElement("div",{className:P.default.title},t("PROJECT_GATEWAY"))},e.renderOperations=function(a){var r=a.url,n=a.disabled;return O.default.createElement(k.Button,{disabled:n,onClick:function(){e.props.rootStore.routing.push(r)}},t("VIEW_DETAILS"))},e.renderGatewayCard=function(){return e.gatewayList.map((function(t,a,r){var n=0===a;return O.default.createElement(C.default,(0,i.default)({key:a,type:n?"cluster":"project",detail:t,actions:e.enabledActions},e.props,{store:e.store,getData:e.getInitGateway,title:n?e.renderClusterGatewayTitle():e.renderProjectTitle(),prefix:n?null:e.prefix,renderOperations:n?e.renderOperations:null,gatewayList:(0,w.toJS)(r)}))}))},e}return(0,h.default)(r,[{key:"componentDidMount",value:function(){this.getInitGateway()}},{key:"render",value:function(){return O.default.createElement(O.default.Fragment,null,O.default.createElement(R.default,{icon:"loadbalancer",title:t("GATEWAY_SETTINGS"),description:t("PROJECT_GATEWAY_DESC"),tabs:this.tabs}),O.default.createElement(k.Loading,{spinning:this.isLoading},O.default.createElement(O.default.Fragment,null,this.renderGatewayCard())))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"prefix",get:function(){return this.props.match.url}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"project-settings",project:this.namespace,cluster:this.cluster})}}]),r}(O.default.Component),c=(0,b.default)(l.prototype,"gatewayList",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,b.default)(l.prototype,"isLoading",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=l))||o)||o)||o;a.default=j},3414:function(e,t,a){e.exports={title:"x03JOCFwsZBPAfz9u46HI"}},719:function(e,t,a){"use strict";var r=a(6),n=a(72);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l=r(a(49)),c=r(a(21)),u=r(a(50)),i=r(a(12)),s=r(a(13)),f=r(a(19)),d=r(a(20)),p=r(a(18)),m=n(a(0)),h=a(70),v=a(25),y=r(a(73)),g=r(a(191)),E=a(634),b=r(a(753)),O=r(a(637)),_=r(a(3167));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=(0,h.inject)("rootStore")(o=(0,h.observer)(o=function(e){(0,f.default)(r,e);var t,a=C(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).store=new b.default,t.clusterStore=new O.default,t.init(e.match.params),t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){var t=e.match.params,a=t.namespace,r=t.cluster;this.project===a&&this.cluster===r||this.init(this.props.match.params)}},{key:"init",value:(t=(0,u.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,Promise.all([this.store.fetchDetail(t),this.clusterStore.fetchDetail({name:t.cluster}),this.props.rootStore.getRules({workspace:t.workspace})]);case 3:if(this.store.detail.name){e.next=5;break}return e.abrupt("return",this.props.rootStore.routing.push("/404"));case 5:return e.next=7,this.props.rootStore.getRules(t);case 7:(0,y.default)(globals,"clusterConfig.".concat(t.cluster),this.clusterStore.detail.configz),globals.app.cacheHistory(this.props.match.url,R(R({type:"Project"},(0,g.default)(this.store.detail,["name","aliasName"])),{},{cluster:(0,g.default)(this.clusterStore.detail,["name","aliasName","group","provider"])})),this.store.initializing=!1;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?m.default.createElement(v.Loading,{className:"ks-page-loading"}):m.default.createElement(h.Provider,{projectStore:this.store},(0,E.renderRoutes)(_.default))}},{key:"project",get:function(){return this.props.match.params.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),r}(m.Component))||o)||o;t.default=k}}]);